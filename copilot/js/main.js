"use strict";var wvt=Object.create;var kP=Object.defineProperty;var Gke=Object.getOwnPropertyDescriptor;var Svt=Object.getOwnPropertyNames;var _vt=Object.getPrototypeOf,Rvt=Object.prototype.hasOwnProperty;var Wke=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),jke=t=>{throw TypeError(t)};var s=(t,e)=>kP(t,"name",{value:e,configurable:!0});var bg=(t,e)=>()=>(t&&(e=t(t=0)),e);var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ma=(t,e)=>{for(var r in e)kP(t,r,{get:e[r],enumerable:!0})},Vke=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Svt(e))!Rvt.call(t,i)&&i!==r&&kP(t,i,{get:()=>e[i],enumerable:!(n=Gke(e,i))||n.enumerable});return t};var Fe=(t,e,r)=>(r=t!=null?wvt(_vt(t)):{},Vke(e||!t||!t.__esModule?kP(r,"default",{value:t,enumerable:!0}):r,t)),kvt=t=>Vke(kP({},"__esModule",{value:!0}),t),jd=(t,e,r,n)=>{for(var i=n>1?void 0:n?Gke(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&kP(e,r,i),i},ha=(t,e)=>(r,n)=>e(r,n,t);var Ile=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&jke("Object expected");var n,i;r&&(n=e[Wke("asyncDispose")]),n===void 0&&(n=e[Wke("dispose")],r&&(i=n)),typeof n!="function"&&jke("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},Tle=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,f=bg(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var Yke=H(wle=>{f();var zke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");wle.encode=function(t){if(0<=t&&t<zke.length)return zke[t];throw new TypeError("Must be between 0 and 63: "+t)};wle.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,d=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+d:t==c?62:t==l?63:-1}});var Rle=H(_le=>{f();var Kke=Yke(),Sle=5,Jke=1<<Sle,Xke=Jke-1,Zke=Jke;function Pvt(t){return t<0?(-t<<1)+1:(t<<1)+0}s(Pvt,"toVLQSigned");function Dvt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(Dvt,"fromVLQSigned");_le.encode=s(function(e){var r="",n,i=Pvt(e);do n=i&Xke,i>>>=Sle,i>0&&(n|=Zke),r+=Kke.encode(n);while(i>0);return r},"base64VLQ_encode");_le.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=Kke.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&Zke),l&=Xke,o=o+(l<<a),a+=Sle}while(c);n.value=Dvt(o),n.rest=r},"base64VLQ_decode")});var BP=H(sd=>{f();function Bvt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(Bvt,"getArg");sd.getArg=Bvt;var e5e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Nvt=/^data:.+\,.+$/;function dM(t){var e=t.match(e5e);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(dM,"urlParse");sd.urlParse=dM;function PP(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(PP,"urlGenerate");sd.urlGenerate=PP;function kle(t){var e=t,r=dM(t);if(r){if(!r.path)return t;e=r.path}for(var n=sd.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,PP(r)):e}s(kle,"normalize");sd.normalize=kle;function t5e(t,e){t===""&&(t="."),e===""&&(e=".");var r=dM(e),n=dM(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),PP(r);if(r||e.match(Nvt))return e;if(n&&!n.host&&!n.path)return n.host=e,PP(n);var i=e.charAt(0)==="/"?e:kle(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,PP(n)):i}s(t5e,"join");sd.join=t5e;sd.isAbsolute=function(t){return t.charAt(0)==="/"||e5e.test(t)};function Lvt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(Lvt,"relative");sd.relative=Lvt;var r5e=function(){var t=Object.create(null);return!("__proto__"in t)}();function n5e(t){return t}s(n5e,"identity");function Mvt(t){return i5e(t)?"$"+t:t}s(Mvt,"toSetString");sd.toSetString=r5e?n5e:Mvt;function Fvt(t){return i5e(t)?t.slice(1):t}s(Fvt,"fromSetString");sd.fromSetString=r5e?n5e:Fvt;function i5e(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(i5e,"isProtoString");function Ovt(t,e,r){var n=DP(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:DP(t.name,e.name)}s(Ovt,"compareByOriginalPositions");sd.compareByOriginalPositions=Ovt;function Qvt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=DP(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:DP(t.name,e.name)}s(Qvt,"compareByGeneratedPositionsDeflated");sd.compareByGeneratedPositionsDeflated=Qvt;function DP(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(DP,"strcmp");function Uvt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=DP(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:DP(t.name,e.name)}s(Uvt,"compareByGeneratedPositionsInflated");sd.compareByGeneratedPositionsInflated=Uvt;function qvt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(qvt,"parseSourceMapInput");sd.parseSourceMapInput=qvt;function Hvt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=dM(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=t5e(PP(n),e)}return kle(e)}s(Hvt,"computeSourceURL");sd.computeSourceURL=Hvt});var Ble=H(o5e=>{f();var Ple=BP(),Dle=Object.prototype.hasOwnProperty,VS=typeof Map<"u";function iv(){this._array=[],this._set=VS?new Map:Object.create(null)}s(iv,"ArraySet");iv.fromArray=s(function(e,r){for(var n=new iv,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");iv.prototype.size=s(function(){return VS?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");iv.prototype.add=s(function(e,r){var n=VS?e:Ple.toSetString(e),i=VS?this.has(e):Dle.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(VS?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");iv.prototype.has=s(function(e){if(VS)return this._set.has(e);var r=Ple.toSetString(e);return Dle.call(this._set,r)},"ArraySet_has");iv.prototype.indexOf=s(function(e){if(VS){var r=this._set.get(e);if(r>=0)return r}else{var n=Ple.toSetString(e);if(Dle.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");iv.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");iv.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");o5e.ArraySet=iv});var c5e=H(a5e=>{f();var s5e=BP();function $vt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||s5e.compareByGeneratedPositionsInflated(t,e)<=0}s($vt,"generatedPositionAfter");function jH(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(jH,"MappingList");jH.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");jH.prototype.add=s(function(e){$vt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");jH.prototype.toArray=s(function(){return this._sorted||(this._array.sort(s5e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");a5e.MappingList=jH});var Nle=H(l5e=>{f();var fM=Rle(),Uc=BP(),GH=Ble().ArraySet,Wvt=c5e().MappingList;function hm(t){t||(t={}),this._file=Uc.getArg(t,"file",null),this._sourceRoot=Uc.getArg(t,"sourceRoot",null),this._skipValidation=Uc.getArg(t,"skipValidation",!1),this._sources=new GH,this._names=new GH,this._mappings=new Wvt,this._sourcesContents=null}s(hm,"SourceMapGenerator");hm.prototype._version=3;hm.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new hm({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Uc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Uc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");hm.prototype.addMapping=s(function(e){var r=Uc.getArg(e,"generated"),n=Uc.getArg(e,"original",null),i=Uc.getArg(e,"source",null),o=Uc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");hm.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Uc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Uc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Uc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");hm.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Uc.relative(o,i));var a=new GH,c=new GH;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=Uc.join(n,l.source)),o!=null&&(l.source=Uc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var d=l.source;d!=null&&!a.has(d)&&a.add(d);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=Uc.join(n,l)),o!=null&&(l=Uc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");hm.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");hm.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!Uc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=fM.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=fM.encode(p-a),a=p,l+=fM.encode(u.originalLine-1-i),i=u.originalLine-1,l+=fM.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),l+=fM.encode(d-o),o=d)),c+=l}return c},"SourceMapGenerator_serializeMappings");hm.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Uc.relative(r,n));var i=Uc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");hm.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");hm.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");l5e.SourceMapGenerator=hm});var u5e=H(zS=>{f();zS.GREATEST_LOWER_BOUND=1;zS.LEAST_UPPER_BOUND=2;function Lle(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Lle(a,e,r,n,i,o):o==zS.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Lle(t,a,r,n,i,o):o==zS.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Lle,"recursiveSearch");zS.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Lle(-1,r.length,e,r,n,i||zS.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var f5e=H(d5e=>{f();function Mle(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(Mle,"swap");function jvt(t,e){return Math.round(t+Math.random()*(e-t))}s(jvt,"randomIntInRange");function Fle(t,e,r,n){if(r<n){var i=jvt(r,n),o=r-1;Mle(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,Mle(t,o,c));Mle(t,o+1,c);var l=o+1;Fle(t,e,r,l-1),Fle(t,e,l+1,n)}}s(Fle,"doQuickSort");d5e.quickSort=function(t,e){Fle(t,e,0,t.length-1)}});var m5e=H(VH=>{f();var Fr=BP(),Ole=u5e(),NP=Ble().ArraySet,Gvt=Rle(),pM=f5e().quickSort;function Hs(t,e){var r=t;return typeof t=="string"&&(r=Fr.parseSourceMapInput(t)),r.sections!=null?new Ig(r,e):new vu(r,e)}s(Hs,"SourceMapConsumer");Hs.fromSourceMap=function(t,e){return vu.fromSourceMap(t,e)};Hs.prototype._version=3;Hs.prototype.__generatedMappings=null;Object.defineProperty(Hs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Hs.prototype.__originalMappings=null;Object.defineProperty(Hs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Hs.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Hs.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Hs.GENERATED_ORDER=1;Hs.ORIGINAL_ORDER=2;Hs.GREATEST_LOWER_BOUND=1;Hs.LEAST_UPPER_BOUND=2;Hs.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Hs.GENERATED_ORDER,a;switch(o){case Hs.GENERATED_ORDER:a=this._generatedMappings;break;case Hs.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=Fr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Hs.prototype.allGeneratedPositionsFor=s(function(e){var r=Fr.getArg(e,"line"),n={source:Fr.getArg(e,"source"),originalLine:r,originalColumn:Fr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Fr.compareByOriginalPositions,Ole.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:Fr.getArg(a,"generatedLine",null),column:Fr.getArg(a,"generatedColumn",null),lastColumn:Fr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:Fr.getArg(a,"generatedLine",null),column:Fr.getArg(a,"generatedColumn",null),lastColumn:Fr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");VH.SourceMapConsumer=Hs;function vu(t,e){var r=t;typeof t=="string"&&(r=Fr.parseSourceMapInput(t));var n=Fr.getArg(r,"version"),i=Fr.getArg(r,"sources"),o=Fr.getArg(r,"names",[]),a=Fr.getArg(r,"sourceRoot",null),c=Fr.getArg(r,"sourcesContent",null),l=Fr.getArg(r,"mappings"),u=Fr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=Fr.normalize(a)),i=i.map(String).map(Fr.normalize).map(function(d){return a&&Fr.isAbsolute(a)&&Fr.isAbsolute(d)?Fr.relative(a,d):d}),this._names=NP.fromArray(o.map(String),!0),this._sources=NP.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return Fr.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(vu,"BasicSourceMapConsumer");vu.prototype=Object.create(Hs.prototype);vu.prototype.consumer=Hs;vu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Fr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};vu.fromSourceMap=s(function(e,r){var n=Object.create(vu.prototype),i=n._names=NP.fromArray(e._names.toArray(),!0),o=n._sources=NP.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return Fr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new p5e;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return pM(n.__originalMappings,Fr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");vu.prototype._version=3;Object.defineProperty(vu.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function p5e(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(p5e,"Mapping");vu.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,d=0,p={},m={},h=[],g=[],A,y,x,I,S;d<u;)if(e.charAt(d)===";")n++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(A=new p5e,A.generatedLine=n,I=d;I<u&&!this._charIsMappingSeparator(e,I);I++);if(y=e.slice(d,I),x=p[y],x)d+=y.length;else{for(x=[];d<I;)Gvt.decode(e,d,m),S=m.value,d=m.rest,x.push(S);if(x.length===2)throw new Error("Found a source, but no line and column");if(x.length===3)throw new Error("Found a source and line, but no column");p[y]=x}A.generatedColumn=i+x[0],i=A.generatedColumn,x.length>1&&(A.source=c+x[1],c+=x[1],A.originalLine=o+x[2],o=A.originalLine,A.originalLine+=1,A.originalColumn=a+x[3],a=A.originalColumn,x.length>4&&(A.name=l+x[4],l+=x[4])),g.push(A),typeof A.originalLine=="number"&&h.push(A)}pM(g,Fr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,pM(h,Fr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");vu.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return Ole.search(e,r,o,a)},"SourceMapConsumer_findMapping");vu.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");vu.prototype.originalPositionFor=s(function(e){var r={generatedLine:Fr.getArg(e,"line"),generatedColumn:Fr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Fr.compareByGeneratedPositionsDeflated,Fr.getArg(e,"bias",Hs.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Fr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Fr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Fr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Fr.getArg(i,"originalLine",null),column:Fr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");vu.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");vu.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Fr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Fr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");vu.prototype.generatedPositionFor=s(function(e){var r=Fr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Fr.getArg(e,"line"),originalColumn:Fr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Fr.compareByOriginalPositions,Fr.getArg(e,"bias",Hs.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Fr.getArg(o,"generatedLine",null),column:Fr.getArg(o,"generatedColumn",null),lastColumn:Fr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");VH.BasicSourceMapConsumer=vu;function Ig(t,e){var r=t;typeof t=="string"&&(r=Fr.parseSourceMapInput(t));var n=Fr.getArg(r,"version"),i=Fr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new NP,this._names=new NP;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=Fr.getArg(a,"offset"),l=Fr.getArg(c,"line"),u=Fr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Hs(Fr.getArg(a,"map"),e)}})}s(Ig,"IndexedSourceMapConsumer");Ig.prototype=Object.create(Hs.prototype);Ig.prototype.constructor=Hs;Ig.prototype._version=3;Object.defineProperty(Ig.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Ig.prototype.originalPositionFor=s(function(e){var r={generatedLine:Fr.getArg(e,"line"),generatedColumn:Fr.getArg(e,"column")},n=Ole.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Ig.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Ig.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Ig.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Fr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Ig.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=Fr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var d={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}pM(this.__generatedMappings,Fr.compareByGeneratedPositionsDeflated),pM(this.__originalMappings,Fr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");VH.IndexedSourceMapConsumer=Ig});var g5e=H(h5e=>{f();var Vvt=Nle().SourceMapGenerator,zH=BP(),zvt=/(\r?\n)/,Yvt=10,LP="$$$isSourceNode$$$";function V0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[LP]=!0,n!=null&&this.add(n)}s(V0,"SourceNode");V0.fromStringWithSourceMap=s(function(e,r,n){var i=new V0,o=e.split(zvt),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,d=null;return r.eachMapping(function(m){if(d!==null)if(l<m.generatedLine)p(d,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=zH.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?zH.join(n,m.source):m.source;i.add(new V0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");V0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[LP]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");V0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[LP]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");V0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[LP]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");V0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");V0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[LP]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");V0.prototype.setSourceContent=s(function(e,r){this.sourceContents[zH.toSetString(e)]=r},"SourceNode_setSourceContent");V0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][LP]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(zH.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");V0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");V0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new Vvt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,d){r.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||c!==d.column||l!==d.name)&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),o=d.source,a=d.line,c=d.column,l=d.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===Yvt?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(u,d){n.setSourceContent(u,d)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");h5e.SourceNode=V0});var A5e=H(YH=>{f();YH.SourceMapGenerator=Nle().SourceMapGenerator;YH.SourceMapConsumer=m5e().SourceMapConsumer;YH.SourceNode=g5e().SourceNode});var C5e=H((WSr,y5e)=>{f();var Kvt=Object.prototype.toString,Qle=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Jvt(t){return Kvt.call(t).slice(8,-1)==="ArrayBuffer"}s(Jvt,"isArrayBuffer");function Xvt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Qle?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(Xvt,"fromArrayBuffer");function Zvt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Qle?Buffer.from(t,e):new Buffer(t,e)}s(Zvt,"fromString");function eEt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Jvt(t)?Xvt(t,e,r):typeof t=="string"?Zvt(t,e):Qle?Buffer.from(t):new Buffer(t)}s(eEt,"bufferFrom");y5e.exports=eEt});var S5e=H((KS,$le)=>{f();var tEt=A5e().SourceMapConsumer,Ule=require("path"),ky;try{ky=require("fs"),(!ky.existsSync||!ky.readFileSync)&&(ky=null)}catch{}var rEt=C5e();function v5e(t,e){return t.require(e)}s(v5e,"dynamicRequire");var E5e=!1,x5e=!1,qle=!1,mM="auto",YS={},hM={},nEt=/^data:application\/json[^,]+base64,/,Mb=[],Fb=[];function Wle(){return mM==="browser"?!0:mM==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(Wle,"isInBrowser");function iEt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(iEt,"hasGlobalProcessEventEmitter");function oEt(){return typeof process=="object"&&process!==null?process.version:""}s(oEt,"globalProcessVersion");function sEt(){if(typeof process=="object"&&process!==null)return process.stderr}s(sEt,"globalProcessStderr");function aEt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(aEt,"globalProcessExit");function KH(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(KH,"handlerExec");var jle=KH(Mb);Mb.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in YS)return YS[t];var e="";try{if(ky)ky.existsSync(t)&&(e=ky.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return YS[t]=e});function Hle(t,e){if(!t)return e;var r=Ule.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+Ule.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+Ule.resolve(r.slice(i.length),e)}s(Hle,"supportRelativeURL");function cEt(t){var e;if(Wle())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=jle(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(cEt,"retrieveSourceMapURL");var Gle=KH(Fb);Fb.push(function(t){var e=cEt(t);if(!e)return null;var r;if(nEt.test(e)){var n=e.slice(e.indexOf(",")+1);r=rEt(n,"base64").toString(),e=t}else e=Hle(t,e),r=jle(e);return r?{url:e,map:r}:null});function Vle(t){var e=hM[t.source];if(!e){var r=Gle(t.source);r?(e=hM[t.source]={url:r.url,map:new tEt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=Hle(e.url,i);YS[c]=a}})):e=hM[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=Hle(e.url,n.source),n}return t}s(Vle,"mapSourcePosition");function I5e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Vle({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+I5e(e[2])+")":t}s(I5e,"mapEvalOrigin");function lEt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(lEt,"CallSiteToString");function b5e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=lEt,e}s(b5e,"cloneCallSite");function T5e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(oEt())?0:62;n===1&&i>a&&!Wle()&&!t.isEval()&&(i-=a);var c=Vle({source:r,line:n,column:i});e.curPosition=c,t=b5e(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=I5e(u),t=b5e(t),t.getEvalOrigin=function(){return u}),t}s(T5e,"wrapCallSite");function uEt(t,e){qle&&(YS={},hM={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+T5e(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(uEt,"prepareStackTrace");function w5e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=YS[r];if(!o&&ky&&ky.existsSync(r))try{o=ky.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(w5e,"getErrorSource");function dEt(t){var e=w5e(t),r=sEt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),aEt(1)}s(dEt,"printErrorAndExit");function fEt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return dEt(arguments[1])}return t.apply(this,arguments)}}s(fEt,"shimEmitUncaughtException");var pEt=Mb.slice(0),mEt=Fb.slice(0);KS.wrapCallSite=T5e;KS.getErrorSource=w5e;KS.mapSourcePosition=Vle;KS.retrieveSourceMap=Gle;KS.install=function(t){if(t=t||{},t.environment&&(mM=t.environment,["node","browser","auto"].indexOf(mM)===-1))throw new Error("environment "+mM+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Mb.length=0),Mb.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Fb.length=0),Fb.unshift(t.retrieveSourceMap)),t.hookRequire&&!Wle()){var e=v5e($le,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return YS[a]=o,hM[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(qle||(qle="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),E5e||(E5e=!0,Error.prepareStackTrace=uEt),!x5e){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=v5e($le,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&iEt()&&(x5e=!0,fEt())}};KS.resetRetrieveHandlers=function(){Mb.length=0,Fb.length=0,Mb=pEt.slice(0),Fb=mEt.slice(0),Gle=KH(Fb),jle=KH(Mb)}});var eo=H((XH,k5e)=>{f();(function(t,e){typeof XH=="object"?k5e.exports=XH=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(XH,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function x(){}return s(x,"F"),function(I){var S;return x.prototype=I,S=new x,x.prototype=null,S}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(x){var I=o(this);return x&&I.mixIn(x),(!I.hasOwnProperty("init")||this.init===I.init)&&(I.init=function(){I.$super.init.apply(this,arguments)}),I.init.prototype=I,I.$super=this,I},"extend"),create:s(function(){var x=this.extend();return x.init.apply(x,arguments),x},"create"),init:s(function(){},"init"),mixIn:s(function(x){for(var I in x)x.hasOwnProperty(I)&&(this[I]=x[I]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(x,I){x=this.words=x||[],I!=r?this.sigBytes=I:this.sigBytes=x.length*4},"init"),toString:s(function(x){return(x||p).stringify(this)},"toString"),concat:s(function(x){var I=this.words,S=x.words,R=this.sigBytes,B=x.sigBytes;if(this.clamp(),R%4)for(var M=0;M<B;M++){var O=S[M>>>2]>>>24-M%4*8&255;I[R+M>>>2]|=O<<24-(R+M)%4*8}else for(var K=0;K<B;K+=4)I[R+K>>>2]=S[K>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var x=this.words,I=this.sigBytes;x[I>>>2]&=4294967295<<32-I%4*8,x.length=e.ceil(I/4)},"clamp"),clone:s(function(){var x=l.clone.call(this);return x.words=this.words.slice(0),x},"clone"),random:s(function(x){for(var I=[],S=0;S<x;S+=4)I.push(i());return new u.init(I,x)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(x){for(var I=x.words,S=x.sigBytes,R=[],B=0;B<S;B++){var M=I[B>>>2]>>>24-B%4*8&255;R.push((M>>>4).toString(16)),R.push((M&15).toString(16))}return R.join("")},"stringify"),parse:s(function(x){for(var I=x.length,S=[],R=0;R<I;R+=2)S[R>>>3]|=parseInt(x.substr(R,2),16)<<24-R%8*4;return new u.init(S,I/2)},"parse")},m=d.Latin1={stringify:s(function(x){for(var I=x.words,S=x.sigBytes,R=[],B=0;B<S;B++){var M=I[B>>>2]>>>24-B%4*8&255;R.push(String.fromCharCode(M))}return R.join("")},"stringify"),parse:s(function(x){for(var I=x.length,S=[],R=0;R<I;R++)S[R>>>2]|=(x.charCodeAt(R)&255)<<24-R%4*8;return new u.init(S,I)},"parse")},h=d.Utf8={stringify:s(function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(x){return m.parse(unescape(encodeURIComponent(x)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(x){typeof x=="string"&&(x=h.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},"_append"),_process:s(function(x){var I,S=this._data,R=S.words,B=S.sigBytes,M=this.blockSize,O=M*4,K=B/O;x?K=e.ceil(K):K=e.max((K|0)-this._minBufferSize,0);var V=K*M,z=e.min(V*4,B);if(V){for(var Q=0;Q<V;Q+=M)this._doProcessBlock(R,Q);I=R.splice(0,V),S.sigBytes-=z}return new u.init(I,z)},"_process"),clone:s(function(){var x=l.clone.call(this);return x._data=this._data.clone(),x},"clone"),_minBufferSize:0}),A=c.Hasher=g.extend({cfg:l.extend(),init:s(function(x){this.cfg=this.cfg.extend(x),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(x){return this._append(x),this._process(),this},"update"),finalize:s(function(x){x&&this._append(x);var I=this._doFinalize();return I},"finalize"),blockSize:512/32,_createHelper:s(function(x){return function(I,S){return new x.init(S).finalize(I)}},"_createHelper"),_createHmacHelper:s(function(x){return function(I,S){return new y.HMAC.init(x,S).finalize(I)}},"_createHmacHelper")}),y=a.algo={};return a}(Math);return t})});var yM=H((ZH,P5e)=>{f();(function(t,e){typeof ZH=="object"?P5e.exports=ZH=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ZH,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),l=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var B5e=H((e$,D5e)=>{f();(function(t,e){typeof e$=="object"?D5e.exports=e$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(e$,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var L5e=H((t$,N5e)=>{f();(function(t,e){typeof t$=="object"?N5e.exports=t$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(t$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,d=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,d=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=a(c.charCodeAt(d)<<16-d%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Ob=H((r$,M5e)=>{f();(function(t,e){typeof r$=="object"?M5e.exports=r$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(r$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,d=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,A=l[m+2>>>2]>>>24-(m+2)%4*8&255,y=h<<16|g<<8|A,x=0;x<4&&m+x*.75<u;x++)p.push(d.charAt(y>>>6*(3-x)&63));var I=d.charAt(64);if(I)for(;p.length%4;)p.push(I);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var d=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;d[p>>>2]|=A<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var O5e=H((n$,F5e)=>{f();(function(t,e){typeof n$=="object"?F5e.exports=n$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(n$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,d=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,x=g<<16|A<<8|y,I=0;I<4&&h+I*.75<d;I++)m.push(p.charAt(x>>>6*(3-I)&63));var S=p.charAt(64);if(S)for(;m.length%4;)m.push(S);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,d=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var d=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,A=h|g;d[p>>>2]|=A<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var Qb=H((i$,Q5e)=>{f();(function(t,e){typeof i$=="object"?Q5e.exports=i$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(i$,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var A=0;A<16;A++){var y=g+A,x=h[y];h[y]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var I=this._hash.words,S=h[g+0],R=h[g+1],B=h[g+2],M=h[g+3],O=h[g+4],K=h[g+5],V=h[g+6],z=h[g+7],Q=h[g+8],U=h[g+9],Z=h[g+10],J=h[g+11],j=h[g+12],$=h[g+13],X=h[g+14],ie=h[g+15],ae=I[0],te=I[1],pe=I[2],Ae=I[3];ae=u(ae,te,pe,Ae,S,7,c[0]),Ae=u(Ae,ae,te,pe,R,12,c[1]),pe=u(pe,Ae,ae,te,B,17,c[2]),te=u(te,pe,Ae,ae,M,22,c[3]),ae=u(ae,te,pe,Ae,O,7,c[4]),Ae=u(Ae,ae,te,pe,K,12,c[5]),pe=u(pe,Ae,ae,te,V,17,c[6]),te=u(te,pe,Ae,ae,z,22,c[7]),ae=u(ae,te,pe,Ae,Q,7,c[8]),Ae=u(Ae,ae,te,pe,U,12,c[9]),pe=u(pe,Ae,ae,te,Z,17,c[10]),te=u(te,pe,Ae,ae,J,22,c[11]),ae=u(ae,te,pe,Ae,j,7,c[12]),Ae=u(Ae,ae,te,pe,$,12,c[13]),pe=u(pe,Ae,ae,te,X,17,c[14]),te=u(te,pe,Ae,ae,ie,22,c[15]),ae=d(ae,te,pe,Ae,R,5,c[16]),Ae=d(Ae,ae,te,pe,V,9,c[17]),pe=d(pe,Ae,ae,te,J,14,c[18]),te=d(te,pe,Ae,ae,S,20,c[19]),ae=d(ae,te,pe,Ae,K,5,c[20]),Ae=d(Ae,ae,te,pe,Z,9,c[21]),pe=d(pe,Ae,ae,te,ie,14,c[22]),te=d(te,pe,Ae,ae,O,20,c[23]),ae=d(ae,te,pe,Ae,U,5,c[24]),Ae=d(Ae,ae,te,pe,X,9,c[25]),pe=d(pe,Ae,ae,te,M,14,c[26]),te=d(te,pe,Ae,ae,Q,20,c[27]),ae=d(ae,te,pe,Ae,$,5,c[28]),Ae=d(Ae,ae,te,pe,B,9,c[29]),pe=d(pe,Ae,ae,te,z,14,c[30]),te=d(te,pe,Ae,ae,j,20,c[31]),ae=p(ae,te,pe,Ae,K,4,c[32]),Ae=p(Ae,ae,te,pe,Q,11,c[33]),pe=p(pe,Ae,ae,te,J,16,c[34]),te=p(te,pe,Ae,ae,X,23,c[35]),ae=p(ae,te,pe,Ae,R,4,c[36]),Ae=p(Ae,ae,te,pe,O,11,c[37]),pe=p(pe,Ae,ae,te,z,16,c[38]),te=p(te,pe,Ae,ae,Z,23,c[39]),ae=p(ae,te,pe,Ae,$,4,c[40]),Ae=p(Ae,ae,te,pe,S,11,c[41]),pe=p(pe,Ae,ae,te,M,16,c[42]),te=p(te,pe,Ae,ae,V,23,c[43]),ae=p(ae,te,pe,Ae,U,4,c[44]),Ae=p(Ae,ae,te,pe,j,11,c[45]),pe=p(pe,Ae,ae,te,ie,16,c[46]),te=p(te,pe,Ae,ae,B,23,c[47]),ae=m(ae,te,pe,Ae,S,6,c[48]),Ae=m(Ae,ae,te,pe,z,10,c[49]),pe=m(pe,Ae,ae,te,X,15,c[50]),te=m(te,pe,Ae,ae,K,21,c[51]),ae=m(ae,te,pe,Ae,j,6,c[52]),Ae=m(Ae,ae,te,pe,M,10,c[53]),pe=m(pe,Ae,ae,te,Z,15,c[54]),te=m(te,pe,Ae,ae,R,21,c[55]),ae=m(ae,te,pe,Ae,Q,6,c[56]),Ae=m(Ae,ae,te,pe,ie,10,c[57]),pe=m(pe,Ae,ae,te,V,15,c[58]),te=m(te,pe,Ae,ae,$,21,c[59]),ae=m(ae,te,pe,Ae,O,6,c[60]),Ae=m(Ae,ae,te,pe,J,10,c[61]),pe=m(pe,Ae,ae,te,B,15,c[62]),te=m(te,pe,Ae,ae,U,21,c[63]),I[0]=I[0]+ae|0,I[1]=I[1]+te|0,I[2]=I[2]+pe|0,I[3]=I[3]+Ae|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32;var x=e.floor(A/4294967296),I=A;g[(y+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,R=S.words,B=0;B<4;B++){var M=R[B];R[B]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return S},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,A,y,x,I,S){var R=h+(g&A|~g&y)+x+S;return(R<<I|R>>>32-I)+g}s(u,"FF");function d(h,g,A,y,x,I,S){var R=h+(g&y|A&~y)+x+S;return(R<<I|R>>>32-I)+g}s(d,"GG");function p(h,g,A,y,x,I,S){var R=h+(g^A^y)+x+S;return(R<<I|R>>>32-I)+g}s(p,"HH");function m(h,g,A,y,x,I,S){var R=h+(A^(g|~y))+x+S;return(R<<I|R>>>32-I)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var zle=H((o$,U5e)=>{f();(function(t,e){typeof o$=="object"?U5e.exports=o$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(o$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],A=d[4],y=0;y<80;y++){if(y<16)a[y]=l[u+y]|0;else{var x=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=x<<1|x>>>31}var I=(p<<5|p>>>27)+A+a[y];y<20?I+=(m&h|~m&g)+1518500249:y<40?I+=(m^h^g)+1859775393:y<60?I+=(m&h|m&g|h&g)-1894007588:I+=(m^h^g)-899497514,A=g,g=h,h=m<<30|m>>>2,m=p,p=I}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+A|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,d=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var a$=H((s$,q5e)=>{f();(function(t,e){typeof s$=="object"?q5e.exports=s$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(s$,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(A){for(var y=e.sqrt(A),x=2;x<=y;x++)if(!(A%x))return!1;return!0}s(p,"isPrime");function m(A){return(A-(A|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],A=h[1],y=h[2],x=h[3],I=h[4],S=h[5],R=h[6],B=h[7],M=0;M<64;M++){if(M<16)u[M]=p[m+M]|0;else{var O=u[M-15],K=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,V=u[M-2],z=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;u[M]=K+u[M-7]+z+u[M-16]}var Q=I&S^~I&R,U=g&A^g&y^A&y,Z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),J=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),j=B+J+Q+l[M]+u[M],$=Z+U;B=R,R=S,S=I,I=x+j|0,x=y,y=A,A=g,g=j+$|0}h[0]=h[0]+g|0,h[1]=h[1]+A|0,h[2]=h[2]+y|0,h[3]=h[3]+x|0,h[4]=h[4]+I|0,h[5]=h[5]+S|0,h[6]=h[6]+R|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(d),r.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var $5e=H((c$,H5e)=>{f();(function(t,e,r){typeof c$=="object"?H5e.exports=c$=e(eo(),a$()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(c$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var Yle=H((l$,W5e)=>{f();(function(t,e,r){typeof l$=="object"?W5e.exports=l$=e(eo(),yM()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(l$,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],x=g[2],I=g[3],S=g[4],R=g[5],B=g[6],M=g[7],O=A.high,K=A.low,V=y.high,z=y.low,Q=x.high,U=x.low,Z=I.high,J=I.low,j=S.high,$=S.low,X=R.high,ie=R.low,ae=B.high,te=B.low,pe=M.high,Ae=M.low,Oe=O,Te=K,Je=V,Me=z,lt=Q,_t=U,Et=Z,ht=J,ue=j,Ue=$,ye=X,$e=ie,se=ae,le=te,qe=pe,Be=Ae,xe=0;xe<80;xe++){var je,tt,pt=d[xe];if(xe<16)tt=pt.high=m[h+xe*2]|0,je=pt.low=m[h+xe*2+1]|0;else{var Mt=d[xe-15],Kt=Mt.high,Ot=Mt.low,Wr=(Kt>>>1|Ot<<31)^(Kt>>>8|Ot<<24)^Kt>>>7,Rr=(Ot>>>1|Kt<<31)^(Ot>>>8|Kt<<24)^(Ot>>>7|Kt<<25),sn=d[xe-2],ve=sn.high,Ge=sn.low,ft=(ve>>>19|Ge<<13)^(ve<<3|Ge>>>29)^ve>>>6,Tt=(Ge>>>19|ve<<13)^(Ge<<3|ve>>>29)^(Ge>>>6|ve<<26),ir=d[xe-7],Xt=ir.high,br=ir.low,lr=d[xe-16],tr=lr.high,cr=lr.low;je=Rr+br,tt=Wr+Xt+(je>>>0<Rr>>>0?1:0),je=je+Tt,tt=tt+ft+(je>>>0<Tt>>>0?1:0),je=je+cr,tt=tt+tr+(je>>>0<cr>>>0?1:0),pt.high=tt,pt.low=je}var rr=ue&ye^~ue&se,Dr=Ue&$e^~Ue&le,jr=Oe&Je^Oe&lt^Je&lt,rn=Te&Me^Te&_t^Me&_t,An=(Oe>>>28|Te<<4)^(Oe<<30|Te>>>2)^(Oe<<25|Te>>>7),Zn=(Te>>>28|Oe<<4)^(Te<<30|Oe>>>2)^(Te<<25|Oe>>>7),Tn=(ue>>>14|Ue<<18)^(ue>>>18|Ue<<14)^(ue<<23|Ue>>>9),Kn=(Ue>>>14|ue<<18)^(Ue>>>18|ue<<14)^(Ue<<23|ue>>>9),nn=u[xe],Gn=nn.high,Pe=nn.low,Y=Be+Kn,Ce=qe+Tn+(Y>>>0<Be>>>0?1:0),Y=Y+Dr,Ce=Ce+rr+(Y>>>0<Dr>>>0?1:0),Y=Y+Pe,Ce=Ce+Gn+(Y>>>0<Pe>>>0?1:0),Y=Y+je,Ce=Ce+tt+(Y>>>0<je>>>0?1:0),Ie=Zn+rn,F=An+jr+(Ie>>>0<Zn>>>0?1:0);qe=se,Be=le,se=ye,le=$e,ye=ue,$e=Ue,Ue=ht+Y|0,ue=Et+Ce+(Ue>>>0<ht>>>0?1:0)|0,Et=lt,ht=_t,lt=Je,_t=Me,Je=Oe,Me=Te,Te=Y+Ie|0,Oe=Ce+F+(Te>>>0<Y>>>0?1:0)|0}K=A.low=K+Te,A.high=O+Oe+(K>>>0<Te>>>0?1:0),z=y.low=z+Me,y.high=V+Je+(z>>>0<Me>>>0?1:0),U=x.low=U+_t,x.high=Q+lt+(U>>>0<_t>>>0?1:0),J=I.low=J+ht,I.high=Z+Et+(J>>>0<ht>>>0?1:0),$=S.low=$+Ue,S.high=j+ue+($>>>0<Ue>>>0?1:0),ie=R.low=ie+$e,R.high=X+ye+(ie>>>0<$e>>>0?1:0),te=B.low=te+le,B.high=ae+se+(te>>>0<le>>>0?1:0),Ae=M.low=Ae+Be,M.high=pe+qe+(Ae>>>0<Be>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;h[A>>>5]|=128<<24-A%32,h[(A+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(A+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var y=this._hash.toX32();return y},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var G5e=H((u$,j5e)=>{f();(function(t,e,r){typeof u$=="object"?j5e.exports=u$=e(eo(),yM(),Yle()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(u$,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var z5e=H((d$,V5e)=>{f();(function(t,e,r){typeof d$=="object"?V5e.exports=d$=e(eo(),yM()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(d$,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],d=[],p=[];(function(){for(var g=1,A=0,y=0;y<24;y++){u[g+5*A]=(y+1)*(y+2)/2%64;var x=A%5,I=(2*g+3*A)%5;g=x,A=I}for(var g=0;g<5;g++)for(var A=0;A<5;A++)d[g+5*A]=A+(2*g+3*A)%5*5;for(var S=1,R=0;R<24;R++){for(var B=0,M=0,O=0;O<7;O++){if(S&1){var K=(1<<O)-1;K<32?M^=1<<K:B^=1<<K-32}S&128?S=S<<1^113:S<<=1}p[R]=c.create(B,M)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],A=0;A<25;A++)g[A]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,A){for(var y=this._state,x=this.blockSize/2,I=0;I<x;I++){var S=g[A+2*I],R=g[A+2*I+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var B=y[I];B.high^=R,B.low^=S}for(var M=0;M<24;M++){for(var O=0;O<5;O++){for(var K=0,V=0,z=0;z<5;z++){var B=y[O+5*z];K^=B.high,V^=B.low}var Q=m[O];Q.high=K,Q.low=V}for(var O=0;O<5;O++)for(var U=m[(O+4)%5],Z=m[(O+1)%5],J=Z.high,j=Z.low,K=U.high^(J<<1|j>>>31),V=U.low^(j<<1|J>>>31),z=0;z<5;z++){var B=y[O+5*z];B.high^=K,B.low^=V}for(var $=1;$<25;$++){var K,V,B=y[$],X=B.high,ie=B.low,ae=u[$];ae<32?(K=X<<ae|ie>>>32-ae,V=ie<<ae|X>>>32-ae):(K=ie<<ae-32|X>>>64-ae,V=X<<ae-32|ie>>>64-ae);var te=m[d[$]];te.high=K,te.low=V}var pe=m[0],Ae=y[0];pe.high=Ae.high,pe.low=Ae.low;for(var O=0;O<5;O++)for(var z=0;z<5;z++){var $=O+5*z,B=y[$],Oe=m[$],Te=m[(O+1)%5+5*z],Je=m[(O+2)%5+5*z];B.high=Oe.high^~Te.high&Je.high,B.low=Oe.low^~Te.low&Je.low}var B=y[0],Me=p[M];B.high^=Me.high,B.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,x=g.sigBytes*8,I=this.blockSize*32;A[x>>>5]|=1<<24-x%32,A[(e.ceil((x+1)/I)*I>>>5)-1]|=128,g.sigBytes=A.length*4,this._process();for(var S=this._state,R=this.cfg.outputLength/8,B=R/8,M=[],O=0;O<B;O++){var K=S[O],V=K.high,z=K.low;V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,M.push(z),M.push(V)}return new i.init(M,R)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),A=g._state=this._state.slice(0),y=0;y<25;y++)A[y]=A[y].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var K5e=H((f$,Y5e)=>{f();(function(t,e){typeof f$=="object"?Y5e.exports=f$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(f$,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(R,B){for(var M=0;M<16;M++){var O=B+M,K=R[O];R[O]=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360}var V=this._hash.words,z=p.words,Q=m.words,U=c.words,Z=l.words,J=u.words,j=d.words,$,X,ie,ae,te,pe,Ae,Oe,Te,Je;pe=$=V[0],Ae=X=V[1],Oe=ie=V[2],Te=ae=V[3],Je=te=V[4];for(var Me,M=0;M<80;M+=1)Me=$+R[B+U[M]]|0,M<16?Me+=g(X,ie,ae)+z[0]:M<32?Me+=A(X,ie,ae)+z[1]:M<48?Me+=y(X,ie,ae)+z[2]:M<64?Me+=x(X,ie,ae)+z[3]:Me+=I(X,ie,ae)+z[4],Me=Me|0,Me=S(Me,J[M]),Me=Me+te|0,$=te,te=ae,ae=S(ie,10),ie=X,X=Me,Me=pe+R[B+Z[M]]|0,M<16?Me+=I(Ae,Oe,Te)+Q[0]:M<32?Me+=x(Ae,Oe,Te)+Q[1]:M<48?Me+=y(Ae,Oe,Te)+Q[2]:M<64?Me+=A(Ae,Oe,Te)+Q[3]:Me+=g(Ae,Oe,Te)+Q[4],Me=Me|0,Me=S(Me,j[M]),Me=Me+Je|0,pe=Je,Je=Te,Te=S(Oe,10),Oe=Ae,Ae=Me;Me=V[1]+ie+Te|0,V[1]=V[2]+ae+Je|0,V[2]=V[3]+te+pe|0,V[3]=V[4]+$+Ae|0,V[4]=V[0]+X+Oe|0,V[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var R=this._data,B=R.words,M=this._nDataBytes*8,O=R.sigBytes*8;B[O>>>5]|=128<<24-O%32,B[(O+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,R.sigBytes=(B.length+1)*4,this._process();for(var K=this._hash,V=K.words,z=0;z<5;z++){var Q=V[z];V[z]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}return K},"_doFinalize"),clone:s(function(){var R=o.clone.call(this);return R._hash=this._hash.clone(),R},"clone")});function g(R,B,M){return R^B^M}s(g,"f1");function A(R,B,M){return R&B|~R&M}s(A,"f2");function y(R,B,M){return(R|~B)^M}s(y,"f3");function x(R,B,M){return R&M|B&~M}s(x,"f4");function I(R,B,M){return R^(B|~M)}s(I,"f5");function S(R,B){return R<<B|R>>>32-B}s(S,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var m$=H((p$,J5e)=>{f();(function(t,e){typeof p$=="object"?J5e.exports=p$=e(eo()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(p$,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var d=l.blockSize,p=d*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,A=h.words,y=0;y<d;y++)g[y]^=1549556828,A[y]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,d=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var Z5e=H((h$,X5e)=>{f();(function(t,e,r){typeof h$=="object"?X5e.exports=h$=e(eo(),a$(),m$()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(h$,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),A=h.words,y=g.words,x=p.keySize,I=p.iterations;A.length<x;){var S=m.update(d).finalize(g);m.reset();for(var R=S.words,B=R.length,M=S,O=1;O<I;O++){M=m.finalize(M),m.reset();for(var K=M.words,V=0;V<B;V++)R[V]^=K[V]}h.concat(S),y[0]++}return h.sigBytes=x*4,h},"compute")});e.PBKDF2=function(u,d,p){return l.create(p).compute(u,d)}}(),t.PBKDF2})});var ov=H((g$,ePe)=>{f();(function(t,e,r){typeof g$=="object"?ePe.exports=g$=e(eo(),zle(),m$()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(g$,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,A=p.keySize,y=p.iterations;g.length<A;){d&&m.update(d),d=m.update(l).finalize(u),m.reset();for(var x=1;x<y;x++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=A*4,h},"compute")});e.EvpKDF=function(l,u,d){return c.create(d).compute(l,u)}}(),t.EvpKDF})});var gl=H((A$,tPe)=>{f();(function(t,e,r){typeof A$=="object"?tPe.exports=A$=e(eo(),ov()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(A$,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,d=r.algo,p=d.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(Q,U){return this.create(this._ENC_XFORM_MODE,Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.create(this._DEC_XFORM_MODE,Q,U)},"createDecryptor"),init:s(function(Q,U,Z){this.cfg=this.cfg.extend(Z),this._xformMode=Q,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(Q){return this._append(Q),this._process()},"process"),finalize:s(function(Q){Q&&this._append(Q);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function Q(U){return typeof U=="string"?z:O}return s(Q,"selectCipherStrategy"),function(U){return{encrypt:s(function(Z,J,j){return Q(J).encrypt(U,Z,J,j)},"encrypt"),decrypt:s(function(Z,J,j){return Q(J).decrypt(U,Z,J,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var Q=this._process(!0);return Q},"_doFinalize"),blockSize:1}),g=r.mode={},A=n.BlockCipherMode=i.extend({createEncryptor:s(function(Q,U){return this.Encryptor.create(Q,U)},"createEncryptor"),createDecryptor:s(function(Q,U){return this.Decryptor.create(Q,U)},"createDecryptor"),init:s(function(Q,U){this._cipher=Q,this._iv=U},"init")}),y=g.CBC=function(){var Q=A.extend();Q.Encryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize;U.call(this,Z,J,$),j.encryptBlock(Z,J),this._prevBlock=Z.slice(J,J+$)},"processBlock")}),Q.Decryptor=Q.extend({processBlock:s(function(Z,J){var j=this._cipher,$=j.blockSize,X=Z.slice(J,J+$);j.decryptBlock(Z,J),U.call(this,Z,J,$),this._prevBlock=X},"processBlock")});function U(Z,J,j){var $,X=this._iv;X?($=X,this._iv=e):$=this._prevBlock;for(var ie=0;ie<j;ie++)Z[J+ie]^=$[ie]}return s(U,"xorBlock"),Q}(),x=r.pad={},I=x.Pkcs7={pad:s(function(Q,U){for(var Z=U*4,J=Z-Q.sigBytes%Z,j=J<<24|J<<16|J<<8|J,$=[],X=0;X<J;X+=4)$.push(j);var ie=o.create($,J);Q.concat(ie)},"pad"),unpad:s(function(Q){var U=Q.words[Q.sigBytes-1>>>2]&255;Q.sigBytes-=U},"unpad")},S=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:y,padding:I}),reset:s(function(){var Q;m.reset.call(this);var U=this.cfg,Z=U.iv,J=U.mode;this._xformMode==this._ENC_XFORM_MODE?Q=J.createEncryptor:(Q=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Q?this._mode.init(this,Z&&Z.words):(this._mode=Q.call(J,this,Z&&Z.words),this._mode.__creator=Q)},"reset"),_doProcessBlock:s(function(Q,U){this._mode.processBlock(Q,U)},"_doProcessBlock"),_doFinalize:s(function(){var Q,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),Q=this._process(!0)):(Q=this._process(!0),U.unpad(Q)),Q},"_doFinalize"),blockSize:128/32}),R=n.CipherParams=i.extend({init:s(function(Q){this.mixIn(Q)},"init"),toString:s(function(Q){return(Q||this.formatter).stringify(this)},"toString")}),B=r.format={},M=B.OpenSSL={stringify:s(function(Q){var U,Z=Q.ciphertext,J=Q.salt;return J?U=o.create([1398893684,1701076831]).concat(J).concat(Z):U=Z,U.toString(u)},"stringify"),parse:s(function(Q){var U,Z=u.parse(Q),J=Z.words;return J[0]==1398893684&&J[1]==1701076831&&(U=o.create(J.slice(2,4)),J.splice(0,4),Z.sigBytes-=16),R.create({ciphertext:Z,salt:U})},"parse")},O=n.SerializableCipher=i.extend({cfg:i.extend({format:M}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=Q.createEncryptor(Z,J),$=j.finalize(U),X=j.cfg;return R.create({ciphertext:$,key:Z,iv:X.iv,algorithm:Q,mode:X.mode,padding:X.padding,blockSize:Q.blockSize,formatter:J.format})},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=Q.createDecryptor(Z,J).finalize(U.ciphertext);return j},"decrypt"),_parse:s(function(Q,U){return typeof Q=="string"?U.parse(Q,this):Q},"_parse")}),K=r.kdf={},V=K.OpenSSL={execute:s(function(Q,U,Z,J,j){if(J||(J=o.random(64/8)),j)var $=p.create({keySize:U+Z,hasher:j}).compute(Q,J);else var $=p.create({keySize:U+Z}).compute(Q,J);var X=o.create($.words.slice(U),Z*4);return $.sigBytes=U*4,R.create({key:$,iv:X,salt:J})},"execute")},z=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:V}),encrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,J.salt,J.hasher);J.iv=j.iv;var $=O.encrypt.call(this,Q,U,j.key,J);return $.mixIn(j),$},"encrypt"),decrypt:s(function(Q,U,Z,J){J=this.cfg.extend(J),U=this._parse(U,J.format);var j=J.kdf.execute(Z,Q.keySize,Q.ivSize,U.salt,J.hasher);J.iv=j.iv;var $=O.decrypt.call(this,Q,U,j.key,J);return $},"decrypt")})}()})});var nPe=H((y$,rPe)=>{f();(function(t,e,r){typeof y$=="object"?rPe.exports=y$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(y$,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var oPe=H((C$,iPe)=>{f();(function(t,e,r){typeof C$=="object"?iPe.exports=C$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(C$,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var d=0;d<a;d++)n[i+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var aPe=H((v$,sPe)=>{f();(function(t,e,r){typeof v$=="object"?sPe.exports=v$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(v$,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),n(d);var p=d.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var lPe=H((E$,cPe)=>{f();(function(t,e,r){typeof E$=="object"?cPe.exports=E$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(E$,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var dPe=H((x$,uPe)=>{f();(function(t,e,r){typeof x$=="object"?uPe.exports=x$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(x$,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var pPe=H((b$,fPe)=>{f();(function(t,e,r){typeof b$=="object"?fPe.exports=b$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(b$,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var hPe=H((I$,mPe)=>{f();(function(t,e,r){typeof I$=="object"?mPe.exports=I$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(I$,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var APe=H((T$,gPe)=>{f();(function(t,e,r){typeof T$=="object"?gPe.exports=T$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(T$,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var CPe=H((w$,yPe)=>{f();(function(t,e,r){typeof w$=="object"?yPe.exports=w$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(w$,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var EPe=H((S$,vPe)=>{f();(function(t,e,r){typeof S$=="object"?vPe.exports=S$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(S$,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var bPe=H((_$,xPe)=>{f();(function(t,e,r){typeof _$=="object"?xPe.exports=_$=e(eo(),gl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(_$,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var TPe=H((R$,IPe)=>{f();(function(t,e,r){typeof R$=="object"?IPe.exports=R$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(R$,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var x=[],I=0;I<256;I++)I<128?x[I]=I<<1:x[I]=I<<1^283;for(var S=0,R=0,I=0;I<256;I++){var B=R^R<<1^R<<2^R<<3^R<<4;B=B>>>8^B&255^99,o[S]=B,a[B]=S;var M=x[S],O=x[M],K=x[O],V=x[B]*257^B*16843008;c[S]=V<<24|V>>>8,l[S]=V<<16|V>>>16,u[S]=V<<8|V>>>24,d[S]=V;var V=K*16843009^O*65537^M*257^S*16843008;p[B]=V<<24|V>>>8,m[B]=V<<16|V>>>16,h[B]=V<<8|V>>>24,g[B]=V,S?(S=M^x[x[x[K^M]]],R^=x[x[R]]):S=R=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:s(function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,S=I.words,R=I.sigBytes/4,B=this._nRounds=R+6,M=(B+1)*4,O=this._keySchedule=[],K=0;K<M;K++)K<R?O[K]=S[K]:(x=O[K-1],K%R?R>6&&K%R==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=A[K/R|0]<<24),O[K]=O[K-R]^x);for(var V=this._invKeySchedule=[],z=0;z<M;z++){var K=M-z;if(z%4)var x=O[K];else var x=O[K-4];z<4||K<=4?V[z]=x:V[z]=p[o[x>>>24]]^m[o[x>>>16&255]]^h[o[x>>>8&255]]^g[o[x&255]]}}},"_doReset"),encryptBlock:s(function(x,I){this._doCryptBlock(x,I,this._keySchedule,c,l,u,d,o)},"encryptBlock"),decryptBlock:s(function(x,I){var S=x[I+1];x[I+1]=x[I+3],x[I+3]=S,this._doCryptBlock(x,I,this._invKeySchedule,p,m,h,g,a);var S=x[I+1];x[I+1]=x[I+3],x[I+3]=S},"decryptBlock"),_doCryptBlock:s(function(x,I,S,R,B,M,O,K){for(var V=this._nRounds,z=x[I]^S[0],Q=x[I+1]^S[1],U=x[I+2]^S[2],Z=x[I+3]^S[3],J=4,j=1;j<V;j++){var $=R[z>>>24]^B[Q>>>16&255]^M[U>>>8&255]^O[Z&255]^S[J++],X=R[Q>>>24]^B[U>>>16&255]^M[Z>>>8&255]^O[z&255]^S[J++],ie=R[U>>>24]^B[Z>>>16&255]^M[z>>>8&255]^O[Q&255]^S[J++],ae=R[Z>>>24]^B[z>>>16&255]^M[Q>>>8&255]^O[U&255]^S[J++];z=$,Q=X,U=ie,Z=ae}var $=(K[z>>>24]<<24|K[Q>>>16&255]<<16|K[U>>>8&255]<<8|K[Z&255])^S[J++],X=(K[Q>>>24]<<24|K[U>>>16&255]<<16|K[Z>>>8&255]<<8|K[z&255])^S[J++],ie=(K[U>>>24]<<24|K[Z>>>16&255]<<16|K[z>>>8&255]<<8|K[Q&255])^S[J++],ae=(K[Z>>>24]<<24|K[z>>>16&255]<<16|K[Q>>>8&255]<<8|K[U&255])^S[J++];x[I]=$,x[I+1]=X,x[I+2]=ie,x[I+3]=ae},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(y)}(),t.AES})});var SPe=H((k$,wPe)=>{f();(function(t,e,r){typeof k$=="object"?wPe.exports=k$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(k$,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var A=this._key,y=A.words,x=[],I=0;I<56;I++){var S=a[I]-1;x[I]=y[S>>>5]>>>31-S%32&1}for(var R=this._subKeys=[],B=0;B<16;B++){for(var M=R[B]=[],O=l[B],I=0;I<24;I++)M[I/6|0]|=x[(c[I]-1+O)%28]<<31-I%6,M[4+(I/6|0)]|=x[28+(c[I+24]-1+O)%28]<<31-I%6;M[0]=M[0]<<1|M[0]>>>31;for(var I=1;I<7;I++)M[I]=M[I]>>>(I-1)*4+3;M[7]=M[7]<<5|M[7]>>>27}for(var K=this._invSubKeys=[],I=0;I<16;I++)K[I]=R[15-I]},"_doReset"),encryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._subKeys)},"encryptBlock"),decryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(A,y,x){this._lBlock=A[y],this._rBlock=A[y+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var I=0;I<16;I++){for(var S=x[I],R=this._lBlock,B=this._rBlock,M=0,O=0;O<8;O++)M|=u[O][((B^S[O])&d[O])>>>0];this._lBlock=B,this._rBlock=R^M}var K=this._lBlock;this._lBlock=this._rBlock,this._rBlock=K,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),A[y]=this._lBlock,A[y+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(A,y){var x=(this._lBlock>>>A^this._rBlock)&y;this._rBlock^=x,this._lBlock^=x<<A}s(m,"exchangeLR");function h(A,y){var x=(this._rBlock>>>A^this._lBlock)&y;this._lBlock^=x,this._rBlock^=x<<A}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var A=this._key,y=A.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=y.slice(0,2),I=y.length<4?y.slice(0,2):y.slice(2,4),S=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(n.create(x)),this._des2=p.createEncryptor(n.create(I)),this._des3=p.createEncryptor(n.create(S))},"_doReset"),encryptBlock:s(function(A,y){this._des1.encryptBlock(A,y),this._des2.decryptBlock(A,y),this._des3.encryptBlock(A,y)},"encryptBlock"),decryptBlock:s(function(A,y){this._des3.decryptBlock(A,y),this._des2.encryptBlock(A,y),this._des1.decryptBlock(A,y)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var RPe=H((P$,_Pe)=>{f();(function(t,e,r){typeof P$=="object"?_Pe.exports=P$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(P$,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,d=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,A=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+A)%256;var y=p[m];p[m]=p[h],p[h]=y}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+l[u])%256;var h=l[u];l[u]=l[d],l[d]=h,p|=l[(l[u]+l[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var PPe=H((D$,kPe)=>{f();(function(t,e,r){typeof D$=="object"?kPe.exports=D$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(D$,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var A=p.words,y=A[0],x=A[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,R=I>>>16|S&4294901760,B=S<<16|I&65535;g[0]^=I,g[1]^=R,g[2]^=S,g[3]^=B,g[4]^=I,g[5]^=R,g[6]^=S,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^x}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var BPe=H((B$,DPe)=>{f();(function(t,e,r){typeof B$=="object"?DPe.exports=B$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(B$,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var A=p.words,y=A[0],x=A[1],I=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,R=I>>>16|S&4294901760,B=S<<16|I&65535;h[0]^=I,h[1]^=R,h[2]^=S,h[3]^=B,h[4]^=I,h[5]^=R,h[6]^=S,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,A=h>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=y^x}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var LPe=H((N$,NPe)=>{f();(function(t,e,r){typeof N$=="object"?NPe.exports=N$=e(eo(),Ob(),Qb(),ov(),gl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(N$,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,A){let y=A>>24&255,x=A>>16&255,I=A>>8&255,S=A&255,R=g.sbox[0][y]+g.sbox[1][x];return R=R^g.sbox[2][I],R=R+g.sbox[3][S],R}s(u,"F");function d(g,A,y){let x=A,I=y,S;for(let R=0;R<o;++R)x=x^g.pbox[R],I=u(g,x)^I,S=x,x=I,I=S;return S=x,x=I,I=S,I=I^g.pbox[o],x=x^g.pbox[o+1],{left:x,right:I}}s(d,"BlowFish_Encrypt");function p(g,A,y){let x=A,I=y,S;for(let R=o+1;R>1;--R)x=x^g.pbox[R],I=u(g,x)^I,S=x,x=I,I=S;return S=x,x=I,I=S,I=I^g.pbox[1],x=x^g.pbox[0],{left:x,right:I}}s(p,"BlowFish_Decrypt");function m(g,A,y){for(let B=0;B<4;B++){g.sbox[B]=[];for(let M=0;M<256;M++)g.sbox[B][M]=c[B][M]}let x=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^A[x],x++,x>=y&&(x=0);let I=0,S=0,R=0;for(let B=0;B<o+2;B+=2)R=d(g,I,S),I=R.left,S=R.right,g.pbox[B]=I,g.pbox[B+1]=S;for(let B=0;B<4;B++)for(let M=0;M<256;M+=2)R=d(g,I,S),I=R.left,S=R.right,g.sbox[B][M]=I,g.sbox[B][M+1]=S;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,A=g.words,y=g.sigBytes/4;m(l,A,y)}},"_doReset"),encryptBlock:s(function(g,A){var y=d(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"encryptBlock"),decryptBlock:s(function(g,A){var y=p(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var Ub=H((L$,MPe)=>{f();(function(t,e,r){typeof L$=="object"?MPe.exports=L$=e(eo(),yM(),B5e(),L5e(),Ob(),O5e(),Qb(),zle(),a$(),$5e(),Yle(),G5e(),z5e(),K5e(),m$(),Z5e(),ov(),gl(),nPe(),oPe(),aPe(),lPe(),dPe(),pPe(),hPe(),APe(),CPe(),EPe(),bPe(),TPe(),SPe(),RPe(),PPe(),BPe(),LPe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(L$,function(t){return t})});var u4=H(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.stringArray=fd.array=fd.func=fd.error=fd.number=fd.string=fd.boolean=void 0;function S_t(t){return t===!0||t===!1}s(S_t,"boolean");fd.boolean=S_t;function g3e(t){return typeof t=="string"||t instanceof String}s(g3e,"string");fd.string=g3e;function __t(t){return typeof t=="number"||t instanceof Number}s(__t,"number");fd.number=__t;function R_t(t){return t instanceof Error}s(R_t,"error");fd.error=R_t;function k_t(t){return typeof t=="function"}s(k_t,"func");fd.func=k_t;function A3e(t){return Array.isArray(t)}s(A3e,"array");fd.array=A3e;function P_t(t){return A3e(t)&&t.every(e=>g3e(e))}s(P_t,"stringArray");fd.stringArray=P_t});var Ede=H(cn=>{"use strict";f();Object.defineProperty(cn,"__esModule",{value:!0});cn.Message=cn.NotificationType9=cn.NotificationType8=cn.NotificationType7=cn.NotificationType6=cn.NotificationType5=cn.NotificationType4=cn.NotificationType3=cn.NotificationType2=cn.NotificationType1=cn.NotificationType0=cn.NotificationType=cn.RequestType9=cn.RequestType8=cn.RequestType7=cn.RequestType6=cn.RequestType5=cn.RequestType4=cn.RequestType3=cn.RequestType2=cn.RequestType1=cn.RequestType=cn.RequestType0=cn.AbstractMessageSignature=cn.ParameterStructures=cn.ResponseError=cn.ErrorCodes=void 0;var u_=u4(),Jue;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Jue||(cn.ErrorCodes=Jue={}));var Xue=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=u_.number(e)?e:Jue.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};cn.ResponseError=Xue;var Wf=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};cn.ParameterStructures=Wf;Wf.auto=new Wf("auto");Wf.byPosition=new Wf("byPosition");Wf.byName=new Wf("byName");var zs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Wf.auto}};cn.AbstractMessageSignature=zs;var Zue=class extends zs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};cn.RequestType0=Zue;var ede=class extends zs{static{s(this,"RequestType")}constructor(e,r=Wf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};cn.RequestType=ede;var tde=class extends zs{static{s(this,"RequestType1")}constructor(e,r=Wf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};cn.RequestType1=tde;var rde=class extends zs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};cn.RequestType2=rde;var nde=class extends zs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};cn.RequestType3=nde;var ide=class extends zs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};cn.RequestType4=ide;var ode=class extends zs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};cn.RequestType5=ode;var sde=class extends zs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};cn.RequestType6=sde;var ade=class extends zs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};cn.RequestType7=ade;var cde=class extends zs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};cn.RequestType8=cde;var lde=class extends zs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};cn.RequestType9=lde;var ude=class extends zs{static{s(this,"NotificationType")}constructor(e,r=Wf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};cn.NotificationType=ude;var dde=class extends zs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};cn.NotificationType0=dde;var fde=class extends zs{static{s(this,"NotificationType1")}constructor(e,r=Wf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};cn.NotificationType1=fde;var pde=class extends zs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};cn.NotificationType2=pde;var mde=class extends zs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};cn.NotificationType3=mde;var hde=class extends zs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};cn.NotificationType4=hde;var gde=class extends zs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};cn.NotificationType5=gde;var Ade=class extends zs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};cn.NotificationType6=Ade;var yde=class extends zs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};cn.NotificationType7=yde;var Cde=class extends zs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};cn.NotificationType8=Cde;var vde=class extends zs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};cn.NotificationType9=vde;var y3e;(function(t){function e(i){let o=i;return o&&u_.string(o.method)&&(u_.string(o.id)||u_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&u_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(u_.string(o.id)||u_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(y3e||(cn.Message=y3e={}))});var bde=H(Jb=>{"use strict";f();var C3e;Object.defineProperty(Jb,"__esModule",{value:!0});Jb.LRUCache=Jb.LinkedMap=Jb.Touch=void 0;var pd;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(pd||(Jb.Touch=pd={}));var CW=class{static{s(this,"LinkedMap")}constructor(){this[C3e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=pd.None){let n=this._map.get(e);if(n)return r!==pd.None&&this.touch(n,r),n.value}set(e,r,n=pd.None){let i=this._map.get(e);if(i)i.value=r,n!==pd.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case pd.None:this.addItemLast(i);break;case pd.First:this.addItemFirst(i);break;case pd.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(C3e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==pd.First&&r!==pd.Last)){if(r===pd.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===pd.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Jb.LinkedMap=CW;var xde=class extends CW{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=pd.AsNew){return super.get(e,r)}peek(e){return super.get(e,pd.None)}set(e,r){return super.set(e,r,pd.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Jb.LRUCache=xde});var E3e=H(vW=>{"use strict";f();Object.defineProperty(vW,"__esModule",{value:!0});vW.Disposable=void 0;var v3e;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(v3e||(vW.Disposable=v3e={}))});var Xb=H(wde=>{"use strict";f();Object.defineProperty(wde,"__esModule",{value:!0});var Ide;function Tde(){if(Ide===void 0)throw new Error("No runtime abstraction layer installed");return Ide}s(Tde,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Ide=r}s(e,"install"),t.install=e})(Tde||(Tde={}));wde.default=Tde});var f4=H(d4=>{"use strict";f();Object.defineProperty(d4,"__esModule",{value:!0});d4.Emitter=d4.Event=void 0;var D_t=Xb(),x3e;(function(t){let e={dispose(){}};t.None=function(){return e}})(x3e||(d4.Event=x3e={}));var Sde=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,D_t.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},EW=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Sde),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};d4.Emitter=EW;EW._noop=function(){}});var IW=H(p4=>{"use strict";f();Object.defineProperty(p4,"__esModule",{value:!0});p4.CancellationTokenSource=p4.CancellationToken=void 0;var B_t=Xb(),N_t=u4(),_de=f4(),xW;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:_de.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_de.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||N_t.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(xW||(p4.CancellationToken=xW={}));var L_t=Object.freeze(function(t,e){let r=(0,B_t.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),bW=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?L_t:(this._emitter||(this._emitter=new _de.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Rde=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new bW),this._token}cancel(){this._token?this._token.cancel():this._token=xW.Cancelled}dispose(){this._token?this._token instanceof bW&&this._token.dispose():this._token=xW.None}};p4.CancellationTokenSource=Rde});var b3e=H(m4=>{"use strict";f();Object.defineProperty(m4,"__esModule",{value:!0});m4.SharedArrayReceiverStrategy=m4.SharedArraySenderStrategy=void 0;var M_t=IW(),OM;(function(t){t.Continue=0,t.Cancelled=1})(OM||(OM={}));var kde=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=OM.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,OM.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};m4.SharedArraySenderStrategy=kde;var Pde=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===OM.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Dde=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Pde(e)}cancel(){}dispose(){}},Bde=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new M_t.CancellationTokenSource:new Dde(r)}};m4.SharedArrayReceiverStrategy=Bde});var Lde=H(TW=>{"use strict";f();Object.defineProperty(TW,"__esModule",{value:!0});TW.Semaphore=void 0;var F_t=Xb(),Nde=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,F_t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};TW.Semaphore=Nde});var T3e=H(Zb=>{"use strict";f();Object.defineProperty(Zb,"__esModule",{value:!0});Zb.ReadableStreamMessageReader=Zb.AbstractMessageReader=Zb.MessageReader=void 0;var Fde=Xb(),h4=u4(),Mde=f4(),O_t=Lde(),I3e;(function(t){function e(r){let n=r;return n&&h4.func(n.listen)&&h4.func(n.dispose)&&h4.func(n.onError)&&h4.func(n.onClose)&&h4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(I3e||(Zb.MessageReader=I3e={}));var wW=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new Mde.Emitter,this.closeEmitter=new Mde.Emitter,this.partialMessageEmitter=new Mde.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${h4.string(e.message)?e.message:"unknown"}`)}};Zb.AbstractMessageReader=wW;var Ode;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Fde.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(Ode||(Ode={}));var Qde=class extends wW{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=Ode.fromOptions(r),this.buffer=(0,Fde.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new O_t.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Fde.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Zb.ReadableStreamMessageReader=Qde});var k3e=H(eI=>{"use strict";f();Object.defineProperty(eI,"__esModule",{value:!0});eI.WriteableStreamMessageWriter=eI.AbstractMessageWriter=eI.MessageWriter=void 0;var w3e=Xb(),QM=u4(),Q_t=Lde(),S3e=f4(),U_t="Content-Length: ",_3e=`\r
`,R3e;(function(t){function e(r){let n=r;return n&&QM.func(n.dispose)&&QM.func(n.onClose)&&QM.func(n.onError)&&QM.func(n.write)}s(e,"is"),t.is=e})(R3e||(eI.MessageWriter=R3e={}));var SW=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new S3e.Emitter,this.closeEmitter=new S3e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${QM.string(e.message)?e.message:"unknown"}`)}};eI.AbstractMessageWriter=SW;var Ude;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,w3e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,w3e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(Ude||(Ude={}));var qde=class extends SW{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=Ude.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Q_t.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(U_t,n.byteLength.toString(),_3e),i.push(_3e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};eI.WriteableStreamMessageWriter=qde});var P3e=H(_W=>{"use strict";f();Object.defineProperty(_W,"__esModule",{value:!0});_W.AbstractMessageBuffer=void 0;var q_t=13,H_t=10,$_t=`\r
`,Hde=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case q_t:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case H_t:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split($_t);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let d=l[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};_W.AbstractMessageBuffer=Hde});var M3e=H(li=>{"use strict";f();Object.defineProperty(li,"__esModule",{value:!0});li.createMessageConnection=li.ConnectionOptions=li.MessageStrategy=li.CancellationStrategy=li.CancellationSenderStrategy=li.CancellationReceiverStrategy=li.RequestCancellationReceiverStrategy=li.IdCancellationReceiverStrategy=li.ConnectionStrategy=li.ConnectionError=li.ConnectionErrors=li.LogTraceNotification=li.SetTraceNotification=li.TraceFormat=li.TraceValues=li.Trace=li.NullLogger=li.ProgressType=li.ProgressToken=void 0;var D3e=Xb(),La=u4(),Fn=Ede(),B3e=bde(),UM=f4(),$de=IW(),$M;(function(t){t.type=new Fn.NotificationType("$/cancelRequest")})($M||($M={}));var Wde;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(Wde||(li.ProgressToken=Wde={}));var qM;(function(t){t.type=new Fn.NotificationType("$/progress")})(qM||(qM={}));var jde=class{static{s(this,"ProgressType")}constructor(){}};li.ProgressType=jde;var Gde;(function(t){function e(r){return La.func(r)}s(e,"is"),t.is=e})(Gde||(Gde={}));li.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var $o;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})($o||(li.Trace=$o={}));var N3e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(N3e||(li.TraceValues=N3e={}));(function(t){function e(n){if(!La.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})($o||(li.Trace=$o={}));var rp;(function(t){t.Text="text",t.JSON="json"})(rp||(li.TraceFormat=rp={}));(function(t){function e(r){return La.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(rp||(li.TraceFormat=rp={}));var Vde;(function(t){t.type=new Fn.NotificationType("$/setTrace")})(Vde||(li.SetTraceNotification=Vde={}));var RW;(function(t){t.type=new Fn.NotificationType("$/logTrace")})(RW||(li.LogTraceNotification=RW={}));var HM;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(HM||(li.ConnectionErrors=HM={}));var g4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};li.ConnectionError=g4;var zde;(function(t){function e(r){let n=r;return n&&La.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(zde||(li.ConnectionStrategy=zde={}));var kW;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&La.func(n.createCancellationTokenSource)&&(n.dispose===void 0||La.func(n.dispose))}s(e,"is"),t.is=e})(kW||(li.IdCancellationReceiverStrategy=kW={}));var Yde;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&La.func(n.createCancellationTokenSource)&&(n.dispose===void 0||La.func(n.dispose))}s(e,"is"),t.is=e})(Yde||(li.RequestCancellationReceiverStrategy=Yde={}));var PW;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new $de.CancellationTokenSource}});function e(r){return kW.is(r)||Yde.is(r)}s(e,"is"),t.is=e})(PW||(li.CancellationReceiverStrategy=PW={}));var DW;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification($M.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&La.func(n.sendCancellation)&&La.func(n.cleanup)}s(e,"is"),t.is=e})(DW||(li.CancellationSenderStrategy=DW={}));var BW;(function(t){t.Message=Object.freeze({receiver:PW.Message,sender:DW.Message});function e(r){let n=r;return n&&PW.is(n.receiver)&&DW.is(n.sender)}s(e,"is"),t.is=e})(BW||(li.CancellationStrategy=BW={}));var NW;(function(t){function e(r){let n=r;return n&&La.func(n.handleMessage)}s(e,"is"),t.is=e})(NW||(li.MessageStrategy=NW={}));var L3e;(function(t){function e(r){let n=r;return n&&(BW.is(n.cancellationStrategy)||zde.is(n.connectionStrategy)||NW.is(n.messageStrategy))}s(e,"is"),t.is=e})(L3e||(li.ConnectionOptions=L3e={}));var Qg;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Qg||(Qg={}));function W_t(t,e,r,n){let i=r!==void 0?r:li.NullLogger,o=0,a=0,c=0,l="2.0",u,d=new Map,p,m=new Map,h=new Map,g,A=new B3e.LinkedMap,y=new Map,x=new Set,I=new Map,S=$o.Off,R=rp.Text,B,M=Qg.New,O=new UM.Emitter,K=new UM.Emitter,V=new UM.Emitter,z=new UM.Emitter,Q=new UM.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:BW.Message;function Z(ve){if(ve===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+ve.toString()}s(Z,"createRequestQueueKey");function J(ve){return ve===null?"res-unknown-"+(++c).toString():"res-"+ve.toString()}s(J,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function $(ve,Ge){Fn.Message.isRequest(Ge)?ve.set(Z(Ge.id),Ge):Fn.Message.isResponse(Ge)?ve.set(J(Ge.id),Ge):ve.set(j(),Ge)}s($,"addMessageToQueue");function X(ve){}s(X,"cancelUndispatched");function ie(){return M===Qg.Listening}s(ie,"isListening");function ae(){return M===Qg.Closed}s(ae,"isClosed");function te(){return M===Qg.Disposed}s(te,"isDisposed");function pe(){(M===Qg.New||M===Qg.Listening)&&(M=Qg.Closed,K.fire(void 0))}s(pe,"closeHandler");function Ae(ve){O.fire([ve,void 0,void 0])}s(Ae,"readErrorHandler");function Oe(ve){O.fire(ve)}s(Oe,"writeErrorHandler"),t.onClose(pe),t.onError(Ae),e.onClose(pe),e.onError(Oe);function Te(){g||A.size===0||(g=(0,D3e.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Te,"triggerMessageQueue");function Je(ve){Fn.Message.isRequest(ve)?_t(ve):Fn.Message.isNotification(ve)?ht(ve):Fn.Message.isResponse(ve)?Et(ve):ue(ve)}s(Je,"handleMessage");function Me(){if(A.size===0)return;let ve=A.shift();try{let Ge=n?.messageStrategy;NW.is(Ge)?Ge.handleMessage(ve,Je):Je(ve)}finally{Te()}}s(Me,"processMessageQueue");let lt=s(ve=>{try{if(Fn.Message.isNotification(ve)&&ve.method===$M.type.method){let Ge=ve.params.id,ft=Z(Ge),Tt=A.get(ft);if(Fn.Message.isRequest(Tt)){let Xt=n?.connectionStrategy,br=Xt&&Xt.cancelUndispatched?Xt.cancelUndispatched(Tt,X):void 0;if(br&&(br.error!==void 0||br.result!==void 0)){A.delete(ft),I.delete(Ge),br.id=Tt.id,se(br,ve.method,Date.now()),e.write(br).catch(()=>i.error("Sending response for canceled message failed."));return}}let ir=I.get(Ge);if(ir!==void 0){ir.cancel(),qe(ve);return}else x.add(Ge)}$(A,ve)}finally{Te()}},"callback");function _t(ve){if(te())return;function Ge(tr,cr,rr){let Dr={jsonrpc:l,id:ve.id};tr instanceof Fn.ResponseError?Dr.error=tr.toJson():Dr.result=tr===void 0?null:tr,se(Dr,cr,rr),e.write(Dr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(tr,cr,rr){let Dr={jsonrpc:l,id:ve.id,error:tr.toJson()};se(Dr,cr,rr),e.write(Dr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Tt(tr,cr,rr){tr===void 0&&(tr=null);let Dr={jsonrpc:l,id:ve.id,result:tr};se(Dr,cr,rr),e.write(Dr).catch(()=>i.error("Sending response failed."))}s(Tt,"replySuccess"),le(ve);let ir=d.get(ve.method),Xt,br;ir&&(Xt=ir.type,br=ir.handler);let lr=Date.now();if(br||u){let tr=ve.id??String(Date.now()),cr=kW.is(U.receiver)?U.receiver.createCancellationTokenSource(tr):U.receiver.createCancellationTokenSource(ve);ve.id!==null&&x.has(ve.id)&&cr.cancel(),ve.id!==null&&I.set(tr,cr);try{let rr;if(br)if(ve.params===void 0){if(Xt!==void 0&&Xt.numberOfParams!==0){ft(new Fn.ResponseError(Fn.ErrorCodes.InvalidParams,`Request ${ve.method} defines ${Xt.numberOfParams} params but received none.`),ve.method,lr);return}rr=br(cr.token)}else if(Array.isArray(ve.params)){if(Xt!==void 0&&Xt.parameterStructures===Fn.ParameterStructures.byName){ft(new Fn.ResponseError(Fn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by name but received parameters by position`),ve.method,lr);return}rr=br(...ve.params,cr.token)}else{if(Xt!==void 0&&Xt.parameterStructures===Fn.ParameterStructures.byPosition){ft(new Fn.ResponseError(Fn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by position but received parameters by name`),ve.method,lr);return}rr=br(ve.params,cr.token)}else u&&(rr=u(ve.method,ve.params,cr.token));let Dr=rr;rr?Dr.then?Dr.then(jr=>{I.delete(tr),Ge(jr,ve.method,lr)},jr=>{I.delete(tr),jr instanceof Fn.ResponseError?ft(jr,ve.method,lr):jr&&La.string(jr.message)?ft(new Fn.ResponseError(Fn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${jr.message}`),ve.method,lr):ft(new Fn.ResponseError(Fn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,lr)}):(I.delete(tr),Ge(rr,ve.method,lr)):(I.delete(tr),Tt(rr,ve.method,lr))}catch(rr){I.delete(tr),rr instanceof Fn.ResponseError?Ge(rr,ve.method,lr):rr&&La.string(rr.message)?ft(new Fn.ResponseError(Fn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${rr.message}`),ve.method,lr):ft(new Fn.ResponseError(Fn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,lr)}}else ft(new Fn.ResponseError(Fn.ErrorCodes.MethodNotFound,`Unhandled method ${ve.method}`),ve.method,lr)}s(_t,"handleRequest");function Et(ve){if(!te())if(ve.id===null)ve.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(ve.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=ve.id,ft=y.get(Ge);if(Be(ve,ft),ft!==void 0){y.delete(Ge);try{if(ve.error){let Tt=ve.error;ft.reject(new Fn.ResponseError(Tt.code,Tt.message,Tt.data))}else if(ve.result!==void 0)ft.resolve(ve.result);else throw new Error("Should never happen.")}catch(Tt){Tt.message?i.error(`Response handler '${ft.method}' failed with message: ${Tt.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(Et,"handleResponse");function ht(ve){if(te())return;let Ge,ft;if(ve.method===$M.type.method){let Tt=ve.params.id;x.delete(Tt),qe(ve);return}else{let Tt=m.get(ve.method);Tt&&(ft=Tt.handler,Ge=Tt.type)}if(ft||p)try{if(qe(ve),ft)if(ve.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Fn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(ve.params)){let Tt=ve.params;ve.method===qM.type.method&&Tt.length===2&&Wde.is(Tt[0])?ft({token:Tt[0],value:Tt[1]}):(Ge!==void 0&&(Ge.parameterStructures===Fn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==ve.params.length&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received ${Tt.length} arguments`)),ft(...Tt))}else Ge!==void 0&&Ge.parameterStructures===Fn.ParameterStructures.byPosition&&i.error(`Notification ${ve.method} defines parameters by position but received parameters by name`),ft(ve.params);else p&&p(ve.method,ve.params)}catch(Tt){Tt.message?i.error(`Notification handler '${ve.method}' failed with message: ${Tt.message}`):i.error(`Notification handler '${ve.method}' failed unexpectedly.`)}else V.fire(ve)}s(ht,"handleNotification");function ue(ve){if(!ve){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(ve,null,4)}`);let Ge=ve;if(La.string(Ge.id)||La.number(Ge.id)){let ft=Ge.id,Tt=y.get(ft);Tt&&Tt.reject(new Error("The received response has neither a result nor an error property."))}}s(ue,"handleInvalidMessage");function Ue(ve){if(ve!=null)switch(S){case $o.Verbose:return JSON.stringify(ve,null,4);case $o.Compact:return JSON.stringify(ve);default:return}}s(Ue,"stringifyTrace");function ye(ve){if(!(S===$o.Off||!B))if(R===rp.Text){let Ge;(S===$o.Verbose||S===$o.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Sending request '${ve.method} - (${ve.id})'.`,Ge)}else xe("send-request",ve)}s(ye,"traceSendingRequest");function $e(ve){if(!(S===$o.Off||!B))if(R===rp.Text){let Ge;(S===$o.Verbose||S===$o.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${ve.method}'.`,Ge)}else xe("send-notification",ve)}s($e,"traceSendingNotification");function se(ve,Ge,ft){if(!(S===$o.Off||!B))if(R===rp.Text){let Tt;(S===$o.Verbose||S===$o.Compact)&&(ve.error&&ve.error.data?Tt=`Error data: ${Ue(ve.error.data)}

`:ve.result?Tt=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(Tt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${ve.id})'. Processing request took ${Date.now()-ft}ms`,Tt)}else xe("send-response",ve)}s(se,"traceSendingResponse");function le(ve){if(!(S===$o.Off||!B))if(R===rp.Text){let Ge;(S===$o.Verbose||S===$o.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),B.log(`Received request '${ve.method} - (${ve.id})'.`,Ge)}else xe("receive-request",ve)}s(le,"traceReceivedRequest");function qe(ve){if(!(S===$o.Off||!B||ve.method===RW.type.method))if(R===rp.Text){let Ge;(S===$o.Verbose||S===$o.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${ve.method}'.`,Ge)}else xe("receive-notification",ve)}s(qe,"traceReceivedNotification");function Be(ve,Ge){if(!(S===$o.Off||!B))if(R===rp.Text){let ft;if((S===$o.Verbose||S===$o.Compact)&&(ve.error&&ve.error.data?ft=`Error data: ${Ue(ve.error.data)}

`:ve.result?ft=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(ft=`No result returned.

`)),Ge){let Tt=ve.error?` Request failed: ${ve.error.message} (${ve.error.code}).`:"";B.log(`Received response '${Ge.method} - (${ve.id})' in ${Date.now()-Ge.timerStart}ms.${Tt}`,ft)}else B.log(`Received response ${ve.id} without active response promise.`,ft)}else xe("receive-response",ve)}s(Be,"traceReceivedResponse");function xe(ve,Ge){if(!B||S===$o.Off)return;let ft={isLSPMessage:!0,type:ve,message:Ge,timestamp:Date.now()};B.log(ft)}s(xe,"logLSPMessage");function je(){if(ae())throw new g4(HM.Closed,"Connection is closed.");if(te())throw new g4(HM.Disposed,"Connection is disposed.")}s(je,"throwIfClosedOrDisposed");function tt(){if(ie())throw new g4(HM.AlreadyListening,"Connection is already listening")}s(tt,"throwIfListening");function pt(){if(!ie())throw new Error("Call listen() first.")}s(pt,"throwIfNotListening");function Mt(ve){return ve===void 0?null:ve}s(Mt,"undefinedToNull");function Kt(ve){if(ve!==null)return ve}s(Kt,"nullToUndefined");function Ot(ve){return ve!=null&&!Array.isArray(ve)&&typeof ve=="object"}s(Ot,"isNamedParam");function Wr(ve,Ge){switch(ve){case Fn.ParameterStructures.auto:return Ot(Ge)?Kt(Ge):[Mt(Ge)];case Fn.ParameterStructures.byName:if(!Ot(Ge))throw new Error("Received parameters by name but param is not an object literal.");return Kt(Ge);case Fn.ParameterStructures.byPosition:return[Mt(Ge)];default:throw new Error(`Unknown parameter structure ${ve.toString()}`)}}s(Wr,"computeSingleParam");function Rr(ve,Ge){let ft,Tt=ve.numberOfParams;switch(Tt){case 0:ft=void 0;break;case 1:ft=Wr(ve.parameterStructures,Ge[0]);break;default:ft=[];for(let ir=0;ir<Ge.length&&ir<Tt;ir++)ft.push(Mt(Ge[ir]));if(Ge.length<Tt)for(let ir=Ge.length;ir<Tt;ir++)ft.push(null);break}return ft}s(Rr,"computeMessageParams");let sn={sendNotification:s((ve,...Ge)=>{je();let ft,Tt;if(La.string(ve)){ft=ve;let Xt=Ge[0],br=0,lr=Fn.ParameterStructures.auto;Fn.ParameterStructures.is(Xt)&&(br=1,lr=Xt);let tr=Ge.length,cr=tr-br;switch(cr){case 0:Tt=void 0;break;case 1:Tt=Wr(lr,Ge[br]);break;default:if(lr===Fn.ParameterStructures.byName)throw new Error(`Received ${cr} parameters for 'by Name' notification parameter structure.`);Tt=Ge.slice(br,tr).map(rr=>Mt(rr));break}}else{let Xt=Ge;ft=ve.method,Tt=Rr(ve,Xt)}let ir={jsonrpc:l,method:ft,params:Tt};return $e(ir),e.write(ir).catch(Xt=>{throw i.error("Sending notification failed."),Xt})},"sendNotification"),onNotification:s((ve,Ge)=>{je();let ft;return La.func(ve)?p=ve:Ge&&(La.string(ve)?(ft=ve,m.set(ve,{type:void 0,handler:Ge})):(ft=ve.method,m.set(ve.method,{type:ve,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((ve,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((ve,Ge,ft)=>sn.sendNotification(qM.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:z.event,sendRequest:s((ve,...Ge)=>{je(),pt();let ft,Tt,ir;if(La.string(ve)){ft=ve;let tr=Ge[0],cr=Ge[Ge.length-1],rr=0,Dr=Fn.ParameterStructures.auto;Fn.ParameterStructures.is(tr)&&(rr=1,Dr=tr);let jr=Ge.length;$de.CancellationToken.is(cr)&&(jr=jr-1,ir=cr);let rn=jr-rr;switch(rn){case 0:Tt=void 0;break;case 1:Tt=Wr(Dr,Ge[rr]);break;default:if(Dr===Fn.ParameterStructures.byName)throw new Error(`Received ${rn} parameters for 'by Name' request parameter structure.`);Tt=Ge.slice(rr,jr).map(An=>Mt(An));break}}else{let tr=Ge;ft=ve.method,Tt=Rr(ve,tr);let cr=ve.numberOfParams;ir=$de.CancellationToken.is(tr[cr])?tr[cr]:void 0}let Xt=o++,br;ir&&(br=ir.onCancellationRequested(()=>{let tr=U.sender.sendCancellation(sn,Xt);return tr===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Xt}`),Promise.resolve()):tr.catch(()=>{i.log(`Sending cancellation messages for id ${Xt} failed`)})}));let lr={jsonrpc:l,id:Xt,method:ft,params:Tt};return ye(lr),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(lr),new Promise(async(tr,cr)=>{let rr=s(rn=>{tr(rn),U.sender.cleanup(Xt),br?.dispose()},"resolveWithCleanup"),Dr=s(rn=>{cr(rn),U.sender.cleanup(Xt),br?.dispose()},"rejectWithCleanup"),jr={method:ft,timerStart:Date.now(),resolve:rr,reject:Dr};try{await e.write(lr),y.set(Xt,jr)}catch(rn){throw i.error("Sending request failed."),jr.reject(new Fn.ResponseError(Fn.ErrorCodes.MessageWriteError,rn.message?rn.message:"Unknown reason")),rn}})},"sendRequest"),onRequest:s((ve,Ge)=>{je();let ft=null;return Gde.is(ve)?(ft=void 0,u=ve):La.string(ve)?(ft=null,Ge!==void 0&&(ft=ve,d.set(ve,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=ve.method,d.set(ve.method,{type:ve,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?d.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>y.size>0,"hasPendingResponse"),trace:s(async(ve,Ge,ft)=>{let Tt=!1,ir=rp.Text;ft!==void 0&&(La.boolean(ft)?Tt=ft:(Tt=ft.sendNotification||!1,ir=ft.traceFormat||rp.Text)),S=ve,R=ir,S===$o.Off?B=void 0:B=Ge,Tt&&!ae()&&!te()&&await sn.sendNotification(Vde.type,{value:$o.toString(ve)})},"trace"),onError:O.event,onClose:K.event,onUnhandledNotification:V.event,onDispose:Q.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;M=Qg.Disposed,Q.fire(void 0);let ve=new Fn.ResponseError(Fn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of y.values())Ge.reject(ve);y=new Map,I=new Map,x=new Set,A=new B3e.LinkedMap,La.func(e.dispose)&&e.dispose(),La.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{je(),tt(),M=Qg.Listening,t.listen(lt)},"listen"),inspect:s(()=>{(0,D3e.default)().console.log("inspect")},"inspect")};return sn.onNotification(RW.type,ve=>{if(S===$o.Off||!B)return;let Ge=S===$o.Verbose||S===$o.Compact;B.log(ve.message,Ge?ve.verbose:void 0)}),sn.onNotification(qM.type,ve=>{let Ge=h.get(ve.token);Ge?Ge(ve.value):z.fire(ve)}),sn}s(W_t,"createMessageConnection");li.createMessageConnection=W_t});var LW=H(At=>{"use strict";f();Object.defineProperty(At,"__esModule",{value:!0});At.ProgressType=At.ProgressToken=At.createMessageConnection=At.NullLogger=At.ConnectionOptions=At.ConnectionStrategy=At.AbstractMessageBuffer=At.WriteableStreamMessageWriter=At.AbstractMessageWriter=At.MessageWriter=At.ReadableStreamMessageReader=At.AbstractMessageReader=At.MessageReader=At.SharedArrayReceiverStrategy=At.SharedArraySenderStrategy=At.CancellationToken=At.CancellationTokenSource=At.Emitter=At.Event=At.Disposable=At.LRUCache=At.Touch=At.LinkedMap=At.ParameterStructures=At.NotificationType9=At.NotificationType8=At.NotificationType7=At.NotificationType6=At.NotificationType5=At.NotificationType4=At.NotificationType3=At.NotificationType2=At.NotificationType1=At.NotificationType0=At.NotificationType=At.ErrorCodes=At.ResponseError=At.RequestType9=At.RequestType8=At.RequestType7=At.RequestType6=At.RequestType5=At.RequestType4=At.RequestType3=At.RequestType2=At.RequestType1=At.RequestType0=At.RequestType=At.Message=At.RAL=void 0;At.MessageStrategy=At.CancellationStrategy=At.CancellationSenderStrategy=At.CancellationReceiverStrategy=At.ConnectionError=At.ConnectionErrors=At.LogTraceNotification=At.SetTraceNotification=At.TraceFormat=At.TraceValues=At.Trace=void 0;var ks=Ede();Object.defineProperty(At,"Message",{enumerable:!0,get:s(function(){return ks.Message},"get")});Object.defineProperty(At,"RequestType",{enumerable:!0,get:s(function(){return ks.RequestType},"get")});Object.defineProperty(At,"RequestType0",{enumerable:!0,get:s(function(){return ks.RequestType0},"get")});Object.defineProperty(At,"RequestType1",{enumerable:!0,get:s(function(){return ks.RequestType1},"get")});Object.defineProperty(At,"RequestType2",{enumerable:!0,get:s(function(){return ks.RequestType2},"get")});Object.defineProperty(At,"RequestType3",{enumerable:!0,get:s(function(){return ks.RequestType3},"get")});Object.defineProperty(At,"RequestType4",{enumerable:!0,get:s(function(){return ks.RequestType4},"get")});Object.defineProperty(At,"RequestType5",{enumerable:!0,get:s(function(){return ks.RequestType5},"get")});Object.defineProperty(At,"RequestType6",{enumerable:!0,get:s(function(){return ks.RequestType6},"get")});Object.defineProperty(At,"RequestType7",{enumerable:!0,get:s(function(){return ks.RequestType7},"get")});Object.defineProperty(At,"RequestType8",{enumerable:!0,get:s(function(){return ks.RequestType8},"get")});Object.defineProperty(At,"RequestType9",{enumerable:!0,get:s(function(){return ks.RequestType9},"get")});Object.defineProperty(At,"ResponseError",{enumerable:!0,get:s(function(){return ks.ResponseError},"get")});Object.defineProperty(At,"ErrorCodes",{enumerable:!0,get:s(function(){return ks.ErrorCodes},"get")});Object.defineProperty(At,"NotificationType",{enumerable:!0,get:s(function(){return ks.NotificationType},"get")});Object.defineProperty(At,"NotificationType0",{enumerable:!0,get:s(function(){return ks.NotificationType0},"get")});Object.defineProperty(At,"NotificationType1",{enumerable:!0,get:s(function(){return ks.NotificationType1},"get")});Object.defineProperty(At,"NotificationType2",{enumerable:!0,get:s(function(){return ks.NotificationType2},"get")});Object.defineProperty(At,"NotificationType3",{enumerable:!0,get:s(function(){return ks.NotificationType3},"get")});Object.defineProperty(At,"NotificationType4",{enumerable:!0,get:s(function(){return ks.NotificationType4},"get")});Object.defineProperty(At,"NotificationType5",{enumerable:!0,get:s(function(){return ks.NotificationType5},"get")});Object.defineProperty(At,"NotificationType6",{enumerable:!0,get:s(function(){return ks.NotificationType6},"get")});Object.defineProperty(At,"NotificationType7",{enumerable:!0,get:s(function(){return ks.NotificationType7},"get")});Object.defineProperty(At,"NotificationType8",{enumerable:!0,get:s(function(){return ks.NotificationType8},"get")});Object.defineProperty(At,"NotificationType9",{enumerable:!0,get:s(function(){return ks.NotificationType9},"get")});Object.defineProperty(At,"ParameterStructures",{enumerable:!0,get:s(function(){return ks.ParameterStructures},"get")});var Kde=bde();Object.defineProperty(At,"LinkedMap",{enumerable:!0,get:s(function(){return Kde.LinkedMap},"get")});Object.defineProperty(At,"LRUCache",{enumerable:!0,get:s(function(){return Kde.LRUCache},"get")});Object.defineProperty(At,"Touch",{enumerable:!0,get:s(function(){return Kde.Touch},"get")});var j_t=E3e();Object.defineProperty(At,"Disposable",{enumerable:!0,get:s(function(){return j_t.Disposable},"get")});var F3e=f4();Object.defineProperty(At,"Event",{enumerable:!0,get:s(function(){return F3e.Event},"get")});Object.defineProperty(At,"Emitter",{enumerable:!0,get:s(function(){return F3e.Emitter},"get")});var O3e=IW();Object.defineProperty(At,"CancellationTokenSource",{enumerable:!0,get:s(function(){return O3e.CancellationTokenSource},"get")});Object.defineProperty(At,"CancellationToken",{enumerable:!0,get:s(function(){return O3e.CancellationToken},"get")});var Q3e=b3e();Object.defineProperty(At,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return Q3e.SharedArraySenderStrategy},"get")});Object.defineProperty(At,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return Q3e.SharedArrayReceiverStrategy},"get")});var Jde=T3e();Object.defineProperty(At,"MessageReader",{enumerable:!0,get:s(function(){return Jde.MessageReader},"get")});Object.defineProperty(At,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Jde.AbstractMessageReader},"get")});Object.defineProperty(At,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Jde.ReadableStreamMessageReader},"get")});var Xde=k3e();Object.defineProperty(At,"MessageWriter",{enumerable:!0,get:s(function(){return Xde.MessageWriter},"get")});Object.defineProperty(At,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Xde.AbstractMessageWriter},"get")});Object.defineProperty(At,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Xde.WriteableStreamMessageWriter},"get")});var G_t=P3e();Object.defineProperty(At,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return G_t.AbstractMessageBuffer},"get")});var wu=M3e();Object.defineProperty(At,"ConnectionStrategy",{enumerable:!0,get:s(function(){return wu.ConnectionStrategy},"get")});Object.defineProperty(At,"ConnectionOptions",{enumerable:!0,get:s(function(){return wu.ConnectionOptions},"get")});Object.defineProperty(At,"NullLogger",{enumerable:!0,get:s(function(){return wu.NullLogger},"get")});Object.defineProperty(At,"createMessageConnection",{enumerable:!0,get:s(function(){return wu.createMessageConnection},"get")});Object.defineProperty(At,"ProgressToken",{enumerable:!0,get:s(function(){return wu.ProgressToken},"get")});Object.defineProperty(At,"ProgressType",{enumerable:!0,get:s(function(){return wu.ProgressType},"get")});Object.defineProperty(At,"Trace",{enumerable:!0,get:s(function(){return wu.Trace},"get")});Object.defineProperty(At,"TraceValues",{enumerable:!0,get:s(function(){return wu.TraceValues},"get")});Object.defineProperty(At,"TraceFormat",{enumerable:!0,get:s(function(){return wu.TraceFormat},"get")});Object.defineProperty(At,"SetTraceNotification",{enumerable:!0,get:s(function(){return wu.SetTraceNotification},"get")});Object.defineProperty(At,"LogTraceNotification",{enumerable:!0,get:s(function(){return wu.LogTraceNotification},"get")});Object.defineProperty(At,"ConnectionErrors",{enumerable:!0,get:s(function(){return wu.ConnectionErrors},"get")});Object.defineProperty(At,"ConnectionError",{enumerable:!0,get:s(function(){return wu.ConnectionError},"get")});Object.defineProperty(At,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return wu.CancellationReceiverStrategy},"get")});Object.defineProperty(At,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return wu.CancellationSenderStrategy},"get")});Object.defineProperty(At,"CancellationStrategy",{enumerable:!0,get:s(function(){return wu.CancellationStrategy},"get")});Object.defineProperty(At,"MessageStrategy",{enumerable:!0,get:s(function(){return wu.MessageStrategy},"get")});var V_t=Xb();At.RAL=V_t.default});var H3e=H(rfe=>{"use strict";f();Object.defineProperty(rfe,"__esModule",{value:!0});var U3e=require("util"),vv=LW(),MW=class t extends vv.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new U3e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};MW.emptyBuffer=Buffer.allocUnsafe(0);var Zde=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),vv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),vv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),vv.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),vv.Disposable.create(()=>this.stream.off("data",e))}},efe=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),vv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),vv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),vv.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},q3e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new MW(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new U3e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Zde(t),"asReadableStream"),asWritableStream:s(t=>new efe(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function tfe(){return q3e}s(tfe,"RIL");(function(t){function e(){vv.RAL.install(q3e)}s(e,"install"),t.install=e})(tfe||(tfe={}));rfe.default=tfe});var p_=H(Ao=>{"use strict";f();var z_t=Ao&&Ao.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Y_t=Ao&&Ao.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&z_t(e,t,r)};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.createMessageConnection=Ao.createServerSocketTransport=Ao.createClientSocketTransport=Ao.createServerPipeTransport=Ao.createClientPipeTransport=Ao.generateRandomPipeName=Ao.StreamMessageWriter=Ao.StreamMessageReader=Ao.SocketMessageWriter=Ao.SocketMessageReader=Ao.PortMessageWriter=Ao.PortMessageReader=Ao.IPCMessageWriter=Ao.IPCMessageReader=void 0;var A4=H3e();A4.default.install();var $3e=require("path"),K_t=require("os"),J_t=require("crypto"),QW=require("net"),np=LW();Y_t(LW(),Ao);var nfe=class extends np.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),np.Disposable.create(()=>this.process.off("message",e))}};Ao.IPCMessageReader=nfe;var ife=class extends np.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Ao.IPCMessageWriter=ife;var ofe=class extends np.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new np.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Ao.PortMessageReader=ofe;var sfe=class extends np.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Ao.PortMessageWriter=sfe;var d_=class extends np.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,A4.default)().stream.asReadableStream(e),r)}};Ao.SocketMessageReader=d_;var f_=class extends np.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,A4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ao.SocketMessageWriter=f_;var FW=class extends np.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,A4.default)().stream.asReadableStream(e),r)}};Ao.StreamMessageReader=FW;var OW=class extends np.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,A4.default)().stream.asWritableStream(e),r)}};Ao.StreamMessageWriter=OW;var W3e=process.env.XDG_RUNTIME_DIR,X_t=new Map([["linux",107],["darwin",103]]);function Z_t(){let t=(0,J_t.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;W3e?e=$3e.join(W3e,`vscode-ipc-${t}.sock`):e=$3e.join(K_t.tmpdir(),`vscode-${t}.sock`);let r=X_t.get(process.platform);return r!==void 0&&e.length>r&&(0,A4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(Z_t,"generateRandomPipeName");Ao.generateRandomPipeName=Z_t;function e2t(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,QW.createServer)(c=>{a.close(),r([new d_(c,e),new f_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(e2t,"createClientPipeTransport");Ao.createClientPipeTransport=e2t;function t2t(t,e="utf-8"){let r=(0,QW.createConnection)(t);return[new d_(r,e),new f_(r,e)]}s(t2t,"createServerPipeTransport");Ao.createServerPipeTransport=t2t;function r2t(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,QW.createServer)(c=>{a.close(),r([new d_(c,e),new f_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(r2t,"createClientSocketTransport");Ao.createClientSocketTransport=r2t;function n2t(t,e="utf-8"){let r=(0,QW.createConnection)(t,"127.0.0.1");return[new d_(r,e),new f_(r,e)]}s(n2t,"createServerSocketTransport");Ao.createServerSocketTransport=n2t;function i2t(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(i2t,"isReadableStream");function o2t(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(o2t,"isWritableStream");function s2t(t,e,r,n){r||(r=np.NullLogger);let i=i2t(t)?new FW(t):t,o=o2t(e)?new OW(e):e;return np.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,np.createMessageConnection)(i,o,r,n)}s(s2t,"createMessageConnection");Ao.createMessageConnection=s2t});var afe=H((KQr,j3e)=>{"use strict";f();j3e.exports=p_()});var qW=H((G3e,UW)=>{f();(function(t){if(typeof UW=="object"&&typeof UW.exports=="object"){var e=t(require,G3e);e!==void 0&&(UW.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(Y){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),Y.is=Ce})(r||(e.DocumentUri=r={}));var n;(function(Y){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),Y.is=Ce})(n||(e.URI=n={}));var i;(function(Y){Y.MIN_VALUE=-2147483648,Y.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&Y.MIN_VALUE<=Ie&&Ie<=Y.MAX_VALUE}s(Ce,"is"),Y.is=Ce})(i||(e.integer=i={}));var o;(function(Y){Y.MIN_VALUE=0,Y.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&Y.MIN_VALUE<=Ie&&Ie<=Y.MAX_VALUE}s(Ce,"is"),Y.is=Ce})(o||(e.uinteger=o={}));var a;(function(Y){function Ce(F,D){return F===Number.MAX_VALUE&&(F=o.MAX_VALUE),D===Number.MAX_VALUE&&(D=o.MAX_VALUE),{line:F,character:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.line)&&Pe.uinteger(D.character)}s(Ie,"is"),Y.is=Ie})(a||(e.Position=a={}));var c;(function(Y){function Ce(F,D,ee,ge){if(Pe.uinteger(F)&&Pe.uinteger(D)&&Pe.uinteger(ee)&&Pe.uinteger(ge))return{start:a.create(F,D),end:a.create(ee,ge)};if(a.is(F)&&a.is(D))return{start:F,end:D};throw new Error("Range#create called with invalid arguments[".concat(F,", ").concat(D,", ").concat(ee,", ").concat(ge,"]"))}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.start)&&a.is(D.end)}s(Ie,"is"),Y.is=Ie})(c||(e.Range=c={}));var l;(function(Y){function Ce(F,D){return{uri:F,range:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(Pe.string(D.uri)||Pe.undefined(D.uri))}s(Ie,"is"),Y.is=Ie})(l||(e.Location=l={}));var u;(function(Y){function Ce(F,D,ee,ge){return{targetUri:F,targetRange:D,targetSelectionRange:ee,originSelectionRange:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.targetRange)&&Pe.string(D.targetUri)&&c.is(D.targetSelectionRange)&&(c.is(D.originSelectionRange)||Pe.undefined(D.originSelectionRange))}s(Ie,"is"),Y.is=Ie})(u||(e.LocationLink=u={}));var d;(function(Y){function Ce(F,D,ee,ge){return{red:F,green:D,blue:ee,alpha:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.numberRange(D.red,0,1)&&Pe.numberRange(D.green,0,1)&&Pe.numberRange(D.blue,0,1)&&Pe.numberRange(D.alpha,0,1)}s(Ie,"is"),Y.is=Ie})(d||(e.Color=d={}));var p;(function(Y){function Ce(F,D){return{range:F,color:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&d.is(D.color)}s(Ie,"is"),Y.is=Ie})(p||(e.ColorInformation=p={}));var m;(function(Y){function Ce(F,D,ee){return{label:F,textEdit:D,additionalTextEdits:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.undefined(D.textEdit)||B.is(D))&&(Pe.undefined(D.additionalTextEdits)||Pe.typedArray(D.additionalTextEdits,B.is))}s(Ie,"is"),Y.is=Ie})(m||(e.ColorPresentation=m={}));var h;(function(Y){Y.Comment="comment",Y.Imports="imports",Y.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={startLine:F,endLine:D};return Pe.defined(ee)&&(St.startCharacter=ee),Pe.defined(ge)&&(St.endCharacter=ge),Pe.defined(_e)&&(St.kind=_e),Pe.defined(ut)&&(St.collapsedText=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.uinteger(D.startLine)&&Pe.uinteger(D.startLine)&&(Pe.undefined(D.startCharacter)||Pe.uinteger(D.startCharacter))&&(Pe.undefined(D.endCharacter)||Pe.uinteger(D.endCharacter))&&(Pe.undefined(D.kind)||Pe.string(D.kind))}s(Ie,"is"),Y.is=Ie})(g||(e.FoldingRange=g={}));var A;(function(Y){function Ce(F,D){return{location:F,message:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&l.is(D.location)&&Pe.string(D.message)}s(Ie,"is"),Y.is=Ie})(A||(e.DiagnosticRelatedInformation=A={}));var y;(function(Y){Y.Error=1,Y.Warning=2,Y.Information=3,Y.Hint=4})(y||(e.DiagnosticSeverity=y={}));var x;(function(Y){Y.Unnecessary=1,Y.Deprecated=2})(x||(e.DiagnosticTag=x={}));var I;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&Pe.string(F.href)}s(Ce,"is"),Y.is=Ce})(I||(e.CodeDescription=I={}));var S;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={range:F,message:D};return Pe.defined(ee)&&(St.severity=ee),Pe.defined(ge)&&(St.code=ge),Pe.defined(_e)&&(St.source=_e),Pe.defined(ut)&&(St.relatedInformation=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D,ee=F;return Pe.defined(ee)&&c.is(ee.range)&&Pe.string(ee.message)&&(Pe.number(ee.severity)||Pe.undefined(ee.severity))&&(Pe.integer(ee.code)||Pe.string(ee.code)||Pe.undefined(ee.code))&&(Pe.undefined(ee.codeDescription)||Pe.string((D=ee.codeDescription)===null||D===void 0?void 0:D.href))&&(Pe.string(ee.source)||Pe.undefined(ee.source))&&(Pe.undefined(ee.relatedInformation)||Pe.typedArray(ee.relatedInformation,A.is))}s(Ie,"is"),Y.is=Ie})(S||(e.Diagnostic=S={}));var R;(function(Y){function Ce(F,D){for(var ee=[],ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];var _e={title:F,command:D};return Pe.defined(ee)&&ee.length>0&&(_e.arguments=ee),_e}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.title)&&Pe.string(D.command)}s(Ie,"is"),Y.is=Ie})(R||(e.Command=R={}));var B;(function(Y){function Ce(ee,ge){return{range:ee,newText:ge}}s(Ce,"replace"),Y.replace=Ce;function Ie(ee,ge){return{range:{start:ee,end:ee},newText:ge}}s(Ie,"insert"),Y.insert=Ie;function F(ee){return{range:ee,newText:""}}s(F,"del"),Y.del=F;function D(ee){var ge=ee;return Pe.objectLiteral(ge)&&Pe.string(ge.newText)&&c.is(ge.range)}s(D,"is"),Y.is=D})(B||(e.TextEdit=B={}));var M;(function(Y){function Ce(F,D,ee){var ge={label:F};return D!==void 0&&(ge.needsConfirmation=D),ee!==void 0&&(ge.description=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.boolean(D.needsConfirmation)||D.needsConfirmation===void 0)&&(Pe.string(D.description)||D.description===void 0)}s(Ie,"is"),Y.is=Ie})(M||(e.ChangeAnnotation=M={}));var O;(function(Y){function Ce(Ie){var F=Ie;return Pe.string(F)}s(Ce,"is"),Y.is=Ce})(O||(e.ChangeAnnotationIdentifier=O={}));var K;(function(Y){function Ce(ee,ge,_e){return{range:ee,newText:ge,annotationId:_e}}s(Ce,"replace"),Y.replace=Ce;function Ie(ee,ge,_e){return{range:{start:ee,end:ee},newText:ge,annotationId:_e}}s(Ie,"insert"),Y.insert=Ie;function F(ee,ge){return{range:ee,newText:"",annotationId:ge}}s(F,"del"),Y.del=F;function D(ee){var ge=ee;return B.is(ge)&&(M.is(ge.annotationId)||O.is(ge.annotationId))}s(D,"is"),Y.is=D})(K||(e.AnnotatedTextEdit=K={}));var V;(function(Y){function Ce(F,D){return{textDocument:F,edits:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&ae.is(D.textDocument)&&Array.isArray(D.edits)}s(Ie,"is"),Y.is=Ie})(V||(e.TextDocumentEdit=V={}));var z;(function(Y){function Ce(F,D,ee){var ge={kind:"create",uri:F};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="create"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(z||(e.CreateFile=z={}));var Q;(function(Y){function Ce(F,D,ee,ge){var _e={kind:"rename",oldUri:F,newUri:D};return ee!==void 0&&(ee.overwrite!==void 0||ee.ignoreIfExists!==void 0)&&(_e.options=ee),ge!==void 0&&(_e.annotationId=ge),_e}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="rename"&&Pe.string(D.oldUri)&&Pe.string(D.newUri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(Q||(e.RenameFile=Q={}));var U;(function(Y){function Ce(F,D,ee){var ge={kind:"delete",uri:F};return D!==void 0&&(D.recursive!==void 0||D.ignoreIfNotExists!==void 0)&&(ge.options=D),ee!==void 0&&(ge.annotationId=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&D.kind==="delete"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.recursive===void 0||Pe.boolean(D.options.recursive))&&(D.options.ignoreIfNotExists===void 0||Pe.boolean(D.options.ignoreIfNotExists)))&&(D.annotationId===void 0||O.is(D.annotationId))}s(Ie,"is"),Y.is=Ie})(U||(e.DeleteFile=U={}));var Z;(function(Y){function Ce(Ie){var F=Ie;return F&&(F.changes!==void 0||F.documentChanges!==void 0)&&(F.documentChanges===void 0||F.documentChanges.every(function(D){return Pe.string(D.kind)?z.is(D)||Q.is(D)||U.is(D):V.is(D)}))}s(Ce,"is"),Y.is=Ce})(Z||(e.WorkspaceEdit=Z={}));var J=function(){function Y(Ce,Ie){this.edits=Ce,this.changeAnnotations=Ie}return s(Y,"TextEditChangeImpl"),Y.prototype.insert=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.insert(Ce,Ie):O.is(F)?(ee=F,D=K.insert(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=K.insert(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},Y.prototype.replace=function(Ce,Ie,F){var D,ee;if(F===void 0?D=B.replace(Ce,Ie):O.is(F)?(ee=F,D=K.replace(Ce,Ie,F)):(this.assertChangeAnnotations(this.changeAnnotations),ee=this.changeAnnotations.manage(F),D=K.replace(Ce,Ie,ee)),this.edits.push(D),ee!==void 0)return ee},Y.prototype.delete=function(Ce,Ie){var F,D;if(Ie===void 0?F=B.del(Ce):O.is(Ie)?(D=Ie,F=K.del(Ce,Ie)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(Ie),F=K.del(Ce,D)),this.edits.push(F),D!==void 0)return D},Y.prototype.add=function(Ce){this.edits.push(Ce)},Y.prototype.all=function(){return this.edits},Y.prototype.clear=function(){this.edits.splice(0,this.edits.length)},Y.prototype.assertChangeAnnotations=function(Ce){if(Ce===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},Y}(),j=function(){function Y(Ce){this._annotations=Ce===void 0?Object.create(null):Ce,this._counter=0,this._size=0}return s(Y,"ChangeAnnotations"),Y.prototype.all=function(){return this._annotations},Object.defineProperty(Y.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),Y.prototype.manage=function(Ce,Ie){var F;if(O.is(Ce)?F=Ce:(F=this.nextId(),Ie=Ce),this._annotations[F]!==void 0)throw new Error("Id ".concat(F," is already in use."));if(Ie===void 0)throw new Error("No annotation provided for id ".concat(F));return this._annotations[F]=Ie,this._size++,F},Y.prototype.nextId=function(){return this._counter++,this._counter.toString()},Y}(),$=function(){function Y(Ce){var Ie=this;this._textEditChanges=Object.create(null),Ce!==void 0?(this._workspaceEdit=Ce,Ce.documentChanges?(this._changeAnnotations=new j(Ce.changeAnnotations),Ce.changeAnnotations=this._changeAnnotations.all(),Ce.documentChanges.forEach(function(F){if(V.is(F)){var D=new J(F.edits,Ie._changeAnnotations);Ie._textEditChanges[F.textDocument.uri]=D}})):Ce.changes&&Object.keys(Ce.changes).forEach(function(F){var D=new J(Ce.changes[F]);Ie._textEditChanges[F]=D})):this._workspaceEdit={}}return s(Y,"WorkspaceChange"),Object.defineProperty(Y.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),Y.prototype.getTextEditChange=function(Ce){if(ae.is(Ce)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Ie={uri:Ce.uri,version:Ce.version},F=this._textEditChanges[Ie.uri];if(!F){var D=[],ee={textDocument:Ie,edits:D};this._workspaceEdit.documentChanges.push(ee),F=new J(D,this._changeAnnotations),this._textEditChanges[Ie.uri]=F}return F}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var F=this._textEditChanges[Ce];if(!F){var D=[];this._workspaceEdit.changes[Ce]=D,F=new J(D),this._textEditChanges[Ce]=F}return F}},Y.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},Y.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},Y.prototype.createFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;M.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=z.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=z.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},Y.prototype.renameFile=function(Ce,Ie,F,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ee;M.is(F)||O.is(F)?ee=F:D=F;var ge,_e;if(ee===void 0?ge=Q.create(Ce,Ie,D):(_e=O.is(ee)?ee:this._changeAnnotations.manage(ee),ge=Q.create(Ce,Ie,D,_e)),this._workspaceEdit.documentChanges.push(ge),_e!==void 0)return _e},Y.prototype.deleteFile=function(Ce,Ie,F){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;M.is(Ie)||O.is(Ie)?D=Ie:F=Ie;var ee,ge;if(D===void 0?ee=U.create(Ce,F):(ge=O.is(D)?D:this._changeAnnotations.manage(D),ee=U.create(Ce,F,ge)),this._workspaceEdit.documentChanges.push(ee),ge!==void 0)return ge},Y}();e.WorkspaceChange=$;var X;(function(Y){function Ce(F){return{uri:F}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)}s(Ie,"is"),Y.is=Ie})(X||(e.TextDocumentIdentifier=X={}));var ie;(function(Y){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.integer(D.version)}s(Ie,"is"),Y.is=Ie})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ae;(function(Y){function Ce(F,D){return{uri:F,version:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&(D.version===null||Pe.integer(D.version))}s(Ie,"is"),Y.is=Ie})(ae||(e.OptionalVersionedTextDocumentIdentifier=ae={}));var te;(function(Y){function Ce(F,D,ee,ge){return{uri:F,languageId:D,version:ee,text:ge}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.string(D.languageId)&&Pe.integer(D.version)&&Pe.string(D.text)}s(Ie,"is"),Y.is=Ie})(te||(e.TextDocumentItem=te={}));var pe;(function(Y){Y.PlainText="plaintext",Y.Markdown="markdown";function Ce(Ie){var F=Ie;return F===Y.PlainText||F===Y.Markdown}s(Ce,"is"),Y.is=Ce})(pe||(e.MarkupKind=pe={}));var Ae;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(Ie)&&pe.is(F.kind)&&Pe.string(F.value)}s(Ce,"is"),Y.is=Ce})(Ae||(e.MarkupContent=Ae={}));var Oe;(function(Y){Y.Text=1,Y.Method=2,Y.Function=3,Y.Constructor=4,Y.Field=5,Y.Variable=6,Y.Class=7,Y.Interface=8,Y.Module=9,Y.Property=10,Y.Unit=11,Y.Value=12,Y.Enum=13,Y.Keyword=14,Y.Snippet=15,Y.Color=16,Y.File=17,Y.Reference=18,Y.Folder=19,Y.EnumMember=20,Y.Constant=21,Y.Struct=22,Y.Event=23,Y.Operator=24,Y.TypeParameter=25})(Oe||(e.CompletionItemKind=Oe={}));var Te;(function(Y){Y.PlainText=1,Y.Snippet=2})(Te||(e.InsertTextFormat=Te={}));var Je;(function(Y){Y.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(Y){function Ce(F,D,ee){return{newText:F,insert:D,replace:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.newText)&&c.is(D.insert)&&c.is(D.replace)}s(Ie,"is"),Y.is=Ie})(Me||(e.InsertReplaceEdit=Me={}));var lt;(function(Y){Y.asIs=1,Y.adjustIndentation=2})(lt||(e.InsertTextMode=lt={}));var _t;(function(Y){function Ce(Ie){var F=Ie;return F&&(Pe.string(F.detail)||F.detail===void 0)&&(Pe.string(F.description)||F.description===void 0)}s(Ce,"is"),Y.is=Ce})(_t||(e.CompletionItemLabelDetails=_t={}));var Et;(function(Y){function Ce(Ie){return{label:Ie}}s(Ce,"create"),Y.create=Ce})(Et||(e.CompletionItem=Et={}));var ht;(function(Y){function Ce(Ie,F){return{items:Ie||[],isIncomplete:!!F}}s(Ce,"create"),Y.create=Ce})(ht||(e.CompletionList=ht={}));var ue;(function(Y){function Ce(F){return F.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(Ce,"fromPlainText"),Y.fromPlainText=Ce;function Ie(F){var D=F;return Pe.string(D)||Pe.objectLiteral(D)&&Pe.string(D.language)&&Pe.string(D.value)}s(Ie,"is"),Y.is=Ie})(ue||(e.MarkedString=ue={}));var Ue;(function(Y){function Ce(Ie){var F=Ie;return!!F&&Pe.objectLiteral(F)&&(Ae.is(F.contents)||ue.is(F.contents)||Pe.typedArray(F.contents,ue.is))&&(Ie.range===void 0||c.is(Ie.range))}s(Ce,"is"),Y.is=Ce})(Ue||(e.Hover=Ue={}));var ye;(function(Y){function Ce(Ie,F){return F?{label:Ie,documentation:F}:{label:Ie}}s(Ce,"create"),Y.create=Ce})(ye||(e.ParameterInformation=ye={}));var $e;(function(Y){function Ce(Ie,F){for(var D=[],ee=2;ee<arguments.length;ee++)D[ee-2]=arguments[ee];var ge={label:Ie};return Pe.defined(F)&&(ge.documentation=F),Pe.defined(D)?ge.parameters=D:ge.parameters=[],ge}s(Ce,"create"),Y.create=Ce})($e||(e.SignatureInformation=$e={}));var se;(function(Y){Y.Text=1,Y.Read=2,Y.Write=3})(se||(e.DocumentHighlightKind=se={}));var le;(function(Y){function Ce(Ie,F){var D={range:Ie};return Pe.number(F)&&(D.kind=F),D}s(Ce,"create"),Y.create=Ce})(le||(e.DocumentHighlight=le={}));var qe;(function(Y){Y.File=1,Y.Module=2,Y.Namespace=3,Y.Package=4,Y.Class=5,Y.Method=6,Y.Property=7,Y.Field=8,Y.Constructor=9,Y.Enum=10,Y.Interface=11,Y.Function=12,Y.Variable=13,Y.Constant=14,Y.String=15,Y.Number=16,Y.Boolean=17,Y.Array=18,Y.Object=19,Y.Key=20,Y.Null=21,Y.EnumMember=22,Y.Struct=23,Y.Event=24,Y.Operator=25,Y.TypeParameter=26})(qe||(e.SymbolKind=qe={}));var Be;(function(Y){Y.Deprecated=1})(Be||(e.SymbolTag=Be={}));var xe;(function(Y){function Ce(Ie,F,D,ee,ge){var _e={name:Ie,kind:F,location:{uri:ee,range:D}};return ge&&(_e.containerName=ge),_e}s(Ce,"create"),Y.create=Ce})(xe||(e.SymbolInformation=xe={}));var je;(function(Y){function Ce(Ie,F,D,ee){return ee!==void 0?{name:Ie,kind:F,location:{uri:D,range:ee}}:{name:Ie,kind:F,location:{uri:D}}}s(Ce,"create"),Y.create=Ce})(je||(e.WorkspaceSymbol=je={}));var tt;(function(Y){function Ce(F,D,ee,ge,_e,ut){var St={name:F,detail:D,kind:ee,range:ge,selectionRange:_e};return ut!==void 0&&(St.children=ut),St}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.name)&&Pe.number(D.kind)&&c.is(D.range)&&c.is(D.selectionRange)&&(D.detail===void 0||Pe.string(D.detail))&&(D.deprecated===void 0||Pe.boolean(D.deprecated))&&(D.children===void 0||Array.isArray(D.children))&&(D.tags===void 0||Array.isArray(D.tags))}s(Ie,"is"),Y.is=Ie})(tt||(e.DocumentSymbol=tt={}));var pt;(function(Y){Y.Empty="",Y.QuickFix="quickfix",Y.Refactor="refactor",Y.RefactorExtract="refactor.extract",Y.RefactorInline="refactor.inline",Y.RefactorRewrite="refactor.rewrite",Y.Source="source",Y.SourceOrganizeImports="source.organizeImports",Y.SourceFixAll="source.fixAll"})(pt||(e.CodeActionKind=pt={}));var Mt;(function(Y){Y.Invoked=1,Y.Automatic=2})(Mt||(e.CodeActionTriggerKind=Mt={}));var Kt;(function(Y){function Ce(F,D,ee){var ge={diagnostics:F};return D!=null&&(ge.only=D),ee!=null&&(ge.triggerKind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.typedArray(D.diagnostics,S.is)&&(D.only===void 0||Pe.typedArray(D.only,Pe.string))&&(D.triggerKind===void 0||D.triggerKind===Mt.Invoked||D.triggerKind===Mt.Automatic)}s(Ie,"is"),Y.is=Ie})(Kt||(e.CodeActionContext=Kt={}));var Ot;(function(Y){function Ce(F,D,ee){var ge={title:F},_e=!0;return typeof D=="string"?(_e=!1,ge.kind=D):R.is(D)?ge.command=D:ge.edit=D,_e&&ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D&&Pe.string(D.title)&&(D.diagnostics===void 0||Pe.typedArray(D.diagnostics,S.is))&&(D.kind===void 0||Pe.string(D.kind))&&(D.edit!==void 0||D.command!==void 0)&&(D.command===void 0||R.is(D.command))&&(D.isPreferred===void 0||Pe.boolean(D.isPreferred))&&(D.edit===void 0||Z.is(D.edit))}s(Ie,"is"),Y.is=Ie})(Ot||(e.CodeAction=Ot={}));var Wr;(function(Y){function Ce(F,D){var ee={range:F};return Pe.defined(D)&&(ee.data=D),ee}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.command)||R.is(D.command))}s(Ie,"is"),Y.is=Ie})(Wr||(e.CodeLens=Wr={}));var Rr;(function(Y){function Ce(F,D){return{tabSize:F,insertSpaces:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&Pe.uinteger(D.tabSize)&&Pe.boolean(D.insertSpaces)}s(Ie,"is"),Y.is=Ie})(Rr||(e.FormattingOptions=Rr={}));var sn;(function(Y){function Ce(F,D,ee){return{range:F,target:D,data:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.target)||Pe.string(D.target))}s(Ie,"is"),Y.is=Ie})(sn||(e.DocumentLink=sn={}));var ve;(function(Y){function Ce(F,D){return{range:F,parent:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&c.is(D.range)&&(D.parent===void 0||Y.is(D.parent))}s(Ie,"is"),Y.is=Ie})(ve||(e.SelectionRange=ve={}));var Ge;(function(Y){Y.namespace="namespace",Y.type="type",Y.class="class",Y.enum="enum",Y.interface="interface",Y.struct="struct",Y.typeParameter="typeParameter",Y.parameter="parameter",Y.variable="variable",Y.property="property",Y.enumMember="enumMember",Y.event="event",Y.function="function",Y.method="method",Y.macro="macro",Y.keyword="keyword",Y.modifier="modifier",Y.comment="comment",Y.string="string",Y.number="number",Y.regexp="regexp",Y.operator="operator",Y.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(Y){Y.declaration="declaration",Y.definition="definition",Y.readonly="readonly",Y.static="static",Y.deprecated="deprecated",Y.abstract="abstract",Y.async="async",Y.modification="modification",Y.documentation="documentation",Y.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Tt;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&(F.resultId===void 0||typeof F.resultId=="string")&&Array.isArray(F.data)&&(F.data.length===0||typeof F.data[0]=="number")}s(Ce,"is"),Y.is=Ce})(Tt||(e.SemanticTokens=Tt={}));var ir;(function(Y){function Ce(F,D){return{range:F,text:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.string(D.text)}s(Ie,"is"),Y.is=Ie})(ir||(e.InlineValueText=ir={}));var Xt;(function(Y){function Ce(F,D,ee){return{range:F,variableName:D,caseSensitiveLookup:ee}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&Pe.boolean(D.caseSensitiveLookup)&&(Pe.string(D.variableName)||D.variableName===void 0)}s(Ie,"is"),Y.is=Ie})(Xt||(e.InlineValueVariableLookup=Xt={}));var br;(function(Y){function Ce(F,D){return{range:F,expression:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return D!=null&&c.is(D.range)&&(Pe.string(D.expression)||D.expression===void 0)}s(Ie,"is"),Y.is=Ie})(br||(e.InlineValueEvaluatableExpression=br={}));var lr;(function(Y){function Ce(F,D){return{frameId:F,stoppedLocation:D}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.defined(D)&&c.is(F.stoppedLocation)}s(Ie,"is"),Y.is=Ie})(lr||(e.InlineValueContext=lr={}));var tr;(function(Y){Y.Type=1,Y.Parameter=2;function Ce(Ie){return Ie===1||Ie===2}s(Ce,"is"),Y.is=Ce})(tr||(e.InlayHintKind=tr={}));var cr;(function(Y){function Ce(F){return{value:F}}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.location===void 0||l.is(D.location))&&(D.command===void 0||R.is(D.command))}s(Ie,"is"),Y.is=Ie})(cr||(e.InlayHintLabelPart=cr={}));var rr;(function(Y){function Ce(F,D,ee){var ge={position:F,label:D};return ee!==void 0&&(ge.kind=ee),ge}s(Ce,"create"),Y.create=Ce;function Ie(F){var D=F;return Pe.objectLiteral(D)&&a.is(D.position)&&(Pe.string(D.label)||Pe.typedArray(D.label,cr.is))&&(D.kind===void 0||tr.is(D.kind))&&D.textEdits===void 0||Pe.typedArray(D.textEdits,B.is)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.paddingLeft===void 0||Pe.boolean(D.paddingLeft))&&(D.paddingRight===void 0||Pe.boolean(D.paddingRight))}s(Ie,"is"),Y.is=Ie})(rr||(e.InlayHint=rr={}));var Dr;(function(Y){function Ce(Ie){return{kind:"snippet",value:Ie}}s(Ce,"createSnippet"),Y.createSnippet=Ce})(Dr||(e.StringValue=Dr={}));var jr;(function(Y){function Ce(Ie,F,D,ee){return{insertText:Ie,filterText:F,range:D,command:ee}}s(Ce,"create"),Y.create=Ce})(jr||(e.InlineCompletionItem=jr={}));var rn;(function(Y){function Ce(Ie){return{items:Ie}}s(Ce,"create"),Y.create=Ce})(rn||(e.InlineCompletionList=rn={}));var An;(function(Y){Y.Invoked=0,Y.Automatic=1})(An||(e.InlineCompletionTriggerKind=An={}));var Zn;(function(Y){function Ce(Ie,F){return{range:Ie,text:F}}s(Ce,"create"),Y.create=Ce})(Zn||(e.SelectedCompletionInfo=Zn={}));var Tn;(function(Y){function Ce(Ie,F){return{triggerKind:Ie,selectedCompletionInfo:F}}s(Ce,"create"),Y.create=Ce})(Tn||(e.InlineCompletionContext=Tn={}));var Kn;(function(Y){function Ce(Ie){var F=Ie;return Pe.objectLiteral(F)&&n.is(F.uri)&&Pe.string(F.name)}s(Ce,"is"),Y.is=Ce})(Kn||(e.WorkspaceFolder=Kn={})),e.EOL=[`
`,`\r
`,"\r"];var nn;(function(Y){function Ce(ee,ge,_e,ut){return new Gn(ee,ge,_e,ut)}s(Ce,"create"),Y.create=Ce;function Ie(ee){var ge=ee;return!!(Pe.defined(ge)&&Pe.string(ge.uri)&&(Pe.undefined(ge.languageId)||Pe.string(ge.languageId))&&Pe.uinteger(ge.lineCount)&&Pe.func(ge.getText)&&Pe.func(ge.positionAt)&&Pe.func(ge.offsetAt))}s(Ie,"is"),Y.is=Ie;function F(ee,ge){for(var _e=ee.getText(),ut=D(ge,function(yr,si){var Ji=yr.range.start.line-si.range.start.line;return Ji===0?yr.range.start.character-si.range.start.character:Ji}),St=_e.length,zt=ut.length-1;zt>=0;zt--){var Zt=ut[zt],Yt=ee.offsetAt(Zt.range.start),bt=ee.offsetAt(Zt.range.end);if(bt<=St)_e=_e.substring(0,Yt)+Zt.newText+_e.substring(bt,_e.length);else throw new Error("Overlapping edit");St=Yt}return _e}s(F,"applyEdits"),Y.applyEdits=F;function D(ee,ge){if(ee.length<=1)return ee;var _e=ee.length/2|0,ut=ee.slice(0,_e),St=ee.slice(_e);D(ut,ge),D(St,ge);for(var zt=0,Zt=0,Yt=0;zt<ut.length&&Zt<St.length;){var bt=ge(ut[zt],St[Zt]);bt<=0?ee[Yt++]=ut[zt++]:ee[Yt++]=St[Zt++]}for(;zt<ut.length;)ee[Yt++]=ut[zt++];for(;Zt<St.length;)ee[Yt++]=St[Zt++];return ee}s(D,"mergeSort")})(nn||(e.TextDocument=nn={}));var Gn=function(){function Y(Ce,Ie,F,D){this._uri=Ce,this._languageId=Ie,this._version=F,this._content=D,this._lineOffsets=void 0}return s(Y,"FullTextDocument"),Object.defineProperty(Y.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),Y.prototype.getText=function(Ce){if(Ce){var Ie=this.offsetAt(Ce.start),F=this.offsetAt(Ce.end);return this._content.substring(Ie,F)}return this._content},Y.prototype.update=function(Ce,Ie){this._content=Ce.text,this._version=Ie,this._lineOffsets=void 0},Y.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var Ce=[],Ie=this._content,F=!0,D=0;D<Ie.length;D++){F&&(Ce.push(D),F=!1);var ee=Ie.charAt(D);F=ee==="\r"||ee===`
`,ee==="\r"&&D+1<Ie.length&&Ie.charAt(D+1)===`
`&&D++}F&&Ie.length>0&&Ce.push(Ie.length),this._lineOffsets=Ce}return this._lineOffsets},Y.prototype.positionAt=function(Ce){Ce=Math.max(Math.min(Ce,this._content.length),0);var Ie=this.getLineOffsets(),F=0,D=Ie.length;if(D===0)return a.create(0,Ce);for(;F<D;){var ee=Math.floor((F+D)/2);Ie[ee]>Ce?D=ee:F=ee+1}var ge=F-1;return a.create(ge,Ce-Ie[ge])},Y.prototype.offsetAt=function(Ce){var Ie=this.getLineOffsets();if(Ce.line>=Ie.length)return this._content.length;if(Ce.line<0)return 0;var F=Ie[Ce.line],D=Ce.line+1<Ie.length?Ie[Ce.line+1]:this._content.length;return Math.max(Math.min(F+Ce.character,D),F)},Object.defineProperty(Y.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),Y}(),Pe;(function(Y){var Ce=Object.prototype.toString;function Ie(bt){return typeof bt<"u"}s(Ie,"defined"),Y.defined=Ie;function F(bt){return typeof bt>"u"}s(F,"undefined"),Y.undefined=F;function D(bt){return bt===!0||bt===!1}s(D,"boolean"),Y.boolean=D;function ee(bt){return Ce.call(bt)==="[object String]"}s(ee,"string"),Y.string=ee;function ge(bt){return Ce.call(bt)==="[object Number]"}s(ge,"number"),Y.number=ge;function _e(bt,yr,si){return Ce.call(bt)==="[object Number]"&&yr<=bt&&bt<=si}s(_e,"numberRange"),Y.numberRange=_e;function ut(bt){return Ce.call(bt)==="[object Number]"&&-2147483648<=bt&&bt<=2147483647}s(ut,"integer"),Y.integer=ut;function St(bt){return Ce.call(bt)==="[object Number]"&&0<=bt&&bt<=2147483647}s(St,"uinteger"),Y.uinteger=St;function zt(bt){return Ce.call(bt)==="[object Function]"}s(zt,"func"),Y.func=zt;function Zt(bt){return bt!==null&&typeof bt=="object"}s(Zt,"objectLiteral"),Y.objectLiteral=Zt;function Yt(bt,yr){return Array.isArray(bt)&&bt.every(yr)}s(Yt,"typedArray"),Y.typedArray=Yt})(Pe||(Pe={}))})});var va=H(jf=>{"use strict";f();Object.defineProperty(jf,"__esModule",{value:!0});jf.ProtocolNotificationType=jf.ProtocolNotificationType0=jf.ProtocolRequestType=jf.ProtocolRequestType0=jf.RegistrationType=jf.MessageDirection=void 0;var y4=p_(),V3e;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(V3e||(jf.MessageDirection=V3e={}));var cfe=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};jf.RegistrationType=cfe;var lfe=class extends y4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};jf.ProtocolRequestType0=lfe;var ufe=class extends y4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,y4.ParameterStructures.byName)}};jf.ProtocolRequestType=ufe;var dfe=class extends y4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};jf.ProtocolNotificationType0=dfe;var ffe=class extends y4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,y4.ParameterStructures.byName)}};jf.ProtocolNotificationType=ffe});var HW=H(jc=>{"use strict";f();Object.defineProperty(jc,"__esModule",{value:!0});jc.objectLiteral=jc.typedArray=jc.stringArray=jc.array=jc.func=jc.error=jc.number=jc.string=jc.boolean=void 0;function a2t(t){return t===!0||t===!1}s(a2t,"boolean");jc.boolean=a2t;function z3e(t){return typeof t=="string"||t instanceof String}s(z3e,"string");jc.string=z3e;function c2t(t){return typeof t=="number"||t instanceof Number}s(c2t,"number");jc.number=c2t;function l2t(t){return t instanceof Error}s(l2t,"error");jc.error=l2t;function u2t(t){return typeof t=="function"}s(u2t,"func");jc.func=u2t;function Y3e(t){return Array.isArray(t)}s(Y3e,"array");jc.array=Y3e;function d2t(t){return Y3e(t)&&t.every(e=>z3e(e))}s(d2t,"stringArray");jc.stringArray=d2t;function f2t(t,e){return Array.isArray(t)&&t.every(e)}s(f2t,"typedArray");jc.typedArray=f2t;function p2t(t){return t!==null&&typeof t=="object"}s(p2t,"objectLiteral");jc.objectLiteral=p2t});var X3e=H($W=>{"use strict";f();Object.defineProperty($W,"__esModule",{value:!0});$W.ImplementationRequest=void 0;var K3e=va(),J3e;(function(t){t.method="textDocument/implementation",t.messageDirection=K3e.MessageDirection.clientToServer,t.type=new K3e.ProtocolRequestType(t.method)})(J3e||($W.ImplementationRequest=J3e={}))});var tBe=H(WW=>{"use strict";f();Object.defineProperty(WW,"__esModule",{value:!0});WW.TypeDefinitionRequest=void 0;var Z3e=va(),eBe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Z3e.MessageDirection.clientToServer,t.type=new Z3e.ProtocolRequestType(t.method)})(eBe||(WW.TypeDefinitionRequest=eBe={}))});var iBe=H(C4=>{"use strict";f();Object.defineProperty(C4,"__esModule",{value:!0});C4.DidChangeWorkspaceFoldersNotification=C4.WorkspaceFoldersRequest=void 0;var jW=va(),rBe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=jW.MessageDirection.serverToClient,t.type=new jW.ProtocolRequestType0(t.method)})(rBe||(C4.WorkspaceFoldersRequest=rBe={}));var nBe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=jW.MessageDirection.clientToServer,t.type=new jW.ProtocolNotificationType(t.method)})(nBe||(C4.DidChangeWorkspaceFoldersNotification=nBe={}))});var aBe=H(GW=>{"use strict";f();Object.defineProperty(GW,"__esModule",{value:!0});GW.ConfigurationRequest=void 0;var oBe=va(),sBe;(function(t){t.method="workspace/configuration",t.messageDirection=oBe.MessageDirection.serverToClient,t.type=new oBe.ProtocolRequestType(t.method)})(sBe||(GW.ConfigurationRequest=sBe={}))});var uBe=H(v4=>{"use strict";f();Object.defineProperty(v4,"__esModule",{value:!0});v4.ColorPresentationRequest=v4.DocumentColorRequest=void 0;var VW=va(),cBe;(function(t){t.method="textDocument/documentColor",t.messageDirection=VW.MessageDirection.clientToServer,t.type=new VW.ProtocolRequestType(t.method)})(cBe||(v4.DocumentColorRequest=cBe={}));var lBe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=VW.MessageDirection.clientToServer,t.type=new VW.ProtocolRequestType(t.method)})(lBe||(v4.ColorPresentationRequest=lBe={}))});var pBe=H(E4=>{"use strict";f();Object.defineProperty(E4,"__esModule",{value:!0});E4.FoldingRangeRefreshRequest=E4.FoldingRangeRequest=void 0;var zW=va(),dBe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=zW.MessageDirection.clientToServer,t.type=new zW.ProtocolRequestType(t.method)})(dBe||(E4.FoldingRangeRequest=dBe={}));var fBe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=zW.MessageDirection.serverToClient,t.type=new zW.ProtocolRequestType0(t.method)})(fBe||(E4.FoldingRangeRefreshRequest=fBe={}))});var gBe=H(YW=>{"use strict";f();Object.defineProperty(YW,"__esModule",{value:!0});YW.DeclarationRequest=void 0;var mBe=va(),hBe;(function(t){t.method="textDocument/declaration",t.messageDirection=mBe.MessageDirection.clientToServer,t.type=new mBe.ProtocolRequestType(t.method)})(hBe||(YW.DeclarationRequest=hBe={}))});var CBe=H(KW=>{"use strict";f();Object.defineProperty(KW,"__esModule",{value:!0});KW.SelectionRangeRequest=void 0;var ABe=va(),yBe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=ABe.MessageDirection.clientToServer,t.type=new ABe.ProtocolRequestType(t.method)})(yBe||(KW.SelectionRangeRequest=yBe={}))});var bBe=H(tI=>{"use strict";f();Object.defineProperty(tI,"__esModule",{value:!0});tI.WorkDoneProgressCancelNotification=tI.WorkDoneProgressCreateRequest=tI.WorkDoneProgress=void 0;var m2t=p_(),JW=va(),vBe;(function(t){t.type=new m2t.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(vBe||(tI.WorkDoneProgress=vBe={}));var EBe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=JW.MessageDirection.serverToClient,t.type=new JW.ProtocolRequestType(t.method)})(EBe||(tI.WorkDoneProgressCreateRequest=EBe={}));var xBe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=JW.MessageDirection.clientToServer,t.type=new JW.ProtocolNotificationType(t.method)})(xBe||(tI.WorkDoneProgressCancelNotification=xBe={}))});var SBe=H(rI=>{"use strict";f();Object.defineProperty(rI,"__esModule",{value:!0});rI.CallHierarchyOutgoingCallsRequest=rI.CallHierarchyIncomingCallsRequest=rI.CallHierarchyPrepareRequest=void 0;var x4=va(),IBe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=x4.MessageDirection.clientToServer,t.type=new x4.ProtocolRequestType(t.method)})(IBe||(rI.CallHierarchyPrepareRequest=IBe={}));var TBe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=x4.MessageDirection.clientToServer,t.type=new x4.ProtocolRequestType(t.method)})(TBe||(rI.CallHierarchyIncomingCallsRequest=TBe={}));var wBe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=x4.MessageDirection.clientToServer,t.type=new x4.ProtocolRequestType(t.method)})(wBe||(rI.CallHierarchyOutgoingCallsRequest=wBe={}))});var BBe=H(Gf=>{"use strict";f();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.SemanticTokensRefreshRequest=Gf.SemanticTokensRangeRequest=Gf.SemanticTokensDeltaRequest=Gf.SemanticTokensRequest=Gf.SemanticTokensRegistrationType=Gf.TokenFormat=void 0;var Ev=va(),_Be;(function(t){t.Relative="relative"})(_Be||(Gf.TokenFormat=_Be={}));var WM;(function(t){t.method="textDocument/semanticTokens",t.type=new Ev.RegistrationType(t.method)})(WM||(Gf.SemanticTokensRegistrationType=WM={}));var RBe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Ev.MessageDirection.clientToServer,t.type=new Ev.ProtocolRequestType(t.method),t.registrationMethod=WM.method})(RBe||(Gf.SemanticTokensRequest=RBe={}));var kBe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Ev.MessageDirection.clientToServer,t.type=new Ev.ProtocolRequestType(t.method),t.registrationMethod=WM.method})(kBe||(Gf.SemanticTokensDeltaRequest=kBe={}));var PBe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Ev.MessageDirection.clientToServer,t.type=new Ev.ProtocolRequestType(t.method),t.registrationMethod=WM.method})(PBe||(Gf.SemanticTokensRangeRequest=PBe={}));var DBe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Ev.MessageDirection.serverToClient,t.type=new Ev.ProtocolRequestType0(t.method)})(DBe||(Gf.SemanticTokensRefreshRequest=DBe={}))});var MBe=H(XW=>{"use strict";f();Object.defineProperty(XW,"__esModule",{value:!0});XW.ShowDocumentRequest=void 0;var NBe=va(),LBe;(function(t){t.method="window/showDocument",t.messageDirection=NBe.MessageDirection.serverToClient,t.type=new NBe.ProtocolRequestType(t.method)})(LBe||(XW.ShowDocumentRequest=LBe={}))});var QBe=H(ZW=>{"use strict";f();Object.defineProperty(ZW,"__esModule",{value:!0});ZW.LinkedEditingRangeRequest=void 0;var FBe=va(),OBe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=FBe.MessageDirection.clientToServer,t.type=new FBe.ProtocolRequestType(t.method)})(OBe||(ZW.LinkedEditingRangeRequest=OBe={}))});var VBe=H(md=>{"use strict";f();Object.defineProperty(md,"__esModule",{value:!0});md.WillDeleteFilesRequest=md.DidDeleteFilesNotification=md.DidRenameFilesNotification=md.WillRenameFilesRequest=md.DidCreateFilesNotification=md.WillCreateFilesRequest=md.FileOperationPatternKind=void 0;var Sm=va(),UBe;(function(t){t.file="file",t.folder="folder"})(UBe||(md.FileOperationPatternKind=UBe={}));var qBe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolRequestType(t.method)})(qBe||(md.WillCreateFilesRequest=qBe={}));var HBe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolNotificationType(t.method)})(HBe||(md.DidCreateFilesNotification=HBe={}));var $Be;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolRequestType(t.method)})($Be||(md.WillRenameFilesRequest=$Be={}));var WBe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolNotificationType(t.method)})(WBe||(md.DidRenameFilesNotification=WBe={}));var jBe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolNotificationType(t.method)})(jBe||(md.DidDeleteFilesNotification=jBe={}));var GBe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Sm.MessageDirection.clientToServer,t.type=new Sm.ProtocolRequestType(t.method)})(GBe||(md.WillDeleteFilesRequest=GBe={}))});var XBe=H(nI=>{"use strict";f();Object.defineProperty(nI,"__esModule",{value:!0});nI.MonikerRequest=nI.MonikerKind=nI.UniquenessLevel=void 0;var zBe=va(),YBe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(YBe||(nI.UniquenessLevel=YBe={}));var KBe;(function(t){t.$import="import",t.$export="export",t.local="local"})(KBe||(nI.MonikerKind=KBe={}));var JBe;(function(t){t.method="textDocument/moniker",t.messageDirection=zBe.MessageDirection.clientToServer,t.type=new zBe.ProtocolRequestType(t.method)})(JBe||(nI.MonikerRequest=JBe={}))});var rNe=H(iI=>{"use strict";f();Object.defineProperty(iI,"__esModule",{value:!0});iI.TypeHierarchySubtypesRequest=iI.TypeHierarchySupertypesRequest=iI.TypeHierarchyPrepareRequest=void 0;var b4=va(),ZBe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=b4.MessageDirection.clientToServer,t.type=new b4.ProtocolRequestType(t.method)})(ZBe||(iI.TypeHierarchyPrepareRequest=ZBe={}));var eNe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=b4.MessageDirection.clientToServer,t.type=new b4.ProtocolRequestType(t.method)})(eNe||(iI.TypeHierarchySupertypesRequest=eNe={}));var tNe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=b4.MessageDirection.clientToServer,t.type=new b4.ProtocolRequestType(t.method)})(tNe||(iI.TypeHierarchySubtypesRequest=tNe={}))});var oNe=H(I4=>{"use strict";f();Object.defineProperty(I4,"__esModule",{value:!0});I4.InlineValueRefreshRequest=I4.InlineValueRequest=void 0;var ej=va(),nNe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=ej.MessageDirection.clientToServer,t.type=new ej.ProtocolRequestType(t.method)})(nNe||(I4.InlineValueRequest=nNe={}));var iNe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=ej.MessageDirection.serverToClient,t.type=new ej.ProtocolRequestType0(t.method)})(iNe||(I4.InlineValueRefreshRequest=iNe={}))});var lNe=H(oI=>{"use strict";f();Object.defineProperty(oI,"__esModule",{value:!0});oI.InlayHintRefreshRequest=oI.InlayHintResolveRequest=oI.InlayHintRequest=void 0;var T4=va(),sNe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=T4.MessageDirection.clientToServer,t.type=new T4.ProtocolRequestType(t.method)})(sNe||(oI.InlayHintRequest=sNe={}));var aNe;(function(t){t.method="inlayHint/resolve",t.messageDirection=T4.MessageDirection.clientToServer,t.type=new T4.ProtocolRequestType(t.method)})(aNe||(oI.InlayHintResolveRequest=aNe={}));var cNe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=T4.MessageDirection.serverToClient,t.type=new T4.ProtocolRequestType0(t.method)})(cNe||(oI.InlayHintRefreshRequest=cNe={}))});var gNe=H(_m=>{"use strict";f();Object.defineProperty(_m,"__esModule",{value:!0});_m.DiagnosticRefreshRequest=_m.WorkspaceDiagnosticRequest=_m.DocumentDiagnosticRequest=_m.DocumentDiagnosticReportKind=_m.DiagnosticServerCancellationData=void 0;var hNe=p_(),h2t=HW(),w4=va(),uNe;(function(t){function e(r){let n=r;return n&&h2t.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(uNe||(_m.DiagnosticServerCancellationData=uNe={}));var dNe;(function(t){t.Full="full",t.Unchanged="unchanged"})(dNe||(_m.DocumentDiagnosticReportKind=dNe={}));var fNe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=w4.MessageDirection.clientToServer,t.type=new w4.ProtocolRequestType(t.method),t.partialResult=new hNe.ProgressType})(fNe||(_m.DocumentDiagnosticRequest=fNe={}));var pNe;(function(t){t.method="workspace/diagnostic",t.messageDirection=w4.MessageDirection.clientToServer,t.type=new w4.ProtocolRequestType(t.method),t.partialResult=new hNe.ProgressType})(pNe||(_m.WorkspaceDiagnosticRequest=pNe={}));var mNe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=w4.MessageDirection.serverToClient,t.type=new w4.ProtocolRequestType0(t.method)})(mNe||(_m.DiagnosticRefreshRequest=mNe={}))});var bNe=H(Va=>{"use strict";f();Object.defineProperty(Va,"__esModule",{value:!0});Va.DidCloseNotebookDocumentNotification=Va.DidSaveNotebookDocumentNotification=Va.DidChangeNotebookDocumentNotification=Va.NotebookCellArrayChange=Va.DidOpenNotebookDocumentNotification=Va.NotebookDocumentSyncRegistrationType=Va.NotebookDocument=Va.NotebookCell=Va.ExecutionSummary=Va.NotebookCellKind=void 0;var jM=qW(),Ug=HW(),Uy=va(),pfe;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(pfe||(Va.NotebookCellKind=pfe={}));var mfe;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return Ug.objectLiteral(o)&&jM.uinteger.is(o.executionOrder)&&(o.success===void 0||Ug.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(mfe||(Va.ExecutionSummary=mfe={}));var tj;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return Ug.objectLiteral(a)&&pfe.is(a.kind)&&jM.DocumentUri.is(a.document)&&(a.metadata===void 0||Ug.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!mfe.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Ug.objectLiteral(o)&&Ug.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(tj||(Va.NotebookCell=tj={}));var ANe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ug.objectLiteral(i)&&Ug.string(i.uri)&&jM.integer.is(i.version)&&Ug.typedArray(i.cells,tj.is)}s(r,"is"),t.is=r})(ANe||(Va.NotebookDocument=ANe={}));var S4;(function(t){t.method="notebookDocument/sync",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.RegistrationType(t.method)})(S4||(Va.NotebookDocumentSyncRegistrationType=S4={}));var yNe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.ProtocolNotificationType(t.method),t.registrationMethod=S4.method})(yNe||(Va.DidOpenNotebookDocumentNotification=yNe={}));var CNe;(function(t){function e(n){let i=n;return Ug.objectLiteral(i)&&jM.uinteger.is(i.start)&&jM.uinteger.is(i.deleteCount)&&(i.cells===void 0||Ug.typedArray(i.cells,tj.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(CNe||(Va.NotebookCellArrayChange=CNe={}));var vNe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.ProtocolNotificationType(t.method),t.registrationMethod=S4.method})(vNe||(Va.DidChangeNotebookDocumentNotification=vNe={}));var ENe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.ProtocolNotificationType(t.method),t.registrationMethod=S4.method})(ENe||(Va.DidSaveNotebookDocumentNotification=ENe={}));var xNe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Uy.MessageDirection.clientToServer,t.type=new Uy.ProtocolNotificationType(t.method),t.registrationMethod=S4.method})(xNe||(Va.DidCloseNotebookDocumentNotification=xNe={}))});var wNe=H(rj=>{"use strict";f();Object.defineProperty(rj,"__esModule",{value:!0});rj.InlineCompletionRequest=void 0;var INe=va(),TNe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=INe.MessageDirection.clientToServer,t.type=new INe.ProtocolRequestType(t.method)})(TNe||(rj.InlineCompletionRequest=TNe={}))});var Q8e=H(be=>{"use strict";f();Object.defineProperty(be,"__esModule",{value:!0});be.WorkspaceSymbolRequest=be.CodeActionResolveRequest=be.CodeActionRequest=be.DocumentSymbolRequest=be.DocumentHighlightRequest=be.ReferencesRequest=be.DefinitionRequest=be.SignatureHelpRequest=be.SignatureHelpTriggerKind=be.HoverRequest=be.CompletionResolveRequest=be.CompletionRequest=be.CompletionTriggerKind=be.PublishDiagnosticsNotification=be.WatchKind=be.RelativePattern=be.FileChangeType=be.DidChangeWatchedFilesNotification=be.WillSaveTextDocumentWaitUntilRequest=be.WillSaveTextDocumentNotification=be.TextDocumentSaveReason=be.DidSaveTextDocumentNotification=be.DidCloseTextDocumentNotification=be.DidChangeTextDocumentNotification=be.TextDocumentContentChangeEvent=be.DidOpenTextDocumentNotification=be.TextDocumentSyncKind=be.TelemetryEventNotification=be.LogMessageNotification=be.ShowMessageRequest=be.ShowMessageNotification=be.MessageType=be.DidChangeConfigurationNotification=be.ExitNotification=be.ShutdownRequest=be.InitializedNotification=be.InitializeErrorCodes=be.InitializeRequest=be.WorkDoneProgressOptions=be.TextDocumentRegistrationOptions=be.StaticRegistrationOptions=be.PositionEncodingKind=be.FailureHandlingKind=be.ResourceOperationKind=be.UnregistrationRequest=be.RegistrationRequest=be.DocumentSelector=be.NotebookCellTextDocumentFilter=be.NotebookDocumentFilter=be.TextDocumentFilter=void 0;be.MonikerRequest=be.MonikerKind=be.UniquenessLevel=be.WillDeleteFilesRequest=be.DidDeleteFilesNotification=be.WillRenameFilesRequest=be.DidRenameFilesNotification=be.WillCreateFilesRequest=be.DidCreateFilesNotification=be.FileOperationPatternKind=be.LinkedEditingRangeRequest=be.ShowDocumentRequest=be.SemanticTokensRegistrationType=be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.TokenFormat=be.CallHierarchyPrepareRequest=be.CallHierarchyOutgoingCallsRequest=be.CallHierarchyIncomingCallsRequest=be.WorkDoneProgressCancelNotification=be.WorkDoneProgressCreateRequest=be.WorkDoneProgress=be.SelectionRangeRequest=be.DeclarationRequest=be.FoldingRangeRefreshRequest=be.FoldingRangeRequest=be.ColorPresentationRequest=be.DocumentColorRequest=be.ConfigurationRequest=be.DidChangeWorkspaceFoldersNotification=be.WorkspaceFoldersRequest=be.TypeDefinitionRequest=be.ImplementationRequest=be.ApplyWorkspaceEditRequest=be.ExecuteCommandRequest=be.PrepareRenameRequest=be.RenameRequest=be.PrepareSupportDefaultBehavior=be.DocumentOnTypeFormattingRequest=be.DocumentRangesFormattingRequest=be.DocumentRangeFormattingRequest=be.DocumentFormattingRequest=be.DocumentLinkResolveRequest=be.DocumentLinkRequest=be.CodeLensRefreshRequest=be.CodeLensResolveRequest=be.CodeLensRequest=be.WorkspaceSymbolResolveRequest=void 0;be.InlineCompletionRequest=be.DidCloseNotebookDocumentNotification=be.DidSaveNotebookDocumentNotification=be.DidChangeNotebookDocumentNotification=be.NotebookCellArrayChange=be.DidOpenNotebookDocumentNotification=be.NotebookDocumentSyncRegistrationType=be.NotebookDocument=be.NotebookCell=be.ExecutionSummary=be.NotebookCellKind=be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=be.InlayHintRefreshRequest=be.InlayHintResolveRequest=be.InlayHintRequest=be.InlineValueRefreshRequest=be.InlineValueRequest=be.TypeHierarchySupertypesRequest=be.TypeHierarchySubtypesRequest=be.TypeHierarchyPrepareRequest=void 0;var Wt=va(),SNe=qW(),$l=HW(),g2t=X3e();Object.defineProperty(be,"ImplementationRequest",{enumerable:!0,get:s(function(){return g2t.ImplementationRequest},"get")});var A2t=tBe();Object.defineProperty(be,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return A2t.TypeDefinitionRequest},"get")});var L8e=iBe();Object.defineProperty(be,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return L8e.WorkspaceFoldersRequest},"get")});Object.defineProperty(be,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return L8e.DidChangeWorkspaceFoldersNotification},"get")});var y2t=aBe();Object.defineProperty(be,"ConfigurationRequest",{enumerable:!0,get:s(function(){return y2t.ConfigurationRequest},"get")});var M8e=uBe();Object.defineProperty(be,"DocumentColorRequest",{enumerable:!0,get:s(function(){return M8e.DocumentColorRequest},"get")});Object.defineProperty(be,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return M8e.ColorPresentationRequest},"get")});var F8e=pBe();Object.defineProperty(be,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return F8e.FoldingRangeRequest},"get")});Object.defineProperty(be,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return F8e.FoldingRangeRefreshRequest},"get")});var C2t=gBe();Object.defineProperty(be,"DeclarationRequest",{enumerable:!0,get:s(function(){return C2t.DeclarationRequest},"get")});var v2t=CBe();Object.defineProperty(be,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return v2t.SelectionRangeRequest},"get")});var Cfe=bBe();Object.defineProperty(be,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Cfe.WorkDoneProgress},"get")});Object.defineProperty(be,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Cfe.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(be,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Cfe.WorkDoneProgressCancelNotification},"get")});var vfe=SBe();Object.defineProperty(be,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return vfe.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return vfe.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return vfe.CallHierarchyPrepareRequest},"get")});var _4=BBe();Object.defineProperty(be,"TokenFormat",{enumerable:!0,get:s(function(){return _4.TokenFormat},"get")});Object.defineProperty(be,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return _4.SemanticTokensRequest},"get")});Object.defineProperty(be,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return _4.SemanticTokensDeltaRequest},"get")});Object.defineProperty(be,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return _4.SemanticTokensRangeRequest},"get")});Object.defineProperty(be,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return _4.SemanticTokensRefreshRequest},"get")});Object.defineProperty(be,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return _4.SemanticTokensRegistrationType},"get")});var E2t=MBe();Object.defineProperty(be,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return E2t.ShowDocumentRequest},"get")});var x2t=QBe();Object.defineProperty(be,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return x2t.LinkedEditingRangeRequest},"get")});var m_=VBe();Object.defineProperty(be,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return m_.FileOperationPatternKind},"get")});Object.defineProperty(be,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return m_.DidCreateFilesNotification},"get")});Object.defineProperty(be,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return m_.WillCreateFilesRequest},"get")});Object.defineProperty(be,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return m_.DidRenameFilesNotification},"get")});Object.defineProperty(be,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return m_.WillRenameFilesRequest},"get")});Object.defineProperty(be,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return m_.DidDeleteFilesNotification},"get")});Object.defineProperty(be,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return m_.WillDeleteFilesRequest},"get")});var Efe=XBe();Object.defineProperty(be,"UniquenessLevel",{enumerable:!0,get:s(function(){return Efe.UniquenessLevel},"get")});Object.defineProperty(be,"MonikerKind",{enumerable:!0,get:s(function(){return Efe.MonikerKind},"get")});Object.defineProperty(be,"MonikerRequest",{enumerable:!0,get:s(function(){return Efe.MonikerRequest},"get")});var xfe=rNe();Object.defineProperty(be,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return xfe.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(be,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return xfe.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(be,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return xfe.TypeHierarchySupertypesRequest},"get")});var O8e=oNe();Object.defineProperty(be,"InlineValueRequest",{enumerable:!0,get:s(function(){return O8e.InlineValueRequest},"get")});Object.defineProperty(be,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return O8e.InlineValueRefreshRequest},"get")});var bfe=lNe();Object.defineProperty(be,"InlayHintRequest",{enumerable:!0,get:s(function(){return bfe.InlayHintRequest},"get")});Object.defineProperty(be,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return bfe.InlayHintResolveRequest},"get")});Object.defineProperty(be,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return bfe.InlayHintRefreshRequest},"get")});var GM=gNe();Object.defineProperty(be,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return GM.DiagnosticServerCancellationData},"get")});Object.defineProperty(be,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return GM.DocumentDiagnosticReportKind},"get")});Object.defineProperty(be,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return GM.DocumentDiagnosticRequest},"get")});Object.defineProperty(be,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return GM.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(be,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return GM.DiagnosticRefreshRequest},"get")});var qy=bNe();Object.defineProperty(be,"NotebookCellKind",{enumerable:!0,get:s(function(){return qy.NotebookCellKind},"get")});Object.defineProperty(be,"ExecutionSummary",{enumerable:!0,get:s(function(){return qy.ExecutionSummary},"get")});Object.defineProperty(be,"NotebookCell",{enumerable:!0,get:s(function(){return qy.NotebookCell},"get")});Object.defineProperty(be,"NotebookDocument",{enumerable:!0,get:s(function(){return qy.NotebookDocument},"get")});Object.defineProperty(be,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return qy.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(be,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return qy.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(be,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return qy.NotebookCellArrayChange},"get")});Object.defineProperty(be,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return qy.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return qy.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return qy.DidCloseNotebookDocumentNotification},"get")});var b2t=wNe();Object.defineProperty(be,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return b2t.InlineCompletionRequest},"get")});var hfe;(function(t){function e(r){let n=r;return $l.string(n)||$l.string(n.language)||$l.string(n.scheme)||$l.string(n.pattern)}s(e,"is"),t.is=e})(hfe||(be.TextDocumentFilter=hfe={}));var gfe;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&($l.string(n.notebookType)||$l.string(n.scheme)||$l.string(n.pattern))}s(e,"is"),t.is=e})(gfe||(be.NotebookDocumentFilter=gfe={}));var Afe;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&($l.string(n.notebook)||gfe.is(n.notebook))&&(n.language===void 0||$l.string(n.language))}s(e,"is"),t.is=e})(Afe||(be.NotebookCellTextDocumentFilter=Afe={}));var yfe;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!$l.string(n)&&!hfe.is(n)&&!Afe.is(n))return!1;return!0}s(e,"is"),t.is=e})(yfe||(be.DocumentSelector=yfe={}));var _Ne;(function(t){t.method="client/registerCapability",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolRequestType(t.method)})(_Ne||(be.RegistrationRequest=_Ne={}));var RNe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolRequestType(t.method)})(RNe||(be.UnregistrationRequest=RNe={}));var kNe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(kNe||(be.ResourceOperationKind=kNe={}));var PNe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(PNe||(be.FailureHandlingKind=PNe={}));var DNe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(DNe||(be.PositionEncodingKind=DNe={}));var BNe;(function(t){function e(r){let n=r;return n&&$l.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(BNe||(be.StaticRegistrationOptions=BNe={}));var NNe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||yfe.is(n.documentSelector))}s(e,"is"),t.is=e})(NNe||(be.TextDocumentRegistrationOptions=NNe={}));var LNe;(function(t){function e(n){let i=n;return $l.objectLiteral(i)&&(i.workDoneProgress===void 0||$l.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&$l.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(LNe||(be.WorkDoneProgressOptions=LNe={}));var MNe;(function(t){t.method="initialize",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(MNe||(be.InitializeRequest=MNe={}));var FNe;(function(t){t.unknownProtocolVersion=1})(FNe||(be.InitializeErrorCodes=FNe={}));var ONe;(function(t){t.method="initialized",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(ONe||(be.InitializedNotification=ONe={}));var QNe;(function(t){t.method="shutdown",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType0(t.method)})(QNe||(be.ShutdownRequest=QNe={}));var UNe;(function(t){t.method="exit",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType0(t.method)})(UNe||(be.ExitNotification=UNe={}));var qNe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(qNe||(be.DidChangeConfigurationNotification=qNe={}));var HNe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(HNe||(be.MessageType=HNe={}));var $Ne;(function(t){t.method="window/showMessage",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolNotificationType(t.method)})($Ne||(be.ShowMessageNotification=$Ne={}));var WNe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolRequestType(t.method)})(WNe||(be.ShowMessageRequest=WNe={}));var jNe;(function(t){t.method="window/logMessage",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolNotificationType(t.method)})(jNe||(be.LogMessageNotification=jNe={}));var GNe;(function(t){t.method="telemetry/event",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolNotificationType(t.method)})(GNe||(be.TelemetryEventNotification=GNe={}));var VNe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(VNe||(be.TextDocumentSyncKind=VNe={}));var zNe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(zNe||(be.DidOpenTextDocumentNotification=zNe={}));var YNe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(YNe||(be.TextDocumentContentChangeEvent=YNe={}));var KNe;(function(t){t.method="textDocument/didChange",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(KNe||(be.DidChangeTextDocumentNotification=KNe={}));var JNe;(function(t){t.method="textDocument/didClose",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(JNe||(be.DidCloseTextDocumentNotification=JNe={}));var XNe;(function(t){t.method="textDocument/didSave",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(XNe||(be.DidSaveTextDocumentNotification=XNe={}));var ZNe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(ZNe||(be.TextDocumentSaveReason=ZNe={}));var e8e;(function(t){t.method="textDocument/willSave",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(e8e||(be.WillSaveTextDocumentNotification=e8e={}));var t8e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(t8e||(be.WillSaveTextDocumentWaitUntilRequest=t8e={}));var r8e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolNotificationType(t.method)})(r8e||(be.DidChangeWatchedFilesNotification=r8e={}));var n8e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(n8e||(be.FileChangeType=n8e={}));var i8e;(function(t){function e(r){let n=r;return $l.objectLiteral(n)&&(SNe.URI.is(n.baseUri)||SNe.WorkspaceFolder.is(n.baseUri))&&$l.string(n.pattern)}s(e,"is"),t.is=e})(i8e||(be.RelativePattern=i8e={}));var o8e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(o8e||(be.WatchKind=o8e={}));var s8e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolNotificationType(t.method)})(s8e||(be.PublishDiagnosticsNotification=s8e={}));var a8e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(a8e||(be.CompletionTriggerKind=a8e={}));var c8e;(function(t){t.method="textDocument/completion",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(c8e||(be.CompletionRequest=c8e={}));var l8e;(function(t){t.method="completionItem/resolve",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(l8e||(be.CompletionResolveRequest=l8e={}));var u8e;(function(t){t.method="textDocument/hover",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(u8e||(be.HoverRequest=u8e={}));var d8e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(d8e||(be.SignatureHelpTriggerKind=d8e={}));var f8e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(f8e||(be.SignatureHelpRequest=f8e={}));var p8e;(function(t){t.method="textDocument/definition",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(p8e||(be.DefinitionRequest=p8e={}));var m8e;(function(t){t.method="textDocument/references",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(m8e||(be.ReferencesRequest=m8e={}));var h8e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(h8e||(be.DocumentHighlightRequest=h8e={}));var g8e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(g8e||(be.DocumentSymbolRequest=g8e={}));var A8e;(function(t){t.method="textDocument/codeAction",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(A8e||(be.CodeActionRequest=A8e={}));var y8e;(function(t){t.method="codeAction/resolve",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(y8e||(be.CodeActionResolveRequest=y8e={}));var C8e;(function(t){t.method="workspace/symbol",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(C8e||(be.WorkspaceSymbolRequest=C8e={}));var v8e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(v8e||(be.WorkspaceSymbolResolveRequest=v8e={}));var E8e;(function(t){t.method="textDocument/codeLens",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(E8e||(be.CodeLensRequest=E8e={}));var x8e;(function(t){t.method="codeLens/resolve",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(x8e||(be.CodeLensResolveRequest=x8e={}));var b8e;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolRequestType0(t.method)})(b8e||(be.CodeLensRefreshRequest=b8e={}));var I8e;(function(t){t.method="textDocument/documentLink",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(I8e||(be.DocumentLinkRequest=I8e={}));var T8e;(function(t){t.method="documentLink/resolve",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(T8e||(be.DocumentLinkResolveRequest=T8e={}));var w8e;(function(t){t.method="textDocument/formatting",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(w8e||(be.DocumentFormattingRequest=w8e={}));var S8e;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(S8e||(be.DocumentRangeFormattingRequest=S8e={}));var _8e;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(_8e||(be.DocumentRangesFormattingRequest=_8e={}));var R8e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(R8e||(be.DocumentOnTypeFormattingRequest=R8e={}));var k8e;(function(t){t.Identifier=1})(k8e||(be.PrepareSupportDefaultBehavior=k8e={}));var P8e;(function(t){t.method="textDocument/rename",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(P8e||(be.RenameRequest=P8e={}));var D8e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(D8e||(be.PrepareRenameRequest=D8e={}));var B8e;(function(t){t.method="workspace/executeCommand",t.messageDirection=Wt.MessageDirection.clientToServer,t.type=new Wt.ProtocolRequestType(t.method)})(B8e||(be.ExecuteCommandRequest=B8e={}));var N8e;(function(t){t.method="workspace/applyEdit",t.messageDirection=Wt.MessageDirection.serverToClient,t.type=new Wt.ProtocolRequestType("workspace/applyEdit")})(N8e||(be.ApplyWorkspaceEditRequest=N8e={}))});var q8e=H(nj=>{"use strict";f();Object.defineProperty(nj,"__esModule",{value:!0});nj.createProtocolConnection=void 0;var U8e=p_();function I2t(t,e,r,n){return U8e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,U8e.createMessageConnection)(t,e,r,n)}s(I2t,"createProtocolConnection");nj.createProtocolConnection=I2t});var $8e=H(Vf=>{"use strict";f();var T2t=Vf&&Vf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ij=Vf&&Vf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&T2t(e,t,r)};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.LSPErrorCodes=Vf.createProtocolConnection=void 0;ij(p_(),Vf);ij(qW(),Vf);ij(va(),Vf);ij(Q8e(),Vf);var w2t=q8e();Object.defineProperty(Vf,"createProtocolConnection",{enumerable:!0,get:s(function(){return w2t.createProtocolConnection},"get")});var H8e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(H8e||(Vf.LSPErrorCodes=H8e={}))});var ui=H(Hy=>{"use strict";f();var S2t=Hy&&Hy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W8e=Hy&&Hy.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&S2t(e,t,r)};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.createProtocolConnection=void 0;var _2t=afe();W8e(afe(),Hy);W8e($8e(),Hy);function R2t(t,e,r,n){return(0,_2t.createMessageConnection)(t,e,r,n)}s(R2t,"createProtocolConnection");Hy.createProtocolConnection=R2t});var DLe=H((Cj,PLe)=>{f();(function(t,e){typeof Cj=="object"&&typeof PLe<"u"?e(Cj):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(Cj,function(t){"use strict";function e(w,P){return w||P}s(e,"_pureAssign");function r(w,P){return w[P]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",x="toString",I=e(Object),S=r(I,l),R=e(String),B=r(R,l),M=e(Math),O=e(Array),K=r(O,l),V=r(K,"slice");function z(w,P){try{return{v:w.apply(this,P)}}catch(N){return{e:N}}}s(z,"safe");function Q(w){return function(P){return typeof P===w}}s(Q,"_createIs");function U(w){var P="[object "+w+"]";return function(N){return!!(N&&Z(N)===P)}}s(U,"_createObjIs");function Z(w){return S[x].call(w)}s(Z,"objToString");function J(w){return typeof w===d||w===d}s(J,"isUndefined");function j(w){return!X(w)}s(j,"isStrictUndefined");function $(w){return w===i||J(w)}s($,"isNullOrUndefined");function X(w){return!!w||w!==n}s(X,"isDefined");var ie=Q("string"),ae=Q(a);function te(w){return!w&&$(w)?!1:!!w&&typeof w===c}s(te,"isObject");var pe=r(O,"isArray"),Ae=U("Error"),Oe=r(I,"getOwnPropertyDescriptor");function Te(w,P){return!!w&&S.hasOwnProperty[y](w,P)}s(Te,"objHasOwnProperty");var Je=e(r(I,"hasOwn"),Me);function Me(w,P){return Te(w,P)||!!Oe(w,P)}s(Me,"polyObjHasOwn");function lt(w,P,N){if(w&&te(w)){for(var W in w)if(Je(w,W)&&P[y](N||w,W,w[W])===-1)break}}s(lt,"objForEachKey");var _t={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Et(w){var P={};if(P[_t.c]=!0,P[_t.e]=!0,w.l){P.get=function(){return w.l.v};var N=Oe(w.l,"v");N&&N.set&&(P.set=function(W){w.l.v=W})}return lt(w,function(W,de){P[_t[W]]=j(de)?P[_t[W]]:de}),P}s(Et,"_createProp");var ht=r(I,"defineProperty");function ue(w,P,N){return ht(w,P,Et(N))}s(ue,"objDefine");function Ue(w,P,N,W,de){var we={};return lt(w,function(ke,We){ye(we,ke,P?We:ke),ye(we,We,N?We:ke)}),W?W(we):we}s(Ue,"_createKeyValueMap");function ye(w,P,N,W){ht(w,P,{value:N,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var $e=e(R),se="[object Error]";function le(w,P){var N=o,W=S[x][y](w);W===se&&(w={stack:$e(w.stack),message:$e(w.message),name:$e(w.name)});try{N=JSON.stringify(w,i,P?typeof P=="number"?P:4:n),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||$e(w)}catch(de){N=" - "+le(de,P)}return W+": "+N}s(le,"dumpObj");function qe(w){throw new Error(w)}s(qe,"throwError");function Be(w){throw new TypeError(w)}s(Be,"throwTypeError");var xe=r(I,"freeze");function je(w){return w}s(je,"_doNothing");function tt(w){return w[u]||i}s(tt,"_getProto");var pt=r(I,"assign"),Mt=r(I,"keys"),Kt=e(xe,je),Ot=e(r(I,"getPrototypeOf"),tt);function Wr(w){return Ue(w,1,0,Kt)}s(Wr,"createEnum");function Rr(w){var P={};return lt(w,function(N,W){ye(P,N,W[1]),ye(P,W[0],W[1])}),Kt(P)}s(Rr,"createSimpleMap");function sn(w){return Rr(w)}s(sn,"createTypeMap");var ve="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ft,"_getGlobalValue");function Tt(){if(!Ge){var w=z(ft).v||{};Ge=w[ve]=w[ve]||{}}return Ge}s(Tt,"_getGlobalConfig");var ir=Xt;function Xt(w,P,N){var W=P?P[w]:i;return function(de){var we=(de?de[w]:i)||W;if(we||N){var ke=arguments;return(we||N).apply(de,we?V[y](ke,1):ke)}Be('"'+$e(w)+'" not defined for '+le(de))}}s(Xt,"_unwrapFunctionWithPoly");var br=r(M,"min"),lr=r(M,"max"),tr=ir("slice",B),cr=ir("substring",B),rr=Xt("substr",B,Dr);function Dr(w,P,N){return $(w)&&Be("Invalid "+le(w)),N<0?o:(P=P||0,P<0&&(P=lr(P+w[g],0)),J(N)?tr(w,P):tr(w,P,P+N))}s(Dr,"polyStrSubstr");function jr(w,P){return cr(w,0,P)}s(jr,"strLeft");var rn="_urid",An;function Zn(){if(!An){var w=Tt();An=w.gblSym=w.gblSym||{k:{},s:{}}}return An}s(Zn,"_globalSymbolRegistry");function Tn(w){var P={description:$e(w),toString:s(function(){return m+"("+w+")"},"toString")};return P[h]=!0,P}s(Tn,"polyNewSymbol");function Kn(w){var P=Zn();if(!Je(P.k,w)){var N=Tn(w),W=Mt(P.s).length;N[rn]=function(){return W+"_"+N[x]()},P.k[w]=N,P.s[N[rn]()]=$e(w)}return P.k[w]}s(Kn,"polySymbolFor");var nn;function Gn(){nn=Tt()}s(Gn,"_initTestHooks");function Pe(w){return ht({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(Pe,"createCachedValue");var Y="window",Ce;function Ie(w,P){var N;return function(){return!nn&&Gn(),(!N||nn.lzy)&&(N=Pe(z(w,P).v)),N.v}}s(Ie,"_getGlobalInstFn");function F(w){return!nn&&Gn(),(!Ce||w===!1||nn.lzy)&&(Ce=Pe(z(ft).v||i)),Ce.v}s(F,"getGlobal");function D(w,P){var N;if(!Ce||P===!1?N=F(P):N=Ce.v,N&&N[w])return N[w];if(w===Y)try{return window}catch{}return i}s(D,"getInst");var ee=Ie(D,["document"]);function ge(){return!!_e()}s(ge,"hasWindow");var _e=Ie(D,[Y]);function ut(){return!!St()}s(ut,"hasNavigator");var St=Ie(D,["navigator"]),zt,Zt;function Yt(){return zt=Pe(z(D,[m]).v),zt}s(Yt,"_initSymbol");function bt(w){var P=(nn.lzy?0:zt)||Yt();return P.v?P.v[w]:n}s(bt,"_getSymbolKey");function yr(w,P){!nn&&Gn();var N=(nn.lzy?0:zt)||Yt();return N.v?N.v(w):P?i:Tn(w)}s(yr,"newSymbol");function si(w){return!nn&&Gn(),Zt=(nn.lzy?0:Zt)||Pe(z(bt,["for"]).v),(Zt.v||Kn)(w)}s(si,"symbolFor");function Ji(w,P,N){return w.apply(P,N)}s(Ji,"fnApply");function xn(w,P,N){if(w)for(var W=w[g]>>>0,de=0;de<W&&!(de in w&&P[y](N||w,w[de],de,w)===-1);de++);}s(xn,"arrForEach");var mo=ir("indexOf",K),hi=ir("map",K),Vo=ir("reduce",K),ua=e(r(I,"create"),dc);function dc(w){if(!w)return{};var P=typeof w;P!==c&&P!==a&&Be("Prototype must be an Object or function: "+le(w));function N(){}return s(N,"tempFunc"),N[l]=w,new N}s(dc,"polyObjCreate");var Do;function Qs(w,P){var N=I.setPrototypeOf||function(W,de){var we;!Do&&(Do=Pe((we={},we[u]=[],we instanceof Array))),Do.v?W[u]=de:lt(de,function(ke,We){return W[ke]=We})};return N(w,P)}s(Qs,"objSetPrototypeOf");function Xu(w,P,N){z(ue,[P,A,{v:w,c:!0,e:!1}]),P=Qs(P,N);function W(){this[p]=P,z(ue,[this,A,{v:w,c:!0,e:!1}])}return s(W,"__"),P[l]=N===i?ua(N):(W[l]=N[l],new W),P}s(Xu,"_createCustomError");function fc(w,P){P&&(w[A]=P)}s(fc,"_setName");function eg(w,P,N){var W=N||Error,de=W[l][A],we=Error.captureStackTrace;return Xu(w,function(){var ke=this,We=arguments;try{z(fc,[W,w]);var it=Ji(W,ke,V[y](We))||ke;if(it!==ke){var xt=Ot(ke);xt!==Ot(it)&&Qs(it,xt)}return we&&we(it,ke[p]),P&&P(it,We),it}finally{z(fc,[W,de])}},W)}s(eg,"createCustomError");function fl(){return(Date.now||tg)()}s(fl,"utcNow");function tg(){return new Date().getTime()}s(tg,"polyUtcNow");function rg(w){return s(function(N){return $(N)&&Be("strTrim called ["+le(N)+"]"),N&&N.replace&&(N=N.replace(w,o)),N},"_doTrim")}s(rg,"_createTrimFn");var Cx=rg(/^\s+|(?=\s)\s+$/g),_a=Xt("trim",B,Cx),pu=r(M,"floor"),mu,Zu,ng;function Bl(w){if(!w||typeof w!==c)return!1;ng||(ng=ge()?_e():!0);var P=!1;if(w!==ng){Zu||(mu=Function[l][x],Zu=mu[y](I));try{var N=Ot(w);P=!N,P||(Te(N,p)&&(N=N[p]),P=!!(N&&typeof N===a&&mu[y](N)===Zu))}catch{}}return P}s(Bl,"isPlainObject");var vx;function B1(){return!nn&&Gn(),(!vx||nn.lzy)&&(vx=Pe(z(D,["performance"]).v)),vx.v}s(B1,"getPerformance");var Ex=r(M,"round"),_f=Xt("endsWith",B,Rf);function Rf(w,P,N){ie(w)||Be("'"+le(w)+"' is not a string");var W=ie(P)?P:$e(P),de=!J(N)&&N<w[g]?N:w[g];return cr(w,de-W[g],de)===W}s(Rf,"polyStrEndsWith");var Gr=ir("indexOf",B),pc="ref",ig="unref",og="hasRef",$8="enabled";function Lc(w,P,N){var W=!0,de=w?P(i):i,we;function ke(){return W=!1,de&&de[ig]&&de[ig](),we}s(ke,"_unref");function We(){de&&N(de),de=i}s(We,"_cancel");function it(){return de=P(de),W||ke(),we}s(it,"_refresh");function xt(hr){!hr&&de&&We(),hr&&!de&&it()}return s(xt,"_setEnabled"),we={cancel:We,refresh:it},we[og]=function(){return de&&de[og]?de[og]():W},we[pc]=function(){return W=!0,de&&de[pc]&&de[pc](),we},we[ig]=ke,we=ht(we,$8,{get:s(function(){return!!de},"get"),set:xt}),{h:we,dn:s(function(){de=i},"dn")}}s(Lc,"_createTimerHandler");function ty(w,P,N){var W=pe(P),de=W?P.length:0,we=(de>0?P[0]:W?n:P)||setTimeout,ke=(de>1?P[1]:n)||clearTimeout,We=N[0];N[0]=function(){it.dn(),Ji(We,n,V[y](arguments))};var it=Lc(w,function(xt){if(xt){if(xt.refresh)return xt.refresh(),xt;Ji(ke,n,[xt])}return Ji(we,n,N)},function(xt){Ji(ke,n,[xt])});return it.h}s(ty,"_createTimeoutWith");function N1(w,P){return ty(!0,n,V[y](arguments))}s(N1,"scheduleTimeout");var em=Wr,ry=sn,xx="toLowerCase",As="length",ed="warnToConsole",ny="throwInternal",m5="watch",W8="apply",Xi="push",iy="splice",sg="logger",h5="cancel",bx="name",td="unload",j8="version",G8="loggingLevelConsole",V8="messageId",L1="message",z8="diagLog",mq="userAgent",Y8="split",Ix="replace",oy="type",hq="evtName",g5="traceFlags",K8="getAttribute",A5;function Kae(w,P){A5||(A5=eg("AggregationError",function(W,de){de[As]>1&&(W.errors=de[1])}));var N=w||"One or more errors occurred.";throw xn(P,function(W,de){N+=`
`.concat(de," > ").concat(le(W))}),new A5(N,P||[])}s(Kae,"throwAggregationError");var Jae="function",gq="object",Xae="undefined",ag="prototype",y5=Object,J8=y5[ag];(F()||{}).Symbol,(F()||{}).Reflect;var C5="hasOwnProperty",Zae=s(function(w){for(var P,N=1,W=arguments.length;N<W;N++){P=arguments[N];for(var de in P)J8[C5].call(P,de)&&(w[de]=P[de])}return w},"__objAssignFnImpl"),v5=pt||Zae,E5=s(function(w,P){return E5=y5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,W){N.__proto__=W}||function(N,W){for(var de in W)W[C5](de)&&(N[de]=W[de])},E5(w,P)},"extendStaticsFn");function sy(w,P){typeof P!==Jae&&P!==null&&Be("Class extends value "+String(P)+" is not a constructor or null"),E5(w,P);function N(){this.constructor=w}s(N,"__"),w[ag]=P===null?ua(P):(N[ag]=P[ag],new N)}s(sy,"__extendsFn");var x5,M1="constructor",kf="prototype",Pf="function",F1="_dynInstFuncs",Tx="_isDynProxy",ay="_dynClass",wx="_dynCls$",X8="_dynInstChk",O1=X8,Sx="_dfOpts",Z8="_unknown_",b5="__proto__",_x="_dyn"+b5,tS="__dynProto$Gbl",I5="_dynInstProto",Rx="useBaseInst",kx="setInstFuncs",rS=Object,Q1=rS.getPrototypeOf,Px=rS.getOwnPropertyNames,eL=F(),T5=eL[tS]||(eL[tS]={o:(x5={},x5[kx]=!0,x5[Rx]=!0,x5),n:1e3});function Dx(w){return w&&(w===rS[kf]||w===Array[kf])}s(Dx,"_isObjectOrArrayPrototype");function Bx(w){return Dx(w)||w===Function[kf]}s(Bx,"_isObjectArrayOrFunctionPrototype");function cg(w){var P;if(w){if(Q1)return Q1(w);var N=w[b5]||w[kf]||(w[M1]?w[M1][kf]:null);P=w[_x]||N,Te(w,_x)||(delete w[I5],P=w[_x]=w[I5]||w[_x],w[I5]=N)}return P}s(cg,"_getObjProto");function tm(w,P){var N=[];if(Px)N=Px(w);else for(var W in w)typeof W=="string"&&Te(w,W)&&N.push(W);if(N&&N.length>0)for(var de=0;de<N.length;de++)P(N[de])}s(tm,"_forEachProp");function Nx(w,P,N){return P!==M1&&typeof w[P]===Pf&&(N||Te(w,P))&&P!==b5&&P!==kf}s(Nx,"_isDynamicCandidate");function Lx(w){Be("DynamicProto: "+w)}s(Lx,"_throwTypeError");function w5(w){var P=ua(null);return tm(w,function(N){!P[N]&&Nx(w,N,!1)&&(P[N]=w[N])}),P}s(w5,"_getInstanceFuncs");function tL(w,P){for(var N=w.length-1;N>=0;N--)if(w[N]===P)return!0;return!1}s(tL,"_hasVisited");function rL(w,P,N,W){function de(it,xt,hr){var Nn=xt[hr];if(Nn[Tx]&&W){var Jn=it[F1]||{};Jn[O1]!==!1&&(Nn=(Jn[xt[ay]]||{})[hr]||Nn)}return function(){return Nn.apply(it,arguments)}}s(de,"_instFuncProxy");var we=ua(null);tm(N,function(it){we[it]=de(P,N,it)});for(var ke=cg(w),We=[];ke&&!Bx(ke)&&!tL(We,ke);)tm(ke,function(it){!we[it]&&Nx(ke,it,!Q1)&&(we[it]=de(P,ke,it))}),We.push(ke),ke=cg(ke);return we}s(rL,"_getBaseFuncs");function ece(w,P,N,W){var de=null;if(w&&Te(N,ay)){var we=w[F1]||ua(null);if(de=(we[N[ay]]||ua(null))[P],de||Lx("Missing ["+P+"] "+Pf),!de[X8]&&we[O1]!==!1){for(var ke=!Te(w,P),We=cg(w),it=[];ke&&We&&!Bx(We)&&!tL(it,We);){var xt=We[P];if(xt){ke=xt===W;break}it.push(We),We=cg(We)}try{ke&&(w[P]=de),de[X8]=1}catch{we[O1]=!1}}}return de}s(ece,"_getInstFunc");function tce(w,P,N){var W=P[w];return W===N&&(W=cg(P)[w]),typeof W!==Pf&&Lx("["+w+"] is not a "+Pf),W}s(tce,"_getProtoFunc");function rce(w,P,N,W,de){function we(it,xt){var hr=s(function(){var Nn=ece(this,xt,it,hr)||tce(xt,it,hr);return Nn.apply(this,arguments)},"dynProtoProxy");return hr[Tx]=1,hr}if(s(we,"_createDynamicPrototype"),!Dx(w)){var ke=N[F1]=N[F1]||ua(null);if(!Dx(ke)){var We=ke[P]=ke[P]||ua(null);ke[O1]!==!1&&(ke[O1]=!!de),Dx(We)||tm(N,function(it){Nx(N,it,!1)&&N[it]!==W[it]&&(We[it]=N[it],delete N[it],(!Te(w,it)||w[it]&&!w[it][Tx])&&(w[it]=we(w,it)))})}}}s(rce,"_populatePrototype");function nce(w,P){if(Q1){for(var N=[],W=cg(P);W&&!Bx(W)&&!tL(N,W);){if(W===w)return!0;N.push(W),W=cg(W)}return!1}return!0}s(nce,"_checkPrototype");function nL(w,P){return Te(w,kf)?w.name||P||Z8:((w||{})[M1]||{}).name||P||Z8}s(nL,"_getObjName");function nS(w,P,N,W){Te(w,kf)||Lx("theClass is an invalid class definition.");var de=w[kf];nce(de,P)||Lx("["+nL(w)+"] not in hierarchy of ["+nL(P)+"]");var we=null;Te(de,ay)?we=de[ay]:(we=wx+nL(w,"_")+"$"+T5.n,T5.n++,de[ay]=we);var ke=nS[Sx],We=!!ke[Rx];We&&W&&W[Rx]!==void 0&&(We=!!W[Rx]);var it=w5(P),xt=rL(de,P,it,We);N(P,xt);var hr=!!Q1&&!!ke[kx];hr&&W&&(hr=!!W[kx]),rce(de,we,P,it,hr!==!1)}s(nS,"dynamicProto"),nS[Sx]=T5.o;var hu=void 0,Ra="",Aq="Not dynamic - ",yq=/-([a-z])/g,iS=/([^\w\d_$])/g,iL=/^(\d+[\w\d_$])/;function oL(w){return!$(w)}s(oL,"isNotNullOrUndefined");function S5(w){var P=w;return P&&ie(P)&&(P=P[Ix](yq,function(N,W){return W.toUpperCase()}),P=P[Ix](iS,"_"),P=P[Ix](iL,function(N,W){return"_"+W})),P}s(S5,"normalizeJsName");function Cq(w,P){return w&&P?Gr(w,P)!==-1:!1}s(Cq,"strContains");function lg(w){return w&&w.toISOString()||""}s(lg,"toISOString");function cy(w){return Ae(w)?w[bx]:Ra}s(cy,"getExceptionName");function oS(w){return function(){function P(){var N=this;w&&lt(w,function(W,de){N[W]=de})}return s(P,"class_1"),P}()}s(oS,"createClassFromInterface");var vq="console",_5="JSON",ice="crypto",ly="msCrypto",Mx="msie",ai="trident/",Fx=null,U1=null,ug=null;function R5(){return typeof console!==Xae?console:D(vq)}s(R5,"getConsole");function Co(){return!!(typeof JSON===gq&&JSON||D(_5)!==null)}s(Co,"hasJSON");function Ox(){return Co()?JSON||D(_5):null}s(Ox,"getJSON");function mc(){return D(ice)}s(mc,"getCrypto");function Qx(){return D(ly)}s(Qx,"getMsCrypto");function sS(){var w=St();if(w&&(w[mq]!==U1||Fx===null)){U1=w[mq];var P=(U1||Ra)[xx]();Fx=Cq(P,Mx)||Cq(P,ai)}return Fx}s(sS,"isIE");function uy(w){return(ug===null||w===!1)&&(ug=ut()&&!!St().sendBeacon),ug}s(uy,"isBeaconsSupported");function aS(w,P){if(w)for(var N=0;N<w[As];N++){var W=w[N];if(W[bx]&&W[bx]===P)return W}return{}}s(aS,"_getNamedValue");function k5(w){var P=ee();return P&&w?aS(P.querySelectorAll("meta"),w).content:null}s(k5,"findMetaTag");function rm(w){var P,N=B1();if(N){var W=N.getEntriesByType("navigation")||[];P=aS((W[As]>0?W[0]:{}).serverTiming,w).description}return P}s(rm,"findNamedServerTiming");var Ux=4294967296,U0=4294967295,qx=123456789,dy=987654321,Nl=!1,Hx=qx,nm=dy;function Eq(w){w<0&&(w>>>=0),Hx=qx+w&U0,nm=dy-w&U0,Nl=!0}s(Eq,"_mwcSeed");function q1(){try{var w=fl()&2147483647;Eq((Math.random()*Ux^w)+w)}catch{}}s(q1,"_autoSeedMwc");function P5(w){return w>0?pu($x()/U0*(w+1))>>>0:0}s(P5,"randomValue");function $x(w){var P=0,N=mc()||Qx();return N&&N.getRandomValues&&(P=N.getRandomValues(new Uint32Array(1))[0]&U0),P===0&&sS()&&(Nl||q1(),P=xq()&U0),P===0&&(P=pu(Ux*Math.random()|0)),w||(P>>>=0),P}s($x,"random32");function xq(w){nm=36969*(nm&65535)+(nm>>16)&U0,Hx=18e3*(Hx&65535)+(Hx>>16)&U0;var P=(nm<<16)+(Hx&65535)>>>0&U0|0;return w||(P>>>=0),P}s(xq,"mwcRandom32");function H1(w){w===void 0&&(w=22);for(var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=$x()>>>0,W=0,de=Ra;de[As]<w;)W++,de+=P.charAt(N&63),N>>>=6,W===5&&(N=($x()<<2&4294967295|N&3)>>>0,W=0);return de}s(H1,"newId");var im="3.3.6",D5="."+H1(6),$1=0;function om(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(om,"_canAcceptData");function B5(w,P){var N=P[w.id];if(!N){N={};try{om(P)&&ue(P,w.id,{e:!1,v:N})}catch{}}return N}s(B5,"_getCache");function dg(w,P){return P===void 0&&(P=!1),S5(w+$1+++(P?"."+im:Ra)+D5)}s(dg,"createUniqueNamespace");function sm(w){var P={id:dg("_aiData-"+(w||Ra)+"."+im),accept:s(function(N){return om(N)},"accept"),get:s(function(N,W,de,we){var ke=N[P.id];return ke?ke[S5(W)]:(we&&(ke=B5(P,N),ke[S5(W)]=de),de)},"get"),kill:s(function(N,W){if(N&&N[W])try{delete N[W]}catch{}},"kill")};return P}s(sm,"createElmNodeData");function fy(w){return w&&te(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(fy,"_isConfigDefaults");function N5(w,P,N){var W,de=N.dfVal||X;if(P&&N.fb){var we=N.fb;pe(we)||(we=[we]);for(var ke=0;ke<we[As];ke++){var We=we[ke],it=P[We];if(de(it)?W=it:w&&(it=w.cfg[We],de(it)&&(W=it),w.set(w.cfg,$e(We),it)),de(W))break}}return!de(W)&&de(N.v)&&(W=N.v),W}s(N5,"_getDefault");function py(w,P,N){var W=N;if(N&&fy(N)&&(W=N5(w,P,N)),W){fy(W)&&(W=py(w,P,W));var de;pe(W)?(de=[],de[As]=W[As]):Bl(W)&&(de={}),de&&(lt(W,function(we,ke){ke&&fy(ke)&&(ke=py(w,P,ke)),de[we]=ke}),W=de)}return W}s(py,"_resolveDefaultValue");function my(w,P,N,W){var de,we,ke,We=W,it,xt,hr,Nn;fy(We)?(de=We.isVal,we=We.set,hr=We.rdOnly,Nn=We.blkVal,it=We.mrg,xt=We.ref,!xt&&J(xt)&&(xt=!!it),ke=N5(w,P,We)):ke=W,Nn&&w.blkVal(P,N);var Jn,Er=!0,Nr=P[N];(Nr||!$(Nr))&&(Jn=Nr,Er=!1,de&&Jn!==ke&&!de(Jn)&&(Jn=ke,Er=!0),we&&(Jn=we(Jn,ke,P),Er=Jn===ke)),Er?ke?Jn=py(w,P,ke):Jn=ke:(Bl(Jn)||pe(ke))&&it&&ke&&(Bl(ke)||pe(ke))&&lt(ke,function(Vn,Ln){my(w,Jn,Vn,Ln)}),w.set(P,N,Jn),xt&&w.ref(P,N),hr&&w.rdOnly(P,N)}s(my,"_applyDefaultValue");var gu=si("[[ai_dynCfg_1]]"),sL=si("[[ai_blkDynCfg_1]]"),cS=si("[[ai_frcDynCfg_1]]");function aL(w){if(w){var P;if(pe(w)?(P=[],P[As]=w[As]):Bl(w)&&(P={}),P)return lt(w,function(N,W){P[N]=aL(W)}),P}return w}s(aL,"_cfgDeepCopy");function cL(w){if(w){var P=w[gu]||w;if(P.cfg&&(P.cfg===w||P.cfg[gu]===P))return P}return null}s(cL,"getDynamicConfigHandler");function Wx(w){if(w&&(Bl(w)||pe(w)))try{w[sL]=!0}catch{}return w}s(Wx,"blockDynamicConversion");function hy(w,P,N){var W=!1;return N&&!w[P.blkVal]&&(W=N[cS],!W&&!N[sL]&&(W=Bl(N)||pe(N))),W}s(hy,"_canMakeDynamic");function q0(w){Be("InvalidAccess:"+w)}s(q0,"throwInvalidAccess");var bq=["push","pop","shift","unshift","splice"],fg=s(function(w,P,N,W){w&&w[ny](3,108,"".concat(N," [").concat(P,"] failed - ")+le(W))},"_throwDynamicError");function lL(w,P,N){pe(P)&&xn(bq,function(W){var de=P[W];P[W]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var We=de[W8](this,we);return W1(w,P,N,"Patching"),We}})}s(lL,"_patchArray");function pg(w,P){var N=Oe(w,P);return N&&N.get}s(pg,"_getOwnPropGetter");function Iq(w,P,N,W){var de={n:N,h:[],trk:s(function(xt){xt&&xt.fn&&(mo(de.h,xt)===-1&&de.h[Xi](xt),w.trk(xt,de))},"trk"),clr:s(function(xt){var hr=mo(de.h,xt);hr!==-1&&de.h[iy](hr,1)},"clr")},we=!0,ke=!1;function We(){we&&(ke=ke||hy(We,w,W),W&&!W[gu]&&ke&&(W=W1(w,W,N,"Converting")),we=!1);var xt=w.act;return xt&&de.trk(xt),W}s(We,"_getProperty"),We[w.prop]={chng:s(function(){w.add(de)},"chng")};function it(xt){if(W!==xt){We[w.ro]&&!w.upd&&q0("["+N+"] is read-only:"+le(P)),we&&(ke=ke||hy(We,w,W),we=!1);var hr=ke&&We[w.rf];if(ke)if(hr){lt(W,function(Jn){W[Jn]=xt?xt[Jn]:hu});try{lt(xt,function(Jn,Er){jx(w,W,Jn,Er)}),xt=W}catch(Jn){fg((w.hdlr||{})[sg],N,"Assigning",Jn),ke=!1}}else W&&W[gu]&&lt(W,function(Jn){var Er=pg(W,Jn);if(Er){var Nr=Er[w.prop];Nr&&Nr.chng()}});if(xt!==W){var Nn=xt&&hy(We,w,xt);!hr&&Nn&&(xt=W1(w,xt,N,"Converting")),W=xt,ke=Nn}w.add(de)}}s(it,"_setProperty"),ue(P,de.n,{g:We,s:it})}s(Iq,"_createDynamicProperty");function jx(w,P,N,W){if(P){var de=pg(P,N),we=de&&!!de[w.prop];we?P[N]=W:Iq(w,P,N,W)}return P}s(jx,"_setDynamicProperty");function uL(w,P,N,W){if(P){var de=pg(P,N),we=de&&!!de[w.prop],ke=W&&W[0],We=W&&W[1],it=W&&W[2];if(!we){if(it)try{Wx(P)}catch(xt){fg((w.hdlr||{})[sg],N,"Blocking",xt)}try{jx(w,P,N,P[N]),de=pg(P,N)}catch(xt){fg((w.hdlr||{})[sg],N,"State",xt)}}ke&&(de[w.rf]=ke),We&&(de[w.ro]=We),it&&(de[w.blkVal]=!0)}return P}s(uL,"_setDynamicPropertyState");function W1(w,P,N,W){try{lt(P,function(de,we){jx(w,P,de,we)}),P[gu]||(ht(P,gu,{get:s(function(){return w.hdlr},"get")}),lL(w,P,N))}catch(de){fg((w.hdlr||{})[sg],N,W,de)}return P}s(W1,"_makeDynamicObject");var j1="[[ai_",Df="]]";function Tq(w){var P=yr(j1+"get"+w.uid+Df),N=yr(j1+"ro"+w.uid+Df),W=yr(j1+"rf"+w.uid+Df),de=yr(j1+"blkVal"+w.uid+Df),we=yr(j1+"dtl"+w.uid+Df),ke=null,We=null,it;function xt(Er,Nr){var Vn=it.act;try{it.act=Er,Er&&Er[we]&&(xn(Er[we],function(Pi){Pi.clr(Er)}),Er[we]=[]),Nr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Pi){var Ln=w[sg];throw Ln&&Ln[ny](1,107,le(Pi)),Pi}finally{it.act=Vn||null}}s(xt,"_useHandler");function hr(){if(ke){var Er=ke;ke=null,We&&We[h5](),We=null;var Nr=[];if(xn(Er,function(Vn){if(Vn&&(Vn[we]&&(xn(Vn[we],function(Ln){Ln.clr(Vn)}),Vn[we]=null),Vn.fn))try{xt(Vn,Vn.fn)}catch(Ln){Nr[Xi](Ln)}}),ke)try{hr()}catch(Vn){Nr[Xi](Vn)}Nr[As]>0&&Kae("Watcher error(s): ",Nr)}}s(hr,"_notifyWatchers");function Nn(Er){if(Er&&Er.h[As]>0){ke||(ke=[]),We||(We=N1(function(){We=null,hr()},0));for(var Nr=0;Nr<Er.h[As];Nr++){var Vn=Er.h[Nr];Vn&&mo(ke,Vn)===-1&&ke[Xi](Vn)}}}s(Nn,"_addWatcher");function Jn(Er,Nr){if(Er){var Vn=Er[we]=Er[we]||[];mo(Vn,Nr)===-1&&Vn[Xi](Nr)}}return s(Jn,"_trackHandler"),it={prop:P,ro:N,rf:W,blkVal:de,hdlr:w,add:Nn,notify:hr,use:xt,trk:Jn},it}s(Tq,"_createState");function oce(w,P){var N={fn:P,rm:s(function(){N.fn=null,w=null,P=null},"rm")};return ue(N,"toJSON",{v:s(function(){return"WatcherHandler"+(N.fn?"":"[X]")},"v")}),w.use(N,P),N}s(oce,"_createAndUseHandler");function wq(w,P,N){var W=cL(P);if(W)return W;var de=dg("dyncfg",!0),we=P&&N!==!1?P:aL(P),ke;function We(){ke.notify()}s(We,"_notifyWatchers");function it(Ln,Pi,Bo){try{Ln=jx(ke,Ln,Pi,Bo)}catch(Zi){fg(w,Pi,"Setting value",Zi)}return Ln[Pi]}s(it,"_setValue");function xt(Ln){return oce(ke,Ln)}s(xt,"_watch");function hr(Ln,Pi){ke.use(null,function(Bo){var Zi=ke.upd;try{J(Pi)||(ke.upd=Pi),Ln(Bo)}finally{ke.upd=Zi}})}s(hr,"_block");function Nn(Ln,Pi){var Bo;return uL(ke,Ln,Pi,(Bo={},Bo[0]=!0,Bo))[Pi]}s(Nn,"_ref");function Jn(Ln,Pi){var Bo;return uL(ke,Ln,Pi,(Bo={},Bo[1]=!0,Bo))[Pi]}s(Jn,"_rdOnly");function Er(Ln,Pi){var Bo;return uL(ke,Ln,Pi,(Bo={},Bo[2]=!0,Bo))[Pi]}s(Er,"_blkPropValue");function Nr(Ln,Pi){return Pi&&lt(Pi,function(Bo,Zi){my(Vn,Ln,Bo,Zi)}),Ln}s(Nr,"_applyDefaults");var Vn={uid:null,cfg:we,logger:w,notify:We,set:it,setDf:Nr,watch:xt,ref:Nn,rdOnly:Jn,blkVal:Er,_block:hr};return ue(Vn,"uid",{c:!1,e:!1,w:!1,v:de}),ke=Tq(Vn),W1(ke,we,"config","Creating"),Vn}s(wq,"_createDynamicHandler");function Sq(w,P){w?(w[ed](P),w[ny](2,108,P)):q0(P)}s(Sq,"_logInvalidAccess");function lS(w,P,N,W){var de=wq(N,w||{},W);return P&&de.setDf(de.cfg,P),de}s(lS,"createDynamicConfig");function _q(w,P,N){var W=w[gu]||w;return W.cfg&&(W.cfg===w||W.cfg[gu]===W)?W[m5](P):(Sq(N,Aq+le(w)),lS(w,null,N)[m5](P))}s(_q,"onConfigChange");var L5=null;function Rq(){var w=D("Microsoft");return w&&(L5=w.ApplicationInsights),L5}s(Rq,"_getExtensionNamespace");function sce(w){var P=L5;return!P&&w.disableDbgExt!==!0&&(P=L5||Rq()),P?P.ChromeDbgExt:null}s(sce,"getDebugExt");var Gx,M5="warnToConsole",kq="AI (Internal): ",Pq="AI: ",ace="AITR_",cce={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Dq=(Gx={},Gx[0]=null,Gx[1]="errorToConsole",Gx[2]=M5,Gx[3]="debugToConsole",Gx);function Bq(w){return w?'"'+w[Ix](/\"/g,Ra)+'"':Ra}s(Bq,"_sanitizeDiagnosticText");function F5(w,P){var N=R5();if(N){var W="log";N[w]&&(W=w),ae(N[W])&&N[W](P)}}s(F5,"_logToConsole");var O5=function(){function w(P,N,W,de){W===void 0&&(W=!1);var we=this;we[V8]=P,we[L1]=(W?Pq:kq)+P;var ke=Ra;Co()&&(ke=Ox().stringify(de));var We=(N?" message:"+Bq(N):Ra)+(de?" props:"+Bq(ke):Ra);we[L1]+=We}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function lce(w,P){return(w||{})[sg]||new Q5(P)}s(lce,"safeGetLogger");var Q5=function(){function w(P){this.identifier="DiagnosticLogger",this.queue=[];var N=0,W={},de,we,ke,We,it;nS(w,this,function(xt){it=Nn(P||{}),xt.consoleLoggingLevel=function(){return de},xt[ny]=function(Nr,Vn,Ln,Pi,Bo){Bo===void 0&&(Bo=!1);var Zi=new O5(Vn,Ln,Bo,Pi);if(We)throw le(Zi);var Mc=Dq[Nr]||M5;if(J(Zi[L1]))Er("throw"+(Nr===1?"Critical":"Warning"),Zi);else{if(Bo){var bb=+Zi[V8];!W[bb]&&de>=Nr&&(xt[Mc](Zi[L1]),W[bb]=!0)}else de>=Nr&&xt[Mc](Zi[L1]);hr(Nr,Zi)}},xt.debugToConsole=function(Nr){F5("debug",Nr),Er("warning",Nr)},xt[ed]=function(Nr){F5("warn",Nr),Er("warning",Nr)},xt.errorToConsole=function(Nr){F5("error",Nr),Er("error",Nr)},xt.resetInternalMessageCount=function(){N=0,W={}},xt.logInternalMessage=hr,xt[td]=function(Nr){it&&it.rm(),it=null};function hr(Nr,Vn){if(!Jn()){var Ln=!0,Pi=ace+Vn[V8];if(W[Pi]?Ln=!1:W[Pi]=!0,Ln&&(Nr<=we&&(xt.queue[Xi](Vn),N++,Er(Nr===1?"error":"warn",Vn)),N===ke)){var Bo="Internal events throttle limit per PageView reached for this app.",Zi=new O5(23,Bo,!1);xt.queue[Xi](Zi),Nr===1?xt.errorToConsole(Bo):xt[ed](Bo)}}}s(hr,"_logInternalMessage");function Nn(Nr){return _q(lS(Nr,cce,xt).cfg,function(Vn){var Ln=Vn.cfg;de=Ln[G8],we=Ln.loggingLevelTelemetry,ke=Ln.maxMessageLimit,We=Ln.enableDebug})}s(Nn,"_setDefaultsFromConfig");function Jn(){return N>=ke}s(Jn,"_areInternalMessagesThrottled");function Er(Nr,Vn){var Ln=sce(P||{});Ln&&Ln[z8]&&Ln[z8](Nr,Vn)}s(Er,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function U5(w){return w||new Q5}s(U5,"_getLogger");function qd(w,P,N,W,de,we){we===void 0&&(we=!1),U5(w)[ny](P,N,W,de,we)}s(qd,"_throwInternal");function q5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],P=Ra,N,W=0;W<4;W++)N=$x(),P+=w[N&15]+w[N>>4&15]+w[N>>8&15]+w[N>>12&15]+w[N>>16&15]+w[N>>20&15]+w[N>>24&15]+w[N>>28&15];var de=w[8+($x()&3)|0];return rr(P,0,8)+rr(P,9,4)+"4"+rr(P,13,3)+de+rr(P,16,3)+rr(P,19,12)}s(q5,"generateW3CId");var Vx=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,dL="00",Bf="ff",ki="00000000000000000000000000000000",mg="0000000000000000",hc=1;function H0(w,P,N){return w&&w[As]===P&&w!==N?!!w.match(/^[\da-f]*$/i):!1}s(H0,"_isValid");function H5(w,P,N){return H0(w,P)?w:N}s(H5,"_formatValue");function G1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var P=w.toString(16);P[As]<2;)P="0"+P;return P}s(G1,"_formatFlags");function zx(w,P,N,W){return{version:H0(W,2,Bf)?W:dL,traceId:Yx(w)?w:q5(),spanId:Kx(P)?P:jr(q5(),16),traceFlags:N>=0&&N<=255?N:1}}s(zx,"createTraceParent");function Nf(w,P){if(!w||(pe(w)&&(w=w[0]||""),!w||!ie(w)||w[As]>8192))return null;if(w.indexOf(",")!==-1){var N=w[Y8](",");w=N[P>0&&N[As]>P?P:0]}var W=Vx.exec(_a(w));return!W||W[1]===Bf||W[2]===ki||W[3]===mg?null:{version:(W[1]||Ra)[xx](),traceId:(W[2]||Ra)[xx](),spanId:(W[3]||Ra)[xx](),traceFlags:parseInt(W[4],16)}}s(Nf,"parseTraceParent");function Yx(w){return H0(w,32,ki)}s(Yx,"isValidTraceId");function Kx(w){return H0(w,16,mg)}s(Kx,"isValidSpanId");function Jx(w){return!(!w||!H0(w[j8],2,Bf)||!H0(w.traceId,32,ki)||!H0(w.spanId,16,mg)||!H0(G1(w[g5]),2))}s(Jx,"isValidTraceParent");function $5(w){return Jx(w)?(w[g5]&hc)===hc:!1}s($5,"isSampledFlag");function V1(w){if(w){var P=G1(w[g5]);H0(P,2)||(P="01");var N=w[j8]||dL;return N!=="00"&&N!=="ff"&&(N=dL),"".concat(N.toLowerCase(),"-").concat(H5(w.traceId,32,ki).toLowerCase(),"-").concat(H5(w.spanId,16,mg).toLowerCase(),"-").concat(P.toLowerCase())}return""}s(V1,"formatTraceParent");function fL(w){var P="traceparent",N=Nf(k5(P),w);return N||(N=Nf(rm(P),w)),N}s(fL,"findW3cTraceParent");function pL(w){var P=w.getElementsByTagName("script"),N=[];return xn(P,function(W){var de=W[K8]("src");if(de){var we=W[K8]("crossorigin"),ke=W.hasAttribute("async")===!0,We=W.hasAttribute("defer")===!0,it=W[K8]("referrerpolicy"),xt={url:de};we&&(xt.crossOrigin=we),ke&&(xt.async=ke),We&&(xt.defer=We),it&&(xt.referrerPolicy=it),N[Xi](xt)}}),N}s(pL,"findAllScripts");var W5="on",uS="attachEvent",j5="addEventListener",G5="detachEvent",Nq="removeEventListener",mL="events";dg("aiEvtPageHide"),dg("aiEvtPageShow");var uce=/\.[\.]+/g,dce=/[\.]+$/,V5=1,Xx=sm("events"),Ll=/^([^.]*)(?:\.(.+)|)/;function dS(w){return w&&w[Ix]?w[Ix](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ra):w}s(dS,"_normalizeNamespace");function pl(w,P){if(P){var N=Ra;pe(P)?(N=Ra,xn(P,function(de){de=dS(de),de&&(de[0]!=="."&&(de="."+de),N+=de)})):N=dS(P),N&&(N[0]!=="."&&(N="."+N),w=(w||Ra)+N)}var W=Ll.exec(w||Ra)||[];return{type:W[1],ns:(W[2]||Ra).replace(uce,".").replace(dce,Ra)[Y8](".").sort().join(".")}}s(pl,"_getEvtNamespace");function gy(w,P,N){N===void 0&&(N=!0);var W=Xx.get(w,mL,{},N),de=W[P];return de||(de=W[P]=[]),de}s(gy,"_getRegisteredEvents");function Lq(w,P,N,W){w&&P&&P[oy]&&(w[Nq]?w[Nq](P[oy],N,W):w[G5]&&w[G5](W5+P[oy],N))}s(Lq,"_doDetach");function fce(w,P,N,W){var de=!1;return w&&P&&P[oy]&&N&&(w[j5]?(w[j5](P[oy],N,W),de=!0):w[uS]&&(w[uS](W5+P[oy],N),de=!0)),de}s(fce,"_doAttach");function fS(w,P,N,W){for(var de=P[As];de--;){var we=P[de];we&&(!N.ns||N.ns===we[hq].ns)&&(!W||W(we))&&(Lq(w,we[hq],we.handler,we.capture),P[iy](de,1))}}s(fS,"_doUnregister");function hL(w,P,N){if(P[oy])fS(w,gy(w,P[oy]),P,N);else{var W=Xx.get(w,mL,{});lt(W,function(de,we){fS(w,we,P,N)}),Mt(W)[As]===0&&Xx.kill(w,mL)}}s(hL,"_unregisterEvents");function pce(w,P){var N;return P?(pe(P)?N=[w].concat(P):N=[w,P],N=pl("xx",N).ns[Y8](".")):N=w,N}s(pce,"mergeEvtNamespace");function gL(w,P,N,W,de){de===void 0&&(de=!1);var we=!1;if(w)try{var ke=pl(P,W);if(we=fce(w,ke,N,de),we&&Xx.accept(w)){var We={guid:V5++,evtName:ke,handler:N,capture:de};gy(w,ke.type)[Xi](We)}}catch{}return we}s(gL,"eventOn");function Mq(w,P,N,W,de){if(de===void 0&&(de=!1),w)try{var we=pl(P,W),ke=!1;hL(w,we,function(We){return we.ns&&!N||We.handler===N?(ke=!0,!0):!1}),ke||Lq(w,we,N,de)}catch{}}s(Mq,"eventOff");var z5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Fq="sampleRate",Y5="ProcessLegacy",Oq="http.method",AL="https://dc.services.visualstudio.com",pS="/v2/track",am="not_specified",yL="iKey",Qq=ry({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Ay="split",Bn="length",Zx="toLowerCase",z1="ingestionendpoint",Y1="toString",CL="removeItem",mS="message",eb="count",K5="preTriggerDate",vL="getUTCDate",J5="stringify",tb="pathname",K1="match",EL="correlationHeaderExcludePatterns",Lf="name",rb="extensionConfig",cm="properties",rd="measurements",nb="sizeInBytes",hS="typeName",ib="exceptions",gS="severityLevel",ob="problemGroup",Hd="parsedStack",X5="hasFullStack",Z5="assembly",$0="fileName",sb="line",yy="aiDataContract",AS="duration";function xL(w,P,N){var W=P[Bn],de=bL(w,P);if(de[Bn]!==W){for(var we=0,ke=de;N[ke]!==void 0;)we++,ke=cr(de,0,147)+Uq(we);de=ke}return de}s(xL,"dataSanitizeKeyAndAddUniqueness");function bL(w,P){var N;return P&&(P=_a($e(P)),P[Bn]>150&&(N=cr(P,0,150),qd(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:P},!0))),N||P}s(bL,"dataSanitizeKey");function ml(w,P,N){N===void 0&&(N=1024);var W;return P&&(N=N||1024,P=_a($e(P)),P[Bn]>N&&(W=cr(P,0,N),qd(w,2,61,"string value is too long. It has been truncated to "+N+" characters.",{value:P},!0))),W||P}s(ml,"dataSanitizeString");function lm(w,P){return TL(w,P,2048,66)}s(lm,"dataSanitizeUrl");function eP(w,P){var N;return P&&P[Bn]>32768&&(N=cr(P,0,32768),qd(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:P},!0)),N||P}s(eP,"dataSanitizeMessage");function IL(w,P){var N;if(P){var W=""+P;W[Bn]>32768&&(N=cr(W,0,32768),qd(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:P},!0))}return N||P}s(IL,"dataSanitizeException");function hg(w,P){if(P){var N={};lt(P,function(W,de){if(te(de)&&Co())try{de=Ox()[J5](de)}catch(we){qd(w,2,49,"custom property is not valid",{exception:we},!0)}de=ml(w,de,8192),W=xL(w,W,N),N[W]=de}),P=N}return P}s(hg,"dataSanitizeProperties");function Mf(w,P){if(P){var N={};lt(P,function(W,de){W=xL(w,W,N),N[W]=de}),P=N}return P}s(Mf,"dataSanitizeMeasurements");function ab(w,P){return P&&TL(w,P,128,69)[Y1]()}s(ab,"dataSanitizeId");function TL(w,P,N,W){var de;return P&&(P=_a($e(P)),P[Bn]>N&&(de=cr(P,0,N),qd(w,2,W,"input is too long, it has been truncated to "+N+" characters.",{data:P},!0))),de||P}s(TL,"dataSanitizeInput");function Uq(w){var P="00"+w;return rr(P,P[Bn]-3)}s(Uq,"dsPadNumber");var wL=ee()||{},qq=0,mce=[null,null,null,null,null];function cb(w){var P=qq,N=mce,W=N[P];return wL.createElement?N[P]||(W=N[P]=wL.createElement("a")):W={host:$q(w,!0)},W.href=w,P++,P>=N[Bn]&&(P=0),qq=P,W}s(cb,"urlParseUrl");function hce(w){var P,N=cb(w);return N&&(P=N.href),P}s(hce,"urlGetAbsoluteUrl");function gce(w){var P,N=cb(w);return N&&(P=N[tb]),P}s(gce,"urlGetPathName");function Hq(w,P){return w?w.toUpperCase()+" "+P:P}s(Hq,"urlGetCompleteUrl");function $q(w,P){var N=gg(w,P)||"";if(N){var W=N[K1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Bn]>3&&ie(W[2])&&W[2][Bn]>0)return W[2]+(W[3]||"")}return N}s($q,"urlParseHost");function gg(w,P){var N=null;if(w){var W=w[K1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[Bn]>2&&ie(W[2])&&W[2][Bn]>0&&(N=W[2]||"",P&&W[Bn]>2)){var de=(W[1]||"")[Zx](),we=W[3]||"";(de==="http"&&we===":80"||de==="https"&&we===":443")&&(we=""),N+=we}}return N}s(gg,"urlParseFullHost");var Wq=[AL+pS,"https://breeze.aimon.applicationinsights.io"+pS,"https://dc-int.services.visualstudio.com"+pS],lb="cid-v1:";function jq(w){return mo(Wq,w[Zx]())!==-1}s(jq,"isInternalApplicationInsightsEndpoint");function SL(w){lb=w}s(SL,"correlationIdSetPrefix");function _L(){return lb}s(_L,"correlationIdGetPrefix");function Cy(w,P,N){if(!P||w&&w.disableCorrelationHeaders)return!1;if(w&&w[EL]){for(var W=0;W<w.correlationHeaderExcludePatterns[Bn];W++)if(w[EL][W].test(P))return!1}var de=cb(P).host[Zx]();if(de&&(Gr(de,":443")!==-1||Gr(de,":80")!==-1)&&(de=(gg(P,!0)||"")[Zx]()),(!w||!w.enableCorsCorrelation)&&de&&de!==N)return!1;var we=w&&w.correlationHeaderDomains;if(we){var ke;if(xn(we,function(xt){var hr=new RegExp(xt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));ke=ke||hr.test(de)}),!ke)return!1}var We=w&&w.correlationHeaderExcludedDomains;if(!We||We[Bn]===0)return!0;for(var W=0;W<We[Bn];W++){var it=new RegExp(We[W].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(it.test(de))return!1}return de&&de[Bn]>0}s(Cy,"correlationIdCanIncludeCorrelationHeader");function Gq(w){if(w){var P=Vq(w,Qq[1]);if(P&&P!==lb)return P}}s(Gq,"correlationIdGetCorrelationContext");function Vq(w,P){if(w)for(var N=w[Ay](","),W=0;W<N[Bn];++W){var de=N[W][Ay]("=");if(de[Bn]===2&&de[0]===P)return de[1]}}s(Vq,"correlationIdGetCorrelationContextValue");function zq(w,P,N,W){var de,we=W,ke=W;if(P&&P[Bn]>0){var We=cb(P);if(de=We.host,!we)if(We[tb]!=null){var it=We.pathname[Bn]===0?"/":We[tb];it.charAt(0)!=="/"&&(it="/"+it),ke=We[tb],we=ml(w,N?N+" "+it:it)}else we=ml(w,P)}else de=W,we=W;return{target:de,name:we,data:ke}}s(zq,"AjaxHelperParseDependencyPath");function Ace(){var w=B1();if(w&&w.now&&w.timing){var P=w.now()+w.timing.navigationStart;if(P>0)return P}return fl()}s(Ace,"dateTimeUtilsNow");function yce(w,P){var N=null;return w!==0&&P!==0&&!$(w)&&!$(P)&&(N=P-w),N}s(yce,"dateTimeUtilsDuration");function RL(w,P){var N=w||{};return{getName:s(function(){return N[Lf]},"getName"),setName:s(function(W){P&&P.setName(W),N[Lf]=W},"setName"),getTraceId:s(function(){return N.traceID},"getTraceId"),setTraceId:s(function(W){P&&P.setTraceId(W),Yx(W)&&(N.traceID=W)},"setTraceId"),getSpanId:s(function(){return N.parentID},"getSpanId"),setSpanId:s(function(W){P&&P.setSpanId(W),Kx(W)&&(N.parentID=W)},"setSpanId"),getTraceFlags:s(function(){return N.traceFlags},"getTraceFlags"),setTraceFlags:s(function(W){P&&P.setTraceFlags(W),N.traceFlags=W},"setTraceFlags")}}s(RL,"createDistributedTraceContextFromTrace");var ub=em({LocalStorage:0,SessionStorage:1}),Cce=em({AI:0,AI_AND_W3C:1,W3C:2}),yS=em({Normal:1,Critical:2}),vy=void 0,W0=void 0,Yq="";function db(){return tP()?fb(ub.LocalStorage):null}s(db,"_getLocalStorageObject");function fb(w){try{if($(F()))return null;var P=new Date()[Y1](),N=D(w===ub.LocalStorage?"localStorage":"sessionStorage"),W=Yq+P;N.setItem(W,P);var de=N.getItem(W)!==P;if(N[CL](W),!de)return N}catch{}return null}s(fb,"_getVerifiedStorageObject");function pb(){return Ag()?fb(ub.SessionStorage):null}s(pb,"_getSessionStorageObject");function CS(){vy=!1,W0=!1}s(CS,"utlDisableStorage");function vS(w){Yq=w||""}s(vS,"utlSetStoragePrefix");function vce(){vy=tP(!0),W0=Ag(!0)}s(vce,"utlEnableStorage");function tP(w){return(w||vy===void 0)&&(vy=!!fb(ub.LocalStorage)),vy}s(tP,"utlCanUseLocalStorage");function Kq(w,P){var N=db();if(N!==null)try{return N.getItem(P)}catch(W){vy=!1,qd(w,2,1,"Browser failed read of local storage. "+cy(W),{exception:le(W)})}return null}s(Kq,"utlGetLocalStorage");function Jq(w,P,N){var W=db();if(W!==null)try{return W.setItem(P,N),!0}catch(de){vy=!1,qd(w,2,3,"Browser failed write to local storage. "+cy(de),{exception:le(de)})}return!1}s(Jq,"utlSetLocalStorage");function Ff(w,P){var N=db();if(N!==null)try{return N[CL](P),!0}catch(W){vy=!1,qd(w,2,5,"Browser failed removal of local storage item. "+cy(W),{exception:le(W)})}return!1}s(Ff,"utlRemoveStorage");function Ag(w){return(w||W0===void 0)&&(W0=!!fb(ub.SessionStorage)),W0}s(Ag,"utlCanUseSessionStorage");function mb(){var w=[];return Ag()&&lt(D("sessionStorage"),function(P){w.push(P)}),w}s(mb,"utlGetSessionStorageKeys");function Xq(w,P){var N=pb();if(N!==null)try{return N.getItem(P)}catch(W){W0=!1,qd(w,2,2,"Browser failed read of session storage. "+cy(W),{exception:le(W)})}return null}s(Xq,"utlGetSessionStorage");function Ece(w,P,N){var W=pb();if(W!==null)try{return W.setItem(P,N),!0}catch(de){W0=!1,qd(w,2,4,"Browser failed write to session storage. "+cy(de),{exception:le(de)})}return!1}s(Ece,"utlSetSessionStorage");function Zq(w,P){var N=pb();if(N!==null)try{return N[CL](P),!0}catch(W){W0=!1,qd(w,2,6,"Browser failed removal of session storage item. "+cy(W),{exception:le(W)})}return!1}s(Zq,"utlRemoveSessionStorage");var xce="appInsightsThrottle",bce=function(){function w(P,N){var W=this,de,we,ke,We,it,xt,hr,Nn=!1,Jn=!1;Nr(),W._getDbgPlgTargets=function(){return[hr]},W.getConfig=function(){return ke},W.canThrottle=function(Bt){var Vr=$L(Bt),yn=Vn(Bt);return Bo(yn,de,Vr)},W.isTriggered=function(Bt){return gH(Bt)},W.isReady=function(){return Nn},W.flush=function(Bt){try{var Vr=AH(Bt);if(Vr&&Vr[Bn]>0){var yn=Vr.slice(0);return hr[Bt]=[],xn(yn,function(us){Er(us.msgID,us[mS],us.severity,!1)}),!0}}catch{}return!1},W.flushAll=function(){try{if(hr){var Bt=!0;return lt(hr,function(Vr){var yn=W.flush(parseInt(Vr));Bt=Bt&&yn}),Bt}}catch{}return!1},W.onReadyState=function(Bt,Vr){return Vr===void 0&&(Vr=!0),Nn=$(Bt)?!0:Bt,Nn&&Vr?W.flushAll():null},W.sendMessage=function(Bt,Vr,yn){return Er(Bt,Vr,yn,!0)};function Er(Bt,Vr,yn,us){if(Nn){var Fc=qce(Bt);if(!Fc)return;var ka=Vn(Bt),Oc=$L(Bt),X1=Bo(ka,de,Oc),Ty=!1,Ib=0,yH=gH(Bt);try{X1&&!yH?(Ib=br(ka.limit.maxSendNumber,Oc[eb]+1),Oc[eb]=0,Ty=!0,it[Bt]=!0,Oc[K5]=new Date):(it[Bt]=X1,Oc[eb]+=1);var CH=Zi(Bt);HL(we,CH,Oc);for(var hP=0;hP<Ib;hP++)hH(Bt,we,Vr,yn)}catch{}return{isThrottled:Ty,throttleNum:Ib}}else if(us){var Hce=AH(Bt);Hce.push({msgID:Bt,message:Vr,severity:yn})}return null}s(Er,"_flushMessage");function Nr(){we=lce(P),it={},We={},hr={},ke={},Ln(109),xt=oL(N)?N:"",P.addUnloadHook(_q(P.config,function(Bt){var Vr=Bt.cfg;de=tP();var yn=Vr.throttleMgrCfg||{};lt(yn,function(us,Fc){Ln(parseInt(us),Fc)})}))}s(Nr,"_initConfig");function Vn(Bt){return ke[Bt]||ke[109]}s(Vn,"_getCfgByKey");function Ln(Bt,Vr){var yn,us;try{var Fc=Vr||{},ka={};ka.disabled=!!Fc.disabled;var Oc=Fc.interval||{};Jn=Oc?.daysOfMonth&&Oc?.daysOfMonth[Bn]>0,ka.interval=Pi(Oc);var X1={samplingRate:((yn=Fc.limit)===null||yn===void 0?void 0:yn.samplingRate)||100,maxSendNumber:((us=Fc.limit)===null||us===void 0?void 0:us.maxSendNumber)||1};ka.limit=X1,ke[Bt]=ka}catch{}}s(Ln,"_setCfgByKey");function Pi(Bt){Bt=Bt||{};var Vr=Bt?.monthInterval,yn=Bt?.dayInterval;return $(Vr)&&$(yn)&&(Bt.monthInterval=3,Jn||(Bt.daysOfMonth=[28],Jn=!0)),Bt={monthInterval:Bt?.monthInterval,dayInterval:Bt?.dayInterval,daysOfMonth:Bt?.daysOfMonth},Bt}s(Pi,"_getIntervalConfig");function Bo(Bt,Vr,yn){if(Bt&&!Bt.disabled&&Vr&&oL(yn)){var us=_S(),Fc=yn.date,ka=Bt.interval,Oc=1;if(ka?.monthInterval){var X1=(us.getUTCFullYear()-Fc.getUTCFullYear())*12+us.getUTCMonth()-Fc.getUTCMonth();Oc=mP(ka.monthInterval,0,X1)}var Ty=1;if(Jn)Ty=mo(ka.daysOfMonth,us[vL]());else if(ka?.dayInterval){var Ib=pu((us.getTime()-Fc.getTime())/864e5);Ty=mP(ka.dayInterval,0,Ib)}return Oc>=0&&Ty>=0}return!1}s(Bo,"_canThrottle");function Zi(Bt,Vr){var yn=oL(Vr)?Vr:"";return Bt?xce+yn+"-"+Bt:null}s(Zi,"_getLocalStorageName");function Mc(Bt){try{if(Bt){var Vr=new Date;return Bt.getUTCFullYear()===Vr.getUTCFullYear()&&Bt.getUTCMonth()===Vr.getUTCMonth()&&Bt[vL]()===Vr[vL]()}}catch{}return!1}s(Mc,"_isTriggeredOnCurDate");function bb(Bt,Vr,yn){try{var us={date:_S(),count:0};if(Bt){var Fc=JSON.parse(Bt),ka={date:_S(Fc.date)||us.date,count:Fc[eb]||us[eb],preTriggerDate:Fc.preTriggerDate?_S(Fc[K5]):void 0};return ka}else return HL(Vr,yn,us),us}catch{}return null}s(bb,"_getLocalStorageObj");function _S(Bt){try{if(Bt){var Vr=new Date(Bt);if(!isNaN(Vr.getDate()))return Vr}else return new Date}catch{}return null}s(_S,"_getThrottleDate");function HL(Bt,Vr,yn){try{return Jq(Bt,Vr,_a(JSON[J5](yn)))}catch{}return!1}s(HL,"_resetLocalStorage");function mP(Bt,Vr,yn){return Bt<=0?1:yn>=Vr&&(yn-Vr)%Bt==0?pu((yn-Vr)/Bt)+1:-1}s(mP,"_checkInterval");function hH(Bt,Vr,yn,us){qd(Vr,us||1,Bt,yn)}s(hH,"_sendMessage");function qce(Bt){try{var Vr=Vn(Bt);return P5(1e6)<=Vr.limit.samplingRate}catch{}return!1}s(qce,"_canSampledIn");function $L(Bt){try{var Vr=We[Bt];if(!Vr){var yn=Zi(Bt,xt);Vr=bb(Kq(we,yn),we,yn),We[Bt]=Vr}return We[Bt]}catch{}return null}s($L,"_getLocalStorageObjByKey");function gH(Bt){var Vr=it[Bt];if($(Vr)){Vr=!1;var yn=$L(Bt);yn&&(Vr=Mc(yn[K5])),it[Bt]=Vr}return it[Bt]}s(gH,"_isTrigger");function AH(Bt){return hr=hr||{},$(hr[Bt])&&(hr[Bt]=[]),hr[Bt]}s(AH,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),kL=";",um="=";function rP(w){if(!w)return{};var P=w[Ay](kL),N=Vo(P,function(de,we){var ke=we[Ay](um);if(ke[Bn]===2){var We=ke[0][Zx](),it=ke[1];de[We]=it}return de},{});if(Mt(N)[Bn]>0){if(N.endpointsuffix){var W=N.location?N.location+".":"";N[z1]=N[z1]||"https://"+W+"dc."+N.endpointsuffix}N[z1]=N[z1]||AL,_f(N[z1],"/")&&(N[z1]=N[z1].slice(0,-1))}return N}s(rP,"parseConnectionString");var nP={parse:rP},iP=function(){function w(P,N,W){var de=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[Lf]=ml(P,W)||am,we.data=N,we.time=lg(new Date),we[yy]={time:1,iKey:1,name:1,sampleRate:s(function(){return de.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),Ice=function(){function w(P,N,W,de){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[Lf]=ml(P,N)||am,we[cm]=hg(P,W),we[rd]=Mf(P,de)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),Tce=58,eH=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,wce=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,hb=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,tH=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Sce=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,_ce=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Rce=/([^\(\s\n]+):([0-9]+)$/,rH="<no_method>",gb="error",$d="stack",ES="stackDetails",oP="errorSrc",xS="message",bS="description",PL=[{re:wce,len:5,m:1,fn:2,ln:3,col:4},{chk:sP,pre:Mr,re:hb,len:4,m:1,fn:2,ln:3},{re:tH,len:3,m:1,fn:2,hdl:BL},{re:Sce,len:2,fn:1,hdl:BL}];function Mr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Mr,"_scrubAnonymous");function sP(w){return Gr(w,"[native")<0}s(sP,"_ignoreNative");function IS(w,P){var N=w;return N&&!ie(N)&&(JSON&&JSON[J5]?(N=JSON[J5](w),P&&(!N||N==="{}")&&(ae(w[Y1])?N=w[Y1]():N=""+w)):N=""+w+" - (Missing JSON.stringify)"),N||""}s(IS,"_stringify");function Ey(w,P){var N=w;return w&&(N&&!ie(N)&&(N=w[xS]||w[bS]||N),N&&!ie(N)&&(N=IS(N,!0)),w.filename&&(N=N+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),P&&P!=="String"&&P!=="Object"&&P!=="Error"&&Gr(N||"",P)===-1&&(N=P+": "+N),N||""}s(Ey,"_formatMessage");function nH(w){try{if(te(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(nH,"_isExceptionDetailsInternal");function iH(w){try{if(te(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(iH,"_isExceptionInternal");function aP(w){return w&&w.src&&ie(w.src)&&w.obj&&pe(w.obj)}s(aP,"_isStackDetails");function yg(w){var P=w||"";ie(P)||(ie(P[$d])?P=P[$d]:P=""+P);var N=P[Ay](`
`);return{src:P,obj:N}}s(yg,"_convertStackObj");function oH(w){for(var P=[],N=w[Ay](`
`),W=0;W<N[Bn];W++){var de=N[W];N[W+1]&&(de+="@"+N[W+1],W++),P.push(de)}return{src:w,obj:P}}s(oH,"_getOperaStack");function cP(w){var P=null;if(w)try{if(w[$d])P=yg(w[$d]);else if(w[gb]&&w[gb][$d])P=yg(w[gb][$d]);else if(w.exception&&w.exception[$d])P=yg(w.exception[$d]);else if(aP(w))P=w;else if(aP(w[ES]))P=w[ES];else if(_e()&&_e().opera&&w[xS])P=oH(w[mS]);else if(w.reason&&w.reason[$d])P=yg(w.reason[$d]);else if(ie(w))P=yg(w);else{var N=w[xS]||w[bS]||"";ie(w[oP])&&(N&&(N+=`
`),N+=" from "+w[oP]),N&&(P=yg(N))}}catch(W){P=yg(W)}return P||{src:"",obj:null}}s(cP,"_getStackFromErrorObj");function sH(w){var P="";return w&&(w.obj?P=w.obj.join(`
`):P=w.src||""),P}s(sH,"_formatStackTrace");function lP(w){var P,N=w.obj;if(N&&N[Bn]>0){P=[];var W=0,de=!1,we=0;xn(N,function(Vn){if(de||kce(Vn)){var Ln=$e(Vn);de=!0;var Pi=Pce(Ln,W);Pi&&(we+=Pi[nb],P.push(Pi),W++)}});var ke=32*1024;if(we>ke)for(var We=0,it=P[Bn]-1,xt=0,hr=We,Nn=it;We<it;){var Jn=P[We][nb],Er=P[it][nb];if(xt+=Jn+Er,xt>ke){var Nr=Nn-hr+1;P.splice(hr,Nr);break}hr=We,Nn=it,We++,it--}}return P}s(lP,"_parseStack");function Ab(w){var P="";if(w&&(P=w.typeName||w[Lf]||"",!P))try{var N=/function (.{1,200})\(/,W=N.exec(w.constructor[Y1]());P=W&&W[Bn]>1?W[1]:""}catch{}return P}s(Ab,"_getErrorType");function uP(w){if(w)try{if(!ie(w)){var P=Ab(w),N=IS(w,!1);return(!N||N==="{}")&&(w[gb]&&(w=w[gb],P=Ab(w)),N=IS(w,!0)),Gr(N,P)!==0&&P!=="String"?P+":"+N:N}}catch{}return""+(w||"")}s(uP,"_formatErrorCode");var dm=function(){function w(P,N,W,de,we,ke){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var We=this;We.ver=2,iH(N)?(We[ib]=N[ib]||[],We[cm]=N[cm],We[rd]=N[rd],N[gS]&&(We[gS]=N[gS]),N.id&&(We.id=N.id,N[cm].id=N.id),N[ob]&&(We[ob]=N[ob]),$(N.isManual)||(We.isManual=N.isManual)):(W||(W={}),ke&&(W.id=ke),We[ib]=[lH(P,N,W)],We[cm]=hg(P,W),We[rd]=Mf(P,de),we&&(We[gS]=we),ke&&(We.id=ke))}return s(w,"Exception"),w.CreateAutoException=function(P,N,W,de,we,ke,We,it){var xt=Ab(we||ke||P);return{message:Ey(P,xt),url:N,lineNumber:W,columnNumber:de,error:uP(we||ke||P),evt:uP(ke||P),typeName:xt,stackDetails:cP(We||we||ke),errorSrc:it}},w.CreateFromInterface=function(P,N,W,de){var we=N[ib]&&hi(N[ib],function(We){return DL(P,We)}),ke=new w(P,v5(v5({},N),{exceptions:we}),W,de);return ke},w.prototype.toInterface=function(){var P=this,N=P.exceptions,W=P.properties,de=P.measurements,we=P.severityLevel,ke=P.problemGroup,We=P.id,it=P.isManual,xt=N instanceof Array&&hi(N,function(hr){return hr.toInterface()})||void 0;return{ver:"4.0",exceptions:xt,severityLevel:we,properties:W,measurements:de,problemGroup:ke,id:We,isManual:it}},w.CreateSimpleException=function(P,N,W,de,we,ke){var We;return{exceptions:[(We={},We[X5]=!0,We.message=P,We.stack=we,We.typeName=N,We)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=uP,w}(),aH=Kt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function cH(){var w=this,P=pe(w[Hd])&&hi(w[Hd],function(W){return dH(W)}),N={id:w.id,outerId:w.outerId,typeName:w[hS],message:w[mS],hasFullStack:w[X5],stack:w[$d],parsedStack:P||void 0};return N}s(cH,"_toInterface");function lH(w,P,N){var W,de,we,ke,We,it,xt,hr;if(nH(P))ke=P[hS],We=P[mS],xt=P[$d],hr=P[Hd]||[],it=P[X5];else{var Nn=P,Jn=Nn&&Nn.evt;Ae(Nn)||(Nn=Nn[gb]||Jn||Nn),ke=ml(w,Ab(Nn))||am,We=eP(w,Ey(P||Nn,ke))||am;var Er=P[ES]||cP(P);hr=lP(Er),pe(hr)&&hi(hr,function(Nr){Nr[Z5]=ml(w,Nr[Z5]),Nr[$0]=ml(w,Nr[$0])}),xt=IL(w,sH(Er)),it=pe(hr)&&hr[Bn]>0,N&&(N[hS]=N[hS]||ke)}return W={},W[yy]=aH,W.id=de,W.outerId=we,W.typeName=ke,W.message=We,W[X5]=it,W.stack=xt,W.parsedStack=hr,W.toInterface=cH,W}s(lH,"_createExceptionDetails");function DL(w,P){var N=pe(P[Hd])&&hi(P[Hd],function(de){return uH(de)})||P[Hd],W=lH(w,v5(v5({},P),{parsedStack:N}));return W}s(DL,"_createExDetailsFromInterface");function TS(w,P){var N=P[K1](_ce);if(N&&N[Bn]>=4)w[$0]=N[1],w[sb]=parseInt(N[2]);else{var W=P[K1](Rce);W&&W[Bn]>=3?(w[$0]=W[1],w[sb]=parseInt(W[2])):w[$0]=P}}s(TS,"_parseFilename");function BL(w,P,N){var W=w[$0];P.fn&&N&&N[Bn]>P.fn&&(P.ln&&N[Bn]>P.ln?(W=_a(N[P.fn]||""),w[sb]=parseInt(_a(N[P.ln]||""))||0):W=_a(N[P.fn]||"")),W&&TS(w,W)}s(BL,"_handleFilename");function kce(w){var P=!1;if(w&&ie(w)){var N=_a(w);N&&(P=eH.test(N))}return P}s(kce,"_isStackFrame");var NL=Kt({level:1,method:1,assembly:0,fileName:0,line:0});function Pce(w,P){var N,W;if(w&&ie(w)&&_a(w)){W=(N={},N[yy]=NL,N.level=P,N.assembly=_a(w),N.method=rH,N.fileName="",N.line=0,N.sizeInBytes=0,N);for(var de=0;de<PL[Bn];){var we=PL[de];if(we.chk&&!we.chk(w))break;we.pre&&(w=we.pre(w));var ke=w[K1](we.re);if(ke&&ke[Bn]>=we.len){we.m&&(W.method=_a(ke[we.m]||rH)),we.hdl?we.hdl(W,we,ke):we.fn&&(we.ln?(W[$0]=_a(ke[we.fn]||""),W[sb]=parseInt(_a(ke[we.ln]||""))||0):TS(W,ke[we.fn]||""));break}de++}}return LL(W)}s(Pce,"_extractStackFrame");function uH(w){var P,N=(P={},P[yy]=NL,P.level=w.level,P.method=w.method,P.assembly=w[Z5],P.fileName=w[$0],P.line=w[sb],P.sizeInBytes=0,P);return LL(N)}s(uH,"_stackFrameFromInterface");function LL(w){var P=Tce;return w&&(P+=w.method[Bn],P+=w.assembly[Bn],P+=w.fileName[Bn],P+=w.level.toString()[Bn],P+=w.line.toString()[Bn],w[nb]=P),w}s(LL,"_populateFrameSizeInBytes");function dH(w){return{level:w.level,method:w.method,assembly:w[Z5],fileName:w[$0],line:w[sb]}}s(dH,"_parsedFrameToInterface");var fH=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),Dce=function(){function w(P,N,W,de,we,ke,We,it,xt){this.aiDataContract={ver:1,metrics:1,properties:0};var hr=this;hr.ver=2;var Nn=new fH;Nn[eb]=de>0?de:void 0,Nn.max=isNaN(ke)||ke===null?void 0:ke,Nn.min=isNaN(we)||we===null?void 0:we,Nn[Lf]=ml(P,N)||am,Nn.value=W,Nn.stdDev=isNaN(We)||We===null?void 0:We,hr.metrics=[Nn],hr[cm]=hg(P,it),hr[rd]=Mf(P,xt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),yb="";function Bce(w,P){return P===void 0&&(P=!1),w==null?P:w.toString()[Zx]()==="true"}s(Bce,"stringToBoolOrDefault");function ML(w){(isNaN(w)||w<0)&&(w=0),w=Ex(w);var P=yb+w%1e3,N=yb+pu(w/1e3)%60,W=yb+pu(w/(1e3*60))%60,de=yb+pu(w/(1e3*60*60))%24,we=pu(w/(1e3*60*60*24));return P=P[Bn]===1?"00"+P:P[Bn]===2?"0"+P:P,N=N[Bn]<2?"0"+N:N,W=W[Bn]<2?"0"+W:W,de=de[Bn]<2?"0"+de:de,(we>0?we+".":yb)+de+":"+W+":"+N+"."+P}s(ML,"msToTimeSpan");function Nce(w,P){var N=null;return xn(w,function(W){if(W.identifier===P)return N=W,-1}),N}s(Nce,"getExtensionByName");function xy(w,P,N,W,de){return!de&&ie(w)&&(w==="Script error."||w==="Script error")}s(xy,"isCrossOriginError");var Lce=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var it=this;it.ver=2,it.id=ab(P,We),it.url=lm(P,W),it[Lf]=ml(P,N)||am,isNaN(de)||(it[AS]=ML(de)),it[cm]=hg(P,we),it[rd]=Mf(P,ke)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),Cb=function(){function w(P,N,W,de,we,ke,We,it,xt,hr,Nn,Jn){xt===void 0&&(xt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Er=this;Er.ver=2,Er.id=N,Er[AS]=ML(we),Er.success=ke,Er.resultCode=We+"",Er.type=ml(P,xt);var Nr=zq(P,W,it,de);Er.data=lm(P,de)||Nr.data,Er.target=ml(P,Nr.target),hr&&(Er.target="".concat(Er.target," | ").concat(hr)),Er[Lf]=ml(P,Nr[Lf]),Er[cm]=hg(P,Nn),Er[rd]=Mf(P,Jn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),FL=function(){function w(P,N,W,de,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var ke=this;ke.ver=2,N=N||am,ke[mS]=eP(P,N),ke[cm]=hg(P,de),ke[rd]=Mf(P,we),W&&(ke[gS]=W)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),wS=function(){function w(P,N,W,de,we,ke,We){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var it=this;it.ver=2,it.url=lm(P,W),it[Lf]=ml(P,N)||am,it[cm]=hg(P,we),it[rd]=Mf(P,ke),We&&(it.domProcessing=We.domProcessing,it[AS]=We[AS],it.networkConnect=We.networkConnect,it.perfTotal=We.perfTotal,it.receivedResponse=We.receivedResponse,it.sentRequest=We.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),Mce=function(){function w(P,N){this.aiDataContract={baseType:1,baseData:1},this.baseType=P,this.baseData=N}return s(w,"Data"),w}(),dP=em({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Fce=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(P,N,W,de){de===void 0&&(de=!1);var we;return W&&P[rb]&&P[rb][W]&&!$(P[rb][W][N])?we=P[rb][W][N]:we=P[N],$(we)?de:we},w}();function fm(w){var P="ai."+w+".";return function(N){return P+N}}s(fm,"_aiNameFunc");var vb=fm("application"),gc=fm("device"),fP=fm("location"),Eb=fm("operation"),pP=fm("session"),by=fm("user"),J1=fm("cloud"),SS=fm("internal"),Iy=function(w){sy(P,w);function P(){return w.call(this)||this}return s(P,"ContextTagKeys"),P}(oS({applicationVersion:vb("ver"),applicationBuild:vb("build"),applicationTypeId:vb("typeId"),applicationId:vb("applicationId"),applicationLayer:vb("layer"),deviceId:gc("id"),deviceIp:gc("ip"),deviceLanguage:gc("language"),deviceLocale:gc("locale"),deviceModel:gc("model"),deviceFriendlyName:gc("friendlyName"),deviceNetwork:gc("network"),deviceNetworkName:gc("networkName"),deviceOEMName:gc("oemName"),deviceOS:gc("os"),deviceOSVersion:gc("osVersion"),deviceRoleInstance:gc("roleInstance"),deviceRoleName:gc("roleName"),deviceScreenResolution:gc("screenResolution"),deviceType:gc("type"),deviceMachineName:gc("machineName"),deviceVMName:gc("vmName"),deviceBrowser:gc("browser"),deviceBrowserVersion:gc("browserVersion"),locationIp:fP("ip"),locationCountry:fP("country"),locationProvince:fP("province"),locationCity:fP("city"),operationId:Eb("id"),operationName:Eb("name"),operationParentId:Eb("parentId"),operationRootId:Eb("rootId"),operationSyntheticSource:Eb("syntheticSource"),operationCorrelationVector:Eb("correlationVector"),sessionId:pP("id"),sessionIsFirst:pP("isFirst"),sessionIsNew:pP("isNew"),userAccountAcquisitionDate:by("accountAcquisitionDate"),userAccountId:by("accountId"),userAgent:by("userAgent"),userId:by("id"),userStoreRegion:by("storeRegion"),userAuthUserId:by("authUserId"),userAnonymousUserAcquisitionDate:by("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:by("authUserAcquisitionDate"),cloudName:J1("name"),cloudRole:J1("role"),cloudRoleVer:J1("roleVer"),cloudRoleInstance:J1("roleInstance"),cloudEnvironment:J1("environment"),cloudLocation:J1("location"),cloudDeploymentUnit:J1("deploymentUnit"),internalNodeName:SS("nodeName"),internalSdkVersion:SS("sdkVersion"),internalAgentVersion:SS("agentVersion"),internalSnippet:SS("snippet"),internalSdkSrc:SS("sdkSrc")}));function OL(w,P,N,W,de,we){N=ml(W,N)||am,($(w)||$(P)||$(N))&&qe("Input doesn't contain all required fields");var ke="";w[yL]&&(ke=w[yL],delete w[yL]);var We={name:N,time:lg(new Date),iKey:ke,ext:we||{},tags:[],data:{},baseType:P,baseData:w};return $(de)||lt(de,function(it,xt){We.data[it]=xt}),We}s(OL,"createTelemetryItem");var QL=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=OL,w}(),Oce={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Qce=new Iy;function pH(w){var P=null;if(ae(Event))P=new Event(w);else{var N=ee();N&&N.createEvent&&(P=N.createEvent("Event"),P.initEvent(w,!0,!0))}return P}s(pH,"createDomEvent");function UL(w,P){Mq(w,null,null,P)}s(UL,"_disableEvents");function mH(w){var P=ee(),N=St(),W=!1,de=[],we=1;N&&!$(N.onLine)&&!N.onLine&&(we=2);var ke=0,We=Jn(),it=pce(dg("OfflineListener"),w);try{if(hr(_e())&&(W=!0),P){var xt=P.body||P;xt.ononline&&hr(xt)&&(W=!0)}}catch{W=!1}function hr(Zi){var Mc=!1;return Zi&&(Mc=gL(Zi,"online",Vn,it),Mc&&gL(Zi,"offline",Ln,it)),Mc}s(hr,"_enableEvents");function Nn(){return We}s(Nn,"_isOnline");function Jn(){return!(ke===2||we===2)}s(Jn,"calCurrentState");function Er(){var Zi=Jn();We!==Zi&&(We=Zi,xn(de,function(Mc){var bb={isOnline:We,rState:we,uState:ke};try{Mc(bb)}catch{}}))}s(Er,"listnerNoticeCheck");function Nr(Zi){ke=Zi,Er()}s(Nr,"setOnlineState");function Vn(){we=1,Er()}s(Vn,"_setOnline");function Ln(){we=2,Er()}s(Ln,"_setOffline");function Pi(){var Zi=_e();if(Zi&&W){if(UL(Zi,it),P){var Mc=P.body||P;J(Mc.ononline)||UL(Mc,it)}W=!1}}s(Pi,"_unload");function Bo(Zi){return de.push(Zi),{rm:s(function(){var Mc=de.indexOf(Zi);if(Mc>-1)return de.splice(Mc,1)},"rm")}}return s(Bo,"addListener"),{isOnline:Nn,isListening:s(function(){return W},"isListening"),unload:Pi,addListener:Bo,setOnlineState:Nr}}s(mH,"createOfflineListener");var Uce="AppInsightsPropertiesPlugin",qL="AppInsightsChannelPlugin",xb="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=xb,t.BreezeChannelIdentifier=qL,t.ConfigurationManager=Fce,t.ConnectionStringParser=nP,t.ContextTagKeys=Iy,t.CtxTagKeys=Qce,t.DEFAULT_BREEZE_ENDPOINT=AL,t.DEFAULT_BREEZE_PATH=pS,t.Data=Mce,t.DisabledPropertyName=z5,t.DistributedTracingModes=Cce,t.Envelope=iP,t.Event=Ice,t.EventPersistence=yS,t.Exception=dm,t.Extensions=Oce,t.HttpMethod=Oq,t.Metric=Dce,t.PageView=Lce,t.PageViewPerformance=wS,t.ProcessLegacy=Y5,t.PropertiesPluginIdentifier=Uce,t.RemoteDependencyData=Cb,t.RequestHeaders=Qq,t.SampleRate=Fq,t.SeverityLevel=dP,t.TelemetryItemCreator=QL,t.ThrottleMgr=bce,t.Trace=FL,t.correlationIdCanIncludeCorrelationHeader=Cy,t.correlationIdGetCorrelationContext=Gq,t.correlationIdGetCorrelationContextValue=Vq,t.correlationIdGetPrefix=_L,t.correlationIdSetPrefix=SL,t.createDistributedTraceContextFromTrace=RL,t.createDomEvent=pH,t.createOfflineListener=mH,t.createTelemetryItem=OL,t.createTraceParent=zx,t.dataSanitizeException=IL,t.dataSanitizeId=ab,t.dataSanitizeInput=TL,t.dataSanitizeKey=bL,t.dataSanitizeKeyAndAddUniqueness=xL,t.dataSanitizeMeasurements=Mf,t.dataSanitizeMessage=eP,t.dataSanitizeProperties=hg,t.dataSanitizeString=ml,t.dataSanitizeUrl=lm,t.dateTimeUtilsDuration=yce,t.dateTimeUtilsNow=Ace,t.dsPadNumber=Uq,t.findAllScripts=pL,t.findW3cTraceParent=fL,t.formatTraceParent=V1,t.getExtensionByName=Nce,t.isBeaconApiSupported=uy,t.isCrossOriginError=xy,t.isInternalApplicationInsightsEndpoint=jq,t.isSampledFlag=$5,t.isValidSpanId=Kx,t.isValidTraceId=Yx,t.isValidTraceParent=Jx,t.msToTimeSpan=ML,t.parseConnectionString=rP,t.parseTraceParent=Nf,t.strNotSpecified=am,t.stringToBoolOrDefault=Bce,t.urlGetAbsoluteUrl=hce,t.urlGetCompleteUrl=Hq,t.urlGetPathName=gce,t.urlParseFullHost=gg,t.urlParseHost=$q,t.urlParseUrl=cb,t.utlCanUseLocalStorage=tP,t.utlCanUseSessionStorage=Ag,t.utlDisableStorage=CS,t.utlEnableStorage=vce,t.utlGetLocalStorage=Kq,t.utlGetSessionStorage=Xq,t.utlGetSessionStorageKeys=mb,t.utlRemoveSessionStorage=Zq,t.utlRemoveStorage=Ff,t.utlSetLocalStorage=Jq,t.utlSetSessionStorage=Ece,t.utlSetStoragePrefix=vS})});var NLe=H((vj,BLe)=>{f();(function(t,e){typeof vj=="object"&&typeof BLe<"u"?e(vj):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(vj,function(t){"use strict";function e(v,b){return v||b}s(e,"_pureAssign");function r(v,b){return v[b]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",A="name",y="call",x="toString",I=e(Object),S=r(I,l),R=e(String),B=r(R,l),M=e(Math),O=e(Array),K=r(O,l),V=r(K,"slice");function z(v,b){try{return{v:v.apply(this,b)}}catch(T){return{e:T}}}s(z,"safe");function Q(v,b){var T=z(v);return T.e?b:T.v}s(Q,"safeGet");var U;function Z(v){return function(b){return typeof b===v}}s(Z,"_createIs");function J(v){var b="[object "+v+"]";return function(T){return!!(T&&j(T)===b)}}s(J,"_createObjIs");function j(v){return S[x].call(v)}s(j,"objToString");function $(v){return typeof v===d||v===d}s($,"isUndefined");function X(v){return!te(v)}s(X,"isStrictUndefined");function ie(v){return v===i||$(v)}s(ie,"isNullOrUndefined");function ae(v){return v===i||!te(v)}s(ae,"isStrictNullOrUndefined");function te(v){return!!v||v!==n}s(te,"isDefined");function pe(v){return!U&&(U=["string","number","boolean",d,"symbol","bigint"]),v!==c&&U.indexOf(v)!==-1}s(pe,"isPrimitiveType");var Ae=Z("string"),Oe=Z(a);function Te(v){return!v&&ie(v)?!1:!!v&&typeof v===c}s(Te,"isObject");var Je=r(O,"isArray"),Me=J("Date"),lt=Z("number"),_t=Z("boolean"),Et=J("Error");function ht(v){return!!(v&&v.then&&Oe(v.then))}s(ht,"isPromiseLike");function ue(v){return!(!v||Q(function(){return!(v&&0+v)},!v))}s(ue,"isTruthy");var Ue=r(I,"getOwnPropertyDescriptor");function ye(v,b){return!!v&&S.hasOwnProperty[y](v,b)}s(ye,"objHasOwnProperty");var $e=e(r(I,"hasOwn"),se);function se(v,b){return ye(v,b)||!!Ue(v,b)}s(se,"polyObjHasOwn");function le(v,b,T){if(v&&Te(v)){for(var k in v)if($e(v,k)&&b[y](T||v,k,v[k])===-1)break}}s(le,"objForEachKey");var qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Be(v){var b={};if(b[qe.c]=!0,b[qe.e]=!0,v.l){b.get=function(){return v.l.v};var T=Ue(v.l,"v");T&&T.set&&(b.set=function(k){v.l.v=k})}return le(v,function(k,L){b[qe[k]]=X(L)?b[qe[k]]:L}),b}s(Be,"_createProp");var xe=r(I,"defineProperty");function je(v,b,T){return xe(v,b,Be(T))}s(je,"objDefine");function tt(v,b,T,k,L){var q={};return le(v,function(G,ce){pt(q,G,b?ce:G),pt(q,ce,T?ce:G)}),k?k(q):q}s(tt,"_createKeyValueMap");function pt(v,b,T,k){xe(v,b,{value:T,enumerable:!0,writable:!1})}s(pt,"_assignMapValue");var Mt=e(R),Kt="[object Error]";function Ot(v,b){var T=o,k=S[x][y](v);k===Kt&&(v={stack:Mt(v.stack),message:Mt(v.message),name:Mt(v.name)});try{T=JSON.stringify(v,i,b?typeof b=="number"?b:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Mt(v)}catch(L){T=" - "+Ot(L,b)}return k+": "+T}s(Ot,"dumpObj");function Wr(v){throw new Error(v)}s(Wr,"throwError");function Rr(v){throw new TypeError(v)}s(Rr,"throwTypeError");var sn=r(I,"freeze");function ve(v){return v}s(ve,"_doNothing");function Ge(v){return v[u]||i}s(Ge,"_getProto");var ft=r(I,"assign"),Tt=r(I,"keys");function ir(v){return sn&&le(v,function(b,T){(Je(T)||Te(T))&&ir(T)}),Xt(v)}s(ir,"objDeepFreeze");var Xt=e(sn,ve),br=e(r(I,"getPrototypeOf"),Ge);function lr(v){return tt(v,1,0,Xt)}s(lr,"createEnum");function tr(v){return tt(v,0,0,Xt)}s(tr,"createEnumKeyMap");function cr(v){var b={};return le(v,function(T,k){pt(b,T,k[1]),pt(b,k[0],k[1])}),Xt(b)}s(cr,"createSimpleMap");function rr(v){return cr(v)}s(rr,"createTypeMap");var Dr=tr({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),jr="__tsUtils$gblCfg",rn;function An(){var v;return typeof globalThis!==d&&(v=globalThis),!v&&typeof self!==d&&(v=self),!v&&typeof window!==d&&(v=window),!v&&typeof global!==d&&(v=global),v}s(An,"_getGlobalValue");function Zn(){if(!rn){var v=z(An).v||{};rn=v[jr]=v[jr]||{}}return rn}s(Zn,"_getGlobalConfig");var Tn=Kn;function Kn(v,b,T){var k=b?b[v]:i;return function(L){var q=(L?L[v]:i)||k;if(q||T){var G=arguments;return(q||T).apply(L,q?V[y](G,1):G)}Rr('"'+Mt(v)+'" not defined for '+Ot(L))}}s(Kn,"_unwrapFunctionWithPoly");function nn(v){return function(b){return b[v]}}s(nn,"_unwrapProp");var Gn=r(M,"min"),Pe=r(M,"max"),Y=Tn("slice",B),Ce=Tn("substring",B),Ie=Kn("substr",B,F);function F(v,b,T){return ie(v)&&Rr("Invalid "+Ot(v)),T<0?o:(b=b||0,b<0&&(b=Pe(b+v[g],0)),$(T)?Y(v,b):Y(v,b,b+T))}s(F,"polyStrSubstr");function D(v,b){return Ce(v,0,b)}s(D,"strLeft");var ee="_urid",ge;function _e(){if(!ge){var v=Zn();ge=v.gblSym=v.gblSym||{k:{},s:{}}}return ge}s(_e,"_globalSymbolRegistry");var ut;function St(v){var b={description:Mt(v),toString:s(function(){return m+"("+v+")"},"toString")};return b[h]=!0,b}s(St,"polyNewSymbol");function zt(v){var b=_e();if(!$e(b.k,v)){var T=St(v),k=Tt(b.s).length;T[ee]=function(){return k+"_"+T[x]()},b.k[v]=T,b.s[T[ee]()]=Mt(v)}return b.k[v]}s(zt,"polySymbolFor");function Zt(v){!ut&&(ut={});var b,T=Dr[v];return T&&(b=ut[T]=ut[T]||St(m+"."+T)),b}s(Zt,"polyGetKnownSymbol");var Yt;function bt(){Yt=Zn()}s(bt,"_initTestHooks");function yr(v){var b={};return!Yt&&bt(),b.b=Yt.lzy,xe(b,"v",{configurable:!0,get:s(function(){var T=v();return Yt.lzy||xe(b,"v",{value:T}),b.b=Yt.lzy,T},"get")}),b}s(yr,"getLazy");function si(v){return xe({toJSON:s(function(){return v},"toJSON")},"v",{value:v})}s(si,"createCachedValue");var Ji="window",xn;function mo(v,b){var T;return function(){return!Yt&&bt(),(!T||Yt.lzy)&&(T=si(z(v,b).v)),T.v}}s(mo,"_getGlobalInstFn");function hi(v){return!Yt&&bt(),(!xn||v===!1||Yt.lzy)&&(xn=si(z(An).v||i)),xn.v}s(hi,"getGlobal");function Vo(v,b){var T;if(!xn||b===!1?T=hi(b):T=xn.v,T&&T[v])return T[v];if(v===Ji)try{return window}catch{}return i}s(Vo,"getInst");function ua(){return!!dc()}s(ua,"hasDocument");var dc=mo(Vo,["document"]);function Do(){return!!Qs()}s(Do,"hasWindow");var Qs=mo(Vo,[Ji]);function Xu(){return!!fc()}s(Xu,"hasNavigator");var fc=mo(Vo,["navigator"]),eg=mo(function(){return!!z(function(){return process&&(process.versions||{}).node}).v}),fl,tg;function rg(){return fl=si(z(Vo,[m]).v),fl}s(rg,"_initSymbol");function Cx(v){var b=(Yt.lzy?0:fl)||rg();return b.v?b.v[v]:n}s(Cx,"_getSymbolKey");function _a(){return!!pu()}s(_a,"hasSymbol");function pu(){return!Yt&&bt(),((Yt.lzy?0:fl)||rg()).v}s(pu,"getSymbol");function mu(v,b){var T=Dr[v];!Yt&&bt();var k=(Yt.lzy?0:fl)||rg();return k.v?k.v[T||v]:b?n:Zt(v)}s(mu,"getKnownSymbol");function Zu(v,b){!Yt&&bt();var T=(Yt.lzy?0:fl)||rg();return T.v?T.v(v):b?i:St(v)}s(Zu,"newSymbol");function ng(v){return!Yt&&bt(),tg=(Yt.lzy?0:tg)||si(z(Cx,["for"]).v),(tg.v||zt)(v)}s(ng,"symbolFor");function Bl(v){return!!v&&Oe(v.next)}s(Bl,"isIterator");function vx(v){return!ae(v)&&Oe(v[mu(3)])}s(vx,"isIterable");var B1;function Ex(v,b,T){if(v&&(Bl(v)||(!B1&&(B1=si(mu(3))),v=v[B1.v]?v[B1.v]():i),Bl(v))){var k=n,L=n;try{for(var q=0;!(L=v.next()).done&&b[y](T||v,L.value,q,v)!==-1;)q++}catch(G){k={e:G},v.throw&&(L=i,v.throw(k))}finally{try{L&&!L.done&&v.return&&v.return(L)}finally{if(k)throw k.e}}}}s(Ex,"iterForOf");function _f(v,b,T){return v.apply(b,T)}s(_f,"fnApply");function Rf(v,b){return!$(b)&&v&&(Je(b)?_f(v.push,v,b):Bl(b)||vx(b)?Ex(b,function(T){v.push(T)}):v.push(b)),v}s(Rf,"arrAppend");function Gr(v,b,T){if(v)for(var k=v[g]>>>0,L=0;L<k&&!(L in v&&b[y](T||v,v[L],L,v)===-1);L++);}s(Gr,"arrForEach");var pc=Tn("indexOf",K),ig=Tn("map",K);function og(v,b,T){return((v?v.slice:i)||V).apply(v,V[y](arguments,1))}s(og,"arrSlice");var $8=Tn("reduce",K),Lc=e(r(I,"create"),ty);function ty(v){if(!v)return{};var b=typeof v;b!==c&&b!==a&&Rr("Prototype must be an Object or function: "+Ot(v));function T(){}return s(T,"tempFunc"),T[l]=v,new T}s(ty,"polyObjCreate");var N1;function em(v,b){var T=I.setPrototypeOf||function(k,L){var q;!N1&&(N1=si((q={},q[u]=[],q instanceof Array))),N1.v?k[u]=L:le(L,function(G,ce){return k[G]=ce})};return T(v,b)}s(em,"objSetPrototypeOf");function ry(v,b,T){z(je,[b,A,{v,c:!0,e:!1}]),b=em(b,T);function k(){this[p]=b,z(je,[this,A,{v,c:!0,e:!1}])}return s(k,"__"),b[l]=T===i?Lc(T):(k[l]=T[l],new k),b}s(ry,"_createCustomError");function xx(v,b){b&&(v[A]=b)}s(xx,"_setName");function As(v,b,T){var k=T||Error,L=k[l][A],q=Error.captureStackTrace;return ry(v,function(){var G=this,ce=arguments;try{z(xx,[k,v]);var fe=_f(k,G,V[y](ce))||G;if(fe!==G){var Ee=br(G);Ee!==br(fe)&&em(fe,Ee)}return q&&q(fe,G[p]),b&&b(fe,ce),fe}finally{z(xx,[k,L])}},k)}s(As,"createCustomError");function ed(){return(Date.now||ny)()}s(ed,"utcNow");function ny(){return new Date().getTime()}s(ny,"polyUtcNow");function m5(v){return s(function(T){return ie(T)&&Rr("strTrim called ["+Ot(T)+"]"),T&&T.replace&&(T=T.replace(v,o)),T},"_doTrim")}s(m5,"_createTrimFn");var W8=m5(/^\s+|(?=\s)\s+$/g),Xi=Kn("trim",B,W8),iy=r(M,"floor"),sg,h5,bx;function td(v){if(!v||typeof v!==c)return!1;bx||(bx=Do()?Qs():!0);var b=!1;if(v!==bx){h5||(sg=Function[l][x],h5=sg[y](I));try{var T=br(v);b=!T,b||(ye(T,p)&&(T=T[p]),b=!!(T&&typeof T===a&&sg[y](T)===h5))}catch{}}return b}s(td,"isPlainObject");function j8(v){return v.value&&g5(v),!0}s(j8,"_defaultDeepCopyHandler");var G8=[Ix,g5,hq,oy];function V8(v,b,T,k){var L;return Gr(v,function(q){if(q.k===b)return L=q,-1}),L||(L={k:b,v:b},v.push(L),k(L)),L.v}s(V8,"_getSetVisited");function L1(v,b,T,k){var L=T.handler,q=T.path?k?T.path.concat(k):T.path:[],G={handler:T.handler,src:T.src,path:q},ce=typeof b,fe=!1,Ee=b===i;Ee||(b&&ce===c?fe=td(b):Ee=pe(ce));var Re={type:ce,isPrim:Ee,isPlain:fe,value:b,result:b,path:q,origin:T.src,copy:s(function(Qe,Ze){return L1(v,Qe,Ze?G:T,Ze)},"copy"),copyTo:s(function(Qe,Ze){return z8(v,Qe,Ze,G)},"copyTo")};return Re.isPrim?L&&L[y](T,Re)?Re.result:b:V8(v,b,q,function(Qe){je(Re,"result",{g:s(function(){return Qe.v},"g"),s:s(function(Ye){Qe.v=Ye},"s")});for(var Ze=0,He=L;!(He||(Ze<G8.length?G8[Ze++]:j8))[y](T,Re);)He=i})}s(L1,"_deepCopy");function z8(v,b,T,k){if(!ie(T))for(var L in T)b[L]=L1(v,T[L],k,L);return b}s(z8,"_copyProps");function mq(v,b,T){var k={handler:T,src:b,path:[]};return z8([],v,b,k)}s(mq,"objCopyProps");function Y8(v,b){var T={handler:b,src:v};return L1([],v,T)}s(Y8,"objDeepCopy");function Ix(v){var b=v.value;if(Je(b)){var T=v.result=[];return T.length=b.length,v.copyTo(T,b),!0}return!1}s(Ix,"arrayDeepCopyHandler");function oy(v){var b=v.value;return Me(b)?(v.result=new Date(b.getTime()),!0):!1}s(oy,"dateDeepCopyHandler");function hq(v){return v.type===a}s(hq,"functionDeepCopyHandler");function g5(v){var b=v.value;if(b&&v.isPlain){var T=v.result={};return v.copyTo(T,b),!0}return!1}s(g5,"plainObjDeepCopyHandler");function K8(v,b){return Gr(b,function(T){mq(v,T)}),v}s(K8,"_doExtend");function A5(v,b,T,k,L,q,G){return K8(Y8(v)||{},V[y](arguments))}s(A5,"deepExtend");var Kae=nn(g),Jae=r(M,"round"),gq=Kn("endsWith",B,Xae);function Xae(v,b,T){Ae(v)||Rr("'"+Ot(v)+"' is not a string");var k=Ae(b)?b:Mt(b),L=!$(T)&&T<v[g]?T:v[g];return Ce(v,L-k[g],L)===k}s(Xae,"polyStrEndsWith");var ag=Tn("indexOf",B),y5="ref",J8="unref",C5="hasRef",Zae="enabled";function v5(v,b,T){var k=!0,L=v?b(i):i,q;function G(){return k=!1,L&&L[J8]&&L[J8](),q}s(G,"_unref");function ce(){L&&T(L),L=i}s(ce,"_cancel");function fe(){return L=b(L),k||G(),q}s(fe,"_refresh");function Ee(Re){!Re&&L&&ce(),Re&&!L&&fe()}return s(Ee,"_setEnabled"),q={cancel:ce,refresh:fe},q[C5]=function(){return L&&L[C5]?L[C5]():k},q[y5]=function(){return k=!0,L&&L[y5]&&L[y5](),q},q[J8]=G,q=xe(q,Zae,{get:s(function(){return!!L},"get"),set:Ee}),{h:q,dn:s(function(){L=i},"dn")}}s(v5,"_createTimerHandler");function E5(v,b,T){var k=Je(b),L=k?b.length:0,q=(L>0?b[0]:k?n:b)||setTimeout,G=(L>1?b[1]:n)||clearTimeout,ce=T[0];T[0]=function(){fe.dn(),_f(ce,n,V[y](arguments))};var fe=v5(v,function(Ee){if(Ee){if(Ee.refresh)return Ee.refresh(),Ee;_f(G,n,[Ee])}return _f(q,n,T)},function(Ee){_f(G,n,[Ee])});return fe.h}s(E5,"_createTimeoutWith");function sy(v,b){return E5(!0,n,V[y](arguments))}s(sy,"scheduleTimeout");function x5(v,b){return E5(!1,n,V[y](arguments))}s(x5,"createTimeout");var M1,kf="constructor",Pf="prototype",F1="function",Tx="_dynInstFuncs",ay="_isDynProxy",wx="_dynClass",X8="_dynCls$",O1="_dynInstChk",Sx=O1,Z8="_dfOpts",b5="_unknown_",_x="__proto__",tS="_dyn"+_x,I5="__dynProto$Gbl",Rx="_dynInstProto",kx="useBaseInst",rS="setInstFuncs",Q1=Object,Px=Q1.getPrototypeOf,eL=Q1.getOwnPropertyNames,T5=hi(),Dx=T5[I5]||(T5[I5]={o:(M1={},M1[rS]=!0,M1[kx]=!0,M1),n:1e3});function Bx(v){return v&&(v===Q1[Pf]||v===Array[Pf])}s(Bx,"_isObjectOrArrayPrototype");function cg(v){return Bx(v)||v===Function[Pf]}s(cg,"_isObjectArrayOrFunctionPrototype");function tm(v){var b;if(v){if(Px)return Px(v);var T=v[_x]||v[Pf]||(v[kf]?v[kf][Pf]:null);b=v[tS]||T,ye(v,tS)||(delete v[Rx],b=v[tS]=v[Rx]||v[tS],v[Rx]=T)}return b}s(tm,"_getObjProto");function Nx(v,b){var T=[];if(eL)T=eL(v);else for(var k in v)typeof k=="string"&&ye(v,k)&&T.push(k);if(T&&T.length>0)for(var L=0;L<T.length;L++)b(T[L])}s(Nx,"_forEachProp");function Lx(v,b,T){return b!==kf&&typeof v[b]===F1&&(T||ye(v,b))&&b!==_x&&b!==Pf}s(Lx,"_isDynamicCandidate");function w5(v){Rr("DynamicProto: "+v)}s(w5,"_throwTypeError");function tL(v){var b=Lc(null);return Nx(v,function(T){!b[T]&&Lx(v,T,!1)&&(b[T]=v[T])}),b}s(tL,"_getInstanceFuncs");function rL(v,b){for(var T=v.length-1;T>=0;T--)if(v[T]===b)return!0;return!1}s(rL,"_hasVisited");function ece(v,b,T,k){function L(fe,Ee,Re){var Qe=Ee[Re];if(Qe[ay]&&k){var Ze=fe[Tx]||{};Ze[Sx]!==!1&&(Qe=(Ze[Ee[wx]]||{})[Re]||Qe)}return function(){return Qe.apply(fe,arguments)}}s(L,"_instFuncProxy");var q=Lc(null);Nx(T,function(fe){q[fe]=L(b,T,fe)});for(var G=tm(v),ce=[];G&&!cg(G)&&!rL(ce,G);)Nx(G,function(fe){!q[fe]&&Lx(G,fe,!Px)&&(q[fe]=L(b,G,fe))}),ce.push(G),G=tm(G);return q}s(ece,"_getBaseFuncs");function tce(v,b,T,k){var L=null;if(v&&ye(T,wx)){var q=v[Tx]||Lc(null);if(L=(q[T[wx]]||Lc(null))[b],L||w5("Missing ["+b+"] "+F1),!L[O1]&&q[Sx]!==!1){for(var G=!ye(v,b),ce=tm(v),fe=[];G&&ce&&!cg(ce)&&!rL(fe,ce);){var Ee=ce[b];if(Ee){G=Ee===k;break}fe.push(ce),ce=tm(ce)}try{G&&(v[b]=L),L[O1]=1}catch{q[Sx]=!1}}}return L}s(tce,"_getInstFunc");function rce(v,b,T){var k=b[v];return k===T&&(k=tm(b)[v]),typeof k!==F1&&w5("["+v+"] is not a "+F1),k}s(rce,"_getProtoFunc");function nce(v,b,T,k,L){function q(fe,Ee){var Re=s(function(){var Qe=tce(this,Ee,fe,Re)||rce(Ee,fe,Re);return Qe.apply(this,arguments)},"dynProtoProxy");return Re[ay]=1,Re}if(s(q,"_createDynamicPrototype"),!Bx(v)){var G=T[Tx]=T[Tx]||Lc(null);if(!Bx(G)){var ce=G[b]=G[b]||Lc(null);G[Sx]!==!1&&(G[Sx]=!!L),Bx(ce)||Nx(T,function(fe){Lx(T,fe,!1)&&T[fe]!==k[fe]&&(ce[fe]=T[fe],delete T[fe],(!ye(v,fe)||v[fe]&&!v[fe][ay])&&(v[fe]=q(v,fe)))})}}}s(nce,"_populatePrototype");function nL(v,b){if(Px){for(var T=[],k=tm(b);k&&!cg(k)&&!rL(T,k);){if(k===v)return!0;T.push(k),k=tm(k)}return!1}return!0}s(nL,"_checkPrototype");function nS(v,b){return ye(v,Pf)?v.name||b||b5:((v||{})[kf]||{}).name||b||b5}s(nS,"_getObjName");function hu(v,b,T,k){ye(v,Pf)||w5("theClass is an invalid class definition.");var L=v[Pf];nL(L,b)||w5("["+nS(v)+"] not in hierarchy of ["+nS(b)+"]");var q=null;ye(L,wx)?q=L[wx]:(q=X8+nS(v,"_")+"$"+Dx.n,Dx.n++,L[wx]=q);var G=hu[Z8],ce=!!G[kx];ce&&k&&k[kx]!==void 0&&(ce=!!k[kx]);var fe=tL(b),Ee=ece(L,b,fe,ce);T(b,Ee);var Re=!!Px&&!!G[rS];Re&&k&&(Re=!!k[rS]),nce(L,q,b,fe,Re!==!1)}s(hu,"dynamicProto"),hu[Z8]=Dx.o;var Ra="function",Aq="object",yq="undefined",iS="prototype",iL=Object,oL=iL[iS];(hi()||{}).Symbol,(hi()||{}).Reflect;var S5="hasOwnProperty",Cq=s(function(v){for(var b,T=1,k=arguments.length;T<k;T++){b=arguments[T];for(var L in b)oL[S5].call(b,L)&&(v[L]=b[L])}return v},"__objAssignFnImpl"),lg=ft||Cq,cy=s(function(v,b){return cy=iL.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,k){T.__proto__=k}||function(T,k){for(var L in k)k[S5](L)&&(T[L]=k[L])},cy(v,b)},"extendStaticsFn");function oS(v,b){typeof b!==Ra&&b!==null&&Rr("Class extends value "+String(b)+" is not a constructor or null"),cy(v,b);function T(){this.constructor=v}s(T,"__"),v[iS]=b===null?Lc(b):(T[iS]=b[iS],new T)}s(oS,"__extendsFn");function vq(v,b){for(var T=0,k=b.length,L=v.length;T<k;T++,L++)v[L]=b[T];return v}s(vq,"__spreadArrayFn");var _5=lr,ice=rr,ly=_5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Mx="toLowerCase",ai="length",Fx="warnToConsole",U1="throwInternal",ug="watch",R5="apply",Co="push",Ox="splice",mc="logger",Qx="cancel",sS="initialize",uy="identifier",aS="removeNotificationListener",k5="addNotificationListener",rm="isInitialized",Ux="value",U0="getNotifyMgr",qx="getPlugin",dy="name",Nl="processNext",Hx="getProcessTelContext",nm="enabled",Eq="stopPollingInternalLogs",q1="unload",P5="onComplete",$x="version",xq="loggingLevelConsole",H1="createNew",im="teardown",D5="messageId",$1="message",om="diagLog",B5="_doTeardown",dg="update",sm="getNext",fy="setNextPlugin",N5="userAgent",py="split",my="replace",gu="type",sL="evtName",cS="status",aL="getAllResponseHeaders",cL="isChildEvt",Wx="data",hy="getCtx",q0="setCtx",bq="itemsReceived",fg="urlString",lL="headers",pg="timeout",Iq="traceFlags",jx;function uL(v,b){jx||(jx=As("AggregationError",function(k,L){L[ai]>1&&(k.errors=L[1])}));var T=v||"One or more errors occurred.";throw Gr(b,function(k,L){T+=`
`.concat(L," > ").concat(Ot(k))}),new jx(T,b||[])}s(uL,"throwAggregationError");var W1="Promise",j1="rejected";function Df(v,b){return Tq(v,function(T){return b?b({status:"fulfilled",rejected:!1,value:T}):T},function(T){return b?b({status:j1,rejected:!0,reason:T}):T})}s(Df,"doAwaitResponse");function Tq(v,b,T,k){var L=v;try{if(ht(v))(b||T)&&(L=v.then(b,T));else try{b&&(L=b(v))}catch(q){if(T)L=T(q);else throw q}}finally{k&&oce(L,k)}return L}s(Tq,"doAwait");function oce(v,b){var T=v;return b&&(ht(v)?v.finally?T=v.finally(b):T=v.then(function(k){return b(),k},function(k){throw b(),k}):b()),T}s(oce,"doFinally");var wq=["pending","resolving","resolved",j1],Sq="dispatchEvent",lS;function _q(v){var b;return v&&v.createEvent&&(b=v.createEvent("Event")),!!b&&b.initEvent}s(_q,"_hasInitEventFn");function L5(v,b,T,k){var L=dc();!lS&&(lS=si(!!z(_q,[L]).v));var q=lS.v?L.createEvent("Event"):k?new Event(b):{};if(T&&T(q),lS.v&&q.initEvent(b,!1,!0),q&&v[Sq])v[Sq](q);else{var G=v["on"+b];if(G)G(q);else{var ce=Vo("console");ce&&(ce.error||ce.log)(b,Ot(q))}}}s(L5,"emitEvent");var Rq="unhandledRejection",sce=Rq.toLowerCase(),Gx=10,M5;function kq(v){return Oe(v)?v.toString():Ot(v)}s(kq,"dumpFnObj");function Pq(v,b,T){var k=og(arguments,3),L=0,q=!1,G,ce=[],fe=!1,Ee=null,Re;function Qe(or,wr){try{fe=!0,Ee&&Ee.cancel(),Ee=null;var ei=v(function(Fi,Oi){ce.push(function(){try{var qo=L===2?or:wr,bn=$(qo)?G:Oe(qo)?qo(G):qo;ht(bn)?bn.then(Fi,Oi):qo?Fi(bn):L===3?Oi(bn):Fi(bn)}catch(Zr){Oi(Zr)}}),q&&gt()},k);return ei}finally{}}s(Qe,"_then");function Ze(or){return Qe(void 0,or)}s(Ze,"_catch");function He(or){var wr=or,ei=or;return Oe(or)&&(wr=s(function(Fi){return or&&or(),Fi},"thenFinally"),ei=s(function(Fi){throw or&&or(),Fi},"catchFinally")),Qe(wr,ei)}s(He,"_finally");function Ye(){return wq[L]}s(Ye,"_strState");function gt(){if(ce.length>0){var or=ce.slice();ce=[],fe=!0,Ee&&Ee.cancel(),Ee=null,b(or)}}s(gt,"_processQueue");function st(or,wr){return function(ei){if(L===wr){if(or===2&&ht(ei)){L=1,ei.then(st(2,1),st(3,1));return}L=or,q=!0,G=ei,gt(),!fe&&or===3&&!Ee&&(Ee=sy(wt,Gx))}}}s(st,"_createSettleIfFn");function wt(){if(!fe)if(fe=!0,eg())process.emit(Rq,G,Re);else{var or=Qs()||hi();!M5&&(M5=si(z(Vo,[W1+"RejectionEvent"]).v)),L5(or,sce,function(wr){return je(wr,"promise",{g:s(function(){return Re},"g")}),wr.reason=G,wr},!!M5.v)}}s(wt,"_notifyUnhandledRejection"),Re={then:Qe,catch:Ze,finally:He},xe(Re,"state",{get:Ye}),_a()&&(Re[mu(11)]="IPromise");function Ht(){return"IPromise "+Ye()+(q?" - "+kq(G):"")}return s(Ht,"_toString"),Re.toString=Ht,s(function(){Oe(T)||Rr(W1+": executor is not a function - "+kq(T));var wr=st(3,0);try{T.call(Re,st(2,0),wr)}catch(ei){wr(ei)}},"_initialize")(),Re}s(Pq,"_createPromise");function ace(v){return function(b){var T=og(arguments,1);return v(function(k,L){try{var q=[],G=1;Ex(b,function(ce,fe){ce&&(G++,Tq(ce,function(Ee){q[fe]=Ee,--G===0&&k(q)},L))}),G--,G===0&&k(q)}catch(ce){L(ce)}},T)}}s(ace,"_createAllPromise");function cce(v){return si(function(b){var T=og(arguments,1);return v(function(k,L){var q=[],G=1;function ce(fe,Ee){G++,Df(fe,function(Re){Re.rejected?q[Ee]={status:j1,reason:Re.reason}:q[Ee]={status:"fulfilled",value:Re.value},--G===0&&k(q)})}s(ce,"processItem");try{Je(b)?Gr(b,ce):vx(b)?Ex(b,ce):Rr("Input is not an iterable"),G--,G===0&&k(q)}catch(fe){L(fe)}},T)})}s(cce,"_createAllSettledPromise");function Dq(v){Gr(v,function(b){try{b()}catch{}})}s(Dq,"syncItemProcessor");function Bq(v){var b=lt(v)?v:0;return function(T){sy(function(){Dq(T)},b)}}s(Bq,"timeoutItemProcessor");function F5(v,b){return Pq(F5,Bq(b),v,b)}s(F5,"createAsyncPromise");var O5;function lce(v,b){!O5&&(O5=si(z(Vo,[W1]).v||null));var T=O5.v;if(!T)return F5(v);Oe(v)||Rr(W1+": executor is not a function - "+Ot(v));var k=0;function L(){return wq[k]}s(L,"_strState");var q=new T(function(G,ce){function fe(Re){k=2,G(Re)}s(fe,"_resolve");function Ee(Re){k=3,ce(Re)}s(Ee,"_reject"),v(fe,Ee)});return xe(q,"state",{get:L}),q}s(lce,"createNativePromise");var Q5;function U5(v){return Pq(U5,Dq,v)}s(U5,"createSyncPromise");function qd(v,b){return!Q5&&(Q5=cce(U5)),Q5.v(v,b)}s(qd,"createSyncAllSettledPromise");var q5;function Vx(v,b){return!q5&&(q5=si(lce)),q5.v.call(this,v,b)}s(Vx,"createPromise");var dL=ace(Vx),Bf=void 0,ki="",mg="channels",hc="core",H0="createPerfMgr",H5="disabled",G1="extensionConfig",zx="extensions",Nf="processTelemetry",Yx="priority",Kx="eventsSent",Jx="eventsDiscarded",$5="eventsSendRequest",V1="perfEvent",fL="offlineEventsStored",pL="offlineBatchSent",W5="offlineBatchDrop",uS="getPerfMgr",j5="domain",G5="path",Nq="Not dynamic - ",mL=/-([a-z])/g,uce=/([^\w\d_$])/g,dce=/^(\d+[\w\d_$])/;function V5(v){return!ie(v)}s(V5,"isNotNullOrUndefined");function Xx(v){var b=v;return b&&Ae(b)&&(b=b[my](mL,function(T,k){return k.toUpperCase()}),b=b[my](uce,"_"),b=b[my](dce,function(T,k){return"_"+k})),b}s(Xx,"normalizeJsName");function Ll(v,b){return v&&b?ag(v,b)!==-1:!1}s(Ll,"strContains");function dS(v){return v&&v.toISOString()||""}s(dS,"toISOString");function pl(v){return Et(v)?v[dy]:ki}s(pl,"getExceptionName");function gy(v,b,T,k,L){var q=T;return v&&(q=v[b],q!==T&&(!L||L(q))&&(!k||k(T))&&(q=T,v[b]=q)),q}s(gy,"setValue");function Lq(v,b,T){var k;return v?(k=v[b],!k&&ie(k)&&(k=$(T)?{}:T,v[b]=k)):k=$(T)?{}:T,k}s(Lq,"getSetValue");function fce(v,b){var T=null,k=null;return Oe(v)?T=v:k=v,function(){var L=arguments;if(T&&(k=T()),k)return k[b][R5](k,L)}}s(fce,"_createProxyFunction");function fS(v,b,T,k,L){v&&b&&T&&(L!==!1||$(v[b]))&&(v[b]=fce(T,k))}s(fS,"proxyFunctionAs");function hL(v,b,T,k){return v&&b&&Te(v)&&Je(T)&&Gr(T,function(L){Ae(L)&&fS(v,L,b,L,k)}),v}s(hL,"proxyFunctions");function pce(v){return function(){function b(){var T=this;v&&le(v,function(k,L){T[k]=L})}return s(b,"class_1"),b}()}s(pce,"createClassFromInterface");function gL(v){return v&&ft&&(v=iL(ft({},v))),v}s(gL,"optimizeObject");function Mq(v,b,T,k,L,q){var G=arguments,ce=G[0]||{},fe=G[ai],Ee=!1,Re=1;for(fe>0&&_t(ce)&&(Ee=ce,ce=G[Re]||{},Re++),Te(ce)||(ce={});Re<fe;Re++){var Qe=G[Re],Ze=Je(Qe),He=Te(Qe);for(var Ye in Qe){var gt=Ze&&Ye in Qe||He&&$e(Qe,Ye);if(gt){var st=Qe[Ye],wt=void 0;if(Ee&&st&&((wt=Je(st))||td(st))){var Ht=ce[Ye];wt?Je(Ht)||(Ht=[]):td(Ht)||(Ht={}),st=Mq(Ee,Ht,st)}st!==void 0&&(ce[Ye]=st)}}}return ce}s(Mq,"objExtend");function z5(v){try{return v.responseText}catch{}return null}s(z5,"getResponseText");function Fq(v,b){return v?"XDomainRequest,Response:"+z5(v)||"":b}s(Fq,"formatErrorMessageXdr");function Y5(v,b){return v?"XMLHttpRequest,Status:"+v[cS]+",Response:"+z5(v)||v.response||"":b}s(Y5,"formatErrorMessageXhr");function Oq(v,b){return b&&(lt(b)?v=[b].concat(v):Je(b)&&(v=b.concat(v))),v}s(Oq,"prependTransports");var AL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",pS="withCredentials",am="timeout";function yL(v,b,T,k,L,q){k===void 0&&(k=!1),L===void 0&&(L=!1);function G(fe,Ee,Re){try{fe[Ee]=Re}catch{}}s(G,"_wrapSetXhrProp");var ce=new XMLHttpRequest;return k&&G(ce,AL,k),T&&G(ce,pS,T),ce.open(v,b,!L),T&&G(ce,pS,T),!L&&q&&G(ce,am,q),ce}s(yL,"openXhr");function Qq(v){var b={};if(Ae(v)){var T=Xi(v)[py](/[\r\n]+/);Gr(T,function(k){if(k){var L=k.indexOf(": ");if(L!==-1){var q=Xi(k.substring(0,L))[Mx](),G=Xi(k.substring(L+1));b[q]=G}else b[Xi(k)]=1}})}return b}s(Qq,"convertAllHeadersToMap");function Ay(v,b,T){if(!v[T]&&b&&b.getResponseHeader){var k=b.getResponseHeader(T);k&&(v[T]=Xi(k))}return v}s(Ay,"_appendHeader");var Bn="kill-duration",Zx="kill-duration-seconds",z1="time-delta-millis";function Y1(v,b){var T={};return v[aL]?T=Qq(v[aL]()):b&&(T=Ay(T,v,z1),T=Ay(T,v,Bn),T=Ay(T,v,Zx)),T}s(Y1,"_getAllResponseHeaders");var CL="documentMode",mS="location",eb="console",K5="JSON",vL="crypto",J5="msCrypto",tb="msie",K1="trident/",EL="XMLHttpRequest",Lf=null,rb=null,cm=!1,rd=null,nb=null;function hS(v,b){var T=!1;if(v){try{if(T=b in v,!T){var k=v[iS];k&&(T=b in k)}}catch{}if(!T)try{var L=new v;T=!$(L[b])}catch{}}return T}s(hS,"_hasProperty");function ib(v){if(v&&cm){var b=Vo("__mockLocation");if(b)return b}return typeof location===Aq&&location?location:Vo(mS)}s(ib,"getLocation");function gS(){return typeof console!==yq?console:Vo(eb)}s(gS,"getConsole");function ob(){return!!(typeof JSON===Aq&&JSON||Vo(K5)!==null)}s(ob,"hasJSON");function Hd(){return ob()?JSON||Vo(K5):null}s(Hd,"getJSON");function X5(){return Vo(vL)}s(X5,"getCrypto");function Z5(){return Vo(J5)}s(Z5,"getMsCrypto");function $0(){var v=fc();if(v&&(v[N5]!==rb||Lf===null)){rb=v[N5];var b=(rb||ki)[Mx]();Lf=Ll(b,tb)||Ll(b,K1)}return Lf}s($0,"isIE");function sb(v){if(v===void 0&&(v=null),!v){var b=fc()||{};v=b?(b.userAgent||ki)[Mx]():ki}var T=(v||ki)[Mx]();if(Ll(T,tb)){var k=dc()||{};return Pe(parseInt(T[py](tb)[1]),k[CL]||0)}else if(Ll(T,K1)){var L=parseInt(T[py](K1)[1]);if(L)return L+4}return null}s(sb,"getIEVersion");function yy(v){return(nb===null||v===!1)&&(nb=Xu()&&!!fc().sendBeacon),nb}s(yy,"isBeaconsSupported");function AS(v){var b=!1;try{b=!!Vo("fetch");var T=Vo("Request");b&&v&&T&&(b=hS(T,"keepalive"))}catch{}return b}s(AS,"isFetchSupported");function xL(){return rd===null&&(rd=typeof XDomainRequest!==yq,rd&&bL()&&(rd=rd&&!hS(Vo(EL),"withCredentials"))),rd}s(xL,"useXDomainRequest");function bL(){var v=!1;try{var b=Vo(EL);v=!!b}catch{}return v}s(bL,"isXhrSupported");var ml=4294967296,lm=4294967295,eP=123456789,IL=987654321,hg=!1,Mf=eP,ab=IL;function TL(v){v<0&&(v>>>=0),Mf=eP+v&lm,ab=IL-v&lm,hg=!0}s(TL,"_mwcSeed");function Uq(){try{var v=ed()&2147483647;TL((Math.random()*ml^v)+v)}catch{}}s(Uq,"_autoSeedMwc");function wL(v){var b=0,T=X5()||Z5();return T&&T.getRandomValues&&(b=T.getRandomValues(new Uint32Array(1))[0]&lm),b===0&&$0()&&(hg||Uq(),b=qq()&lm),b===0&&(b=iy(ml*Math.random()|0)),v||(b>>>=0),b}s(wL,"random32");function qq(v){ab=36969*(ab&65535)+(ab>>16)&lm,Mf=18e3*(Mf&65535)+(Mf>>16)&lm;var b=(ab<<16)+(Mf&65535)>>>0&lm|0;return v||(b>>>=0),b}s(qq,"mwcRandom32");function mce(v){v===void 0&&(v=22);for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=wL()>>>0,k=0,L=ki;L[ai]<v;)k++,L+=b.charAt(T&63),T>>>=6,k===5&&(T=(wL()<<2&4294967295|T&3)>>>0,k=0);return L}s(mce,"newId");var cb="3.3.6",hce="."+mce(6),gce=0;function Hq(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}s(Hq,"_canAcceptData");function $q(v,b){var T=b[v.id];if(!T){T={};try{Hq(b)&&je(b,v.id,{e:!1,v:T})}catch{}}return T}s($q,"_getCache");function gg(v,b){return b===void 0&&(b=!1),Xx(v+gce+++(b?"."+cb:ki)+hce)}s(gg,"createUniqueNamespace");function Wq(v){var b={id:gg("_aiData-"+(v||ki)+"."+cb),accept:s(function(T){return Hq(T)},"accept"),get:s(function(T,k,L,q){var G=T[b.id];return G?G[Xx(k)]:(q&&(G=$q(b,T),G[Xx(k)]=L),L)},"get"),kill:s(function(T,k){if(T&&T[k])try{delete T[k]}catch{}},"kill")};return b}s(Wq,"createElmNodeData");function lb(v){return v&&Te(v)&&(v.isVal||v.fb||$e(v,"v")||$e(v,"mrg")||$e(v,"ref")||v.set)}s(lb,"_isConfigDefaults");function jq(v,b,T){var k,L=T.dfVal||te;if(b&&T.fb){var q=T.fb;Je(q)||(q=[q]);for(var G=0;G<q[ai];G++){var ce=q[G],fe=b[ce];if(L(fe)?k=fe:v&&(fe=v.cfg[ce],L(fe)&&(k=fe),v.set(v.cfg,Mt(ce),fe)),L(k))break}}return!L(k)&&L(T.v)&&(k=T.v),k}s(jq,"_getDefault");function SL(v,b,T){var k=T;if(T&&lb(T)&&(k=jq(v,b,T)),k){lb(k)&&(k=SL(v,b,k));var L;Je(k)?(L=[],L[ai]=k[ai]):td(k)&&(L={}),L&&(le(k,function(q,G){G&&lb(G)&&(G=SL(v,b,G)),L[q]=G}),k=L)}return k}s(SL,"_resolveDefaultValue");function _L(v,b,T,k){var L,q,G,ce=k,fe,Ee,Re,Qe;lb(ce)?(L=ce.isVal,q=ce.set,Re=ce.rdOnly,Qe=ce.blkVal,fe=ce.mrg,Ee=ce.ref,!Ee&&$(Ee)&&(Ee=!!fe),G=jq(v,b,ce)):G=k,Qe&&v.blkVal(b,T);var Ze,He=!0,Ye=b[T];(Ye||!ie(Ye))&&(Ze=Ye,He=!1,L&&Ze!==G&&!L(Ze)&&(Ze=G,He=!0),q&&(Ze=q(Ze,G,b),He=Ze===G)),He?G?Ze=SL(v,b,G):Ze=G:(td(Ze)||Je(G))&&fe&&G&&(td(G)||Je(G))&&le(G,function(gt,st){_L(v,Ze,gt,st)}),v.set(b,T,Ze),Ee&&v.ref(b,T),Re&&v.rdOnly(b,T)}s(_L,"_applyDefaultValue");var Cy=ng("[[ai_dynCfg_1]]"),Gq=ng("[[ai_blkDynCfg_1]]"),Vq=ng("[[ai_frcDynCfg_1]]");function zq(v){if(v){var b;if(Je(v)?(b=[],b[ai]=v[ai]):td(v)&&(b={}),b)return le(v,function(T,k){b[T]=zq(k)}),b}return v}s(zq,"_cfgDeepCopy");function Ace(v){if(v){var b=v[Cy]||v;if(b.cfg&&(b.cfg===v||b.cfg[Cy]===b))return b}return null}s(Ace,"getDynamicConfigHandler");function yce(v){if(v&&(td(v)||Je(v)))try{v[Gq]=!0}catch{}return v}s(yce,"blockDynamicConversion");function RL(v,b,T){var k=!1;return T&&!v[b.blkVal]&&(k=T[Vq],!k&&!T[Gq]&&(k=td(T)||Je(T))),k}s(RL,"_canMakeDynamic");function ub(v){Rr("InvalidAccess:"+v)}s(ub,"throwInvalidAccess");var Cce=["push","pop","shift","unshift","splice"],yS=s(function(v,b,T,k){v&&v[U1](3,108,"".concat(T," [").concat(b,"] failed - ")+Ot(k))},"_throwDynamicError");function vy(v,b,T){Je(b)&&Gr(Cce,function(k){var L=b[k];b[k]=function(){for(var q=[],G=0;G<arguments.length;G++)q[G]=arguments[G];var ce=L[R5](this,q);return pb(v,b,T,"Patching"),ce}})}s(vy,"_patchArray");function W0(v,b){var T=Ue(v,b);return T&&T.get}s(W0,"_getOwnPropGetter");function Yq(v,b,T,k){var L={n:T,h:[],trk:s(function(Ee){Ee&&Ee.fn&&(pc(L.h,Ee)===-1&&L.h[Co](Ee),v.trk(Ee,L))},"trk"),clr:s(function(Ee){var Re=pc(L.h,Ee);Re!==-1&&L.h[Ox](Re,1)},"clr")},q=!0,G=!1;function ce(){q&&(G=G||RL(ce,v,k),k&&!k[Cy]&&G&&(k=pb(v,k,T,"Converting")),q=!1);var Ee=v.act;return Ee&&L.trk(Ee),k}s(ce,"_getProperty"),ce[v.prop]={chng:s(function(){v.add(L)},"chng")};function fe(Ee){if(k!==Ee){ce[v.ro]&&!v.upd&&ub("["+T+"] is read-only:"+Ot(b)),q&&(G=G||RL(ce,v,k),q=!1);var Re=G&&ce[v.rf];if(G)if(Re){le(k,function(Ze){k[Ze]=Ee?Ee[Ze]:Bf});try{le(Ee,function(Ze,He){db(v,k,Ze,He)}),Ee=k}catch(Ze){yS((v.hdlr||{})[mc],T,"Assigning",Ze),G=!1}}else k&&k[Cy]&&le(k,function(Ze){var He=W0(k,Ze);if(He){var Ye=He[v.prop];Ye&&Ye.chng()}});if(Ee!==k){var Qe=Ee&&RL(ce,v,Ee);!Re&&Qe&&(Ee=pb(v,Ee,T,"Converting")),k=Ee,G=Qe}v.add(L)}}s(fe,"_setProperty"),je(b,L.n,{g:ce,s:fe})}s(Yq,"_createDynamicProperty");function db(v,b,T,k){if(b){var L=W0(b,T),q=L&&!!L[v.prop];q?b[T]=k:Yq(v,b,T,k)}return b}s(db,"_setDynamicProperty");function fb(v,b,T,k){if(b){var L=W0(b,T),q=L&&!!L[v.prop],G=k&&k[0],ce=k&&k[1],fe=k&&k[2];if(!q){if(fe)try{yce(b)}catch(Ee){yS((v.hdlr||{})[mc],T,"Blocking",Ee)}try{db(v,b,T,b[T]),L=W0(b,T)}catch(Ee){yS((v.hdlr||{})[mc],T,"State",Ee)}}G&&(L[v.rf]=G),ce&&(L[v.ro]=ce),fe&&(L[v.blkVal]=!0)}return b}s(fb,"_setDynamicPropertyState");function pb(v,b,T,k){try{le(b,function(L,q){db(v,b,L,q)}),b[Cy]||(xe(b,Cy,{get:s(function(){return v.hdlr},"get")}),vy(v,b,T))}catch(L){yS((v.hdlr||{})[mc],T,k,L)}return b}s(pb,"_makeDynamicObject");var CS="[[ai_",vS="]]";function vce(v){var b=Zu(CS+"get"+v.uid+vS),T=Zu(CS+"ro"+v.uid+vS),k=Zu(CS+"rf"+v.uid+vS),L=Zu(CS+"blkVal"+v.uid+vS),q=Zu(CS+"dtl"+v.uid+vS),G=null,ce=null,fe;function Ee(He,Ye){var gt=fe.act;try{fe.act=He,He&&He[q]&&(Gr(He[q],function(wt){wt.clr(He)}),He[q]=[]),Ye({cfg:v.cfg,set:v.set.bind(v),setDf:v.setDf.bind(v),ref:v.ref.bind(v),rdOnly:v.rdOnly.bind(v)})}catch(wt){var st=v[mc];throw st&&st[U1](1,107,Ot(wt)),wt}finally{fe.act=gt||null}}s(Ee,"_useHandler");function Re(){if(G){var He=G;G=null,ce&&ce[Qx](),ce=null;var Ye=[];if(Gr(He,function(gt){if(gt&&(gt[q]&&(Gr(gt[q],function(st){st.clr(gt)}),gt[q]=null),gt.fn))try{Ee(gt,gt.fn)}catch(st){Ye[Co](st)}}),G)try{Re()}catch(gt){Ye[Co](gt)}Ye[ai]>0&&uL("Watcher error(s): ",Ye)}}s(Re,"_notifyWatchers");function Qe(He){if(He&&He.h[ai]>0){G||(G=[]),ce||(ce=sy(function(){ce=null,Re()},0));for(var Ye=0;Ye<He.h[ai];Ye++){var gt=He.h[Ye];gt&&pc(G,gt)===-1&&G[Co](gt)}}}s(Qe,"_addWatcher");function Ze(He,Ye){if(He){var gt=He[q]=He[q]||[];pc(gt,Ye)===-1&&gt[Co](Ye)}}return s(Ze,"_trackHandler"),fe={prop:b,ro:T,rf:k,blkVal:L,hdlr:v,add:Qe,notify:Re,use:Ee,trk:Ze},fe}s(vce,"_createState");function tP(v,b){var T={fn:b,rm:s(function(){T.fn=null,v=null,b=null},"rm")};return je(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),v.use(T,b),T}s(tP,"_createAndUseHandler");function Kq(v,b,T){var k=Ace(b);if(k)return k;var L=gg("dyncfg",!0),q=b&&T!==!1?b:zq(b),G;function ce(){G.notify()}s(ce,"_notifyWatchers");function fe(st,wt,Ht){try{st=db(G,st,wt,Ht)}catch(or){yS(v,wt,"Setting value",or)}return st[wt]}s(fe,"_setValue");function Ee(st){return tP(G,st)}s(Ee,"_watch");function Re(st,wt){G.use(null,function(Ht){var or=G.upd;try{$(wt)||(G.upd=wt),st(Ht)}finally{G.upd=or}})}s(Re,"_block");function Qe(st,wt){var Ht;return fb(G,st,wt,(Ht={},Ht[0]=!0,Ht))[wt]}s(Qe,"_ref");function Ze(st,wt){var Ht;return fb(G,st,wt,(Ht={},Ht[1]=!0,Ht))[wt]}s(Ze,"_rdOnly");function He(st,wt){var Ht;return fb(G,st,wt,(Ht={},Ht[2]=!0,Ht))[wt]}s(He,"_blkPropValue");function Ye(st,wt){return wt&&le(wt,function(Ht,or){_L(gt,st,Ht,or)}),st}s(Ye,"_applyDefaults");var gt={uid:null,cfg:q,logger:v,notify:ce,set:fe,setDf:Ye,watch:Ee,ref:Qe,rdOnly:Ze,blkVal:He,_block:Re};return je(gt,"uid",{c:!1,e:!1,w:!1,v:L}),G=vce(gt),pb(G,q,"config","Creating"),gt}s(Kq,"_createDynamicHandler");function Jq(v,b){v?(v[Fx](b),v[U1](2,108,b)):ub(b)}s(Jq,"_logInvalidAccess");function Ff(v,b,T,k){var L=Kq(T,v||{},k);return b&&L.setDf(L.cfg,b),L}s(Ff,"createDynamicConfig");function Ag(v,b,T){var k=v[Cy]||v;return k.cfg&&(k.cfg===v||k.cfg[Cy]===k)?k[ug](b):(Jq(T,Nq+Ot(v)),Ff(v,null,T)[ug](b))}s(Ag,"onConfigChange");function mb(v,b){if(v&&v[q1])return v[q1](b)}s(mb,"runTargetUnload");function Xq(v,b,T){var k;return T||(k=Vx(function(L){T=L})),v&&Kae(v)>0?Df(mb(v[0],b),function(){Xq(og(v,1),b,T)}):T(),k}s(Xq,"doUnloadAll");var Ece=500,Zq="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function xce(v,b,T){return!v&&ie(v)?b:_t(v)?v:Mt(v)[Mx]()==="true"}s(xce,"_stringToBoolOrDefault");function bce(v){return{mrg:!0,v}}s(bce,"cfgDfMerge");function kL(v,b,T){return{fb:T,isVal:v,v:b}}s(kL,"cfgDfValidate");function um(v,b){return{fb:b,set:xce,v:!!v}}s(um,"cfgDfBoolean");var rP=[Kx,Jx,$5,V1],nP=null,iP;function Ice(v,b){return function(){var T=arguments,k=eH(b);if(k){var L=k.listener;L&&L[v]&&L[v][R5](L,T)}}}s(Ice,"_listenerProxyFunc");function Tce(){var v=Vo("Microsoft");return v&&(nP=v.ApplicationInsights),nP}s(Tce,"_getExtensionNamespace");function eH(v){var b=nP;return!b&&v.disableDbgExt!==!0&&(b=nP||Tce()),b?b.ChromeDbgExt:null}s(eH,"getDebugExt");function wce(v){if(!iP){iP={};for(var b=0;b<rP[ai];b++)iP[rP[b]]=Ice(rP[b],v)}return iP}s(wce,"getDebugListener");var hb,tH="warnToConsole",Sce="AI (Internal): ",_ce="AI: ",Rce="AITR_",rH={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},gb=(hb={},hb[0]=null,hb[1]="errorToConsole",hb[2]=tH,hb[3]="debugToConsole",hb);function $d(v){return v?'"'+v[my](/\"/g,ki)+'"':ki}s($d,"_sanitizeDiagnosticText");function ES(v,b){var T=gS();if(T){var k="log";T[v]&&(k=v),Oe(T[k])&&T[k](b)}}s(ES,"_logToConsole");var oP=function(){function v(b,T,k,L){k===void 0&&(k=!1);var q=this;q[D5]=b,q[$1]=(k?_ce:Sce)+b;var G=ki;ob()&&(G=Hd().stringify(L));var ce=(T?" message:"+$d(T):ki)+(L?" props:"+$d(G):ki);q[$1]+=ce}return s(v,"_InternalLogMessage"),v.dataType="MessageData",v}();function xS(v,b){return(v||{})[mc]||new bS(b)}s(xS,"safeGetLogger");var bS=function(){function v(b){this.identifier="DiagnosticLogger",this.queue=[];var T=0,k={},L,q,G,ce,fe;hu(v,this,function(Ee){fe=Qe(b||{}),Ee.consoleLoggingLevel=function(){return L},Ee[U1]=function(Ye,gt,st,wt,Ht){Ht===void 0&&(Ht=!1);var or=new oP(gt,st,Ht,wt);if(ce)throw Ot(or);var wr=gb[Ye]||tH;if($(or[$1]))He("throw"+(Ye===1?"Critical":"Warning"),or);else{if(Ht){var ei=+or[D5];!k[ei]&&L>=Ye&&(Ee[wr](or[$1]),k[ei]=!0)}else L>=Ye&&Ee[wr](or[$1]);Re(Ye,or)}},Ee.debugToConsole=function(Ye){ES("debug",Ye),He("warning",Ye)},Ee[Fx]=function(Ye){ES("warn",Ye),He("warning",Ye)},Ee.errorToConsole=function(Ye){ES("error",Ye),He("error",Ye)},Ee.resetInternalMessageCount=function(){T=0,k={}},Ee.logInternalMessage=Re,Ee[q1]=function(Ye){fe&&fe.rm(),fe=null};function Re(Ye,gt){if(!Ze()){var st=!0,wt=Rce+gt[D5];if(k[wt]?st=!1:k[wt]=!0,st&&(Ye<=q&&(Ee.queue[Co](gt),T++,He(Ye===1?"error":"warn",gt)),T===G)){var Ht="Internal events throttle limit per PageView reached for this app.",or=new oP(23,Ht,!1);Ee.queue[Co](or),Ye===1?Ee.errorToConsole(Ht):Ee[Fx](Ht)}}}s(Re,"_logInternalMessage");function Qe(Ye){return Ag(Ff(Ye,rH,Ee).cfg,function(gt){var st=gt.cfg;L=st[xq],q=st.loggingLevelTelemetry,G=st.maxMessageLimit,ce=st.enableDebug})}s(Qe,"_setDefaultsFromConfig");function Ze(){return T>=G}s(Ze,"_areInternalMessagesThrottled");function He(Ye,gt){var st=eH(b||{});st&&st[om]&&st[om](Ye,gt)}s(He,"_debugExtMsg")})}return s(v,"DiagnosticLogger"),v.__ieDyn=1,v}();function PL(v){return v||new bS}s(PL,"_getLogger");function Mr(v,b,T,k,L,q){q===void 0&&(q=!1),PL(v)[U1](b,T,k,L,q)}s(Mr,"_throwInternal");function sP(v,b){PL(v)[Fx](b)}s(sP,"_warnToConsole");var IS,Ey,nH="toGMTString",iH="toUTCString",aP="cookie",yg="expires",oH="isCookieUseDisabled",cP="disableCookiesUsage",sH="_ckMgr",lP=null,Ab=null,uP=null,dm,aH={},cH={},lH=(IS={cookieCfg:bce((Ey={},Ey[j5]={fb:"cookieDomain",dfVal:V5},Ey.path={fb:"cookiePath",dfVal:V5},Ey.enabled=Bf,Ey.ignoreCookies=Bf,Ey.blockedCookies=Bf,Ey)),cookieDomain:Bf,cookiePath:Bf},IS[cP]=Bf,IS);function DL(){!dm&&(dm=yr(function(){return dc()}))}s(DL,"_getDoc");function TS(v){return v?v.isEnabled():!0}s(TS,"_isMgrEnabled");function BL(v,b){return b&&v&&Je(v.ignoreCookies)?pc(v.ignoreCookies,b)!==-1:!1}s(BL,"_isIgnoredCookie");function kce(v,b){return b&&v&&Je(v.blockedCookies)&&pc(v.blockedCookies,b)!==-1?!0:BL(v,b)}s(kce,"_isBlockedCookie");function NL(v,b){var T=b[nm];if(ie(T)){var k=void 0;$(v[oH])||(k=!v[oH]),$(v[cP])||(k=!v[cP]),T=k}return T}s(NL,"_isCfgEnabled");function Pce(v,b){var T,k,L,q,G,ce,fe,Ee;v=Ff(v||cH,null,b).cfg,q=Ag(v,function(Qe){Qe.setDf(Qe.cfg,lH),T=Qe.ref(Qe.cfg,"cookieCfg"),k=T[G5]||"/",L=T[j5],G=NL(v,T)!==!1,ce=T.getCookie||Dce,fe=T.setCookie||yb,Ee=T.delCookie||yb},b);var Re={isEnabled:s(function(){var Qe=NL(v,T)!==!1&&G&&uH(b),Ze=cH[sH];return Qe&&Ze&&Re!==Ze&&(Qe=TS(Ze)),Qe},"isEnabled"),setEnabled:s(function(Qe){G=Qe!==!1,T[nm]=Qe},"setEnabled"),set:s(function(Qe,Ze,He,Ye,gt){var st=!1;if(TS(Re)&&!kce(T,Qe)){var wt={},Ht=Xi(Ze||ki),or=ag(Ht,";");if(or!==-1&&(Ht=Xi(D(Ze,or)),wt=LL(Ce(Ze,or+1))),gy(wt,j5,Ye||L,ue,$),!ie(He)){var wr=$0();if($(wt[yg])){var ei=ed(),Fi=ei+He*1e3;if(Fi>0){var Oi=new Date;Oi.setTime(Fi),gy(wt,yg,dH(Oi,wr?nH:iH)||dH(Oi,wr?nH:iH)||ki,ue)}}wr||gy(wt,"max-age",ki+He,null,$)}var qo=ib();qo&&qo.protocol==="https:"&&(gy(wt,"secure",null,null,$),Ab===null&&(Ab=!Bce((fc()||{})[N5])),Ab&&gy(wt,"SameSite","None",null,$)),gy(wt,G5,gt||k,null,$),fe(Qe,fH(Ht,wt)),st=!0}return st},"set"),get:s(function(Qe){var Ze=ki;return TS(Re)&&!BL(T,Qe)&&(Ze=ce(Qe)),Ze},"get"),del:s(function(Qe,Ze){var He=!1;return TS(Re)&&(He=Re.purge(Qe,Ze)),He},"del"),purge:s(function(Qe,Ze){var He,Ye=!1;if(uH(b)){var gt=(He={},He[G5]=Ze||"/",He[yg]="Thu, 01 Jan 1970 00:00:01 GMT",He);$0()||(gt["max-age"]="0"),Ee(Qe,fH(ki,gt)),Ye=!0}return Ye},"purge"),unload:s(function(Qe){q&&q.rm(),q=null},"unload")};return Re[sH]=Re,Re}s(Pce,"createCookieMgr");function uH(v){if(lP===null){lP=!1,!dm&&DL();try{var b=dm.v||{};lP=b[aP]!==void 0}catch(T){Mr(v,2,68,"Cannot access document.cookie - "+pl(T),{exception:Ot(T)})}}return lP}s(uH,"areCookiesSupported");function LL(v){var b={};if(v&&v[ai]){var T=Xi(v)[py](";");Gr(T,function(k){if(k=Xi(k||ki),k){var L=ag(k,"=");L===-1?b[k]=null:b[Xi(D(k,L))]=Xi(Ce(k,L+1))}})}return b}s(LL,"_extractParts");function dH(v,b){return Oe(v[b])?v[b]():null}s(dH,"_formatDate");function fH(v,b){var T=v||ki;return le(b,function(k,L){T+="; "+k+(ie(L)?ki:"="+L)}),T}s(fH,"_formatCookieValue");function Dce(v){var b=ki;if(!dm&&DL(),dm.v){var T=dm.v[aP]||ki;uP!==T&&(aH=LL(T),uP=T),b=Xi(aH[v]||ki)}return b}s(Dce,"_getCookieValue");function yb(v,b){!dm&&DL(),dm.v&&(dm.v[aP]=v+"="+b)}s(yb,"_setCookieValue");function Bce(v){return Ae(v)?!!(Ll(v,"CPU iPhone OS 12")||Ll(v,"iPad; CPU OS 12")||Ll(v,"Macintosh; Intel Mac OS X 10_14")&&Ll(v,"Version/")&&Ll(v,"Safari")||Ll(v,"Macintosh; Intel Mac OS X 10_14")&&gq(v,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Ll(v,"Chrome/5")||Ll(v,"Chrome/6")||Ll(v,"UnrealEngine")&&!Ll(v,"Chrome")||Ll(v,"UCBrowser/12")||Ll(v,"UCBrowser/11")):!1}s(Bce,"uaDisallowsSameSiteNone");var ML={perfEvtsSendAll:!1};function Nce(v){v.h=null;var b=v.cb;v.cb=[],Gr(b,function(T){z(T.fn,[T.arg])})}s(Nce,"_runScheduledListeners");function xy(v,b,T,k){Gr(v,function(L){L&&L[b]&&(T?(T.cb[Co]({fn:k,arg:L}),T.h=T.h||sy(Nce,0,T)):z(k,[L]))})}s(xy,"_runListeners");var Lce=function(){function v(b){this.listeners=[];var T,k,L=[],q={h:null,cb:[]},G=Ff(b,ML);k=G[ug](function(ce){T=!!ce.cfg.perfEvtsSendAll}),hu(v,this,function(ce){je(ce,"listeners",{g:s(function(){return L},"g")}),ce[k5]=function(fe){L[Co](fe)},ce[aS]=function(fe){for(var Ee=pc(L,fe);Ee>-1;)L[Ox](Ee,1),Ee=pc(L,fe)},ce[Kx]=function(fe){xy(L,Kx,q,function(Ee){Ee[Kx](fe)})},ce[Jx]=function(fe,Ee){xy(L,Jx,q,function(Re){Re[Jx](fe,Ee)})},ce[$5]=function(fe,Ee){xy(L,$5,Ee?q:null,function(Re){Re[$5](fe,Ee)})},ce[V1]=function(fe){fe&&(T||!fe[cL]())&&xy(L,V1,null,function(Ee){fe.isAsync?sy(function(){return Ee[V1](fe)},0):Ee[V1](fe)})},ce[fL]=function(fe){fe&&fe[ai]&&xy(L,fL,q,function(Ee){Ee[fL](fe)})},ce[pL]=function(fe){fe&&fe[Wx]&&xy(L,pL,q,function(Ee){Ee[pL](fe)})},ce[W5]=function(fe,Ee){if(fe>0){var Re=Ee||0;xy(L,W5,q,function(Qe){Qe[W5](fe,Re)})}},ce[q1]=function(fe){var Ee=s(function(){k&&k.rm(),k=null,L=[],q.h&&q.h[Qx](),q.h=null,q.cb=[]},"_finishUnload"),Re;if(xy(L,"unload",null,function(Qe){var Ze=Qe[q1](fe);Ze&&(Re||(Re=[]),Re[Co](Ze))}),Re)return Vx(function(Qe){return Df(dL(Re),function(){Ee(),Qe()})});Ee()}})}return s(v,"NotificationManager"),v.__ieDyn=1,v}(),Cb="ctx",FL="ParentContextKey",wS="ChildrenContextKey",Mce=null,dP=function(){function v(b,T,k){var L=this;if(L.start=ed(),L[dy]=b,L.isAsync=k,L[cL]=function(){return!1},Oe(T)){var q;je(L,"payload",{g:s(function(){return!q&&Oe(T)&&(q=T(),T=null),q},"g")})}L[hy]=function(G){return G?G===v[FL]||G===v[wS]?L[G]:(L[Cb]||{})[G]:null},L[q0]=function(G,ce){if(G)if(G===v[FL])L[G]||(L[cL]=function(){return!0}),L[G]=ce;else if(G===v[wS])L[G]=ce;else{var fe=L[Cb]=L[Cb]||{};fe[G]=ce}},L.complete=function(){var G=0,ce=L[hy](v[wS]);if(Je(ce))for(var fe=0;fe<ce[ai];fe++){var Ee=ce[fe];Ee&&(G+=Ee.time)}L.time=ed()-L.start,L.exTime=L.time-G,L.complete=function(){}}}return s(v,"PerfEvent"),v.ParentContextKey="parent",v.ChildrenContextKey="childEvts",v}(),Fce=function(){function v(b){this.ctx={},hu(v,this,function(T){T.create=function(k,L,q){return new dP(k,L,q)},T.fire=function(k){k&&(k.complete(),b&&Oe(b[V1])&&b[V1](k))},T[q0]=function(k,L){if(k){var q=T[Cb]=T[Cb]||{};q[k]=L}},T[hy]=function(k){return(T[Cb]||{})[k]}})}return s(v,"PerfManager"),v.__ieDyn=1,v}(),fm="CoreUtils.doPerf";function vb(v,b,T,k,L){if(v){var q=v;if(q[uS]&&(q=q[uS]()),q){var G=void 0,ce=q[hy](fm);try{if(G=q.create(b(),k,L),G){if(ce&&G[q0]&&(G[q0](dP[FL],ce),ce[hy]&&ce[q0])){var fe=ce[hy](dP[wS]);fe||(fe=[],ce[q0](dP[wS],fe)),fe[Co](G)}return q[q0](fm,G),T(G)}}catch(Ee){G&&G[q0]&&G[q0]("exception",Ee)}finally{G&&q.fire(G),q[q0](fm,ce)}}}return T()}s(vb,"doPerf");function gc(){return Mce}s(gc,"getGblPerfMgr");var fP="00000000000000000000000000000000",Eb="0000000000000000";function pP(v,b,T){return v&&v[ai]===b&&v!==T?!!v.match(/^[\da-f]*$/i):!1}s(pP,"_isValid");function by(v){return pP(v,32,fP)}s(by,"isValidTraceId");function J1(v){return pP(v,16,Eb)}s(J1,"isValidSpanId");var SS=Wq("plugin");function Iy(v){return SS.get(v,"state",{},!0)}s(Iy,"_getPluginState");function OL(v,b){for(var T=[],k=null,L=v[sm](),q;L;){var G=L[qx]();if(G){k&&k[fy]&&G[Nf]&&k[fy](G),q=Iy(G);var ce=!!q[rm];G[rm]&&(ce=G[rm]()),ce||T[Co](G),k=G,L=L[sm]()}}Gr(T,function(fe){var Ee=v[hc]();fe[sS](v.getCfg(),Ee,b,v[sm]()),q=Iy(fe),!fe[hc]&&!q[hc]&&(q[hc]=Ee),q[rm]=!0,delete q[im]})}s(OL,"initializePlugins");function QL(v){return v.sort(function(b,T){var k=0;if(T){var L=T[Nf];b[Nf]?k=L?b[Yx]-T[Yx]:1:L&&(k=-1)}else k=b?1:-1;return k})}s(QL,"sortPlugins");function Oce(v){var b={};return{getName:s(function(){return b[dy]},"getName"),setName:s(function(T){v&&v.setName(T),b[dy]=T},"setName"),getTraceId:s(function(){return b.traceId},"getTraceId"),setTraceId:s(function(T){v&&v.setTraceId(T),by(T)&&(b.traceId=T)},"setTraceId"),getSpanId:s(function(){return b.spanId},"getSpanId"),setSpanId:s(function(T){v&&v.setSpanId(T),J1(T)&&(b.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return b[Iq]},"getTraceFlags"),setTraceFlags:s(function(T){v&&v.setTraceFlags(T),b[Iq]=T},"setTraceFlags")}}s(Oce,"createDistributedTraceContext");var Qce="TelemetryPluginChain",pH="_hasRun",UL="_getTelCtx",mH=0;function Uce(v,b,T){for(;v;){if(v[qx]()===T)return v;v=v[sm]()}return N([T],b.config||{},b)}s(Uce,"_getNextProxyStart");function qL(v,b,T,k){var L=null,q=[];b||(b=Ff({},null,T[mc])),k!==null&&(L=k?Uce(v,T,k):v);var G={_next:fe,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return xS(T,b.cfg)},"diagLog"),getCfg:s(function(){return b.cfg},"getCfg"),getExtCfg:Re,getConfig:Qe,hasNext:s(function(){return!!L},"hasNext"),getNext:s(function(){return L},"getNext"),setNext:s(function(He){L=He},"setNext"),iterate:Ze,onComplete:ce}};function ce(He,Ye){for(var gt=[],st=2;st<arguments.length;st++)gt[st-2]=arguments[st];He&&q[Co]({func:He,self:$(Ye)?G.ctx:Ye,args:gt})}s(ce,"_addOnComplete");function fe(){var He=L;if(L=He?He[sm]():null,!He){var Ye=q;Ye&&Ye[ai]>0&&(Gr(Ye,function(gt){try{gt.func.call(gt.self,gt.args)}catch(st){Mr(T[mc],2,73,"Unexpected Exception during onComplete - "+Ot(st))}}),q=[])}return He}s(fe,"_moveNext");function Ee(He,Ye){var gt=null,st=b.cfg;if(st&&He){var wt=st[G1];!wt&&Ye&&(wt={}),st[G1]=wt,wt=b.ref(st,G1),wt&&(gt=wt[He],!gt&&Ye&&(gt={}),wt[He]=gt,gt=b.ref(wt,He))}return gt}s(Ee,"_getExtCfg");function Re(He,Ye){var gt=Ee(He,!0);return Ye&&le(Ye,function(st,wt){if(ie(gt[st])){var Ht=b.cfg[st];(Ht||!ie(Ht))&&(gt[st]=Ht)}_L(b,gt,st,wt)}),b.setDf(gt,Ye)}s(Re,"_resolveExtCfg");function Qe(He,Ye,gt){gt===void 0&&(gt=!1);var st,wt=Ee(He,!1),Ht=b.cfg;return wt&&(wt[Ye]||!ie(wt[Ye]))?st=wt[Ye]:(Ht[Ye]||!ie(Ht[Ye]))&&(st=Ht[Ye]),st||!ie(st)?st:gt}s(Qe,"_getConfig");function Ze(He){for(var Ye;Ye=G._next();){var gt=Ye[qx]();gt&&He(gt)}}return s(Ze,"_iterateChain"),G}s(qL,"_createInternalContext");function xb(v,b,T,k){var L=Ff(b),q=qL(v,L,T,k),G=q.ctx;function ce(Ee){var Re=q._next();return Re&&Re[Nf](Ee,G),!Re}s(ce,"_processNext");function fe(Ee,Re){return Ee===void 0&&(Ee=null),Je(Ee)&&(Ee=N(Ee,L.cfg,T,Re)),xb(Ee||G[sm](),L.cfg,T,Re)}return s(fe,"_createNew"),G[Nl]=ce,G[H1]=fe,G}s(xb,"createProcessTelemetryContext");function w(v,b,T){var k=Ff(b.config),L=qL(v,k,b,T),q=L.ctx;function G(fe){var Ee=L._next();return Ee&&Ee[q1](q,fe),!Ee}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,b,Ee)),w(fe||q[sm](),b,Ee)}return s(ce,"_createNew"),q[Nl]=G,q[H1]=ce,q}s(w,"createProcessTelemetryUnloadContext");function P(v,b,T){var k=Ff(b.config),L=qL(v,k,b,T),q=L.ctx;function G(fe){return q.iterate(function(Ee){Oe(Ee[dg])&&Ee[dg](q,fe)})}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,k.cfg,b,Ee)),P(fe||q[sm](),b,Ee)}return s(ce,"_createNew"),q[Nl]=G,q[H1]=ce,q}s(P,"createProcessTelemetryUpdateContext");function N(v,b,T,k){var L=null,q=!k;if(Je(v)&&v[ai]>0){var G=null;Gr(v,function(ce){if(!q&&k===ce&&(q=!0),q&&ce&&Oe(ce[Nf])){var fe=W(ce,b,T);L||(L=fe),G&&G._setNext(fe),G=fe}})}return k&&!L?N([k],b,T):L}s(N,"createTelemetryProxyChain");function W(v,b,T){var k=null,L=Oe(v[Nf]),q=Oe(v[fy]),G;v?G=v[uy]+"-"+v[Yx]+"-"+mH++:G="Unknown-0-"+mH++;var ce={getPlugin:s(function(){return v},"getPlugin"),getNext:s(function(){return k},"getNext"),processTelemetry:Re,unload:Qe,update:Ze,_id:G,_setNext:s(function(He){k=He},"_setNext")};function fe(){var He;return v&&Oe(v[UL])&&(He=v[UL]()),He||(He=xb(ce,b,T)),He}s(fe,"_getTelCtx");function Ee(He,Ye,gt,st,wt){var Ht=!1,or=v?v[uy]:Qce,wr=He[pH];return wr||(wr=He[pH]={}),He.setNext(k),v&&vb(He[hc](),function(){return or+":"+gt},function(){wr[G]=!0;try{var ei=k?k._id:ki;ei&&(wr[ei]=!1),Ht=Ye(He)}catch(Oi){var Fi=k?wr[k._id]:!0;Fi&&(Ht=!0),(!k||!Fi)&&Mr(He[om](),1,73,"Plugin ["+or+"] failed during "+gt+" - "+Ot(Oi)+", run flags: "+Ot(wr))}},st,wt),Ht}s(Ee,"_processChain");function Re(He,Ye){Ye=Ye||fe();function gt(st){if(!v||!L)return!1;var wt=Iy(v);return wt[im]||wt[H5]?!1:(q&&v[fy](k),v[Nf](He,st),!0)}s(gt,"_callProcessTelemetry"),Ee(Ye,gt,"processTelemetry",function(){return{item:He}},!He.sync)||Ye[Nl](He)}s(Re,"_processTelemetry");function Qe(He,Ye){function gt(){var st=!1;if(v){var wt=Iy(v),Ht=v[hc]||wt[hc];v&&(!Ht||Ht===He.core())&&!wt[im]&&(wt[hc]=null,wt[im]=!0,wt[rm]=!1,v[im]&&v[im](He,Ye)===!0&&(st=!0))}return st}s(gt,"_callTeardown"),Ee(He,gt,"unload",function(){},Ye.isAsync)||He[Nl](Ye)}s(Qe,"_unloadPlugin");function Ze(He,Ye){function gt(){var st=!1;if(v){var wt=Iy(v),Ht=v[hc]||wt[hc];v&&(!Ht||Ht===He.core())&&!wt[im]&&v[dg]&&v[dg](He,Ye)===!0&&(st=!0)}return st}s(gt,"_callUpdate"),Ee(He,gt,"update",function(){},!1)||He[Nl](Ye)}return s(Ze,"_updatePlugin"),Xt(ce)}s(W,"createTelemetryPluginProxy");function de(){var v=[];function b(k){k&&v[Co](k)}s(b,"_addHandler");function T(k,L){Gr(v,function(q){try{q(k,L)}catch(G){Mr(k[om](),2,73,"Unexpected error calling unload handler - "+Ot(G))}}),v=[]}return s(T,"_runHandlers"),{add:b,run:T}}s(de,"createUnloadHandlerContainer");function we(){var v=[];function b(k){var L=v;v=[],Gr(L,function(q){try{(q.rm||q.remove).call(q)}catch(G){Mr(k,2,73,"Unloading:"+Ot(G))}})}s(b,"_doUnload");function T(k){k&&Rf(v,k)}return s(T,"_addHook"),{run:b,add:T}}s(we,"createUnloadHookContainer");var ke,We="getPlugin",it=(ke={},ke[G1]={isVal:V5,v:{}},ke),xt=function(){function v(){var b=this,T,k,L,q,G;Ee(),hu(v,b,function(Re){Re[sS]=function(Qe,Ze,He,Ye){fe(Qe,Ze,Ye),T=!0},Re[im]=function(Qe,Ze){var He=Re[hc];if(!He||Qe&&He!==Qe[hc]())return;var Ye,gt=!1,st=Qe||w(null,He,L&&L[We]?L[We]():L),wt=Ze||{reason:0,isAsync:!1};function Ht(){gt||(gt=!0,q.run(st,Ze),G.run(st[om]()),Ye===!0&&st[Nl](wt),Ee())}return s(Ht,"_unloadCallback"),!Re[B5]||Re[B5](st,wt,Ht)!==!0?Ht():Ye=!0,Ye},Re[dg]=function(Qe,Ze){var He=Re[hc];if(!He||Qe&&He!==Qe[hc]())return;var Ye,gt=!1,st=Qe||P(null,He,L&&L[We]?L[We]():L),wt=Ze||{reason:0};function Ht(){gt||(gt=!0,fe(st.getCfg(),st.core(),st[sm]()))}return s(Ht,"_updateCallback"),!Re._doUpdate||Re._doUpdate(st,wt,Ht)!==!0?Ht():Ye=!0,Ye},fS(Re,"_addUnloadCb",function(){return q},"add"),fS(Re,"_addHook",function(){return G},"add"),je(Re,"_unloadHooks",{g:s(function(){return G},"g")})}),b[om]=function(Re){return ce(Re)[om]()},b[rm]=function(){return T},b.setInitialized=function(Re){T=Re},b[fy]=function(Re){L=Re},b[Nl]=function(Re,Qe){Qe?Qe[Nl](Re):L&&Oe(L[Nf])&&L[Nf](Re,null)},b._getTelCtx=ce;function ce(Re){Re===void 0&&(Re=null);var Qe=Re;if(!Qe){var Ze=k||xb(null,{},b[hc]);L&&L[We]?Qe=Ze[H1](null,L[We]):Qe=Ze[H1](null,L)}return Qe}s(ce,"_getTelCtx");function fe(Re,Qe,Ze){Ff(Re,it,xS(Qe)),!Ze&&Qe&&(Ze=Qe[Hx]()[sm]());var He=L;L&&L[We]&&(He=L[We]()),b[hc]=Qe,k=xb(Ze,Re,Qe,He)}s(fe,"_setDefaults");function Ee(){T=!1,b[hc]=null,k=null,L=null,G=we(),q=de()}s(Ee,"_initDefaults")}return s(v,"BaseTelemetryPlugin"),v.__ieDyn=1,v}();function hr(v,b,T){var k={id:b,fn:T};Rf(v,k);var L={remove:s(function(){Gr(v,function(q,G){if(q.id===k.id)return v[Ox](G,1),-1})},"remove")};return L}s(hr,"_addInitializer");function Nn(v,b,T){for(var k=!1,L=v[ai],q=0;q<L;++q){var G=v[q];if(G)try{if(G.fn[R5](null,[b])===!1){k=!0;break}}catch(ce){Mr(T,2,64,"Telemetry initializer failed: "+pl(ce),{exception:Ot(ce)},!0)}}return!k}s(Nn,"_runInitializers");var Jn=function(v){oS(b,v);function b(){var T=v.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var k,L;q(),hu(b,T,function(G,ce){G.addTelemetryInitializer=function(fe){return hr(L,k++,fe)},G[Nf]=function(fe,Ee){Nn(L,fe,Ee?Ee[om]():G[om]())&&G[Nl](fe,Ee)},G[B5]=function(){q()}});function q(){k=0,L=[]}return s(q,"_initDefaults"),T}return s(b,"TelemetryInitializerPlugin"),b.__ieDyn=1,b}(xt),Er,Nr="Plugins must provide initialize method",Vn="_notificationManager",Ln="SDK is still unloading...",Pi="SDK is not initialized",Bo=100,Zi=5e4,Mc=ir((Er={cookieCfg:{}},Er[zx]={rdOnly:!0,ref:!0,v:[]},Er[mg]={rdOnly:!0,ref:!0,v:[]},Er[G1]={ref:!0,v:{}},Er[H0]=Bf,Er.loggingLevelConsole=0,Er.diagnosticLogInterval=Bf,Er));function bb(v,b){return new Fce(b)}s(bb,"_createPerfManager");function _S(v,b,T){var k=[],L=[],q={};return Gr(T,function(G){(ie(G)||ie(G[sS]))&&Wr(Nr);var ce=G[Yx],fe=G[uy];G&&ce&&(ie(q[ce])?q[ce]=fe:sP(v,"Two extensions have same priority #"+ce+" - "+q[ce]+", "+fe)),!ce||ce<b?k[Co](G):L[Co](G)}),{core:k,channels:L}}s(_S,"_validateExtensions");function HL(v,b){var T=!1;return Gr(b,function(k){if(k===v)return T=!0,-1}),T}s(HL,"_isPluginPresent");function mP(v,b,T,k){T&&le(T,function(L,q){k&&td(q)&&td(b[L])&&mP(v,b[L],q,k),k&&td(q)&&td(b[L])?mP(v,b[L],q,k):v.set(b,L,q)})}s(mP,"_deepMergeConfig");function hH(v,b){var T=null,k=-1;return Gr(v,function(L,q){if(L.w===b)return T=L,k=q,-1}),{i:k,l:T}}s(hH,"_findWatcher");function qce(v,b){var T=hH(v,b).l;return T||(T={w:b,rm:s(function(){var k=hH(v,b);k.i!==-1&&v[Ox](k.i,1)},"rm")},v[Co](T)),T}s(qce,"_addDelayedCfgListener");function $L(v,b,T){Gr(b,function(k){var L=Ag(v,k.w,T);delete k.w,k.rm=function(){L.rm()}})}s($L,"_registerDelayedCfgListener");function gH(v,b,T,k){return b.add(v[ug](function(L){var q=L.cfg.disableDbgExt;q===!0&&k&&(T[aS](k),k=null),T&&!k&&q!==!0&&(k=wce(L.cfg),T[k5](k))})),k}s(gH,"_initDebugListener");function AH(v){return je({rm:s(function(){v.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(v)+">"},"v")})}s(AH,"_createUnloadHook");var Bt=function(){function v(){var b,T,k,L,q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt,st,wt,Ht,or,wr,ei,Fi,Oi,qo,bn,Zr,Qi,fa,ys,$t,en,No;hu(v,this,function(Pt){dt(),Pt._getDbgPlgTargets=function(){return[Oi,L]},Pt[rm]=function(){return T},Pt.activeStatus=function(){return Zr},Pt._setPendingStatus=function(){Zr=3},Pt[sS]=function(yt,Ir,qn,zr){He&&Wr(Ln),Pt[rm]()&&Wr("Core cannot be initialized more than once"),b=Ff(yt,Mc,qn||Pt[mc],!1),yt=b.cfg,yu(b[ug](function(ts){var qs=ts.cfg,od=Zr===3;if(!od){fa=qs.initInMemoMaxSize||Bo;var Of=qs.instrumentationKey,Eg=qs.endpointUrl;if(ie(Of)){ei=null,Zr=ly.INACTIVE;var xg="Please provide instrumentation key";T?(Mr(k,1,100,xg),Pa()):Wr(xg);return}var SP=[];if(ht(Of)?(SP[Co](Of),ei=null):ei=Of,ht(Eg)?(SP[Co](Eg),Qi=null):Qi=Eg,SP[ai]){ys=!1,Zr=3;var lM=V5(qs.initTimeOut)?qs.initTimeOut:Zi,Cle=qd(SP);sy(function(){ys||Mn()},lM),Df(Cle,function(Nb){try{if(ys)return;if(!Nb.rejected){var Lb=Nb[Ux];if(Lb&&Lb[ai]){var qH=Lb[0];if(ei=qH&&qH[Ux],Lb[ai]>1){var HH=Lb[1];Qi=HH&&HH[Ux]}}ei&&(yt.instrumentationKey=ei,yt.endpointUrl=Qi)}Mn()}catch{ys||Mn()}})}else Mn();var _P=ts.ref(ts.cfg,G1);le(_P,function(Nb){ts.ref(_P,Nb)})}})),q=zr,or=gH(b,Ht,q&&Pt[U0](),or),Db(),Pt[mc]=qn;var Hn=yt[zx];if(Re=[],Re[Co].apply(Re,vq(vq([],Ir,!1),Hn)),Qe=yt[mg],Da(null),(!Ze||Ze[ai]===0)&&Wr("No "+mg+" available"),Qe&&Qe[ai]>1){var zo=Pt[qx]("TeeChannelController");(!zo||!zo.plugin)&&Mr(k,1,28,"TeeChannel required")}$L(yt,Fi,k),Fi=null,T=!0,Zr===ly.ACTIVE&&Pa()},Pt.getChannels=function(){var yt=[];return Ze&&Gr(Ze,function(Ir){yt[Co](Ir)}),Xt(yt)},Pt.track=function(yt){vb(Pt[uS](),function(){return"AppInsightsCore:track"},function(){yt===null&&(pa(yt),Wr("Invalid telemetry item")),!yt[dy]&&ie(yt[dy])&&(pa(yt),Wr("telemetry name required")),yt.iKey=yt.iKey||ei,yt.time=yt.time||dS(new Date),yt.ver=yt.ver||"4.0",!He&&Pt[rm]()&&Zr===ly.ACTIVE?Qc()[Nl](yt):Zr!==ly.INACTIVE&&L[ai]<=fa&&L[Co](yt)},function(){return{item:yt}},!yt.sync)},Pt[Hx]=Qc,Pt[U0]=function(){return q||(q=new Lce(b.cfg),Pt[Vn]=q),q},Pt[k5]=function(yt){Pt.getNotifyMgr()[k5](yt)},Pt[aS]=function(yt){q&&q[aS](yt)},Pt.getCookieMgr=function(){return fe||(fe=Pce(b.cfg,Pt[mc])),fe},Pt.setCookieMgr=function(yt){fe!==yt&&(mb(fe,!1),fe=yt)},Pt[uS]=function(){return G||ce||gc()},Pt.setPerfMgr=function(yt){G=yt},Pt.eventCnt=function(){return L[ai]},Pt.releaseQueue=function(){if(T&&L[ai]>0){var yt=L;L=[],Zr===2?Gr(yt,function(Ir){Ir.iKey=Ir.iKey||ei,Qc()[Nl](Ir)}):Mr(k,2,20,"core init status is not active")}},Pt.pollInternalLogs=function(yt){return gt=yt||null,No=!1,$t&&$t[Qx](),Ho(!0)};function Mn(){ys=!0,ie(ei)?(Zr=ly.INACTIVE,Mr(k,1,112,"ikey can't be resolved from promises")):Zr=ly.ACTIVE,Pa()}s(Mn,"_setStatus");function Pa(){T&&(Pt.releaseQueue(),Pt.pollInternalLogs())}s(Pa,"_releaseQueues");function Ho(yt){if((!$t||!$t[nm])&&!No){var Ir=yt||k&&k.queue[ai]>0;Ir&&(en||(en=!0,yu(b[ug](function(qn){var zr=qn.cfg.diagnosticLogInterval;(!zr||!(zr>0))&&(zr=1e4);var Hn=!1;$t&&(Hn=$t[nm],$t[Qx]()),$t=x5(Pb,zr),$t.unref(),$t[nm]=Hn}))),$t[nm]=!0)}return $t}s(Ho,"_startLogPoller"),Pt[Eq]=function(){No=!0,$t&&$t[Qx](),Pb()},hL(Pt,function(){return Ye},["addTelemetryInitializer"]),Pt[q1]=function(yt,Ir,qn){yt===void 0&&(yt=!0),T||Wr(Pi),He&&Wr(Ln);var zr={reason:50,isAsync:yt,flushComplete:!1},Hn;yt&&!Ir&&(Hn=Vx(function(qs){Ir=qs}));var zo=w(mm(),Pt);zo[P5](function(){Ht.run(Pt[mc]),Xq([fe,q,k],yt,function(){dt(),Ir&&Ir(zr)})},Pt);function ts(qs){zr.flushComplete=qs,He=!0,wt.run(zo,zr),Pt[Eq](),zo[Nl](zr)}return s(ts,"_doUnload"),Pb(),Cg(yt,ts,6,qn),Hn},Pt[qx]=Ql,Pt.addPlugin=function(yt,Ir,qn,zr){if(!yt){zr&&zr(!1),Bb(Nr);return}var Hn=Ql(yt[uy]);if(Hn&&!Ir){zr&&zr(!1),Bb("Plugin ["+yt[uy]+"] is already loaded!");return}var zo={reason:16};function ts(Of){Re[Co](yt),zo.added=[yt],Da(zo),zr&&zr(!0)}if(s(ts,"_addPlugin"),Hn){var qs=[Hn.plugin],od={reason:2,isAsync:!!qn};Wd(qs,od,function(Of){Of?(zo.removed=qs,zo.reason|=32,ts()):zr&&zr(!1)})}else ts()},Pt.updateCfg=function(yt,Ir){Ir===void 0&&(Ir=!0);var qn;if(Pt[rm]()){qn={reason:1,cfg:b.cfg,oldCfg:A5({},b.cfg),newConfig:A5({},yt),merge:Ir},yt=qn.newConfig;var zr=b.cfg;yt[zx]=zr[zx],yt[mg]=zr[mg]}b._block(function(Hn){var zo=Hn.cfg;mP(Hn,zo,yt,Ir),Ir||le(zo,function(ts){$e(yt,ts)||Hn.set(zo,ts,Bf)}),Hn.setDf(zo,Mc)},!0),b.notify(),qn&&vg(qn)},Pt.evtNamespace=function(){return st},Pt.flush=Cg,Pt.getTraceCtx=function(yt){return wr||(wr=Oce()),wr},Pt.setTraceCtx=function(yt){wr=yt||null},Pt.addUnloadHook=yu,fS(Pt,"addUnloadCb",function(){return wt},"add"),Pt.onCfgChange=function(yt){var Ir;return T?Ir=Ag(b.cfg,yt,Pt[mc]):Ir=qce(Fi,yt),AH(Ir)},Pt.getWParam=function(){return ua()||b.cfg.enableWParam?0:-1};function Ol(){var yt={};qo=[];var Ir=s(function(qn){qn&&Gr(qn,function(zr){if(zr[uy]&&zr[$x]&&!yt[zr.identifier]){var Hn=zr[uy]+"="+zr[$x];qo[Co](Hn),yt[zr.identifier]=zr}})},"_addPluginVersions");Ir(Ze),Qe&&Gr(Qe,function(qn){Ir(qn)}),Ir(Re)}s(Ol,"_setPluginVersions");function dt(){T=!1,b=Ff({},Mc,Pt[mc]),b.cfg[xq]=1,je(Pt,"config",{g:s(function(){return b.cfg},"g"),s:s(function(Ir){Pt.updateCfg(Ir,!1)},"s")}),je(Pt,"pluginVersionStringArr",{g:s(function(){return qo||Ol(),qo},"g")}),je(Pt,"pluginVersionString",{g:s(function(){return bn||(qo||Ol(),bn=qo.join(";")),bn||ki},"g")}),je(Pt,"logger",{g:s(function(){return k||(k=new bS(b.cfg),b[mc]=k),k},"g"),s:s(function(Ir){b[mc]=Ir,k!==Ir&&(mb(k,!1),k=Ir)},"s")}),Pt[mc]=new bS(b.cfg),Oi=[];var yt=Pt.config[zx]||[];yt.splice(0,yt[ai]),Rf(yt,Oi),Ye=new Jn,L=[],mb(q,!1),q=null,G=null,ce=null,mb(fe,!1),fe=null,Ee=null,Re=[],Qe=null,Ze=null,He=!1,gt=null,st=gg("AIBaseCore",!0),wt=de(),wr=null,ei=null,Ht=we(),Fi=[],bn=null,qo=null,No=!1,$t=null,en=!1,Zr=0,Qi=null,fa=null,ys=!1}s(dt,"_initDefaults");function Qc(){var yt=xb(mm(),b.cfg,Pt);return yt[P5](Ho),yt}s(Qc,"_createTelCtx");function Da(yt){var Ir=_S(Pt[mc],Ece,Re);Ee=null,bn=null,qo=null,Ze=(Qe||[])[0]||[],Ze=QL(Rf(Ze,Ir[mg]));var qn=Rf(QL(Ir[hc]),Ze);Oi=Xt(qn);var zr=Pt.config[zx]||[];zr.splice(0,zr[ai]),Rf(zr,Oi);var Hn=Qc();Ze&&Ze[ai]>0&&OL(Hn[H1](Ze),qn),OL(Hn,qn),yt&&vg(yt)}s(Da,"_initPluginChain");function Ql(yt){var Ir=null,qn=null,zr=[];return Gr(Oi,function(Hn){if(Hn[uy]===yt&&Hn!==Ye)return qn=Hn,-1;Hn.getChannel&&zr[Co](Hn)}),!qn&&zr[ai]>0&&Gr(zr,function(Hn){if(qn=Hn.getChannel(yt),!qn)return-1}),qn&&(Ir={plugin:qn,setEnabled:s(function(Hn){Iy(qn)[H5]=!Hn},"setEnabled"),isEnabled:s(function(){var Hn=Iy(qn);return!Hn[im]&&!Hn[H5]},"isEnabled"),remove:s(function(Hn,zo){Hn===void 0&&(Hn=!0);var ts=[qn],qs={reason:1,isAsync:Hn};Wd(ts,qs,function(od){od&&Da({reason:32,removed:ts}),zo&&zo(od)})},"remove")}),Ir}s(Ql,"_getPlugin");function mm(){if(!Ee){var yt=(Oi||[]).slice();pc(yt,Ye)===-1&&yt[Co](Ye),Ee=N(QL(yt),b.cfg,Pt)}return Ee}s(mm,"_getPluginChain");function Wd(yt,Ir,qn){if(yt&&yt[ai]>0){var zr=N(yt,b.cfg,Pt),Hn=w(zr,Pt);Hn[P5](function(){var zo=!1,ts=[];Gr(Re,function(od,Of){HL(od,yt)?zo=!0:ts[Co](od)}),Re=ts,bn=null,qo=null;var qs=[];Qe&&(Gr(Qe,function(od,Of){var Eg=[];Gr(od,function(xg){HL(xg,yt)?zo=!0:Eg[Co](xg)}),qs[Co](Eg)}),Qe=qs),qn&&qn(zo),Ho()}),Hn[Nl](Ir)}else qn(!1)}s(Wd,"_removePlugins");function Pb(){if(k&&k.queue){var yt=k.queue.slice(0);k.queue[ai]=0,Gr(yt,function(Ir){var qn={name:gt||"InternalMessageId: "+Ir[D5],iKey:ei,time:dS(new Date),baseType:oP.dataType,baseData:{message:Ir[$1]}};Pt.track(qn)})}}s(Pb,"_flushInternalLogs");function Cg(yt,Ir,qn,zr){var Hn=1,zo=!1,ts=null;zr=zr||5e3;function qs(){Hn--,zo&&Hn===0&&(ts&&ts[Qx](),ts=null,Ir&&Ir(zo),Ir=null)}if(s(qs,"doCallback"),Ze&&Ze[ai]>0){var od=Qc()[H1](Ze);od.iterate(function(Of){if(Of.flush){Hn++;var Eg=!1;Of.flush(yt,function(){Eg=!0,qs()},qn)||Eg||(yt&&ts==null?ts=sy(function(){ts=null,qs()},zr):qs())}})}return zo=!0,qs(),!0}s(Cg,"_flushChannels");function Db(){var yt;yu(b[ug](function(Ir){var qn=Ir.cfg.enablePerfMgr;if(qn){var zr=Ir.cfg[H0];(yt!==zr||!yt)&&(zr||(zr=bb),Lq(Ir.cfg,H0,zr),yt=zr,ce=null),!G&&!ce&&Oe(zr)&&(ce=zr(Pt,Pt[U0]()))}else ce=null,yt=null}))}s(Db,"_initPerfManager");function vg(yt){var Ir=P(mm(),Pt);Ir[P5](Ho),(!Pt._updateHook||Pt._updateHook(Ir,yt)!==!0)&&Ir[Nl](yt)}s(vg,"_doUpdate");function Bb(yt){var Ir=Pt[mc];Ir?(Mr(Ir,2,73,yt),Ho()):Wr(yt)}s(Bb,"_logOrThrowError");function pa(yt){var Ir=Pt[U0]();Ir&&Ir[Jx]([yt],2)}s(pa,"_notifyInvalidEvent");function yu(yt){Ht.add(yt)}s(yu,"_addUnloadHook")})}return s(v,"AppInsightsCore"),v.__ieDyn=1,v}();function Vr(v,b){try{if(v&&v!==""){var T=Hd().parse(v);if(T&&T[bq]&&T[bq]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ai])return T}}catch(k){Mr(b,1,43,"Cannot parse the response. "+(k[dy]||Ot(k)),{response:v})}return null}s(Vr,"parseResponse");var yn="",us="NoResponseBody",Fc="&"+us+"=true",ka="POST",Oc=function(){function v(){var b=0,T,k,L,q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt;hu(v,this,function(st,wt){var Ht=!0;ys(),st[sS]=function($t,en){L=en,k&&Mr(L,1,28,"Sender is already initialized"),st.SetConfig($t),k=!0},st._getDbgPlgTargets=function(){return[k,q,ce,T]},st.SetConfig=function($t){try{if(G=$t.senderOnCompleteCallBack||{},ce=!!$t.disableCredentials,fe=$t.fetchCredentials,q=!!$t.isOneDs,T=!!$t.enableSendPromise,Re=!!$t.disableXhr,Qe=!!$t.disableBeacon,Ze=!!$t.disableBeaconSync,gt=$t.timeWrapper,Ye=!!$t.addNoResponse,He=!!$t.disableFetchKeepAlive,Ee={sendPOST:Zr},q||(Ht=!1),ce){var en=ib();en&&en.protocol&&en.protocol[Mx]()==="file:"&&(Ht=!1)}return!0}catch{}return!1},st.getSyncFetchPayload=function(){return b},st.getSenderInst=function($t,en){return $t&&$t[ai]?Fi($t,en):null},st.getFallbackInst=function(){return Ee},st[B5]=function($t,en){ys()};function or($t,en){Oi(en,200,{},$t)}s(or,"_onSuccess");function wr($t,en){Mr(L,2,26,"Failed to send telemetry.",{message:$t}),Oi(en,400,{})}s(wr,"_onError");function ei($t){wr("No endpoint url is provided for the batch",$t)}s(ei,"_onNoPayloadUrl");function Fi($t,en){for(var No=0,Pt=null,Mn=0;Pt==null&&Mn<$t[ai];)No=$t[Mn],!Re&&No===1?xL()?Pt=fa:bL()&&(Pt=Zr):No===2&&AS(en)&&(!en||!He)?Pt=Qi:No===3&&yy()&&(en?!Ze:!Qe)&&(Pt=bn),Mn++;return Pt?{_transport:No,_isSync:en,sendPOST:Pt}:null}s(Fi,"_getSenderInterface");function Oi($t,en,No,Pt){try{$t&&$t(en,No,Pt)}catch{}}s(Oi,"_doOnComplete");function qo($t,en){var No=fc(),Pt=$t[fg];if(!Pt)return ei(en),!0;Pt=$t[fg]+(Ye?Fc:yn);var Mn=$t[Wx],Pa=q?Mn:new Blob([Mn],{type:"text/plain;charset=UTF-8"}),Ho=No.sendBeacon(Pt,Pa);return Ho}s(qo,"_doBeaconSend");function bn($t,en,No){var Pt=$t[Wx];try{if(Pt)if(qo($t,en))or(yn,en);else{var Mn=G&&G.beaconOnRetry;Mn&&Oe(Mn)?Mn($t,en,qo):(Ee&&Ee.sendPOST($t,en,!0),Mr(L,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Pa){q&&sP(L,"Failed to send telemetry using sendBeacon API. Ex:"+Ot(Pa)),Oi(en,q?0:400,{},yn)}}s(bn,"_beaconSender");function Zr($t,en,No){var Pt,Mn,Pa,Ho=$t[lL]||{};!No&&T&&(Pt=Vx(function(Da,Ql){Mn=Da,Pa=Ql})),q&&No&&$t.disableXhrSync&&(No=!1);var Ol=$t[fg];if(!Ol){ei(en),Mn&&Mn(!1);return}var dt=yL(ka,Ol,Ht,!0,No,$t[pg]);q||dt.setRequestHeader("Content-type","application/json"),Gr(Tt(Ho),function(Da){dt.setRequestHeader(Da,Ho[Da])}),dt.onreadystatechange=function(){q||(Qc(dt),dt.readyState===4&&Mn&&Mn(!0))},dt.onload=function(){q&&Qc(dt)};function Qc(Da){var Ql=G&&G.xhrOnComplete,mm=Ql&&Oe(Ql);if(mm)Ql(Da,en,$t);else{var Wd=z5(Da);Oi(en,Da[cS],Y1(Da,q),Wd)}}return s(Qc,"_doOnReadyFunc"),dt.onerror=function(Da){Oi(en,q?dt[cS]:400,Y1(dt,q),q?yn:Y5(dt)),Pa&&Pa(Da)},dt.ontimeout=function(){Oi(en,q?dt[cS]:500,Y1(dt,q),q?yn:Y5(dt)),Mn&&Mn(!1)},dt.send($t[Wx]),Pt}s(Zr,"_xhrSender");function Qi($t,en,No){var Pt,Mn=$t[fg],Pa=$t[Wx],Ho=q?Pa:new Blob([Pa],{type:"application/json"}),Ol,dt,Qc,Da=new Headers,Ql=Pa[ai],mm=!1,Wd=!1,Pb=$t[lL]||{},Cg=(Pt={method:ka,body:Ho},Pt[Zq]=!0,Pt);$t.headers&&Tt($t.headers)[ai]>0&&(Gr(Tt(Pb),function(pa){Da.append(pa,Pb[pa])}),Cg[lL]=Da),fe?Cg.credentials=fe:Ht&&q&&(Cg.credentials="include"),No&&(Cg.keepalive=!0,b+=Ql,q?$t._sendReason===2&&(mm=!0,Ye&&(Mn+=Fc)):mm=!0);var Db=new Request(Mn,Cg);try{Db[Zq]=!0}catch{}if(!No&&T&&(Ol=Vx(function(pa,yu){dt=pa,Qc=yu})),!Mn){ei(en),dt&&dt(!1);return}function vg(pa){Oi(en,q?0:400,{},q?yn:pa)}s(vg,"_handleError");function Bb(pa,yu,yt){var Ir=pa[cS],qn=G.fetchOnComplete;qn&&Oe(qn)?qn(pa,en,yt||yn,yu):Oi(en,Ir,{},yt||yn)}s(Bb,"_onFetchComplete");try{Df(fetch(q?Mn:Db,q?Cg:null),function(pa){if(No&&(b-=Ql,Ql=0),!Wd)if(Wd=!0,pa.rejected)vg(pa.reason&&pa.reason[$1]),Qc&&Qc(pa.reason);else{var yu=pa[Ux];try{!q&&!yu.ok?(vg(yu.statusText),dt&&dt(!1)):q&&!yu.body?(Bb(yu,null,yn),dt&&dt(!0)):Df(yu.text(),function(yt){Bb(yu,$t,yt[Ux]),dt&&dt(!0)})}catch(yt){vg(Ot(yt)),Qc&&Qc(yt)}}})}catch(pa){Wd||(vg(Ot(pa)),Qc&&Qc(pa))}return mm&&!Wd&&(Wd=!0,Oi(en,200,{}),dt&&dt(!0)),q&&!Wd&&$t[pg]>0&&gt&&gt.set(function(){Wd||(Wd=!0,Oi(en,500,{}),dt&&dt(!0))},$t[pg]),Ol}s(Qi,"_doFetchSender");function fa($t,en,No){var Pt=Qs(),Mn=new XDomainRequest,Pa=$t[Wx];Mn.onload=function(){var Da=z5(Mn),Ql=G&&G.xdrOnComplete;Ql&&Oe(Ql)?Ql(Mn,en,$t):Oi(en,200,{},Da)},Mn.onerror=function(){Oi(en,400,{},q?yn:Fq(Mn))},Mn.ontimeout=function(){Oi(en,500,{})},Mn.onprogress=function(){};var Ho=Pt&&Pt.location&&Pt.location.protocol||"",Ol=$t[fg];if(!Ol){ei(en);return}if(!q&&Ol.lastIndexOf(Ho,0)!==0){var dt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Mr(L,2,40,". "+dt),wr(dt,en);return}var Qc=q?Ol:Ol[my](/^(https?:)/,"");Mn.open(ka,Qc),$t[pg]&&(Mn[pg]=$t[pg]),Mn.send(Pa),q&&No?gt&&gt.set(function(){Mn.send(Pa)},0):Mn.send(Pa)}s(fa,"_xdrSender");function ys(){b=0,k=!1,T=!1,L=null,q=null,G=null,ce=null,fe=null,Ee=null,Re=!1,Qe=!1,Ze=!1,He=!1,Ye=!1,gt=null}s(ys,"_initDefaults")})}return s(v,"SenderPostManager"),v.__ieDyn=1,v}(),X1="on",Ty="attachEvent",Ib="addEventListener",yH="detachEvent",CH="removeEventListener",hP="events";gg("aiEvtPageHide"),gg("aiEvtPageShow");var Hce=/\.[\.]+/g,jRe=/[\.]+$/,a1t=1,vH=Wq("events"),c1t=/^([^.]*)(?:\.(.+)|)/;function GRe(v){return v&&v[my]?v[my](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,ki):v}s(GRe,"_normalizeNamespace");function $ce(v,b){if(b){var T=ki;Je(b)?(T=ki,Gr(b,function(L){L=GRe(L),L&&(L[0]!=="."&&(L="."+L),T+=L)})):T=GRe(b),T&&(T[0]!=="."&&(T="."+T),v=(v||ki)+T)}var k=c1t.exec(v||ki)||[];return{type:k[1],ns:(k[2]||ki).replace(Hce,".").replace(jRe,ki)[py](".").sort().join(".")}}s($ce,"_getEvtNamespace");function VRe(v,b,T){T===void 0&&(T=!0);var k=vH.get(v,hP,{},T),L=k[b];return L||(L=k[b]=[]),L}s(VRe,"_getRegisteredEvents");function zRe(v,b,T,k){v&&b&&b[gu]&&(v[CH]?v[CH](b[gu],T,k):v[yH]&&v[yH](X1+b[gu],T))}s(zRe,"_doDetach");function l1t(v,b,T,k){var L=!1;return v&&b&&b[gu]&&T&&(v[Ib]?(v[Ib](b[gu],T,k),L=!0):v[Ty]&&(v[Ty](X1+b[gu],T),L=!0)),L}s(l1t,"_doAttach");function YRe(v,b,T,k){for(var L=b[ai];L--;){var q=b[L];q&&(!T.ns||T.ns===q[sL].ns)&&(!k||k(q))&&(zRe(v,q[sL],q.handler,q.capture),b[Ox](L,1))}}s(YRe,"_doUnregister");function u1t(v,b,T){if(b[gu])YRe(v,VRe(v,b[gu]),b,T);else{var k=vH.get(v,hP,{});le(k,function(L,q){YRe(v,q,b,T)}),Tt(k)[ai]===0&&vH.kill(v,hP)}}s(u1t,"_unregisterEvents");function KRe(v,b){var T;return b?(Je(b)?T=[v].concat(b):T=[v,b],T=$ce("xx",T).ns[py](".")):T=v,T}s(KRe,"mergeEvtNamespace");function JRe(v,b,T,k,L){L===void 0&&(L=!1);var q=!1;if(v)try{var G=$ce(b,k);if(q=l1t(v,G,T,L),q&&vH.accept(v)){var ce={guid:a1t++,evtName:G,handler:T,capture:L};VRe(v,G.type)[Co](ce)}}catch{}return q}s(JRe,"eventOn");function d1t(v,b,T,k,L){if(L===void 0&&(L=!1),v)try{var q=$ce(b,k),G=!1;u1t(v,q,function(ce){return q.ns&&!T||ce.handler===T?(G=!0,!0):!1}),G||zRe(v,q,T,L)}catch{}}s(d1t,"eventOff");var XRe="sampleRate",Wce="ProcessLegacy",ZRe="http.method",jce="https://dc.services.visualstudio.com",gP="/v2/track",Tb="not_specified",eke=ice({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),EH="split",Ii="length",Gce="toLowerCase",RS="ingestionendpoint",WL="toString",tke="removeItem",xH="message",f1t="count",Vce="stringify",zce="pathname",jL="match",wb="name",wy="properties",Z1="measurements",bH="sizeInBytes",IH="typeName",GL="exceptions",VL="severityLevel",Yce="problemGroup",AP="parsedStack",TH="hasFullStack",wH="assembly",ev="fileName",yP="line",SH="aiDataContract",_H="duration";function rke(v,b,T){var k=b[Ii],L=p1t(v,b);if(L[Ii]!==k){for(var q=0,G=L;T[G]!==void 0;)q++,G=Ce(L,0,147)+g1t(q);L=G}return L}s(rke,"dataSanitizeKeyAndAddUniqueness");function p1t(v,b){var T;return b&&(b=Xi(Mt(b)),b[Ii]>150&&(T=Ce(b,0,150),Mr(v,2,57,"name is too long.  It has been truncated to 150 characters.",{name:b},!0))),T||b}s(p1t,"dataSanitizeKey");function nd(v,b,T){T===void 0&&(T=1024);var k;return b&&(T=T||1024,b=Xi(Mt(b)),b[Ii]>T&&(k=Ce(b,0,T),Mr(v,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:b},!0))),k||b}s(nd,"dataSanitizeString");function Kce(v,b){return ike(v,b,2048,66)}s(Kce,"dataSanitizeUrl");function nke(v,b){var T;return b&&b[Ii]>32768&&(T=Ce(b,0,32768),Mr(v,2,56,"message is too long, it has been truncated to 32768 characters.",{message:b},!0)),T||b}s(nke,"dataSanitizeMessage");function m1t(v,b){var T;if(b){var k=""+b;k[Ii]>32768&&(T=Ce(k,0,32768),Mr(v,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:b},!0))}return T||b}s(m1t,"dataSanitizeException");function kS(v,b){if(b){var T={};le(b,function(k,L){if(Te(L)&&ob())try{L=Hd()[Vce](L)}catch(q){Mr(v,2,49,"custom property is not valid",{exception:q},!0)}L=nd(v,L,8192),k=rke(v,k,T),T[k]=L}),b=T}return b}s(kS,"dataSanitizeProperties");function PS(v,b){if(b){var T={};le(b,function(k,L){k=rke(v,k,T),T[k]=L}),b=T}return b}s(PS,"dataSanitizeMeasurements");function h1t(v,b){return b&&ike(v,b,128,69)[WL]()}s(h1t,"dataSanitizeId");function ike(v,b,T,k){var L;return b&&(b=Xi(Mt(b)),b[Ii]>T&&(L=Ce(b,0,T),Mr(v,2,k,"input is too long, it has been truncated to "+T+" characters.",{data:b},!0))),L||b}s(ike,"dataSanitizeInput");function g1t(v){var b="00"+v;return Ie(b,b[Ii]-3)}s(g1t,"dsPadNumber");var oke=dc()||{},ske=0,A1t=[null,null,null,null,null];function y1t(v){var b=ske,T=A1t,k=T[b];return oke.createElement?T[b]||(k=T[b]=oke.createElement("a")):k={host:C1t(v,!0)},k.href=v,b++,b>=T[Ii]&&(b=0),ske=b,k}s(y1t,"urlParseUrl");function C1t(v,b){var T=v1t(v,b)||"";if(T){var k=T[jL](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ii]>3&&Ae(k[2])&&k[2][Ii]>0)return k[2]+(k[3]||"")}return T}s(C1t,"urlParseHost");function v1t(v,b){var T=null;if(v){var k=v[jL](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(k!=null&&k[Ii]>2&&Ae(k[2])&&k[2][Ii]>0&&(T=k[2]||"",b&&k[Ii]>2)){var L=(k[1]||"")[Gce](),q=k[3]||"";(L==="http"&&q===":80"||L==="https"&&q===":443")&&(q=""),T+=q}}return T}s(v1t,"urlParseFullHost");var E1t=[jce+gP,"https://breeze.aimon.applicationinsights.io"+gP,"https://dc-int.services.visualstudio.com"+gP];function ake(v){return pc(E1t,v[Gce]())!==-1}s(ake,"isInternalApplicationInsightsEndpoint");function x1t(v,b,T,k){var L,q=k,G=k;if(b&&b[Ii]>0){var ce=y1t(b);if(L=ce.host,!q)if(ce[zce]!=null){var fe=ce.pathname[Ii]===0?"/":ce[zce];fe.charAt(0)!=="/"&&(fe="/"+fe),G=ce[zce],q=nd(v,T?T+" "+fe:fe)}else q=nd(v,b)}else L=k,q=k;return{target:L,name:q,data:G}}s(x1t,"AjaxHelperParseDependencyPath");var Jce=_5({LocalStorage:0,SessionStorage:1}),CP=void 0,cke="";function lke(v){try{if(ie(hi()))return null;var b=new Date()[WL](),T=Vo(v===Jce.LocalStorage?"localStorage":"sessionStorage"),k=cke+b;T.setItem(k,b);var L=T.getItem(k)!==b;if(T[tke](k),!L)return T}catch{}return null}s(lke,"_getVerifiedStorageObject");function Xce(){return uke()?lke(Jce.SessionStorage):null}s(Xce,"_getSessionStorageObject");function b1t(v){cke=v||""}s(b1t,"utlSetStoragePrefix");function uke(v){return(v||CP===void 0)&&(CP=!!lke(Jce.SessionStorage)),CP}s(uke,"utlCanUseSessionStorage");function I1t(v,b){var T=Xce();if(T!==null)try{return T.getItem(b)}catch(k){CP=!1,Mr(v,2,2,"Browser failed read of session storage. "+pl(k),{exception:Ot(k)})}return null}s(I1t,"utlGetSessionStorage");function T1t(v,b,T){var k=Xce();if(k!==null)try{return k.setItem(b,T),!0}catch(L){CP=!1,Mr(v,2,4,"Browser failed write to session storage. "+pl(L),{exception:Ot(L)})}return!1}s(T1t,"utlSetSessionStorage");function w1t(v,b){var T=Xce();if(T!==null)try{return T[tke](b),!0}catch(k){CP=!1,Mr(v,2,6,"Browser failed removal of session storage item. "+pl(k),{exception:Ot(k)})}return!1}s(w1t,"utlRemoveSessionStorage");var S1t=";",_1t="=";function Zce(v){if(!v)return{};var b=v[EH](S1t),T=$8(b,function(L,q){var G=q[EH](_1t);if(G[Ii]===2){var ce=G[0][Gce](),fe=G[1];L[ce]=fe}return L},{});if(Tt(T)[Ii]>0){if(T.endpointsuffix){var k=T.location?T.location+".":"";T[RS]=T[RS]||"https://"+k+"dc."+T.endpointsuffix}T[RS]=T[RS]||jce,gq(T[RS],"/")&&(T[RS]=T[RS].slice(0,-1))}return T}s(Zce,"parseConnectionString");var R1t=function(){function v(b,T,k){var L=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[wb]=nd(b,k)||Tb,q.data=T,q.time=dS(new Date),q[SH]={time:1,iKey:1,name:1,sampleRate:s(function(){return L.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(v,"Envelope"),v}(),vP=function(){function v(b,T,k,L){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[wb]=nd(b,T)||Tb,q[wy]=kS(b,k),q[Z1]=PS(b,L)}return s(v,"Event"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Event",v.dataType="EventData",v}(),k1t=58,P1t=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,D1t=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,B1t=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,N1t=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,L1t=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,M1t=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,F1t=/([^\(\s\n]+):([0-9]+)$/,dke="<no_method>",EP="error",pm="stack",ele="stackDetails",fke="errorSrc",tle="message",pke="description",mke=[{re:D1t,len:5,m:1,fn:2,ln:3,col:4},{chk:Q1t,pre:O1t,re:B1t,len:4,m:1,fn:2,ln:3},{re:N1t,len:3,m:1,fn:2,hdl:vke},{re:L1t,len:2,fn:1,hdl:vke}];function O1t(v){return v.replace(/(\(anonymous\))/,"<anonymous>")}s(O1t,"_scrubAnonymous");function Q1t(v){return ag(v,"[native")<0}s(Q1t,"_ignoreNative");function rle(v,b){var T=v;return T&&!Ae(T)&&(JSON&&JSON[Vce]?(T=JSON[Vce](v),b&&(!T||T==="{}")&&(Oe(v[WL])?T=v[WL]():T=""+v)):T=""+v+" - (Missing JSON.stringify)"),T||""}s(rle,"_stringify");function hke(v,b){var T=v;return v&&(T&&!Ae(T)&&(T=v[tle]||v[pke]||T),T&&!Ae(T)&&(T=rle(T,!0)),v.filename&&(T=T+" @"+(v.filename||"")+":"+(v.lineno||"?")+":"+(v.colno||"?"))),b&&b!=="String"&&b!=="Object"&&b!=="Error"&&ag(T||"",b)===-1&&(T=b+": "+T),T||""}s(hke,"_formatMessage");function U1t(v){try{if(Te(v))return"hasFullStack"in v&&"typeName"in v}catch{}return!1}s(U1t,"_isExceptionDetailsInternal");function q1t(v){try{if(Te(v))return"ver"in v&&"exceptions"in v&&"properties"in v}catch{}return!1}s(q1t,"_isExceptionInternal");function gke(v){return v&&v.src&&Ae(v.src)&&v.obj&&Je(v.obj)}s(gke,"_isStackDetails");function DS(v){var b=v||"";Ae(b)||(Ae(b[pm])?b=b[pm]:b=""+b);var T=b[EH](`
`);return{src:b,obj:T}}s(DS,"_convertStackObj");function H1t(v){for(var b=[],T=v[EH](`
`),k=0;k<T[Ii];k++){var L=T[k];T[k+1]&&(L+="@"+T[k+1],k++),b.push(L)}return{src:v,obj:b}}s(H1t,"_getOperaStack");function Ake(v){var b=null;if(v)try{if(v[pm])b=DS(v[pm]);else if(v[EP]&&v[EP][pm])b=DS(v[EP][pm]);else if(v.exception&&v.exception[pm])b=DS(v.exception[pm]);else if(gke(v))b=v;else if(gke(v[ele]))b=v[ele];else if(Qs()&&Qs().opera&&v[tle])b=H1t(v[xH]);else if(v.reason&&v.reason[pm])b=DS(v.reason[pm]);else if(Ae(v))b=DS(v);else{var T=v[tle]||v[pke]||"";Ae(v[fke])&&(T&&(T+=`
`),T+=" from "+v[fke]),T&&(b=DS(T))}}catch(k){b=DS(k)}return b||{src:"",obj:null}}s(Ake,"_getStackFromErrorObj");function $1t(v){var b="";return v&&(v.obj?b=v.obj.join(`
`):b=v.src||""),b}s($1t,"_formatStackTrace");function W1t(v){var b,T=v.obj;if(T&&T[Ii]>0){b=[];var k=0,L=!1,q=0;Gr(T,function(gt){if(L||z1t(gt)){var st=Mt(gt);L=!0;var wt=Y1t(st,k);wt&&(q+=wt[bH],b.push(wt),k++)}});var G=32*1024;if(q>G)for(var ce=0,fe=b[Ii]-1,Ee=0,Re=ce,Qe=fe;ce<fe;){var Ze=b[ce][bH],He=b[fe][bH];if(Ee+=Ze+He,Ee>G){var Ye=Qe-Re+1;b.splice(Re,Ye);break}Re=ce,Qe=fe,ce++,fe--}}return b}s(W1t,"_parseStack");function RH(v){var b="";if(v&&(b=v.typeName||v[wb]||"",!b))try{var T=/function (.{1,200})\(/,k=T.exec(v.constructor[WL]());b=k&&k[Ii]>1?k[1]:""}catch{}return b}s(RH,"_getErrorType");function nle(v){if(v)try{if(!Ae(v)){var b=RH(v),T=rle(v,!1);return(!T||T==="{}")&&(v[EP]&&(v=v[EP],b=RH(v)),T=rle(v,!0)),ag(T,b)!==0&&b!=="String"?b+":"+T:T}}catch{}return""+(v||"")}s(nle,"_formatErrorCode");var kH=function(){function v(b,T,k,L,q,G){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ce=this;ce.ver=2,q1t(T)?(ce[GL]=T[GL]||[],ce[wy]=T[wy],ce[Z1]=T[Z1],T[VL]&&(ce[VL]=T[VL]),T.id&&(ce.id=T.id,T[wy].id=T.id),T[Yce]&&(ce[Yce]=T[Yce]),ie(T.isManual)||(ce.isManual=T.isManual)):(k||(k={}),G&&(k.id=G),ce[GL]=[yke(b,T,k)],ce[wy]=kS(b,k),ce[Z1]=PS(b,L),q&&(ce[VL]=q),G&&(ce.id=G))}return s(v,"Exception"),v.CreateAutoException=function(b,T,k,L,q,G,ce,fe){var Ee=RH(q||G||b);return{message:hke(b,Ee),url:T,lineNumber:k,columnNumber:L,error:nle(q||G||b),evt:nle(G||b),typeName:Ee,stackDetails:Ake(ce||q||G),errorSrc:fe}},v.CreateFromInterface=function(b,T,k,L){var q=T[GL]&&ig(T[GL],function(ce){return V1t(b,ce)}),G=new v(b,lg(lg({},T),{exceptions:q}),k,L);return G},v.prototype.toInterface=function(){var b=this,T=b.exceptions,k=b.properties,L=b.measurements,q=b.severityLevel,G=b.problemGroup,ce=b.id,fe=b.isManual,Ee=T instanceof Array&&ig(T,function(Re){return Re.toInterface()})||void 0;return{ver:"4.0",exceptions:Ee,severityLevel:q,properties:k,measurements:L,problemGroup:G,id:ce,isManual:fe}},v.CreateSimpleException=function(b,T,k,L,q,G){var ce;return{exceptions:[(ce={},ce[TH]=!0,ce.message=b,ce.stack=q,ce.typeName=T,ce)]}},v.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",v.dataType="ExceptionData",v.formatError=nle,v}(),j1t=Xt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function G1t(){var v=this,b=Je(v[AP])&&ig(v[AP],function(k){return J1t(k)}),T={id:v.id,outerId:v.outerId,typeName:v[IH],message:v[xH],hasFullStack:v[TH],stack:v[pm],parsedStack:b||void 0};return T}s(G1t,"_toInterface");function yke(v,b,T){var k,L,q,G,ce,fe,Ee,Re;if(U1t(b))G=b[IH],ce=b[xH],Ee=b[pm],Re=b[AP]||[],fe=b[TH];else{var Qe=b,Ze=Qe&&Qe.evt;Et(Qe)||(Qe=Qe[EP]||Ze||Qe),G=nd(v,RH(Qe))||Tb,ce=nke(v,hke(b||Qe,G))||Tb;var He=b[ele]||Ake(b);Re=W1t(He),Je(Re)&&ig(Re,function(Ye){Ye[wH]=nd(v,Ye[wH]),Ye[ev]=nd(v,Ye[ev])}),Ee=m1t(v,$1t(He)),fe=Je(Re)&&Re[Ii]>0,T&&(T[IH]=T[IH]||G)}return k={},k[SH]=j1t,k.id=L,k.outerId=q,k.typeName=G,k.message=ce,k[TH]=fe,k.stack=Ee,k.parsedStack=Re,k.toInterface=G1t,k}s(yke,"_createExceptionDetails");function V1t(v,b){var T=Je(b[AP])&&ig(b[AP],function(L){return K1t(L)})||b[AP],k=yke(v,lg(lg({},b),{parsedStack:T}));return k}s(V1t,"_createExDetailsFromInterface");function Cke(v,b){var T=b[jL](M1t);if(T&&T[Ii]>=4)v[ev]=T[1],v[yP]=parseInt(T[2]);else{var k=b[jL](F1t);k&&k[Ii]>=3?(v[ev]=k[1],v[yP]=parseInt(k[2])):v[ev]=b}}s(Cke,"_parseFilename");function vke(v,b,T){var k=v[ev];b.fn&&T&&T[Ii]>b.fn&&(b.ln&&T[Ii]>b.ln?(k=Xi(T[b.fn]||""),v[yP]=parseInt(Xi(T[b.ln]||""))||0):k=Xi(T[b.fn]||"")),k&&Cke(v,k)}s(vke,"_handleFilename");function z1t(v){var b=!1;if(v&&Ae(v)){var T=Xi(v);T&&(b=P1t.test(T))}return b}s(z1t,"_isStackFrame");var Eke=Xt({level:1,method:1,assembly:0,fileName:0,line:0});function Y1t(v,b){var T,k;if(v&&Ae(v)&&Xi(v)){k=(T={},T[SH]=Eke,T.level=b,T.assembly=Xi(v),T.method=dke,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var L=0;L<mke[Ii];){var q=mke[L];if(q.chk&&!q.chk(v))break;q.pre&&(v=q.pre(v));var G=v[jL](q.re);if(G&&G[Ii]>=q.len){q.m&&(k.method=Xi(G[q.m]||dke)),q.hdl?q.hdl(k,q,G):q.fn&&(q.ln?(k[ev]=Xi(G[q.fn]||""),k[yP]=parseInt(Xi(G[q.ln]||""))||0):Cke(k,G[q.fn]||""));break}L++}}return xke(k)}s(Y1t,"_extractStackFrame");function K1t(v){var b,T=(b={},b[SH]=Eke,b.level=v.level,b.method=v.method,b.assembly=v[wH],b.fileName=v[ev],b.line=v[yP],b.sizeInBytes=0,b);return xke(T)}s(K1t,"_stackFrameFromInterface");function xke(v){var b=k1t;return v&&(b+=v.method[Ii],b+=v.assembly[Ii],b+=v.fileName[Ii],b+=v.level.toString()[Ii],b+=v.line.toString()[Ii],v[bH]=b),v}s(xke,"_populateFrameSizeInBytes");function J1t(v){return{level:v.level,method:v.method,assembly:v[wH],fileName:v[ev],line:v[yP]}}s(J1t,"_parsedFrameToInterface");var X1t=function(){function v(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(v,"DataPoint"),v}(),zL=function(){function v(b,T,k,L,q,G,ce,fe,Ee){this.aiDataContract={ver:1,metrics:1,properties:0};var Re=this;Re.ver=2;var Qe=new X1t;Qe[f1t]=L>0?L:void 0,Qe.max=isNaN(G)||G===null?void 0:G,Qe.min=isNaN(q)||q===null?void 0:q,Qe[wb]=nd(b,T)||Tb,Qe.value=k,Qe.stdDev=isNaN(ce)||ce===null?void 0:ce,Re.metrics=[Qe],Re[wy]=kS(b,fe),Re[Z1]=PS(b,Ee)}return s(v,"Metric"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",v.dataType="MetricData",v}(),YL="";function bke(v){(isNaN(v)||v<0)&&(v=0),v=Jae(v);var b=YL+v%1e3,T=YL+iy(v/1e3)%60,k=YL+iy(v/(1e3*60))%60,L=YL+iy(v/(1e3*60*60))%24,q=iy(v/(1e3*60*60*24));return b=b[Ii]===1?"00"+b:b[Ii]===2?"0"+b:b,T=T[Ii]<2?"0"+T:T,k=k[Ii]<2?"0"+k:k,L=L[Ii]<2?"0"+L:L,(q>0?q+".":YL)+L+":"+k+":"+T+"."+b}s(bke,"msToTimeSpan");var PH=function(){function v(b,T,k,L,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var fe=this;fe.ver=2,fe.id=h1t(b,ce),fe.url=Kce(b,k),fe[wb]=nd(b,T)||Tb,isNaN(L)||(fe[_H]=bke(L)),fe[wy]=kS(b,q),fe[Z1]=PS(b,G)}return s(v,"PageView"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",v.dataType="PageviewData",v}(),DH=function(){function v(b,T,k,L,q,G,ce,fe,Ee,Re,Qe,Ze){Ee===void 0&&(Ee="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var He=this;He.ver=2,He.id=T,He[_H]=bke(q),He.success=G,He.resultCode=ce+"",He.type=nd(b,Ee);var Ye=x1t(b,k,fe,L);He.data=Kce(b,L)||Ye.data,He.target=nd(b,Ye.target),Re&&(He.target="".concat(He.target," | ").concat(Re)),He[wb]=nd(b,Ye[wb]),He[wy]=kS(b,Qe),He[Z1]=PS(b,Ze)}return s(v,"RemoteDependencyData"),v.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",v.dataType="RemoteDependencyData",v}(),BH=function(){function v(b,T,k,L,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var G=this;G.ver=2,T=T||Tb,G[xH]=nke(b,T),G[wy]=kS(b,L),G[Z1]=PS(b,q),k&&(G[VL]=k)}return s(v,"Trace"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Message",v.dataType="MessageData",v}(),NH=function(){function v(b,T,k,L,q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var fe=this;fe.ver=2,fe.url=Kce(b,k),fe[wb]=nd(b,T)||Tb,fe[wy]=kS(b,q),fe[Z1]=PS(b,G),ce&&(fe.domProcessing=ce.domProcessing,fe[_H]=ce[_H],fe.networkConnect=ce.networkConnect,fe.perfTotal=ce.perfTotal,fe.receivedResponse=ce.receivedResponse,fe.sentRequest=ce.sentRequest)}return s(v,"PageViewPerformance"),v.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",v.dataType="PageviewPerformanceData",v}(),BS=function(){function v(b,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=b,this.baseData=T}return s(v,"Data"),v}(),Z1t=_5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function Sb(v){var b="ai."+v+".";return function(T){return b+T}}s(Sb,"_aiNameFunc");var KL=Sb("application"),hl=Sb("device"),LH=Sb("location"),xP=Sb("operation"),ile=Sb("session"),_b=Sb("user"),NS=Sb("cloud"),JL=Sb("internal"),Ike=function(v){oS(b,v);function b(){return v.call(this)||this}return s(b,"ContextTagKeys"),b}(pce({applicationVersion:KL("ver"),applicationBuild:KL("build"),applicationTypeId:KL("typeId"),applicationId:KL("applicationId"),applicationLayer:KL("layer"),deviceId:hl("id"),deviceIp:hl("ip"),deviceLanguage:hl("language"),deviceLocale:hl("locale"),deviceModel:hl("model"),deviceFriendlyName:hl("friendlyName"),deviceNetwork:hl("network"),deviceNetworkName:hl("networkName"),deviceOEMName:hl("oemName"),deviceOS:hl("os"),deviceOSVersion:hl("osVersion"),deviceRoleInstance:hl("roleInstance"),deviceRoleName:hl("roleName"),deviceScreenResolution:hl("screenResolution"),deviceType:hl("type"),deviceMachineName:hl("machineName"),deviceVMName:hl("vmName"),deviceBrowser:hl("browser"),deviceBrowserVersion:hl("browserVersion"),locationIp:LH("ip"),locationCountry:LH("country"),locationProvince:LH("province"),locationCity:LH("city"),operationId:xP("id"),operationName:xP("name"),operationParentId:xP("parentId"),operationRootId:xP("rootId"),operationSyntheticSource:xP("syntheticSource"),operationCorrelationVector:xP("correlationVector"),sessionId:ile("id"),sessionIsFirst:ile("isFirst"),sessionIsNew:ile("isNew"),userAccountAcquisitionDate:_b("accountAcquisitionDate"),userAccountId:_b("accountId"),userAgent:_b("userAgent"),userId:_b("id"),userStoreRegion:_b("storeRegion"),userAuthUserId:_b("authUserId"),userAnonymousUserAcquisitionDate:_b("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:_b("authUserAcquisitionDate"),cloudName:NS("name"),cloudRole:NS("role"),cloudRoleVer:NS("roleVer"),cloudRoleInstance:NS("roleInstance"),cloudEnvironment:NS("environment"),cloudLocation:NS("location"),cloudDeploymentUnit:NS("deploymentUnit"),internalNodeName:JL("nodeName"),internalSdkVersion:JL("sdkVersion"),internalAgentVersion:JL("agentVersion"),internalSnippet:JL("snippet"),internalSdkSrc:JL("sdkSrc")})),Ml=new Ike;function Tke(v,b){d1t(v,null,null,b)}s(Tke,"_disableEvents");function evt(v){var b=dc(),T=fc(),k=!1,L=[],q=1;T&&!ie(T.onLine)&&!T.onLine&&(q=2);var G=0,ce=Ze(),fe=KRe(gg("OfflineListener"),v);try{if(Re(Qs())&&(k=!0),b){var Ee=b.body||b;Ee.ononline&&Re(Ee)&&(k=!0)}}catch{k=!1}function Re(or){var wr=!1;return or&&(wr=JRe(or,"online",gt,fe),wr&&JRe(or,"offline",st,fe)),wr}s(Re,"_enableEvents");function Qe(){return ce}s(Qe,"_isOnline");function Ze(){return!(G===2||q===2)}s(Ze,"calCurrentState");function He(){var or=Ze();ce!==or&&(ce=or,Gr(L,function(wr){var ei={isOnline:ce,rState:q,uState:G};try{wr(ei)}catch{}}))}s(He,"listnerNoticeCheck");function Ye(or){G=or,He()}s(Ye,"setOnlineState");function gt(){q=1,He()}s(gt,"_setOnline");function st(){q=2,He()}s(st,"_setOffline");function wt(){var or=Qs();if(or&&k){if(Tke(or,fe),b){var wr=b.body||b;$(wr.ononline)||Tke(wr,fe)}k=!1}}s(wt,"_unload");function Ht(or){return L.push(or),{rm:s(function(){var wr=L.indexOf(or);if(wr>-1)return L.splice(wr,1)},"rm")}}return s(Ht,"addListener"),{isOnline:Qe,isListening:s(function(){return k},"isListening"),unload:wt,addListener:Ht,setOnlineState:Ye}}s(evt,"createOfflineListener");var tvt="AppInsightsChannelPlugin",LS="duration",Au="tags",ole="deviceType",j0="data",tv="name",XL="traceID",Di="length",ZL="stringify",MS="measurements",Sy="dataType",OS="envelopeType",QS="toString",US="enqueue",qS="count",rv="push",sle="emitLineDelimitedJson",bP="clear",MH="markAsSent",eM="clearSent",ale="bufferOverride",tM="BUFFER_KEY",Rb="SENT_BUFFER_KEY",IP="concat",rM="MAX_BUFFER_SIZE",nM="triggerSend",id="diagLog",cle="initialize",iM="_sender",oM="endpointUrl",sM="instrumentationKey",lle="customHeaders",wke="maxBatchSizeInBytes",ule="onunloadDisableBeacon",dle="isBeaconApiDisabled",Ske="alwaysUseXhrOverride",_ke="enableSessionStorageBuffer",_y="_buffer",Rke="onunloadDisableFetch",kke="disableSendBeaconSplit",FH="getSenderInst",HS="_onError",fle="_onPartialSuccess",OH="_onSuccess",ple="itemsReceived",mle="itemsAccepted",hle="baseType",QH="sampleRate",rvt="getHashCodeScore",gle="baseType",da="baseData",Fl="properties",Pke="true";function Ac(v,b,T){return gy(v,b,T,ue)}s(Ac,"_setValueIf");function nvt(v,b,T){var k=T[Au]=T[Au]||{},L=b.ext=b.ext||{},q=b[Au]=b[Au]||[],G=L.user;G&&(Ac(k,Ml.userAuthUserId,G.authId),Ac(k,Ml.userId,G.id||G.localId));var ce=L.app;ce&&Ac(k,Ml.sessionId,ce.sesId);var fe=L.device;fe&&(Ac(k,Ml.deviceId,fe.id||fe.localId),Ac(k,Ml[ole],fe.deviceClass),Ac(k,Ml.deviceIp,fe.ip),Ac(k,Ml.deviceModel,fe.model),Ac(k,Ml[ole],fe[ole]));var Ee=b.ext.web;if(Ee){Ac(k,Ml.deviceLanguage,Ee.browserLang),Ac(k,Ml.deviceBrowserVersion,Ee.browserVer),Ac(k,Ml.deviceBrowser,Ee.browser);var Re=T[j0]=T[j0]||{},Qe=Re[da]=Re[da]||{},Ze=Qe[Fl]=Qe[Fl]||{};Ac(Ze,"domain",Ee.domain),Ac(Ze,"isManual",Ee.isManual?Pke:null),Ac(Ze,"screenRes",Ee.screenRes),Ac(Ze,"userConsent",Ee.userConsent?Pke:null)}var He=L.os;He&&(Ac(k,Ml.deviceOS,He[tv]),Ac(k,Ml.deviceOSVersion,He.osVer));var Ye=L.trace;Ye&&(Ac(k,Ml.operationParentId,Ye.parentID),Ac(k,Ml.operationName,nd(v,Ye[tv])),Ac(k,Ml.operationId,Ye[XL]));for(var gt={},st=q[Di]-1;st>=0;st--){var wt=q[st];le(wt,function(or,wr){gt[or]=wr}),q.splice(st,1)}le(q,function(or,wr){gt[or]=wr});var Ht=lg(lg({},k),gt);Ht[Ml.internalSdkVersion]||(Ht[Ml.internalSdkVersion]=nd(v,"javascript:".concat(ivt.Version),64)),T[Au]=gL(Ht)}s(nvt,"_extractPartAExtensions");function kb(v,b,T){ie(v)||le(v,function(k,L){lt(L)?T[k]=L:Ae(L)?b[k]=L:ob()&&(b[k]=Hd()[ZL](L))})}s(kb,"_extractPropsAndMeasurements");function $S(v,b){ie(v)||le(v,function(T,k){v[T]=k||b})}s($S,"_convertPropsUndefinedToCustomDefinedValue");function WS(v,b,T,k){var L=new R1t(v,k,b);Ac(L,"sampleRate",T[XRe]),(T[da]||{}).startTime&&(L.time=dS(T[da].startTime)),L.iKey=T.iKey;var q=T.iKey.replace(/-/g,"");return L[tv]=L[tv].replace("{0}",q),nvt(v,T,L),T[Au]=T[Au]||[],gL(L)}s(WS,"_createEnvelope");function jS(v,b){ie(b[da])&&Mr(v,1,46,"telemetryItem.baseData cannot be null.")}s(jS,"EnvelopeCreatorInit");var ivt={Version:"3.3.6"};function ovt(v,b,T){jS(v,b);var k=b[da][MS]||{},L=b[da][Fl]||{};kb(b[j0],L,k),ie(T)||$S(L,T);var q=b[da];if(ie(q))return sP(v,"Invalid input for dependency data"),null;var G=q[Fl]&&q[Fl][ZRe]?q[Fl][ZRe]:"GET",ce=new DH(v,q.id,q.target,q[tv],q[LS],q.success,q.responseCode,G,q.type,q.correlationContext,L,k),fe=new BS(DH[Sy],ce);return WS(v,DH[OS],b,fe)}s(ovt,"DependencyEnvelopeCreator");function Dke(v,b,T){jS(v,b);var k={},L={};b[gle]!==vP[Sy]&&(k.baseTypeSource=b[gle]),b[gle]===vP[Sy]?(k=b[da][Fl]||{},L=b[da][MS]||{}):b[da]&&kb(b[da],k,L),kb(b[j0],k,L),ie(T)||$S(k,T);var q=b[da][tv],G=new vP(v,q,k,L),ce=new BS(vP[Sy],G);return WS(v,vP[OS],b,ce)}s(Dke,"EventEnvelopeCreator");function svt(v,b,T){jS(v,b);var k=b[da][MS]||{},L=b[da][Fl]||{};kb(b[j0],L,k),ie(T)||$S(L,T);var q=b[da],G=kH.CreateFromInterface(v,q,L,k),ce=new BS(kH[Sy],G);return WS(v,kH[OS],b,ce)}s(svt,"ExceptionEnvelopeCreator");function avt(v,b,T){jS(v,b);var k=b[da],L=k[Fl]||{},q=k[MS]||{};kb(b[j0],L,q),ie(T)||$S(L,T);var G=new zL(v,k[tv],k.average,k.sampleCount,k.min,k.max,k.stdDev,L,q),ce=new BS(zL[Sy],G);return WS(v,zL[OS],b,ce)}s(avt,"MetricEnvelopeCreator");function cvt(v,b,T){jS(v,b);var k,L=b[da];!ie(L)&&!ie(L[Fl])&&!ie(L[Fl][LS])?(k=L[Fl][LS],delete L[Fl][LS]):!ie(b[j0])&&!ie(b[j0][LS])&&(k=b[j0][LS],delete b[j0][LS]);var q=b[da],G;((b.ext||{}).trace||{})[XL]&&(G=b.ext.trace[XL]);var ce=q.id||G,fe=q[tv],Ee=q.uri,Re=q[Fl]||{},Qe=q[MS]||{};if(ie(q.refUri)||(Re.refUri=q.refUri),ie(q.pageType)||(Re.pageType=q.pageType),ie(q.isLoggedIn)||(Re.isLoggedIn=q.isLoggedIn[QS]()),!ie(q[Fl])){var Ze=q[Fl];le(Ze,function(gt,st){Re[gt]=st})}kb(b[j0],Re,Qe),ie(T)||$S(Re,T);var He=new PH(v,fe,Ee,k,Re,Qe,ce),Ye=new BS(PH[Sy],He);return WS(v,PH[OS],b,Ye)}s(cvt,"PageViewEnvelopeCreator");function lvt(v,b,T){jS(v,b);var k=b[da],L=k[tv],q=k.uri||k.url,G=k[Fl]||{},ce=k[MS]||{};kb(b[j0],G,ce),ie(T)||$S(G,T);var fe=new NH(v,L,q,void 0,G,ce,k),Ee=new BS(NH[Sy],fe);return WS(v,NH[OS],b,Ee)}s(lvt,"PageViewPerformanceEnvelopeCreator");function uvt(v,b,T){jS(v,b);var k=b[da].message,L=b[da].severityLevel,q=b[da][Fl]||{},G=b[da][MS]||{};kb(b[j0],q,G),ie(T)||$S(q,T);var ce=new BH(v,k,L,q,G),fe=new BS(BH[Sy],ce);return WS(v,BH[OS],b,fe)}s(uvt,"TraceEnvelopeCreator");var Bke=function(){function v(b,T){var k=[],L=!1,q=T.maxRetryCnt;this._get=function(){return k},this._set=function(G){return k=G,k},hu(v,this,function(G){G[US]=function(ce){if(G[qS]()>=T.eventsLimitInMem){L||(Mr(b,2,105,"Maximum in-memory buffer size reached: "+G[qS](),!0),L=!0);return}ce.cnt=ce.cnt||0,!(!ie(q)&&ce.cnt>q)&&k[rv](ce)},G[qS]=function(){return k[Di]},G.size=function(){for(var ce=k[Di],fe=0;fe<k[Di];fe++)ce+=k[fe].item[Di];return T[sle]||(ce+=2),ce},G[bP]=function(){k=[],L=!1},G.getItems=function(){return k.slice(0)},G.batchPayloads=function(ce){if(ce&&ce[Di]>0){var fe=[];Gr(ce,function(Re){fe[rv](Re.item)});var Ee=T[sle]?fe.join(`
`):"["+fe.join(",")+"]";return Ee}return null},G.createNew=function(ce,fe,Ee){var Re=k.slice(0);ce=ce||b,fe=fe||{};var Qe=Ee?new Nke(ce,fe):new Ale(ce,fe);return Gr(Re,function(Ze){Qe[US](Ze)}),Qe}})}return s(v,"BaseSendBuffer"),v.__ieDyn=1,v}(),Ale=function(v){oS(b,v);function b(T,k){var L=v.call(this,T,k)||this;return hu(b,L,function(q,G){q[MH]=function(ce){G[bP]()},q[eM]=function(ce){}}),L}return s(b,"ArraySendBuffer"),b.__ieDyn=1,b}(Bke),dvt=["AI_buffer","AI_sentBuffer"],Nke=function(v){oS(b,v);function b(k,L){var q=v.call(this,k,L)||this,G=!1,ce=L?.namePrefix,fe=L[ale]||{getItem:I1t,setItem:T1t},Ee=fe.getItem,Re=fe.setItem,Qe=L.maxRetryCnt;return hu(b,q,function(Ze,He){var Ye=wr(b[tM]),gt=wr(b[Rb]),st=Oi(),wt=gt[IP](st),Ht=Ze._set(Ye[IP](wt));Ht[Di]>b[rM]&&(Ht[Di]=b[rM]),Fi(b[Rb],[]),Fi(b[tM],Ht),Ze[US]=function(bn){if(Ze[qS]()>=b[rM]){G||(Mr(k,2,67,"Maximum buffer size reached: "+Ze[qS](),!0),G=!0);return}bn.cnt=bn.cnt||0,!(!ie(Qe)&&bn.cnt>Qe)&&(He[US](bn),Fi(b[tM],Ze._get()))},Ze[bP]=function(){He[bP](),Fi(b[tM],Ze._get()),Fi(b[Rb],[]),G=!1},Ze[MH]=function(bn){Fi(b[tM],Ze._set(or(bn,Ze._get())));var Zr=wr(b[Rb]);Zr instanceof Array&&bn instanceof Array&&(Zr=Zr[IP](bn),Zr[Di]>b[rM]&&(Mr(k,1,67,"Sent buffer reached its maximum size: "+Zr[Di],!0),Zr[Di]=b[rM]),Fi(b[Rb],Zr))},Ze[eM]=function(bn){var Zr=wr(b[Rb]);Zr=or(bn,Zr),Fi(b[Rb],Zr)},Ze.createNew=function(bn,Zr,Qi){Qi=!!Qi;var fa=Ze._get().slice(0),ys=wr(b[Rb]).slice(0);bn=bn||k,Zr=Zr||{},Ze[bP]();var $t=Qi?new b(bn,Zr):new Ale(bn,Zr);return Gr(fa,function(en){$t[US](en)}),Qi&&$t[MH](ys),$t};function or(bn,Zr){var Qi=[],fa=[];return Gr(bn,function(ys){fa[rv](ys.item)}),Gr(Zr,function(ys){!Oe(ys)&&pc(fa,ys.item)===-1&&Qi[rv](ys)}),Qi}s(or,"_removePayloadsFromBuffer");function wr(bn){var Zr=bn;return Zr=ce?ce+"_"+Zr:Zr,ei(Zr)}s(wr,"_getBuffer");function ei(bn){try{var Zr=Ee(k,bn);if(Zr){var Qi=Hd().parse(Zr);if(Ae(Qi)&&(Qi=Hd().parse(Qi)),Qi&&Je(Qi))return Qi}}catch(fa){Mr(k,1,42," storage key: "+bn+", "+pl(fa),{exception:Ot(fa)})}return[]}s(ei,"_getBufferBase");function Fi(bn,Zr){var Qi=bn;try{Qi=ce?ce+"_"+Qi:Qi;var fa=JSON[ZL](Zr);Re(k,Qi,fa)}catch(ys){Re(k,Qi,JSON[ZL]([])),Mr(k,2,41," storage key: "+Qi+", "+pl(ys)+". Buffer cleared",{exception:Ot(ys)})}}s(Fi,"_setBuffer");function Oi(){var bn=[];try{return Gr(dvt,function(Zr){var Qi=qo(Zr);if(bn=bn[IP](Qi),ce){var fa=ce+"_"+Zr,ys=qo(fa);bn=bn[IP](ys)}}),bn}catch(Zr){Mr(k,2,41,"Transfer events from previous buffers: "+pl(Zr)+". previous Buffer items can not be removed",{exception:Ot(Zr)})}return[]}s(Oi,"_getPreviousEvents");function qo(bn){try{var Zr=ei(bn),Qi=[];return Gr(Zr,function(fa){var ys={item:fa,cnt:0};Qi[rv](ys)}),w1t(k,bn),Qi}catch{}return[]}s(qo,"_getItemsFromPreviousKey")}),q}s(b,"SessionStorageSendBuffer");var T;return T=b,b.VERSION="_1",b.BUFFER_KEY="AI_buffer"+T.VERSION,b.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,b.MAX_BUFFER_SIZE=2e3,b}(Bke),fvt=function(){function v(b){hu(v,this,function(T){T.serialize=function(G){var ce=k(G,"root");try{return Hd()[ZL](ce)}catch(fe){Mr(b,1,48,fe&&Oe(fe[QS])?fe[QS]():"Error serializing object",null,!0)}};function k(G,ce){var fe="__aiCircularRefCheck",Ee={};if(!G)return Mr(b,1,48,"cannot serialize object because it is null or undefined",{name:ce},!0),Ee;if(G[fe])return Mr(b,2,50,"Circular reference detected while serializing object",{name:ce},!0),Ee;if(!G.aiDataContract){if(ce==="measurements")Ee=q(G,"number",ce);else if(ce==="properties")Ee=q(G,"string",ce);else if(ce==="tags")Ee=q(G,"string",ce);else if(Je(G))Ee=L(G,ce);else{Mr(b,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ce},!0);try{Hd()[ZL](G),Ee=G}catch(Re){Mr(b,1,48,Re&&Oe(Re[QS])?Re[QS]():"Error serializing object",null,!0)}}return Ee}return G[fe]=!0,le(G.aiDataContract,function(Re,Qe){var Ze=Oe(Qe)?Qe()&1:Qe&1,He=Oe(Qe)?Qe()&4:Qe&4,Ye=Qe&2,gt=G[Re]!==void 0,st=Te(G[Re])&&G[Re]!==null;if(Ze&&!gt&&!Ye)Mr(b,1,24,"Missing required field specification. The field is required but not present on source",{field:Re,name:ce});else if(!He){var wt=void 0;st?Ye?wt=L(G[Re],Re):wt=k(G[Re],Re):wt=G[Re],wt!==void 0&&(Ee[Re]=wt)}}),delete G[fe],Ee}s(k,"_serializeObject");function L(G,ce){var fe;if(G)if(!Je(G))Mr(b,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ce},!0);else{fe=[];for(var Ee=0;Ee<G[Di];Ee++){var Re=G[Ee],Qe=k(Re,ce+"["+Ee+"]");fe[rv](Qe)}}return fe}s(L,"_serializeArray");function q(G,ce,fe){var Ee;return G&&(Ee={},le(G,function(Re,Qe){if(ce==="string")Qe===void 0?Ee[Re]="undefined":Qe===null?Ee[Re]="null":Qe[QS]?Ee[Re]=Qe[QS]():Ee[Re]="invalid field: toString() is not defined.";else if(ce==="number")if(Qe===void 0)Ee[Re]="undefined";else if(Qe===null)Ee[Re]="null";else{var Ze=parseFloat(Qe);Ee[Re]=Ze}else Ee[Re]="invalid field: "+fe+" is of unknown type.",Mr(b,1,Ee[Re],null,!0)})),Ee}s(q,"_serializeStringMap")})}return s(v,"Serializer"),v.__ieDyn=1,v}(),pvt=8,mvt=function(){function v(){}return s(v,"HashCodeScoreGenerator"),v.prototype.getHashCodeScore=function(b){var T=this.getHashCode(b)/v.INT_MAX_VALUE;return T*100},v.prototype.getHashCode=function(b){if(b==="")return 0;for(;b[Di]<pvt;)b=b[IP](b);for(var T=5381,k=0;k<b[Di];++k)T=(T<<5)+T+b.charCodeAt(k),T=T&T;return Math.abs(T)},v.INT_MAX_VALUE=2147483647,v}(),hvt=function(){function v(){var b=this,T=new mvt,k=new Ike;b.getSamplingScore=function(L){var q=0;return L[Au]&&L[Au][k.userId]?q=T.getHashCodeScore(L[Au][k.userId]):L.ext&&L.ext.user&&L.ext.user.id?q=T[rvt](L.ext.user.id):L[Au]&&L[Au][k.operationId]?q=T.getHashCodeScore(L[Au][k.operationId]):L.ext&&L.ext.telemetryTrace&&L.ext.telemetryTrace[XL]?q=T.getHashCodeScore(L.ext.telemetryTrace[XL]):q=Math.random()*100,q}}return s(v,"SamplingScoreGenerator"),v}(),gvt=function(){function v(b,T){this.INT_MAX_VALUE=2147483647;var k=T||xS(null);(b>100||b<0)&&(k.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:b},!0),b=100),this[QH]=b,this.samplingScoreGenerator=new hvt}return s(v,"Sample"),v.prototype.isSampledIn=function(b){var T=this[QH],k=!1;return T==null||T>=100||b.baseType===zL[Sy]?!0:(k=this.samplingScoreGenerator.getSamplingScore(b)<T,k)},v}(),Us,nv,Ry=void 0,Lke="",Avt=65e3;function Mke(v){try{return v.responseText}catch{}return null}s(Mke,"_getResponseText");function yvt(v){return v&&v.sendPOST}s(yvt,"isOverrideFn");var Fke=ir((Us={endpointUrl:kL(ue,jce+gP)},Us[sle]=um(),Us.maxBatchInterval=15e3,Us[wke]=102400,Us.disableTelemetry=um(),Us[_ke]=um(!0),Us.isRetryDisabled=um(),Us[dle]=um(!0),Us[kke]=um(!0),Us.disableXhr=um(),Us[Rke]=um(),Us[ule]=um(),Us[sM]=Ry,Us.namePrefix=Ry,Us.samplingPercentage=kL(Cvt,100),Us[lle]=Ry,Us.convertUndefined=Ry,Us.eventsLimitInMem=1e4,Us[ale]=!1,Us.httpXHROverride={isVal:yvt,v:Ry},Us[Ske]=um(),Us.transports=Ry,Us.retryCodes=Ry,Us.maxRetryCnt={isVal:lt,v:10},Us));function Cvt(v){return!isNaN(v)&&v>0&&v<=100}s(Cvt,"_chkSampling");var vvt=(nv={},nv[vP.dataType]=Dke,nv[BH.dataType]=uvt,nv[PH.dataType]=cvt,nv[NH.dataType]=lvt,nv[kH.dataType]=svt,nv[zL.dataType]=avt,nv[DH.dataType]=ovt,nv),Oke=function(v){oS(b,v);function b(){var T=v.call(this)||this;T.priority=1001,T.identifier=tvt;var k,L,q,G,ce,fe,Ee,Re=0,Qe,Ze,He,Ye,gt,st,wt,Ht,or,wr,ei,Fi,Oi,qo,bn,Zr,Qi,fa,ys,$t,en,No,Pt,Mn,Pa,Ho,Ol;return hu(b,T,function(dt,Qc){Uke(),dt.pause=function(){Nb(),q=!0},dt.resume=function(){q&&(q=!1,L=null,ts(),_P())},dt.flush=function(Ve,It,ur){if(Ve===void 0&&(Ve=!0),!q){Nb();try{return dt[nM](Ve,null,ur||1)}catch(Hr){Mr(dt[id](),1,22,"flush failed, telemetry will not be collected: "+pl(Hr),{exception:Ot(Hr)})}}},dt.onunloadFlush=function(){if(!q)if(wt||$t)try{return dt[nM](!0,Of,2)}catch(Ve){Mr(dt[id](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+pl(Ve),{exception:Ot(Ve)})}else dt.flush(!1)},dt.addHeader=function(Ve,It){Ee[Ve]=It},dt[cle]=function(Ve,It,ur,Hr){dt.isInitialized()&&Mr(dt[id](),1,28,"Sender is already initialized"),Qc[cle](Ve,It,ur,Hr);var $n=dt.identifier;ce=new fvt(It.logger),k=0,L=null,dt[iM]=null,fe=0;var wn=dt[id]();He=KRe(gg("Sender"),It.evtNamespace&&It.evtNamespace()),Ze=evt(He),dt._addHook(Ag(Ve,function(vo){var yc=vo.cfg;yc.storagePrefix&&b1t(yc.storagePrefix);var G0=xb(null,yc,It),Ei=G0.getExtCfg($n,Fke),qke=Ei[oM];if(Ye&&qke===Ye){var vle=yc[oM];vle&&vle!==qke&&(Ei[oM]=vle)}ht(Ei[sM])&&(Ei[sM]=yc[sM]),je(dt,"_senderConfig",{g:s(function(){return Ei},"g")}),gt!==Ei[oM]&&(Ye=gt=Ei[oM]),It.activeStatus()===ly.PENDING?dt.pause():It.activeStatus()===ly.ACTIVE&&dt.resume(),wr&&wr!==Ei[lle]&&Gr(wr,function(Cu){delete Ee[Cu.header]}),st=Ei[wke],wt=(Ei[ule]===!1||Ei[dle]===!1)&&yy(),Ht=Ei[ule]===!1&&yy(),or=Ei[dle]===!1&&yy(),$t=Ei[Ske],en=!!Ei.disableXhr,Ol=Ei.retryCodes;var Ele=Ei[ale],RP=!!Ei[_ke]&&(!!Ele||uke()),Hke=Ei.namePrefix,Ivt=RP!==Zr||RP&&fa!==Hke||RP&&Qi!==Ele;if(dt[_y]){if(Ivt)try{dt[_y]=dt[_y].createNew(wn,Ei,RP)}catch(Cu){Mr(dt[id](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+pl(Cu),{exception:Ot(Cu)})}ts()}else dt[_y]=RP?new Nke(wn,Ei):new Ale(wn,Ei);fa=Hke,Zr=RP,Qi=Ele,No=!Ei[Rke]&&AS(!0),Pa=!!Ei[kke],dt._sample=new gvt(Ei.samplingPercentage,wn),Fi=Ei[sM],!ht(Fi)&&!Qke(Fi,yc)&&Mr(wn,1,100,"Invalid Instrumentation key "+Fi),wr=Ei[lle],Ae(Ye)&&!ake(Ye)&&wr&&wr[Di]>0?Gr(wr,function(Cu){T.addHeader(Cu.header,Cu.value)}):wr=null,ys=Ei.enableSendPromise;var $ke=Ql();Ho?Ho.SetConfig($ke):(Ho=new Oc,Ho[cle]($ke,wn));var $H=Ei.httpXHROverride,WH=null,uM=null,Tvt=Oq([3,1,2],Ei.transports);WH=Ho&&Ho[FH](Tvt,!1);var xle=Ho&&Ho.getFallbackInst();Pt=s(function(Cu,GS){return zr(xle,Cu,GS)},"_xhrSend"),Mn=s(function(Cu,GS){return zr(xle,Cu,GS,!1)},"_fallbackSend"),WH=$t?$H:WH||$H||xle,dt[iM]=function(Cu,GS){return zr(WH,Cu,GS)},No&&(Qe=SP);var ble=Oq([3,1],Ei.unloadTransports);No||(ble=ble.filter(function(Cu){return Cu!==2})),uM=Ho&&Ho[FH](ble,!0),uM=$t?$H:uM||$H,($t||Ei.unloadTransports||!Qe)&&uM&&(Qe=s(function(Cu,GS){return zr(uM,Cu,GS)},"_syncUnloadSender")),Qe||(Qe=Pt),ei=Ei.disableTelemetry,Oi=Ei.convertUndefined||Ry,qo=Ei.isRetryDisabled,bn=Ei.maxBatchInterval}))},dt.processTelemetry=function(Ve,It){It=dt._getTelCtx(It);var ur=It[id]();try{var Hr=vg(Ve,ur);if(!Hr)return;var $n=Bb(Ve,ur);if(!$n)return;var wn=ce.serialize($n),vo=dt[_y];ts(wn);var yc={item:wn,cnt:0};vo[US](yc),_P()}catch(G0){Mr(ur,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+pl(G0),{exception:Ot(G0)})}dt.processNext(Ve,It)},dt.isCompletelyIdle=function(){return!q&&Re===0&&dt._buffer[qS]()===0},dt.getOfflineListener=function(){return Ze},dt._xhrReadyStateChange=function(Ve,It,ur){if(!xg(It))return mm(Ve,It,ur)},dt[nM]=function(Ve,It,ur){Ve===void 0&&(Ve=!0);var Hr;if(!q)try{var $n=dt[_y];if(ei)$n[bP]();else if($n[qS]()>0){var wn=$n.getItems();HH(ur||0,Ve),It?Hr=It.call(dt,wn,Ve):Hr=dt[iM](wn,Ve)}Nb()}catch(yc){var vo=sb();(!vo||vo>9)&&Mr(dt[id](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+pl(yc),{exception:Ot(yc)})}return Hr},dt.getOfflineSupport=function(){return{getUrl:s(function(){return Ye},"getUrl"),createPayload:yt,serialize:pa,batch:yu,shouldProcess:s(function(Ve){return!!vg(Ve)},"shouldProcess")}},dt._doTeardown=function(Ve,It){dt.onunloadFlush(),mb(Ze,!1),Uke()},dt[HS]=function(Ve,It,ur){if(!xg(Ve))return Wd(Ve,It)},dt[fle]=function(Ve,It){if(!xg(Ve))return Pb(Ve,It)},dt[OH]=function(Ve,It){if(!xg(Ve))return Cg(Ve)},dt._xdrOnLoad=function(Ve,It){if(!xg(It))return Da(Ve,It)};function Da(Ve,It){var ur=Mke(Ve);if(Ve&&(ur+""=="200"||ur===""))k=0,dt[OH](It,0);else{var Hr=Vr(ur);Hr&&Hr[ple]&&Hr[ple]>Hr[mle]&&!qo?dt[fle](It,Hr):dt[HS](It,Fq(Ve))}}s(Da,"_xdrOnLoad");function Ql(){try{var Ve={xdrOnComplete:s(function(ur,Hr,$n){var wn=Db($n);if(wn)return Da(ur,wn)},"xdrOnComplete"),fetchOnComplete:s(function(ur,Hr,$n,wn){var vo=Db(wn);if(vo)return qs(ur.status,vo,ur.url,vo[Di],ur.statusText,$n||"")},"fetchOnComplete"),xhrOnComplete:s(function(ur,Hr,$n){var wn=Db($n);if(wn)return mm(ur,wn,wn[Di])},"xhrOnComplete"),beaconOnRetry:s(function(ur,Hr,$n){return Eg(ur,Hr,$n)},"beaconOnRetry")},It={enableSendPromise:ys,isOneDs:!1,disableCredentials:!1,disableXhr:en,disableBeacon:!or,disableBeaconSync:!Ht,senderOnCompleteCallBack:Ve};return It}catch{}return null}s(Ql,"_getSendPostMgrConfig");function mm(Ve,It,ur){Ve.readyState===4&&qs(Ve.status,It,Ve.responseURL,ur,Y5(Ve),Mke(Ve)||Ve.response)}s(mm,"_xhrReadyStateChange");function Wd(Ve,It,ur){Mr(dt[id](),2,26,"Failed to send telemetry.",{message:It}),dt._buffer&&dt._buffer[eM](Ve)}s(Wd,"_onError");function Pb(Ve,It){for(var ur=[],Hr=[],$n=It.errors.reverse(),wn=0,vo=$n;wn<vo.length;wn++){var yc=vo[wn],G0=Ve.splice(yc.index,1)[0];Lb(yc.statusCode)?Hr[rv](G0):ur[rv](G0)}Ve[Di]>0&&dt[OH](Ve,It[mle]),ur[Di]>0&&dt[HS](ur,Y5(null,["partial success",It[mle],"of",It.itemsReceived].join(" "))),Hr[Di]>0&&(lM(Hr),Mr(dt[id](),2,40,"Partial success. Delivered: "+Ve[Di]+", Failed: "+ur[Di]+". Will retry to send "+Hr[Di]+" our of "+It[ple]+" items"))}s(Pb,"_onPartialSuccess");function Cg(Ve,It){dt._buffer&&dt._buffer[eM](Ve)}s(Cg,"_onSuccess");function Db(Ve){try{if(Ve){var It=Ve,ur=It.oriPayload;return ur&&ur[Di]?ur:null}}catch{}return null}s(Db,"_getPayloadArr");function vg(Ve,It){if(ei)return!1;if(!Ve)return It&&Mr(It,1,7,"Cannot send empty telemetry"),!1;if(Ve.baseData&&!Ve[hle])return It&&Mr(It,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ve[hle]||(Ve[hle]="EventData"),!dt[iM])return It&&Mr(It,1,28,"Sender was not initialized"),!1;if(Ir(Ve))Ve[XRe]=dt._sample[QH];else return It&&Mr(It,2,33,"Telemetry item was sampled out and not sent",{SampleRate:dt._sample[QH]}),!1;return!0}s(vg,"_validate");function Bb(Ve,It){var ur=Ve.iKey||Fi,Hr=b.constructEnvelope(Ve,ur,It,Oi);if(!Hr){Mr(It,1,47,"Unable to create an AppInsights envelope");return}var $n=!1;if(Ve[Au]&&Ve[Au][Wce]&&(Gr(Ve[Au][Wce],function(wn){try{wn&&wn(Hr)===!1&&($n=!0,sP(It,"Telemetry processor check returns false"))}catch(vo){Mr(It,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+pl(vo),{exception:Ot(vo)},!0)}}),delete Ve[Au][Wce]),!$n)return Hr}s(Bb,"_getEnvelope");function pa(Ve){var It=Lke,ur=dt[id]();try{var Hr=vg(Ve,ur),$n=null;Hr&&($n=Bb(Ve,ur)),$n&&(It=ce.serialize($n))}catch{}return It}s(pa,"_serialize");function yu(Ve){var It=Lke;return Ve&&Ve[Di]&&(It="["+Ve.join(",")+"]"),It}s(yu,"_batch");function yt(Ve){var It=zo();return{urlString:Ye,data:Ve,headers:It}}s(yt,"_createPayload");function Ir(Ve){return dt._sample.isSampledIn(Ve)}s(Ir,"_isSampledIn");function qn(Ve,It,ur,Hr){It===200&&Ve?dt._onSuccess(Ve,Ve[Di]):Hr&&dt[HS](Ve,Hr)}s(qn,"_getOnComplete");function zr(Ve,It,ur,Hr){Hr===void 0&&(Hr=!0);var $n=s(function(yc,G0,Ei){return qn(It,yc,G0,Ei)},"onComplete"),wn=Hn(It),vo=Ve&&Ve.sendPOST;return vo&&wn?(Hr&&dt._buffer[MH](It),vo(wn,$n,!ur)):null}s(zr,"_doSend");function Hn(Ve){if(Je(Ve)&&Ve[Di]>0){var It=dt[_y].batchPayloads(Ve),ur=zo(),Hr={data:It,urlString:Ye,headers:ur,disableXhrSync:en,disableFetchKeepAlive:!No,oriPayload:Ve};return Hr}return null}s(Hn,"_getPayload");function zo(){try{var Ve=Ee||{};return ake(Ye)&&(Ve[eke[6]]=eke[7]),Ve}catch{}return null}s(zo,"_getHeaders");function ts(Ve){var It=Ve?Ve[Di]:0;return dt[_y].size()+It>st?((!Ze||Ze.isOnline())&&dt[nM](!0,null,10),!0):!1}s(ts,"_checkMaxSize");function qs(Ve,It,ur,Hr,$n,wn){var vo=null;if(dt._appId||(vo=Vr(wn),vo&&vo.appId&&(dt._appId=vo.appId)),(Ve<200||Ve>=300)&&Ve!==0){if((Ve===301||Ve===307||Ve===308)&&!od(ur)){dt[HS](It,$n);return}if(Ze&&!Ze.isOnline()){if(!qo){var yc=10;lM(It,yc),Mr(dt[id](),2,40,". Offline - Response Code: ".concat(Ve,". Offline status: ").concat(!Ze.isOnline(),". Will retry to send ").concat(It.length," items."))}return}!qo&&Lb(Ve)?(lM(It),Mr(dt[id](),2,40,". Response code "+Ve+". Will retry to send "+It[Di]+" items.")):dt[HS](It,$n)}else od(ur),Ve===206?(vo||(vo=Vr(wn)),vo&&!qo?dt[fle](It,vo):dt[HS](It,$n)):(k=0,dt[OH](It,Hr))}s(qs,"_checkResponsStatus");function od(Ve){return fe>=10?!1:!ie(Ve)&&Ve!==""&&Ve!==Ye?(Ye=Ve,++fe,!0):!1}s(od,"_checkAndUpdateEndPointUrl");function Of(Ve,It){if(Qe)Qe(Ve,!1);else{var ur=Ho&&Ho[FH]([3],!0);return zr(ur,Ve,It)}}s(Of,"_doUnloadSend");function Eg(Ve,It,ur){var Hr=Ve,$n=Hr&&Hr.oriPayload;if(Pa)Mn&&Mn($n,!0),Mr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var wn=[],vo=0;vo<$n[Di];vo++){var yc=$n[vo],G0=[yc],Ei=Hn(G0);ur(Ei,It)?dt._onSuccess(G0,G0[Di]):wn[rv](yc)}wn[Di]>0&&(Mn&&Mn(wn,!0),Mr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Eg,"_onBeaconRetry");function xg(Ve){try{if(Ve&&Ve[Di])return Ae(Ve[0])}catch{}return null}s(xg,"_isStringArr");function SP(Ve,It){var ur=null;if(Je(Ve)){for(var Hr=Ve[Di],$n=0;$n<Ve[Di];$n++)Hr+=Ve[$n].item[Di];var wn=Ho.getSyncFetchPayload();wn+Hr<=Avt?ur=2:yy()?ur=3:(ur=1,Mr(dt[id](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var vo=Ho&&Ho[FH]([ur],!0);return zr(vo,Ve,It)}return null}s(SP,"_fetchKeepAliveSender");function lM(Ve,It){if(It===void 0&&(It=1),!(!Ve||Ve[Di]===0)){var ur=dt[_y];ur[eM](Ve),k++;for(var Hr=0,$n=Ve;Hr<$n.length;Hr++){var wn=$n[Hr];wn.cnt=wn.cnt||0,wn.cnt++,ur[US](wn)}Cle(It),_P()}}s(lM,"_resendPayload");function Cle(Ve){var It=10,ur;if(k<=1)ur=It;else{var Hr=(Math.pow(2,k)-1)/2,$n=iy(Math.random()*Hr*It)+1;$n=Ve*$n,ur=Pe(Gn($n,3600),It)}var wn=ed()+ur*1e3;L=wn}s(Cle,"_setRetryTime");function _P(){if(!G&&!q){var Ve=L?Pe(0,L-ed()):0,It=Pe(bn,Ve);G=sy(function(){G=null,dt[nM](!0,null,1)},It)}}s(_P,"_setupTimer");function Nb(){G&&G.cancel(),G=null,L=null}s(Nb,"_clearScheduledTimer");function Lb(Ve){return ie(Ol)?Ve===401||Ve===408||Ve===429||Ve===500||Ve===502||Ve===503||Ve===504:Ol[Di]&&Ol.indexOf(Ve)>-1}s(Lb,"_isRetriable");function qH(){var Ve="getNotifyMgr";return dt.core[Ve]?dt.core[Ve]():dt.core._notificationManager}s(qH,"_getNotifyMgr");function HH(Ve,It){var ur=qH();if(ur&&ur.eventsSendRequest)try{ur.eventsSendRequest(Ve,It)}catch(Hr){Mr(dt[id](),1,74,"send request notification failed: "+pl(Hr),{exception:Ot(Hr)})}}s(HH,"_notifySendRequest");function Qke(Ve,It){var ur=It.disableInstrumentationKeyValidation,Hr=ie(ur)?!1:ur;if(Hr)return!0;var $n="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",wn=new RegExp($n);return wn.test(Ve)}s(Qke,"_validateInstrumentationKey");function Uke(){dt[iM]=null,dt[_y]=null,dt._appId=null,dt._sample=null,Ee={},Ze=null,k=0,L=null,q=!1,G=null,ce=null,fe=0,Re=0,Qe=null,He=null,Ye=null,gt=null,st=0,wt=!1,wr=null,ei=!1,Fi=null,Oi=Ry,qo=!1,Zr=null,fa=Ry,en=!1,No=!1,Pa=!1,Pt=null,Mn=null,Ho=null,je(dt,"_senderConfig",{g:s(function(){return Mq({},Fke)},"g")})}s(Uke,"_initDefaults")}),T}return s(b,"Sender"),b.constructEnvelope=function(T,k,L,q){var G;k!==T.iKey&&!ie(k)?G=lg(lg({},T),{iKey:k}):G=T;var ce=vvt[G.baseType]||Dke;return ce(L,G,q)},b}(xt),TP="instrumentationKey",UH="connectionString",aM="endpointUrl",cM="userOverrideEndpointUrl",wP,yle=void 0,Evt=(wP={diagnosticLogInterval:kL(xvt,1e4)},wP[UH]=yle,wP.endpointUrl=yle,wP[TP]=yle,wP.extensionConfig={},wP);function xvt(v){return v&&v>0}s(xvt,"_chkDiagLevel");var bvt=function(){function v(b){var T=new Bt,k;(ie(b)||ie(b[TP])&&ie(b[UH]))&&Wr("Invalid input configuration"),hu(v,this,function(q){je(q,"config",{g:s(function(){return k},"g")}),G(),q.initialize=G,q.track=L,hL(q,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function G(){var ce=Ff(b||{},Evt);k=ce.cfg,T.addUnloadHook(Ag(ce,function(){var fe=k[UH];if(ht(fe)){var Ee=U5(function(He,Ye){Df(fe,function(gt){var st=gt.value,wt=k[TP];if(!gt.rejected&&st){k[UH]=st;var Ht=Zce(st);wt=Ht.instrumentationkey||wt}He(wt)})}),Re=U5(function(He,Ye){Df(fe,function(gt){var st=gt.value,wt=k[aM];if(!gt.rejected&&st){var Ht=Zce(st),or=Ht.ingestionendpoint;wt=or?or+gP:wt}He(wt)})});k[TP]=Ee,k[aM]=k[cM]||Re}if(Ae(fe)){var Qe=Zce(fe),Ze=Qe.ingestionendpoint;k[aM]=k[cM]?k[cM]:Ze+gP,k[TP]=Qe.instrumentationkey||k[TP]}k[aM]=k[cM]?k[cM]:k[aM]})),T.initialize(k,[new Oke])}s(G,"_initialize")});function L(q){q&&(q.baseData=q.baseData||{},q.baseType=q.baseType||"EventData"),T.track(q)}s(L,"_track")}return s(v,"ApplicationInsights"),v.__ieDyn=1,v}();t.AppInsightsCore=Bt,t.ApplicationInsights=bvt,t.Sender=Oke,t.SeverityLevel=Z1t,t.arrForEach=Gr,t.isNullOrUndefined=ie,t.proxyFunctions=hL,t.throwError=Wr})});var hMe=H(Mj=>{"use strict";f();Object.defineProperty(Mj,"__esModule",{value:!0});Mj.state=void 0;Mj.state={instrumenterImplementation:void 0}});var tD=H((Ipe,s9e)=>{f();var RG=require("buffer"),eC=RG.Buffer;function o9e(t,e){for(var r in t)e[r]=t[r]}s(o9e,"copyProps");eC.from&&eC.alloc&&eC.allocUnsafe&&eC.allocUnsafeSlow?s9e.exports=RG:(o9e(RG,Ipe),Ipe.Buffer=l2);function l2(t,e,r){return eC(t,e,r)}s(l2,"SafeBuffer");l2.prototype=Object.create(eC.prototype);o9e(eC,l2);l2.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return eC(t,e,r)};l2.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=eC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};l2.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return eC(t)};l2.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return RG.SlowBuffer(t)}});var Tpe=H((rrn,a9e)=>{f();var kG=tD().Buffer,Rkt=require("stream"),kkt=require("util");function PG(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=kG.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=kG.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(PG,"DataStream");kkt.inherits(PG,Rkt);PG.prototype.write=s(function(e){this.buffer=kG.concat([this.buffer,kG.from(e)]),this.emit("data",e)},"write");PG.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");a9e.exports=PG});var l9e=H((orn,c9e)=>{"use strict";f();function wpe(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(wpe,"getParamSize");var Pkt={ES256:wpe(256),ES384:wpe(384),ES512:wpe(521)};function Dkt(t){var e=Pkt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(Dkt,"getParamBytesForAlg");c9e.exports=Dkt});var g9e=H((crn,h9e)=>{"use strict";f();var DG=tD().Buffer,d9e=l9e(),BG=128,f9e=0,Bkt=32,Nkt=16,Lkt=2,p9e=Nkt|Bkt|f9e<<6,NG=Lkt|f9e<<6;function Mkt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Mkt,"base64Url");function m9e(t){if(DG.isBuffer(t))return t;if(typeof t=="string")return DG.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(m9e,"signatureAsBuffer");function Fkt(t,e){t=m9e(t);var r=d9e(e),n=r+1,i=t.length,o=0;if(t[o++]!==p9e)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(BG|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==NG)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==NG)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var d=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=DG.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,d+Math.max(-m,0),d+u),h=h.toString("base64"),h=Mkt(h),h}s(Fkt,"derToJose");function u9e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=BG;return i&&--n,n}s(u9e,"countPadding");function Okt(t,e){t=m9e(t);var r=d9e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=u9e(t,0,r),o=u9e(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<BG,d=DG.allocUnsafe((u?2:3)+l),p=0;return d[p++]=p9e,u?d[p++]=l:(d[p++]=BG|1,d[p++]=l&255),d[p++]=NG,d[p++]=a,i<0?(d[p++]=0,p+=t.copy(d,p,0,r)):p+=t.copy(d,p,i,r),d[p++]=NG,d[p++]=c,o<0?(d[p++]=0,t.copy(d,p,r)):t.copy(d,p,r+o),d}s(Okt,"joseToDer");h9e.exports={derToJose:Fkt,joseToDer:Okt}});var y9e=H((drn,A9e)=>{"use strict";f();var m6=require("buffer").Buffer,Spe=require("buffer").SlowBuffer;A9e.exports=LG;function LG(t,e){if(!m6.isBuffer(t)||!m6.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(LG,"bufferEq");LG.install=function(){m6.prototype.equal=Spe.prototype.equal=s(function(e){return LG(this,e)},"equal")};var Qkt=m6.prototype.equal,Ukt=Spe.prototype.equal;LG.restore=function(){m6.prototype.equal=Qkt,Spe.prototype.equal=Ukt}});var Ppe=H((mrn,S9e)=>{f();var nD=tD().Buffer,Nm=require("crypto"),v9e=g9e(),C9e=require("util"),qkt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,h6="secret must be a string or buffer",rD="key must be a string or a buffer",Hkt="key must be a string, a buffer or an object",Rpe=typeof Nm.createPublicKey=="function";Rpe&&(rD+=" or a KeyObject",h6+="or a KeyObject");function E9e(t){if(!nD.isBuffer(t)&&typeof t!="string"&&(!Rpe||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw zg(rD)}s(E9e,"checkIsPublicKey");function x9e(t){if(!nD.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw zg(Hkt)}s(x9e,"checkIsPrivateKey");function $kt(t){if(!nD.isBuffer(t)){if(typeof t=="string")return t;if(!Rpe||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw zg(h6)}}s($kt,"checkIsSecretKey");function kpe(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(kpe,"fromBase64");function b9e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(b9e,"toBase64");function zg(t){var e=[].slice.call(arguments,1),r=C9e.format.bind(C9e,t).apply(null,e);return new TypeError(r)}s(zg,"typeError");function Wkt(t){return nD.isBuffer(t)||typeof t=="string"}s(Wkt,"bufferOrString");function g6(t){return Wkt(t)||(t=JSON.stringify(t)),t}s(g6,"normalizeInput");function I9e(t){return s(function(r,n){$kt(n),r=g6(r);var i=Nm.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return kpe(o)},"sign")}s(I9e,"createHmacSigner");var _pe,jkt="timingSafeEqual"in Nm?s(function(e,r){return e.byteLength!==r.byteLength?!1:Nm.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return _pe||(_pe=y9e()),_pe(e,r)},"timingSafeEqual");function Gkt(t){return s(function(r,n,i){var o=I9e(t)(r,i);return jkt(nD.from(n),nD.from(o))},"verify")}s(Gkt,"createHmacVerifier");function T9e(t){return s(function(r,n){x9e(n),r=g6(r);var i=Nm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return kpe(o)},"sign")}s(T9e,"createKeySigner");function w9e(t){return s(function(r,n,i){E9e(i),r=g6(r),n=b9e(n);var o=Nm.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(w9e,"createKeyVerifier");function Vkt(t){return s(function(r,n){x9e(n),r=g6(r);var i=Nm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:Nm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Nm.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return kpe(o)},"sign")}s(Vkt,"createPSSKeySigner");function zkt(t){return s(function(r,n,i){E9e(i),r=g6(r),n=b9e(n);var o=Nm.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:Nm.constants.RSA_PKCS1_PSS_PADDING,saltLength:Nm.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(zkt,"createPSSKeyVerifier");function Ykt(t){var e=T9e(t);return s(function(){var n=e.apply(null,arguments);return n=v9e.derToJose(n,"ES"+t),n},"sign")}s(Ykt,"createECDSASigner");function Kkt(t){var e=w9e(t);return s(function(n,i,o){i=v9e.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(Kkt,"createECDSAVerifer");function Jkt(){return s(function(){return""},"sign")}s(Jkt,"createNoneSigner");function Xkt(){return s(function(e,r){return r===""},"verify")}s(Xkt,"createNoneVerifier");S9e.exports=s(function(e){var r={hs:I9e,rs:T9e,ps:Vkt,es:Ykt,none:Jkt},n={hs:Gkt,rs:w9e,ps:zkt,es:Kkt,none:Xkt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw zg(qkt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var Dpe=H((Arn,_9e)=>{f();var Zkt=require("buffer").Buffer;_9e.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||Zkt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var N9e=H((vrn,B9e)=>{f();var e5t=tD().Buffer,R9e=Tpe(),t5t=Ppe(),r5t=require("stream"),k9e=Dpe(),Bpe=require("util");function P9e(t,e){return e5t.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(P9e,"base64url");function n5t(t,e,r){r=r||"utf8";var n=P9e(k9e(t),"binary"),i=P9e(k9e(e),r);return Bpe.format("%s.%s",n,i)}s(n5t,"jwsSecuredInput");function D9e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=t5t(e.alg),a=n5t(e,r,i),c=o.sign(a,n);return Bpe.format("%s.%s",a,c)}s(D9e,"jwsSign");function MG(t){var e=t.secret||t.privateKey||t.key,r=new R9e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new R9e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(MG,"SignStream");Bpe.inherits(MG,r5t);MG.prototype.sign=s(function(){try{var e=D9e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");MG.sign=D9e;B9e.exports=MG});var W9e=H((brn,$9e)=>{f();var M9e=tD().Buffer,L9e=Tpe(),i5t=Ppe(),o5t=require("stream"),F9e=Dpe(),s5t=require("util"),a5t=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function c5t(t){return Object.prototype.toString.call(t)==="[object Object]"}s(c5t,"isObject");function l5t(t){if(c5t(t))return t;try{return JSON.parse(t)}catch{return}}s(l5t,"safeJsonParse");function O9e(t){var e=t.split(".",1)[0];return l5t(M9e.from(e,"base64").toString("binary"))}s(O9e,"headerFromJWS");function u5t(t){return t.split(".",2).join(".")}s(u5t,"securedInputFromJWS");function Q9e(t){return t.split(".")[2]}s(Q9e,"signatureFromJWS");function d5t(t,e){e=e||"utf8";var r=t.split(".")[1];return M9e.from(r,"base64").toString(e)}s(d5t,"payloadFromJWS");function U9e(t){return a5t.test(t)&&!!O9e(t)}s(U9e,"isValidJws");function q9e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=F9e(t);var i=Q9e(t),o=u5t(t),a=i5t(e);return a.verify(o,i,r)}s(q9e,"jwsVerify");function H9e(t,e){if(e=e||{},t=F9e(t),!U9e(t))return null;var r=O9e(t);if(!r)return null;var n=d5t(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:Q9e(t)}}s(H9e,"jwsDecode");function iD(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new L9e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new L9e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(iD,"VerifyStream");s5t.inherits(iD,o5t);iD.prototype.verify=s(function(){try{var e=q9e(this.signature.buffer,this.algorithm,this.key.buffer),r=H9e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");iD.decode=H9e;iD.isValid=U9e;iD.verify=q9e;$9e.exports=iD});var OG=H(kI=>{f();var j9e=N9e(),FG=W9e(),f5t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];kI.ALGORITHMS=f5t;kI.sign=j9e.sign;kI.verify=FG.verify;kI.decode=FG.decode;kI.isValid=FG.isValid;kI.createSign=s(function(e){return new j9e(e)},"createSign");kI.createVerify=s(function(e){return new FG(e)},"createVerify")});var Npe=H((Rrn,G9e)=>{f();var p5t=OG();G9e.exports=function(t,e){e=e||{};var r=p5t.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var A6=H((Prn,V9e)=>{f();var QG=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");QG.prototype=Object.create(Error.prototype);QG.prototype.constructor=QG;V9e.exports=QG});var Lpe=H((Nrn,Y9e)=>{f();var z9e=A6(),UG=s(function(t,e){z9e.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");UG.prototype=Object.create(z9e.prototype);UG.prototype.constructor=UG;Y9e.exports=UG});var Mpe=H((Frn,J9e)=>{f();var K9e=A6(),qG=s(function(t,e){K9e.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");qG.prototype=Object.create(K9e.prototype);qG.prototype.constructor=qG;J9e.exports=qG});var Fpe=H((Urn,X9e)=>{f();var oD=1e3,sD=oD*60,aD=sD*60,u2=aD*24,m5t=u2*7,h5t=u2*365.25;X9e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return g5t(t);if(r==="number"&&isFinite(t))return e.long?y5t(t):A5t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function g5t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h5t;case"weeks":case"week":case"w":return r*m5t;case"days":case"day":case"d":return r*u2;case"hours":case"hour":case"hrs":case"hr":case"h":return r*aD;case"minutes":case"minute":case"mins":case"min":case"m":return r*sD;case"seconds":case"second":case"secs":case"sec":case"s":return r*oD;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(g5t,"parse");function A5t(t){var e=Math.abs(t);return e>=u2?Math.round(t/u2)+"d":e>=aD?Math.round(t/aD)+"h":e>=sD?Math.round(t/sD)+"m":e>=oD?Math.round(t/oD)+"s":t+"ms"}s(A5t,"fmtShort");function y5t(t){var e=Math.abs(t);return e>=u2?HG(t,e,u2,"day"):e>=aD?HG(t,e,aD,"hour"):e>=sD?HG(t,e,sD,"minute"):e>=oD?HG(t,e,oD,"second"):t+" ms"}s(y5t,"fmtLong");function HG(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(HG,"plural")});var Ope=H(($rn,Z9e)=>{f();var C5t=Fpe();Z9e.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=C5t(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var y6=H((jrn,e6e)=>{"use strict";f();var v5t="2.0.0",E5t=Number.MAX_SAFE_INTEGER||9007199254740991,x5t=16,b5t=250,I5t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e6e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:x5t,MAX_SAFE_BUILD_LENGTH:b5t,MAX_SAFE_INTEGER:E5t,RELEASE_TYPES:I5t,SEMVER_SPEC_VERSION:v5t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var C6=H((Vrn,t6e)=>{"use strict";f();var T5t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t6e.exports=T5t});var cD=H((tC,r6e)=>{"use strict";f();var{MAX_SAFE_COMPONENT_LENGTH:Qpe,MAX_SAFE_BUILD_LENGTH:w5t,MAX_LENGTH:S5t}=y6(),_5t=C6();tC=r6e.exports={};var R5t=tC.re=[],k5t=tC.safeRe=[],Sr=tC.src=[],P5t=tC.safeSrc=[],_r=tC.t={},D5t=0,Upe="[a-zA-Z0-9-]",B5t=[["\\s",1],["\\d",S5t],[Upe,w5t]],N5t=s(t=>{for(let[e,r]of B5t)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),di=s((t,e,r)=>{let n=N5t(e),i=D5t++;_5t(t,i,e),_r[t]=i,Sr[i]=e,P5t[i]=n,R5t[i]=new RegExp(e,r?"g":void 0),k5t[i]=new RegExp(n,r?"g":void 0)},"createToken");di("NUMERICIDENTIFIER","0|[1-9]\\d*");di("NUMERICIDENTIFIERLOOSE","\\d+");di("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Upe}*`);di("MAINVERSION",`(${Sr[_r.NUMERICIDENTIFIER]})\\.(${Sr[_r.NUMERICIDENTIFIER]})\\.(${Sr[_r.NUMERICIDENTIFIER]})`);di("MAINVERSIONLOOSE",`(${Sr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${Sr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${Sr[_r.NUMERICIDENTIFIERLOOSE]})`);di("PRERELEASEIDENTIFIER",`(?:${Sr[_r.NONNUMERICIDENTIFIER]}|${Sr[_r.NUMERICIDENTIFIER]})`);di("PRERELEASEIDENTIFIERLOOSE",`(?:${Sr[_r.NONNUMERICIDENTIFIER]}|${Sr[_r.NUMERICIDENTIFIERLOOSE]})`);di("PRERELEASE",`(?:-(${Sr[_r.PRERELEASEIDENTIFIER]}(?:\\.${Sr[_r.PRERELEASEIDENTIFIER]})*))`);di("PRERELEASELOOSE",`(?:-?(${Sr[_r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Sr[_r.PRERELEASEIDENTIFIERLOOSE]})*))`);di("BUILDIDENTIFIER",`${Upe}+`);di("BUILD",`(?:\\+(${Sr[_r.BUILDIDENTIFIER]}(?:\\.${Sr[_r.BUILDIDENTIFIER]})*))`);di("FULLPLAIN",`v?${Sr[_r.MAINVERSION]}${Sr[_r.PRERELEASE]}?${Sr[_r.BUILD]}?`);di("FULL",`^${Sr[_r.FULLPLAIN]}$`);di("LOOSEPLAIN",`[v=\\s]*${Sr[_r.MAINVERSIONLOOSE]}${Sr[_r.PRERELEASELOOSE]}?${Sr[_r.BUILD]}?`);di("LOOSE",`^${Sr[_r.LOOSEPLAIN]}$`);di("GTLT","((?:<|>)?=?)");di("XRANGEIDENTIFIERLOOSE",`${Sr[_r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);di("XRANGEIDENTIFIER",`${Sr[_r.NUMERICIDENTIFIER]}|x|X|\\*`);di("XRANGEPLAIN",`[v=\\s]*(${Sr[_r.XRANGEIDENTIFIER]})(?:\\.(${Sr[_r.XRANGEIDENTIFIER]})(?:\\.(${Sr[_r.XRANGEIDENTIFIER]})(?:${Sr[_r.PRERELEASE]})?${Sr[_r.BUILD]}?)?)?`);di("XRANGEPLAINLOOSE",`[v=\\s]*(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Sr[_r.XRANGEIDENTIFIERLOOSE]})(?:${Sr[_r.PRERELEASELOOSE]})?${Sr[_r.BUILD]}?)?)?`);di("XRANGE",`^${Sr[_r.GTLT]}\\s*${Sr[_r.XRANGEPLAIN]}$`);di("XRANGELOOSE",`^${Sr[_r.GTLT]}\\s*${Sr[_r.XRANGEPLAINLOOSE]}$`);di("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Qpe}})(?:\\.(\\d{1,${Qpe}}))?(?:\\.(\\d{1,${Qpe}}))?`);di("COERCE",`${Sr[_r.COERCEPLAIN]}(?:$|[^\\d])`);di("COERCEFULL",Sr[_r.COERCEPLAIN]+`(?:${Sr[_r.PRERELEASE]})?(?:${Sr[_r.BUILD]})?(?:$|[^\\d])`);di("COERCERTL",Sr[_r.COERCE],!0);di("COERCERTLFULL",Sr[_r.COERCEFULL],!0);di("LONETILDE","(?:~>?)");di("TILDETRIM",`(\\s*)${Sr[_r.LONETILDE]}\\s+`,!0);tC.tildeTrimReplace="$1~";di("TILDE",`^${Sr[_r.LONETILDE]}${Sr[_r.XRANGEPLAIN]}$`);di("TILDELOOSE",`^${Sr[_r.LONETILDE]}${Sr[_r.XRANGEPLAINLOOSE]}$`);di("LONECARET","(?:\\^)");di("CARETTRIM",`(\\s*)${Sr[_r.LONECARET]}\\s+`,!0);tC.caretTrimReplace="$1^";di("CARET",`^${Sr[_r.LONECARET]}${Sr[_r.XRANGEPLAIN]}$`);di("CARETLOOSE",`^${Sr[_r.LONECARET]}${Sr[_r.XRANGEPLAINLOOSE]}$`);di("COMPARATORLOOSE",`^${Sr[_r.GTLT]}\\s*(${Sr[_r.LOOSEPLAIN]})$|^$`);di("COMPARATOR",`^${Sr[_r.GTLT]}\\s*(${Sr[_r.FULLPLAIN]})$|^$`);di("COMPARATORTRIM",`(\\s*)${Sr[_r.GTLT]}\\s*(${Sr[_r.LOOSEPLAIN]}|${Sr[_r.XRANGEPLAIN]})`,!0);tC.comparatorTrimReplace="$1$2$3";di("HYPHENRANGE",`^\\s*(${Sr[_r.XRANGEPLAIN]})\\s+-\\s+(${Sr[_r.XRANGEPLAIN]})\\s*$`);di("HYPHENRANGELOOSE",`^\\s*(${Sr[_r.XRANGEPLAINLOOSE]})\\s+-\\s+(${Sr[_r.XRANGEPLAINLOOSE]})\\s*$`);di("STAR","(<|>)?=?\\s*\\*");di("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");di("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var $G=H((Jrn,n6e)=>{"use strict";f();var L5t=Object.freeze({loose:!0}),M5t=Object.freeze({}),F5t=s(t=>t?typeof t!="object"?L5t:t:M5t,"parseOptions");n6e.exports=F5t});var qpe=H((enn,s6e)=>{"use strict";f();var i6e=/^[0-9]+$/,o6e=s((t,e)=>{let r=i6e.test(t),n=i6e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),O5t=s((t,e)=>o6e(e,t),"rcompareIdentifiers");s6e.exports={compareIdentifiers:o6e,rcompareIdentifiers:O5t}});var Cd=H((nnn,c6e)=>{"use strict";f();var WG=C6(),{MAX_LENGTH:a6e,MAX_SAFE_INTEGER:jG}=y6(),{safeRe:GG,t:VG}=cD(),Q5t=$G(),{compareIdentifiers:lD}=qpe(),Hpe=class t{static{s(this,"SemVer")}constructor(e,r){if(r=Q5t(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a6e)throw new TypeError(`version is longer than ${a6e} characters`);WG("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?GG[VG.LOOSE]:GG[VG.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>jG||this.major<0)throw new TypeError("Invalid major version");if(this.minor>jG||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>jG||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<jG)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(WG("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),lD(this.major,e.major)||lD(this.minor,e.minor)||lD(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(WG("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return lD(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(WG("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return lD(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?GG[VG.PRERELEASELOOSE]:GG[VG.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),lD(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};c6e.exports=Hpe});var d2=H((snn,u6e)=>{"use strict";f();var l6e=Cd(),U5t=s((t,e,r=!1)=>{if(t instanceof l6e)return t;try{return new l6e(t,e)}catch(n){if(!r)return null;throw n}},"parse");u6e.exports=U5t});var f6e=H((lnn,d6e)=>{"use strict";f();var q5t=d2(),H5t=s((t,e)=>{let r=q5t(t,e);return r?r.version:null},"valid");d6e.exports=H5t});var m6e=H((fnn,p6e)=>{"use strict";f();var $5t=d2(),W5t=s((t,e)=>{let r=$5t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");p6e.exports=W5t});var A6e=H((hnn,g6e)=>{"use strict";f();var h6e=Cd(),j5t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new h6e(t instanceof h6e?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");g6e.exports=j5t});var v6e=H((ynn,C6e)=>{"use strict";f();var y6e=d2(),G5t=s((t,e)=>{let r=y6e(t,null,!0),n=y6e(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let d=l?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"},"diff");C6e.exports=G5t});var x6e=H((Enn,E6e)=>{"use strict";f();var V5t=Cd(),z5t=s((t,e)=>new V5t(t,e).major,"major");E6e.exports=z5t});var I6e=H((Inn,b6e)=>{"use strict";f();var Y5t=Cd(),K5t=s((t,e)=>new Y5t(t,e).minor,"minor");b6e.exports=K5t});var w6e=H((Snn,T6e)=>{"use strict";f();var J5t=Cd(),X5t=s((t,e)=>new J5t(t,e).patch,"patch");T6e.exports=X5t});var _6e=H((knn,S6e)=>{"use strict";f();var Z5t=d2(),ePt=s((t,e)=>{let r=Z5t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");S6e.exports=ePt});var Lm=H((Bnn,k6e)=>{"use strict";f();var R6e=Cd(),tPt=s((t,e,r)=>new R6e(t,r).compare(new R6e(e,r)),"compare");k6e.exports=tPt});var D6e=H((Mnn,P6e)=>{"use strict";f();var rPt=Lm(),nPt=s((t,e,r)=>rPt(e,t,r),"rcompare");P6e.exports=nPt});var N6e=H((Qnn,B6e)=>{"use strict";f();var iPt=Lm(),oPt=s((t,e)=>iPt(t,e,!0),"compareLoose");B6e.exports=oPt});var zG=H((Hnn,M6e)=>{"use strict";f();var L6e=Cd(),sPt=s((t,e,r)=>{let n=new L6e(t,r),i=new L6e(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");M6e.exports=sPt});var O6e=H((jnn,F6e)=>{"use strict";f();var aPt=zG(),cPt=s((t,e)=>t.sort((r,n)=>aPt(r,n,e)),"sort");F6e.exports=cPt});var U6e=H((znn,Q6e)=>{"use strict";f();var lPt=zG(),uPt=s((t,e)=>t.sort((r,n)=>lPt(n,r,e)),"rsort");Q6e.exports=uPt});var v6=H((Jnn,q6e)=>{"use strict";f();var dPt=Lm(),fPt=s((t,e,r)=>dPt(t,e,r)>0,"gt");q6e.exports=fPt});var YG=H((ein,H6e)=>{"use strict";f();var pPt=Lm(),mPt=s((t,e,r)=>pPt(t,e,r)<0,"lt");H6e.exports=mPt});var $pe=H((nin,$6e)=>{"use strict";f();var hPt=Lm(),gPt=s((t,e,r)=>hPt(t,e,r)===0,"eq");$6e.exports=gPt});var Wpe=H((sin,W6e)=>{"use strict";f();var APt=Lm(),yPt=s((t,e,r)=>APt(t,e,r)!==0,"neq");W6e.exports=yPt});var KG=H((lin,j6e)=>{"use strict";f();var CPt=Lm(),vPt=s((t,e,r)=>CPt(t,e,r)>=0,"gte");j6e.exports=vPt});var JG=H((fin,G6e)=>{"use strict";f();var EPt=Lm(),xPt=s((t,e,r)=>EPt(t,e,r)<=0,"lte");G6e.exports=xPt});var jpe=H((hin,V6e)=>{"use strict";f();var bPt=$pe(),IPt=Wpe(),TPt=v6(),wPt=KG(),SPt=YG(),_Pt=JG(),RPt=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return bPt(t,r,n);case"!=":return IPt(t,r,n);case">":return TPt(t,r,n);case">=":return wPt(t,r,n);case"<":return SPt(t,r,n);case"<=":return _Pt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");V6e.exports=RPt});var Y6e=H((yin,z6e)=>{"use strict";f();var kPt=Cd(),PPt=d2(),{safeRe:XG,t:ZG}=cD(),DPt=s((t,e)=>{if(t instanceof kPt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?XG[ZG.COERCEFULL]:XG[ZG.COERCE]);else{let l=e.includePrerelease?XG[ZG.COERCERTLFULL]:XG[ZG.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return PPt(`${n}.${i}.${o}${a}${c}`,e)},"coerce");z6e.exports=DPt});var J6e=H((Ein,K6e)=>{"use strict";f();var Gpe=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};K6e.exports=Gpe});var Mm=H((Iin,tFe)=>{"use strict";f();var BPt=/\s+/g,Vpe=class t{static{s(this,"Range")}constructor(e,r){if(r=LPt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof zpe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(BPt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Z6e(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&HPt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&UPt)|(this.options.loose&&qPt))+":"+e,i=X6e.get(n);if(i)return i;let o=this.options.loose,a=o?t0[rf.HYPHENRANGELOOSE]:t0[rf.HYPHENRANGE];e=e.replace(a,XPt(this.options.includePrerelease)),Js("hyphen replace",e),e=e.replace(t0[rf.COMPARATORTRIM],FPt),Js("comparator trim",e),e=e.replace(t0[rf.TILDETRIM],OPt),Js("tilde trim",e),e=e.replace(t0[rf.CARETTRIM],QPt),Js("caret trim",e);let c=e.split(" ").map(p=>$Pt(p,this.options)).join(" ").split(/\s+/).map(p=>JPt(p,this.options));o&&(c=c.filter(p=>(Js("loose invalid filter",p,this.options),!!p.match(t0[rf.COMPARATORLOOSE])))),Js("range list",c);let l=new Map,u=c.map(p=>new zpe(p,this.options));for(let p of u){if(Z6e(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let d=[...l.values()];return X6e.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>eFe(n,r)&&e.set.some(i=>eFe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new MPt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(ZPt(this.set[r],e,this.options))return!0;return!1}};tFe.exports=Vpe;var NPt=J6e(),X6e=new NPt,LPt=$G(),zpe=E6(),Js=C6(),MPt=Cd(),{safeRe:t0,t:rf,comparatorTrimReplace:FPt,tildeTrimReplace:OPt,caretTrimReplace:QPt}=cD(),{FLAG_INCLUDE_PRERELEASE:UPt,FLAG_LOOSE:qPt}=y6(),Z6e=s(t=>t.value==="<0.0.0-0","isNullSet"),HPt=s(t=>t.value==="","isAny"),eFe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),$Pt=s((t,e)=>(Js("comp",t,e),t=GPt(t,e),Js("caret",t),t=WPt(t,e),Js("tildes",t),t=zPt(t,e),Js("xrange",t),t=KPt(t,e),Js("stars",t),t),"parseComparator"),nf=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),WPt=s((t,e)=>t.trim().split(/\s+/).map(r=>jPt(r,e)).join(" "),"replaceTildes"),jPt=s((t,e)=>{let r=e.loose?t0[rf.TILDELOOSE]:t0[rf.TILDE];return t.replace(r,(n,i,o,a,c)=>{Js("tilde",t,n,i,o,a,c);let l;return nf(i)?l="":nf(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:nf(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(Js("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Js("tilde return",l),l})},"replaceTilde"),GPt=s((t,e)=>t.trim().split(/\s+/).map(r=>VPt(r,e)).join(" "),"replaceCarets"),VPt=s((t,e)=>{Js("caret",t,e);let r=e.loose?t0[rf.CARETLOOSE]:t0[rf.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{Js("caret",t,i,o,a,c,l);let u;return nf(o)?u="":nf(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:nf(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(Js("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(Js("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),Js("caret return",u),u})},"replaceCaret"),zPt=s((t,e)=>(Js("replaceXRanges",t,e),t.split(/\s+/).map(r=>YPt(r,e)).join(" ")),"replaceXRanges"),YPt=s((t,e)=>{t=t.trim();let r=e.loose?t0[rf.XRANGELOOSE]:t0[rf.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{Js("xRange",t,n,i,o,a,c,l);let u=nf(o),d=u||nf(a),p=d||nf(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(a=0),c=0,i===">"?(i=">=",d?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):d?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),Js("xRange return",n),n})},"replaceXRange"),KPt=s((t,e)=>(Js("replaceStars",t,e),t.trim().replace(t0[rf.STAR],"")),"replaceStars"),JPt=s((t,e)=>(Js("replaceGTE0",t,e),t.trim().replace(t0[e.includePrerelease?rf.GTE0PRE:rf.GTE0],"")),"replaceGTE0"),XPt=s(t=>(e,r,n,i,o,a,c,l,u,d,p,m)=>(nf(n)?r="":nf(i)?r=`>=${n}.0.0${t?"-0":""}`:nf(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,nf(u)?l="":nf(d)?l=`<${+u+1}.0.0-0`:nf(p)?l=`<${u}.${+d+1}.0-0`:m?l=`<=${u}.${d}.${p}-${m}`:t?l=`<${u}.${d}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),ZPt=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Js(t[n].semver),t[n].semver!==zpe.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var E6=H((Sin,aFe)=>{"use strict";f();var x6=Symbol("SemVer ANY"),Jpe=class t{static{s(this,"Comparator")}static get ANY(){return x6}constructor(e,r){if(r=rFe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Kpe("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===x6?this.value="":this.value=this.operator+this.semver.version,Kpe("comp",this)}parse(e){let r=this.options.loose?nFe[iFe.COMPARATORLOOSE]:nFe[iFe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new oFe(n[2],this.options.loose):this.semver=x6}toString(){return this.value}test(e){if(Kpe("Comparator.test",e,this.options.loose),this.semver===x6||e===x6)return!0;if(typeof e=="string")try{e=new oFe(e,this.options)}catch{return!1}return Ype(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new sFe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new sFe(this.value,r).test(e.semver):(r=rFe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Ype(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Ype(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};aFe.exports=Jpe;var rFe=$G(),{safeRe:nFe,t:iFe}=cD(),Ype=jpe(),Kpe=C6(),oFe=Cd(),sFe=Mm()});var b6=H((kin,cFe)=>{"use strict";f();var e4t=Mm(),t4t=s((t,e,r)=>{try{e=new e4t(e,r)}catch{return!1}return e.test(t)},"satisfies");cFe.exports=t4t});var uFe=H((Bin,lFe)=>{"use strict";f();var r4t=Mm(),n4t=s((t,e)=>new r4t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");lFe.exports=n4t});var fFe=H((Min,dFe)=>{"use strict";f();var i4t=Cd(),o4t=Mm(),s4t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new o4t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new i4t(n,r))}),n},"maxSatisfying");dFe.exports=s4t});var mFe=H((Qin,pFe)=>{"use strict";f();var a4t=Cd(),c4t=Mm(),l4t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new c4t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new a4t(n,r))}),n},"minSatisfying");pFe.exports=l4t});var AFe=H((Hin,gFe)=>{"use strict";f();var Xpe=Cd(),u4t=Mm(),hFe=v6(),d4t=s((t,e)=>{t=new u4t(t,e);let r=new Xpe("0.0.0");if(t.test(r)||(r=new Xpe("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new Xpe(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||hFe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||hFe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");gFe.exports=d4t});var CFe=H((jin,yFe)=>{"use strict";f();var f4t=Mm(),p4t=s((t,e)=>{try{return new f4t(t,e).range||"*"}catch{return null}},"validRange");yFe.exports=p4t});var eV=H((zin,bFe)=>{"use strict";f();var m4t=Cd(),xFe=E6(),{ANY:h4t}=xFe,g4t=Mm(),A4t=b6(),vFe=v6(),EFe=YG(),y4t=JG(),C4t=KG(),v4t=s((t,e,r,n)=>{t=new m4t(t,n),e=new g4t(e,n);let i,o,a,c,l;switch(r){case">":i=vFe,o=y4t,a=EFe,c=">",l=">=";break;case"<":i=EFe,o=C4t,a=vFe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(A4t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===h4t&&(h=new xFe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");bFe.exports=v4t});var TFe=H((Jin,IFe)=>{"use strict";f();var E4t=eV(),x4t=s((t,e,r)=>E4t(t,e,">",r),"gtr");IFe.exports=x4t});var SFe=H((eon,wFe)=>{"use strict";f();var b4t=eV(),I4t=s((t,e,r)=>b4t(t,e,"<",r),"ltr");wFe.exports=I4t});var kFe=H((non,RFe)=>{"use strict";f();var _Fe=Mm(),T4t=s((t,e,r)=>(t=new _Fe(t,r),e=new _Fe(e,r),t.intersects(e,r)),"intersects");RFe.exports=T4t});var DFe=H((son,PFe)=>{"use strict";f();var w4t=b6(),S4t=Lm();PFe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((d,p)=>S4t(d,p,r));for(let d of a)w4t(d,e,r)?(o=d,i||(i=d)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[d,p]of n)d===p?c.push(d):!p&&d===a[0]?c.push("*"):p?d===a[0]?c.push(`<=${p}`):c.push(`${d} - ${p}`):c.push(`>=${d}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var OFe=H((con,FFe)=>{"use strict";f();var BFe=Mm(),eme=E6(),{ANY:Zpe}=eme,I6=b6(),tme=Lm(),_4t=s((t,e,r={})=>{if(t===e)return!0;t=new BFe(t,r),e=new BFe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=k4t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),R4t=[new eme(">=0.0.0-0")],NFe=[new eme(">=0.0.0")],k4t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Zpe){if(e.length===1&&e[0].semver===Zpe)return!0;r.includePrerelease?t=R4t:t=NFe}if(e.length===1&&e[0].semver===Zpe){if(r.includePrerelease)return!0;e=NFe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=LFe(i,h,r):h.operator==="<"||h.operator==="<="?o=MFe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=tme(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!I6(h,String(i),r)||o&&!I6(h,String(o),r))return null;for(let g of e)if(!I6(h,String(g),r))return!1;return!0}let c,l,u,d,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=LFe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!I6(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=MFe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!I6(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),LFe=s((t,e,r)=>{if(!t)return e;let n=tme(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),MFe=s((t,e,r)=>{if(!t)return e;let n=tme(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");FFe.exports=_4t});var uD=H((don,qFe)=>{"use strict";f();var rme=cD(),QFe=y6(),P4t=Cd(),UFe=qpe(),D4t=d2(),B4t=f6e(),N4t=m6e(),L4t=A6e(),M4t=v6e(),F4t=x6e(),O4t=I6e(),Q4t=w6e(),U4t=_6e(),q4t=Lm(),H4t=D6e(),$4t=N6e(),W4t=zG(),j4t=O6e(),G4t=U6e(),V4t=v6(),z4t=YG(),Y4t=$pe(),K4t=Wpe(),J4t=KG(),X4t=JG(),Z4t=jpe(),eDt=Y6e(),tDt=E6(),rDt=Mm(),nDt=b6(),iDt=uFe(),oDt=fFe(),sDt=mFe(),aDt=AFe(),cDt=CFe(),lDt=eV(),uDt=TFe(),dDt=SFe(),fDt=kFe(),pDt=DFe(),mDt=OFe();qFe.exports={parse:D4t,valid:B4t,clean:N4t,inc:L4t,diff:M4t,major:F4t,minor:O4t,patch:Q4t,prerelease:U4t,compare:q4t,rcompare:H4t,compareLoose:$4t,compareBuild:W4t,sort:j4t,rsort:G4t,gt:V4t,lt:z4t,eq:Y4t,neq:K4t,gte:J4t,lte:X4t,cmp:Z4t,coerce:eDt,Comparator:tDt,Range:rDt,satisfies:nDt,toComparators:iDt,maxSatisfying:oDt,minSatisfying:sDt,minVersion:aDt,validRange:cDt,outside:lDt,gtr:uDt,ltr:dDt,intersects:fDt,simplifyRange:pDt,subset:mDt,SemVer:P4t,re:rme.re,src:rme.src,tokens:rme.t,SEMVER_SPEC_VERSION:QFe.SEMVER_SPEC_VERSION,RELEASE_TYPES:QFe.RELEASE_TYPES,compareIdentifiers:UFe.compareIdentifiers,rcompareIdentifiers:UFe.rcompareIdentifiers}});var $Fe=H((pon,HFe)=>{f();var hDt=uD();HFe.exports=hDt.satisfies(process.version,">=15.7.0")});var jFe=H((hon,WFe)=>{f();var gDt=uD();WFe.exports=gDt.satisfies(process.version,">=16.9.0")});var nme=H((Aon,GFe)=>{f();var ADt=$Fe(),yDt=jFe(),CDt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},vDt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};GFe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=CDt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(ADt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=vDt[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(yDt){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var ime=H((Con,VFe)=>{f();var EDt=uD();VFe.exports=EDt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var KFe=H((Eon,YFe)=>{f();var Ds=A6(),xDt=Lpe(),zFe=Mpe(),bDt=Npe(),IDt=Ope(),TDt=nme(),wDt=ime(),SDt=OG(),{KeyObject:_Dt,createSecretKey:RDt,createPublicKey:kDt}=require("crypto"),ome=["RS256","RS384","RS512"],PDt=["ES256","ES384","ES512"],sme=["RS256","RS384","RS512"],DDt=["HS256","HS384","HS512"];wDt&&(ome.splice(ome.length,0,"PS256","PS384","PS512"),sme.splice(sme.length,0,"PS256","PS384","PS512"));YFe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(d,p){if(d)throw d;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new Ds("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new Ds("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new Ds("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new Ds("jwt must be provided"));if(typeof t!="string")return i(new Ds("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new Ds("jwt malformed"));let c;try{c=bDt(t,{complete:!0})}catch(d){return i(d)}if(!c)return i(new Ds("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new Ds("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(d,p){return p(null,e)},"getSecret");return u(l,function(d,p){if(d)return i(new Ds("error in secret or public key callback: "+d.message));let m=a[2].trim()!=="";if(!m&&p)return i(new Ds("jwt signature is required"));if(m&&!p)return i(new Ds("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new Ds('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof _Dt))try{p=kDt(p)}catch{try{p=RDt(typeof p=="string"?Buffer.from(p):p)}catch{return i(new Ds("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=DDt:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=sme:p.asymmetricKeyType==="ec"?r.algorithms=PDt:r.algorithms=ome),r.algorithms.indexOf(c.header.alg)===-1)return i(new Ds("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new Ds(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new Ds(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{TDt(l.alg,p)}catch(A){return i(A)}let h;try{h=SDt.verify(t,c.header.alg,p)}catch(A){return i(A)}if(!h)return i(new Ds("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new Ds("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new xDt("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new Ds("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new zFe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let A=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(I){return A.some(function(S){return S instanceof RegExp?S.test(I):S===I})}))return i(new Ds("jwt audience invalid. expected: "+A.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new Ds("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new Ds("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new Ds("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new Ds("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new Ds("iat required when maxAge is specified"));let A=IDt(r.maxAge,g.iat);if(typeof A>"u")return i(new Ds('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(r.clockTolerance||0))return i(new zFe("maxAge exceeded",new Date(A*1e3)))}if(r.complete===!0){let A=c.signature;return i(null,{header:l,payload:g,signature:A})}return i(null,g)})}});var rOe=H((Ion,tOe)=>{f();var JFe=1/0,ZFe=9007199254740991,BDt=17976931348623157e292,XFe=NaN,NDt="[object Arguments]",LDt="[object Function]",MDt="[object GeneratorFunction]",FDt="[object String]",ODt="[object Symbol]",QDt=/^\s+|\s+$/g,UDt=/^[-+]0x[0-9a-f]+$/i,qDt=/^0b[01]+$/i,HDt=/^0o[0-7]+$/i,$Dt=/^(?:0|[1-9]\d*)$/,WDt=parseInt;function jDt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(jDt,"arrayMap");function GDt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(GDt,"baseFindIndex");function VDt(t,e,r){if(e!==e)return GDt(t,zDt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(VDt,"baseIndexOf");function zDt(t){return t!==t}s(zDt,"baseIsNaN");function YDt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(YDt,"baseTimes");function KDt(t,e){return jDt(e,function(r){return t[r]})}s(KDt,"baseValues");function JDt(t,e){return function(r){return t(e(r))}}s(JDt,"overArg");var tV=Object.prototype,cme=tV.hasOwnProperty,rV=tV.toString,XDt=tV.propertyIsEnumerable,ZDt=JDt(Object.keys,Object),e3t=Math.max;function t3t(t,e){var r=eOe(t)||s3t(t)?YDt(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||cme.call(t,o))&&!(i&&(o=="length"||n3t(o,n)))&&r.push(o);return r}s(t3t,"arrayLikeKeys");function r3t(t){if(!i3t(t))return ZDt(t);var e=[];for(var r in Object(t))cme.call(t,r)&&r!="constructor"&&e.push(r);return e}s(r3t,"baseKeys");function n3t(t,e){return e=e??ZFe,!!e&&(typeof t=="number"||$Dt.test(t))&&t>-1&&t%1==0&&t<e}s(n3t,"isIndex");function i3t(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||tV;return t===r}s(i3t,"isPrototype");function o3t(t,e,r,n){t=lme(t)?t:g3t(t),r=r&&!n?p3t(r):0;var i=t.length;return r<0&&(r=e3t(i+r,0)),u3t(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&VDt(t,e,r)>-1}s(o3t,"includes");function s3t(t){return a3t(t)&&cme.call(t,"callee")&&(!XDt.call(t,"callee")||rV.call(t)==NDt)}s(s3t,"isArguments");var eOe=Array.isArray;function lme(t){return t!=null&&l3t(t.length)&&!c3t(t)}s(lme,"isArrayLike");function a3t(t){return ume(t)&&lme(t)}s(a3t,"isArrayLikeObject");function c3t(t){var e=ame(t)?rV.call(t):"";return e==LDt||e==MDt}s(c3t,"isFunction");function l3t(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ZFe}s(l3t,"isLength");function ame(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(ame,"isObject");function ume(t){return!!t&&typeof t=="object"}s(ume,"isObjectLike");function u3t(t){return typeof t=="string"||!eOe(t)&&ume(t)&&rV.call(t)==FDt}s(u3t,"isString");function d3t(t){return typeof t=="symbol"||ume(t)&&rV.call(t)==ODt}s(d3t,"isSymbol");function f3t(t){if(!t)return t===0?t:0;if(t=m3t(t),t===JFe||t===-JFe){var e=t<0?-1:1;return e*BDt}return t===t?t:0}s(f3t,"toFinite");function p3t(t){var e=f3t(t),r=e%1;return e===e?r?e-r:e:0}s(p3t,"toInteger");function m3t(t){if(typeof t=="number")return t;if(d3t(t))return XFe;if(ame(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ame(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(QDt,"");var r=qDt.test(t);return r||HDt.test(t)?WDt(t.slice(2),r?2:8):UDt.test(t)?XFe:+t}s(m3t,"toNumber");function h3t(t){return lme(t)?t3t(t):r3t(t)}s(h3t,"keys");function g3t(t){return t?KDt(t,h3t(t)):[]}s(g3t,"values");tOe.exports=o3t});var iOe=H((Son,nOe)=>{f();var A3t="[object Boolean]",y3t=Object.prototype,C3t=y3t.toString;function v3t(t){return t===!0||t===!1||E3t(t)&&C3t.call(t)==A3t}s(v3t,"isBoolean");function E3t(t){return!!t&&typeof t=="object"}s(E3t,"isObjectLike");nOe.exports=v3t});var lOe=H((kon,cOe)=>{f();var oOe=1/0,x3t=17976931348623157e292,sOe=NaN,b3t="[object Symbol]",I3t=/^\s+|\s+$/g,T3t=/^[-+]0x[0-9a-f]+$/i,w3t=/^0b[01]+$/i,S3t=/^0o[0-7]+$/i,_3t=parseInt,R3t=Object.prototype,k3t=R3t.toString;function P3t(t){return typeof t=="number"&&t==L3t(t)}s(P3t,"isInteger");function aOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(aOe,"isObject");function D3t(t){return!!t&&typeof t=="object"}s(D3t,"isObjectLike");function B3t(t){return typeof t=="symbol"||D3t(t)&&k3t.call(t)==b3t}s(B3t,"isSymbol");function N3t(t){if(!t)return t===0?t:0;if(t=M3t(t),t===oOe||t===-oOe){var e=t<0?-1:1;return e*x3t}return t===t?t:0}s(N3t,"toFinite");function L3t(t){var e=N3t(t),r=e%1;return e===e?r?e-r:e:0}s(L3t,"toInteger");function M3t(t){if(typeof t=="number")return t;if(B3t(t))return sOe;if(aOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=aOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(I3t,"");var r=w3t.test(t);return r||S3t.test(t)?_3t(t.slice(2),r?2:8):T3t.test(t)?sOe:+t}s(M3t,"toNumber");cOe.exports=P3t});var dOe=H((Bon,uOe)=>{f();var F3t="[object Number]",O3t=Object.prototype,Q3t=O3t.toString;function U3t(t){return!!t&&typeof t=="object"}s(U3t,"isObjectLike");function q3t(t){return typeof t=="number"||U3t(t)&&Q3t.call(t)==F3t}s(q3t,"isNumber");uOe.exports=q3t});var hOe=H((Mon,mOe)=>{f();var H3t="[object Object]";function $3t(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s($3t,"isHostObject");function W3t(t,e){return function(r){return t(e(r))}}s(W3t,"overArg");var j3t=Function.prototype,fOe=Object.prototype,pOe=j3t.toString,G3t=fOe.hasOwnProperty,V3t=pOe.call(Object),z3t=fOe.toString,Y3t=W3t(Object.getPrototypeOf,Object);function K3t(t){return!!t&&typeof t=="object"}s(K3t,"isObjectLike");function J3t(t){if(!K3t(t)||z3t.call(t)!=H3t||$3t(t))return!1;var e=Y3t(t);if(e===null)return!0;var r=G3t.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&pOe.call(r)==V3t}s(J3t,"isPlainObject");mOe.exports=J3t});var AOe=H((Qon,gOe)=>{f();var X3t="[object String]",Z3t=Object.prototype,eBt=Z3t.toString,tBt=Array.isArray;function rBt(t){return!!t&&typeof t=="object"}s(rBt,"isObjectLike");function nBt(t){return typeof t=="string"||!tBt(t)&&rBt(t)&&eBt.call(t)==X3t}s(nBt,"isString");gOe.exports=nBt});var xOe=H((Hon,EOe)=>{f();var iBt="Expected a function",yOe=1/0,oBt=17976931348623157e292,COe=NaN,sBt="[object Symbol]",aBt=/^\s+|\s+$/g,cBt=/^[-+]0x[0-9a-f]+$/i,lBt=/^0b[01]+$/i,uBt=/^0o[0-7]+$/i,dBt=parseInt,fBt=Object.prototype,pBt=fBt.toString;function mBt(t,e){var r;if(typeof e!="function")throw new TypeError(iBt);return t=CBt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(mBt,"before");function hBt(t){return mBt(2,t)}s(hBt,"once");function vOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(vOe,"isObject");function gBt(t){return!!t&&typeof t=="object"}s(gBt,"isObjectLike");function ABt(t){return typeof t=="symbol"||gBt(t)&&pBt.call(t)==sBt}s(ABt,"isSymbol");function yBt(t){if(!t)return t===0?t:0;if(t=vBt(t),t===yOe||t===-yOe){var e=t<0?-1:1;return e*oBt}return t===t?t:0}s(yBt,"toFinite");function CBt(t){var e=yBt(t),r=e%1;return e===e?r?e-r:e:0}s(CBt,"toInteger");function vBt(t){if(typeof t=="number")return t;if(ABt(t))return COe;if(vOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=vOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(aBt,"");var r=lBt.test(t);return r||uBt.test(t)?dBt(t.slice(2),r?2:8):cBt.test(t)?COe:+t}s(vBt,"toNumber");EOe.exports=hBt});var POe=H((jon,kOe)=>{f();var bOe=Ope(),EBt=ime(),xBt=nme(),IOe=OG(),bBt=rOe(),nV=iOe(),TOe=lOe(),dme=dOe(),SOe=hOe(),PI=AOe(),IBt=xOe(),{KeyObject:TBt,createSecretKey:wBt,createPrivateKey:SBt}=require("crypto"),_Oe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];EBt&&_Oe.splice(3,0,"PS256","PS384","PS512");var _Bt={expiresIn:{isValid:s(function(t){return TOe(t)||PI(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return TOe(t)||PI(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return PI(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:bBt.bind(null,_Oe),message:'"algorithm" must be a valid string enum value'},header:{isValid:SOe,message:'"header" must be an object'},encoding:{isValid:PI,message:'"encoding" must be a string'},issuer:{isValid:PI,message:'"issuer" must be a string'},subject:{isValid:PI,message:'"subject" must be a string'},jwtid:{isValid:PI,message:'"jwtid" must be a string'},noTimestamp:{isValid:nV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:PI,message:'"keyid" must be a string'},mutatePayload:{isValid:nV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:nV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:nV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},RBt={iat:{isValid:dme,message:'"iat" should be a number of seconds'},exp:{isValid:dme,message:'"exp" should be a number of seconds'},nbf:{isValid:dme,message:'"nbf" should be a number of seconds'}};function ROe(t,e,r,n){if(!SOe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(ROe,"validate");function kBt(t){return ROe(_Bt,!1,t,"options")}s(kBt,"validateOptions");function PBt(t){return ROe(RBt,!0,t,"payload")}s(PBt,"validatePayload");var wOe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},DBt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];kOe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof TBt))try{e=SBt(e)}catch{try{e=wBt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{PBt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=DBt.filter(function(d){return typeof r[d]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{kBt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{xBt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=bOe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=bOe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(wOe).forEach(function(u){let d=wOe[u];if(typeof r[u]<"u"){if(typeof t[d]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+d+'" property.'));t[d]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&IBt(n),IOe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=IOe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var BOe=H((zon,DOe)=>{f();DOe.exports={decode:Npe(),verify:KFe(),sign:POe(),JsonWebTokenError:A6(),NotBeforeError:Lpe(),TokenExpiredError:Mpe()}});var qme=H((k0n,S7e)=>{f();function DNt(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Fpe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(d){let p,m=null,h,g;function A(...y){if(!A.enabled)return;let x=A,I=Number(new Date),S=I-(p||I);x.diff=S,x.prev=p,x.curr=I,p=I,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let R=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(M,O)=>{if(M==="%%")return"%";R++;let K=r.formatters[O];if(typeof K=="function"){let V=y[R];M=K.call(x,V),y.splice(R,1),R--}return M}),r.formatArgs.call(x,y),(x.log||r.log).apply(x,y)}return s(A,"debug"),A.namespace=d,A.useColors=r.useColors(),A.color=r.selectColor(d),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),"get"),set:s(y=>{m=y},"set")}),typeof r.init=="function"&&r.init(A),A}s(r,"createDebug");function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(n,"extend");function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(d))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(d))return!0;return!1}s(a,"enabled");function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(d){return d instanceof Error?d.stack||d.message:d}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(DNt,"setup");S7e.exports=DNt});var _7e=H((gp,DV)=>{f();gp.formatArgs=NNt;gp.save=LNt;gp.load=MNt;gp.useColors=BNt;gp.storage=FNt();gp.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();gp.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function BNt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(BNt,"useColors");function NNt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+DV.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(NNt,"formatArgs");gp.log=console.debug||console.log||(()=>{});function LNt(t){try{t?gp.storage.setItem("debug",t):gp.storage.removeItem("debug")}catch{}}s(LNt,"save");function MNt(){let t;try{t=gp.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(MNt,"load");function FNt(){try{return localStorage}catch{}}s(FNt,"localstorage");DV.exports=qme()(gp);var{formatters:ONt}=DV.exports;ONt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k7e=H((L0n,R7e)=>{"use strict";f();R7e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var B7e=H((F0n,D7e)=>{"use strict";f();var QNt=require("os"),P7e=require("tty"),Om=k7e(),{env:zl}=process,MI;Om("no-color")||Om("no-colors")||Om("color=false")||Om("color=never")?MI=0:(Om("color")||Om("colors")||Om("color=true")||Om("color=always"))&&(MI=1);"FORCE_COLOR"in zl&&(zl.FORCE_COLOR==="true"?MI=1:zl.FORCE_COLOR==="false"?MI=0:MI=zl.FORCE_COLOR.length===0?1:Math.min(parseInt(zl.FORCE_COLOR,10),3));function Hme(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Hme,"translateLevel");function $me(t,e){if(MI===0)return 0;if(Om("color=16m")||Om("color=full")||Om("color=truecolor"))return 3;if(Om("color=256"))return 2;if(t&&!e&&MI===void 0)return 0;let r=MI||0;if(zl.TERM==="dumb")return r;if(process.platform==="win32"){let n=QNt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in zl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in zl)||zl.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in zl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(zl.TEAMCITY_VERSION)?1:0;if(zl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in zl){let n=parseInt((zl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(zl.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(zl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(zl.TERM)||"COLORTERM"in zl?1:r}s($me,"supportsColor");function UNt(t){let e=$me(t,t&&t.isTTY);return Hme(e)}s(UNt,"getSupportLevel");D7e.exports={supportsColor:UNt,stdout:Hme($me(!0,P7e.isatty(1))),stderr:Hme($me(!0,P7e.isatty(2)))}});var L7e=H((Lu,NV)=>{f();var qNt=require("tty"),BV=require("util");Lu.init=zNt;Lu.log=jNt;Lu.formatArgs=$Nt;Lu.save=GNt;Lu.load=VNt;Lu.useColors=HNt;Lu.destroy=BV.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Lu.colors=[6,2,3,4,5,1];try{let t=B7e();t&&(t.stderr||t).level>=2&&(Lu.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Lu.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function HNt(){return"colors"in Lu.inspectOpts?!!Lu.inspectOpts.colors:qNt.isatty(process.stderr.fd)}s(HNt,"useColors");function $Nt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+NV.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=WNt()+e+" "+t[0]}s($Nt,"formatArgs");function WNt(){return Lu.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(WNt,"getDate");function jNt(...t){return process.stderr.write(BV.format(...t)+`
`)}s(jNt,"log");function GNt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(GNt,"save");function VNt(){return process.env.DEBUG}s(VNt,"load");function zNt(t){t.inspectOpts={};let e=Object.keys(Lu.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Lu.inspectOpts[e[r]]}s(zNt,"init");NV.exports=qme()(Lu);var{formatters:N7e}=NV.exports;N7e.o=function(t){return this.inspectOpts.colors=this.useColors,BV.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};N7e.O=function(t){return this.inspectOpts.colors=this.useColors,BV.inspect(t,this.inspectOpts)}});var iC=H((H0n,Wme)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Wme.exports=_7e():Wme.exports=L7e()});var O7e=H(i0=>{"use strict";f();var YNt=i0&&i0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KNt=i0&&i0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),M7e=i0&&i0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YNt(e,t,r);return KNt(e,t),e};Object.defineProperty(i0,"__esModule",{value:!0});i0.req=i0.json=i0.toBuffer=void 0;var JNt=M7e(require("http")),XNt=M7e(require("https"));async function F7e(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(F7e,"toBuffer");i0.toBuffer=F7e;async function ZNt(t){let r=(await F7e(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(ZNt,"json");i0.json=ZNt;function e8t(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?XNt:JNt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(e8t,"req");i0.req=e8t});var Gme=H(Ap=>{"use strict";f();var U7e=Ap&&Ap.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),t8t=Ap&&Ap.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),q7e=Ap&&Ap.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&U7e(e,t,r);return t8t(e,t),e},r8t=Ap&&Ap.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&U7e(e,t,r)};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.Agent=void 0;var n8t=q7e(require("net")),Q7e=q7e(require("http")),i8t=require("https");r8t(O7e(),Ap);var oC=Symbol("AgentBaseInternalState"),jme=class extends Q7e.Agent{static{s(this,"Agent")}constructor(e){super(e),this[oC]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new n8t.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?i8t.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof Q7e.Agent)return c.addRequest(e,i);this[oC].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[oC].currentSocket;if(this[oC].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[oC].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[oC]&&(this[oC].defaultPort=e)}get protocol(){return this[oC].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[oC]&&(this[oC].protocol=e)}};Ap.Agent=jme});var H7e=H(ID=>{"use strict";f();var o8t=ID&&ID.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ID,"__esModule",{value:!0});ID.parseProxyResponse=void 0;var s8t=o8t(iC()),LV=(0,s8t.default)("https-proxy-agent:parse-proxy-response");function a8t(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let d=t.read();d?u(d):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),LV("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(d){a(),LV("onerror %o",d),r(d)}s(l,"onerror");function u(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){LV("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=g.split(" "),y=+A[1],x=A.slice(2).join(" "),I={};for(let S of h){if(!S)continue;let R=S.indexOf(":");if(R===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${S}"`));let B=S.slice(0,R).toLowerCase(),M=S.slice(R+1).trimStart(),O=I[B];typeof O=="string"?I[B]=[O,M]:Array.isArray(O)?O.push(M):I[B]=M}LV("got proxy server response: %o %o",g,I),a(),e({connect:{statusCode:y,statusText:x,headers:I},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(a8t,"parseProxyResponse");ID.parseProxyResponse=a8t});var V7e=H(Qm=>{"use strict";f();var c8t=Qm&&Qm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l8t=Qm&&Qm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),j7e=Qm&&Qm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&c8t(e,t,r);return l8t(e,t),e},G7e=Qm&&Qm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.HttpsProxyAgent=void 0;var Vme=j7e(require("net")),$7e=j7e(require("tls")),u8t=G7e(require("assert")),d8t=G7e(iC()),f8t=Gme(),p8t=require("url"),m8t=H7e(),F6=(0,d8t.default)("https-proxy-agent"),MV=class extends f8t.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new p8t.URL(e):e,this.proxyHeaders=r?.headers??{},F6("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?W7e(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){F6("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=$7e.connect({...this.connectOpts,servername:m})}else F6("Creating `net.Socket`: %o",this.connectOpts),i=Vme.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=Vme.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,m8t.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:d}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",h8t),r.secureEndpoint){F6("Upgrading socket connection to TLS");let m=r.servername||r.host;return $7e.connect({...W7e(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new Vme.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{F6("Replaying proxy buffer for failed request"),(0,u8t.default)(m.listenerCount("data")>0),m.push(d),m.push(null)}),p}};MV.protocols=["http","https"];Qm.HttpsProxyAgent=MV;function h8t(t){t.resume()}s(h8t,"resume");function W7e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(W7e,"omit")});var K7e=H(Um=>{"use strict";f();var g8t=Um&&Um.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A8t=Um&&Um.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Y7e=Um&&Um.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g8t(e,t,r);return A8t(e,t),e},y8t=Um&&Um.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Um,"__esModule",{value:!0});Um.HttpProxyAgent=void 0;var C8t=Y7e(require("net")),v8t=Y7e(require("tls")),E8t=y8t(iC()),x8t=require("events"),b8t=Gme(),z7e=require("url"),TD=(0,E8t.default)("http-proxy-agent"),FV=class extends b8t.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new z7e.URL(e):e,this.proxyHeaders=r?.headers??{},TD("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?I8t(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new z7e.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let d=l[u];d&&e.setHeader(u,d)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;TD("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(TD("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),TD("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(TD("Creating `tls.Socket`: %o",this.connectOpts),o=v8t.connect(this.connectOpts)):(TD("Creating `net.Socket`: %o",this.connectOpts),o=C8t.connect(this.connectOpts)),await(0,x8t.once)(o,"connect"),o}};FV.protocols=["http","https"];Um.HttpProxyAgent=FV;function I8t(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(I8t,"omit")});var xQe=H(ZV=>{"use strict";f();Object.defineProperty(ZV,"__esModule",{value:!0});ZV.state=void 0;ZV.state={operationRequestMap:new WeakMap}});function NLt(){try{return Ihe.default.statSync("/.dockerenv"),!0}catch{return!1}}function LLt(){try{return Ihe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function The(){return bhe===void 0&&(bhe=NLt()||LLt()),bhe}var Ihe,bhe,FQe=bg(()=>{f();Ihe=Fe(require("node:fs"),1);s(NLt,"hasDockerEnv");s(LLt,"hasDockerCGroup");s(The,"isDocker")});function RD(){return whe===void 0&&(whe=MLt()||The()),whe}var OQe,whe,MLt,She=bg(()=>{f();OQe=Fe(require("node:fs"),1);FQe();MLt=s(()=>{try{return OQe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(RD,"isInsideContainer")});var _he,UQe,qQe,QQe,kD,HQe=bg(()=>{f();_he=Fe(require("node:process"),1),UQe=Fe(require("node:os"),1),qQe=Fe(require("node:fs"),1);She();QQe=s(()=>{if(_he.default.platform!=="linux")return!1;if(UQe.default.release().toLowerCase().includes("microsoft"))return!RD();try{return qQe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!RD():!1}catch{return!1}},"isWsl"),kD=_he.default.env.__IS_WSL_TEST__?QQe:QQe()});function y2(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var $Qe=bg(()=>{f();s(y2,"defineLazyProperty")});async function Rhe(){if(jQe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await FLt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var WQe,jQe,GQe,FLt,VQe=bg(()=>{f();WQe=require("node:util"),jQe=Fe(require("node:process"),1),GQe=require("node:child_process"),FLt=(0,WQe.promisify)(GQe.execFile);s(Rhe,"defaultBrowserId")});async function KQe(t,{humanReadableOutput:e=!0}={}){if(zQe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await OLt("osascript",["-e",t,r]);return n.trim()}var zQe,YQe,khe,OLt,JQe=bg(()=>{f();zQe=Fe(require("node:process"),1),YQe=require("node:util"),khe=require("node:child_process"),OLt=(0,YQe.promisify)(khe.execFile);s(KQe,"runAppleScript")});async function Phe(t){return KQe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var XQe=bg(()=>{f();JQe();s(Phe,"bundleName")});async function Dhe(t=QLt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new tz(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=ULt[n];if(!i)throw new tz(`Unknown browser ID: ${n}`);return i}var ZQe,eUe,QLt,ULt,tz,tUe=bg(()=>{f();ZQe=require("node:util"),eUe=require("node:child_process"),QLt=(0,ZQe.promisify)(eUe.execFile),ULt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},tz=class extends Error{static{s(this,"UnknownBrowserError")}};s(Dhe,"defaultBrowser")});async function Bhe(){if(rz.default.platform==="darwin"){let t=await Rhe();return{name:await Phe(t),id:t}}if(rz.default.platform==="linux"){let{stdout:t}=await qLt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:HLt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(rz.default.platform==="win32")return Dhe();throw new Error("Only macOS, Linux, and Windows are supported")}var rUe,rz,nUe,qLt,HLt,iUe=bg(()=>{f();rUe=require("node:util"),rz=Fe(require("node:process"),1),nUe=require("node:child_process");VQe();XQe();tUe();qLt=(0,rUe.promisify)(nUe.execFile),HLt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(Bhe,"defaultBrowser")});var fUe={};ma(fUe,{apps:()=>v2,default:()=>j6,openApp:()=>VLt});async function jLt(){let t=await dUe(),r=Lhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await $Lt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function cUe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[sUe]:e}=t;if(!e)throw new Error(`${sUe} is not supported`);return e}function Ohe({[PD]:t},{wsl:e}){if(e&&kD)return cUe(e);if(!t)throw new Error(`${PD} is not supported`);return cUe(t)}var $6,Lhe,Mhe,lUe,uUe,Fhe,C2,$Lt,Nhe,oUe,PD,sUe,WLt,dUe,aUe,W6,GLt,VLt,v2,j6,nz=bg(()=>{f();$6=Fe(require("node:process"),1),Lhe=require("node:buffer"),Mhe=Fe(require("node:path"),1),lUe=require("node:url"),uUe=Fe(require("node:util"),1),Fhe=Fe(require("node:child_process"),1),C2=Fe(require("node:fs/promises"),1);HQe();$Qe();iUe();She();$Lt=uUe.default.promisify(Fhe.default.execFile),Nhe=Mhe.default.dirname((0,lUe.fileURLToPath)(importMetaUrlShim)),oUe=Mhe.default.join(Nhe,"xdg-open"),{platform:PD,arch:sUe}=$6.default,WLt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await C2.default.access(r,C2.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await C2.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),dUe=s(async()=>`${await WLt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(jLt,"getWindowsDefaultBrowserFromWsl");aUe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),W6=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return aUe(t.app,c=>W6({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return aUe(e,c=>W6({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=kD?await jLt():await Bhe();if(u.id in c){let d=c[u.id];return e==="browserPrivate"&&r.push(l[d]),W6({...t,app:{name:v2[d],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(PD==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(PD==="win32"||kD&&!RD()&&!e){n=kD?await dUe():`${$6.default.env.SYSTEMROOT||$6.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),kD||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=Lhe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!Nhe||Nhe==="/",l=!1;try{await C2.default.access(oUe,C2.constants.X_OK),l=!0}catch{}n=$6.default.versions.electron??(PD==="android"||c||!l)?"xdg-open":oUe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}PD==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=Fhe.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),GLt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return W6({...e,target:t})},"open"),VLt=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return W6({...e,app:{name:t,arguments:r}})},"openApp");s(cUe,"detectArchBinary");s(Ohe,"detectPlatformBinary");v2={};y2(v2,"chrome",()=>Ohe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));y2(v2,"firefox",()=>Ohe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));y2(v2,"edge",()=>Ohe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));y2(v2,"browser",()=>"browser");y2(v2,"browserPrivate",()=>"browserPrivate");j6=GLt});var UUe=H(dC=>{"use strict";f();Object.defineProperty(dC,"__esModule",{value:!0});dC.bytePairEncode=dC.BinaryMap=dC.binaryMapKey=void 0;var vMt=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");dC.binaryMapKey=vMt;var ege=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,dC.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,dC.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};dC.BinaryMap=ege;var uC=new Int32Array(128),cf=new Int32Array(128);function EMt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;uC.length<r*2;)cf=new Int32Array(cf.length*2),uC=new Int32Array(uC.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),cf[l]=l,uC[l]=u}cf[r-1]=r-1,uC[r-1]=2147483647,cf[r]=r,uC[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let d=e.get(t,cf[l],cf[l+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");n!==2147483647;){uC[cf[i]]=a(i,1),i>0&&(uC[cf[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)cf[l]=cf[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=uC[cf[l]];uC[cf[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,cf[l],cf[l+1]));return c}s(EMt,"bytePairEncode");dC.bytePairEncode=EMt});var qUe=H(mz=>{"use strict";f();Object.defineProperty(mz,"__esModule",{value:!0});mz.makeTextEncoder=void 0;var tge=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},rge=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},xMt=s(()=>typeof Buffer<"u"?new rge:new tge,"makeTextEncoder");mz.makeTextEncoder=xMt});var HUe=H(hz=>{"use strict";f();Object.defineProperty(hz,"__esModule",{value:!0});hz.LRUCache=void 0;var nge=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new ige(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};hz.LRUCache=nge;var ige=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var sge=H(Az=>{"use strict";f();Object.defineProperty(Az,"__esModule",{value:!0});Az.TikTokenizer=void 0;var gz=UUe(),bMt=qUe(),IMt=HUe();function TMt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(TMt,"loadTikTokenBpe");function wMt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(wMt,"escapeRegExp");var oge=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,bMt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new IMt.LRUCache(i);let o=typeof e=="string"?TMt(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new gz.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>wMt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let d=(0,gz.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of d)r.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let d=l[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,c+=d.length,r.push(...p);else{let m=o-a;a+=m,c+=d.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,c+=d.length,r.push(h);else break;else{let g=(0,gz.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,c+=d.length;for(let A of g)r.push(A)}else{let A=o-a;a+=A,c+=d.length;for(let y=0;y<A;y++)r.push(g[y]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,n),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,A=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(A);){let y=g[0],x=this.cache.get(y);if(x)a+=x.length,c+=y.length,i.push(...x),l.set(a,c);else{let I=this.textEncoder.encode(y),S=this.encoder.get(I);if(S!==void 0)this.cache.set(y,[S]),a++,c+=y.length,i.push(S),l.set(a,c);else{let R=(0,gz.bytePairEncode)(I,this.encoder,this.textEncoder.length);this.cache.set(y,R),a+=R.length,c+=y.length;for(let B of R)i.push(B);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,d=0,p=0;for(let[m,h]of l)if(m>=u){d=m,p=h;break}if(d>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};Az.TikTokenizer=oge});var XUe=H(zc=>{"use strict";f();Object.defineProperty(zc,"__esModule",{value:!0});zc.createTokenizer=zc.createByEncoderName=zc.createByModelName=zc.getRegexByModel=zc.getRegexByEncoder=zc.getSpecialTokensByModel=zc.getSpecialTokensByEncoder=zc.MODEL_TO_ENCODING=void 0;var SMt=sge(),_Mt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);zc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var yz="<|endoftext|>",$Ue="<|fim_prefix|>",WUe="<|fim_middle|>",jUe="<|fim_suffix|>",GUe="<|endofprompt|>",nF="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",VUe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",RMt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],zUe=RMt.join("|");function age(t){let e="";if(zc.MODEL_TO_ENCODING.has(t))e=zc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of _Mt)if(t.startsWith(r)){e=n;break}return e}s(age,"getEncoderFromModelName");async function kMt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(kMt,"fetchAndSaveFile");function cge(t){let e=new Map([[yz,50256]]);switch(t){case"o200k_base":e=new Map([[yz,199999],[GUe,200018]]);break;case"cl100k_base":e=new Map([[yz,100257],[$Ue,100258],[WUe,100259],[jUe,100260],[GUe,100276]]);break;case"p50k_edit":e=new Map([[yz,50256],[$Ue,50281],[WUe,50282],[jUe,50283]]);break;default:break}return e}s(cge,"getSpecialTokensByEncoder");zc.getSpecialTokensByEncoder=cge;function PMt(t){let e=age(t);return cge(e)}s(PMt,"getSpecialTokensByModel");zc.getSpecialTokensByModel=PMt;function YUe(t){switch(t){case"o200k_base":return zUe;case"cl100k_base":return VUe;default:break}return nF}s(YUe,"getRegexByEncoder");zc.getRegexByEncoder=YUe;function DMt(t){let e=age(t);return YUe(e)}s(DMt,"getRegexByModel");zc.getRegexByModel=DMt;async function BMt(t,e=null){return KUe(age(t),e)}s(BMt,"createByModelName");zc.createByModelName=BMt;async function KUe(t,e=null){let r,n,i=cge(t);switch(t){case"o200k_base":r=zUe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=VUe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=nF,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=nF,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=nF,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=nF,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await kMt(n,u),console.log(`Saved file to ${u}`)),JUe(u,i,r)}s(KUe,"createByEncoderName");zc.createByEncoderName=KUe;function JUe(t,e,r,n=8192){return new SMt.TikTokenizer(t,e,r,n)}s(JUe,"createTokenizer");zc.createTokenizer=JUe});var ZUe=H(Yc=>{"use strict";f();Object.defineProperty(Yc,"__esModule",{value:!0});Yc.createTokenizer=Yc.createByEncoderName=Yc.createByModelName=Yc.getSpecialTokensByModel=Yc.getSpecialTokensByEncoder=Yc.getRegexByModel=Yc.getRegexByEncoder=Yc.MODEL_TO_ENCODING=Yc.TikTokenizer=void 0;var NMt=sge();Object.defineProperty(Yc,"TikTokenizer",{enumerable:!0,get:s(function(){return NMt.TikTokenizer},"get")});var qI=XUe();Object.defineProperty(Yc,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return qI.MODEL_TO_ENCODING},"get")});Object.defineProperty(Yc,"getRegexByEncoder",{enumerable:!0,get:s(function(){return qI.getRegexByEncoder},"get")});Object.defineProperty(Yc,"getRegexByModel",{enumerable:!0,get:s(function(){return qI.getRegexByModel},"get")});Object.defineProperty(Yc,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return qI.getSpecialTokensByEncoder},"get")});Object.defineProperty(Yc,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return qI.getSpecialTokensByModel},"get")});Object.defineProperty(Yc,"createByModelName",{enumerable:!0,get:s(function(){return qI.createByModelName},"get")});Object.defineProperty(Yc,"createByEncoderName",{enumerable:!0,get:s(function(){return qI.createByEncoderName},"get")});Object.defineProperty(Yc,"createTokenizer",{enumerable:!0,get:s(function(){return qI.createTokenizer},"get")})});var Age=H((ckn,xqe)=>{"use strict";f();xqe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var Iqe=H((dkn,bqe)=>{"use strict";f();var fFt=Age();function pFt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=fFt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(pFt,"parsePath");bqe.exports=pFt});var kqe=H((mkn,Rqe)=>{"use strict";f();var mFt=Iqe();function hFt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(hFt,"_interopDefaultLegacy");var gFt=hFt(mFt);function AFt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(AFt,"getAugmentedNamespace");var wqe={},yFt="text/plain",CFt="us-ascii",Tqe=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),vFt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===CFt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&d.push("base64"),(d.length>0||l&&l!==yFt)&&d.unshift(l),`data:${d.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function EFt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return vFt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];Tqe(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])Tqe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(EFt,"normalizeUrl");var xFt=Object.freeze({__proto__:null,default:EFt}),bFt=AFt(xFt);Object.defineProperty(wqe,"__esModule",{value:!0});var IFt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TFt=bFt,wFt=Sqe(TFt),SFt=gFt.default,_Ft=Sqe(SFt);function Sqe(t){return t&&t.__esModule?t:{default:t}}s(Sqe,"_interopRequireDefault");var _qe=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":IFt(r))!=="object"&&(r={stripHash:!1}),e=(0,wFt.default)(e,r));var o=(0,_Ft.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");_qe.MAX_INPUT_LENGTH=2048;var RFt=wqe.default=_qe;Rqe.exports=RFt});var Bqe=H((Akn,Dqe)=>{"use strict";f();var kFt=Age();function Pqe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=kFt(t);if(t=t.substring(t.indexOf("://")+3),Pqe(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(Pqe,"isSsh");Dqe.exports=Pqe});var Mqe=H((vkn,Lqe)=>{"use strict";f();var PFt=kqe(),Nqe=Bqe();function DFt(t){let e=PFt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),Nqe(e.protocols)||e.protocols.length===0&&Nqe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(DFt,"gitUp");Lqe.exports=DFt});var Oqe=H((bkn,Fqe)=>{"use strict";f();var BFt=Mqe();function yge(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(I){return typeof I=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=BFt(t),i=n.resource.split("."),o=null;switch(n.toString=function(I){return yge.stringify(this,I)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],d&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var A=o.length>a&&o[a+1]==="-"?a+1:a;o.length>A+2&&["raw","src","blob","tree","edit"].indexOf(o[A+1])>=0&&(n.filepathtype=o[A+1],n.ref=o[A+2],o.length>A+3&&(n.filepath=o.slice(A+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var y=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,x=y.exec(n.pathname);return x!=null&&(n.source="bitbucket-server",x[1]==="users"?n.owner="~"+x[2]:n.owner=x[2],n.organization=n.owner,n.name=x[3],o=x[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=MFt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(yge,"gitUrlParse");yge.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?NFt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+LFt(t)+i;default:return t.href}};function NFt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(NFt,"buildToken");function LFt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(LFt,"buildPath");function MFt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(MFt,"findLongestMatchingSubstring");Fqe.exports=yge});var jqe=H((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var x=0,I=1;;){var S=t[e++];if(x+=(127&S)*I,I*=128,!(128&S))break}return x}s(n,"_");function i(){var x=n();return UTF8ArrayToString(t,(e+=x)-x,x)}s(i,"n");function o(x,I){if(x)throw new Error(I)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var d=n(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(d=n(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var A=n();A--;){var y=i();256&n()&&u.tlsExports.add(y)}else if(h===4)for(A=n();A--;)i(),y=i(),(3&n())==1&&u.weakImports.add(y);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,d){readAsync(c,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,d)=>e.slice(l,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let d=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let A=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),y=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,x=e.substr(y,100).split(`
`)[0],I,S=x.match(QUERY_WORD_REGEX)[0];switch(A){case 2:I=new RangeError(`Bad node name '${S}'`);break;case 3:I=new RangeError(`Bad field name '${S}'`);break;case 4:I=new RangeError(`Bad capture name @${S}`);break;case 5:I=new TypeError(`Bad pattern structure at offset ${y}: '${x}'...`),S="";break;default:I=new SyntaxError(`Bad syntax at offset ${y}: '${x}'...`),S=""}throw I.index=y,I.length=S.length,C._free(n),I}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let A=0;A<a;A++){let y=C._ts_query_capture_name_for_id(i,A,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");l[A]=UTF8ToString(y,x)}for(let A=0;A<o;A++){let y=C._ts_query_string_value_for_id(i,A,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");u[A]=UTF8ToString(y,x)}let d=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let A=0;A<c;A++){let y=C._ts_query_predicates_for_pattern(i,A,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");h[A]=[],g[A]=[];let I=[],S=y;for(let R=0;R<x;R++){let B=getValue(S,"i32");S+=SIZE_OF_INT;let M=getValue(S,"i32");if(S+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)I.push({type:"capture",name:l[M]});else if(B===PREDICATE_STEP_TYPE_STRING)I.push({type:"string",value:u[M]});else if(I.length>0){if(I[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=I[0].value,K=!0;switch(O){case"not-eq?":K=!1;case"eq?":if(I.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(I.length-1));if(I[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${I[1].value}"`);if(I[2].type==="capture"){let U=I[1].name,Z=I[2].name;g[A].push(function(J){let j,$;for(let X of J)X.name===U&&(j=X.node),X.name===Z&&($=X.node);return j===void 0||$===void 0||j.text===$.text===K})}else{let U=I[1].name,Z=I[2].value;g[A].push(function(J){for(let j of J)if(j.name===U)return j.node.text===Z===K;return!0})}break;case"not-match?":K=!1;case"match?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${I[1].value}".`);if(I[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${I[2].value}.`);let V=I[1].name,z=new RegExp(I[2].value);g[A].push(function(U){for(let Z of U)if(Z.name===V)return z.test(Z.node.text)===K;return!0});break;case"set!":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[A]||(d[A]={}),d[A][I[1].value]=I[2]?I[2].value:null;break;case"is?":case"is-not?":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let Q=O==="is?"?p:m;Q[A]||(Q[A]={}),Q[A][I[1].value]=I[2]?I[2].value:null;break;default:h[A].push({operator:O,operands:I.slice(1)})}I.length=0}}Object.freeze(d[A]),Object.freeze(p[A]),Object.freeze(m[A])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let d=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,A),this.textPredicates[h].every(y=>y(A))){u[d++]={pattern:h,captures:A};let y=this.setProperties[h];y&&(u[m].setProperties=y);let x=this.assertedProperties[h];x&&(u[m].assertedProperties=x);let I=this.refutedProperties[h];I&&(u[m].refutedProperties=I)}}return u.length=d,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let d=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(y=>y(d))){let y=d[A],x=this.setProperties[h];x&&(y.setProperties=x);let I=this.assertedProperties[h];I&&(y.assertedProperties=I);let S=this.refutedProperties[h];S&&(y.refutedProperties=S),u.push(y)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var nAe=H((I3n,wHe)=>{f();var rAe=require("fs"),uY=require("path"),_F=uY.join,y7t=uY.dirname,IHe=rAe.accessSync&&function(t){try{rAe.accessSync(t)}catch{return!1}return!0}||rAe.existsSync||uY.existsSync,THe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function C7t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(THe).map(function(l){l in t||(t[l]=THe[l])}),t.module_root||(t.module_root=v7t(__filename)),uY.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=_F.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(C7t,"bindings");wHe.exports=C7t;function v7t(t){for(var e=y7t(t),r;;){if(e==="."&&(e=process.cwd()),IHe(_F(e,"dist")))return _F(e,"dist");if(IHe(_F(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=_F(e,"..")}}s(v7t,"getRoot")});var _He=H((S3n,SHe)=>{f();SHe.exports=nAe()("node_sqlite3.node")});var PHe=H(kHe=>{f();var E7t=require("util");function x7t(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return E7t.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=RHe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+RHe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(x7t,"extendTrace");kHe.extendTrace=x7t;function RHe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(RHe,"filter")});var LHe=H((BHe,NHe)=>{f();var b7t=require("path"),zm=_He(),GD=require("events").EventEmitter;NHe.exports=BHe=zm;function VD(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new dY(this,e,r);return t.call(this,i,n)}}s(VD,"normalizeMethod");function oAe(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(oAe,"inherits");zm.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new uf(t,e,r);let n;if(t=b7t.resolve(t),!zm.cached.objects[t])n=zm.cached.objects[t]=new uf(t,e,r);else{n=zm.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var uf=zm.Database,dY=zm.Statement,iAe=zm.Backup;oAe(uf,GD);oAe(dY,GD);oAe(iAe,GD);uf.prototype.prepare=VD(function(t,e){return e.length?t.bind.apply(t,e):t});uf.prototype.run=VD(function(t,e){return t.run.apply(t,e).finalize(),this});uf.prototype.get=VD(function(t,e){return t.get.apply(t,e).finalize(),this});uf.prototype.all=VD(function(t,e){return t.all.apply(t,e).finalize(),this});uf.prototype.each=VD(function(t,e){return t.each.apply(t,e).finalize(),this});uf.prototype.map=VD(function(t,e){return t.map.apply(t,e).finalize(),this});uf.prototype.backup=function(){let t;return arguments.length<=2?t=new iAe(this,arguments[0],"main","main",!0,arguments[1]):t=new iAe(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[zm.BUSY,zm.LOCKED],t};dY.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var DHe=!1,sAe=["trace","profile","change"];uf.prototype.addListener=uf.prototype.on=function(t){let e=GD.prototype.addListener.apply(this,arguments);return sAe.indexOf(t)>=0&&this.configure(t,!0),e};uf.prototype.removeListener=function(t){let e=GD.prototype.removeListener.apply(this,arguments);return sAe.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};uf.prototype.removeAllListeners=function(t){let e=GD.prototype.removeAllListeners.apply(this,arguments);return sAe.indexOf(t)>=0&&this.configure(t,!1),e};zm.verbose=function(){if(!DHe){let t=PHe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(uf.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(dY.prototype,e)}),DHe=!0}return zm}});var IY=H(Xc=>{"use strict";f();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.thenable=Xc.typedArray=Xc.stringArray=Xc.array=Xc.func=Xc.error=Xc.number=Xc.string=Xc.boolean=void 0;function T7t(t){return t===!0||t===!1}s(T7t,"boolean");Xc.boolean=T7t;function UHe(t){return typeof t=="string"||t instanceof String}s(UHe,"string");Xc.string=UHe;function w7t(t){return typeof t=="number"||t instanceof Number}s(w7t,"number");Xc.number=w7t;function S7t(t){return t instanceof Error}s(S7t,"error");Xc.error=S7t;function qHe(t){return typeof t=="function"}s(qHe,"func");Xc.func=qHe;function HHe(t){return Array.isArray(t)}s(HHe,"array");Xc.array=HHe;function _7t(t){return HHe(t)&&t.every(e=>UHe(e))}s(_7t,"stringArray");Xc.stringArray=_7t;function R7t(t,e){return Array.isArray(t)&&t.every(e)}s(R7t,"typedArray");Xc.typedArray=R7t;function k7t(t){return t&&qHe(t.then)}s(k7t,"thenable");Xc.thenable=k7t});var lAe=H(Ym=>{"use strict";f();Object.defineProperty(Ym,"__esModule",{value:!0});Ym.generateUuid=Ym.parse=Ym.isUUID=Ym.v4=Ym.empty=void 0;var PF=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},DF=class t extends PF{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};DF._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];DF._timeHighBits=["8","9","a","b"];Ym.empty=new PF("00000000-0000-0000-0000-000000000000");function $He(){return new DF}s($He,"v4");Ym.v4=$He;var P7t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function WHe(t){return P7t.test(t)}s(WHe,"isUUID");Ym.isUUID=WHe;function D7t(t){if(!WHe(t))throw new Error("invalid uuid");return new PF(t)}s(D7t,"parse");Ym.parse=D7t;function B7t(){return $He().asHex()}s(B7t,"generateUuid");Ym.generateUuid=B7t});var jHe=H(JI=>{"use strict";f();Object.defineProperty(JI,"__esModule",{value:!0});JI.attachPartialResult=JI.ProgressFeature=JI.attachWorkDone=void 0;var KI=ui(),N7t=lAe(),L2=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(KI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(KI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(KI.WorkDoneProgress.type,this._token,{kind:"end"})}};L2.Instances=new Map;var TY=class extends L2{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new KI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},BF=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},wY=class extends BF{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new KI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function L7t(t,e){if(e===void 0||e.workDoneToken===void 0)return new BF;let r=e.workDoneToken;return delete e.workDoneToken,new L2(t,r)}s(L7t,"attachWorkDone");JI.attachWorkDone=L7t;var M7t=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(KI.WorkDoneProgressCancelNotification.type,r=>{let n=L2.Instances.get(r.token);(n instanceof TY||n instanceof wY)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new BF:new L2(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,N7t.generateUuid)();return this.connection.sendRequest(KI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new TY(this.connection,e))}else return Promise.resolve(new wY)}},"ProgressFeature");JI.ProgressFeature=M7t;var uAe;(function(t){t.type=new KI.ProgressType})(uAe||(uAe={}));var dAe=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(uAe.type,this._token,e)}};function F7t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new dAe(t,r)}s(F7t,"attachPartialResult");JI.attachPartialResult=F7t});var GHe=H(SY=>{"use strict";f();Object.defineProperty(SY,"__esModule",{value:!0});SY.ConfigurationFeature=void 0;var O7t=ui(),Q7t=IY(),U7t=s(t=>class extends t{getConfiguration(e){return e?Q7t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(O7t.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");SY.ConfigurationFeature=U7t});var VHe=H(RY=>{"use strict";f();Object.defineProperty(RY,"__esModule",{value:!0});RY.WorkspaceFoldersFeature=void 0;var _Y=ui(),q7t=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new _Y.Emitter,this.connection.onNotification(_Y.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(_Y.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(_Y.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");RY.WorkspaceFoldersFeature=q7t});var zHe=H(kY=>{"use strict";f();Object.defineProperty(kY,"__esModule",{value:!0});kY.CallHierarchyFeature=void 0;var fAe=ui(),H7t=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(fAe.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=fAe.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=fAe.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");kY.CallHierarchyFeature=H7t});var mAe=H(XI=>{"use strict";f();Object.defineProperty(XI,"__esModule",{value:!0});XI.SemanticTokensBuilder=XI.SemanticTokensDiff=XI.SemanticTokensFeature=void 0;var PY=ui(),$7t=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(PY.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=PY.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=PY.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=PY.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");XI.SemanticTokensFeature=$7t;var DY=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};XI.SemanticTokensDiff=DY;var pAe=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new DY(this._prevData,this._data).computeDiff()}:this.build()}};XI.SemanticTokensBuilder=pAe});var YHe=H(BY=>{"use strict";f();Object.defineProperty(BY,"__esModule",{value:!0});BY.ShowDocumentFeature=void 0;var W7t=ui(),j7t=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(W7t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");BY.ShowDocumentFeature=j7t});var KHe=H(NY=>{"use strict";f();Object.defineProperty(NY,"__esModule",{value:!0});NY.FileOperationsFeature=void 0;var YD=ui(),G7t=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(YD.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(YD.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(YD.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(YD.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(YD.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(YD.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");NY.FileOperationsFeature=G7t});var JHe=H(LY=>{"use strict";f();Object.defineProperty(LY,"__esModule",{value:!0});LY.LinkedEditingRangeFeature=void 0;var V7t=ui(),z7t=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(V7t.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");LY.LinkedEditingRangeFeature=z7t});var XHe=H(MY=>{"use strict";f();Object.defineProperty(MY,"__esModule",{value:!0});MY.TypeHierarchyFeature=void 0;var hAe=ui(),Y7t=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(hAe.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=hAe.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=hAe.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");MY.TypeHierarchyFeature=Y7t});var e$e=H(FY=>{"use strict";f();Object.defineProperty(FY,"__esModule",{value:!0});FY.InlineValueFeature=void 0;var ZHe=ui(),K7t=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(ZHe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(ZHe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");FY.InlineValueFeature=K7t});var r$e=H(OY=>{"use strict";f();Object.defineProperty(OY,"__esModule",{value:!0});OY.FoldingRangeFeature=void 0;var t$e=ui(),J7t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(t$e.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=t$e.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");OY.FoldingRangeFeature=J7t});var n$e=H(QY=>{"use strict";f();Object.defineProperty(QY,"__esModule",{value:!0});QY.InlayHintFeature=void 0;var gAe=ui(),X7t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(gAe.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(gAe.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(gAe.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");QY.InlayHintFeature=X7t});var i$e=H(UY=>{"use strict";f();Object.defineProperty(UY,"__esModule",{value:!0});UY.DiagnosticFeature=void 0;var NF=ui(),Z7t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(NF.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(NF.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(NF.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(NF.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(NF.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");UY.DiagnosticFeature=Z7t});var yAe=H(qY=>{"use strict";f();Object.defineProperty(qY,"__esModule",{value:!0});qY.TextDocuments=void 0;var M2=ui(),AAe=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new M2.Emitter,this._onDidOpen=new M2.Emitter,this._onDidClose=new M2.Emitter,this._onDidSave=new M2.Emitter,this._onWillSave=new M2.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=M2.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),M2.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};qY.TextDocuments=AAe});var vAe=H(KD=>{"use strict";f();Object.defineProperty(KD,"__esModule",{value:!0});KD.NotebookDocuments=KD.NotebookSyncFeature=void 0;var Km=ui(),o$e=yAe(),eQt=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Km.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Km.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Km.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Km.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");KD.NotebookSyncFeature=eQt;var HY=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Km.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Km.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Km.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};HY.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var CAe=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof o$e.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new o$e.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Km.Emitter,this._onDidChange=new Km.Emitter,this._onDidSave=new Km.Emitter,this._onDidClose=new Km.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new HY,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],d=[],p=[],m=[];if(l.cells!==void 0){let x=l.cells;if(x.structure!==void 0){let I=x.structure.array;if(o.cells.splice(I.start,I.deleteCount,...I.cells!==void 0?I.cells:[]),x.structure.didOpen!==void 0)for(let S of x.structure.didOpen)r.openTextDocument({textDocument:S}),u.push(S.uri);if(x.structure.didClose)for(let S of x.structure.didClose)r.closeTextDocument({textDocument:S}),d.push(S.uri)}if(x.data!==void 0){let I=new Map(x.data.map(S=>[S.document,S]));for(let S=0;S<=o.cells.length;S++){let R=I.get(o.cells[S].document);if(R!==void 0){let B=o.cells.splice(S,1,R);if(p.push({old:B[0],new:R}),I.delete(R.document),I.size===0)break}}}if(x.textContent!==void 0)for(let I of x.textContent)r.changeTextDocument({textDocument:I.document,contentChanges:I.changes}),m.push(I.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let x of u)g.push(this.getNotebookCell(x));let A=[];for(let x of d)A.push(this.getNotebookCell(x));let y=[];for(let x of m)y.push(this.getNotebookCell(x));(g.length>0||A.length>0||p.length>0||y.length>0)&&(h.cells={added:g,removed:A,changed:{data:p,textContent:y}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Km.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};KD.NotebookDocuments=CAe});var s$e=H($Y=>{"use strict";f();Object.defineProperty($Y,"__esModule",{value:!0});$Y.MonikerFeature=void 0;var tQt=ui(),rQt=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=tQt.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");$Y.MonikerFeature=rQt});var wAe=H(Uo=>{"use strict";f();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.createConnection=Uo.combineFeatures=Uo.combineNotebooksFeatures=Uo.combineLanguagesFeatures=Uo.combineWorkspaceFeatures=Uo.combineWindowFeatures=Uo.combineClientFeatures=Uo.combineTracerFeatures=Uo.combineTelemetryFeatures=Uo.combineConsoleFeatures=Uo._NotebooksImpl=Uo._LanguagesImpl=Uo.BulkUnregistration=Uo.BulkRegistration=Uo.ErrorMessageTracker=void 0;var sr=ui(),Jm=IY(),xAe=lAe(),ci=jHe(),nQt=GHe(),iQt=VHe(),oQt=zHe(),sQt=mAe(),aQt=YHe(),cQt=KHe(),lQt=JHe(),uQt=XHe(),dQt=e$e(),fQt=r$e(),pQt=n$e(),mQt=i$e(),hQt=vAe(),gQt=s$e();function EAe(t){if(t!==null)return t}s(EAe,"null2Undefined");var bAe=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Uo.ErrorMessageTracker=bAe;var WY=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(sr.MessageType.Error,e)}warn(e){this.send(sr.MessageType.Warning,e)}info(e){this.send(sr.MessageType.Info,e)}log(e){this.send(sr.MessageType.Log,e)}debug(e){this.send(sr.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(sr.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,sr.RAL)().console.error("Sending log message failed")})}},IAe=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:sr.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(sr.ShowMessageRequest.type,n).then(EAe)}showWarningMessage(e,...r){let n={type:sr.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(sr.ShowMessageRequest.type,n).then(EAe)}showInformationMessage(e,...r){let n={type:sr.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(sr.ShowMessageRequest.type,n).then(EAe)}},a$e=(0,aQt.ShowDocumentFeature)((0,ci.ProgressFeature)(IAe)),c$e;(function(t){function e(){return new jY}s(e,"create"),t.create=e})(c$e||(Uo.BulkRegistration=c$e={}));var jY=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Jm.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=xAe.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},l$e;(function(t){function e(){return new LF(void 0,[])}s(e,"create"),t.create=e})(l$e||(Uo.BulkUnregistration=l$e={}));var LF=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(sr.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Jm.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(sr.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},GY=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof jY?this.registerMany(e):e instanceof LF?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Jm.string(r)?r:r.method,o=xAe.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(sr.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Jm.string(e)?e:e.method,i=xAe.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(sr.RegistrationRequest.type,o).then(a=>sr.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(sr.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(sr.RegistrationRequest.type,r).then(()=>new LF(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},TAe=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(sr.ApplyWorkspaceEditRequest.type,n)}},u$e=(0,cQt.FileOperationsFeature)((0,iQt.WorkspaceFoldersFeature)((0,nQt.ConfigurationFeature)(TAe))),VY=class{static{s(this,"TracerImpl")}constructor(){this._trace=sr.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==sr.Trace.Off&&this.connection.sendNotification(sr.LogTraceNotification.type,{message:e,verbose:this._trace===sr.Trace.Verbose?r:void 0}).catch(()=>{})}},zY=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(sr.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},YY=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,ci.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,ci.attachPartialResult)(this.connection,r)}};Uo._LanguagesImpl=YY;var d$e=(0,fQt.FoldingRangeFeature)((0,gQt.MonikerFeature)((0,mQt.DiagnosticFeature)((0,pQt.InlayHintFeature)((0,dQt.InlineValueFeature)((0,uQt.TypeHierarchyFeature)((0,lQt.LinkedEditingRangeFeature)((0,sQt.SemanticTokensFeature)((0,oQt.CallHierarchyFeature)(YY))))))))),KY=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,ci.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,ci.attachPartialResult)(this.connection,r)}};Uo._NotebooksImpl=KY;var f$e=(0,hQt.NotebookSyncFeature)(KY);function p$e(t,e){return function(r){return e(t(r))}}s(p$e,"combineConsoleFeatures");Uo.combineConsoleFeatures=p$e;function m$e(t,e){return function(r){return e(t(r))}}s(m$e,"combineTelemetryFeatures");Uo.combineTelemetryFeatures=m$e;function h$e(t,e){return function(r){return e(t(r))}}s(h$e,"combineTracerFeatures");Uo.combineTracerFeatures=h$e;function g$e(t,e){return function(r){return e(t(r))}}s(g$e,"combineClientFeatures");Uo.combineClientFeatures=g$e;function A$e(t,e){return function(r){return e(t(r))}}s(A$e,"combineWindowFeatures");Uo.combineWindowFeatures=A$e;function y$e(t,e){return function(r){return e(t(r))}}s(y$e,"combineWorkspaceFeatures");Uo.combineWorkspaceFeatures=y$e;function C$e(t,e){return function(r){return e(t(r))}}s(C$e,"combineLanguagesFeatures");Uo.combineLanguagesFeatures=C$e;function v$e(t,e){return function(r){return e(t(r))}}s(v$e,"combineNotebooksFeatures");Uo.combineNotebooksFeatures=v$e;function AQt(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,p$e),tracer:r(t.tracer,e.tracer,h$e),telemetry:r(t.telemetry,e.telemetry,m$e),client:r(t.client,e.client,g$e),window:r(t.window,e.window,A$e),workspace:r(t.workspace,e.workspace,y$e),languages:r(t.languages,e.languages,C$e),notebooks:r(t.notebooks,e.notebooks,v$e)}}s(AQt,"combineFeatures");Uo.combineFeatures=AQt;function yQt(t,e,r){let n=r&&r.console?new(r.console(WY)):new WY,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(VY)):new VY,a=r&&r.telemetry?new(r.telemetry(zY)):new zY,c=r&&r.client?new(r.client(GY)):new GY,l=r&&r.window?new(r.window(a$e)):new a$e,u=r&&r.workspace?new(r.workspace(u$e)):new u$e,d=r&&r.languages?new(r.languages(d$e)):new d$e,p=r&&r.notebooks?new(r.notebooks(f$e)):new f$e,m=[n,o,a,c,l,u,d,p];function h(I){return I instanceof Promise?I:Jm.thenable(I)?new Promise((S,R)=>{I.then(B=>S(B),B=>R(B))}):Promise.resolve(I)}s(h,"asPromise");let g,A,y,x={listen:s(()=>i.listen(),"listen"),sendRequest:s((I,...S)=>i.sendRequest(Jm.string(I)?I:I.method,...S),"sendRequest"),onRequest:s((I,S)=>i.onRequest(I,S),"onRequest"),sendNotification:s((I,S)=>{let R=Jm.string(I)?I:I.method;return i.sendNotification(R,S)},"sendNotification"),onNotification:s((I,S)=>i.onNotification(I,S),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(I=>(A=I,{dispose:s(()=>{A=void 0},"dispose")}),"onInitialize"),onInitialized:s(I=>i.onNotification(sr.InitializedNotification.type,I),"onInitialized"),onShutdown:s(I=>(g=I,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(I=>(y=I,{dispose:s(()=>{y=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(I=>i.onNotification(sr.DidChangeConfigurationNotification.type,I),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(I=>i.onNotification(sr.DidChangeWatchedFilesNotification.type,I),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(I=>i.onNotification(sr.DidOpenTextDocumentNotification.type,I),"onDidOpenTextDocument"),onDidChangeTextDocument:s(I=>i.onNotification(sr.DidChangeTextDocumentNotification.type,I),"onDidChangeTextDocument"),onDidCloseTextDocument:s(I=>i.onNotification(sr.DidCloseTextDocumentNotification.type,I),"onDidCloseTextDocument"),onWillSaveTextDocument:s(I=>i.onNotification(sr.WillSaveTextDocumentNotification.type,I),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(I=>i.onRequest(sr.WillSaveTextDocumentWaitUntilRequest.type,I),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(I=>i.onNotification(sr.DidSaveTextDocumentNotification.type,I),"onDidSaveTextDocument"),sendDiagnostics:s(I=>i.sendNotification(sr.PublishDiagnosticsNotification.type,I),"sendDiagnostics"),onHover:s(I=>i.onRequest(sr.HoverRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onHover"),onCompletion:s(I=>i.onRequest(sr.CompletionRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onCompletion"),onCompletionResolve:s(I=>i.onRequest(sr.CompletionResolveRequest.type,I),"onCompletionResolve"),onSignatureHelp:s(I=>i.onRequest(sr.SignatureHelpRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onSignatureHelp"),onDeclaration:s(I=>i.onRequest(sr.DeclarationRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDeclaration"),onDefinition:s(I=>i.onRequest(sr.DefinitionRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDefinition"),onTypeDefinition:s(I=>i.onRequest(sr.TypeDefinitionRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onTypeDefinition"),onImplementation:s(I=>i.onRequest(sr.ImplementationRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onImplementation"),onReferences:s(I=>i.onRequest(sr.ReferencesRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onReferences"),onDocumentHighlight:s(I=>i.onRequest(sr.DocumentHighlightRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDocumentHighlight"),onDocumentSymbol:s(I=>i.onRequest(sr.DocumentSymbolRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDocumentSymbol"),onWorkspaceSymbol:s(I=>i.onRequest(sr.WorkspaceSymbolRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(I=>i.onRequest(sr.WorkspaceSymbolResolveRequest.type,I),"onWorkspaceSymbolResolve"),onCodeAction:s(I=>i.onRequest(sr.CodeActionRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onCodeAction"),onCodeActionResolve:s(I=>i.onRequest(sr.CodeActionResolveRequest.type,(S,R)=>I(S,R)),"onCodeActionResolve"),onCodeLens:s(I=>i.onRequest(sr.CodeLensRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onCodeLens"),onCodeLensResolve:s(I=>i.onRequest(sr.CodeLensResolveRequest.type,(S,R)=>I(S,R)),"onCodeLensResolve"),onDocumentFormatting:s(I=>i.onRequest(sr.DocumentFormattingRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(I=>i.onRequest(sr.DocumentRangeFormattingRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(I=>i.onRequest(sr.DocumentOnTypeFormattingRequest.type,(S,R)=>I(S,R)),"onDocumentOnTypeFormatting"),onRenameRequest:s(I=>i.onRequest(sr.RenameRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onRenameRequest"),onPrepareRename:s(I=>i.onRequest(sr.PrepareRenameRequest.type,(S,R)=>I(S,R)),"onPrepareRename"),onDocumentLinks:s(I=>i.onRequest(sr.DocumentLinkRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDocumentLinks"),onDocumentLinkResolve:s(I=>i.onRequest(sr.DocumentLinkResolveRequest.type,(S,R)=>I(S,R)),"onDocumentLinkResolve"),onDocumentColor:s(I=>i.onRequest(sr.DocumentColorRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onDocumentColor"),onColorPresentation:s(I=>i.onRequest(sr.ColorPresentationRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onColorPresentation"),onFoldingRanges:s(I=>i.onRequest(sr.FoldingRangeRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onFoldingRanges"),onSelectionRanges:s(I=>i.onRequest(sr.SelectionRangeRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),(0,ci.attachPartialResult)(i,S))),"onSelectionRanges"),onExecuteCommand:s(I=>i.onRequest(sr.ExecuteCommandRequest.type,(S,R)=>I(S,R,(0,ci.attachWorkDone)(i,S),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let I of m)I.attach(x);return i.onRequest(sr.InitializeRequest.type,I=>{e.initialize(I),Jm.string(I.trace)&&(o.trace=sr.Trace.fromString(I.trace));for(let S of m)S.initialize(I.capabilities);if(A){let S=A(I,new sr.CancellationTokenSource().token,(0,ci.attachWorkDone)(i,I),void 0);return h(S).then(R=>{if(R instanceof sr.ResponseError)return R;let B=R;B||(B={capabilities:{}});let M=B.capabilities;M||(M={},B.capabilities=M),M.textDocumentSync===void 0||M.textDocumentSync===null?M.textDocumentSync=Jm.number(x.__textDocumentSync)?x.__textDocumentSync:sr.TextDocumentSyncKind.None:!Jm.number(M.textDocumentSync)&&!Jm.number(M.textDocumentSync.change)&&(M.textDocumentSync.change=Jm.number(x.__textDocumentSync)?x.__textDocumentSync:sr.TextDocumentSyncKind.None);for(let O of m)O.fillServerCapabilities(M);return B})}else{let S={capabilities:{textDocumentSync:sr.TextDocumentSyncKind.None}};for(let R of m)R.fillServerCapabilities(S.capabilities);return S}}),i.onRequest(sr.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new sr.CancellationTokenSource().token)}),i.onNotification(sr.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(sr.SetTraceNotification.type,I=>{o.trace=sr.Trace.fromString(I.value)}),x}s(yQt,"createConnection");Uo.createConnection=yQt});var E$e=H(c0=>{"use strict";f();Object.defineProperty(c0,"__esModule",{value:!0});c0.resolveModulePath=c0.FileSystem=c0.resolveGlobalYarnPath=c0.resolveGlobalNodePath=c0.resolve=c0.uriToFilePath=void 0;var CQt=require("url"),nA=require("path"),SAe=require("fs"),PAe=require("child_process");function vQt(t){let e=CQt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return nA.normalize(r.join("/"))}s(vQt,"uriToFilePath");c0.uriToFilePath=vQt;function _Ae(){return process.platform==="win32"}s(_Ae,"isWindows");function JY(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(d=>u[d]=l[d]),e&&SAe.existsSync(e)&&(u[i]?u[i]=e+nA.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,PAe.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(d.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{c(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){c(d)}})}s(JY,"resolve");c0.resolve=JY;function RAe(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};_Ae()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,PAe.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?_Ae()?nA.join(a,"node_modules"):nA.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(RAe,"resolveGlobalNodePath");c0.resolveGlobalNodePath=RAe;function EQt(t){let e="yarn",r={encoding:"utf8"};_Ae()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,PAe.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return nA.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(EQt,"resolveGlobalYarnPath");c0.resolveGlobalYarnPath=EQt;var kAe;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!SAe.existsSync(__filename.toUpperCase())||!SAe.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?nA.normalize(o).indexOf(nA.normalize(i))===0:nA.normalize(o).toLowerCase().indexOf(nA.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(kAe||(c0.FileSystem=kAe={}));function xQt(t,e,r,n){return r?(nA.isAbsolute(r)||(r=nA.join(t,r)),JY(e,r,r,n).then(i=>kAe.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>JY(e,RAe(n),t,n))):JY(e,RAe(n),t,n)}s(xQt,"resolveModulePath");c0.resolveModulePath=xQt});var DAe=H(($Nn,x$e)=>{"use strict";f();x$e.exports=ui()});var b$e=H(XY=>{"use strict";f();Object.defineProperty(XY,"__esModule",{value:!0});XY.InlineCompletionFeature=void 0;var bQt=ui(),IQt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(bQt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");XY.InlineCompletionFeature=IQt});var w$e=H(Id=>{"use strict";f();var TQt=Id&&Id.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),T$e=Id&&Id.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&TQt(e,t,r)};Object.defineProperty(Id,"__esModule",{value:!0});Id.ProposedFeatures=Id.NotebookDocuments=Id.TextDocuments=Id.SemanticTokensBuilder=void 0;var wQt=mAe();Object.defineProperty(Id,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return wQt.SemanticTokensBuilder},"get")});var SQt=b$e();T$e(ui(),Id);var _Qt=yAe();Object.defineProperty(Id,"TextDocuments",{enumerable:!0,get:s(function(){return _Qt.TextDocuments},"get")});var RQt=vAe();Object.defineProperty(Id,"NotebookDocuments",{enumerable:!0,get:s(function(){return RQt.NotebookDocuments},"get")});T$e(wAe(),Id);var I$e;(function(t){t.all={__brand:"features",languages:SQt.InlineCompletionFeature}})(I$e||(Id.ProposedFeatures=I$e={}))});var Zc=H(Xm=>{"use strict";f();var kQt=Xm&&Xm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k$e=Xm&&Xm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kQt(e,t,r)};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.createConnection=Xm.Files=void 0;var S$e=require("node:util"),BAe=IY(),PQt=wAe(),MF=E$e(),F2=DAe();k$e(DAe(),Xm);k$e(w$e(),Xm);var _$e;(function(t){t.uriToFilePath=MF.uriToFilePath,t.resolveGlobalNodePath=MF.resolveGlobalNodePath,t.resolveGlobalYarnPath=MF.resolveGlobalYarnPath,t.resolve=MF.resolve,t.resolveModulePath=MF.resolveModulePath})(_$e||(Xm.Files=_$e={}));var R$e;function ZY(){if(R$e!==void 0)try{R$e.end()}catch{}}s(ZY,"endProtocolConnection");var JD=!1,P$e;function DQt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(P$e=setInterval(()=>{try{process.kill(n,0)}catch{ZY(),process.exit(JD?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(DQt,"setupExitTimer");DQt();var BQt={initialize:s(t=>{let e=t.processId;BAe.number(e)&&P$e===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(JD?0:1)}},3e3)},"initialize"),get shutdownReceived(){return JD},set shutdownReceived(t){JD=t},exit:s(t=>{ZY(),process.exit(t)},"exit")};function NQt(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),F2.ConnectionStrategy.is(t)||F2.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),LQt(o,a,c,i)}s(NQt,"createConnection");Xm.createConnection=NQt;function LQt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new F2.IPCMessageReader(process),e=new F2.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,F2.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,F2.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(BAe.func(t.read)&&BAe.func(t.on)){let l=t;l.on("end",()=>{ZY(),process.exit(JD?0:1)}),l.on("close",()=>{ZY(),process.exit(JD?0:1)})}let c=s(l=>{let u=(0,F2.createProtocolConnection)(t,e,l,r);return i&&MQt(l),u},"connectionFactory");return(0,PQt.createConnection)(c,BQt,n)}s(LQt,"_createConnection");function MQt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,S$e.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,S$e.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(MQt,"patchConsole")});var iA=H((t8n,D$e)=>{"use strict";f();D$e.exports=Zc()});var EGe=H((FFn,vGe)=>{"use strict";f();vGe.exports=yGe;function yGe(t,e,r){t instanceof RegExp&&(t=AGe(t,r)),e instanceof RegExp&&(e=AGe(e,r));var n=CGe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(yGe,"balanced");function AGe(t,e){var r=e.match(t);return r?r[0]:null}s(AGe,"maybeMatch");yGe.range=CGe;function CGe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),d=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;d>=0&&!c;)d==l?(n.push(d),l=r.indexOf(t,d+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(CGe,"range")});var RGe=H((UFn,_Ge)=>{f();var xGe=EGe();_Ge.exports=_Ut;var bGe="\0SLASH"+Math.random()+"\0",IGe="\0OPEN"+Math.random()+"\0",Mye="\0CLOSE"+Math.random()+"\0",TGe="\0COMMA"+Math.random()+"\0",wGe="\0PERIOD"+Math.random()+"\0";function Lye(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Lye,"numeric");function wUt(t){return t.split("\\\\").join(bGe).split("\\{").join(IGe).split("\\}").join(Mye).split("\\,").join(TGe).split("\\.").join(wGe)}s(wUt,"escapeBraces");function SUt(t){return t.split(bGe).join("\\").split(IGe).join("{").split(Mye).join("}").split(TGe).join(",").split(wGe).join(".")}s(SUt,"unescapeBraces");function SGe(t){if(!t)return[""];var e=[],r=xGe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=SGe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(SGe,"parseCommaParts");function _Ut(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),VF(wUt(t),!0).map(SUt)):[]}s(_Ut,"expandTop");function RUt(t){return"{"+t+"}"}s(RUt,"embrace");function kUt(t){return/^-?0\d/.test(t)}s(kUt,"isPadded");function PUt(t,e){return t<=e}s(PUt,"lte");function DUt(t,e){return t>=e}s(DUt,"gte");function VF(t,e){var r=[],n=xGe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?VF(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=l||u,p=n.body.indexOf(",")>=0;if(!d&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Mye+n.post,VF(t)):[t];var m;if(d)m=n.body.split(/\.\./);else if(m=SGe(n.body),m.length===1&&(m=VF(m[0],!1).map(RUt),m.length===1))return o.map(function(z){return n.pre+m[0]+z});var h;if(d){var g=Lye(m[0]),A=Lye(m[1]),y=Math.max(m[0].length,m[1].length),x=m.length==3?Math.abs(Lye(m[2])):1,I=PUt,S=A<g;S&&(x*=-1,I=DUt);var R=m.some(kUt);h=[];for(var B=g;I(B,A);B+=x){var M;if(u)M=String.fromCharCode(B),M==="\\"&&(M="");else if(M=String(B),R){var O=y-M.length;if(O>0){var K=new Array(O+1).join("0");B<0?M="-"+K+M.slice(1):M=K+M}}h.push(M)}}else{h=[];for(var V=0;V<m.length;V++)h.push.apply(h,VF(m[V],!1))}for(var V=0;V<h.length;V++)for(var a=0;a<o.length;a++){var c=i+h[V]+o[a];(!e||d||c)&&r.push(c)}}return r}s(VF,"expand")});var Ia=H((hsi,GYe)=>{f();GYe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Wo=H((Asi,VYe)=>{"use strict";f();var Ha=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},f1e=class extends Ha{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},p1e=class extends Ha{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},m1e=class extends Ha{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},h1e=class extends Ha{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},g1e=class extends Ha{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},A1e=class extends Ha{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},y1e=class extends Ha{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},qX=class extends Ha{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},C1e=class extends qX{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},v1e=class extends Ha{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},E1e=class extends Ha{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},x1e=class extends Ha{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},b1e=class extends Ha{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},I1e=class extends Ha{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},T1e=class extends Ha{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},w1e=class extends Ha{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},S1e=class extends Ha{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},_1e=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},R1e=class extends Ha{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},k1e=class extends Ha{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},P1e=class extends Ha{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},D1e=class extends Ha{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};VYe.exports={AbortError:qX,HTTPParserError:_1e,UndiciError:Ha,HeadersTimeoutError:p1e,HeadersOverflowError:m1e,BodyTimeoutError:h1e,RequestContentLengthMismatchError:E1e,ConnectTimeoutError:f1e,ResponseStatusCodeError:g1e,InvalidArgumentError:A1e,InvalidReturnValueError:y1e,RequestAbortedError:C1e,ClientDestroyedError:b1e,ClientClosedError:I1e,InformationalError:v1e,SocketError:T1e,NotSupportedError:w1e,ResponseContentLengthMismatchError:x1e,BalancedPoolMissingUpstreamError:S1e,ResponseExceededMaxSizeError:R1e,RequestRetryError:k1e,ResponseError:P1e,SecureProxyConnectionError:D1e}});var $X=H((vsi,zYe)=>{"use strict";f();var HX={},B1e=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<B1e.length;++t){let e=B1e[t],r=e.toLowerCase();HX[e]=HX[r]=r}Object.setPrototypeOf(HX,null);zYe.exports={wellknownHeaderNames:B1e,headerNameLowerCasedRecord:HX}});var XYe=H((xsi,JYe)=>{"use strict";f();var{wellknownHeaderNames:YYe,headerNameLowerCasedRecord:HWt}=$X(),N1e=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},WX=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new N1e(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},KYe=new WX;for(let t=0;t<YYe.length;++t){let e=HWt[YYe[t]];KYe.insert(e,e)}JYe.exports={TernarySearchTree:WX,tree:KYe}});var Mi=H((Tsi,mKe)=>{"use strict";f();var TO=require("node:assert"),{kDestroyed:eKe,kBodyUsed:z3,kListeners:L1e,kBody:ZYe}=Ia(),{IncomingMessage:$Wt}=require("node:http"),VX=require("node:stream"),WWt=require("node:net"),{Blob:jWt}=require("node:buffer"),GWt=require("node:util"),{stringify:VWt}=require("node:querystring"),{EventEmitter:zWt}=require("node:events"),{InvalidArgumentError:tu}=Wo(),{headerNameLowerCasedRecord:YWt}=$X(),{tree:tKe}=XYe(),[KWt,JWt]=process.versions.node.split(".").map(t=>Number(t)),GX=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[ZYe]=e,this[z3]=!1}async*[Symbol.asyncIterator](){TO(!this[z3],"disturbed"),this[z3]=!0,yield*this[ZYe]}};function XWt(t){return zX(t)?(sKe(t)===0&&t.on("data",function(){TO(!1)}),typeof t.readableDidRead!="boolean"&&(t[z3]=!1,zWt.prototype.on.call(t,"data",function(){this[z3]=!0})),t):t&&typeof t.pipeTo=="function"?new GX(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&oKe(t)?new GX(t):t}s(XWt,"wrapRequestBody");function ZWt(){}s(ZWt,"nop");function zX(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(zX,"isStream");function rKe(t){if(t===null)return!1;if(t instanceof jWt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(rKe,"isBlobLike");function ejt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=VWt(e);return r&&(t+="?"+r),t}s(ejt,"buildURL");function nKe(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(nKe,"isValidPort");function jX(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(jX,"isHttpOrHttpsPrefixed");function iKe(t){if(typeof t=="string"){if(t=new URL(t),!jX(t.origin||t.protocol))throw new tu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new tu("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&nKe(t.port)===!1)throw new tu("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new tu("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new tu("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new tu("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new tu("Invalid URL origin: the origin must be a string or null/undefined.");if(!jX(t.origin||t.protocol))throw new tu("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!jX(t.origin||t.protocol))throw new tu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(iKe,"parseURL");function tjt(t){if(t=iKe(t),t.pathname!=="/"||t.search||t.hash)throw new tu("invalid url");return t}s(tjt,"parseOrigin");function rjt(t){if(t[0]==="["){let r=t.indexOf("]");return TO(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(rjt,"getHostname");function njt(t){if(!t)return null;TO(typeof t=="string");let e=rjt(t);return WWt.isIP(e)?"":e}s(njt,"getServerName");function ijt(t){return JSON.parse(JSON.stringify(t))}s(ijt,"deepClone");function ojt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(ojt,"isAsyncIterable");function oKe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(oKe,"isIterable");function sKe(t){if(t==null)return 0;if(zX(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(rKe(t))return t.size!=null?t.size:null;if(lKe(t))return t.byteLength}return null}s(sKe,"bodyLength");function aKe(t){return t&&!!(t.destroyed||t[eKe]||VX.isDestroyed?.(t))}s(aKe,"isDestroyed");function sjt(t,e){t==null||!zX(t)||aKe(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===$Wt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[eKe]=!0))}s(sjt,"destroy");var ajt=/timeout=(\d+)/;function cjt(t){let e=t.toString().match(ajt);return e?parseInt(e[1],10)*1e3:null}s(cjt,"parseKeepAliveTimeout");function cKe(t){return typeof t=="string"?YWt[t]??t.toLowerCase():tKe.lookup(t)??t.toString("latin1").toLowerCase()}s(cKe,"headerNameToString");function ljt(t){return tKe.lookup(t)??t.toString("latin1").toLowerCase()}s(ljt,"bufferToLowerCasedHeaderName");function ujt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=cKe(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(ujt,"parseHeaders");function djt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(djt,"parseRawHeaders");function lKe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(lKe,"isBuffer");function fjt(t,e,r){if(!t||typeof t!="object")throw new tu("handler must be an object");if(typeof t.onConnect!="function")throw new tu("invalid onConnect method");if(typeof t.onError!="function")throw new tu("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new tu("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new tu("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new tu("invalid onHeaders method");if(typeof t.onData!="function")throw new tu("invalid onData method");if(typeof t.onComplete!="function")throw new tu("invalid onComplete method")}}s(fjt,"validateHandler");function pjt(t){return!!(t&&(VX.isDisturbed(t)||t[z3]))}s(pjt,"isDisturbed");function mjt(t){return!!(t&&VX.isErrored(t))}s(mjt,"isErrored");function hjt(t){return!!(t&&VX.isReadable(t))}s(hjt,"isReadable");function gjt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(gjt,"getSocketInfo");function Ajt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(Ajt,"ReadableStreamFrom");function yjt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(yjt,"isFormDataLike");function Cjt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(Cjt,"addAbortListener");var vjt=typeof String.prototype.toWellFormed=="function",Ejt=typeof String.prototype.isWellFormed=="function";function uKe(t){return vjt?`${t}`.toWellFormed():GWt.toUSVString(t)}s(uKe,"toUSVString");function xjt(t){return Ejt?`${t}`.isWellFormed():uKe(t)===`${t}`}s(xjt,"isUSVString");function dKe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(dKe,"isTokenCharCode");function bjt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!dKe(t.charCodeAt(e)))return!1;return!0}s(bjt,"isValidHTTPToken");var Ijt=/[^\t\x20-\x7e\x80-\xff]/;function Tjt(t){return!Ijt.test(t)}s(Tjt,"isValidHeaderValue");function wjt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(wjt,"parseRangeHeader");function Sjt(t,e,r){return(t[L1e]??=[]).push([e,r]),t.on(e,r),t}s(Sjt,"addListener");function _jt(t){for(let[e,r]of t[L1e]??[])t.removeListener(e,r);t[L1e]=null}s(_jt,"removeAllListeners");function Rjt(t,e,r){try{e.onError(r),TO(e.aborted)}catch(n){t.emit("error",n)}}s(Rjt,"errorRequest");var fKe=Object.create(null);fKe.enumerable=!0;var M1e={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},pKe={...M1e,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(M1e,null);Object.setPrototypeOf(pKe,null);mKe.exports={kEnumerableProperty:fKe,nop:ZWt,isDisturbed:pjt,isErrored:mjt,isReadable:hjt,toUSVString:uKe,isUSVString:xjt,isBlobLike:rKe,parseOrigin:tjt,parseURL:iKe,getServerName:njt,isStream:zX,isIterable:oKe,isAsyncIterable:ojt,isDestroyed:aKe,headerNameToString:cKe,bufferToLowerCasedHeaderName:ljt,addListener:Sjt,removeAllListeners:_jt,errorRequest:Rjt,parseRawHeaders:djt,parseHeaders:ujt,parseKeepAliveTimeout:cjt,destroy:sjt,bodyLength:sKe,deepClone:ijt,ReadableStreamFrom:Ajt,isBuffer:lKe,validateHandler:fjt,getSocketInfo:gjt,isFormDataLike:yjt,buildURL:ejt,addAbortListener:Cjt,isValidHTTPToken:bjt,isValidHeaderValue:Tjt,isTokenCharCode:dKe,parseRangeHeader:wjt,normalizedMethodRecordsBase:M1e,normalizedMethodRecords:pKe,isValidPort:nKe,isHttpOrHttpsPrefixed:jX,nodeMajor:KWt,nodeMinor:JWt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:XWt}});var Y3=H((_si,gKe)=>{"use strict";f();var Xo=require("node:diagnostics_channel"),O1e=require("node:util"),YX=O1e.debuglog("undici"),F1e=O1e.debuglog("fetch"),gR=O1e.debuglog("websocket"),hKe=!1,kjt={beforeConnect:Xo.channel("undici:client:beforeConnect"),connected:Xo.channel("undici:client:connected"),connectError:Xo.channel("undici:client:connectError"),sendHeaders:Xo.channel("undici:client:sendHeaders"),create:Xo.channel("undici:request:create"),bodySent:Xo.channel("undici:request:bodySent"),headers:Xo.channel("undici:request:headers"),trailers:Xo.channel("undici:request:trailers"),error:Xo.channel("undici:request:error"),open:Xo.channel("undici:websocket:open"),close:Xo.channel("undici:websocket:close"),socketError:Xo.channel("undici:websocket:socket_error"),ping:Xo.channel("undici:websocket:ping"),pong:Xo.channel("undici:websocket:pong")};if(YX.enabled||F1e.enabled){let t=F1e.enabled?F1e:YX;Xo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Xo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Xo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Xo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Xo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Xo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Xo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),hKe=!0}if(gR.enabled){if(!hKe){let t=YX.enabled?YX:gR;Xo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Xo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Xo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Xo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Xo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;gR("connection opened %s%s",e,r?`:${r}`:"")}),Xo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;gR("closed connection to %s - %s %s",e.url,r,n)}),Xo.channel("undici:websocket:socket_error").subscribe(t=>{gR("connection errored - %s",t.message)}),Xo.channel("undici:websocket:ping").subscribe(t=>{gR("ping received")}),Xo.channel("undici:websocket:pong").subscribe(t=>{gR("pong received")})}gKe.exports={channels:kjt}});var EKe=H((ksi,vKe)=>{"use strict";f();var{InvalidArgumentError:$a,NotSupportedError:Pjt}=Wo(),pE=require("node:assert"),{isValidHTTPToken:CKe,isValidHeaderValue:AKe,isStream:Djt,destroy:Bjt,isBuffer:Njt,isFormDataLike:Ljt,isIterable:Mjt,isBlobLike:Fjt,buildURL:Ojt,validateHandler:Qjt,getServerName:Ujt,normalizedMethodRecords:qjt}=Mi(),{channels:_C}=Y3(),{headerNameLowerCasedRecord:yKe}=$X(),Hjt=/[^\u0021-\u00ff]/,Ah=Symbol("handler"),Q1e=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:A},y){if(typeof r!="string")throw new $a("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new $a("path must be an absolute URL or start with a slash");if(Hjt.test(r))throw new $a("invalid request path");if(typeof n!="string")throw new $a("method must be a string");if(qjt[n]===void 0&&!CKe(n))throw new $a("invalid request method");if(u&&typeof u!="string")throw new $a("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new $a("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new $a("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new $a("invalid reset");if(g!=null&&typeof g!="boolean")throw new $a("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(Djt(i)){this.body=i;let x=this.body._readableState;(!x||!x.autoDestroy)&&(this.endHandler=s(function(){Bjt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=I=>{this.abort?this.abort(I):this.error=I},this.body.on("error",this.errorHandler)}else if(Njt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(Ljt(i)||Mjt(i)||Fjt(i))this.body=i;else throw new $a("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?Ojt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new $a("headers array must be even");for(let x=0;x<o.length;x+=2)KX(this,o[x],o[x+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let x of o){if(!Array.isArray(x)||x.length!==2)throw new $a("headers must be in key-value pair format");KX(this,x[0],x[1])}else{let x=Object.keys(o);for(let I=0;I<x.length;++I)KX(this,x[I],o[x[I]])}else if(o!=null)throw new $a("headers must be an object or an array");Qjt(y,n,u),this.servername=A||Ujt(this.host),this[Ah]=y,_C.create.hasSubscribers&&_C.create.publish({request:this})}onBodySent(e){if(this[Ah].onBodySent)try{return this[Ah].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(_C.bodySent.hasSubscribers&&_C.bodySent.publish({request:this}),this[Ah].onRequestSent)try{return this[Ah].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(pE(!this.aborted),pE(!this.completed),this.error)e(this.error);else return this.abort=e,this[Ah].onConnect(e)}onResponseStarted(){return this[Ah].onResponseStarted?.()}onHeaders(e,r,n,i){pE(!this.aborted),pE(!this.completed),_C.headers.hasSubscribers&&_C.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Ah].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){pE(!this.aborted),pE(!this.completed);try{return this[Ah].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return pE(!this.aborted),pE(!this.completed),this[Ah].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),pE(!this.aborted),this.completed=!0,_C.trailers.hasSubscribers&&_C.trailers.publish({request:this,trailers:e});try{return this[Ah].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),_C.error.hasSubscribers&&_C.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Ah].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return KX(this,e,r),this}};function KX(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new $a(`invalid ${e} header`);if(r===void 0)return;let n=yKe[e];if(n===void 0&&(n=e.toLowerCase(),yKe[n]===void 0&&!CKe(n)))throw new $a("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!AKe(r[o]))throw new $a(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new $a(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!AKe(r))throw new $a(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new $a("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new $a("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new $a(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new $a("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new Pjt("expect header not supported");t.headers.push(e,r)}}}s(KX,"processHeader");vKe.exports=Q1e});var wO=H((Bsi,xKe)=>{"use strict";f();var $jt=require("node:events"),JX=class extends $jt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new U1e(this,n)}},U1e=class extends JX{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};xKe.exports=JX});var Z3=H((Msi,bKe)=>{"use strict";f();var Wjt=wO(),{ClientDestroyedError:q1e,ClientClosedError:jjt,InvalidArgumentError:K3}=Wo(),{kDestroy:Gjt,kClose:Vjt,kClosed:SO,kDestroyed:J3,kDispatch:H1e,kInterceptors:AR}=Ia(),mE=Symbol("onDestroyed"),X3=Symbol("onClosed"),XX=Symbol("Intercepted Dispatch"),$1e=class extends Wjt{static{s(this,"DispatcherBase")}constructor(){super(),this[J3]=!1,this[mE]=null,this[SO]=!1,this[X3]=[]}get destroyed(){return this[J3]}get closed(){return this[SO]}get interceptors(){return this[AR]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[AR][r]!="function")throw new K3("interceptor must be an function")}this[AR]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new K3("invalid callback");if(this[J3]){queueMicrotask(()=>e(new q1e,null));return}if(this[SO]){this[X3]?this[X3].push(e):queueMicrotask(()=>e(null,null));return}this[SO]=!0,this[X3].push(e);let r=s(()=>{let n=this[X3];this[X3]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[Vjt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new K3("invalid callback");if(this[J3]){this[mE]?this[mE].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new q1e),this[J3]=!0,this[mE]=this[mE]||[],this[mE].push(r);let n=s(()=>{let i=this[mE];this[mE]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[Gjt](e).then(()=>{queueMicrotask(n)})}[XX](e,r){if(!this[AR]||this[AR].length===0)return this[XX]=this[H1e],this[H1e](e,r);let n=this[H1e].bind(this);for(let i=this[AR].length-1;i>=0;i--)n=this[AR][i](n);return this[XX]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new K3("handler must be an object");try{if(!e||typeof e!="object")throw new K3("opts must be an object.");if(this[J3]||this[mE])throw new q1e;if(this[SO])throw new jjt;return this[XX](e,r)}catch(n){if(typeof r.onError!="function")throw new K3("invalid onError method");return r.onError(n),!1}}};bKe.exports=$1e});var K1e=H((Qsi,SKe)=>{"use strict";f();var eB=0,W1e=1e3,j1e=(W1e>>1)-1,hE,G1e=Symbol("kFastTimer"),gE=[],V1e=-2,z1e=-1,TKe=0,IKe=1;function Y1e(){eB+=j1e;let t=0,e=gE.length;for(;t<e;){let r=gE[t];r._state===TKe?(r._idleStart=eB-j1e,r._state=IKe):r._state===IKe&&eB>=r._idleStart+r._idleTimeout&&(r._state=z1e,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===z1e?(r._state=V1e,--e!==0&&(gE[t]=gE[e])):++t}gE.length=e,gE.length!==0&&wKe()}s(Y1e,"onTick");function wKe(){hE?hE.refresh():(clearTimeout(hE),hE=setTimeout(Y1e,j1e),hE.unref&&hE.unref())}s(wKe,"refreshTimeout");var ZX=class{static{s(this,"FastTimer")}[G1e]=!0;_state=V1e;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===V1e&&gE.push(this),(!hE||gE.length===1)&&wKe(),this._state=TKe}clear(){this._state=z1e,this._idleStart=-1}};SKe.exports={setTimeout(t,e,r){return e<=W1e?setTimeout(t,e,r):new ZX(t,e,r)},clearTimeout(t){t[G1e]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new ZX(t,e,r)},clearFastTimeout(t){t.clear()},now(){return eB},tick(t=0){eB+=t-W1e+1,Y1e(),Y1e()},reset(){eB=0,gE.length=0,clearTimeout(hE),hE=null},kFastTimer:G1e}});var _O=H((Wsi,DKe)=>{"use strict";f();var zjt=require("node:net"),_Ke=require("node:assert"),PKe=Mi(),{InvalidArgumentError:Yjt,ConnectTimeoutError:Kjt}=Wo(),eZ=K1e();function RKe(){}s(RKe,"noop");var J1e,X1e;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?X1e=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:X1e=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function Jjt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new Yjt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new X1e(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:A},y){let x;if(p==="https:"){J1e||(J1e=require("node:tls")),h=h||a.servername||PKe.getServerName(d)||null;let S=h||u;_Ke(S);let R=i||c.get(S)||null;m=m||443,x=J1e.connect({highWaterMark:16384,...a,servername:h,session:R,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:A,port:m,host:u}),x.on("session",function(B){c.set(S,B)})}else _Ke(!A,"httpSocket can only be sent on TLS update"),m=m||80,x=zjt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let S=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;x.setKeepAlive(!0,S)}let I=Xjt(new WeakRef(x),{timeout:n,hostname:u,port:m});return x.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(I),y){let S=y;y=null,S(null,this)}}).on("error",function(S){if(queueMicrotask(I),y){let R=y;y=null,R(S)}}),x},"connect")}s(Jjt,"buildConnector");var Xjt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return RKe;let r=null,n=null,i=eZ.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>kKe(t.deref(),e))})},e.timeout);return()=>{eZ.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return RKe;let r=null,n=eZ.setFastTimeout(()=>{r=setImmediate(()=>{kKe(t.deref(),e)})},e.timeout);return()=>{eZ.clearFastTimeout(n),clearImmediate(r)}};function kKe(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,PKe.destroy(t,new Kjt(r))}s(kKe,"onConnectTimeout");DKe.exports=Jjt});var BKe=H(tZ=>{"use strict";f();Object.defineProperty(tZ,"__esModule",{value:!0});tZ.enumToMap=void 0;function Zjt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(Zjt,"enumToMap");tZ.enumToMap=Zjt});var NKe=H(Vt=>{"use strict";f();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SPECIAL_HEADERS=Vt.HEADER_STATE=Vt.MINOR=Vt.MAJOR=Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS=Vt.TOKEN=Vt.STRICT_TOKEN=Vt.HEX=Vt.URL_CHAR=Vt.STRICT_URL_CHAR=Vt.USERINFO_CHARS=Vt.MARK=Vt.ALPHANUM=Vt.NUM=Vt.HEX_MAP=Vt.NUM_MAP=Vt.ALPHA=Vt.FINISH=Vt.H_METHOD_MAP=Vt.METHOD_MAP=Vt.METHODS_RTSP=Vt.METHODS_ICE=Vt.METHODS_HTTP=Vt.METHODS=Vt.LENIENT_FLAGS=Vt.FLAGS=Vt.TYPE=Vt.ERROR=void 0;var eGt=BKe(),tGt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(tGt=Vt.ERROR||(Vt.ERROR={}));var rGt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(rGt=Vt.TYPE||(Vt.TYPE={}));var nGt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(nGt=Vt.FLAGS||(Vt.FLAGS={}));var iGt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(iGt=Vt.LENIENT_FLAGS||(Vt.LENIENT_FLAGS={}));var En;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(En=Vt.METHODS||(Vt.METHODS={}));Vt.METHODS_HTTP=[En.DELETE,En.GET,En.HEAD,En.POST,En.PUT,En.CONNECT,En.OPTIONS,En.TRACE,En.COPY,En.LOCK,En.MKCOL,En.MOVE,En.PROPFIND,En.PROPPATCH,En.SEARCH,En.UNLOCK,En.BIND,En.REBIND,En.UNBIND,En.ACL,En.REPORT,En.MKACTIVITY,En.CHECKOUT,En.MERGE,En["M-SEARCH"],En.NOTIFY,En.SUBSCRIBE,En.UNSUBSCRIBE,En.PATCH,En.PURGE,En.MKCALENDAR,En.LINK,En.UNLINK,En.PRI,En.SOURCE];Vt.METHODS_ICE=[En.SOURCE];Vt.METHODS_RTSP=[En.OPTIONS,En.DESCRIBE,En.ANNOUNCE,En.SETUP,En.PLAY,En.PAUSE,En.TEARDOWN,En.GET_PARAMETER,En.SET_PARAMETER,En.REDIRECT,En.RECORD,En.FLUSH,En.GET,En.POST];Vt.METHOD_MAP=eGt.enumToMap(En);Vt.H_METHOD_MAP={};Object.keys(Vt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Vt.H_METHOD_MAP[t]=Vt.METHOD_MAP[t])});var oGt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(oGt=Vt.FINISH||(Vt.FINISH={}));Vt.ALPHA=[];for(let t=65;t<=90;t++)Vt.ALPHA.push(String.fromCharCode(t)),Vt.ALPHA.push(String.fromCharCode(t+32));Vt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Vt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Vt.NUM=["0","1","2","3","4","5","6","7","8","9"];Vt.ALPHANUM=Vt.ALPHA.concat(Vt.NUM);Vt.MARK=["-","_",".","!","~","*","'","(",")"];Vt.USERINFO_CHARS=Vt.ALPHANUM.concat(Vt.MARK).concat(["%",";",":","&","=","+","$",","]);Vt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Vt.ALPHANUM);Vt.URL_CHAR=Vt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Vt.URL_CHAR.push(t);Vt.HEX=Vt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Vt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Vt.ALPHANUM);Vt.TOKEN=Vt.STRICT_TOKEN.concat([" "]);Vt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Vt.HEADER_CHARS.push(t);Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS.filter(t=>t!==44);Vt.MAJOR=Vt.NUM_MAP;Vt.MINOR=Vt.MAJOR;var tB;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(tB=Vt.HEADER_STATE||(Vt.HEADER_STATE={}));Vt.SPECIAL_HEADERS={connection:tB.CONNECTION,"content-length":tB.CONTENT_LENGTH,"proxy-connection":tB.CONNECTION,"transfer-encoding":tB.TRANSFER_ENCODING,upgrade:tB.UPGRADE}});var Z1e=H((Xsi,LKe)=>{"use strict";f();var{Buffer:sGt}=require("node:buffer");LKe.exports=sGt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var FKe=H((eai,MKe)=>{"use strict";f();var{Buffer:aGt}=require("node:buffer");MKe.exports=aGt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var RO=H((rai,jKe)=>{"use strict";f();var OKe=["GET","HEAD","POST"],cGt=new Set(OKe),lGt=[101,204,205,304],QKe=[301,302,303,307,308],uGt=new Set(QKe),UKe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],dGt=new Set(UKe),qKe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],fGt=new Set(qKe),pGt=["follow","manual","error"],HKe=["GET","HEAD","OPTIONS","TRACE"],mGt=new Set(HKe),hGt=["navigate","same-origin","no-cors","cors"],gGt=["omit","same-origin","include"],AGt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],yGt=["content-encoding","content-language","content-location","content-type","content-length"],CGt=["half"],$Ke=["CONNECT","TRACE","TRACK"],vGt=new Set($Ke),WKe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],EGt=new Set(WKe);jKe.exports={subresource:WKe,forbiddenMethods:$Ke,requestBodyHeader:yGt,referrerPolicy:qKe,requestRedirect:pGt,requestMode:hGt,requestCredentials:gGt,requestCache:AGt,redirectStatus:QKe,corsSafeListedMethods:OKe,nullBodyStatus:lGt,safeMethods:HKe,badPorts:UKe,requestDuplex:CGt,subresourceSet:EGt,badPortsSet:dGt,redirectStatusSet:uGt,corsSafeListedMethodsSet:cGt,safeMethodsSet:mGt,forbiddenMethodsSet:vGt,referrerPolicySet:fGt}});var tve=H((iai,GKe)=>{"use strict";f();var eve=Symbol.for("undici.globalOrigin.1");function xGt(){return globalThis[eve]}s(xGt,"getGlobalOrigin");function bGt(t){if(t===void 0){Object.defineProperty(globalThis,eve,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,eve,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(bGt,"setGlobalOrigin");GKe.exports={getGlobalOrigin:xGt,setGlobalOrigin:bGt}});var g0=H((aai,ZKe)=>{"use strict";f();var nZ=require("node:assert"),IGt=new TextEncoder,kO=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,TGt=/[\u000A\u000D\u0009\u0020]/,wGt=/[\u0009\u000A\u000C\u000D\u0020]/g,SGt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function _Gt(t){nZ(t.protocol==="data:");let e=YKe(t,!0);e=e.slice(5);let r={position:0},n=rB(",",e,r),i=n.length;if(n=NGt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=KKe(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=XKe(a);if(a=kGt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=rve(n);return c==="failure"&&(c=rve("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(_Gt,"dataURLProcessor");function YKe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(YKe,"URLSerializer");function iZ(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(iZ,"collectASequenceOfCodePoints");function rB(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(rB,"collectASequenceOfCodePointsFast");function KKe(t){let e=IGt.encode(t);return RGt(e)}s(KKe,"stringPercentDecode");function VKe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(VKe,"isHexCharByte");function zKe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(zKe,"hexByteToNumber");function RGt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(VKe(t[i+1])&&VKe(t[i+2]))?r[n++]=37:(r[n++]=zKe(t[i+1])<<4|zKe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(RGt,"percentDecode");function rve(t){t=rZ(t,!0,!0);let e={position:0},r=rB("/",t,e);if(r.length===0||!kO.test(r)||e.position>t.length)return"failure";e.position++;let n=rB(";",t,e);if(n=rZ(n,!1,!0),n.length===0||!kO.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,iZ(u=>TGt.test(u),t,e);let c=iZ(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=JKe(t,e,!0),rB(";",t,e);else if(l=rB(";",t,e),l=rZ(l,!1,!0),l.length===0)continue;c.length!==0&&kO.test(c)&&(l.length===0||SGt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(rve,"parseMIMEType");function kGt(t){t=t.replace(wGt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(kGt,"forgivingBase64");function JKe(t,e,r){let n=e.position,i="";for(nZ(t[e.position]==='"'),e.position++;i+=iZ(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{nZ(o==='"');break}}return r?i:t.slice(n,e.position)}s(JKe,"collectAnHTTPQuotedString");function PGt(t){nZ(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",kO.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(PGt,"serializeAMimeType");function DGt(t){return t===13||t===10||t===9||t===32}s(DGt,"isHTTPWhiteSpace");function rZ(t,e=!0,r=!0){return nve(t,e,r,DGt)}s(rZ,"removeHTTPWhitespace");function BGt(t){return t===13||t===10||t===9||t===12||t===32}s(BGt,"isASCIIWhitespace");function NGt(t,e=!0,r=!0){return nve(t,e,r,BGt)}s(NGt,"removeASCIIWhitespace");function nve(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(nve,"removeChars");function XKe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(XKe,"isomorphicDecode");function LGt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(LGt,"minimizeSupportedMimeType");ZKe.exports={dataURLProcessor:_Gt,URLSerializer:YKe,collectASequenceOfCodePoints:iZ,collectASequenceOfCodePointsFast:rB,stringPercentDecode:KKe,parseMIMEType:rve,collectAnHTTPQuotedString:JKe,serializeAMimeType:PGt,removeChars:nve,removeHTTPWhitespace:rZ,minimizeSupportedMimeType:LGt,HTTP_TOKEN_CODEPOINTS:kO,isomorphicDecode:XKe}});var Uu=H((uai,eJe)=>{"use strict";f();var{types:RC,inspect:MGt}=require("node:util"),{markAsUncloneable:FGt}=require("node:worker_threads"),{toUSVString:OGt}=Mi(),Ut={};Ut.converters={};Ut.util={};Ut.errors={};Ut.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Ut.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Ut.errors.exception({header:t.prefix,message:r})};Ut.errors.invalidArgument=function(t){return Ut.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Ut.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Ut.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Ut.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Ut.illegalConstructor=function(){throw Ut.errors.exception({header:"TypeError",message:"Illegal constructor"})};Ut.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Ut.util.markAsUncloneable=FGt||(()=>{});Ut.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Ut.errors.exception({header:"Integer conversion",message:`Could not convert ${Ut.util.Stringify(t)} to an integer.`});if(a=Ut.util.IntegerPart(a),a<o||a>i)throw Ut.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Ut.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Ut.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Ut.util.Stringify=function(t){switch(Ut.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return MGt(t);case"String":return`"${t}"`;default:return`${t}`}};Ut.sequenceConverter=function(t){return(e,r,n,i)=>{if(Ut.util.Type(e)!=="Object")throw Ut.errors.exception({header:r,message:`${n} (${Ut.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw Ut.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};Ut.recordConverter=function(t,e){return(r,n,i)=>{if(Ut.util.Type(r)!=="Object")throw Ut.errors.exception({header:n,message:`${i} ("${Ut.util.Type(r)}") is not an Object.`});let o={};if(!RC.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),d=e(r[l],n,i);o[u]=d}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),d=e(r[c],n,i);o[u]=d}return o}};Ut.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Ut.errors.exception({header:r,message:`Expected ${n} ("${Ut.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Ut.dictionaryConverter=function(t){return(e,r,n)=>{let i=Ut.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Ut.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,c))throw Ut.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=d(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw Ut.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};Ut.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Ut.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Ut.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Ut.converters.ByteString=function(t,e,r){let n=Ut.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Ut.converters.USVString=OGt;Ut.converters.boolean=function(t){return!!t};Ut.converters.any=function(t){return t};Ut.converters["long long"]=function(t,e,r){return Ut.util.ConvertToInt(t,64,"signed",void 0,e,r)};Ut.converters["unsigned long long"]=function(t,e,r){return Ut.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Ut.converters["unsigned long"]=function(t,e,r){return Ut.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Ut.converters["unsigned short"]=function(t,e,r,n){return Ut.util.ConvertToInt(t,16,"unsigned",n,e,r)};Ut.converters.ArrayBuffer=function(t,e,r,n){if(Ut.util.Type(t)!=="Object"||!RC.isAnyArrayBuffer(t))throw Ut.errors.conversionFailed({prefix:e,argument:`${r} ("${Ut.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&RC.isSharedArrayBuffer(t))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.TypedArray=function(t,e,r,n,i){if(Ut.util.Type(t)!=="Object"||!RC.isTypedArray(t)||t.constructor.name!==e.name)throw Ut.errors.conversionFailed({prefix:r,argument:`${n} ("${Ut.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&RC.isSharedArrayBuffer(t.buffer))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.DataView=function(t,e,r,n){if(Ut.util.Type(t)!=="Object"||!RC.isDataView(t))throw Ut.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&RC.isSharedArrayBuffer(t.buffer))throw Ut.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Ut.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Ut.converters.BufferSource=function(t,e,r,n){if(RC.isAnyArrayBuffer(t))return Ut.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(RC.isTypedArray(t))return Ut.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(RC.isDataView(t))return Ut.converters.DataView(t,e,r,{...n,allowShared:!1});throw Ut.errors.conversionFailed({prefix:e,argument:`${r} ("${Ut.util.Stringify(t)}")`,types:["BufferSource"]})};Ut.converters["sequence<ByteString>"]=Ut.sequenceConverter(Ut.converters.ByteString);Ut.converters["sequence<sequence<ByteString>>"]=Ut.sequenceConverter(Ut.converters["sequence<ByteString>"]);Ut.converters["record<ByteString, ByteString>"]=Ut.recordConverter(Ut.converters.ByteString,Ut.converters.ByteString);eJe.exports={webidl:Ut}});var kp=H((fai,mJe)=>{"use strict";f();var{Transform:QGt}=require("node:stream"),tJe=require("node:zlib"),{redirectStatusSet:UGt,referrerPolicySet:qGt,badPortsSet:HGt}=RO(),{getGlobalOrigin:rJe}=tve(),{collectASequenceOfCodePoints:yR,collectAnHTTPQuotedString:$Gt,removeChars:WGt,parseMIMEType:jGt}=g0(),{performance:GGt}=require("node:perf_hooks"),{isBlobLike:VGt,ReadableStreamFrom:zGt,isValidHTTPToken:nJe,normalizedMethodRecordsBase:YGt}=Mi(),CR=require("node:assert"),{isUint8Array:KGt}=require("node:util/types"),{webidl:PO}=Uu(),iJe=[],sZ;try{sZ=require("node:crypto");let t=["sha256","sha384","sha512"];iJe=sZ.getHashes().filter(e=>t.includes(e))}catch{}function oJe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(oJe,"responseURL");function JGt(t,e){if(!UGt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&aJe(r)&&(sJe(r)||(r=XGt(r)),r=new URL(r,oJe(t))),r&&!r.hash&&(r.hash=e),r}s(JGt,"responseLocationURL");function sJe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(sJe,"isValidEncodedURL");function XGt(t){return Buffer.from(t,"binary").toString("utf8")}s(XGt,"normalizeBinaryStringToUtf8");function BO(t){return t.urlList[t.urlList.length-1]}s(BO,"requestCurrentURL");function ZGt(t){let e=BO(t);return fJe(e)&&HGt.has(e.port)?"blocked":"allowed"}s(ZGt,"requestBadPort");function eVt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(eVt,"isErrorLike");function tVt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(tVt,"isValidReasonPhrase");var rVt=nJe;function aJe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(aJe,"isValidHeaderValue");function nVt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(qGt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(nVt,"setRequestReferrerPolicyOnRedirect");function iVt(){return"allowed"}s(iVt,"crossOriginResourcePolicyCheck");function oVt(){return"success"}s(oVt,"corsCheck");function sVt(){return"success"}s(sVt,"TAOCheck");function aVt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(aVt,"appendFetchMetadata");function cVt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&ove(t.origin)&&!ove(BO(t))&&(e=null);break;case"same-origin":aZ(t,BO(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(cVt,"appendRequestOriginHeader");function nB(t,e){return t}s(nB,"coarsenTime");function lVt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:nB(t.domainLookupStartTime,r),domainLookupEndTime:nB(t.domainLookupEndTime,r),connectionStartTime:nB(t.connectionStartTime,r),connectionEndTime:nB(t.connectionEndTime,r),secureConnectionStartTime:nB(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(lVt,"clampAndCoarsenConnectionTimingInfo");function uVt(t){return nB(GGt.now(),t)}s(uVt,"coarsenedSharedCurrentTime");function dVt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(dVt,"createOpaqueTimingInfo");function cJe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(cJe,"makePolicyContainer");function fVt(t){return{referrerPolicy:t.referrerPolicy}}s(fVt,"clonePolicyContainer");function pVt(t){let e=t.referrerPolicy;CR(e);let r=null;if(t.referrer==="client"){let c=rJe();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=ive(r),i=ive(r,!0);n.toString().length>4096&&(n=i);let o=aZ(t,n),a=DO(n)&&!DO(t.url);switch(e){case"origin":return i??ive(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=BO(t);return aZ(n,c)?n:DO(n)&&!DO(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(pVt,"determineRequestsReferrer");function ive(t,e){return CR(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(ive,"stripURLForReferrer");function DO(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(DO,"isURLPotentiallyTrustworthy");function mVt(t,e){if(sZ===void 0)return!0;let r=lJe(e);if(r==="no metadata"||r.length===0)return!0;let n=gVt(r),i=AVt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=sZ.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),yVt(l,c))return!0}return!1}s(mVt,"bytesMatch");var hVt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function lJe(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=hVt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();iJe.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(lJe,"parseMetadata");function gVt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(gVt,"getStrongestMetadata");function AVt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(AVt,"filterMetadataListByAlgorithm");function yVt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(yVt,"compareBase64Mixed");function CVt(t){}s(CVt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function aZ(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(aZ,"sameOrigin");function vVt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(vVt,"createDeferredPromise");function EVt(t){return t.controller.state==="aborted"}s(EVt,"isAborted");function xVt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(xVt,"isCancelled");function bVt(t){return YGt[t.toLowerCase()]??t}s(bVt,"normalizeMethod");function IVt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return CR(typeof e=="string"),e}s(IVt,"serializeJavascriptValueToJSONString");var TVt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function uJe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:d}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,TVt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(uJe,"createIterator");function wVt(t,e,r,n=0,i=1){let o=uJe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return PO.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return PO.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return PO.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(PO.brandCheck(this,e),PO.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))l.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(wVt,"iteratorMixin");async function SVt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await dJe(o))}catch(a){i(a)}}s(SVt,"fullyReadBody");function _Vt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(_Vt,"isReadableStreamLike");function RVt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(RVt,"readableStreamClose");var kVt=/[^\x00-\xFF]/;function oZ(t){return CR(!kVt.test(t)),t}s(oZ,"isomorphicEncode");async function dJe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!KGt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(dJe,"readAllBytes");function PVt(t){CR("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(PVt,"urlIsLocal");function ove(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(ove,"urlHasHttpsScheme");function fJe(t){CR("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(fJe,"urlIsHttpHttpsScheme");function DVt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&yR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&yR(l=>l==="	"||l===" ",r,n);let i=yR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&yR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&yR(l=>l==="	"||l===" ",r,n);let a=yR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(DVt,"simpleRangeHeaderValue");function BVt(t,e,r){let n="bytes ";return n+=oZ(`${t}`),n+="-",n+=oZ(`${e}`),n+="/",n+=oZ(`${r}`),n}s(BVt,"buildContentRange");var sve=class extends QGt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?tJe.createInflate(this.#e):tJe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function NVt(t){return new sve(t)}s(NVt,"createInflate");function LVt(t){let e=null,r=null,n=null,i=pJe("content-type",t);if(i===null)return"failure";for(let o of i){let a=jGt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(LVt,"extractMimeType");function MVt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=yR(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=$Gt(e,r),r.position<e.length)continue}else CR(e.charCodeAt(r.position)===44),r.position++;i=WGt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(MVt,"gettingDecodingSplitting");function pJe(t,e){let r=e.get(t,!0);return r===null?null:MVt(r)}s(pJe,"getDecodeSplit");var FVt=new TextDecoder;function OVt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),FVt.decode(t))}s(OVt,"utf8DecodeBytes");var ave=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return rJe()}get origin(){return this.baseUrl?.origin}policyContainer=cJe()},cve=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new ave},QVt=new cve;mJe.exports={isAborted:EVt,isCancelled:xVt,isValidEncodedURL:sJe,createDeferredPromise:vVt,ReadableStreamFrom:zGt,tryUpgradeRequestToAPotentiallyTrustworthyURL:CVt,clampAndCoarsenConnectionTimingInfo:lVt,coarsenedSharedCurrentTime:uVt,determineRequestsReferrer:pVt,makePolicyContainer:cJe,clonePolicyContainer:fVt,appendFetchMetadata:aVt,appendRequestOriginHeader:cVt,TAOCheck:sVt,corsCheck:oVt,crossOriginResourcePolicyCheck:iVt,createOpaqueTimingInfo:dVt,setRequestReferrerPolicyOnRedirect:nVt,isValidHTTPToken:nJe,requestBadPort:ZGt,requestCurrentURL:BO,responseURL:oJe,responseLocationURL:JGt,isBlobLike:VGt,isURLPotentiallyTrustworthy:DO,isValidReasonPhrase:tVt,sameOrigin:aZ,normalizeMethod:bVt,serializeJavascriptValueToJSONString:IVt,iteratorMixin:wVt,createIterator:uJe,isValidHeaderName:rVt,isValidHeaderValue:aJe,isErrorLike:eVt,fullyReadBody:SVt,bytesMatch:mVt,isReadableStreamLike:_Vt,readableStreamClose:RVt,isomorphicEncode:oZ,urlIsLocal:PVt,urlHasHttpsScheme:ove,urlIsHttpHttpsScheme:fJe,readAllBytes:dJe,simpleRangeHeaderValue:DVt,buildContentRange:BVt,parseMetadata:lJe,createInflate:NVt,extractMimeType:LVt,getDecodeSplit:pJe,utf8DecodeBytes:OVt,environmentSettingsObject:QVt}});var xT=H((hai,hJe)=>{"use strict";f();hJe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var uve=H((Aai,gJe)=>{"use strict";f();var{Blob:UVt,File:qVt}=require("node:buffer"),{kState:AE}=xT(),{webidl:kC}=Uu(),lve=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[AE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return kC.brandCheck(this,t),this[AE].blobLike.stream(...e)}arrayBuffer(...e){return kC.brandCheck(this,t),this[AE].blobLike.arrayBuffer(...e)}slice(...e){return kC.brandCheck(this,t),this[AE].blobLike.slice(...e)}text(...e){return kC.brandCheck(this,t),this[AE].blobLike.text(...e)}get size(){return kC.brandCheck(this,t),this[AE].blobLike.size}get type(){return kC.brandCheck(this,t),this[AE].blobLike.type}get name(){return kC.brandCheck(this,t),this[AE].name}get lastModified(){return kC.brandCheck(this,t),this[AE].lastModified}get[Symbol.toStringTag](){return"File"}};kC.converters.Blob=kC.interfaceConverter(UVt);function HVt(t){return t instanceof qVt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(HVt,"isFileLike");gJe.exports={FileLike:lve,isFileLike:HVt}});var LO=H((vai,EJe)=>{"use strict";f();var{isBlobLike:cZ,iteratorMixin:$Vt}=kp(),{kState:Af}=xT(),{kEnumerableProperty:iB}=Mi(),{FileLike:AJe,isFileLike:WVt}=uve(),{webidl:Ls}=Uu(),{File:vJe}=require("node:buffer"),yJe=require("node:util"),CJe=globalThis.File??vJe,NO=class t{static{s(this,"FormData")}constructor(e){if(Ls.util.markAsUncloneable(this),e!==void 0)throw Ls.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Af]=[]}append(e,r,n=void 0){Ls.brandCheck(this,t);let i="FormData.append";if(Ls.argumentLengthCheck(arguments,2,i),arguments.length===3&&!cZ(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Ls.converters.USVString(e,i,"name"),r=cZ(r)?Ls.converters.Blob(r,i,"value",{strict:!1}):Ls.converters.USVString(r,i,"value"),n=arguments.length===3?Ls.converters.USVString(n,i,"filename"):void 0;let o=dve(e,r,n);this[Af].push(o)}delete(e){Ls.brandCheck(this,t);let r="FormData.delete";Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[Af]=this[Af].filter(n=>n.name!==e)}get(e){Ls.brandCheck(this,t);let r="FormData.get";Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name");let n=this[Af].findIndex(i=>i.name===e);return n===-1?null:this[Af][n].value}getAll(e){Ls.brandCheck(this,t);let r="FormData.getAll";return Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[Af].filter(n=>n.name===e).map(n=>n.value)}has(e){Ls.brandCheck(this,t);let r="FormData.has";return Ls.argumentLengthCheck(arguments,1,r),e=Ls.converters.USVString(e,r,"name"),this[Af].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Ls.brandCheck(this,t);let i="FormData.set";if(Ls.argumentLengthCheck(arguments,2,i),arguments.length===3&&!cZ(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Ls.converters.USVString(e,i,"name"),r=cZ(r)?Ls.converters.Blob(r,i,"name",{strict:!1}):Ls.converters.USVString(r,i,"name"),n=arguments.length===3?Ls.converters.USVString(n,i,"name"):void 0;let o=dve(e,r,n),a=this[Af].findIndex(c=>c.name===e);a!==-1?this[Af]=[...this[Af].slice(0,a),o,...this[Af].slice(a+1).filter(c=>c.name!==e)]:this[Af].push(o)}[yJe.inspect.custom](e,r){let n=this[Af].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=yJe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};$Vt("FormData",NO,Af,"name","value");Object.defineProperties(NO.prototype,{append:iB,delete:iB,get:iB,getAll:iB,has:iB,set:iB,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function dve(t,e,r){if(typeof e!="string"){if(WVt(e)||(e=e instanceof Blob?new CJe([e],"blob",{type:e.type}):new AJe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof vJe?new CJe([e],r,n):new AJe(e,r,n)}}return{name:t,value:e}}s(dve,"makeEntry");EJe.exports={FormData:NO,makeEntry:dve}});var SJe=H((bai,wJe)=>{"use strict";f();var{isUSVString:xJe,bufferToLowerCasedHeaderName:jVt}=Mi(),{utf8DecodeBytes:GVt}=kp(),{HTTP_TOKEN_CODEPOINTS:VVt,isomorphicDecode:bJe}=g0(),{isFileLike:zVt}=uve(),{makeEntry:YVt}=LO(),lZ=require("node:assert"),{File:KVt}=require("node:buffer"),JVt=globalThis.File??KVt,XVt=Buffer.from('form-data; name="'),IJe=Buffer.from("; filename"),ZVt=Buffer.from("--"),ezt=Buffer.from(`--\r
`);function tzt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(tzt,"isAsciiString");function rzt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(rzt,"validateBoundary");function nzt(t,e){lZ(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&uZ(t,ZVt,o)||o.position===t.length-4&&uZ(t,ezt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=izt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:d,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",tzt(d)||(d=""),h=new JVt([m],u,{type:d})):h=GVt(Buffer.from(m)),lZ(xJe(l)),lZ(typeof h=="string"&&xJe(h)||zVt(h)),i.push(YVt(l,h,u))}}s(nzt,"multipartFormDataParser");function izt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=oB(c=>c!==10&&c!==13&&c!==58,t,e);if(a=fve(a,!0,!0,c=>c===9||c===32),!VVt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,oB(c=>c===32||c===9,t,e),jVt(a)){case"content-disposition":{if(r=n=null,!uZ(t,XVt,e)||(e.position+=17,r=TJe(t,e),r===null))return"failure";if(uZ(t,IJe,e)){let c=e.position+IJe.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=TJe(t,e),n===null))return"failure"}break}case"content-type":{let c=oB(l=>l!==10&&l!==13,t,e);c=fve(c,!1,!0,l=>l===9||l===32),i=bJe(c);break}case"content-transfer-encoding":{let c=oB(l=>l!==10&&l!==13,t,e);c=fve(c,!1,!0,l=>l===9||l===32),o=bJe(c);break}default:oB(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(izt,"parseMultipartFormDataHeaders");function TJe(t,e){lZ(t[e.position-1]===34);let r=oB(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(TJe,"parseMultipartFormDataName");function oB(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(oB,"collectASequenceOfBytes");function fve(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(fve,"removeChars");function uZ(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(uZ,"bufferStartsWith");wJe.exports={multipartFormDataParser:nzt,validateBoundary:rzt}});var cB=H((wai,LJe)=>{"use strict";f();var MO=Mi(),{ReadableStreamFrom:ozt,isBlobLike:_Je,isReadableStreamLike:szt,readableStreamClose:azt,createDeferredPromise:czt,fullyReadBody:lzt,extractMimeType:uzt,utf8DecodeBytes:PJe}=kp(),{FormData:RJe}=LO(),{kState:aB}=xT(),{webidl:dzt}=Uu(),{Blob:fzt}=require("node:buffer"),pve=require("node:assert"),{isErrored:DJe,isDisturbed:pzt}=require("node:stream"),{isArrayBuffer:mzt}=require("node:util/types"),{serializeAMimeType:hzt}=g0(),{multipartFormDataParser:gzt}=SJe(),mve;try{let t=require("node:crypto");mve=s(e=>t.randomInt(0,e),"random")}catch{mve=s(t=>Math.floor(Math.random(t)),"random")}var dZ=new TextEncoder;function Azt(){}s(Azt,"noop");var hve=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,gve;hve&&(gve=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!pzt(e)&&!DJe(e)&&e.cancel("Response object has been garbage collected").catch(Azt)}));function BJe(t,e=!1){let r=null;t instanceof ReadableStream?r=t:_Je(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?dZ.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>azt(l))},start(){},type:"bytes"}),pve(szt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(mzt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(MO.isFormDataLike(t)){let l=`----formdata-undici-0${`${mve(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let d=s(y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(y=>y.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[y,x]of t)if(typeof x=="string"){let I=dZ.encode(u+`; name="${d(p(y))}"\r
\r
${p(x)}\r
`);m.push(I),o+=I.byteLength}else{let I=dZ.encode(`${u}; name="${d(p(y))}"`+(x.name?`; filename="${d(x.name)}"`:"")+`\r
Content-Type: ${x.type||"application/octet-stream"}\r
\r
`);m.push(I,x,h),typeof x.size=="number"?o+=I.byteLength+x.size+h.byteLength:g=!0}let A=dZ.encode(`--${l}--\r
`);m.push(A),o+=A.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let y of m)y.stream?yield*y.stream():yield y},"action"),a=`multipart/form-data; boundary=${l}`}else if(_Je(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(MO.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:ozt(t)}if((typeof i=="string"||MO.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!DJe(r)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(BJe,"extractBody");function yzt(t,e=!1){return t instanceof ReadableStream&&(pve(!MO.isDisturbed(t),"The body has already been consumed."),pve(!t.locked,"The stream is locked.")),BJe(t,e)}s(yzt,"safelyExtractBody");function Czt(t,e){let[r,n]=e.stream.tee();return hve&&gve.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(Czt,"cloneBody");function vzt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(vzt,"throwIfAborted");function Ezt(t){return{blob(){return sB(this,r=>{let n=kJe(this);return n===null?n="":n&&(n=hzt(n)),new fzt([r],{type:n})},t)},arrayBuffer(){return sB(this,r=>new Uint8Array(r).buffer,t)},text(){return sB(this,PJe,t)},json(){return sB(this,bzt,t)},formData(){return sB(this,r=>{let n=kJe(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=gzt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new RJe;return o[aB]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new RJe;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return sB(this,r=>new Uint8Array(r),t)}}}s(Ezt,"bodyMixinMethods");function xzt(t){Object.assign(t.prototype,Ezt(t))}s(xzt,"mixinBody");async function sB(t,e,r){if(dzt.brandCheck(t,r),NJe(t))throw new TypeError("Body is unusable: Body has already been read");vzt(t[aB]);let n=czt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[aB].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await lzt(t[aB].body,o,i),n.promise)}s(sB,"consumeBody");function NJe(t){let e=t[aB].body;return e!=null&&(e.stream.locked||MO.isDisturbed(e.stream))}s(NJe,"bodyUnusable");function bzt(t){return JSON.parse(PJe(t))}s(bzt,"parseJSONFromBytes");function kJe(t){let e=t[aB].headersList,r=uzt(e);return r==="failure"?null:r}s(kJe,"bodyMimeType");LJe.exports={extractBody:BJe,safelyExtractBody:yzt,cloneBody:Czt,mixinBody:xzt,streamRegistry:gve,hasFinalizationRegistry:hve,bodyUnusable:NJe}});var GJe=H((Rai,jJe)=>{"use strict";f();var kn=require("node:assert"),oi=Mi(),{channels:MJe}=Y3(),Ave=K1e(),{RequestContentLengthMismatchError:vR,ResponseContentLengthMismatchError:Izt,RequestAbortedError:HJe,HeadersTimeoutError:Tzt,HeadersOverflowError:wzt,SocketError:AZ,InformationalError:lB,BodyTimeoutError:Szt,HTTPParserError:_zt,ResponseExceededMaxSizeError:Rzt}=Wo(),{kUrl:$Je,kReset:A0,kClient:Eve,kParser:nc,kBlocking:QO,kRunning:wd,kPending:kzt,kSize:FJe,kWriting:IT,kQueue:gA,kNoRef:FO,kKeepAliveDefaultTimeout:Pzt,kHostHeader:Dzt,kPendingIdx:Bzt,kRunningIdx:yh,kError:Ch,kPipelining:hZ,kSocket:uB,kKeepAliveTimeoutValue:yZ,kMaxHeadersSize:yve,kKeepAliveMaxTimeout:Nzt,kKeepAliveTimeoutThreshold:Lzt,kHeadersTimeout:Mzt,kBodyTimeout:Fzt,kStrictContentLength:xve,kMaxRequests:OJe,kCounter:Ozt,kMaxResponseSize:Qzt,kOnError:Uzt,kResume:bT,kHTTPContext:WJe}=Ia(),PC=NKe(),qzt=Buffer.alloc(0),fZ=Buffer[Symbol.species],pZ=oi.addListener,Hzt=oi.removeAllListeners,Cve;async function $zt(){let t=process.env.JEST_WORKER_ID?Z1e():void 0,e;try{e=await WebAssembly.compile(FKe())}catch{e=await WebAssembly.compile(t||Z1e())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{kn(Sl.ptr===r);let o=n-BC+DC.byteOffset;return Sl.onStatus(new fZ(DC.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(kn(Sl.ptr===r),Sl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{kn(Sl.ptr===r);let o=n-BC+DC.byteOffset;return Sl.onHeaderField(new fZ(DC.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{kn(Sl.ptr===r);let o=n-BC+DC.byteOffset;return Sl.onHeaderValue(new fZ(DC.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(kn(Sl.ptr===r),Sl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{kn(Sl.ptr===r);let o=n-BC+DC.byteOffset;return Sl.onBody(new fZ(DC.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(kn(Sl.ptr===r),Sl.onMessageComplete()||0),"wasm_on_message_complete")}})}s($zt,"lazyllhttp");var vve=null,bve=$zt();bve.catch();var Sl=null,DC=null,mZ=0,BC=null,Wzt=0,OO=1,dB=2|OO,gZ=4|OO,Ive=8|Wzt,Tve=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){kn(Number.isFinite(e[yve])&&e[yve]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(PC.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[yve],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Qzt]}setTimeout(e,r){e!==this.timeoutValue||r&OO^this.timeoutType&OO?(this.timeout&&(Ave.clearTimeout(this.timeout),this.timeout=null),e&&(r&OO?this.timeout=Ave.setFastTimeout(QJe,e,new WeakRef(this)):(this.timeout=setTimeout(QJe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(kn(this.ptr!=null),kn(Sl==null),this.llhttp.llhttp_resume(this.ptr),kn(this.timeoutType===gZ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||qzt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){kn(this.ptr!=null),kn(Sl==null),kn(!this.paused);let{socket:r,llhttp:n}=this;e.length>mZ&&(BC&&n.free(BC),mZ=Math.ceil(e.length/4096)*4096,BC=n.malloc(mZ)),new Uint8Array(n.memory.buffer,BC,mZ).set(e);try{let i;try{DC=e,Sl=this,i=n.llhttp_execute(this.ptr,BC,e.length)}catch(a){throw a}finally{Sl=null,DC=null}let o=n.llhttp_get_error_pos(this.ptr)-BC;if(i===PC.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===PC.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==PC.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new _zt(c,PC.ERROR[i],e.slice(o))}}catch(i){oi.destroy(r,i)}}destroy(){kn(this.ptr!=null),kn(Sl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Ave.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[gA][r[yh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=oi.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&oi.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&oi.destroy(this.socket,new wzt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;kn(r),kn(n[uB]===i),kn(!i.destroyed),kn(!this.paused),kn((o.length&1)===0);let c=n[gA][n[yh]];kn(c),kn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[nc].destroy(),i[nc]=null,i[Eve]=null,i[Ch]=null,Hzt(i),n[uB]=null,n[WJe]=null,n[gA][n[yh]++]=null,n.emit("disconnect",n[$Je],[n],new lB("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){oi.destroy(i,l)}n[bT]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[gA][i[yh]];if(!l)return-1;if(kn(!this.upgrade),kn(this.statusCode<200),e===100)return oi.destroy(o,new AZ("bad response",oi.getSocketInfo(o))),-1;if(r&&!l.upgrade)return oi.destroy(o,new AZ("bad upgrade",oi.getSocketInfo(o))),-1;if(kn(this.timeoutType===dB),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[A0]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=l.bodyTimeout!=null?l.bodyTimeout:i[Fzt];this.setTimeout(d,gZ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return kn(i[wd]===1),this.upgrade=!0,2;if(r)return kn(i[wd]===1),this.upgrade=!0,2;if(kn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[hZ]){let d=this.keepAlive?oi.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[Lzt],i[Nzt]);p<=0?o[A0]=!0:i[yZ]=p}else i[yZ]=i[Pzt]}else o[A0]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[QO]&&(o[QO]=!1,i[bT]()),u?PC.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[gA][r[yh]];if(kn(a),kn(this.timeoutType===gZ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),kn(i>=200),o>-1&&this.bytesRead+e.length>o)return oi.destroy(n,new Rzt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return PC.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;kn(n>=100),kn((this.headers.length&1)===0);let u=e[gA][e[yh]];if(kn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return oi.destroy(r,new Izt),-1;if(u.onComplete(o),e[gA][e[yh]++]=null,r[IT])return kn(e[wd]===0),oi.destroy(r,new lB("reset")),PC.ERROR.PAUSED;if(l){if(r[A0]&&e[wd]===0)return oi.destroy(r,new lB("reset")),PC.ERROR.PAUSED;e[hZ]==null||e[hZ]===1?setImmediate(()=>e[bT]()):e[bT]()}else return oi.destroy(r,new lB("reset")),PC.ERROR.PAUSED}}};function QJe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===dB?(!e[IT]||e.writableNeedDrain||n[wd]>1)&&(kn(!i,"cannot be paused while waiting for headers"),oi.destroy(e,new Tzt)):r===gZ?i||oi.destroy(e,new Szt):r===Ive&&(kn(n[wd]===0&&n[yZ]),oi.destroy(e,new lB("socket idle timeout")))}s(QJe,"onParserTimeout");async function jzt(t,e){t[uB]=e,vve||(vve=await bve,bve=null),e[FO]=!1,e[IT]=!1,e[A0]=!1,e[QO]=!1,e[nc]=new Tve(t,e,vve),pZ(e,"error",function(n){kn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[nc];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Ch]=n,this[Eve][Uzt](n)}),pZ(e,"readable",function(){let n=this[nc];n&&n.readMore()}),pZ(e,"end",function(){let n=this[nc];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}oi.destroy(this,new AZ("other side closed",oi.getSocketInfo(this)))}),pZ(e,"close",function(){let n=this[Eve],i=this[nc];i&&(!this[Ch]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[nc].destroy(),this[nc]=null);let o=this[Ch]||new AZ("closed",oi.getSocketInfo(this));if(n[uB]=null,n[WJe]=null,n.destroyed){kn(n[kzt]===0);let a=n[gA].splice(n[yh]);for(let c=0;c<a.length;c++){let l=a[c];oi.errorRequest(n,l,o)}}else if(n[wd]>0&&o.code!=="UND_ERR_INFO"){let a=n[gA][n[yh]];n[gA][n[yh]++]=null,oi.errorRequest(n,a,o)}n[Bzt]=n[yh],kn(n[wd]===0),n.emit("disconnect",n[$Je],[n],o),n[bT]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return zzt(t,...n)},resume(){Gzt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[IT]||e[A0]||e[QO]||n&&(t[wd]>0&&!n.idempotent||t[wd]>0&&(n.upgrade||n.method==="CONNECT")||t[wd]>0&&oi.bodyLength(n.body)!==0&&(oi.isStream(n.body)||oi.isAsyncIterable(n.body)||oi.isFormDataLike(n.body))))}}}s(jzt,"connectH1");function Gzt(t){let e=t[uB];if(e&&!e.destroyed){if(t[FJe]===0?!e[FO]&&e.unref&&(e.unref(),e[FO]=!0):e[FO]&&e.ref&&(e.ref(),e[FO]=!1),t[FJe]===0)e[nc].timeoutType!==Ive&&e[nc].setTimeout(t[yZ],Ive);else if(t[wd]>0&&e[nc].statusCode<200&&e[nc].timeoutType!==dB){let r=t[gA][t[yh]],n=r.headersTimeout!=null?r.headersTimeout:t[Mzt];e[nc].setTimeout(n,dB)}}}s(Gzt,"resumeH1");function Vzt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Vzt,"shouldSendContentLength");function zzt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:d}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(oi.isFormDataLike(l)){Cve||(Cve=cB().extractBody);let[y,x]=Cve(l);e.contentType==null&&u.push("content-type",x),l=y.stream,d=y.length}else oi.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=oi.bodyLength(l);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Vzt(r)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[xve])return oi.errorRequest(t,e,new vR),!1;process.emitWarning(new vR)}let h=t[uB],g=s(y=>{e.aborted||e.completed||(oi.errorRequest(t,e,y||new HJe),oi.destroy(l),oi.destroy(h,new lB("aborted")))},"abort");try{e.onConnect(g)}catch(y){oi.errorRequest(t,e,y)}if(e.aborted)return!1;r==="HEAD"&&(h[A0]=!0),(o||r==="CONNECT")&&(h[A0]=!0),c!=null&&(h[A0]=c),t[OJe]&&h[Ozt]++>=t[OJe]&&(h[A0]=!0),a&&(h[QO]=!0);let A=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?A+=`host: ${i}\r
`:A+=t[Dzt],o?A+=`connection: upgrade\r
upgrade: ${o}\r
`:t[hZ]&&!h[A0]?A+=`connection: keep-alive\r
`:A+=`connection: close\r
`,Array.isArray(u))for(let y=0;y<u.length;y+=2){let x=u[y+0],I=u[y+1];if(Array.isArray(I))for(let S=0;S<I.length;S++)A+=`${x}: ${I[S]}\r
`;else A+=`${x}: ${I}\r
`}return MJe.sendHeaders.hasSubscribers&&MJe.sendHeaders.publish({request:e,headers:A,socket:h}),!l||m===0?UJe(g,null,t,e,h,d,A,p):oi.isBuffer(l)?UJe(g,l,t,e,h,d,A,p):oi.isBlobLike(l)?typeof l.stream=="function"?qJe(g,l.stream(),t,e,h,d,A,p):Kzt(g,l,t,e,h,d,A,p):oi.isStream(l)?Yzt(g,l,t,e,h,d,A,p):oi.isIterable(l)?qJe(g,l,t,e,h,d,A,p):kn(!1),!0}s(zzt,"writeH1");function Yzt(t,e,r,n,i,o,a,c){kn(o!==0||r[wd]===0,"stream body cannot be pipelined");let l=!1,u=new CZ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),d=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(A){oi.destroy(this,A)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new HJe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,kn(i.destroyed||i[IT]&&r[wd]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(A){g=A}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?oi.destroy(e,g):oi.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Yzt,"writeStream");function UJe(t,e,r,n,i,o,a,c){try{e?oi.isBuffer(e)&&(kn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[A0]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(kn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[bT]()}catch(l){t(l)}}s(UJe,"writeBuffer");async function Kzt(t,e,r,n,i,o,a,c){kn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new vR;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[A0]=!0),r[bT]()}catch(l){t(l)}}s(Kzt,"writeBlob");async function qJe(t,e,r,n,i,o,a,c){kn(o!==0||r[wd]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{kn(l===null),i[Ch]?h(i[Ch]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new CZ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Ch])throw i[Ch];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(qJe,"writeIterable");var CZ=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[IT]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Ch])throw r[Ch];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[xve])throw new vR;process.emitWarning(new vR)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[A0]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=r.write(e);return r.uncork(),n.onBodySent(e),d||r[nc].timeout&&r[nc].timeoutType===dB&&r[nc].timeout.refresh&&r[nc].timeout.refresh(),d}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[IT]=!1,e[Ch])throw e[Ch];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[xve])throw new vR;process.emitWarning(new vR)}e[nc].timeout&&e[nc].timeoutType===dB&&e[nc].timeout.refresh&&e[nc].timeout.refresh(),n[bT]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[IT]=!1,e&&(kn(n[wd]<=1,"pipeline should only contain this request"),i(e))}};jJe.exports=jzt});var eXe=H((Dai,ZJe)=>{"use strict";f();var vh=require("node:assert"),{pipeline:Jzt}=require("node:stream"),co=Mi(),{RequestContentLengthMismatchError:wve,RequestAbortedError:VJe,SocketError:UO,InformationalError:Sve}=Wo(),{kUrl:vZ,kReset:xZ,kClient:fB,kRunning:bZ,kPending:Xzt,kQueue:TT,kPendingIdx:_ve,kRunningIdx:AA,kError:CA,kSocket:ru,kStrictContentLength:Zzt,kOnError:Rve,kMaxConcurrentStreams:XJe,kHTTP2Session:yA,kResume:wT,kSize:eYt,kHTTPContext:tYt}=Ia(),yE=Symbol("open streams"),zJe,YJe=!1,EZ;try{EZ=require("node:http2")}catch{EZ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:rYt,HTTP2_HEADER_METHOD:nYt,HTTP2_HEADER_PATH:iYt,HTTP2_HEADER_SCHEME:oYt,HTTP2_HEADER_CONTENT_LENGTH:sYt,HTTP2_HEADER_EXPECT:aYt,HTTP2_HEADER_STATUS:cYt}}=EZ;function lYt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(lYt,"parseH2Headers");async function uYt(t,e){t[ru]=e,YJe||(YJe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=EZ.connect(t[vZ],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[XJe]});r[yE]=0,r[fB]=t,r[ru]=e,co.addListener(r,"error",fYt),co.addListener(r,"frameError",pYt),co.addListener(r,"end",mYt),co.addListener(r,"goaway",hYt),co.addListener(r,"close",function(){let{[fB]:i}=this,{[ru]:o}=i,a=this[ru][CA]||this[CA]||new UO("closed",co.getSocketInfo(o));if(i[yA]=null,i.destroyed){vh(i[Xzt]===0);let c=i[TT].splice(i[AA]);for(let l=0;l<c.length;l++){let u=c[l];co.errorRequest(i,u,a)}}}),r.unref(),t[yA]=r,e[yA]=r,co.addListener(e,"error",function(i){vh(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[CA]=i,this[fB][Rve](i)}),co.addListener(e,"end",function(){co.destroy(this,new UO("other side closed",co.getSocketInfo(this)))}),co.addListener(e,"close",function(){let i=this[CA]||new UO("closed",co.getSocketInfo(this));t[ru]=null,this[yA]!=null&&this[yA].destroy(i),t[_ve]=t[AA],vh(t[bZ]===0),t.emit("disconnect",t[vZ],[t],i),t[wT]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return AYt(t,...i)},resume(){dYt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(uYt,"connectH2");function dYt(t){let e=t[ru];e?.destroyed===!1&&(t[eYt]===0&&t[XJe]===0?(e.unref(),t[yA].unref()):(e.ref(),t[yA].ref()))}s(dYt,"resumeH2");function fYt(t){vh(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[ru][CA]=t,this[fB][Rve](t)}s(fYt,"onHttp2SessionError");function pYt(t,e,r){if(r===0){let n=new Sve(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[ru][CA]=n,this[fB][Rve](n)}}s(pYt,"onHttp2FrameError");function mYt(){let t=new UO("other side closed",co.getSocketInfo(this[ru]));this.destroy(t),co.destroy(this[ru],t)}s(mYt,"onHttp2SessionEnd");function hYt(t){let e=this[CA]||new UO(`HTTP/2: "GOAWAY" frame received with code ${t}`,co.getSocketInfo(this)),r=this[fB];if(r[ru]=null,r[tYt]=null,this[yA]!=null&&(this[yA].destroy(e),this[yA]=null),co.destroy(this[ru],e),r[AA]<r[TT].length){let n=r[TT][r[AA]];r[TT][r[AA]++]=null,co.errorRequest(r,n,e),r[_ve]=r[AA]}vh(r[bZ]===0),r.emit("disconnect",r[vZ],[r],e),r[wT]()}s(hYt,"onHTTP2GoAway");function gYt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(gYt,"shouldSendContentLength");function AYt(t,e){let r=t[yA],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:d}=e;if(a)return co.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let R=0;R<u.length;R+=2){let B=u[R+0],M=u[R+1];if(Array.isArray(M))for(let O=0;O<M.length;O++)p[B]?p[B]+=`,${M[O]}`:p[B]=M[O];else p[B]=M}let m,{hostname:h,port:g}=t[vZ];p[rYt]=o||`${h}${g?`:${g}`:""}`,p[nYt]=n;let A=s(R=>{e.aborted||e.completed||(R=R||new VJe,co.errorRequest(t,e,R),m!=null&&co.destroy(m,R),co.destroy(d,R),t[TT][t[AA]++]=null,t[wT]())},"abort");try{e.onConnect(A)}catch(R){co.errorRequest(t,e,R)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[yE],t[TT][t[AA]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[yE],t[TT][t[AA]++]=null}),m.once("close",()=>{r[yE]-=1,r[yE]===0&&r.unref()}),!0;p[iYt]=i,p[oYt]="https";let y=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let x=co.bodyLength(d);if(co.isFormDataLike(d)){zJe??=cB().extractBody;let[R,B]=zJe(d);p["content-type"]=B,d=R.stream,x=R.length}if(x==null&&(x=e.contentLength),(x===0||!y)&&(x=null),gYt(n)&&x>0&&e.contentLength!=null&&e.contentLength!==x){if(t[Zzt])return co.errorRequest(t,e,new wve),!1;process.emitWarning(new wve)}x!=null&&(vh(d,"no body must not have content length"),p[sYt]=`${x}`),r.ref();let I=n==="GET"||n==="HEAD"||d===null;return c?(p[aYt]="100-continue",m=r.request(p,{endStream:I,signal:l}),m.once("continue",S)):(m=r.request(p,{endStream:I,signal:l}),S()),++r[yE],m.once("response",R=>{let{[cYt]:B,...M}=R;if(e.onResponseStarted(),e.aborted){let O=new VJe;co.errorRequest(t,e,O),co.destroy(m,O);return}e.onHeaders(Number(B),lYt(M),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",O=>{e.onData(O)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[yE]===0&&r.unref(),A(new Sve("HTTP/2: stream half-closed (remote)")),t[TT][t[AA]++]=null,t[_ve]=t[AA],t[wT]()}),m.once("close",()=>{r[yE]-=1,r[yE]===0&&r.unref()}),m.once("error",function(R){A(R)}),m.once("frameError",(R,B)=>{A(new Sve(`HTTP/2: "frameError" received - type ${R}, code ${B}`))}),!0;function S(){!d||x===0?KJe(A,m,null,t,e,t[ru],x,y):co.isBuffer(d)?KJe(A,m,d,t,e,t[ru],x,y):co.isBlobLike(d)?typeof d.stream=="function"?JJe(A,m,d.stream(),t,e,t[ru],x,y):CYt(A,m,d,t,e,t[ru],x,y):co.isStream(d)?yYt(A,t[ru],y,m,d,t,e,x):co.isIterable(d)?JJe(A,m,d,t,e,t[ru],x,y):vh(!1)}s(S,"writeBodyH2")}s(AYt,"writeH2");function KJe(t,e,r,n,i,o,a,c){try{r!=null&&co.isBuffer(r)&&(vh(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[xZ]=!0),i.onRequestSent(),n[wT]()}catch(l){t(l)}}s(KJe,"writeBuffer");function yYt(t,e,r,n,i,o,a,c){vh(c!==0||o[bZ]===0,"stream body cannot be pipelined");let l=Jzt(i,n,d=>{d?(co.destroy(l,d),t(d)):(co.removeAllListeners(l),a.onRequestSent(),r||(e[xZ]=!0),o[wT]())});co.addListener(l,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(yYt,"writeStream");async function CYt(t,e,r,n,i,o,a,c){vh(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new wve;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[xZ]=!0),n[wT]()}catch(l){t(l)}}s(CYt,"writeBlob");async function JJe(t,e,r,n,i,o,a,c){vh(a!==0||n[bZ]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{vh(l===null),o[CA]?m(o[CA]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[CA])throw o[CA];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),c||(o[xZ]=!0),n[wT]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(JJe,"writeIterable");ZJe.exports=uYt});var TZ=H((Lai,nXe)=>{"use strict";f();var NC=Mi(),{kBodyUsed:qO}=Ia(),Pve=require("node:assert"),{InvalidArgumentError:vYt}=Wo(),EYt=require("node:events"),xYt=[300,301,302,303,307,308],tXe=Symbol("body"),IZ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[tXe]=e,this[qO]=!1}async*[Symbol.asyncIterator](){Pve(!this[qO],"disturbed"),this[qO]=!0,yield*this[tXe]}},kve=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new vYt("maxRedirections must be a positive number");NC.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,NC.isStream(this.opts.body)?(NC.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Pve(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[qO]=!1,EYt.prototype.on.call(this.opts.body,"data",function(){this[qO]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new IZ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&NC.isIterable(this.opts.body)&&(this.opts.body=new IZ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||NC.isDisturbed(this.opts.body)?null:bYt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=NC.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=IYt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function bYt(t,e){if(xYt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&NC.headerNameToString(e[r])==="location")return e[r+1]}s(bYt,"parseLocation");function rXe(t,e,r){if(t.length===4)return NC.headerNameToString(t)==="host";if(e&&NC.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=NC.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(rXe,"shouldRemoveHeader");function IYt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)rXe(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))rXe(i,e,r)||n.push(i,t[i]);else Pve(t==null,"headers must be an object or an array");return n}s(IYt,"cleanRequestHeaders");nXe.exports=kve});var wZ=H((Oai,iXe)=>{"use strict";f();var TYt=TZ();function wYt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new TYt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(wYt,"createRedirectInterceptor");iXe.exports=wYt});var zO=H((qai,mXe)=>{"use strict";f();var CE=require("node:assert"),uXe=require("node:net"),SYt=require("node:http"),ER=Mi(),{channels:pB}=Y3(),_Yt=EKe(),RYt=Z3(),{InvalidArgumentError:Pc,InformationalError:kYt,ClientDestroyedError:PYt}=Wo(),DYt=_O(),{kUrl:LC,kServerName:ST,kClient:BYt,kBusy:Dve,kConnect:NYt,kResuming:xR,kRunning:GO,kPending:VO,kSize:jO,kQueue:vA,kConnected:LYt,kConnecting:mB,kNeedDrain:RT,kKeepAliveDefaultTimeout:oXe,kHostHeader:MYt,kPendingIdx:EA,kRunningIdx:vE,kError:FYt,kPipelining:SZ,kKeepAliveTimeoutValue:OYt,kMaxHeadersSize:QYt,kKeepAliveMaxTimeout:UYt,kKeepAliveTimeoutThreshold:qYt,kHeadersTimeout:HYt,kBodyTimeout:$Yt,kStrictContentLength:WYt,kConnector:HO,kMaxRedirections:jYt,kMaxRequests:Bve,kCounter:GYt,kClose:VYt,kDestroy:zYt,kDispatch:YYt,kInterceptors:sXe,kLocalAddress:$O,kMaxResponseSize:KYt,kOnError:JYt,kHTTPContext:Dc,kMaxConcurrentStreams:XYt,kResume:WO}=Ia(),ZYt=GJe(),eKt=eXe(),aXe=!1,_T=Symbol("kClosedResolve"),cXe=s(()=>{},"noop");function dXe(t){return t[SZ]??t[Dc]?.defaultPipelining??1}s(dXe,"getPipelining");var Nve=class extends RYt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:A,pipelining:y,tls:x,strictContentLength:I,maxCachedSessions:S,maxRedirections:R,connect:B,maxRequestsPerClient:M,localAddress:O,maxResponseSize:K,autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z,maxConcurrentStreams:Q,allowH2:U}={}){if(super(),d!==void 0)throw new Pc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Pc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Pc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Pc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Pc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Pc("invalid maxHeaderSize");if(A!=null&&typeof A!="string")throw new Pc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new Pc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Pc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Pc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Pc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Pc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new Pc("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Pc("connect must be a function or an object");if(R!=null&&(!Number.isInteger(R)||R<0))throw new Pc("maxRedirections must be a positive number");if(M!=null&&(!Number.isInteger(M)||M<0))throw new Pc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||uXe.isIP(O)===0))throw new Pc("localAddress must be valid string IP address");if(K!=null&&(!Number.isInteger(K)||K<-1))throw new Pc("maxResponseSize must be a positive number");if(z!=null&&(!Number.isInteger(z)||z<-1))throw new Pc("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Pc("allowH2 must be a valid boolean value");if(Q!=null&&(typeof Q!="number"||Q<1))throw new Pc("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=DYt({...x,maxCachedSessions:S,allowH2:U,socketPath:A,timeout:c,...V?{autoSelectFamily:V,autoSelectFamilyAttemptTimeout:z}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[sXe]=r.Client,aXe||(aXe=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[sXe]=[tKt({maxRedirections:R})],this[LC]=ER.parseOrigin(e),this[HO]=B,this[SZ]=y??1,this[QYt]=n||SYt.maxHeaderSize,this[oXe]=p??4e3,this[UYt]=h??6e5,this[qYt]=g??2e3,this[OYt]=this[oXe],this[ST]=null,this[$O]=O??null,this[xR]=0,this[RT]=0,this[MYt]=`host: ${this[LC].hostname}${this[LC].port?`:${this[LC].port}`:""}\r
`,this[$Yt]=l??3e5,this[HYt]=i??3e5,this[WYt]=I??!0,this[jYt]=R,this[Bve]=M,this[_T]=null,this[KYt]=K>-1?K:-1,this[XYt]=Q??100,this[Dc]=null,this[vA]=[],this[vE]=0,this[EA]=0,this[WO]=Z=>Lve(this,Z),this[JYt]=Z=>fXe(this,Z)}get pipelining(){return this[SZ]}set pipelining(e){this[SZ]=e,this[WO](!0)}get[VO](){return this[vA].length-this[EA]}get[GO](){return this[EA]-this[vE]}get[jO](){return this[vA].length-this[vE]}get[LYt](){return!!this[Dc]&&!this[mB]&&!this[Dc].destroyed}get[Dve](){return!!(this[Dc]?.busy(null)||this[jO]>=(dXe(this)||1)||this[VO]>0)}[NYt](e){pXe(this),this.once("connect",e)}[YYt](e,r){let n=e.origin||this[LC].origin,i=new _Yt(n,e,r);return this[vA].push(i),this[xR]||(ER.bodyLength(i.body)==null&&ER.isIterable(i.body)?(this[xR]=1,queueMicrotask(()=>Lve(this))):this[WO](!0)),this[xR]&&this[RT]!==2&&this[Dve]&&(this[RT]=2),this[RT]<2}async[VYt](){return new Promise(e=>{this[jO]?this[_T]=e:e(null)})}async[zYt](e){return new Promise(r=>{let n=this[vA].splice(this[EA]);for(let o=0;o<n.length;o++){let a=n[o];ER.errorRequest(this,a,e)}let i=s(()=>{this[_T]&&(this[_T](),this[_T]=null),r(null)},"callback");this[Dc]?(this[Dc].destroy(e,i),this[Dc]=null):queueMicrotask(i),this[WO]()})}},tKt=wZ();function fXe(t,e){if(t[GO]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){CE(t[EA]===t[vE]);let r=t[vA].splice(t[vE]);for(let n=0;n<r.length;n++){let i=r[n];ER.errorRequest(t,i,e)}CE(t[jO]===0)}}s(fXe,"onError");async function pXe(t){CE(!t[mB]),CE(!t[Dc]);let{host:e,hostname:r,protocol:n,port:i}=t[LC];if(r[0]==="["){let o=r.indexOf("]");CE(o!==-1);let a=r.substring(1,o);CE(uXe.isIP(a)),r=a}t[mB]=!0,pB.beforeConnect.hasSubscribers&&pB.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Dc]?.version,servername:t[ST],localAddress:t[$O]},connector:t[HO]});try{let o=await new Promise((a,c)=>{t[HO]({host:e,hostname:r,protocol:n,port:i,servername:t[ST],localAddress:t[$O]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){ER.destroy(o.on("error",cXe),new PYt);return}CE(o);try{t[Dc]=o.alpnProtocol==="h2"?await eKt(t,o):await ZYt(t,o)}catch(a){throw o.destroy().on("error",cXe),a}t[mB]=!1,o[GYt]=0,o[Bve]=t[Bve],o[BYt]=t,o[FYt]=null,pB.connected.hasSubscribers&&pB.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Dc]?.version,servername:t[ST],localAddress:t[$O]},connector:t[HO],socket:o}),t.emit("connect",t[LC],[t])}catch(o){if(t.destroyed)return;if(t[mB]=!1,pB.connectError.hasSubscribers&&pB.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Dc]?.version,servername:t[ST],localAddress:t[$O]},connector:t[HO],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(CE(t[GO]===0);t[VO]>0&&t[vA][t[EA]].servername===t[ST];){let a=t[vA][t[EA]++];ER.errorRequest(t,a,o)}else fXe(t,o);t.emit("connectionError",t[LC],[t],o)}t[WO]()}s(pXe,"connect");function lXe(t){t[RT]=0,t.emit("drain",t[LC],[t])}s(lXe,"emitDrain");function Lve(t,e){t[xR]!==2&&(t[xR]=2,rKt(t,e),t[xR]=0,t[vE]>256&&(t[vA].splice(0,t[vE]),t[EA]-=t[vE],t[vE]=0))}s(Lve,"resume");function rKt(t,e){for(;;){if(t.destroyed){CE(t[VO]===0);return}if(t[_T]&&!t[jO]){t[_T](),t[_T]=null;return}if(t[Dc]&&t[Dc].resume(),t[Dve])t[RT]=2;else if(t[RT]===2){e?(t[RT]=1,queueMicrotask(()=>lXe(t))):lXe(t);continue}if(t[VO]===0||t[GO]>=(dXe(t)||1))return;let r=t[vA][t[EA]];if(t[LC].protocol==="https:"&&t[ST]!==r.servername){if(t[GO]>0)return;t[ST]=r.servername,t[Dc]?.destroy(new kYt("servername changed"),()=>{t[Dc]=null,Lve(t)})}if(t[mB])return;if(!t[Dc]){pXe(t);return}if(t[Dc].destroyed||t[Dc].busy(r))return;!r.aborted&&t[Dc].write(r)?t[EA]++:t[vA].splice(t[EA],1)}}s(rKt,"_resume");mXe.exports=Nve});var Mve=H((jai,hXe)=>{"use strict";f();var _Z=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};hXe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new _Z}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new _Z),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var AXe=H((zai,gXe)=>{f();var{kFree:nKt,kConnected:iKt,kPending:oKt,kQueued:sKt,kRunning:aKt,kSize:cKt}=Ia(),bR=Symbol("pool"),Fve=class{static{s(this,"PoolStats")}constructor(e){this[bR]=e}get connected(){return this[bR][iKt]}get free(){return this[bR][nKt]}get pending(){return this[bR][oKt]}get queued(){return this[bR][sKt]}get running(){return this[bR][aKt]}get size(){return this[bR][cKt]}};gXe.exports=Fve});var $ve=H((Jai,SXe)=>{"use strict";f();var lKt=Z3(),uKt=Mve(),{kConnected:Ove,kSize:yXe,kRunning:CXe,kPending:vXe,kQueued:YO,kBusy:dKt,kFree:fKt,kUrl:pKt,kClose:mKt,kDestroy:hKt,kDispatch:gKt}=Ia(),AKt=AXe(),y0=Symbol("clients"),yf=Symbol("needDrain"),KO=Symbol("queue"),Qve=Symbol("closed resolve"),Uve=Symbol("onDrain"),EXe=Symbol("onConnect"),xXe=Symbol("onDisconnect"),bXe=Symbol("onConnectionError"),qve=Symbol("get dispatcher"),TXe=Symbol("add client"),wXe=Symbol("remove client"),IXe=Symbol("stats"),Hve=class extends lKt{static{s(this,"PoolBase")}constructor(){super(),this[KO]=new uKt,this[y0]=[],this[YO]=0;let e=this;this[Uve]=s(function(n,i){let o=e[KO],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[YO]--,a=!this.dispatch(c.opts,c.handler)}this[yf]=a,!this[yf]&&e[yf]&&(e[yf]=!1,e.emit("drain",n,[e,...i])),e[Qve]&&o.isEmpty()&&Promise.all(e[y0].map(c=>c.close())).then(e[Qve])},"onDrain"),this[EXe]=(r,n)=>{e.emit("connect",r,[e,...n])},this[xXe]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[bXe]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[IXe]=new AKt(this)}get[dKt](){return this[yf]}get[Ove](){return this[y0].filter(e=>e[Ove]).length}get[fKt](){return this[y0].filter(e=>e[Ove]&&!e[yf]).length}get[vXe](){let e=this[YO];for(let{[vXe]:r}of this[y0])e+=r;return e}get[CXe](){let e=0;for(let{[CXe]:r}of this[y0])e+=r;return e}get[yXe](){let e=this[YO];for(let{[yXe]:r}of this[y0])e+=r;return e}get stats(){return this[IXe]}async[mKt](){this[KO].isEmpty()?await Promise.all(this[y0].map(e=>e.close())):await new Promise(e=>{this[Qve]=e})}async[hKt](e){for(;;){let r=this[KO].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[y0].map(r=>r.destroy(e)))}[gKt](e,r){let n=this[qve]();return n?n.dispatch(e,r)||(n[yf]=!0,this[yf]=!this[qve]()):(this[yf]=!0,this[KO].push({opts:e,handler:r}),this[YO]++),!this[yf]}[TXe](e){return e.on("drain",this[Uve]).on("connect",this[EXe]).on("disconnect",this[xXe]).on("connectionError",this[bXe]),this[y0].push(e),this[yf]&&queueMicrotask(()=>{this[yf]&&this[Uve](e[pKt],[this,e])}),this}[wXe](e){e.close(()=>{let r=this[y0].indexOf(e);r!==-1&&this[y0].splice(r,1)}),this[yf]=this[y0].some(r=>!r[yf]&&r.closed!==!0&&r.destroyed!==!0)}};SXe.exports={PoolBase:Hve,kClients:y0,kNeedDrain:yf,kAddClient:TXe,kRemoveClient:wXe,kGetDispatcher:qve}});var hB=H((eci,PXe)=>{"use strict";f();var{PoolBase:yKt,kClients:RZ,kNeedDrain:CKt,kAddClient:vKt,kGetDispatcher:EKt}=$ve(),xKt=zO(),{InvalidArgumentError:Wve}=Wo(),_Xe=Mi(),{kUrl:RXe,kInterceptors:bKt}=Ia(),IKt=_O(),jve=Symbol("options"),Gve=Symbol("connections"),kXe=Symbol("factory");function TKt(t,e){return new xKt(t,e)}s(TKt,"defaultFactory");var Vve=class extends yKt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=TKt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new Wve("invalid connections");if(typeof n!="function")throw new Wve("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new Wve("connect must be a function or an object");typeof i!="function"&&(i=IKt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[bKt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[Gve]=r||null,this[RXe]=_Xe.parseOrigin(e),this[jve]={..._Xe.deepClone(m),connect:i,allowH2:p},this[jve].interceptors=m.interceptors?{...m.interceptors}:void 0,this[kXe]=n,this.on("connectionError",(h,g,A)=>{for(let y of g){let x=this[RZ].indexOf(y);x!==-1&&this[RZ].splice(x,1)}})}[EKt](){for(let e of this[RZ])if(!e[CKt])return e;if(!this[Gve]||this[RZ].length<this[Gve]){let e=this[kXe](this[RXe],this[jve]);return this[vKt](e),e}}};PXe.exports=Vve});var MXe=H((nci,LXe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:wKt,InvalidArgumentError:SKt}=Wo(),{PoolBase:_Kt,kClients:Sd,kNeedDrain:JO,kAddClient:RKt,kRemoveClient:kKt,kGetDispatcher:PKt}=$ve(),DKt=hB(),{kUrl:zve,kInterceptors:BKt}=Ia(),{parseOrigin:DXe}=Mi(),BXe=Symbol("factory"),kZ=Symbol("options"),NXe=Symbol("kGreatestCommonDivisor"),IR=Symbol("kCurrentWeight"),TR=Symbol("kIndex"),Eh=Symbol("kWeight"),PZ=Symbol("kMaxWeightPerServer"),DZ=Symbol("kErrorPenalty");function NKt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(NKt,"getGreatestCommonDivisor");function LKt(t,e){return new DKt(t,e)}s(LKt,"defaultFactory");var Yve=class extends _Kt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=LKt,...n}={}){if(super(),this[kZ]=n,this[TR]=-1,this[IR]=0,this[PZ]=this[kZ].maxWeightPerServer||100,this[DZ]=this[kZ].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new SKt("factory must be a function.");this[BKt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[BXe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=DXe(e).origin;if(this[Sd].find(i=>i[zve].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[BXe](r,Object.assign({},this[kZ]));this[RKt](n),n.on("connect",()=>{n[Eh]=Math.min(this[PZ],n[Eh]+this[DZ])}),n.on("connectionError",()=>{n[Eh]=Math.max(1,n[Eh]-this[DZ]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Eh]=Math.max(1,n[Eh]-this[DZ]),this._updateBalancedPoolStats())});for(let i of this[Sd])i[Eh]=this[PZ];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Sd].length;r++)e=NKt(this[Sd][r][Eh],e);this[NXe]=e}removeUpstream(e){let r=DXe(e).origin,n=this[Sd].find(i=>i[zve].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[kKt](n),this}get upstreams(){return this[Sd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[zve].origin)}[PKt](){if(this[Sd].length===0)throw new wKt;if(!this[Sd].find(o=>!o[JO]&&o.closed!==!0&&o.destroyed!==!0)||this[Sd].map(o=>o[JO]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Sd].findIndex(o=>!o[JO]);for(;n++<this[Sd].length;){this[TR]=(this[TR]+1)%this[Sd].length;let o=this[Sd][this[TR]];if(o[Eh]>this[Sd][i][Eh]&&!o[JO]&&(i=this[TR]),this[TR]===0&&(this[IR]=this[IR]-this[NXe],this[IR]<=0&&(this[IR]=this[PZ])),o[Eh]>=this[IR]&&!o[JO])return o}return this[IR]=this[Sd][i][Eh],this[TR]=i,this[Sd][i]}};LXe.exports=Yve});var gB=H((sci,$Xe)=>{"use strict";f();var{InvalidArgumentError:BZ}=Wo(),{kClients:kT,kRunning:FXe,kClose:MKt,kDestroy:FKt,kDispatch:OKt,kInterceptors:QKt}=Ia(),UKt=Z3(),qKt=hB(),HKt=zO(),$Kt=Mi(),WKt=wZ(),OXe=Symbol("onConnect"),QXe=Symbol("onDisconnect"),UXe=Symbol("onConnectionError"),jKt=Symbol("maxRedirections"),qXe=Symbol("onDrain"),HXe=Symbol("factory"),Kve=Symbol("options");function GKt(t,e){return e&&e.connections===1?new HKt(t,e):new qKt(t,e)}s(GKt,"defaultFactory");var Jve=class extends UKt{static{s(this,"Agent")}constructor({factory:e=GKt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new BZ("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new BZ("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new BZ("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[QKt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[WKt({maxRedirections:r})],this[Kve]={...$Kt.deepClone(i),connect:n},this[Kve].interceptors=i.interceptors?{...i.interceptors}:void 0,this[jKt]=r,this[HXe]=e,this[kT]=new Map,this[qXe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[OXe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[QXe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[UXe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[FXe](){let e=0;for(let r of this[kT].values())e+=r[FXe];return e}[OKt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new BZ("opts.origin must be a non-empty string or URL.");let i=this[kT].get(n);return i||(i=this[HXe](e.origin,this[Kve]).on("drain",this[qXe]).on("connect",this[OXe]).on("disconnect",this[QXe]).on("connectionError",this[UXe]),this[kT].set(n,i)),i.dispatch(e,r)}async[MKt](){let e=[];for(let r of this[kT].values())e.push(r.close());this[kT].clear(),await Promise.all(e)}async[FKt](e){let r=[];for(let n of this[kT].values())r.push(n.destroy(e));this[kT].clear(),await Promise.all(r)}};$Xe.exports=Jve});var eEe=H((lci,VXe)=>{"use strict";f();var{kProxy:VKt,kClose:zKt,kDestroy:YKt,kInterceptors:KKt}=Ia(),{URL:XO}=require("node:url"),JKt=gB(),XKt=hB(),ZKt=Z3(),{InvalidArgumentError:MZ,RequestAbortedError:eJt,SecureProxyConnectionError:tJt}=Wo(),WXe=_O(),NZ=Symbol("proxy agent"),LZ=Symbol("proxy client"),ZO=Symbol("proxy headers"),Xve=Symbol("request tls settings"),jXe=Symbol("proxy tls settings"),GXe=Symbol("connect endpoint function");function rJt(t){return t==="https:"?443:80}s(rJt,"defaultProtocolPort");function nJt(t,e){return new XKt(t,e)}s(nJt,"defaultFactory");var iJt=s(()=>{},"noop"),Zve=class extends ZKt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof XO)&&!e.uri)throw new MZ("Proxy uri is mandatory");let{clientFactory:r=nJt}=e;if(typeof r!="function")throw new MZ("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:d}=n;if(this[VKt]={uri:i,protocol:c},this[KKt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[Xve]=e.requestTls,this[jXe]=e.proxyTls,this[ZO]=e.headers||{},e.auth&&e.token)throw new MZ("opts.auth cannot be used in combination with opts.token");e.auth?this[ZO]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[ZO]["proxy-authorization"]=e.token:l&&u&&(this[ZO]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=WXe({...e.proxyTls});this[GXe]=WXe({...e.requestTls}),this[LZ]=r(n,{connect:p}),this[NZ]=new JKt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${rJt(m.protocol)}`);try{let{socket:A,statusCode:y}=await this[LZ].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[ZO],host:m.host},servername:this[jXe]?.servername||d});if(y!==200&&(A.on("error",iJt).destroy(),h(new eJt(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,A);return}let x;this[Xve]?x=this[Xve].servername:x=m.servername,this[GXe]({...m,servername:x,httpSocket:A},h)}catch(A){A.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new tJt(A)):h(A)}},"connect")})}dispatch(e,r){let n=oJt(e.headers);if(sJt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new XO(e.origin);n.host=i}return this[NZ].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new XO(e):e instanceof XO?e:new XO(e.uri)}async[zKt](){await this[NZ].close(),await this[LZ].close()}async[YKt](){await this[NZ].destroy(),await this[LZ].destroy()}};function oJt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(oJt,"buildHeaders");function sJt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new MZ("Proxy-Authorization should be sent in ProxyAgent constructor")}s(sJt,"throwIfProxyAuthIsSent");VXe.exports=Zve});var ZXe=H((fci,XXe)=>{"use strict";f();var aJt=Z3(),{kClose:cJt,kDestroy:lJt,kClosed:zXe,kDestroyed:YXe,kDispatch:uJt,kNoProxyAgent:e7,kHttpProxyAgent:PT,kHttpsProxyAgent:wR}=Ia(),KXe=eEe(),dJt=gB(),fJt={"http:":80,"https:":443},JXe=!1,tEe=class extends aJt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,JXe||(JXe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[e7]=new dJt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[PT]=new KXe({...o,uri:a}):this[PT]=this[e7];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[wR]=new KXe({...o,uri:c}):this[wR]=this[PT],this.#o()}[uJt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[cJt](){await this[e7].close(),this[PT][zXe]||await this[PT].close(),this[wR][zXe]||await this[wR].close()}async[lJt](e){await this[e7].destroy(e),this[PT][YXe]||await this[PT].destroy(e),this[wR][YXe]||await this[wR].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||fJt[r]||0,this.#r(n,i)?r==="https:"?this[wR]:this[PT]:this[e7]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};XXe.exports=tEe});var FZ=H((hci,nZe)=>{"use strict";f();var AB=require("node:assert"),{kRetryHandlerDefaultRetry:eZe}=Ia(),{RequestRetryError:t7}=Wo(),{isDisturbed:tZe,parseHeaders:pJt,parseRangeHeader:rZe,wrapRequestBody:mJt}=Mi();function hJt(t){let e=Date.now();return new Date(t).getTime()-e}s(hJt,"calculateRetryAfterHeader");var rEe=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:mJt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[eZe],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[eZe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:A,methods:y}=u,{counter:x}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!A.includes(a)){i(e);return}if(Array.isArray(y)&&!y.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(x>d){i(e);return}let I=c?.["retry-after"];I&&(I=Number(I),I=Number.isNaN(I)?hJt(I):I*1e3);let S=I>0?Math.min(I,m):Math.min(p*h**(x-1),m);setTimeout(()=>i(null),S)}onHeaders(e,r,n,i){let o=pJt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new t7("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new t7("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=rZe(o["content-range"]);if(!c)return this.abort(new t7("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new t7("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:d=u-1}=c;return AB(this.start===l,"content-range mismatch"),AB(this.end==null||this.end===d,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=rZe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:d=u-1}=c;AB(l!=null&&Number.isFinite(l),"content-range mismatch"),AB(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=l,this.end=d}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return AB(Number.isFinite(this.start)),AB(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new t7("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||tZe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||tZe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};nZe.exports=rEe});var oZe=H((yci,iZe)=>{"use strict";f();var gJt=wO(),AJt=FZ(),nEe=class extends gJt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new AJt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};iZe.exports=nEe});var lEe=H((Eci,mZe)=>{"use strict";f();var uZe=require("node:assert"),{Readable:yJt}=require("node:stream"),{RequestAbortedError:dZe,NotSupportedError:CJt,InvalidArgumentError:vJt,AbortError:iEe}=Wo(),fZe=Mi(),{ReadableStreamFrom:EJt}=Mi(),Pp=Symbol("kConsume"),r7=Symbol("kReading"),DT=Symbol("kBody"),sZe=Symbol("kAbort"),pZe=Symbol("kContentType"),aZe=Symbol("kContentLength"),xJt=s(()=>{},"noop"),oEe=class extends yJt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[sZe]=r,this[Pp]=null,this[DT]=null,this[pZe]=n,this[aZe]=i,this[r7]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new dZe),e&&this[sZe](),super.destroy(e)}_destroy(e,r){this[r7]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[r7]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[r7]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Pp]&&e!==null?(aEe(this[Pp],e),this[r7]?super.push(e):!0):super.push(e)}async text(){return n7(this,"text")}async json(){return n7(this,"json")}async blob(){return n7(this,"blob")}async bytes(){return n7(this,"bytes")}async arrayBuffer(){return n7(this,"arrayBuffer")}async formData(){throw new CJt}get bodyUsed(){return fZe.isDisturbed(this)}get body(){return this[DT]||(this[DT]=EJt(this),this[Pp]&&(this[DT].getReader(),uZe(this[DT].locked))),this[DT]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new vJt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[aZe]>r&&this.destroy(new iEe);let a=s(()=>{this.destroy(n.reason??new iEe)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new iEe):i(null)}).on("error",xJt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function bJt(t){return t[DT]&&t[DT].locked===!0||t[Pp]}s(bJt,"isLocked");function IJt(t){return fZe.isDisturbed(t)||bJt(t)}s(IJt,"isUnusable");async function n7(t,e){return uZe(!t[Pp]),new Promise((r,n)=>{if(IJt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Pp]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){cEe(this[Pp],i)}).on("close",function(){this[Pp].body!==null&&cEe(this[Pp],new dZe)}),TJt(t[Pp])})})}s(n7,"consume");function TJt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)aEe(t,e.buffer[i])}else for(let r of e.buffer)aEe(t,r);for(e.endEmitted?lZe(this[Pp]):t.stream.on("end",function(){lZe(this[Pp])}),t.stream.resume();t.stream.read()!=null;);}s(TJt,"consumeStart");function sEe(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(sEe,"chunksDecode");function cZe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(cZe,"chunksConcat");function lZe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(sEe(r,o)):e==="json"?n(JSON.parse(sEe(r,o))):e==="arrayBuffer"?n(cZe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[pZe]})):e==="bytes"&&n(cZe(r,o)),cEe(t)}catch(a){i.destroy(a)}}s(lZe,"consumeEnd");function aEe(t,e){t.length+=e.length,t.body.push(e)}s(aEe,"consumePush");function cEe(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(cEe,"consumeFinish");mZe.exports={Readable:oEe,chunksDecode:sEe}});var uEe=H((Ici,CZe)=>{f();var wJt=require("node:assert"),{ResponseStatusCodeError:hZe}=Wo(),{chunksDecode:gZe}=lEe(),SJt=128*1024;async function _Jt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){wJt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>SJt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new hZe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{AZe(r)?d=JSON.parse(gZe(a,c)):yZe(r)&&(d=gZe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new hZe(l,n,o,d)))}s(_Jt,"getResolveErrorBodyCallback");var AZe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),yZe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");CZe.exports={getResolveErrorBodyCallback:_Jt,isContentTypeApplicationJson:AZe,isContentTypeText:yZe}});var xZe=H((Sci,dEe)=>{"use strict";f();var RJt=require("node:assert"),{Readable:kJt}=lEe(),{InvalidArgumentError:yB,RequestAbortedError:vZe}=Wo(),Dp=Mi(),{getResolveErrorBodyCallback:PJt}=uEe(),{AsyncResource:DJt}=require("node:async_hooks"),OZ=class extends DJt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new yB("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:d}=e;try{if(typeof r!="function")throw new yB("invalid callback");if(d&&(typeof d!="number"||d<0))throw new yB("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new yB("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new yB("invalid method");if(c&&typeof c!="function")throw new yB("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw Dp.isStream(a)&&Dp.destroy(a.on("error",Dp.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=d,this.signal=n,this.reason=null,this.removeAbortListener=null,Dp.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new vZe:this.removeAbortListener=Dp.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new vZe,this.res?Dp.destroy(this.res.on("error",Dp.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}RJt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?Dp.parseRawHeaders(r):Dp.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?Dp.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],A=new kJt({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&A.on("close",this.removeAbortListener),this.callback=null,this.res=A,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(PJt,null,{callback:o,body:A,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:A,context:l}))}onData(e){return this.res.push(e)}onComplete(e){Dp.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{Dp.destroy(r,e)})),i&&(this.body=null,Dp.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function EZe(t,e){if(e===void 0)return new Promise((r,n)=>{EZe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new OZ(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(EZe,"request");dEe.exports=EZe;dEe.exports.RequestHandler=OZ});var i7=H((kci,TZe)=>{f();var{addAbortListener:BJt}=Mi(),{RequestAbortedError:NJt}=Wo(),CB=Symbol("kListener"),MC=Symbol("kSignal");function bZe(t){t.abort?t.abort(t[MC]?.reason):t.reason=t[MC]?.reason??new NJt,IZe(t)}s(bZe,"abort");function LJt(t,e){if(t.reason=null,t[MC]=null,t[CB]=null,!!e){if(e.aborted){bZe(t);return}t[MC]=e,t[CB]=()=>{bZe(t)},BJt(t[MC],t[CB])}}s(LJt,"addSignal");function IZe(t){t[MC]&&("removeEventListener"in t[MC]?t[MC].removeEventListener("abort",t[CB]):t[MC].removeListener("abort",t[CB]),t[MC]=null,t[CB]=null)}s(IZe,"removeSignal");TZe.exports={addSignal:LJt,removeSignal:IZe}});var RZe=H((Bci,_Ze)=>{"use strict";f();var MJt=require("node:assert"),{finished:FJt,PassThrough:OJt}=require("node:stream"),{InvalidArgumentError:vB,InvalidReturnValueError:QJt}=Wo(),xA=Mi(),{getResolveErrorBodyCallback:UJt}=uEe(),{AsyncResource:qJt}=require("node:async_hooks"),{addSignal:HJt,removeSignal:wZe}=i7(),fEe=class extends qJt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new vB("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:d}=e;try{if(typeof n!="function")throw new vB("invalid callback");if(typeof r!="function")throw new vB("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new vB("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new vB("invalid method");if(l&&typeof l!="function")throw new vB("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw xA.isStream(c)&&xA.destroy(c.on("error",xA.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=d||!1,xA.isStream(c)&&c.on("error",p=>{this.onError(p)}),HJt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}MJt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,d=u==="raw"?xA.parseRawHeaders(r):xA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?xA.parseHeaders(r):d)["content-type"];p=new OJt,this.callback=null,this.runInAsyncScope(UJt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new QJt("expected Writable");FJt(p,{readable:!1},h=>{let{callback:g,res:A,opaque:y,trailers:x,abort:I}=this;this.res=null,(h||!A.readable)&&xA.destroy(A,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:y,trailers:x}),h&&I()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;wZe(this),r&&(this.trailers=xA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;wZe(this),this.factory=null,r?(this.res=null,xA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,xA.destroy(o,e))}};function SZe(t,e,r){if(r===void 0)return new Promise((n,i)=>{SZe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new fEe(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(SZe,"stream");_Ze.exports=SZe});var BZe=H((Mci,DZe)=>{"use strict";f();var{Readable:PZe,Duplex:$Jt,PassThrough:WJt}=require("node:stream"),{InvalidArgumentError:o7,InvalidReturnValueError:jJt,RequestAbortedError:pEe}=Wo(),xh=Mi(),{AsyncResource:GJt}=require("node:async_hooks"),{addSignal:VJt,removeSignal:zJt}=i7(),kZe=require("node:assert"),EB=Symbol("resume"),mEe=class extends PZe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[EB]=null}_read(){let{[EB]:e}=this;e&&(this[EB]=null,e())}_destroy(e,r){this._read(),r(e)}},hEe=class extends PZe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[EB]=e}_read(){this[EB]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new pEe),r(e)}},gEe=class extends GJt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new o7("invalid opts");if(typeof r!="function")throw new o7("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new o7("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new o7("invalid method");if(a&&typeof a!="function")throw new o7("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new mEe().on("error",xh.nop),this.ret=new $Jt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,d)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?d():p[EB]=d},"write"),destroy:s((l,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new pEe),g&&l&&g(),xh.destroy(d,l),xh.destroy(p,l),xh.destroy(m,l),zJt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,VJt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}kZe(!i,"pipeline cannot be retried"),kZe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?xh.parseRawHeaders(r):xh.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new hEe(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?xh.parseRawHeaders(r):xh.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",xh.nop),l}if(!c||typeof c.on!="function")throw new jJt("expected Readable");c.on("data",l=>{let{ret:u,body:d}=this;!u.push(l)&&d.pause&&d.pause()}).on("error",l=>{let{ret:u}=this;xh.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||xh.destroy(l,new pEe)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,xh.destroy(r,e)}};function YJt(t,e){try{let r=new gEe(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new WJt().destroy(r)}}s(YJt,"pipeline");DZe.exports=YJt});var QZe=H((Qci,OZe)=>{"use strict";f();var{InvalidArgumentError:AEe,SocketError:KJt}=Wo(),{AsyncResource:JJt}=require("node:async_hooks"),NZe=Mi(),{addSignal:XJt,removeSignal:LZe}=i7(),MZe=require("node:assert"),yEe=class extends JJt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new AEe("invalid opts");if(typeof r!="function")throw new AEe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new AEe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,XJt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}MZe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new KJt("bad upgrade",null)}onUpgrade(e,r,n){MZe(e===101);let{callback:i,opaque:o,context:a}=this;LZe(this),this.callback=null;let c=this.responseHeaders==="raw"?NZe.parseRawHeaders(r):NZe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;LZe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function FZe(t,e){if(e===void 0)return new Promise((r,n)=>{FZe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new yEe(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(FZe,"upgrade");OZe.exports=FZe});var WZe=H((Hci,$Ze)=>{"use strict";f();var ZJt=require("node:assert"),{AsyncResource:eXt}=require("node:async_hooks"),{InvalidArgumentError:CEe,SocketError:tXt}=Wo(),UZe=Mi(),{addSignal:rXt,removeSignal:qZe}=i7(),vEe=class extends eXt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new CEe("invalid opts");if(typeof r!="function")throw new CEe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new CEe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,rXt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}ZJt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new tXt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;qZe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?UZe.parseRawHeaders(r):UZe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;qZe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function HZe(t,e){if(e===void 0)return new Promise((r,n)=>{HZe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new vEe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(HZe,"connect");$Ze.exports=HZe});var jZe=H((jci,xB)=>{"use strict";f();xB.exports.request=xZe();xB.exports.stream=RZe();xB.exports.pipeline=BZe();xB.exports.upgrade=QZe();xB.exports.connect=WZe()});var xEe=H((Vci,GZe)=>{"use strict";f();var{UndiciError:nXt}=Wo(),EEe=class t extends nXt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};GZe.exports={MockNotMatchedError:EEe}});var bB=H((Kci,VZe)=>{"use strict";f();VZe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var s7=H((Xci,iet)=>{"use strict";f();var{MockNotMatchedError:SR}=xEe(),{kDispatches:QZ,kMockAgent:iXt,kOriginalDispatch:oXt,kOrigin:sXt,kGetNetConnect:aXt}=bB(),{buildURL:cXt}=Mi(),{STATUS_CODES:lXt}=require("node:http"),{types:{isPromise:uXt}}=require("node:util");function EE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(EE,"matchValue");function YZe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(YZe,"lowerCaseEntries");function KZe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):YZe(t)[e.toLocaleLowerCase()]}s(KZe,"getHeaderByName");function TEe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(TEe,"buildHeadersFromArray");function JZe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=TEe(e)),t.headers(e?YZe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=KZe(e,r);if(!EE(n,i))return!1}return!0}s(JZe,"matchHeaders");function zZe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(zZe,"safeUrl");function dXt(t,{path:e,method:r,body:n,headers:i}){let o=EE(t.path,e),a=EE(t.method,r),c=typeof t.body<"u"?EE(t.body,n):!0,l=JZe(t,i);return o&&a&&c&&l}s(dXt,"matchKey");function XZe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(XZe,"getResponseData");function ZZe(t,e){let r=e.query?cXt(e.path,e.query):e.path,n=typeof r=="string"?zZe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>EE(zZe(o),n));if(i.length===0)throw new SR(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>EE(o,e.method)),i.length===0)throw new SR(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?EE(o,e.body):!0),i.length===0)throw new SR(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>JZe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new SR(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(ZZe,"getMockDispatch");function fXt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(fXt,"addMockDispatch");function bEe(t,e){let r=t.findIndex(n=>n.consumed?dXt(n,e):!1);r!==-1&&t.splice(r,1)}s(bEe,"deleteMockDispatch");function eet(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(eet,"buildKey");function IEe(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(IEe,"generateKeyValues");function tet(t){return lXt[t]||"unknown"}s(tet,"getStatusText");async function pXt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(pXt,"getResponse");function ret(t,e){let r=eet(t),n=ZZe(this[QZ],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:d}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!d&&p>=m,n.pending=p<m,l!==null)return bEe(this[QZ],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[QZ])},u):h(this[QZ]);function h(A,y=o){let x=Array.isArray(t.headers)?TEe(t.headers):t.headers,I=typeof y=="function"?y({...t,headers:x}):y;if(uXt(I)){I.then(M=>h(A,M));return}let S=XZe(I),R=IEe(a),B=IEe(c);e.onConnect?.(M=>e.onError(M),null),e.onHeaders?.(i,R,g,tet(i)),e.onData?.(Buffer.from(S)),e.onComplete?.(B),bEe(A,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(ret,"mockDispatch");function mXt(){let t=this[iXt],e=this[sXt],r=this[oXt];return s(function(i,o){if(t.isMockActive)try{ret.call(this,i,o)}catch(a){if(a instanceof SR){let c=t[aXt]();if(c===!1)throw new SR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(net(c,e))r.call(this,i,o);else throw new SR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(mXt,"buildMockDispatch");function net(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>EE(n,r.host)))}s(net,"checkNetConnect");function hXt(t){if(t){let{agent:e,...r}=t;return r}}s(hXt,"buildMockOptions");iet.exports={getResponseData:XZe,getMockDispatch:ZZe,addMockDispatch:fXt,deleteMockDispatch:bEe,buildKey:eet,generateKeyValues:IEe,matchValue:EE,getResponse:pXt,getStatusText:tet,mockDispatch:ret,buildMockDispatch:mXt,checkNetConnect:net,buildMockOptions:hXt,getHeaderByName:KZe,buildHeadersFromArray:TEe}});var DEe=H((tli,PEe)=>{"use strict";f();var{getResponseData:gXt,buildKey:AXt,addMockDispatch:wEe}=s7(),{kDispatches:UZ,kDispatchKey:qZ,kDefaultHeaders:SEe,kDefaultTrailers:_Ee,kContentLength:REe,kMockDispatch:HZ}=bB(),{InvalidArgumentError:FC}=Wo(),{buildURL:yXt}=Mi(),IB=class{static{s(this,"MockScope")}constructor(e){this[HZ]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new FC("waitInMs must be a valid integer > 0");return this[HZ].delay=e,this}persist(){return this[HZ].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new FC("repeatTimes must be a valid integer > 0");return this[HZ].times=e,this}},kEe=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new FC("opts must be an object");if(typeof e.path>"u")throw new FC("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=yXt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[qZ]=AXt(e),this[UZ]=r,this[SEe]={},this[_Ee]={},this[REe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=gXt(r),o=this[REe]?{"content-length":i.length}:{},a={...this[SEe],...o,...n.headers},c={...this[_Ee],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new FC("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new FC("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new FC("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=wEe(this[UZ],this[qZ],o);return new IB(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=wEe(this[UZ],this[qZ],n);return new IB(i)}replyWithError(e){if(typeof e>"u")throw new FC("error must be defined");let r=wEe(this[UZ],this[qZ],{error:e});return new IB(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new FC("headers must be defined");return this[SEe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new FC("trailers must be defined");return this[_Ee]=e,this}replyContentLength(){return this[REe]=!0,this}};PEe.exports.MockInterceptor=kEe;PEe.exports.MockScope=IB});var LEe=H((ili,fet)=>{"use strict";f();var{promisify:CXt}=require("node:util"),vXt=zO(),{buildMockDispatch:EXt}=s7(),{kDispatches:oet,kMockAgent:set,kClose:aet,kOriginalClose:cet,kOrigin:uet,kOriginalDispatch:xXt,kConnected:BEe}=bB(),{MockInterceptor:bXt}=DEe(),det=Ia(),{InvalidArgumentError:IXt}=Wo(),NEe=class extends vXt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new IXt("Argument opts.agent must implement Agent");this[set]=r.agent,this[uet]=e,this[oet]=[],this[BEe]=1,this[xXt]=this.dispatch,this[cet]=this.close.bind(this),this.dispatch=EXt.call(this),this.close=this[aet]}get[det.kConnected](){return this[BEe]}intercept(e){return new bXt(e,this[oet])}async[aet](){await CXt(this[cet])(),this[BEe]=0,this[set][det.kClients].delete(this[uet])}};fet.exports=NEe});var OEe=H((ali,Cet)=>{"use strict";f();var{promisify:TXt}=require("node:util"),wXt=hB(),{buildMockDispatch:SXt}=s7(),{kDispatches:pet,kMockAgent:met,kClose:het,kOriginalClose:get,kOrigin:Aet,kOriginalDispatch:_Xt,kConnected:MEe}=bB(),{MockInterceptor:RXt}=DEe(),yet=Ia(),{InvalidArgumentError:kXt}=Wo(),FEe=class extends wXt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new kXt("Argument opts.agent must implement Agent");this[met]=r.agent,this[Aet]=e,this[pet]=[],this[MEe]=1,this[_Xt]=this.dispatch,this[get]=this.close.bind(this),this.dispatch=SXt.call(this),this.close=this[het]}get[yet.kConnected](){return this[MEe]}intercept(e){return new RXt(e,this[pet])}async[het](){await TXt(this[get])(),this[MEe]=0,this[met][yet.kClients].delete(this[Aet])}};Cet.exports=FEe});var Eet=H((dli,vet)=>{"use strict";f();var PXt={pronoun:"it",is:"is",was:"was",this:"this"},DXt={pronoun:"they",is:"are",was:"were",this:"these"};vet.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?PXt:DXt,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var bet=H((hli,xet)=>{"use strict";f();var{Transform:BXt}=require("node:stream"),{Console:NXt}=require("node:console"),LXt=process.versions.icu?"\u2705":"Y ",MXt=process.versions.icu?"\u274C":"N ";xet.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new BXt({transform(r,n,i){i(null,r)}}),this.logger=new NXt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?LXt:MXt,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var _et=H((yli,wet)=>{"use strict";f();var{kClients:_R}=Ia(),FXt=gB(),{kAgent:QEe,kMockAgentSet:$Z,kMockAgentGet:Iet,kDispatches:UEe,kIsMockActive:WZ,kNetConnect:RR,kGetNetConnect:OXt,kOptions:jZ,kFactory:GZ}=bB(),QXt=LEe(),UXt=OEe(),{matchValue:qXt,buildMockOptions:HXt}=s7(),{InvalidArgumentError:Tet,UndiciError:$Xt}=Wo(),WXt=wO(),jXt=Eet(),GXt=bet(),qEe=class extends WXt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[RR]=!0,this[WZ]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new Tet("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new FXt(e);this[QEe]=r,this[_R]=r[_R],this[jZ]=HXt(e)}get(e){let r=this[Iet](e);return r||(r=this[GZ](e),this[$Z](e,r)),r}dispatch(e,r){return this.get(e.origin),this[QEe].dispatch(e,r)}async close(){await this[QEe].close(),this[_R].clear()}deactivate(){this[WZ]=!1}activate(){this[WZ]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[RR])?this[RR].push(e):this[RR]=[e];else if(typeof e>"u")this[RR]=!0;else throw new Tet("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[RR]=!1}get isMockActive(){return this[WZ]}[$Z](e,r){this[_R].set(e,r)}[GZ](e){let r=Object.assign({agent:this},this[jZ]);return this[jZ]&&this[jZ].connections===1?new QXt(e,r):new UXt(e,r)}[Iet](e){let r=this[_R].get(e);if(r)return r;if(typeof e!="string"){let n=this[GZ]("http://localhost:9999");return this[$Z](e,n),n}for(let[n,i]of Array.from(this[_R]))if(i&&typeof n!="string"&&qXt(n,e)){let o=this[GZ](e);return this[$Z](e,o),o[UEe]=i[UEe],o}}[OXt](){return this[RR]}pendingInterceptors(){let e=this[_R];return Array.from(e.entries()).flatMap(([r,n])=>n[UEe].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new GXt}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new jXt("interceptor","interceptors").pluralize(r.length);throw new $Xt(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};wet.exports=qEe});var VZ=H((Eli,Det)=>{"use strict";f();var Ret=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:VXt}=Wo(),zXt=gB();Pet()===void 0&&ket(new zXt);function ket(t){if(!t||typeof t.dispatch!="function")throw new VXt("Argument agent must implement Agent");Object.defineProperty(globalThis,Ret,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(ket,"setGlobalDispatcher");function Pet(){return globalThis[Ret]}s(Pet,"getGlobalDispatcher");Det.exports={setGlobalDispatcher:ket,getGlobalDispatcher:Pet}});var zZ=H((Tli,Bet)=>{"use strict";f();Bet.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var Let=H((_li,Net)=>{"use strict";f();var YXt=TZ();Net.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new YXt(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var Fet=H((Pli,Met)=>{"use strict";f();var KXt=FZ();Met.exports=t=>e=>s(function(n,i){return e(n,new KXt({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var Qet=H((Nli,Oet)=>{"use strict";f();var JXt=Mi(),{InvalidArgumentError:XXt,RequestAbortedError:ZXt}=Wo(),eZt=zZ(),HEe=class extends eZt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new XXt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=JXt.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new ZXt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function tZt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new HEe({maxSize:o},i);return e(n,a)},"Intercept")}s(tZt,"createDumpInterceptor");Oet.exports=tZt});var Het=H((Fli,qet)=>{"use strict";f();var{isIP:rZt}=require("node:net"),{lookup:nZt}=require("node:dns"),iZt=zZ(),{InvalidArgumentError:TB,InformationalError:oZt}=Wo(),Uet=Math.pow(2,31)-1,$Ee=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new oZt("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){nZt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===Uet?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===Uet?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new WEe(this,e,r)}},WEe=class extends iZt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};qet.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new TB("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new TB("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new TB("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new TB("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new TB("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new TB("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new $Ee(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return rZt(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(d,p)=>{if(d)return l.onError(d);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var kR=H((Uli,Yet)=>{"use strict";f();var{kConstruct:sZt}=Ia(),{kEnumerableProperty:wB}=Mi(),{iteratorMixin:aZt,isValidHeaderName:a7,isValidHeaderValue:Wet}=kp(),{webidl:_o}=Uu(),jEe=require("node:assert"),YZ=require("node:util"),rl=Symbol("headers map"),Bp=Symbol("headers map sorted");function $et(t){return t===10||t===13||t===9||t===32}s($et,"isHTTPWhiteSpaceCharCode");function jet(t){let e=0,r=t.length;for(;r>e&&$et(t.charCodeAt(r-1));)--r;for(;r>e&&$et(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(jet,"headerValueNormalize");function Get(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw _o.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});GEe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)GEe(t,r[n],e[r[n]])}else throw _o.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(Get,"fill");function GEe(t,e,r){if(r=jet(r),a7(e)){if(!Wet(r))throw _o.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw _o.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(zet(t)==="immutable")throw new TypeError("immutable");return VEe(t).append(e,r,!1)}s(GEe,"appendHeader");function Vet(t,e){return t[0]<e[0]?-1:1}s(Vet,"compareHeaderName");var KZ=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[rl]=new Map(e[rl]),this[Bp]=e[Bp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[rl]=new Map(e),this[Bp]=null)}contains(e,r){return this[rl].has(r?e:e.toLowerCase())}clear(){this[rl].clear(),this[Bp]=null,this.cookies=null}append(e,r,n){this[Bp]=null;let i=n?e:e.toLowerCase(),o=this[rl].get(i);if(o){let a=i==="cookie"?"; ":", ";this[rl].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[rl].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[Bp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[rl].set(i,{name:e,value:r})}delete(e,r){this[Bp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[rl].delete(e)}get(e,r){return this[rl].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[rl])yield[e,r]}get entries(){let e={};if(this[rl].size!==0)for(let{name:r,value:n}of this[rl].values())e[r]=n;return e}rawValues(){return this[rl].values()}get entriesList(){let e=[];if(this[rl].size!==0)for(let{0:r,1:{name:n,value:i}}of this[rl])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[rl].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[rl][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],jEe(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,d,p;o<e;++o){for(p=n.next().value,d=r[o]=[p[0],p[1].value],jEe(d[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=d[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=d}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[rl])r[n++]=[i,o],jEe(o!==null);return r.sort(Vet)}}},bA=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){_o.util.markAsUncloneable(this),e!==sZt&&(this.#t=new KZ,this.#e="none",e!==void 0&&(e=_o.converters.HeadersInit(e,"Headers contructor","init"),Get(this,e)))}append(e,r){_o.brandCheck(this,t),_o.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=_o.converters.ByteString(e,n,"name"),r=_o.converters.ByteString(r,n,"value"),GEe(this,e,r)}delete(e){if(_o.brandCheck(this,t),_o.argumentLengthCheck(arguments,1,"Headers.delete"),e=_o.converters.ByteString(e,"Headers.delete","name"),!a7(e))throw _o.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){_o.brandCheck(this,t),_o.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=_o.converters.ByteString(e,r,"name"),!a7(e))throw _o.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){_o.brandCheck(this,t),_o.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=_o.converters.ByteString(e,r,"name"),!a7(e))throw _o.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){_o.brandCheck(this,t),_o.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=_o.converters.ByteString(e,n,"name"),r=_o.converters.ByteString(r,n,"value"),r=jet(r),a7(e)){if(!Wet(r))throw _o.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw _o.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){_o.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[Bp](){if(this.#t[Bp])return this.#t[Bp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[Bp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[Bp]=e}[YZ.inspect.custom](e,r){return r.depth??=e,`Headers ${YZ.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:zet,setHeadersGuard:cZt,getHeadersList:VEe,setHeadersList:lZt}=bA;Reflect.deleteProperty(bA,"getHeadersGuard");Reflect.deleteProperty(bA,"setHeadersGuard");Reflect.deleteProperty(bA,"getHeadersList");Reflect.deleteProperty(bA,"setHeadersList");aZt("Headers",bA,Bp,0,1);Object.defineProperties(bA.prototype,{append:wB,delete:wB,get:wB,has:wB,set:wB,getSetCookie:wB,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[YZ.inspect.custom]:{enumerable:!1}});_o.converters.HeadersInit=function(t,e,r){if(_o.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!YZ.types.isProxy(t)&&n===bA.prototype.entries)try{return VEe(t).entriesList}catch{}return typeof n=="function"?_o.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):_o.converters["record<ByteString, ByteString>"](t,e,r)}throw _o.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Yet.exports={fill:Get,compareHeaderName:Vet,Headers:bA,HeadersList:KZ,getHeadersGuard:zet,setHeadersGuard:cZt,setHeadersList:lZt,getHeadersList:VEe}});var l7=H(($li,ott)=>{"use strict";f();var{Headers:ttt,HeadersList:Ket,fill:uZt,getHeadersGuard:dZt,setHeadersGuard:rtt,setHeadersList:ntt}=kR(),{extractBody:Jet,cloneBody:fZt,mixinBody:pZt,hasFinalizationRegistry:mZt,streamRegistry:hZt,bodyUnusable:gZt}=cB(),zEe=Mi(),Xet=require("node:util"),{kEnumerableProperty:Np}=zEe,{isValidReasonPhrase:AZt,isCancelled:yZt,isAborted:CZt,isBlobLike:vZt,serializeJavascriptValueToJSONString:EZt,isErrorLike:xZt,isomorphicEncode:bZt,environmentSettingsObject:IZt}=kp(),{redirectStatusSet:TZt,nullBodyStatus:wZt}=RO(),{kState:ic,kHeaders:xE}=xT(),{webidl:Ai}=Uu(),{FormData:SZt}=LO(),{URLSerializer:Zet}=g0(),{kConstruct:XZ}=Ia(),YEe=require("node:assert"),{types:_Zt}=require("node:util"),RZt=new TextEncoder("utf-8"),PR=class t{static{s(this,"Response")}static error(){return c7(ZZ(),"immutable")}static json(e,r={}){Ai.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ai.converters.ResponseInit(r));let n=RZt.encode(EZt(e)),i=Jet(n),o=c7(SB({}),"response");return ett(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){Ai.argumentLengthCheck(arguments,1,"Response.redirect"),e=Ai.converters.USVString(e),r=Ai.converters["unsigned short"](r);let n;try{n=new URL(e,IZt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!TZt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=c7(SB({}),"immutable");i[ic].status=r;let o=bZt(Zet(n));return i[ic].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(Ai.util.markAsUncloneable(this),e===XZ)return;e!==null&&(e=Ai.converters.BodyInit(e)),r=Ai.converters.ResponseInit(r),this[ic]=SB({}),this[xE]=new ttt(XZ),rtt(this[xE],"response"),ntt(this[xE],this[ic].headersList);let n=null;if(e!=null){let[i,o]=Jet(e);n={body:i,type:o}}ett(this,r,n)}get type(){return Ai.brandCheck(this,t),this[ic].type}get url(){Ai.brandCheck(this,t);let e=this[ic].urlList,r=e[e.length-1]??null;return r===null?"":Zet(r,!0)}get redirected(){return Ai.brandCheck(this,t),this[ic].urlList.length>1}get status(){return Ai.brandCheck(this,t),this[ic].status}get ok(){return Ai.brandCheck(this,t),this[ic].status>=200&&this[ic].status<=299}get statusText(){return Ai.brandCheck(this,t),this[ic].statusText}get headers(){return Ai.brandCheck(this,t),this[xE]}get body(){return Ai.brandCheck(this,t),this[ic].body?this[ic].body.stream:null}get bodyUsed(){return Ai.brandCheck(this,t),!!this[ic].body&&zEe.isDisturbed(this[ic].body.stream)}clone(){if(Ai.brandCheck(this,t),gZt(this))throw Ai.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=KEe(this[ic]);return c7(e,dZt(this[xE]))}[Xet.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${Xet.formatWithOptions(r,n)}`}};pZt(PR);Object.defineProperties(PR.prototype,{type:Np,url:Np,status:Np,ok:Np,redirected:Np,statusText:Np,headers:Np,clone:Np,body:Np,bodyUsed:Np,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(PR,{json:Np,redirect:Np,error:Np});function KEe(t){if(t.internalResponse)return itt(KEe(t.internalResponse),t.type);let e=SB({...t,body:null});return t.body!=null&&(e.body=fZt(e,t.body)),e}s(KEe,"cloneResponse");function SB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new Ket(t?.headersList):new Ket,urlList:t?.urlList?[...t.urlList]:[]}}s(SB,"makeResponse");function ZZ(t){let e=xZt(t);return SB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(ZZ,"makeNetworkError");function kZt(t){return t.type==="error"&&t.status===0}s(kZt,"isNetworkError");function JZ(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return YEe(!(n in e)),r[n]=i,!0}})}s(JZ,"makeFilteredResponse");function itt(t,e){if(e==="basic")return JZ(t,{type:"basic",headersList:t.headersList});if(e==="cors")return JZ(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return JZ(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return JZ(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});YEe(!1)}s(itt,"filterResponse");function PZt(t,e=null){return YEe(yZt(t)),CZt(t)?ZZ(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):ZZ(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(PZt,"makeAppropriateNetworkError");function ett(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!AZt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[ic].status=e.status),"statusText"in e&&e.statusText!=null&&(t[ic].statusText=e.statusText),"headers"in e&&e.headers!=null&&uZt(t[xE],e.headers),r){if(wZt.includes(t.status))throw Ai.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[ic].body=r.body,r.type!=null&&!t[ic].headersList.contains("content-type",!0)&&t[ic].headersList.append("content-type",r.type,!0)}}s(ett,"initializeResponse");function c7(t,e){let r=new PR(XZ);return r[ic]=t,r[xE]=new ttt(XZ),ntt(r[xE],t.headersList),rtt(r[xE],e),mZt&&t.body?.stream&&hZt.register(r,new WeakRef(t.body.stream)),r}s(c7,"fromInnerResponse");Ai.converters.ReadableStream=Ai.interfaceConverter(ReadableStream);Ai.converters.FormData=Ai.interfaceConverter(SZt);Ai.converters.URLSearchParams=Ai.interfaceConverter(URLSearchParams);Ai.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?Ai.converters.USVString(t,e,r):vZt(t)?Ai.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||_Zt.isArrayBuffer(t)?Ai.converters.BufferSource(t,e,r):zEe.isFormDataLike(t)?Ai.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?Ai.converters.URLSearchParams(t,e,r):Ai.converters.DOMString(t,e,r)};Ai.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?Ai.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:Ai.converters.XMLHttpRequestBodyInit(t,e,r)};Ai.converters.ResponseInit=Ai.dictionaryConverter([{key:"status",converter:Ai.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:Ai.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:Ai.converters.HeadersInit}]);ott.exports={isNetworkError:kZt,makeNetworkError:ZZ,makeResponse:SB,makeAppropriateNetworkError:PZt,filterResponse:itt,Response:PR,cloneResponse:KEe,fromInnerResponse:c7}});var ltt=H((Gli,ctt)=>{"use strict";f();var{kConnected:stt,kSize:att}=Ia(),JEe=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[stt]===0&&this.value[att]===0?void 0:this.value}},XEe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[stt]===0&&e[att]===0&&this.finalizer(r)})}unregister(e){}};ctt.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:JEe,FinalizationRegistry:XEe}):{WeakRef,FinalizationRegistry}}});var _B=H((Yli,Itt)=>{"use strict";f();var{extractBody:DZt,mixinBody:BZt,cloneBody:NZt,bodyUnusable:utt}=cB(),{Headers:Ctt,fill:LZt,HeadersList:nee,setHeadersGuard:exe,getHeadersGuard:MZt,setHeadersList:vtt,getHeadersList:dtt}=kR(),{FinalizationRegistry:FZt}=ltt()(),tee=Mi(),ftt=require("node:util"),{isValidHTTPToken:OZt,sameOrigin:ptt,environmentSettingsObject:eee}=kp(),{forbiddenMethodsSet:QZt,corsSafeListedMethodsSet:UZt,referrerPolicy:qZt,requestRedirect:HZt,requestMode:$Zt,requestCredentials:WZt,requestCache:jZt,requestDuplex:GZt}=RO(),{kEnumerableProperty:nl,normalizedMethodRecordsBase:VZt,normalizedMethodRecords:zZt}=tee,{kHeaders:Lp,kSignal:ree,kState:ra,kDispatcher:ZEe}=xT(),{webidl:Pn}=Uu(),{URLSerializer:YZt}=g0(),{kConstruct:iee}=Ia(),KZt=require("node:assert"),{getMaxListeners:mtt,setMaxListeners:htt,getEventListeners:JZt,defaultMaxListeners:gtt}=require("node:events"),XZt=Symbol("abortController"),Ett=new FZt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),oee=new WeakMap;function Att(t){return e;function e(){let r=t.deref();if(r!==void 0){Ett.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=oee.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}oee.delete(r.signal)}}}}s(Att,"buildAbort");var ytt=!1,BT=class t{static{s(this,"Request")}constructor(e,r={}){if(Pn.util.markAsUncloneable(this),e===iee)return;let n="Request constructor";Pn.argumentLengthCheck(arguments,1,n),e=Pn.converters.RequestInfo(e,n,"input"),r=Pn.converters.RequestInit(r,n,"init");let i=null,o=null,a=eee.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[ZEe]=r.dispatcher;let x;try{x=new URL(e,a)}catch(I){throw new TypeError("Failed to parse URL from "+e,{cause:I})}if(x.username||x.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=see({urlList:[x]}),o="cors"}else this[ZEe]=r.dispatcher||e[ZEe],KZt(e instanceof t),i=e[ra],c=e[ree];let l=eee.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&ptt(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=see({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:eee.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(r).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let x=r.referrer;if(x==="")i.referrer="no-referrer";else{let I;try{I=new URL(x,a)}catch(S){throw new TypeError(`Referrer "${x}" is not a valid URL.`,{cause:S})}I.protocol==="about:"&&I.hostname==="client"||l&&!ptt(I,eee.settingsObject.baseUrl)?i.referrer="client":i.referrer=I}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw Pn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let x=r.method,I=zZt[x];if(I!==void 0)i.method=I;else{if(!OZt(x))throw new TypeError(`'${x}' is not a valid HTTP method.`);let S=x.toUpperCase();if(QZt.has(S))throw new TypeError(`'${x}' HTTP method is unsupported.`);x=VZt[S]??x,i.method=x}!ytt&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),ytt=!0)}r.signal!==void 0&&(c=r.signal),this[ra]=i;let m=new AbortController;if(this[ree]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[XZt]=m;let x=new WeakRef(m),I=Att(x);try{(typeof mtt=="function"&&mtt(c)===gtt||JZt(c,"abort").length>=gtt)&&htt(1500,c)}catch{}tee.addAbortListener(c,I),Ett.register(m,{signal:c,abort:I},I)}}if(this[Lp]=new Ctt(iee),vtt(this[Lp],i.headersList),exe(this[Lp],"request"),p==="no-cors"){if(!UZt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);exe(this[Lp],"request-no-cors")}if(d){let x=dtt(this[Lp]),I=r.headers!==void 0?r.headers:new nee(x);if(x.clear(),I instanceof nee){for(let{name:S,value:R}of I.rawValues())x.append(S,R,!1);x.cookies=I.cookies}else LZt(this[Lp],I)}let h=e instanceof t?e[ra].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[x,I]=DZt(r.body,i.keepalive);g=x,I&&!dtt(this[Lp]).contains("content-type",!0)&&this[Lp].append("content-type",I)}let A=g??h;if(A!=null&&A.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let y=A;if(g==null&&h!=null){if(utt(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let x=new TransformStream;h.stream.pipeThrough(x),y={source:h.source,length:h.length,stream:x.readable}}this[ra].body=y}get method(){return Pn.brandCheck(this,t),this[ra].method}get url(){return Pn.brandCheck(this,t),YZt(this[ra].url)}get headers(){return Pn.brandCheck(this,t),this[Lp]}get destination(){return Pn.brandCheck(this,t),this[ra].destination}get referrer(){return Pn.brandCheck(this,t),this[ra].referrer==="no-referrer"?"":this[ra].referrer==="client"?"about:client":this[ra].referrer.toString()}get referrerPolicy(){return Pn.brandCheck(this,t),this[ra].referrerPolicy}get mode(){return Pn.brandCheck(this,t),this[ra].mode}get credentials(){return this[ra].credentials}get cache(){return Pn.brandCheck(this,t),this[ra].cache}get redirect(){return Pn.brandCheck(this,t),this[ra].redirect}get integrity(){return Pn.brandCheck(this,t),this[ra].integrity}get keepalive(){return Pn.brandCheck(this,t),this[ra].keepalive}get isReloadNavigation(){return Pn.brandCheck(this,t),this[ra].reloadNavigation}get isHistoryNavigation(){return Pn.brandCheck(this,t),this[ra].historyNavigation}get signal(){return Pn.brandCheck(this,t),this[ree]}get body(){return Pn.brandCheck(this,t),this[ra].body?this[ra].body.stream:null}get bodyUsed(){return Pn.brandCheck(this,t),!!this[ra].body&&tee.isDisturbed(this[ra].body.stream)}get duplex(){return Pn.brandCheck(this,t),"half"}clone(){if(Pn.brandCheck(this,t),utt(this))throw new TypeError("unusable");let e=xtt(this[ra]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=oee.get(this.signal);n===void 0&&(n=new Set,oee.set(this.signal,n));let i=new WeakRef(r);n.add(i),tee.addAbortListener(r.signal,Att(i))}return btt(e,r.signal,MZt(this[Lp]))}[ftt.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${ftt.formatWithOptions(r,n)}`}};BZt(BT);function see(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new nee(t.headersList):new nee}}s(see,"makeRequest");function xtt(t){let e=see({...t,body:null});return t.body!=null&&(e.body=NZt(e,t.body)),e}s(xtt,"cloneRequest");function btt(t,e,r){let n=new BT(iee);return n[ra]=t,n[ree]=e,n[Lp]=new Ctt(iee),vtt(n[Lp],t.headersList),exe(n[Lp],r),n}s(btt,"fromInnerRequest");Object.defineProperties(BT.prototype,{method:nl,url:nl,headers:nl,redirect:nl,clone:nl,signal:nl,duplex:nl,destination:nl,body:nl,bodyUsed:nl,isHistoryNavigation:nl,isReloadNavigation:nl,keepalive:nl,integrity:nl,cache:nl,credentials:nl,attribute:nl,referrerPolicy:nl,referrer:nl,mode:nl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Pn.converters.Request=Pn.interfaceConverter(BT);Pn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Pn.converters.USVString(t,e,r):t instanceof BT?Pn.converters.Request(t,e,r):Pn.converters.USVString(t,e,r)};Pn.converters.AbortSignal=Pn.interfaceConverter(AbortSignal);Pn.converters.RequestInit=Pn.dictionaryConverter([{key:"method",converter:Pn.converters.ByteString},{key:"headers",converter:Pn.converters.HeadersInit},{key:"body",converter:Pn.nullableConverter(Pn.converters.BodyInit)},{key:"referrer",converter:Pn.converters.USVString},{key:"referrerPolicy",converter:Pn.converters.DOMString,allowedValues:qZt},{key:"mode",converter:Pn.converters.DOMString,allowedValues:$Zt},{key:"credentials",converter:Pn.converters.DOMString,allowedValues:WZt},{key:"cache",converter:Pn.converters.DOMString,allowedValues:jZt},{key:"redirect",converter:Pn.converters.DOMString,allowedValues:HZt},{key:"integrity",converter:Pn.converters.DOMString},{key:"keepalive",converter:Pn.converters.boolean},{key:"signal",converter:Pn.nullableConverter(t=>Pn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Pn.converters.any},{key:"duplex",converter:Pn.converters.DOMString,allowedValues:GZt},{key:"dispatcher",converter:Pn.converters.any}]);Itt.exports={Request:BT,makeRequest:see,fromInnerRequest:btt,cloneRequest:xtt}});var d7=H((Xli,Qtt)=>{"use strict";f();var{makeNetworkError:as,makeAppropriateNetworkError:aee,filterResponse:txe,makeResponse:cee,fromInnerResponse:ZZt}=l7(),{HeadersList:Ttt}=kR(),{Request:eer,cloneRequest:ter}=_B(),NT=require("node:zlib"),{bytesMatch:rer,makePolicyContainer:ner,clonePolicyContainer:ier,requestBadPort:oer,TAOCheck:ser,appendRequestOriginHeader:aer,responseLocationURL:cer,requestCurrentURL:OC,setRequestReferrerPolicyOnRedirect:ler,tryUpgradeRequestToAPotentiallyTrustworthyURL:uer,createOpaqueTimingInfo:sxe,appendFetchMetadata:der,corsCheck:fer,crossOriginResourcePolicyCheck:per,determineRequestsReferrer:mer,coarsenedSharedCurrentTime:u7,createDeferredPromise:her,isBlobLike:ger,sameOrigin:oxe,isCancelled:DR,isAborted:wtt,isErrorLike:Aer,fullyReadBody:yer,readableStreamClose:Cer,isomorphicEncode:lee,urlIsLocal:ver,urlIsHttpHttpsScheme:axe,urlHasHttpsScheme:Eer,clampAndCoarsenConnectionTimingInfo:xer,simpleRangeHeaderValue:ber,buildContentRange:Ier,createInflate:Ter,extractMimeType:wer}=kp(),{kState:ktt,kDispatcher:Ser}=xT(),BR=require("node:assert"),{safelyExtractBody:cxe,extractBody:Stt}=cB(),{redirectStatusSet:Ptt,nullBodyStatus:Dtt,safeMethodsSet:_er,requestBodyHeader:Rer,subresourceSet:ker}=RO(),Per=require("node:events"),{Readable:Der,pipeline:Ber,finished:Ner}=require("node:stream"),{addAbortListener:Ler,isErrored:Mer,isReadable:uee,bufferToLowerCasedHeaderName:_tt}=Mi(),{dataURLProcessor:Fer,serializeAMimeType:Oer,minimizeSupportedMimeType:Qer}=g0(),{getGlobalDispatcher:Uer}=VZ(),{webidl:qer}=Uu(),{STATUS_CODES:Her}=require("node:http"),$er=["GET","HEAD"],Wer=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",rxe,dee=class extends Per{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function jer(t){Btt(t,"fetch")}s(jer,"handleFetchDone");function Ger(t,e=void 0){qer.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=her(),n;try{n=new eer(t,e)}catch(d){return r.reject(d),r.promise}let i=n[ktt];if(n.signal.aborted)return nxe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return Ler(n.signal,()=>{c=!0,BR(l!=null),l.abort(n.signal.reason);let d=a?.deref();nxe(r,i,d,n.signal.reason)}),l=Ltt({request:i,processResponseEndOfBody:jer,processResponse:s(d=>{if(!c){if(d.aborted){nxe(r,i,a,l.serializedAbortReason);return}if(d.type==="error"){r.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(ZZt(d,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[Ser]}),r.promise}s(Ger,"fetch");function Btt(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;axe(r)&&n!==null&&(t.timingAllowPassed||(n=sxe({startTime:n.startTime}),i=""),n.endTime=u7(),t.timingInfo=n,Ntt(n,r.href,e,globalThis,i))}s(Btt,"finalizeAndReportTiming");var Ntt=performance.markResourceTiming;function nxe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&uee(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[ktt];i.body!=null&&uee(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(nxe,"abortFetch");function Ltt({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=Uer()}){BR(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=u7(u),p=sxe({startTime:d}),m={controller:new dee(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return BR(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=ier(t.client.policyContainer):t.policyContainer=ner()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,ker.has(t.destination),Mtt(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(Ltt,"fetching");async function Mtt(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!ver(OC(r))&&(n=as("local URLs only")),uer(r),oer(r)==="blocked"&&(n=as("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=mer(r)),n===null&&(n=await(async()=>{let o=OC(r);return oxe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await Rtt(t)):r.mode==="same-origin"?as('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?as('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await Rtt(t)):axe(OC(r))?(r.responseTainting="cors",await Ftt(t)):as("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=txe(n,"basic"):r.responseTainting==="cors"?n=txe(n,"cors"):r.responseTainting==="opaque"?n=txe(n,"opaque"):BR(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=as()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Dtt.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>ixe(t,as(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!rer(c,r.integrity)){o("integrity mismatch");return}n.body=cxe(c)[0],ixe(t,n)},"processBody");await yer(n.body,a,o)}else ixe(t,n)}s(Mtt,"mainFetch");function Rtt(t){if(DR(t)&&t.request.redirectCount===0)return Promise.resolve(aee(t));let{request:e}=t,{protocol:r}=OC(e);switch(r){case"about:":return Promise.resolve(as("about scheme is not supported"));case"blob:":{rxe||(rxe=require("node:buffer").resolveObjectURL);let n=OC(e);if(n.search.length!==0)return Promise.resolve(as("NetworkError when attempting to fetch resource."));let i=rxe(n.toString());if(e.method!=="GET"||!ger(i))return Promise.resolve(as("invalid method"));let o=cee(),a=i.size,c=lee(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=ber(u,!0);if(d==="failure")return Promise.resolve(as("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(as("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=Stt(h);o.body=g[0];let A=lee(`${h.size}`),y=Ier(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",A,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",y,!0)}else{let u=Stt(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=OC(e),i=Fer(n);if(i==="failure")return Promise.resolve(as("failed to fetch the data URL"));let o=Oer(i.mimeType);return Promise.resolve(cee({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:cxe(i.body)[0]}))}case"file:":return Promise.resolve(as("not implemented... yet..."));case"http:":case"https:":return Ftt(t).catch(n=>as(n));default:return Promise.resolve(as("unknown scheme"))}}s(Rtt,"schemeFetch");function Ver(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Ver,"finalizeResponse");function ixe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=sxe(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=wer(e.headersList);d!=="failure"&&(l.contentType=Qer(d))}t.request.initiatorType!=null&&Ntt(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():Ner(i.body.stream,()=>{n()})}s(ixe,"fetchFinale");async function Ftt(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await Ott(t),e.responseTainting==="cors"&&fer(e,r)==="failure")return as("cors failure");ser(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&per(e.origin,e.client,e.destination,n)==="blocked"?as("blocked"):(Ptt.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=as("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await zer(t,r):BR(!1)),r.timingInfo=i,r)}s(Ftt,"httpFetch");function zer(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=cer(n,OC(r).hash),i==null)return e}catch(a){return Promise.resolve(as(a))}if(!axe(i))return Promise.resolve(as("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(as("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!oxe(r,i))return Promise.resolve(as('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(as('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(as());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!$er.includes(r.method)){r.method="GET",r.body=null;for(let a of Rer)r.headersList.delete(a)}oxe(OC(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(BR(r.body.source!=null),r.body=cxe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=u7(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),ler(r,n),Mtt(t,!0)}s(zer,"httpRedirectFetch");async function Ott(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=ter(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=lee(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",lee(o.referrer.href),!0),aer(o),der(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Wer),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(Eer(OC(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return as("only if cached");let m=await Yer(i,u,r);!_er.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?as():DR(t)?aee(t):as("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(DR(t))return aee(t);t.controller.connection.destroy(),a=await Ott(t,e,!0)}return a}s(Ott,"httpNetworkOrCacheFetch");async function Yer(t,e=!1,r=!1){BR(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,A=!0){this.destroyed||(this.destroyed=!0,A&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(x){DR(t)||(yield x,t.processRequestBodyChunkLength?.(x.byteLength))},"processBodyChunk"),A=s(()=>{DR(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),y=s(x=>{DR(t)||(x.name==="AbortError"?t.controller.abort():t.controller.terminate(x))},"processBodyError");l=async function*(){try{for await(let x of n.body.stream)yield*g(x);A()}catch(x){y(x)}}()}try{let{body:g,status:A,statusText:y,headersList:x,socket:I}=await h({body:l});if(I)i=cee({status:A,statusText:y,headersList:x,socket:I});else{let S=g[Symbol.asyncIterator]();t.controller.next=()=>S.next(),i=cee({status:A,statusText:y,headersList:x})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),aee(t,g)):as(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{DR(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,A;try{let{done:x,value:I}=await t.controller.next();if(wtt(t))break;g=x?void 0:I}catch(x){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=x,A=!0)}if(g===void 0){Cer(t.controller.controller),Ver(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,A){t.controller.terminate(g);return}let y=new Uint8Array(g);if(y.byteLength&&t.controller.controller.enqueue(y),Mer(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){wtt(t)?(i.aborted=!0,uee(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):uee(p)&&t.controller.controller.error(new TypeError("terminated",{cause:Aer(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let A=OC(n),y=t.controller.dispatcher;return new Promise((x,I)=>y.dispatch({path:A.pathname+A.search,origin:A.origin,method:n.method,body:y.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(S){let{connection:R}=t.controller;o.finalConnectionTimingInfo=xer(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),R.destroyed?S(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",S),this.abort=R.abort=S),o.finalNetworkRequestStartTime=u7(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=u7(t.crossOriginIsolatedCapability)},onHeaders(S,R,B,M){if(S<200)return;let O=[],K="",V=new Ttt;for(let J=0;J<R.length;J+=2)V.append(_tt(R[J]),R[J+1].toString("latin1"),!0);let z=V.get("content-encoding",!0);z&&(O=z.toLowerCase().split(",").map(J=>J.trim())),K=V.get("location",!0),this.body=new Der({read:B});let Q=[],U=K&&n.redirect==="follow"&&Ptt.has(S);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Dtt.includes(S)&&!U)for(let J=O.length-1;J>=0;--J){let j=O[J];if(j==="x-gzip"||j==="gzip")Q.push(NT.createGunzip({flush:NT.constants.Z_SYNC_FLUSH,finishFlush:NT.constants.Z_SYNC_FLUSH}));else if(j==="deflate")Q.push(Ter({flush:NT.constants.Z_SYNC_FLUSH,finishFlush:NT.constants.Z_SYNC_FLUSH}));else if(j==="br")Q.push(NT.createBrotliDecompress({flush:NT.constants.BROTLI_OPERATION_FLUSH,finishFlush:NT.constants.BROTLI_OPERATION_FLUSH}));else{Q.length=0;break}}let Z=this.onError.bind(this);return x({status:S,statusText:M,headersList:V,body:Q.length?Ber(this.body,...Q,J=>{J&&this.onError(J)}).on("error",Z):this.body.on("error",Z)}),!0},onData(S){if(t.controller.dump)return;let R=S;return o.encodedBodySize+=R.byteLength,this.body.push(R)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(S){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(S),t.controller.terminate(S),I(S)},onUpgrade(S,R,B){if(S!==101)return;let M=new Ttt;for(let O=0;O<R.length;O+=2)M.append(_tt(R[O]),R[O+1].toString("latin1"),!0);return x({status:S,statusText:Her[S],headersList:M,socket:B}),!0}}))}s(h,"dispatch")}s(Yer,"httpNetworkFetch");Qtt.exports={fetch:Ger,Fetch:dee,fetching:Ltt,finalizeAndReportTiming:Btt}});var lxe=H((tui,Utt)=>{"use strict";f();Utt.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Htt=H((nui,qtt)=>{"use strict";f();var{webidl:Mp}=Uu(),fee=Symbol("ProgressEvent state"),uxe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=Mp.converters.DOMString(e,"ProgressEvent constructor","type"),r=Mp.converters.ProgressEventInit(r??{}),super(e,r),this[fee]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Mp.brandCheck(this,t),this[fee].lengthComputable}get loaded(){return Mp.brandCheck(this,t),this[fee].loaded}get total(){return Mp.brandCheck(this,t),this[fee].total}};Mp.converters.ProgressEventInit=Mp.dictionaryConverter([{key:"lengthComputable",converter:Mp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:Mp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:Mp.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:Mp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Mp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Mp.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);qtt.exports={ProgressEvent:uxe}});var Wtt=H((sui,$tt)=>{"use strict";f();function Ker(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Ker,"getEncoding");$tt.exports={getEncoding:Ker}});var Xtt=H((lui,Jtt)=>{"use strict";f();var{kState:RB,kError:dxe,kResult:jtt,kAborted:f7,kLastProgressEventFired:fxe}=lxe(),{ProgressEvent:Jer}=Htt(),{getEncoding:Gtt}=Wtt(),{serializeAMimeType:Xer,parseMIMEType:Vtt}=g0(),{types:Zer}=require("node:util"),{StringDecoder:ztt}=require("string_decoder"),{btoa:Ytt}=require("node:buffer"),etr={enumerable:!0,writable:!1,configurable:!1};function ttr(t,e,r,n){if(t[RB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[RB]="loading",t[jtt]=null,t[dxe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[f7];)try{let{done:u,value:d}=await c;if(l&&!t[f7]&&queueMicrotask(()=>{LT("loadstart",t)}),l=!1,!u&&Zer.isUint8Array(d))a.push(d),(t[fxe]===void 0||Date.now()-t[fxe]>=50)&&!t[f7]&&(t[fxe]=Date.now(),queueMicrotask(()=>{LT("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[RB]="done";try{let p=rtr(a,r,e.type,n);if(t[f7])return;t[jtt]=p,LT("load",t)}catch(p){t[dxe]=p,LT("error",t)}t[RB]!=="loading"&&LT("loadend",t)});break}}catch(u){if(t[f7])return;queueMicrotask(()=>{t[RB]="done",t[dxe]=u,LT("error",t),t[RB]!=="loading"&&LT("loadend",t)});break}})()}s(ttr,"readOperation");function LT(t,e){let r=new Jer(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(LT,"fireAProgressEvent");function rtr(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=Vtt(r||"application/octet-stream");o!=="failure"&&(i+=Xer(o)),i+=";base64,";let a=new ztt("latin1");for(let c of t)i+=Ytt(a.write(c));return i+=Ytt(a.end()),i}case"Text":{let i="failure";if(n&&(i=Gtt(n)),i==="failure"&&r){let o=Vtt(r);o!=="failure"&&(i=Gtt(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),ntr(t,i)}case"ArrayBuffer":return Ktt(t).buffer;case"BinaryString":{let i="",o=new ztt("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(rtr,"packageData");function ntr(t,e){let r=Ktt(t),n=itr(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(ntr,"decode");function itr(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(itr,"BOMSniffing");function Ktt(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(Ktt,"combineByteSequences");Jtt.exports={staticPropertyDescriptors:etr,readOperation:ttr,fireAProgressEvent:LT}});var rrt=H((fui,trt)=>{"use strict";f();var{staticPropertyDescriptors:kB,readOperation:pee,fireAProgressEvent:Ztt}=Xtt(),{kState:NR,kError:ert,kResult:mee,kEvents:jo,kAborted:otr}=lxe(),{webidl:gs}=Uu(),{kEnumerableProperty:C0}=Mi(),IA=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[NR]="empty",this[mee]=null,this[ert]=null,this[jo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){gs.brandCheck(this,t),gs.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=gs.converters.Blob(e,{strict:!1}),pee(this,e,"ArrayBuffer")}readAsBinaryString(e){gs.brandCheck(this,t),gs.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=gs.converters.Blob(e,{strict:!1}),pee(this,e,"BinaryString")}readAsText(e,r=void 0){gs.brandCheck(this,t),gs.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=gs.converters.Blob(e,{strict:!1}),r!==void 0&&(r=gs.converters.DOMString(r,"FileReader.readAsText","encoding")),pee(this,e,"Text",r)}readAsDataURL(e){gs.brandCheck(this,t),gs.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=gs.converters.Blob(e,{strict:!1}),pee(this,e,"DataURL")}abort(){if(this[NR]==="empty"||this[NR]==="done"){this[mee]=null;return}this[NR]==="loading"&&(this[NR]="done",this[mee]=null),this[otr]=!0,Ztt("abort",this),this[NR]!=="loading"&&Ztt("loadend",this)}get readyState(){switch(gs.brandCheck(this,t),this[NR]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return gs.brandCheck(this,t),this[mee]}get error(){return gs.brandCheck(this,t),this[ert]}get onloadend(){return gs.brandCheck(this,t),this[jo].loadend}set onloadend(e){gs.brandCheck(this,t),this[jo].loadend&&this.removeEventListener("loadend",this[jo].loadend),typeof e=="function"?(this[jo].loadend=e,this.addEventListener("loadend",e)):this[jo].loadend=null}get onerror(){return gs.brandCheck(this,t),this[jo].error}set onerror(e){gs.brandCheck(this,t),this[jo].error&&this.removeEventListener("error",this[jo].error),typeof e=="function"?(this[jo].error=e,this.addEventListener("error",e)):this[jo].error=null}get onloadstart(){return gs.brandCheck(this,t),this[jo].loadstart}set onloadstart(e){gs.brandCheck(this,t),this[jo].loadstart&&this.removeEventListener("loadstart",this[jo].loadstart),typeof e=="function"?(this[jo].loadstart=e,this.addEventListener("loadstart",e)):this[jo].loadstart=null}get onprogress(){return gs.brandCheck(this,t),this[jo].progress}set onprogress(e){gs.brandCheck(this,t),this[jo].progress&&this.removeEventListener("progress",this[jo].progress),typeof e=="function"?(this[jo].progress=e,this.addEventListener("progress",e)):this[jo].progress=null}get onload(){return gs.brandCheck(this,t),this[jo].load}set onload(e){gs.brandCheck(this,t),this[jo].load&&this.removeEventListener("load",this[jo].load),typeof e=="function"?(this[jo].load=e,this.addEventListener("load",e)):this[jo].load=null}get onabort(){return gs.brandCheck(this,t),this[jo].abort}set onabort(e){gs.brandCheck(this,t),this[jo].abort&&this.removeEventListener("abort",this[jo].abort),typeof e=="function"?(this[jo].abort=e,this.addEventListener("abort",e)):this[jo].abort=null}};IA.EMPTY=IA.prototype.EMPTY=0;IA.LOADING=IA.prototype.LOADING=1;IA.DONE=IA.prototype.DONE=2;Object.defineProperties(IA.prototype,{EMPTY:kB,LOADING:kB,DONE:kB,readAsArrayBuffer:C0,readAsBinaryString:C0,readAsText:C0,readAsDataURL:C0,abort:C0,readyState:C0,result:C0,error:C0,onloadstart:C0,onprogress:C0,onload:C0,onabort:C0,onerror:C0,onloadend:C0,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(IA,{EMPTY:kB,LOADING:kB,DONE:kB});trt.exports={FileReader:IA}});var hee=H((hui,nrt)=>{"use strict";f();nrt.exports={kConstruct:Ia().kConstruct}});var srt=H((Aui,ort)=>{"use strict";f();var str=require("node:assert"),{URLSerializer:irt}=g0(),{isValidHeaderName:atr}=kp();function ctr(t,e,r=!1){let n=irt(t,r),i=irt(e,r);return n===i}s(ctr,"urlEquals");function ltr(t){str(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),atr(r)&&e.push(r);return e}s(ltr,"getFieldValues");ort.exports={urlEquals:ctr,getFieldValues:ltr}});var lrt=H((vui,crt)=>{"use strict";f();var{kConstruct:utr}=hee(),{urlEquals:dtr,getFieldValues:pxe}=srt(),{kEnumerableProperty:LR,isDisturbed:ftr}=Mi(),{webidl:mn}=Uu(),{Response:ptr,cloneResponse:mtr,fromInnerResponse:htr}=l7(),{Request:bE,fromInnerRequest:gtr}=_B(),{kState:TA}=xT(),{fetching:Atr}=d7(),{urlIsHttpHttpsScheme:gee,createDeferredPromise:PB,readAllBytes:ytr}=kp(),mxe=require("node:assert"),Aee=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==utr&&mn.illegalConstructor(),mn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){mn.brandCheck(this,t);let n="Cache.match";mn.argumentLengthCheck(arguments,1,n),e=mn.converters.RequestInfo(e,n,"request"),r=mn.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){mn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=mn.converters.RequestInfo(e,n,"request")),r=mn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){mn.brandCheck(this,t);let r="Cache.add";mn.argumentLengthCheck(arguments,1,r),e=mn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){mn.brandCheck(this,t);let r="Cache.addAll";mn.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw mn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=mn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[TA];if(!gee(h.url)||h.method!=="GET")throw mn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new bE(m)[TA];if(!gee(h.url))throw mn.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=PB();o.push(Atr({request:h,processResponse(A){if(A.type==="error"||A.status===206||A.status<200||A.status>299)g.reject(mn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(A.headersList.contains("vary")){let y=pxe(A.headersList.get("vary"));for(let x of y)if(x==="*"){g.reject(mn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let I of o)I.abort();return}}},processResponseEndOfBody(A){if(A.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(A)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let d=PB(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,r){mn.brandCheck(this,t);let n="Cache.put";mn.argumentLengthCheck(arguments,2,n),e=mn.converters.RequestInfo(e,n,"request"),r=mn.converters.Response(r,n,"response");let i=null;if(e instanceof bE?i=e[TA]:i=new bE(e)[TA],!gee(i.url)||i.method!=="GET")throw mn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[TA];if(o.status===206)throw mn.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=pxe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw mn.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(ftr(o.body.stream)||o.body.stream.locked))throw mn.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=mtr(o),c=PB();if(o.body!=null){let g=o.body.stream.getReader();ytr(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let d=await c.promise;a.body!=null&&(a.body.source=d);let p=PB(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){mn.brandCheck(this,t);let n="Cache.delete";mn.argumentLengthCheck(arguments,1,n),e=mn.converters.RequestInfo(e,n,"request"),r=mn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof bE){if(i=e[TA],i.method!=="GET"&&!r.ignoreMethod)return!1}else mxe(typeof e=="string"),i=new bE(e)[TA];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=PB(),l=null,u;try{u=this.#t(o)}catch(d){l=d}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){mn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=mn.converters.RequestInfo(e,n,"request")),r=mn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof bE){if(i=e[TA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new bE(e)[TA]);let o=PB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=gtr(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);mxe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!gee(l.url))throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw mn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let d=r.indexOf(u);mxe(d!==-1),r.splice(d,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!dtr(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=pxe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),d=e.headersList.get(l);if(u!==d)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof bE){if(i=e[TA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new bE(e)[TA]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=htr(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(Aee.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:LR,matchAll:LR,add:LR,addAll:LR,put:LR,delete:LR,keys:LR});var art=[{key:"ignoreSearch",converter:mn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:mn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:mn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];mn.converters.CacheQueryOptions=mn.dictionaryConverter(art);mn.converters.MultiCacheQueryOptions=mn.dictionaryConverter([...art,{key:"cacheName",converter:mn.converters.DOMString}]);mn.converters.Response=mn.interfaceConverter(ptr);mn.converters["sequence<RequestInfo>"]=mn.sequenceConverter(mn.converters.RequestInfo);crt.exports={Cache:Aee}});var drt=H((bui,urt)=>{"use strict";f();var{kConstruct:p7}=hee(),{Cache:yee}=lrt(),{webidl:_d}=Uu(),{kEnumerableProperty:m7}=Mi(),Cee=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==p7&&_d.illegalConstructor(),_d.util.markAsUncloneable(this)}async match(e,r={}){if(_d.brandCheck(this,t),_d.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=_d.converters.RequestInfo(e),r=_d.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new yee(p7,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new yee(p7,n).match(e,r);if(o!==void 0)return o}}async has(e){_d.brandCheck(this,t);let r="CacheStorage.has";return _d.argumentLengthCheck(arguments,1,r),e=_d.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){_d.brandCheck(this,t);let r="CacheStorage.open";if(_d.argumentLengthCheck(arguments,1,r),e=_d.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new yee(p7,i)}let n=[];return this.#e.set(e,n),new yee(p7,n)}async delete(e){_d.brandCheck(this,t);let r="CacheStorage.delete";return _d.argumentLengthCheck(arguments,1,r),e=_d.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return _d.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(Cee.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:m7,has:m7,open:m7,delete:m7,keys:m7});urt.exports={CacheStorage:Cee}});var prt=H((wui,frt)=>{"use strict";f();frt.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var hxe=H((_ui,yrt)=>{"use strict";f();function Ctr(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(Ctr,"isCTLExcludingHtab");function mrt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(mrt,"validateCookieName");function hrt(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(hrt,"validateCookieValue");function grt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(grt,"validateCookiePath");function vtr(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(vtr,"validateCookieDomain");var Etr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xtr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vee=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function Art(t){return typeof t=="number"&&(t=new Date(t)),`${Etr[t.getUTCDay()]}, ${vee[t.getUTCDate()]} ${xtr[t.getUTCMonth()]} ${t.getUTCFullYear()} ${vee[t.getUTCHours()]}:${vee[t.getUTCMinutes()]}:${vee[t.getUTCSeconds()]} GMT`}s(Art,"toIMFDate");function btr(t){if(t<0)throw new Error("Invalid cookie max-age")}s(btr,"validateCookieMaxAge");function Itr(t){if(t.name.length===0)return null;mrt(t.name),hrt(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(btr(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(vtr(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(grt(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${Art(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(Itr,"stringify");yrt.exports={isCTLExcludingHtab:Ctr,validateCookieName:mrt,validateCookiePath:grt,validateCookieValue:hrt,toIMFDate:Art,stringify:Itr}});var vrt=H((Pui,Crt)=>{"use strict";f();var{maxNameValuePairSize:Ttr,maxAttributeValueSize:wtr}=prt(),{isCTLExcludingHtab:Str}=hxe(),{collectASequenceOfCodePointsFast:Eee}=g0(),_tr=require("node:assert");function Rtr(t){if(Str(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=Eee(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=Eee("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>Ttr?null:{name:n,value:i,...DB(r)}}s(Rtr,"parseSetCookie");function DB(t,e={}){if(t.length===0)return e;_tr(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=Eee(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=Eee("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>wtr)return DB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return DB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return DB(t,e)}s(DB,"parseUnparsedAttributes");Crt.exports={parseSetCookie:Rtr,parseUnparsedAttributes:DB}});var brt=H((Nui,xrt)=>{"use strict";f();var{parseSetCookie:ktr}=vrt(),{stringify:Ptr}=hxe(),{webidl:lo}=Uu(),{Headers:xee}=kR();function Dtr(t){lo.argumentLengthCheck(arguments,1,"getCookies"),lo.brandCheck(t,xee,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(Dtr,"getCookies");function Btr(t,e,r){lo.brandCheck(t,xee,{strict:!1});let n="deleteCookie";lo.argumentLengthCheck(arguments,2,n),e=lo.converters.DOMString(e,n,"name"),r=lo.converters.DeleteCookieAttributes(r),Ert(t,{name:e,value:"",expires:new Date(0),...r})}s(Btr,"deleteCookie");function Ntr(t){lo.argumentLengthCheck(arguments,1,"getSetCookies"),lo.brandCheck(t,xee,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>ktr(r)):[]}s(Ntr,"getSetCookies");function Ert(t,e){lo.argumentLengthCheck(arguments,2,"setCookie"),lo.brandCheck(t,xee,{strict:!1}),e=lo.converters.Cookie(e);let r=Ptr(e);r&&t.append("Set-Cookie",r)}s(Ert,"setCookie");lo.converters.DeleteCookieAttributes=lo.dictionaryConverter([{converter:lo.nullableConverter(lo.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);lo.converters.Cookie=lo.dictionaryConverter([{converter:lo.converters.DOMString,key:"name"},{converter:lo.converters.DOMString,key:"value"},{converter:lo.nullableConverter(t=>typeof t=="number"?lo.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:lo.nullableConverter(lo.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:lo.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:lo.sequenceConverter(lo.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);xrt.exports={getCookies:Dtr,deleteCookie:Btr,getSetCookies:Ntr,setCookie:Ert}});var NB=H((Fui,Trt)=>{"use strict";f();var{webidl:un}=Uu(),{kEnumerableProperty:v0}=Mi(),{kConstruct:Irt}=Ia(),{MessagePort:Ltr}=require("node:worker_threads"),BB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===Irt){super(arguments[1],arguments[2]),un.util.markAsUncloneable(this);return}let n="MessageEvent constructor";un.argumentLengthCheck(arguments,1,n),e=un.converters.DOMString(e,n,"type"),r=un.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,un.util.markAsUncloneable(this)}get data(){return un.brandCheck(this,t),this.#e.data}get origin(){return un.brandCheck(this,t),this.#e.origin}get lastEventId(){return un.brandCheck(this,t),this.#e.lastEventId}get source(){return un.brandCheck(this,t),this.#e.source}get ports(){return un.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return un.brandCheck(this,t),un.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(Irt,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Mtr}=BB;delete BB.createFastMessageEvent;var bee=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";un.argumentLengthCheck(arguments,1,n),e=un.converters.DOMString(e,n,"type"),r=un.converters.CloseEventInit(r),super(e,r),this.#e=r,un.util.markAsUncloneable(this)}get wasClean(){return un.brandCheck(this,t),this.#e.wasClean}get code(){return un.brandCheck(this,t),this.#e.code}get reason(){return un.brandCheck(this,t),this.#e.reason}},Iee=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";un.argumentLengthCheck(arguments,1,n),super(e,r),un.util.markAsUncloneable(this),e=un.converters.DOMString(e,n,"type"),r=un.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return un.brandCheck(this,t),this.#e.message}get filename(){return un.brandCheck(this,t),this.#e.filename}get lineno(){return un.brandCheck(this,t),this.#e.lineno}get colno(){return un.brandCheck(this,t),this.#e.colno}get error(){return un.brandCheck(this,t),this.#e.error}};Object.defineProperties(BB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:v0,origin:v0,lastEventId:v0,source:v0,ports:v0,initMessageEvent:v0});Object.defineProperties(bee.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:v0,code:v0,wasClean:v0});Object.defineProperties(Iee.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:v0,filename:v0,lineno:v0,colno:v0,error:v0});un.converters.MessagePort=un.interfaceConverter(Ltr);un.converters["sequence<MessagePort>"]=un.sequenceConverter(un.converters.MessagePort);var gxe=[{key:"bubbles",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];un.converters.MessageEventInit=un.dictionaryConverter([...gxe,{key:"data",converter:un.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:un.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:un.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:un.nullableConverter(un.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:un.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);un.converters.CloseEventInit=un.dictionaryConverter([...gxe,{key:"wasClean",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:un.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:un.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);un.converters.ErrorEventInit=un.dictionaryConverter([...gxe,{key:"message",converter:un.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:un.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:un.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:un.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:un.converters.any}]);Trt.exports={MessageEvent:BB,CloseEvent:bee,ErrorEvent:Iee,createFastMessageEvent:Mtr}});var MR=H((Uui,wrt)=>{"use strict";f();var Ftr="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Otr={enumerable:!0,writable:!1,configurable:!1},Qtr={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Utr={NOT_SENT:0,PROCESSING:1,SENT:2},qtr={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},Htr=2**16-1,$tr={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},Wtr=Buffer.allocUnsafe(0),jtr={string:1,typedArray:2,arrayBuffer:3,blob:4};wrt.exports={uid:Ftr,sentCloseFrameState:Utr,staticPropertyDescriptors:Otr,states:Qtr,opcodes:qtr,maxUnsigned16Bit:Htr,parserStates:$tr,emptyBuffer:Wtr,sendHints:jtr}});var h7=H((Hui,Srt)=>{"use strict";f();Srt.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var y7=H((Wui,Mrt)=>{"use strict";f();var{kReadyState:g7,kController:Gtr,kResponse:Vtr,kBinaryType:ztr,kWebSocketURL:Ytr}=h7(),{states:A7,opcodes:MT}=MR(),{ErrorEvent:Ktr,createFastMessageEvent:Jtr}=NB(),{isUtf8:Xtr}=require("node:buffer"),{collectASequenceOfCodePointsFast:Ztr,removeHTTPWhitespace:_rt}=g0();function trr(t){return t[g7]===A7.CONNECTING}s(trr,"isConnecting");function rrr(t){return t[g7]===A7.OPEN}s(rrr,"isEstablished");function nrr(t){return t[g7]===A7.CLOSING}s(nrr,"isClosing");function irr(t){return t[g7]===A7.CLOSED}s(irr,"isClosed");function Axe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(Axe,"fireEvent");function orr(t,e,r){if(t[g7]!==A7.OPEN)return;let n;if(e===MT.TEXT)try{n=Lrt(r)}catch{krt(t,"Received invalid UTF-8 in text frame.");return}else e===MT.BINARY&&(t[ztr]==="blob"?n=new Blob([r]):n=srr(r));Axe("message",t,Jtr,{origin:t[Ytr].origin,data:n})}s(orr,"websocketMessageReceived");function srr(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(srr,"toArrayBuffer");function arr(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(arr,"isValidSubprotocol");function crr(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(crr,"isValidStatusCode");function krt(t,e){let{[Gtr]:r,[Vtr]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&Axe("error",t,(i,o)=>new Ktr(i,o),{error:new Error(e),message:e})}s(krt,"failWebsocketConnection");function Prt(t){return t===MT.CLOSE||t===MT.PING||t===MT.PONG}s(Prt,"isControlFrame");function Drt(t){return t===MT.CONTINUATION}s(Drt,"isContinuationFrame");function Brt(t){return t===MT.TEXT||t===MT.BINARY}s(Brt,"isTextBinaryFrame");function lrr(t){return Brt(t)||Drt(t)||Prt(t)}s(lrr,"isValidOpcode");function urr(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=Ztr(";",t,e),[i,o=""]=n.split("=");r.set(_rt(i,!0,!1),_rt(o,!1,!0)),e.position++}return r}s(urr,"parseExtensions");function drr(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(drr,"isValidClientWindowBits");var Nrt=typeof process.versions.icu=="string",Rrt=Nrt?new TextDecoder("utf-8",{fatal:!0}):void 0,Lrt=Nrt?Rrt.decode.bind(Rrt):function(t){if(Xtr(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Mrt.exports={isConnecting:trr,isEstablished:rrr,isClosing:nrr,isClosed:irr,fireEvent:Axe,isValidSubprotocol:arr,isValidStatusCode:crr,failWebsocketConnection:krt,websocketMessageReceived:orr,utf8Decode:Lrt,isControlFrame:Prt,isContinuationFrame:Drt,isTextBinaryFrame:Brt,isValidOpcode:lrr,parseExtensions:urr,isValidClientWindowBits:drr}});var wee=H((Vui,Frt)=>{"use strict";f();var{maxUnsigned16Bit:frr}=MR(),Tee=16386,yxe,C7=null,LB=Tee;try{yxe=require("node:crypto")}catch{yxe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function prr(){return LB===Tee&&(LB=0,yxe.randomFillSync(C7??=Buffer.allocUnsafe(Tee),0,Tee)),[C7[LB++],C7[LB++],C7[LB++],C7[LB++]]}s(prr,"generateMask");var Cxe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=prr(),i=r?.byteLength??0,o=i,a=6;i>frr?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};Frt.exports={WebsocketFrameSend:Cxe}});var Exe=H((Kui,Wrt)=>{"use strict";f();var{uid:mrr,states:v7,sentCloseFrameState:See,emptyBuffer:hrr,opcodes:grr}=MR(),{kReadyState:E7,kSentClose:_ee,kByteParser:Qrt,kReceivedClose:Ort,kResponse:Urt}=h7(),{fireEvent:Arr,failWebsocketConnection:FT,isClosing:yrr,isClosed:Crr,isEstablished:vrr,parseExtensions:Err}=y7(),{channels:MB}=Y3(),{CloseEvent:xrr}=NB(),{makeRequest:brr}=_B(),{fetching:Irr}=d7(),{Headers:Trr,getHeadersList:wrr}=kR(),{getDecodeSplit:Srr}=kp(),{WebsocketFrameSend:_rr}=wee(),vxe;try{vxe=require("node:crypto")}catch{}function Rrr(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=brr({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=wrr(new Trr(o.headers));c.headersList=p}let l=vxe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),Irr({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){FT(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){FT(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){FT(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){FT(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=vxe.createHash("sha1").update(l+mrr).digest("base64");if(m!==h){FT(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),A;if(g!==null&&(A=Err(g),!A.has("permessage-deflate"))){FT(n,"Sec-WebSocket-Extensions header does not match.");return}let y=p.headersList.get("Sec-WebSocket-Protocol");if(y!==null&&!Srr("sec-websocket-protocol",c.headersList).includes(y)){FT(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",qrt),p.socket.on("close",Hrt),p.socket.on("error",$rt),MB.open.hasSubscribers&&MB.open.publish({address:p.socket.address(),protocol:y,extensions:g}),i(p,A)}})}s(Rrr,"establishWebSocketConnection");function krr(t,e,r,n){if(!(yrr(t)||Crr(t)))if(!vrr(t))FT(t,"Connection was closed before it was established."),t[E7]=v7.CLOSING;else if(t[_ee]===See.NOT_SENT){t[_ee]=See.PROCESSING;let i=new _rr;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=hrr,t[Urt].socket.write(i.createFrame(grr.CLOSE)),t[_ee]=See.SENT,t[E7]=v7.CLOSING}else t[E7]=v7.CLOSING}s(krr,"closeWebSocketConnection");function qrt(t){this.ws[Qrt].write(t)||this.pause()}s(qrt,"onSocketData");function Hrt(){let{ws:t}=this,{[Urt]:e}=t;e.socket.off("data",qrt),e.socket.off("close",Hrt),e.socket.off("error",$rt);let r=t[_ee]===See.SENT&&t[Ort],n=1005,i="",o=t[Qrt].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[Ort]||(n=1006),t[E7]=v7.CLOSED,Arr("close",t,(a,c)=>new xrr(a,c),{wasClean:r,code:n,reason:i}),MB.close.hasSubscribers&&MB.close.publish({websocket:t,code:n,reason:i})}s(Hrt,"onSocketClose");function $rt(t){let{ws:e}=this;e[E7]=v7.CLOSING,MB.socketError.hasSubscribers&&MB.socketError.publish(t),this.destroy()}s($rt,"onSocketError");Wrt.exports={establishWebSocketConnection:Rrr,closeWebSocketConnection:krr}});var Grt=H((Zui,jrt)=>{"use strict";f();var{createInflateRaw:Prr,Z_DEFAULT_WINDOWBITS:Drr}=require("node:zlib"),{isValidClientWindowBits:Brr}=y7(),Nrr=Buffer.from([0,0,255,255]),Ree=Symbol("kBuffer"),kee=Symbol("kLength"),xxe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=Drr;if(this.#t.serverMaxWindowBits){if(!Brr(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Prr({windowBits:i}),this.#e[Ree]=[],this.#e[kee]=0,this.#e.on("data",o=>{this.#e[Ree].push(o),this.#e[kee]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(Nrr),this.#e.flush(()=>{let i=Buffer.concat(this.#e[Ree],this.#e[kee]);this.#e[Ree].length=0,this.#e[kee]=0,n(null,i)})}};jrt.exports={PerMessageDeflate:xxe}});var nnt=H((rdi,rnt)=>{"use strict";f();var{Writable:Lrr}=require("node:stream"),Mrr=require("node:assert"),{parserStates:E0,opcodes:FB,states:Frr,emptyBuffer:Vrt,sentCloseFrameState:zrt}=MR(),{kReadyState:Orr,kSentClose:Yrt,kResponse:Krt,kReceivedClose:Jrt}=h7(),{channels:Pee}=Y3(),{isValidStatusCode:Qrr,isValidOpcode:Urr,failWebsocketConnection:bh,websocketMessageReceived:Xrt,utf8Decode:qrr,isControlFrame:Zrt,isTextBinaryFrame:bxe,isContinuationFrame:Hrr}=y7(),{WebsocketFrameSend:ent}=wee(),{closeWebSocketConnection:tnt}=Exe(),{PerMessageDeflate:$rr}=Grt(),Ixe=class extends Lrr{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=E0.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new $rr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===E0.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==FB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,d=r[0]&16;if(!Urr(i))return bh(this.ws,"Invalid opcode received"),e();if(o)return bh(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){bh(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){bh(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!bxe(i)){bh(this.ws,"Invalid frame type was fragmented.");return}if(bxe(i)&&this.#o.length>0){bh(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){bh(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&Zrt(i)){bh(this.ws,"Control frame either too large or fragmented");return}if(Hrr(i)&&this.#o.length===0&&!this.#r.compressed){bh(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=E0.READ_DATA):c===126?this.#n=E0.PAYLOADLENGTH_16:c===127&&(this.#n=E0.PAYLOADLENGTH_64),bxe(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===E0.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=E0.READ_DATA}else if(this.#n===E0.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){bh(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=E0.READ_DATA}else if(this.#n===E0.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(Zrt(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=E0.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){tnt(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=E0.INFO,this.#i=!0,this.run(e);return}Xrt(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=E0.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Xrt(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=E0.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return Vrt;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){Mrr(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!Qrr(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=qrr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===FB.CLOSE){if(n===1)return bh(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return tnt(this.ws,i,o,o.length),bh(this.ws,o),!1}if(this.ws[Yrt]!==zrt.SENT){let i=Vrt;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new ent(i);this.ws[Krt].socket.write(o.createFrame(FB.CLOSE),a=>{a||(this.ws[Yrt]=zrt.SENT)})}return this.ws[Orr]=Frr.CLOSING,this.ws[Jrt]=!0,!1}else if(r===FB.PING){if(!this.ws[Jrt]){let i=new ent(e);this.ws[Krt].socket.write(i.createFrame(FB.PONG)),Pee.ping.hasSubscribers&&Pee.ping.publish({payload:e})}}else r===FB.PONG&&Pee.pong.hasSubscribers&&Pee.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};rnt.exports={ByteParser:Ixe}});var cnt=H((odi,ant)=>{"use strict";f();var{WebsocketFrameSend:Wrr}=wee(),{opcodes:int,sendHints:OB}=MR(),jrr=Mve(),ont=Buffer[Symbol.species],Txe=class{static{s(this,"SendQueue")}#e=new jrr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==OB.blob){let o=snt(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=snt(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function snt(t,e){return new Wrr(Grr(t,e)).createFrame(e===OB.string?int.TEXT:int.BINARY)}s(snt,"createFrame");function Grr(t,e){switch(e){case OB.string:return Buffer.from(t);case OB.arrayBuffer:case OB.blob:return new ont(t);case OB.typedArray:return new ont(t.buffer,t.byteOffset,t.byteLength)}}s(Grr,"toBuffer");ant.exports={SendQueue:Txe}});var Ant=H((cdi,gnt)=>{"use strict";f();var{webidl:Yn}=Uu(),{URLSerializer:Vrr}=g0(),{environmentSettingsObject:lnt}=kp(),{staticPropertyDescriptors:OT,states:x7,sentCloseFrameState:zrr,sendHints:Dee}=MR(),{kWebSocketURL:unt,kReadyState:wxe,kController:Yrr,kBinaryType:Bee,kResponse:dnt,kSentClose:Krr,kByteParser:Jrr}=h7(),{isConnecting:Xrr,isEstablished:Zrr,isClosing:enr,isValidSubprotocol:tnr,fireEvent:fnt}=y7(),{establishWebSocketConnection:rnr,closeWebSocketConnection:pnt}=Exe(),{ByteParser:nnr}=nnt(),{kEnumerableProperty:Ih,isBlobLike:mnt}=Mi(),{getGlobalDispatcher:inr}=VZ(),{types:hnt}=require("node:util"),{ErrorEvent:onr,CloseEvent:snr}=NB(),{SendQueue:anr}=cnt(),Fp=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Yn.util.markAsUncloneable(this);let n="WebSocket constructor";Yn.argumentLengthCheck(arguments,1,n);let i=Yn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Yn.converters.USVString(e,n,"url"),r=i.protocols;let o=lnt.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>tnr(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[unt]=new URL(a.href);let c=lnt.settingsObject;this[Yrr]=rnr(a,r,c,this,(l,u)=>this.#o(l,u),i),this[wxe]=t.CONNECTING,this[Krr]=zrr.NOT_SENT,this[Bee]="blob"}close(e=void 0,r=void 0){Yn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Yn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Yn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");pnt(this,e,r,i)}send(e){Yn.brandCheck(this,t);let r="WebSocket.send";if(Yn.argumentLengthCheck(arguments,1,r),e=Yn.converters.WebSocketSendData(e,r,"data"),Xrr(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Zrr(this)||enr(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},Dee.string)}else hnt.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},Dee.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},Dee.typedArray)):mnt(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},Dee.blob))}get readyState(){return Yn.brandCheck(this,t),this[wxe]}get bufferedAmount(){return Yn.brandCheck(this,t),this.#t}get url(){return Yn.brandCheck(this,t),Vrr(this[unt])}get extensions(){return Yn.brandCheck(this,t),this.#n}get protocol(){return Yn.brandCheck(this,t),this.#i}get onopen(){return Yn.brandCheck(this,t),this.#e.open}set onopen(e){Yn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Yn.brandCheck(this,t),this.#e.error}set onerror(e){Yn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Yn.brandCheck(this,t),this.#e.close}set onclose(e){Yn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Yn.brandCheck(this,t),this.#e.message}set onmessage(e){Yn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Yn.brandCheck(this,t),this[Bee]}set binaryType(e){Yn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[Bee]="blob":this[Bee]=e}#o(e,r){this[dnt]=e;let n=new nnr(this,r);n.on("drain",cnr),n.on("error",lnr.bind(this)),e.socket.ws=this,this[Jrr]=n,this.#r=new anr(e.socket),this[wxe]=x7.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),fnt("open",this)}};Fp.CONNECTING=Fp.prototype.CONNECTING=x7.CONNECTING;Fp.OPEN=Fp.prototype.OPEN=x7.OPEN;Fp.CLOSING=Fp.prototype.CLOSING=x7.CLOSING;Fp.CLOSED=Fp.prototype.CLOSED=x7.CLOSED;Object.defineProperties(Fp.prototype,{CONNECTING:OT,OPEN:OT,CLOSING:OT,CLOSED:OT,url:Ih,readyState:Ih,bufferedAmount:Ih,onopen:Ih,onerror:Ih,onclose:Ih,close:Ih,onmessage:Ih,binaryType:Ih,send:Ih,extensions:Ih,protocol:Ih,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Fp,{CONNECTING:OT,OPEN:OT,CLOSING:OT,CLOSED:OT});Yn.converters["sequence<DOMString>"]=Yn.sequenceConverter(Yn.converters.DOMString);Yn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Yn.util.Type(t)==="Object"&&Symbol.iterator in t?Yn.converters["sequence<DOMString>"](t):Yn.converters.DOMString(t,e,r)};Yn.converters.WebSocketInit=Yn.dictionaryConverter([{key:"protocols",converter:Yn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Yn.converters.any,defaultValue:s(()=>inr(),"defaultValue")},{key:"headers",converter:Yn.nullableConverter(Yn.converters.HeadersInit)}]);Yn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Yn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Yn.converters.WebSocketInit(t):{protocols:Yn.converters["DOMString or sequence<DOMString>"](t)}};Yn.converters.WebSocketSendData=function(t){if(Yn.util.Type(t)==="Object"){if(mnt(t))return Yn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||hnt.isArrayBuffer(t))return Yn.converters.BufferSource(t)}return Yn.converters.USVString(t)};function cnr(){this.ws[dnt].socket.resume()}s(cnr,"onParserDrain");function lnr(t){let e,r;t instanceof snr?(e=t.reason,r=t.code):e=t.message,fnt("error",this,()=>new onr("error",{error:t,message:e})),pnt(this,r)}s(lnr,"onParserError");gnt.exports={WebSocket:Fp}});var Sxe=H((ddi,ynt)=>{"use strict";f();function unr(t){return t.indexOf("\0")===-1}s(unr,"isValidLastEventId");function dnr(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(dnr,"isASCIINumber");function fnr(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(fnr,"delay");ynt.exports={isValidLastEventId:unr,isASCIINumber:dnr,delay:fnr}});var xnt=H((mdi,Ent)=>{"use strict";f();var{Transform:pnr}=require("node:stream"),{isASCIINumber:Cnt,isValidLastEventId:vnt}=Sxe(),IE=[239,187,191],_xe=10,Nee=13,mnr=58,hnr=32,Rxe=class extends pnr{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===IE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===IE[0]&&this.buffer[1]===IE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===IE[0]&&this.buffer[1]===IE[1]&&this.buffer[2]===IE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===IE[0]&&this.buffer[1]===IE[1]&&this.buffer[2]===IE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===_xe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===_xe||this.buffer[this.pos]===Nee){this.buffer[this.pos]===Nee&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===_xe||this.buffer[this.pos]===Nee){this.buffer[this.pos]===Nee&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(mnr);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===hnr&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":Cnt(o)&&(r[i]=o);break;case"id":vnt(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&Cnt(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&vnt(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Ent.exports={EventSourceStream:Rxe}});var knt=H((Adi,Rnt)=>{"use strict";f();var{pipeline:gnr}=require("node:stream"),{fetching:Anr}=d7(),{makeRequest:ynr}=_B(),{webidl:TE}=Uu(),{EventSourceStream:Cnr}=xnt(),{parseMIMEType:vnr}=g0(),{createFastMessageEvent:Enr}=NB(),{isNetworkError:bnt}=l7(),{delay:xnr}=Sxe(),{kEnumerableProperty:FR}=Mi(),{environmentSettingsObject:Int}=kp(),Tnt=!1,wnt=3e3,b7=0,Snt=1,I7=2,bnr="anonymous",Inr="use-credentials",QB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=b7;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),TE.util.markAsUncloneable(this);let n="EventSource constructor";TE.argumentLengthCheck(arguments,1,n),Tnt||(Tnt=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=TE.converters.USVString(e,n,"url"),r=TE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:wnt};let i=Int,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=bnr;r.withCredentials&&(a=Inr,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=Int.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=ynr(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===I7)return;this.#n=b7;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{bnt(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(bnt(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?vnr(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=Snt,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new Cnr({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(Enr(l.type,l.options))},"push")});gnr(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=Anr(e)}async#l(){this.#n!==I7&&(this.#n=b7,this.dispatchEvent(new Event("error")),await xnr(this.#a.reconnectionTime),this.#n===b7&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){TE.brandCheck(this,t),this.#n!==I7&&(this.#n=I7,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},_nt={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:b7,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:Snt,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:I7,writable:!1}};Object.defineProperties(QB,_nt);Object.defineProperties(QB.prototype,_nt);Object.defineProperties(QB.prototype,{close:FR,onerror:FR,onmessage:FR,onopen:FR,readyState:FR,url:FR,withCredentials:FR});TE.converters.EventSourceInitDict=TE.dictionaryConverter([{key:"withCredentials",converter:TE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:TE.converters.any}]);Rnt.exports={EventSource:QB,defaultReconnectionTime:wnt}});var Nnt=H((vdi,Qn)=>{"use strict";f();var Tnr=zO(),Pnt=wO(),wnr=hB(),Snr=MXe(),_nr=gB(),Rnr=eEe(),knr=ZXe(),Pnr=oZe(),Dnt=Wo(),Mee=Mi(),{InvalidArgumentError:Lee}=Dnt,UB=jZe(),Dnr=_O(),Bnr=LEe(),Nnr=_et(),Lnr=OEe(),Mnr=xEe(),Fnr=FZ(),{getGlobalDispatcher:Bnt,setGlobalDispatcher:Onr}=VZ(),Qnr=zZ(),Unr=TZ(),qnr=wZ();Object.assign(Pnt.prototype,UB);Qn.exports.Dispatcher=Pnt;Qn.exports.Client=Tnr;Qn.exports.Pool=wnr;Qn.exports.BalancedPool=Snr;Qn.exports.Agent=_nr;Qn.exports.ProxyAgent=Rnr;Qn.exports.EnvHttpProxyAgent=knr;Qn.exports.RetryAgent=Pnr;Qn.exports.RetryHandler=Fnr;Qn.exports.DecoratorHandler=Qnr;Qn.exports.RedirectHandler=Unr;Qn.exports.createRedirectInterceptor=qnr;Qn.exports.interceptors={redirect:Let(),retry:Fet(),dump:Qet(),dns:Het()};Qn.exports.buildConnector=Dnr;Qn.exports.errors=Dnt;Qn.exports.util={parseHeaders:Mee.parseHeaders,headerNameToString:Mee.headerNameToString};function T7(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new Lee("invalid url");if(r!=null&&typeof r!="object")throw new Lee("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new Lee("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(Mee.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=Mee.parseURL(e);let{agent:i,dispatcher:o=Bnt()}=r;if(i)throw new Lee("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(T7,"makeDispatcher");Qn.exports.setGlobalDispatcher=Onr;Qn.exports.getGlobalDispatcher=Bnt;var Hnr=d7().fetch;Qn.exports.fetch=s(async function(e,r=void 0){try{return await Hnr(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Qn.exports.Headers=kR().Headers;Qn.exports.Response=l7().Response;Qn.exports.Request=_B().Request;Qn.exports.FormData=LO().FormData;Qn.exports.File=globalThis.File??require("node:buffer").File;Qn.exports.FileReader=rrt().FileReader;var{setGlobalOrigin:$nr,getGlobalOrigin:Wnr}=tve();Qn.exports.setGlobalOrigin=$nr;Qn.exports.getGlobalOrigin=Wnr;var{CacheStorage:jnr}=drt(),{kConstruct:Gnr}=hee();Qn.exports.caches=new jnr(Gnr);var{deleteCookie:Vnr,getCookies:znr,getSetCookies:Ynr,setCookie:Knr}=brt();Qn.exports.deleteCookie=Vnr;Qn.exports.getCookies=znr;Qn.exports.getSetCookies=Ynr;Qn.exports.setCookie=Knr;var{parseMIMEType:Jnr,serializeAMimeType:Xnr}=g0();Qn.exports.parseMIMEType=Jnr;Qn.exports.serializeAMimeType=Xnr;var{CloseEvent:Znr,ErrorEvent:eir,MessageEvent:tir}=NB();Qn.exports.WebSocket=Ant().WebSocket;Qn.exports.CloseEvent=Znr;Qn.exports.ErrorEvent=eir;Qn.exports.MessageEvent=tir;Qn.exports.request=T7(UB.request);Qn.exports.stream=T7(UB.stream);Qn.exports.pipeline=T7(UB.pipeline);Qn.exports.connect=T7(UB.connect);Qn.exports.upgrade=T7(UB.upgrade);Qn.exports.MockClient=Bnr;Qn.exports.MockPool=Lnr;Qn.exports.MockAgent=Nnr;Qn.exports.mockErrors=Mnr;var{EventSource:rir}=knt();Qn.exports.EventSource=rir});var bi=H((bdi,Lnt)=>{f();Lnt.exports={options:{usePureJavaScript:!1}}});var Ont=H((Tdi,Fnt)=>{f();var kxe={};Fnt.exports=kxe;var Mnt={};kxe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=nir(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};kxe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Mnt[e];if(!r){r=Mnt[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function nir(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(nir,"_encodeWithByteBuffer")});var Oo=H((_di,Hnt)=>{f();var Qnt=bi(),Unt=Ont(),Ne=Hnt.exports=Qnt.util=Qnt.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Ne.nextTick=process.nextTick,typeof setImmediate=="function"?Ne.setImmediate=setImmediate:Ne.setImmediate=Ne.nextTick;return}if(typeof setImmediate=="function"){Ne.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Ne.nextTick=function(c){return setImmediate(c)};return}if(Ne.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Ne.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Ne.setImmediate;Ne.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Ne.nextTick=Ne.setImmediate})();Ne.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Ne.globalScope=function(){return Ne.isNodejs?global:typeof self>"u"?window:self}();Ne.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Ne.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Ne.isArrayBufferView=function(t){return t&&Ne.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function w7(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(w7,"_checkBitsParam");Ne.ByteBuffer=Pxe;function Pxe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Ne.isArrayBuffer(t)||Ne.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Pxe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Pxe,"ByteStringBuffer");Ne.ByteStringBuffer=Pxe;var iir=4096;Ne.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>iir&&(this.data.substr(0,1),this._constructedStringLength=0)};Ne.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Ne.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Ne.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Ne.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Ne.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Ne.encodeUtf8(t))};Ne.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Ne.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Ne.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Ne.ByteStringBuffer.prototype.putInt=function(t,e){w7(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Ne.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Ne.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Ne.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt=function(t){w7(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Ne.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Ne.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Ne.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Ne.ByteStringBuffer.prototype.copy=function(){var t=Ne.createBuffer(this.data);return t.read=this.read,t};Ne.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Ne.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Ne.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Ne.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.ByteStringBuffer.prototype.toString=function(){return Ne.decodeUtf8(this.bytes())};function oir(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Ne.isArrayBuffer(t),n=Ne.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(oir,"DataBuffer");Ne.DataBuffer=oir;Ne.DataBuffer.prototype.length=function(){return this.write-this.read};Ne.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Ne.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Ne.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Ne.DataBuffer.prototype.putBytes=function(t,e){if(Ne.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Ne.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Ne.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Ne.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Ne.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Ne.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Ne.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Ne.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Ne.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Ne.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Ne.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Ne.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Ne.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Ne.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Ne.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Ne.DataBuffer.prototype.putInt=function(t,e){w7(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Ne.DataBuffer.prototype.putSignedInt=function(t,e){return w7(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Ne.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Ne.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Ne.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Ne.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Ne.DataBuffer.prototype.getInt=function(t){w7(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Ne.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Ne.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Ne.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Ne.DataBuffer.prototype.copy=function(){return new Ne.DataBuffer(this)};Ne.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Ne.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Ne.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Ne.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Ne.binary.raw.encode(e);if(t==="hex")return Ne.binary.hex.encode(e);if(t==="base64")return Ne.binary.base64.encode(e);if(t==="utf8")return Ne.text.utf8.decode(e);if(t==="utf16")return Ne.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Ne.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Ne.encodeUtf8(t)),new Ne.ByteBuffer(t)};Ne.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Ne.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Ne.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Ne.bytesToHex=function(t){return Ne.createBuffer(t).toHex()};Ne.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var QT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",UT=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],qnt="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ne.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=QT.charAt(i>>2),r+=QT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=QT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":QT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=UT[t.charCodeAt(a++)-43],n=UT[t.charCodeAt(a++)-43],i=UT[t.charCodeAt(a++)-43],o=UT[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Ne.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Ne.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Ne.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Unt.encode,decode:Unt.decode}};Ne.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Ne.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.binary.hex.encode=Ne.bytesToHex;Ne.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Ne.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=QT.charAt(i>>2),r+=QT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=QT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":QT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=UT[t.charCodeAt(l++)-43],o=UT[t.charCodeAt(l++)-43],a=UT[t.charCodeAt(l++)-43],c=UT[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Ne.binary.base58.encode=function(t,e){return Ne.binary.baseN.encode(t,qnt,e)};Ne.binary.base58.decode=function(t,e){return Ne.binary.baseN.decode(t,qnt,e)};Ne.text={utf8:{},utf16:{}};Ne.text.utf8.encode=function(t,e,r){t=Ne.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.text.utf8.decode=function(t){return Ne.decodeUtf8(String.fromCharCode.apply(null,t))};Ne.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Ne.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Ne.deflate=function(t,e,r){if(e=Ne.decode64(t.deflate(Ne.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Ne.inflate=function(t,e,r){var n=t.inflate(Ne.encode64(e)).rval;return n===null?null:Ne.decode64(n)};var Dxe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Ne.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),Bxe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Ne.decode64(r))),r},"_getStorageObject"),sir=s(function(t,e,r,n){var i=Bxe(t,e);i===null&&(i={}),i[r]=n,Dxe(t,e,i)},"_setItem"),air=s(function(t,e,r){var n=Bxe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),cir=s(function(t,e,r){var n=Bxe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Dxe(t,e,n)}},"_removeItem"),lir=s(function(t,e){Dxe(t,e,null)},"_clearItems"),Fee=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Ne.setItem=function(t,e,r,n,i){Fee(sir,arguments,i)};Ne.getItem=function(t,e,r,n){return Fee(air,arguments,n)};Ne.removeItem=function(t,e,r,n){Fee(cir,arguments,n)};Ne.clearItems=function(t,e,r){Fee(lir,arguments,r)};Ne.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Ne.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Ne.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return l+(d?u.substr(0,d)+c:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Ne.formatSize=function(t){return t>=1073741824?t=Ne.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Ne.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Ne.formatNumber(t/1024,0)+" KiB":t=Ne.formatNumber(t,0)+" bytes",t};Ne.bytesFromIP=function(t){return t.indexOf(".")!==-1?Ne.bytesFromIPv4(t):t.indexOf(":")!==-1?Ne.bytesFromIPv6(t):null};Ne.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Ne.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Ne.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Ne.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Ne.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Ne.bytesToIP=function(t){return t.length===4?Ne.bytesToIPv4(t):t.length===16?Ne.bytesToIPv6(t):null};Ne.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Ne.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Ne.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Ne.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Ne&&!t.update)return e(null,Ne.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Ne.cores=navigator.hardwareConcurrency,e(null,Ne.cores);if(typeof Worker>"u")return Ne.cores=1,e(null,Ne.cores);if(typeof Blob>"u")return Ne.cores=2,e(null,Ne.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Ne.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Ne.cores)}i(l,function(d,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],d=0;d<a;++d){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var d=0;d<a;++d)l[d].postMessage(d)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var d=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}s(o,"reduce")}});var Oee=H((Pdi,$nt)=>{f();var nu=bi();Oo();$nt.exports=nu.cipher=nu.cipher||{};nu.cipher.algorithms=nu.cipher.algorithms||{};nu.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=nu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new nu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};nu.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=nu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new nu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};nu.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),nu.cipher.algorithms[t]=e};nu.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in nu.cipher.algorithms?nu.cipher.algorithms[t]:null};var Nxe=nu.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Nxe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=nu.util.createBuffer(),this.output=t.output||nu.util.createBuffer(),this.mode.start(e)};Nxe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Nxe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Mxe=H((Bdi,Wnt)=>{f();var iu=bi();Oo();iu.cipher=iu.cipher||{};var ji=Wnt.exports=iu.cipher.modes=iu.cipher.modes||{};ji.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ji.ecb.prototype.start=function(t){};ji.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ji.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};ji.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ji.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ji.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ji.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Qee(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ji.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};ji.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ji.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};ji.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};ji.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=iu.util.createBuffer(),this._partialBytes=0};ji.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Qee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=iu.util.createBuffer(),this._partialBytes=0};ji.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Qee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ji.ofb.prototype.decrypt=ji.ofb.prototype.encrypt;ji.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=iu.util.createBuffer(),this._partialBytes=0};ji.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Qee(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ji.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Uee(this._inBlock)};ji.ctr.prototype.decrypt=ji.ctr.prototype.encrypt;ji.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=iu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ji.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=iu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=iu.util.createBuffer(t.additionalData):r=iu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=iu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Lxe(n*8)))}this._inBlock=this._j0.slice(0),Uee(this._inBlock),this._partialBytes=0,r=iu.util.createBuffer(r),this._aDataLength=Lxe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ji.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Uee(this._inBlock)};ji.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Uee(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ji.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=iu.util.createBuffer();var n=this._aDataLength.concat(Lxe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ji.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ji.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};ji.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};ji.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};ji.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};ji.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function Qee(t,e){if(typeof t=="string"&&(t=iu.util.createBuffer(t)),iu.util.isArray(t)&&t.length>4){var r=t;t=iu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!iu.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(Qee,"transformIV");function Uee(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(Uee,"inc32");function Lxe(t){return[t/4294967296|0,t&4294967295]}s(Lxe,"from64To32")});var qT=H((Mdi,znt)=>{f();var Ms=bi();Oee();Mxe();Oo();znt.exports=Ms.aes=Ms.aes||{};Ms.aes.startEncrypting=function(t,e,r,n){var i=qee({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ms.aes.createEncryptionCipher=function(t,e){return qee({key:t,output:null,decrypt:!1,mode:e})};Ms.aes.startDecrypting=function(t,e,r,n){var i=qee({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ms.aes.createDecryptionCipher=function(t,e){return qee({key:t,output:null,decrypt:!0,mode:e})};Ms.aes.Algorithm=function(t,e){Qxe||Gnt();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return Oxe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return Oxe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};Ms.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ms.util.createBuffer(e);else if(Ms.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ms.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ms.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ms.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Vnt(e,t.decrypt&&!a),this._init=!0}};Ms.aes._expandKey=function(t,e){return Qxe||Gnt(),Vnt(t,e)};Ms.aes._updateBlock=Oxe;HB("AES-ECB",Ms.cipher.modes.ecb);HB("AES-CBC",Ms.cipher.modes.cbc);HB("AES-CFB",Ms.cipher.modes.cfb);HB("AES-OFB",Ms.cipher.modes.ofb);HB("AES-CTR",Ms.cipher.modes.ctr);HB("AES-GCM",Ms.cipher.modes.gcm);function HB(t,e){var r=s(function(){return new Ms.aes.Algorithm(t,e)},"factory");Ms.cipher.registerAlgorithm(t,r)}s(HB,"registerAlgorithm");var Qxe=!1,qB=4,Cf,Fxe,jnt,OR,wA;function Gnt(){Qxe=!0,jnt=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Cf=new Array(256),Fxe=new Array(256),OR=new Array(4),wA=new Array(4);for(var e=0;e<4;++e)OR[e]=new Array(256),wA[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,d,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,Cf[r]=c,Fxe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),d=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)OR[p][r]=u,wA[p][c]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(Gnt,"initialize");function Vnt(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=qB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=Cf[n>>>16&255]<<24^Cf[n>>>8&255]<<16^Cf[n&255]<<8^Cf[n>>>24]^jnt[i]<<24,i++):o>6&&l%o===4&&(n=Cf[n>>>24]<<24^Cf[n>>>16&255]<<16^Cf[n>>>8&255]<<8^Cf[n&255]),r[l]=r[l-o]^n;if(e){var u,d=wA[0],p=wA[1],m=wA[2],h=wA[3],g=r.slice(0);c=r.length;for(var l=0,A=c-qB;l<c;l+=qB,A-=qB)if(l===0||l===c-qB)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var y=0;y<qB;++y)u=r[A+y],g[l+(3&-y)]=d[Cf[u>>>24]]^p[Cf[u>>>16&255]]^m[Cf[u>>>8&255]]^h[Cf[u&255]];r=g}return r}s(Vnt,"_expandKey");function Oxe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=wA[0],a=wA[1],c=wA[2],l=wA[3],u=Fxe):(o=OR[0],a=OR[1],c=OR[2],l=OR[3],u=Cf);var d,p,m,h,g,A,y;d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var x=3,I=1;I<i;++I)g=o[d>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++x],A=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[d&255]^t[++x],y=o[m>>>24]^a[h>>>16&255]^c[d>>>8&255]^l[p&255]^t[++x],h=o[h>>>24]^a[d>>>16&255]^c[p>>>8&255]^l[m&255]^t[++x],d=g,p=A,m=y;r[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++x],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++x],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++x],r[n?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++x]}s(Oxe,"_updateBlock");function qee(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ms.cipher.createDecipher(r,t.key):n=Ms.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ms.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(qee,"_createCipher")});var HT=H((Qdi,Ynt)=>{f();var S7=bi();S7.pki=S7.pki||{};var Uxe=Ynt.exports=S7.pki.oids=S7.oids=S7.oids||{};function Lt(t,e){Uxe[t]=e,Uxe[e]=t}s(Lt,"_IN");function Zo(t,e){Uxe[t]=e}s(Zo,"_I_");Lt("1.2.840.113549.1.1.1","rsaEncryption");Lt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Lt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Lt("1.2.840.113549.1.1.7","RSAES-OAEP");Lt("1.2.840.113549.1.1.8","mgf1");Lt("1.2.840.113549.1.1.9","pSpecified");Lt("1.2.840.113549.1.1.10","RSASSA-PSS");Lt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Lt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Lt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Lt("1.3.101.112","EdDSA25519");Lt("1.2.840.10040.4.3","dsa-with-sha1");Lt("1.3.14.3.2.7","desCBC");Lt("1.3.14.3.2.26","sha1");Lt("1.3.14.3.2.29","sha1WithRSASignature");Lt("2.16.840.1.101.3.4.2.1","sha256");Lt("2.16.840.1.101.3.4.2.2","sha384");Lt("2.16.840.1.101.3.4.2.3","sha512");Lt("2.16.840.1.101.3.4.2.4","sha224");Lt("2.16.840.1.101.3.4.2.5","sha512-224");Lt("2.16.840.1.101.3.4.2.6","sha512-256");Lt("1.2.840.113549.2.2","md2");Lt("1.2.840.113549.2.5","md5");Lt("1.2.840.113549.1.7.1","data");Lt("1.2.840.113549.1.7.2","signedData");Lt("1.2.840.113549.1.7.3","envelopedData");Lt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Lt("1.2.840.113549.1.7.5","digestedData");Lt("1.2.840.113549.1.7.6","encryptedData");Lt("1.2.840.113549.1.9.1","emailAddress");Lt("1.2.840.113549.1.9.2","unstructuredName");Lt("1.2.840.113549.1.9.3","contentType");Lt("1.2.840.113549.1.9.4","messageDigest");Lt("1.2.840.113549.1.9.5","signingTime");Lt("1.2.840.113549.1.9.6","counterSignature");Lt("1.2.840.113549.1.9.7","challengePassword");Lt("1.2.840.113549.1.9.8","unstructuredAddress");Lt("1.2.840.113549.1.9.14","extensionRequest");Lt("1.2.840.113549.1.9.20","friendlyName");Lt("1.2.840.113549.1.9.21","localKeyId");Lt("1.2.840.113549.1.9.22.1","x509Certificate");Lt("1.2.840.113549.1.12.10.1.1","keyBag");Lt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Lt("1.2.840.113549.1.12.10.1.3","certBag");Lt("1.2.840.113549.1.12.10.1.4","crlBag");Lt("1.2.840.113549.1.12.10.1.5","secretBag");Lt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Lt("1.2.840.113549.1.5.13","pkcs5PBES2");Lt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Lt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Lt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Lt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Lt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Lt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Lt("1.2.840.113549.2.7","hmacWithSHA1");Lt("1.2.840.113549.2.8","hmacWithSHA224");Lt("1.2.840.113549.2.9","hmacWithSHA256");Lt("1.2.840.113549.2.10","hmacWithSHA384");Lt("1.2.840.113549.2.11","hmacWithSHA512");Lt("1.2.840.113549.3.7","des-EDE3-CBC");Lt("2.16.840.1.101.3.4.1.2","aes128-CBC");Lt("2.16.840.1.101.3.4.1.22","aes192-CBC");Lt("2.16.840.1.101.3.4.1.42","aes256-CBC");Lt("2.5.4.3","commonName");Lt("2.5.4.4","surname");Lt("2.5.4.5","serialNumber");Lt("2.5.4.6","countryName");Lt("2.5.4.7","localityName");Lt("2.5.4.8","stateOrProvinceName");Lt("2.5.4.9","streetAddress");Lt("2.5.4.10","organizationName");Lt("2.5.4.11","organizationalUnitName");Lt("2.5.4.12","title");Lt("2.5.4.13","description");Lt("2.5.4.15","businessCategory");Lt("2.5.4.17","postalCode");Lt("2.5.4.42","givenName");Lt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Lt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Lt("2.16.840.1.113730.1.1","nsCertType");Lt("2.16.840.1.113730.1.13","nsComment");Zo("2.5.29.1","authorityKeyIdentifier");Zo("2.5.29.2","keyAttributes");Zo("2.5.29.3","certificatePolicies");Zo("2.5.29.4","keyUsageRestriction");Zo("2.5.29.5","policyMapping");Zo("2.5.29.6","subtreesConstraint");Zo("2.5.29.7","subjectAltName");Zo("2.5.29.8","issuerAltName");Zo("2.5.29.9","subjectDirectoryAttributes");Zo("2.5.29.10","basicConstraints");Zo("2.5.29.11","nameConstraints");Zo("2.5.29.12","policyConstraints");Zo("2.5.29.13","basicConstraints");Lt("2.5.29.14","subjectKeyIdentifier");Lt("2.5.29.15","keyUsage");Zo("2.5.29.16","privateKeyUsagePeriod");Lt("2.5.29.17","subjectAltName");Lt("2.5.29.18","issuerAltName");Lt("2.5.29.19","basicConstraints");Zo("2.5.29.20","cRLNumber");Zo("2.5.29.21","cRLReason");Zo("2.5.29.22","expirationDate");Zo("2.5.29.23","instructionCode");Zo("2.5.29.24","invalidityDate");Zo("2.5.29.25","cRLDistributionPoints");Zo("2.5.29.26","issuingDistributionPoint");Zo("2.5.29.27","deltaCRLIndicator");Zo("2.5.29.28","issuingDistributionPoint");Zo("2.5.29.29","certificateIssuer");Zo("2.5.29.30","nameConstraints");Lt("2.5.29.31","cRLDistributionPoints");Lt("2.5.29.32","certificatePolicies");Zo("2.5.29.33","policyMappings");Zo("2.5.29.34","policyConstraints");Lt("2.5.29.35","authorityKeyIdentifier");Zo("2.5.29.36","policyConstraints");Lt("2.5.29.37","extKeyUsage");Zo("2.5.29.46","freshestCRL");Zo("2.5.29.54","inhibitAnyPolicy");Lt("1.3.6.1.4.1.11129.2.4.2","timestampList");Lt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Lt("1.3.6.1.5.5.7.3.1","serverAuth");Lt("1.3.6.1.5.5.7.3.2","clientAuth");Lt("1.3.6.1.5.5.7.3.3","codeSigning");Lt("1.3.6.1.5.5.7.3.4","emailProtection");Lt("1.3.6.1.5.5.7.3.8","timeStamping")});var SA=H((Hdi,Jnt)=>{f();var na=bi();Oo();HT();var mr=Jnt.exports=na.asn1=na.asn1||{};mr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};mr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};mr.create=function(t,e,r,n,i){if(na.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||na.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=mr.copy(c)),c};mr.copy=function(t,e){var r;if(na.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(mr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:mr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};mr.equals=function(t,e,r){if(na.util.isArray(t)){if(!na.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!mr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&mr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};mr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function _7(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(_7,"_checkBufferLength");var uir=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;_7(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");mr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=na.util.createBuffer(t));var r=t.length(),n=Hee(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Hee(t,e,r,n){var i;_7(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=uir(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var d,p,m=(o&32)===32;if(m)if(d=[],l===void 0)for(;;){if(_7(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(Hee(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),d.push(Hee(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(d===void 0&&a===mr.Class.UNIVERSAL&&c===mr.Type.BITSTRING&&(p=t.bytes(l)),d===void 0&&n.decodeBitStrings&&a===mr.Class.UNIVERSAL&&c===mr.Type.BITSTRING&&l>1){var h=t.read,g=e,A=0;if(c===mr.Type.BITSTRING&&(_7(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},x=Hee(t,e,r+1,y),I=i-t.length();e-=I,c==mr.Type.BITSTRING&&I++;var S=x.tagClass;I===l&&(S===mr.Class.UNIVERSAL||S===mr.Class.CONTEXT_SPECIFIC)&&(d=[x])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===mr.Type.BMPSTRING)for(d="";l>0;l-=2)_7(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(l),e-=l}var R=p===void 0?null:{bitStringContents:p};return mr.create(a,c,m,d,R)}s(Hee,"_fromDer");mr.toDer=function(t){var e=na.util.createBuffer(),r=t.tagClass|t.type,n=na.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=mr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(mr.toDer(t.value[o]))}else if(t.type===mr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===mr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};mr.oidToDer=function(t){var e=t.split("."),r=na.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};mr.derToOid=function(t){var e;typeof t=="string"&&(t=na.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};mr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};mr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};mr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};mr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};mr.integerToDer=function(t){var e=na.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};mr.derToInteger=function(t){typeof t=="string"&&(t=na.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};mr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&na.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=mr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Knt=/[^\\u0000-\\u00ff]/;mr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case mr.Class.UNIVERSAL:n+="Universal:";break;case mr.Class.APPLICATION:n+="Application:";break;case mr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case mr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===mr.Class.UNIVERSAL)switch(n+=t.type,t.type){case mr.Type.NONE:n+=" (None)";break;case mr.Type.BOOLEAN:n+=" (Boolean)";break;case mr.Type.INTEGER:n+=" (Integer)";break;case mr.Type.BITSTRING:n+=" (Bit string)";break;case mr.Type.OCTETSTRING:n+=" (Octet string)";break;case mr.Type.NULL:n+=" (Null)";break;case mr.Type.OID:n+=" (Object Identifier)";break;case mr.Type.ODESC:n+=" (Object Descriptor)";break;case mr.Type.EXTERNAL:n+=" (External or Instance of)";break;case mr.Type.REAL:n+=" (Real)";break;case mr.Type.ENUMERATED:n+=" (Enumerated)";break;case mr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case mr.Type.UTF8:n+=" (UTF8)";break;case mr.Type.ROID:n+=" (Relative Object Identifier)";break;case mr.Type.SEQUENCE:n+=" (Sequence)";break;case mr.Type.SET:n+=" (Set)";break;case mr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case mr.Type.IA5String:n+=" (IA5String (ASCII))";break;case mr.Type.UTCTIME:n+=" (UTC time)";break;case mr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case mr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=mr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===mr.Type.OID){var l=mr.derToOid(t.value);n+=l,na.pki&&na.pki.oids&&l in na.pki.oids&&(n+=" ("+na.pki.oids[l]+") ")}if(t.type===mr.Type.INTEGER)try{n+=mr.derToInteger(t.value)}catch{n+="0x"+na.util.bytesToHex(t.value)}else if(t.type===mr.Type.BITSTRING){if(t.value.length>1?n+="0x"+na.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===mr.Type.OCTETSTRING)Knt.test(t.value)||(n+="("+t.value+") "),n+="0x"+na.util.bytesToHex(t.value);else if(t.type===mr.Type.UTF8)try{n+=na.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+na.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===mr.Type.PRINTABLESTRING||t.type===mr.Type.IA5String?n+=t.value:Knt.test(t.value)?n+="0x"+na.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var QC=H((jdi,Xnt)=>{f();var $ee=bi();Xnt.exports=$ee.md=$ee.md||{};$ee.md.algorithms=$ee.md.algorithms||{}});var $B=H((Vdi,Znt)=>{f();var wE=bi();QC();Oo();var dir=Znt.exports=wE.hmac=wE.hmac||{};dir.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in wE.md.algorithms)e=wE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=wE.util.createBuffer(a);else if(wE.util.isArray(a)){var c=a;a=wE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=wE.util.createBuffer(),n=wE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var jee=H((Ydi,nit)=>{f();var UC=bi();QC();Oo();var tit=nit.exports=UC.md5=UC.md5||{};UC.md.md5=UC.md.algorithms.md5=tit;tit.create=function(){rit||fir();var t=null,e=UC.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=UC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=UC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),eit(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=UC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(qxe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};eit(d,r,i);var p=UC.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},n};var qxe=null,Wee=null,R7=null,WB=null,rit=!1;function fir(){qxe="\x80",qxe+=UC.util.fillString("\0",64),Wee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],R7=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],WB=new Array(64);for(var t=0;t<64;++t)WB[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);rit=!0}s(fir,"_init");function eit(t,e,r){for(var n,i,o,a,c,l,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),l=c^o&(a^c),n=i+l+WB[d]+e[d],u=R7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<32;++d)l=a^c&(o^a),n=i+l+WB[d]+e[Wee[d]],u=R7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<48;++d)l=o^a^c,n=i+l+WB[d]+e[Wee[d]],u=R7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;d<64;++d)l=a^(o|~c),n=i+l+WB[d]+e[Wee[d]],u=R7[d],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(eit,"_update")});var QR=H((Xdi,oit)=>{f();var Vee=bi();Oo();var iit=oit.exports=Vee.pem=Vee.pem||{};iit.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Gee(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Gee(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Gee(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Gee(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Vee.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};iit.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Vee.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var d=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),A=0;A<g.length;++A)h.values.push(pir(g[A]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Gee(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(Gee,"foldHeader");function pir(t){return t.replace(/^\s+/,"")}s(pir,"ltrim")});var k7=H((tfi,ait)=>{f();var Ta=bi();Oee();Mxe();Oo();ait.exports=Ta.des=Ta.des||{};Ta.des.startEncrypting=function(t,e,r,n){var i=zee({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ta.des.createEncryptionCipher=function(t,e){return zee({key:t,output:null,decrypt:!1,mode:e})};Ta.des.startDecrypting=function(t,e,r,n){var i=zee({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ta.des.createDecryptionCipher=function(t,e){return zee({key:t,output:null,decrypt:!0,mode:e})};Ta.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return sit(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return sit(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Ta.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ta.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=xir(e),this._init=!0}};qC("DES-ECB",Ta.cipher.modes.ecb);qC("DES-CBC",Ta.cipher.modes.cbc);qC("DES-CFB",Ta.cipher.modes.cfb);qC("DES-OFB",Ta.cipher.modes.ofb);qC("DES-CTR",Ta.cipher.modes.ctr);qC("3DES-ECB",Ta.cipher.modes.ecb);qC("3DES-CBC",Ta.cipher.modes.cbc);qC("3DES-CFB",Ta.cipher.modes.cfb);qC("3DES-OFB",Ta.cipher.modes.ofb);qC("3DES-CTR",Ta.cipher.modes.ctr);function qC(t,e){var r=s(function(){return new Ta.des.Algorithm(t,e)},"factory");Ta.cipher.registerAlgorithm(t,r)}s(qC,"registerAlgorithm");var mir=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],hir=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],gir=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Air=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],yir=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Cir=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],vir=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Eir=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function xir(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,y=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],I=0,S,R=0;R<A;R++){var B=t.getInt32(),M=t.getInt32();S=(B>>>4^M)&252645135,M^=S,B^=S<<4,S=(M>>>-16^B)&65535,B^=S,M^=S<<-16,S=(B>>>2^M)&858993459,M^=S,B^=S<<2,S=(M>>>-16^B)&65535,B^=S,M^=S<<-16,S=(B>>>1^M)&1431655765,M^=S,B^=S<<1,S=(M>>>8^B)&16711935,B^=S,M^=S<<8,S=(B>>>1^M)&1431655765,M^=S,B^=S<<1,S=B<<8|M>>>20&240,B=M<<24|M<<8&16711680|M>>>8&65280|M>>>24&240,M=S;for(var O=0;O<x.length;++O){x[O]?(B=B<<2|B>>>26,M=M<<2|M>>>26):(B=B<<1|B>>>27,M=M<<1|M>>>27),B&=-15,M&=-15;var K=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|c[B>>>4&15],V=l[M>>>28]|u[M>>>24&15]|d[M>>>20&15]|p[M>>>16&15]|m[M>>>12&15]|h[M>>>8&15]|g[M>>>4&15];S=(V>>>16^K)&65535,y[I++]=K^S,y[I++]=V^S<<16}}return y}s(xir,"_createKeys");function sit(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(hir[h>>>24&63]|Air[h>>>16&63]|Cir[h>>>8&63]|Eir[h&63]|mir[g>>>24&63]|gir[g>>>16&63]|yir[g>>>8&63]|vir[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(sit,"_updateBlock");function zee(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Ta.cipher.createDecipher(r,t.key):n=Ta.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ta.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(zee,"_createCipher")});var Yee=H((ifi,cit)=>{f();var vf=bi();$B();QC();Oo();var bir=vf.pkcs5=vf.pkcs5||{},SE;vf.util.isNodejs&&!vf.options.usePureJavaScript&&(SE=require("crypto"));cit.exports=vf.pbkdf2=bir.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),vf.util.isNodejs&&!vf.options.usePureJavaScript&&SE.pbkdf2&&(i===null||typeof i!="object")&&(SE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?SE.pbkdf2Sync.length===4?SE.pbkdf2(t,e,r,n,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):SE.pbkdf2(t,e,r,n,i,function(S,R){if(S)return o(S);o(null,R.toString("binary"))}):SE.pbkdf2Sync.length===4?SE.pbkdf2Sync(t,e,r,n).toString("binary"):SE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in vf.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=vf.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,d=vf.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var A=1;A<=l;++A){d.start(null,null),d.update(e),d.update(vf.util.int32ToBytes(A)),m=g=d.digest().getBytes();for(var y=2;y<=r;++y)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=vf.util.xorBytes(m,h,a),g=h;p+=A<l?m:m.substr(0,u)}return p}var A=1,y;function x(){if(A>l)return o(null,p);d.start(null,null),d.update(e),d.update(vf.util.int32ToBytes(A)),m=g=d.digest().getBytes(),y=2,I()}s(x,"outer");function I(){if(y<=r)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=vf.util.xorBytes(m,h,a),g=h,++y,vf.util.setImmediate(I);p+=A<l?m:m.substr(0,u),++A,x()}s(I,"inner"),x()}});var $xe=H((afi,pit)=>{f();var HC=bi();QC();Oo();var uit=pit.exports=HC.sha256=HC.sha256||{};HC.md.sha256=HC.md.algorithms.sha256=uit;uit.create=function(){dit||Iir();var t=null,e=HC.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=HC.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=HC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),lit(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=HC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(Hxe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)c=n.fullMessageLength[d+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};lit(p,r,i);var m=HC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var Hxe=null,dit=!1,fit=null;function Iir(){Hxe="\x80",Hxe+=HC.util.fillString("\0",64),fit=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],dit=!0}s(Iir,"_init");function lit(t,e,r){for(var n,i,o,a,c,l,u,d,p,m,h,g,A,y,x,I=r.length();I>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,A=t.h5,y=t.h6,x=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=y^g&(A^y),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),l=d&p|m&(d^p),n=x+a+c+fit[u]+e[u],i=o+l,x=y,y=A,A=g,g=h+n>>>0,h=m,m=p,p=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+A|0,t.h6=t.h6+y|0,t.h7=t.h7+x|0,I-=64}}s(lit,"_update")});var Wxe=H((ufi,mit)=>{f();var $C=bi();Oo();var Kee=null;$C.util.isNodejs&&!$C.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Kee=require("crypto"));var Tir=mit.exports=$C.prng=$C.prng||{};Tir.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,A=$C.util.createBuffer();e.key=null,y();function y(x){if(x)return d(x);if(A.length()>=u)return d(null,A.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return $C.util.nextTick(function(){o(y)});var I=p(e.key,e.seed);e.generated+=I.length,A.putBytes(I),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),$C.util.setImmediate(y)}s(y,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=$C.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var A=d(e.key,e.seed);e.generated+=A.length,g.putBytes(A),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var d=null,p=$C.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=$C.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{d(A);for(var y=0;y<A.length;++y)h.putInt32(A[y])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var x,I,S,R=Math.floor(Math.random()*65536);h.length()<u;){I=16807*(R&65535),x=16807*(R>>16),I+=(x&32767)<<16,I+=x>>15,I=(I&2147483647)+(I>>31),R=I&4294967295;for(var y=0;y<3;++y)S=R>>>(y<<3),S^=Math.floor(Math.random()*256),h.putByte(S&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),Kee?(e.seedFile=function(u,d){Kee.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return Kee.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,l(u))}catch(p){d(p)}},e.seedFileSync=l),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",h),m(A.forge.prng.err,A.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var Th=H((pfi,jxe)=>{f();var ou=bi();qT();$xe();Wxe();Oo();(function(){if(ou.random&&ou.random.getBytes){jxe.exports=ou.random;return}(function(t){var e={},r=new Array(4),n=ou.util.createBuffer();e.formatKey=function(p){var m=ou.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),ou.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=ou.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return ou.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=ou.md.sha256;function i(){var p=ou.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=ou.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),ou.options.usePureJavaScript||!ou.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!ou.random)ou.random=o;else for(var d in o)ou.random[d]=o[d];ou.random.createInstance=i,jxe.exports=ou.random})(typeof jQuery<"u"?jQuery:null)})()});var Vxe=H((gfi,Ait)=>{f();var x0=bi();Oo();var Gxe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],hit=[1,2,3,5],wir=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),Sir=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Ait.exports=x0.rc2=x0.rc2||{};x0.rc2.expandKey=function(t,e){typeof t=="string"&&(t=x0.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(Gxe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,Gxe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,Gxe[r.at(c+1)^r.at(c+o)]);return r};var git=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,d,p=[];for(t=x0.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=wir(g[u],hit[u]),d++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=Sir(g[u],hit[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var A=[];for(u=0;u<4;u++){var y=i.getInt16Le();a!==null&&(r?y^=a.getInt16Le():a.putInt16Le(y)),A.push(y&65535)}d=r?0:63;for(var x=0;x<g.length;x++)for(var I=0;I<g[x][0];I++)g[x][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),o.putInt16Le(A[u])},"runPlan"),h=null;return h={start:s(function(g,A){g&&typeof g=="string"&&(g=x0.util.createBuffer(g)),n=!1,i=x0.util.createBuffer(),o=A||new x0.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(A&&(n=!0,h.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,o,!r);else{var x=o.length(),I=o.at(x-1);I>x?A=!1:o.truncate(I)}return A},"finish")},h},"createCipher");x0.rc2.startEncrypting=function(t,e,r){var n=x0.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};x0.rc2.createEncryptionCipher=function(t,e){return git(t,e,!0)};x0.rc2.startDecrypting=function(t,e,r){var n=x0.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};x0.rc2.createDecryptionCipher=function(t,e){return git(t,e,!1)}});var D7=H((Cfi,Tit)=>{f();var zxe=bi();Tit.exports=zxe.jsbn=zxe.jsbn||{};var _E,_ir=0xdeadbeefcafe,yit=(_ir&16777215)==15715070;function Rt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Rt,"BigInteger");zxe.jsbn.BigInteger=Rt;function Qo(){return new Rt(null)}s(Qo,"nbi");function Rir(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(Rir,"am1");function kir(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,d=c*l+u*a;l=a*l+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(d>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(kir,"am2");function Cit(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,d=c*l+u*a;l=a*l+((d&16383)<<14)+r.data[n]+i,i=(l>>28)+(d>>14)+c*u,r.data[n++]=l&268435455}return i}s(Cit,"am3");typeof navigator>"u"?(Rt.prototype.am=Cit,_E=28):yit&&navigator.appName=="Microsoft Internet Explorer"?(Rt.prototype.am=kir,_E=30):yit&&navigator.appName!="Netscape"?(Rt.prototype.am=Rir,_E=26):(Rt.prototype.am=Cit,_E=28);Rt.prototype.DB=_E;Rt.prototype.DM=(1<<_E)-1;Rt.prototype.DV=1<<_E;var Yxe=52;Rt.prototype.FV=Math.pow(2,Yxe);Rt.prototype.F1=Yxe-_E;Rt.prototype.F2=2*_E-Yxe;var Pir="0123456789abcdefghijklmnopqrstuvwxyz",Jee=new Array,jB,wh;jB=48;for(wh=0;wh<=9;++wh)Jee[jB++]=wh;jB=97;for(wh=10;wh<36;++wh)Jee[jB++]=wh;jB=65;for(wh=10;wh<36;++wh)Jee[jB++]=wh;function vit(t){return Pir.charAt(t)}s(vit,"int2char");function Eit(t,e){var r=Jee[t.charCodeAt(e)];return r??-1}s(Eit,"intAt");function Dir(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(Dir,"bnpCopyTo");function Bir(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(Bir,"bnpFromInt");function $T(t){var e=Qo();return e.fromInt(t),e}s($T,"nbv");function Nir(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Eit(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Rt.ZERO.subTo(this,this)}s(Nir,"bnpFromString");function Lir(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(Lir,"bnpClamp");function Mir(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=vit(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=vit(n));return i?o:"0"}s(Mir,"bnToString");function Fir(){var t=Qo();return Rt.ZERO.subTo(this,t),t}s(Fir,"bnNegate");function Oir(){return this.s<0?this.negate():this}s(Oir,"bnAbs");function Qir(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(Qir,"bnCompareTo");function Xee(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(Xee,"nbits");function Uir(){return this.t<=0?0:this.DB*(this.t-1)+Xee(this.data[this.t-1]^this.s&this.DM)}s(Uir,"bnBitLength");function qir(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(qir,"bnpDLShiftTo");function Hir(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(Hir,"bnpDRShiftTo");function $ir(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s($ir,"bnpLShiftTo");function Wir(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(Wir,"bnpRShiftTo");function jir(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(jir,"bnpSubTo");function Gir(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Rt.ZERO.subTo(e,e)}s(Gir,"bnpMultiplyTo");function Vir(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(Vir,"bnpSquareTo");function zir(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Qo());var o=Qo(),a=this.s,c=t.s,l=this.DB-Xee(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,A=r.t,y=A-u,x=e??Qo();for(o.dlShiftTo(y,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),Rt.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var I=r.data[--A]==d?this.DM:Math.floor(r.data[A]*m+(r.data[A-1]+g)*h);if((r.data[A]+=o.am(0,I,r,y,0,u))<I)for(o.dlShiftTo(y,x),r.subTo(x,r);r.data[A]<--I;)r.subTo(x,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&Rt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&Rt.ZERO.subTo(r,r)}}}s(zir,"bnpDivRemTo");function Yir(t){var e=Qo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Rt.ZERO)>0&&t.subTo(e,e),e}s(Yir,"bnMod");function UR(t){this.m=t}s(UR,"Classic");function Kir(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(Kir,"cConvert");function Jir(t){return t}s(Jir,"cRevert");function Xir(t){t.divRemTo(this.m,null,t)}s(Xir,"cReduce");function Zir(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(Zir,"cMulTo");function eor(t,e){t.squareTo(e),this.reduce(e)}s(eor,"cSqrTo");UR.prototype.convert=Kir;UR.prototype.revert=Jir;UR.prototype.reduce=Xir;UR.prototype.mulTo=Zir;UR.prototype.sqrTo=eor;function tor(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(tor,"bnpInvDigit");function qR(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(qR,"Montgomery");function ror(t){var e=Qo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Rt.ZERO)>0&&this.m.subTo(e,e),e}s(ror,"montConvert");function nor(t){var e=Qo();return t.copyTo(e),this.reduce(e),e}s(nor,"montRevert");function ior(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(ior,"montReduce");function oor(t,e){t.squareTo(e),this.reduce(e)}s(oor,"montSqrTo");function sor(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(sor,"montMulTo");qR.prototype.convert=ror;qR.prototype.revert=nor;qR.prototype.reduce=ior;qR.prototype.mulTo=sor;qR.prototype.sqrTo=oor;function aor(){return(this.t>0?this.data[0]&1:this.s)==0}s(aor,"bnpIsEven");function cor(t,e){if(t>4294967295||t<1)return Rt.ONE;var r=Qo(),n=Qo(),i=e.convert(this),o=Xee(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(cor,"bnpExp");function lor(t,e){var r;return t<256||e.isEven()?r=new UR(e):r=new qR(e),this.exp(t,r)}s(lor,"bnModPowInt");Rt.prototype.copyTo=Dir;Rt.prototype.fromInt=Bir;Rt.prototype.fromString=Nir;Rt.prototype.clamp=Lir;Rt.prototype.dlShiftTo=qir;Rt.prototype.drShiftTo=Hir;Rt.prototype.lShiftTo=$ir;Rt.prototype.rShiftTo=Wir;Rt.prototype.subTo=jir;Rt.prototype.multiplyTo=Gir;Rt.prototype.squareTo=Vir;Rt.prototype.divRemTo=zir;Rt.prototype.invDigit=tor;Rt.prototype.isEven=aor;Rt.prototype.exp=cor;Rt.prototype.toString=Mir;Rt.prototype.negate=Fir;Rt.prototype.abs=Oir;Rt.prototype.compareTo=Qir;Rt.prototype.bitLength=Uir;Rt.prototype.mod=Yir;Rt.prototype.modPowInt=lor;Rt.ZERO=$T(0);Rt.ONE=$T(1);function uor(){var t=Qo();return this.copyTo(t),t}s(uor,"bnClone");function dor(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(dor,"bnIntValue");function por(){return this.t==0?this.s:this.data[0]<<24>>24}s(por,"bnByteValue");function mor(){return this.t==0?this.s:this.data[0]<<16>>16}s(mor,"bnShortValue");function hor(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(hor,"bnpChunkSize");function gor(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(gor,"bnSigNum");function Aor(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=$T(r),i=Qo(),o=Qo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(Aor,"bnpToRadix");function yor(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Eit(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Rt.ZERO.subTo(this,this)}s(yor,"bnpFromRadix");function Cor(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Rt.ONE.shiftLeft(t-1),Kxe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Rt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(Cor,"bnpFromNumber");function vor(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(vor,"bnToByteArray");function Eor(t){return this.compareTo(t)==0}s(Eor,"bnEquals");function xor(t){return this.compareTo(t)<0?this:t}s(xor,"bnMin");function bor(t){return this.compareTo(t)>0?this:t}s(bor,"bnMax");function Ior(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(Ior,"bnpBitwiseTo");function Tor(t,e){return t&e}s(Tor,"op_and");function wor(t){var e=Qo();return this.bitwiseTo(t,Tor,e),e}s(wor,"bnAnd");function Kxe(t,e){return t|e}s(Kxe,"op_or");function Sor(t){var e=Qo();return this.bitwiseTo(t,Kxe,e),e}s(Sor,"bnOr");function xit(t,e){return t^e}s(xit,"op_xor");function _or(t){var e=Qo();return this.bitwiseTo(t,xit,e),e}s(_or,"bnXor");function bit(t,e){return t&~e}s(bit,"op_andnot");function Ror(t){var e=Qo();return this.bitwiseTo(t,bit,e),e}s(Ror,"bnAndNot");function kor(){for(var t=Qo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(kor,"bnNot");function Por(t){var e=Qo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(Por,"bnShiftLeft");function Dor(t){var e=Qo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(Dor,"bnShiftRight");function Bor(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(Bor,"lbit");function Nor(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Bor(this.data[t]);return this.s<0?this.t*this.DB:-1}s(Nor,"bnGetLowestSetBit");function Lor(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(Lor,"cbit");function Mor(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Lor(this.data[r]^e);return t}s(Mor,"bnBitCount");function For(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(For,"bnTestBit");function Oor(t,e){var r=Rt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(Oor,"bnpChangeBit");function Qor(t){return this.changeBit(t,Kxe)}s(Qor,"bnSetBit");function Uor(t){return this.changeBit(t,bit)}s(Uor,"bnClearBit");function qor(t){return this.changeBit(t,xit)}s(qor,"bnFlipBit");function Hor(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(Hor,"bnpAddTo");function $or(t){var e=Qo();return this.addTo(t,e),e}s($or,"bnAdd");function Wor(t){var e=Qo();return this.subTo(t,e),e}s(Wor,"bnSubtract");function jor(t){var e=Qo();return this.multiplyTo(t,e),e}s(jor,"bnMultiply");function Gor(t){var e=Qo();return this.divRemTo(t,e,null),e}s(Gor,"bnDivide");function Vor(t){var e=Qo();return this.divRemTo(t,null,e),e}s(Vor,"bnRemainder");function zor(t){var e=Qo(),r=Qo();return this.divRemTo(t,e,r),new Array(e,r)}s(zor,"bnDivideAndRemainder");function Yor(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(Yor,"bnpDMultiply");function Kor(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(Kor,"bnpDAddOffset");function P7(){}s(P7,"NullExp");function Iit(t){return t}s(Iit,"nNop");function Jor(t,e,r){t.multiplyTo(e,r)}s(Jor,"nMulTo");function Xor(t,e){t.squareTo(e)}s(Xor,"nSqrTo");P7.prototype.convert=Iit;P7.prototype.revert=Iit;P7.prototype.mulTo=Jor;P7.prototype.sqrTo=Xor;function Zor(t){return this.exp(t,new P7)}s(Zor,"bnPow");function esr(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(esr,"bnpMultiplyLowerTo");function tsr(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(tsr,"bnpMultiplyUpperTo");function GB(t){this.r2=Qo(),this.q3=Qo(),Rt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(GB,"Barrett");function rsr(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Qo();return t.copyTo(e),this.reduce(e),e}s(rsr,"barrettConvert");function nsr(t){return t}s(nsr,"barrettRevert");function isr(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(isr,"barrettReduce");function osr(t,e){t.squareTo(e),this.reduce(e)}s(osr,"barrettSqrTo");function ssr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(ssr,"barrettMulTo");GB.prototype.convert=rsr;GB.prototype.revert=nsr;GB.prototype.reduce=isr;GB.prototype.mulTo=ssr;GB.prototype.sqrTo=osr;function asr(t,e){var r=t.bitLength(),n,i=$T(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new UR(e):e.isEven()?o=new GB(e):o=new qR(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var d=Qo();for(o.sqrTo(a[1],d);c<=u;)a[c]=Qo(),o.mulTo(d,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Qo(),A;for(r=Xee(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(A=i,i=g,g=A),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(asr,"bnModPow");function csr(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(csr,"bnGCD");function lsr(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(lsr,"bnpModInt");function usr(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Rt.ZERO;for(var r=t.clone(),n=this.clone(),i=$T(1),o=$T(0),a=$T(0),c=$T(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(Rt.ONE)!=0)return Rt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(usr,"bnModInverse");var _A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],dsr=(1<<26)/_A[_A.length-1];function fsr(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=_A[_A.length-1]){for(e=0;e<_A.length;++e)if(r.data[0]==_A[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<_A.length;){for(var n=_A[e],i=e+1;i<_A.length&&n<dsr;)n*=_A[i++];for(n=r.modInt(n);e<i;)if(n%_A[e++]==0)return!1}return r.millerRabin(t)}s(fsr,"bnIsProbablePrime");function psr(t){var e=this.subtract(Rt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=msr(),o,a=0;a<t;++a){do o=new Rt(this.bitLength(),i);while(o.compareTo(Rt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(Rt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(Rt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(psr,"bnpMillerRabin");function msr(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(msr,"bnGetPrng");Rt.prototype.chunkSize=hor;Rt.prototype.toRadix=Aor;Rt.prototype.fromRadix=yor;Rt.prototype.fromNumber=Cor;Rt.prototype.bitwiseTo=Ior;Rt.prototype.changeBit=Oor;Rt.prototype.addTo=Hor;Rt.prototype.dMultiply=Yor;Rt.prototype.dAddOffset=Kor;Rt.prototype.multiplyLowerTo=esr;Rt.prototype.multiplyUpperTo=tsr;Rt.prototype.modInt=lsr;Rt.prototype.millerRabin=psr;Rt.prototype.clone=uor;Rt.prototype.intValue=dor;Rt.prototype.byteValue=por;Rt.prototype.shortValue=mor;Rt.prototype.signum=gor;Rt.prototype.toByteArray=vor;Rt.prototype.equals=Eor;Rt.prototype.min=xor;Rt.prototype.max=bor;Rt.prototype.and=wor;Rt.prototype.or=Sor;Rt.prototype.xor=_or;Rt.prototype.andNot=Ror;Rt.prototype.not=kor;Rt.prototype.shiftLeft=Por;Rt.prototype.shiftRight=Dor;Rt.prototype.getLowestSetBit=Nor;Rt.prototype.bitCount=Mor;Rt.prototype.testBit=For;Rt.prototype.setBit=Qor;Rt.prototype.clearBit=Uor;Rt.prototype.flipBit=qor;Rt.prototype.add=$or;Rt.prototype.subtract=Wor;Rt.prototype.multiply=jor;Rt.prototype.divide=Gor;Rt.prototype.remainder=Vor;Rt.prototype.divideAndRemainder=zor;Rt.prototype.modPow=asr;Rt.prototype.modInverse=usr;Rt.prototype.pow=Zor;Rt.prototype.gcd=csr;Rt.prototype.isProbablePrime=fsr});var VB=H((xfi,Rit)=>{f();var WC=bi();QC();Oo();var Sit=Rit.exports=WC.sha1=WC.sha1||{};WC.md.sha1=WC.md.algorithms.sha1=Sit;Sit.create=function(){_it||hsr();var t=null,e=WC.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=WC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=WC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),wit(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=WC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(Jxe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)c=n.fullMessageLength[d+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};wit(p,r,i);var m=WC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var Jxe=null,_it=!1;function hsr(){Jxe="\x80",Jxe+=WC.util.fillString("\0",64),_it=!0}s(hsr,"_init");function wit(t,e,r){for(var n,i,o,a,c,l,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(wit,"_update")});var Xxe=H((Tfi,Pit)=>{f();var jC=bi();Oo();Th();VB();var kit=Pit.exports=jC.pkcs1=jC.pkcs1||{};kit.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=jC.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var d=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=jC.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var A=Zee(i,c-o.digestLength-1,a),y=jC.util.xorBytes(g,A,g.length),x=Zee(y,o.digestLength,a),I=jC.util.xorBytes(i,x,i.length);return"\0"+I+y};kit.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=a,y}if(i===void 0?i=jC.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=Zee(d,i.digestLength,o),m=jC.util.xorBytes(u,p,u.length),h=Zee(m,a-i.digestLength-1,o),g=jC.util.xorBytes(d,h,d.length),A=g.substring(0,i.digestLength),y=l!=="\0",x=0;x<i.digestLength;++x)y|=c.charAt(x)!==A.charAt(x);for(var I=1,S=i.digestLength,R=i.digestLength;R<g.length;R++){var B=g.charCodeAt(R),M=B&1^1,O=I?65534:0;y|=B&O,I=I&M,S+=I}if(y||g.charCodeAt(S)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(S+1)};function Zee(t,e,r){r||(r=jC.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(Zee,"rsa_mgf1")});var ebe=H((_fi,Zxe)=>{f();var WT=bi();Oo();D7();Th();(function(){if(WT.prime){Zxe.exports=WT.prime;return}var t=Zxe.exports=WT.prime=WT.prime||{},e=WT.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=m.prng||WT.random,y={nextBytes:s(function(x){for(var I=A.getBytesSync(x.length),S=0;S<x.length;++S)x[S]=I.charCodeAt(S)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,y,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var A=u(p,m),y=0,x=d(A.bitLength());"millerRabinTests"in h&&(x=h.millerRabinTests);var I=10;"maxBlockTime"in h&&(I=h.maxBlockTime),c(A,p,m,y,x,I,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,A,y,x){var I=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(A))return x(null,p);p.dAddOffset(r[g++%8],0)}while(y<0||+new Date-I<y);WT.util.setImmediate(function(){c(p,m,h,g,A,y,x)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var A=u(p,m),y=h.workers,x=h.workLoad||100,I=x*30/8,S=h.workerScript||"forge/prime.worker.js";if(y===-1)return WT.util.estimateCores(function(B,M){B&&(M=2),y=M-1,R()});R();function R(){y=Math.max(1,y);for(var B=[],M=0;M<y;++M)B[M]=new Worker(S);for(var O=y,M=0;M<y;++M)B[M].addEventListener("message",V);var K=!1;function V(z){if(!K){--O;var Q=z.data;if(Q.found){for(var U=0;U<B.length;++U)B[U].terminate();return K=!0,g(null,new e(Q.prime,16))}A.bitLength()>p&&(A=u(p,m));var Z=A.toString(16);z.target.postMessage({hex:Z,workLoad:x}),A.dAddOffset(I,0)}}s(V,"workerMessage")}s(R,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var B7=H((Pfi,Oit)=>{f();var hn=bi();SA();D7();HT();Xxe();ebe();Th();Oo();typeof Ro>"u"&&(Ro=hn.jsbn.BigInteger);var Ro,tbe=hn.util.isNodejs?require("crypto"):null,ze=hn.asn1,Sh=hn.util;hn.pki=hn.pki||{};Oit.exports=hn.pki.rsa=hn.rsa=hn.rsa||{};var fi=hn.pki,gsr=[6,4,2,4,2,4,6,2],Asr={name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},ysr={name:"RSAPrivateKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Csr={name:"RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},vsr=hn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Esr={name:"DigestInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ze.Class.UNIVERSAL,type:ze.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},xsr=s(function(t){var e;if(t.algorithm in fi.oids)e=fi.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ze.oidToDer(e).getBytes(),i=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]),o=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]);o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,n)),o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,""));var a=ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),ze.toDer(i).getBytes()},"emsaPkcs1v15encode"),Mit=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Ro.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Ro.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Ro(hn.util.bytesToHex(hn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Ro.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");fi.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Fit(t,e,r)):(i=hn.util.createBuffer(),i.putBytes(t));for(var a=new Ro(i.toHex(),16),c=Mit(a,e,n),l=c.toString(16),u=hn.util.createBuffer(),d=o-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(hn.util.hexToBytes(l)),u.getBytes()};fi.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Ro(hn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=Mit(a,e,r),l=c.toString(16),u=hn.util.createBuffer(),d=i-Math.ceil(l.length/2);d>0;)u.putByte(0),--d;return u.putBytes(hn.util.hexToBytes(l)),n!==!1?ete(u.getBytes(),e,r):u.getBytes()};fi.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||hn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Ro(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};fi.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Ro(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Ro(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Ro.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(Isr(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(gsr[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Ro.ONE).gcd(t.e).compareTo(Ro.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Ro.ONE),t.q1=t.q.subtract(Ro.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Ro.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:fi.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:fi.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};fi.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!hn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Dit("generateKeyPair"))return tbe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:fi.privateKeyFromPem(u),publicKey:fi.publicKeyFromPem(l)})});if(Bit("generateKey")&&Bit("exportKey"))return Sh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Lit(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return Sh.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=fi.privateKeyFromAsn1(ze.fromDer(hn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:fi.setRsaPublicKey(l.n,l.e)})}});if(Nit("generateKey")&&Nit("exportKey")){var i=Sh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Lit(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=Sh.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(d){var p=d.target.result,m=fi.privateKeyFromAsn1(ze.fromDer(hn.util.createBuffer(p)));n(null,{privateKey:m,publicKey:fi.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){n(d)}},i.onerror=function(c){n(c)};return}}else if(Dit("generateKeyPairSync")){var o=tbe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:fi.privateKeyFromPem(o.privateKey),publicKey:fi.publicKeyFromPem(o.publicKey)}}}var a=fi.rsa.createKeyPairGenerationState(t,e,r);if(!n)return fi.rsa.stepKeyPairGenerationState(a,0),a.keys;bsr(a,r,n)};fi.setRsaPublicKey=fi.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return Fit(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return hn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return fi.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=ete(u,r,!0);var d=ze.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!ze.validate(d,Esr,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=ze.derToOid(p.algorithmIdentifier);if(!(g===hn.oids.md2||g===hn.oids.md5||g===hn.oids.sha1||g===hn.oids.sha224||g===hn.oids.sha256||g===hn.oids.sha384||g===hn.oids.sha512||g===hn.oids["sha512-224"]||g===hn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===hn.oids.md2||g===hn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=ete(u,r,!0),l===u},"verify")});var c=fi.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};fi.setRsaPrivateKey=fi.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=fi.rsa.decrypt(u,l,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:ete};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return hn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,l,!1)},l.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:xsr},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,l.n.bitLength());return fi.rsa.encrypt(m,l,p)},l};fi.wrapRsaPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(fi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,ze.toDer(t).getBytes())])};fi.privateKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,Asr,e,r)&&(t=ze.fromDer(hn.util.createBuffer(e.privateKey))),e={},r=[],!ze.validate(t,ysr,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,d,p;return i=hn.util.createBuffer(e.privateKeyModulus).toHex(),o=hn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=hn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=hn.util.createBuffer(e.privateKeyPrime1).toHex(),l=hn.util.createBuffer(e.privateKeyPrime2).toHex(),u=hn.util.createBuffer(e.privateKeyExponent1).toHex(),d=hn.util.createBuffer(e.privateKeyExponent2).toHex(),p=hn.util.createBuffer(e.privateKeyCoefficient).toHex(),fi.setRsaPrivateKey(new Ro(i,16),new Ro(o,16),new Ro(a,16),new Ro(c,16),new Ro(l,16),new Ro(u,16),new Ro(d,16),new Ro(p,16))};fi.privateKeyToAsn1=fi.privateKeyToRSAPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.e)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.d)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.p)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.q)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.dP)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.dQ)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.qInv))])};fi.publicKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,vsr,e,r)){var n=ze.derToOid(e.publicKeyOid);if(n!==fi.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ze.validate(t,Csr,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=hn.util.createBuffer(e.publicKeyModulus).toHex(),a=hn.util.createBuffer(e.publicKeyExponent).toHex();return fi.setRsaPublicKey(new Ro(o,16),new Ro(a,16))};fi.publicKeyToAsn1=fi.publicKeyToSubjectPublicKeyInfo=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(fi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.BITSTRING,!1,[fi.publicKeyToRSAPublicKey(t)])])};fi.publicKeyToRSAPublicKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,GC(t.e))])};function Fit(t,e,r){var n=hn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,d=hn.random.getBytes(a),l=0;l<a;++l)c=d.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(Fit,"_encodePkcs1_v1_5");function ete(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=hn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var d=o.getByte();if(d!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(ete,"_decodePkcs1_v1_5");function bsr(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){hn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Ro.ONE).gcd(t.e).compareTo(Ro.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Ro.ONE).gcd(t.e).compareTo(Ro.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Ro.ONE),t.q1=t.q.subtract(Ro.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Ro.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:fi.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:fi.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(bsr,"_generateKeyPair");function GC(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=hn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(GC,"_bnToBytes");function Isr(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(Isr,"_getMillerRabinTests");function Dit(t){return hn.util.isNodejs&&typeof tbe[t]=="function"}s(Dit,"_detectNodeCrypto");function Bit(t){return typeof Sh.globalScope<"u"&&typeof Sh.globalScope.crypto=="object"&&typeof Sh.globalScope.crypto.subtle=="object"&&typeof Sh.globalScope.crypto.subtle[t]=="function"}s(Bit,"_detectSubtleCrypto");function Nit(t){return typeof Sh.globalScope<"u"&&typeof Sh.globalScope.msCrypto=="object"&&typeof Sh.globalScope.msCrypto.subtle=="object"&&typeof Sh.globalScope.msCrypto.subtle[t]=="function"}s(Nit,"_detectSubtleMsCrypto");function Lit(t){for(var e=hn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(Lit,"_intToUint8Array")});var rbe=H((Nfi,$it)=>{f();var xr=bi();qT();SA();k7();QC();HT();Yee();QR();Th();Vxe();B7();Oo();typeof Qit>"u"&&(Qit=xr.jsbn.BigInteger);var Qit,mt=xr.asn1,yi=xr.pki=xr.pki||{};$it.exports=yi.pbe=xr.pbe=xr.pbe||{};var HR=yi.oids,Tsr={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},wsr={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ssr={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};yi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=xr.random.getBytesSync(r.saltSize),i=r.count,o=mt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,d,p;switch(r.algorithm){case"aes128":a=16,u=16,d=HR["aes128-CBC"],p=xr.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=HR["aes192-CBC"],p=xr.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=HR["aes256-CBC"],p=xr.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=HR.desCBC,p=xr.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=Hit(h),A=xr.pkcs5.pbkdf2(e,n,i,a,g),y=xr.random.getBytesSync(u),x=p(A);x.start(y),x.update(mt.toDer(t)),x.finish(),l=x.output.getBytes();var I=_sr(n,o,a,h);c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(HR.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(HR.pkcs5PBKDF2).getBytes()),I]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(d).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){a=24;var S=new xr.util.ByteBuffer(n),A=yi.pbe.generatePkcs12Key(e,S,1,i,a),y=yi.pbe.generatePkcs12Key(e,S,2,i,a),x=xr.des.createEncryptionCipher(A);x.start(y),x.update(mt.toDer(t)),x.finish(),l=x.output.getBytes(),c=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(HR["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,n),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var R=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[c,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,l)]);return R};yi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!mt.validate(t,Tsr,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mt.derToOid(n.encryptionOid),c=yi.pbe.getCipher(a,n.encryptionParams,e),l=xr.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=mt.fromDer(c.output)),r};yi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(t).getBytes()};return xr.pem.encode(r,{maxline:e})};yi.encryptedPrivateKeyFromPem=function(t){var e=xr.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(e.body)};yi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=yi.wrapRsaPrivateKey(yi.privateKeyToAsn1(t));return n=yi.encryptPrivateKeyInfo(n,e,r),yi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=xr.random.getBytesSync(16),c=xr.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=xr.random.getBytesSync(16),c=xr.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=xr.random.getBytesSync(16),c=xr.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=xr.random.getBytesSync(8),c=xr.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=xr.random.getBytesSync(8),c=xr.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=xr.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=c(u);d.start(o),d.update(mt.toDer(yi.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:xr.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return xr.pem.encode(p)};yi.decryptRsaPrivateKey=function(t,e){var r=null,n=xr.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=xr.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=xr.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=xr.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=xr.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=xr.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return xr.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return xr.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return xr.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=xr.util.hexToBytes(n.dekInfo.parameters),l=xr.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(xr.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=yi.decryptPrivateKeyInfo(mt.fromDer(r),e):r=mt.fromDer(r),r!==null&&(r=yi.privateKeyFromAsn1(r)),r};yi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in xr.md))throw new Error('"sha1" hash algorithm unavailable.');o=xr.md.sha1.create()}var l=o.digestLength,u=o.blockLength,d=new xr.util.ByteBuffer,p=new xr.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new xr.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(h/u),y=new xr.util.ByteBuffer;for(c=0;c<A;c++)y.putByte(e.at(c%h));var x=u*Math.ceil(m/u),I=new xr.util.ByteBuffer;for(c=0;c<x;c++)I.putByte(p.at(c%m));var S=y;S.putBuffer(I);for(var R=Math.ceil(i/l),B=1;B<=R;B++){var M=new xr.util.ByteBuffer;M.putBytes(g.bytes()),M.putBytes(S.bytes());for(var O=0;O<n;O++)o.start(),o.update(M.getBytes()),M=o.digest();var K=new xr.util.ByteBuffer;for(c=0;c<u;c++)K.putByte(M.at(c%l));var V=Math.ceil(h/u)+Math.ceil(m/u),z=new xr.util.ByteBuffer;for(a=0;a<V;a++){var Q=new xr.util.ByteBuffer(S.getBytes(u)),U=511;for(c=K.length()-1;c>=0;c--)U=U>>8,U+=K.at(c)+Q.at(c),Q.setAt(c,U&255);z.putBuffer(Q)}S=z,d.putBuffer(M)}return d.truncate(d.length()-i),d};yi.pbe.getCipher=function(t,e,r){switch(t){case yi.oids.pkcs5PBES2:return yi.pbe.getCipherForPBES2(t,e,r);case yi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case yi.oids["pbewithSHAAnd40BitRC2-CBC"]:return yi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};yi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!mt.validate(e,wsr,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=mt.derToOid(n.kdfOid),t!==yi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=mt.derToOid(n.encOid),t!==yi.oids["aes128-CBC"]&&t!==yi.oids["aes192-CBC"]&&t!==yi.oids["aes256-CBC"]&&t!==yi.oids["des-EDE3-CBC"]&&t!==yi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=xr.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(yi.oids[t]){case"aes128-CBC":l=16,u=xr.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=xr.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=xr.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=xr.des.createDecryptionCipher;break;case"desCBC":l=8,u=xr.des.createDecryptionCipher;break}var d=qit(n.prfOid),p=xr.pkcs5.pbkdf2(r,a,c,l,d),m=n.encIv,h=u(p);return h.start(m),h};yi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!mt.validate(e,Ssr,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=xr.util.createBuffer(n.salt),c=xr.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,d;switch(t){case yi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,d=xr.des.startDecrypting;break;case yi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,d=s(function(A,y){var x=xr.rc2.createDecryptionCipher(A,40);return x.start(y,null),x},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=qit(n.prfOid),m=yi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=yi.pbe.generatePkcs12Key(r,a,2,c,u,p);return d(m,h)};yi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in xr.md))throw new Error('"md5" hash algorithm unavailable.');n=xr.md.md5.create()}e===null&&(e="");for(var i=[Uit(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(Uit(n,i[a-1]+t+e));return i.join("").substr(0,r)};function Uit(t,e){return t.start().update(e).digest().getBytes()}s(Uit,"hash");function qit(t){var e;if(!t)e="hmacWithSHA1";else if(e=yi.oids[mt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Hit(e)}s(qit,"prfOidToMessageDigest");function Hit(t){var e=xr.md;switch(t){case"hmacWithSHA224":e=xr.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(Hit,"prfAlgorithmToMessageDigest");function _sr(t,e,r,n){var i=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,t),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,xr.util.hexToBytes(r.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(yi.oids[n]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),i}s(_sr,"createPbkdf2Params")});var nbe=H((Ffi,Git)=>{f();var zB=bi();SA();Oo();var gr=zB.asn1,YB=Git.exports=zB.pkcs7asn1=zB.pkcs7asn1||{};zB.pkcs7=zB.pkcs7||{};zB.pkcs7.asn1=YB;var Wit={name:"ContentInfo",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:gr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};YB.contentInfoValidator=Wit;var jit={name:"EncryptedContentInfo",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:gr.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:gr.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};YB.envelopedDataValidator={name:"EnvelopedData",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(jit)};YB.encryptedDataValidator={name:"EncryptedData",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"version"}].concat(jit)};var Rsr={name:"SignerInfo",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:gr.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:gr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:gr.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};YB.signedDataValidator={name:"SignedData",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Wit,{name:"SignedData.Certificates",tagClass:gr.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:gr.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SET,capture:"signerInfos",optional:!0,value:[Rsr]}]};YB.recipientInfoValidator={name:"RecipientInfo",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:gr.Class.UNIVERSAL,type:gr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:gr.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:gr.Class.UNIVERSAL,type:gr.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var ibe=H((Qfi,Vit)=>{f();var $R=bi();Oo();$R.mgf=$R.mgf||{};var ksr=Vit.exports=$R.mgf.mgf1=$R.mgf1=$R.mgf1||{};ksr.create=function(t){var e={generate:s(function(r,n){for(var i=new $R.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new $R.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var Yit=H((Hfi,zit)=>{f();var tte=bi();ibe();zit.exports=tte.mgf=tte.mgf||{};tte.mgf.mgf1=tte.mgf1});var rte=H((Wfi,Kit)=>{f();var WR=bi();Th();Oo();var Psr=Kit.exports=WR.pss=WR.pss||{};Psr.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=WR.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||WR.random,c={};return c.encode=function(l,u){var d,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var A=new WR.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(h),A.putBytes(g),e.start(),e.update(A.getBytes());var y=e.digest().getBytes(),x=new WR.util.ByteBuffer;x.fillWithByte(0,m-o-n-2),x.putByte(1),x.putBytes(g);var I=x.getBytes(),S=m-n-1,R=r.generate(y,S),B="";for(d=0;d<S;d++)B+=String.fromCharCode(I.charCodeAt(d)^R.charCodeAt(d));var M=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~M)+B.substr(1),B+y+"\xBC"},c.verify=function(l,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,A=u.substr(0,g),y=u.substr(g,n),x=65280>>8*h-m&255;if((A.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var I=r.generate(y,g),S="";for(p=0;p<g;p++)S+=String.fromCharCode(A.charCodeAt(p)^I.charCodeAt(p));S=String.fromCharCode(S.charCodeAt(0)&~x)+S.substr(1);var R=h-n-o-2;for(p=0;p<R;p++)if(S.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=S.substr(-o),M=new WR.util.ByteBuffer;M.fillWithByte(0,8),M.putBytes(l),M.putBytes(B),e.start(),e.update(M.getBytes());var O=e.digest().getBytes();return y===O},c}});var ote=H((Gfi,tot)=>{f();var gn=bi();qT();SA();k7();QC();Yit();HT();QR();rte();B7();Oo();var re=gn.asn1,Jt=tot.exports=gn.pki=gn.pki||{},ko=Jt.oids,oc={};oc.CN=ko.commonName;oc.commonName="CN";oc.C=ko.countryName;oc.countryName="C";oc.L=ko.localityName;oc.localityName="L";oc.ST=ko.stateOrProvinceName;oc.stateOrProvinceName="ST";oc.O=ko.organizationName;oc.organizationName="O";oc.OU=ko.organizationalUnitName;oc.organizationalUnitName="OU";oc.E=ko.emailAddress;oc.emailAddress="E";var Xit=gn.pki.rsa.publicKeyValidator,Dsr={name:"Certificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Xit,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Bsr={name:"rsapss",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Nsr={name:"CertificationRequestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Xit,{name:"CertificationRequestInfo.attributes",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0}]}]}]},Lsr={name:"CertificationRequest",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Nsr,{name:"CertificationRequest.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=re.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in ko&&(o.name=ko[o.type],o.name in oc&&(o.shortName=oc[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=re.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in ko&&(c.name=ko[c.type],c.name in oc&&(c.shortName=oc[c.name])),c.type===ko.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(Jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function jT(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(jT,"_getAttribute");var nte=s(function(t,e,r){var n={};if(t!==ko["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:ko.sha1},mgf:{algorithmOid:ko.mgf1,hash:{algorithmOid:ko.sha1}},saltLength:20});var i={},o=[];if(!re.validate(e,Bsr,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=re.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=re.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=re.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),ite=s(function(t){switch(ko[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return gn.md.sha1.create();case"md5WithRSAEncryption":return gn.md.md5.create();case"sha256WithRSAEncryption":return gn.md.sha256.create();case"sha384WithRSAEncryption":return gn.md.sha384.create();case"sha512WithRSAEncryption":return gn.md.sha512.create();case"RSASSA-PSS":return gn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Zit=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case ko.sha1WithRSAEncryption:case ko.sha1WithRSASignature:break;case ko["RSASSA-PSS"]:var n,i;if(n=ko[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||gn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=ko[e.signatureParameters.mgf.algorithmOid],i===void 0||gn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=gn.mgf[i].create(gn.md[n].create()),n=ko[e.signatureParameters.hash.algorithmOid],n===void 0||gn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=gn.pss.create(gn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Jt.certificateFromPem=function(t,e,r){var n=gn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificateFromAsn1(o,e)};Jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:re.toDer(Jt.certificateToAsn1(t)).getBytes()};return gn.pem.encode(r,{maxline:e})};Jt.publicKeyFromPem=function(t){var e=gn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=re.fromDer(e.body);return Jt.publicKeyFromAsn1(n)};Jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:re.toDer(Jt.publicKeyToAsn1(t)).getBytes()};return gn.pem.encode(r,{maxline:e})};Jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes()};return gn.pem.encode(r,{maxline:e})};Jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||gn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=re.toDer(Jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Jt.certificationRequestFromPem=function(t,e,r){var n=gn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificationRequestFromAsn1(o,e)};Jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:re.toDer(Jt.certificationRequestToAsn1(t)).getBytes()};return gn.pem.encode(r,{maxline:e})};Jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return jT(t.issuer,e)},t.issuer.addField=function(e){_h([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return jT(t.subject,e)},t.subject.addField=function(e){_h([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){_h(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){_h(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)eot(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||gn.md.sha1.create();var n=ko[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Jt.getTBSCertificate(t);var o=re.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=ite({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||Jt.getTBSCertificate(e),l=re.toDer(c);a.update(l.getBytes())}return a!==null&&(r=Zit({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=ko.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return gn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Dsr,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=gn.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=gn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=nte(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=gn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=nte(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=ite({signatureOid:a.signatureOid,type:"certificate"});var u=re.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=gn.md.sha1.create(),p=re.toDer(r.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return jT(a.issuer,g)},a.issuer.addField=function(g){_h([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=gn.md.sha1.create(),h=re.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return jT(a.subject,g)},a.subject.addField=function(g){_h([g]),a.subject.attributes.push(g)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Jt.certificateExtensionFromAsn1(n.value[i]));return e};Jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=re.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===re.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in ko){if(e.name=ko[e.id],e.name==="keyUsage"){var r=re.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=re.fromDer(e.value);r.value.length>0&&r.value[0].type===re.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===re.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=re.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=re.fromDer(e.value),a=0;a<r.value.length;++a){var c=re.derToOid(r.value[a].value);c in ko?e[ko[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=re.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=re.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var d={type:l.type,value:l.value};switch(e.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=gn.util.bytesToIP(l.value);break;case 8:d.oid=re.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=re.fromDer(e.value);e.subjectKeyIdentifier=gn.util.bytesToHex(r.value)}}return e};Jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Lsr,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=gn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=nte(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=gn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=nte(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=ite({signatureOid:a.signatureOid,type:"certification request"});var c=re.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=gn.md.sha1.create();return a.subject.getField=function(u){return jT(a.subject,u)},a.subject.addField=function(u){_h([u]),a.subject.attributes.push(u)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return jT(a,u)},a.addAttribute=function(u){_h([u]),a.attributes.push(u)},a.attributes=Jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return jT(t.subject,e)},t.subject.addField=function(e){_h([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return jT(t,e)},t.addAttribute=function(e){_h([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){_h(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){_h(e),t.attributes=e},t.sign=function(e,r){t.md=r||gn.md.sha1.create();var n=ko[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Jt.getCertificationRequestInfo(t);var o=re.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=ite({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t),i=re.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Zit({certificate:t,md:r,signature:t.signature})),e},t};function KB(t){for(var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=re.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===re.Type.UTF8&&(a=gn.util.encodeUtf8(a))),n=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(r.type).getBytes()),re.create(re.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(KB,"_dnToAsn1");function _h(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Jt.oids?e.name=Jt.oids[e.type]:e.shortName&&e.shortName in oc&&(e.name=Jt.oids[oc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Jt.oids)e.type=Jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in oc&&(e.shortName=oc[e.name]),e.type===ko.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=re.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Jt.certificateExtensionToAsn1(eot(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(_h,"_fillMissingFields");function eot(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Jt.oids&&(t.name=Jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Jt.oids)t.id=Jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in ko?c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(ko[l]).getBytes())):l.indexOf(".")!==-1&&c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=gn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));t.value.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=re.create(re.Class.UNIVERSAL,re.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[re.create(re.Class.CONTEXT_SPECIFIC,4,!0,[KB(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=gn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var c=t.value.value,A=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),y=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=gn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));y.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[y])),c.push(A)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(eot,"_fillMissingExtensionFields");function obe(t,e){switch(t){case ko["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(e.saltLength).getBytes())])),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,r);default:return re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")}}s(obe,"_signatureParametersToAsn1");function Msr(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=re.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===re.Type.UTF8&&(o=gn.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(i.type).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(Msr,"_CRIAttributesToAsn1");var Fsr=new Date("1950-01-01T00:00:00Z"),Osr=new Date("2050-01-01T00:00:00Z");function Jit(t){return t>=Fsr&&t<Osr?re.create(re.Class.UNIVERSAL,re.Type.UTCTIME,!1,re.dateToUtcTime(t)):re.create(re.Class.UNIVERSAL,re.Type.GENERALIZEDTIME,!1,re.dateToGeneralizedTime(t))}s(Jit,"_dateToAsn1");Jt.getTBSCertificate=function(t){var e=Jit(t.validity.notBefore),r=Jit(t.validity.notAfter),n=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,gn.util.hexToBytes(t.serialNumber)),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.siginfo.algorithmOid).getBytes()),obe(t.siginfo.algorithmOid,t.siginfo.parameters)]),KB(t.issuer),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,r]),KB(t.subject),Jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Jt.certificateExtensionsToAsn1(t.extensions)),n};Jt.getCertificationRequestInfo=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes()),KB(t.subject),Jt.publicKeyToAsn1(t.publicKey),Msr(t)]);return e};Jt.distinguishedNameToAsn1=function(t){return KB(t)};Jt.certificateToAsn1=function(t){var e=t.tbsCertificate||Jt.getTBSCertificate(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),obe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.certificateExtensionsToAsn1=function(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,3,!0,[]),r=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Jt.certificateExtensionToAsn1(t[n]));return e};Jt.certificateExtensionToAsn1=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.id).getBytes())),t.critical&&e.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=re.toDer(r).getBytes()),e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r)),e};Jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),obe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=gn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];gn.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=gn.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;gn.util.isArray(c)||(c=[c]);for(var l=re.toDer(Jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var d=re.toDer(Jt.certificateToAsn1(c[u])).getBytes();if(l===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!gn.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=gn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!gn.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=re.toDer(Jt.certificateToAsn1(a)).getBytes(),d=0;d<l.length;++d){var p=re.toDer(Jt.certificateToAsn1(l[d])).getBytes();u===p&&(c=l[d],l.splice(d,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=gn.md.sha1.create();a.attributes=Jt.RDNAttributesAsArray(KB(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,d=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(d=!0,u=l),u){var p=u;gn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Jt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Jt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var y=l.getExtension("basicConstraints"),x=l.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||y===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Jt.certificateError.bad_certificate}),a===null&&y!==null&&!y.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Jt.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in y){var I=c-1;I>y.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Jt.certificateError.bad_certificate})}}var S=a===null?!0:a.error,R=r.verify?r.verify(S,c,n):S;if(R===!0)a=null;else throw S===!0&&(a={message:"The application rejected the certificate.",error:Jt.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!gn.util.isArray(R)?(R.message&&(a.message=R.message),R.error&&(a.error=R.error)):typeof R=="string"&&(a.error=R)),a;o=!1,++c}while(e.length>0);return!0}});var abe=H((Yfi,not)=>{f();var Fs=bi();SA();$B();HT();nbe();rbe();Th();B7();VB();Oo();ote();var Se=Fs.asn1,Gi=Fs.pki,L7=not.exports=Fs.pkcs12=Fs.pkcs12||{},rot={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Qsr={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},rot,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Usr={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},qsr={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},Hsr={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function N7(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(N7,"_getBagsByAttribute");L7.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Se.validate(t,Qsr,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(y){var x={},I;return"localKeyId"in y?I=y.localKeyId:"localKeyIdHex"in y&&(I=Fs.util.hexToBytes(y.localKeyIdHex)),I===void 0&&!("friendlyName"in y)&&"bagType"in y&&(x[y.bagType]=N7(a.safeContents,null,null,y.bagType)),I!==void 0&&(x.localKeyId=N7(a.safeContents,"localKeyId",I,y.bagType)),"friendlyName"in y&&(x.friendlyName=N7(a.safeContents,"friendlyName",y.friendlyName,y.bagType)),x},"getBags"),getBagsByFriendlyName:s(function(y,x){return N7(a.safeContents,"friendlyName",y,x)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(y,x){return N7(a.safeContents,"localKeyId",y,x)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Se.derToOid(n.contentType)!==Gi.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Se.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Se.Class.UNIVERSAL||c.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=sbe(c),n.mac){var l=null,u=0,d=Se.derToOid(n.macAlgorithm);switch(d){case Gi.oids.sha1:l=Fs.md.sha1.create(),u=20;break;case Gi.oids.sha256:l=Fs.md.sha256.create(),u=32;break;case Gi.oids.sha384:l=Fs.md.sha384.create(),u=48;break;case Gi.oids.sha512:l=Fs.md.sha512.create(),u=64;break;case Gi.oids.md5:l=Fs.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new Fs.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(Fs.util.bytesToHex(n.macIterations),16):1,h=L7.generateKey(r,p,3,m,u,l),g=Fs.hmac.create();g.start(l,h),g.update(c.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return $sr(a,c.value,e,r),a};function sbe(t){if(t.composed||t.constructed){for(var e=Fs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(sbe,"_decodePkcs7Data");function $sr(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Se.validate(o,rot,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Se.derToOid(a.contentType)){case Gi.oids.data:if(p.tagClass!==Se.Class.UNIVERSAL||p.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=sbe(p).value;break;case Gi.oids.encryptedData:d=Wsr(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Se.derToOid(a.contentType),l}u.safeBags=jsr(d,r,n),t.safeContents.push(u)}}s($sr,"_decodeAuthenticatedSafe");function Wsr(t,e){var r={},n=[];if(!Se.validate(t,Fs.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Se.derToOid(r.contentType);if(o!==Gi.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Se.derToOid(r.encAlgorithm);var a=Gi.pbe.getCipher(o,r.encParameter,e),c=sbe(r.encryptedContentAsn1),l=Fs.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(Wsr,"_decryptSafeContents");function jsr(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Se.validate(o,Usr,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Se.derToOid(a.bagId),attributes:Gsr(a.bagAttributes)};n.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case Gi.oids.pkcs8ShroudedKeyBag:if(m=Gi.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Gi.oids.keyBag:try{u.key=Gi.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Gi.oids.certBag:d=Hsr,p=s(function(){if(Se.derToOid(a.certId)!==Gi.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Se.derToOid(a.certId),g}var A=Se.fromDer(a.cert,e);try{u.cert=Gi.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(d!==void 0&&!Se.validate(m,d,a,c)){var l=new Error("Cannot read PKCS#12 "+d.name);throw l.errors=c,l}p()}return n}s(jsr,"_decodeSafeContents");function Gsr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Se.validate(t[r],qsr,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Se.derToOid(n.oid);if(Gi.oids[a]!==void 0){e[Gi.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Gi.oids[a]].push(n.values[c].value)}}return e}s(Gsr,"_decodeBagAttributes");L7.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Fs.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=Fs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Gi.certificateFromPem(a));var c=Fs.md.sha1.create();c.update(Se.toDer(Gi.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=Fs.random.getBytes(20);var l=[];i!==null&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,l));var u=[],d=[];e!==null&&(Fs.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=Gi.certificateFromPem(e));var h=m===0?o:void 0,g=Gi.certificateToAsn1(e),A=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(g).getBytes())])])]),h]);p.push(A)}if(p.length>0){var y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,p),x=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(y).getBytes())])]);u.push(x)}var I=null;if(t!==null){var S=Gi.wrapRsaPrivateKey(Gi.privateKeyToAsn1(t));r===null?I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[S]),o]):I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Gi.encryptPrivateKeyInfo(S,r,n)]),o]);var R=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[I]),B=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(R).getBytes())])]);u.push(B)}var M=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,u),O;if(n.useMac){var c=Fs.md.sha1.create(),K=new Fs.util.ByteBuffer(Fs.random.getBytes(n.saltSize)),V=n.count,t=L7.generateKey(r,K,3,V,20),z=Fs.hmac.create();z.start(c,t),z.update(Se.toDer(M).getBytes());var Q=z.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Q.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,K.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(V).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Gi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(M).getBytes())])]),O])};L7.generateKey=Fs.pbe.generatePkcs12Key});var lbe=H((Xfi,iot)=>{f();var GT=bi();SA();HT();rbe();QR();Yee();abe();rte();B7();Oo();ote();var cbe=GT.asn1,JB=iot.exports=GT.pki=GT.pki||{};JB.pemToDer=function(t){var e=GT.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return GT.util.createBuffer(e.body)};JB.privateKeyFromPem=function(t){var e=GT.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=cbe.fromDer(e.body);return JB.privateKeyFromAsn1(n)};JB.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:cbe.toDer(JB.privateKeyToAsn1(t)).getBytes()};return GT.pem.encode(r,{maxline:e})};JB.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:cbe.toDer(t).getBytes()};return GT.pem.encode(r,{maxline:e})}});var hbe=H((e0i,fot)=>{f();var kt=bi();SA();$B();jee();QR();lbe();Th();VB();Oo();var lte=s(function(t,e,r,n){var i=kt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=kt.util.createBuffer(),d=kt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);d.start("MD5",c);var h=kt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",l);var A=kt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),A.putBuffer(d.digest());return i.putBytes(kt.util.xorBytes(h.getBytes(),A.getBytes(),n)),i},"prf_TLS1"),Vsr=s(function(t,e,r){var n=kt.hmac.create();n.start("SHA1",t);var i=kt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),zsr=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Ysr=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),Op=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return kt.util.createBuffer(t.getBytes(r))},"readVector"),Rh=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),oe={};oe.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};oe.SupportedVersions=[oe.Versions.TLS_1_1,oe.Versions.TLS_1_0];oe.Version=oe.SupportedVersions[0];oe.MaxFragment=15360;oe.ConnectionEnd={server:0,client:1};oe.PRFAlgorithm={tls_prf_sha256:0};oe.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};oe.CipherType={stream:0,block:1,aead:2};oe.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};oe.CompressionMethod={none:0,deflate:1};oe.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};oe.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};oe.Alert={};oe.Alert.Level={warning:1,fatal:2};oe.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};oe.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};oe.CipherSuites={};oe.getCipherSuite=function(t){var e=null;for(var r in oe.CipherSuites){var n=oe.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};oe.handleUnexpected=function(t,e){var r=!t.open&&t.entity===oe.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})};oe.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(oe.queue(t,oe.createAlert(t,{level:oe.Alert.Level.warning,description:oe.Alert.Description.no_renegotiation})),oe.flush(t)),t.process()};oe.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===oe.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:kt.util.createBuffer(o.getBytes(32)),session_id:Op(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=Op(o,2),n.compression_methods=Op(o,1)),a=r-(a-o.length()),a>0){for(var c=Op(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:Op(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var d=Op(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(Op(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=oe.getCipherSuite(n.cipher_suite);else for(var m=kt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=oe.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure},cipherSuite:kt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=oe.CompressionMethod.none}return n};oe.createSecurityParameters=function(t,e){var r=t.entity===oe.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:oe.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:oe.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};oe.handleServerHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=aot,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Jsr,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.session.id=i,t.process()}};oe.handleClientHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=kt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<oe.SupportedVersions.length&&(a=oe.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=pbe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?iar:fbe,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.open=!0,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHello(t)})),t.session.resuming?(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.pending=oe.createConnectionState(t),t.state.current.write=t.state.pending.write,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))):(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)})),t.fail||(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerKeyExchange(t)})),t.verifyClient!==!1&&oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificateRequest(t)})),oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHelloDone(t)})))),oe.flush(t),t.process()}};oe.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Op(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=Op(i.certificate_list,3),a=kt.asn1.fromDer(o),o=kt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var l=t.entity===oe.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?oot:fbe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],oe.verifyCertificateChain(t,c)&&(t.expect=l?oot:fbe)),t.process()};oe.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});t.expect=Xsr,t.process()};oe.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Op(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=kt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=kt.random.getBytes(48)}t.expect=pbe,t.session.clientCertificate!==null&&(t.expect=oar),t.process()};oe.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Op(n,1),certificate_authorities:Op(n,2)};t.session.certificateRequest=i,t.expect=Zsr,t.process()};oe.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:Op(n,2).getBytes()},a=kt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure}})}t.expect=pbe,t.process()};oe.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!kt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)}),oe.queue(t,e)),e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createClientKeyExchange(t)}),oe.queue(t,e),t.expect=rar;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createCertificateVerify(c,l)})),oe.queue(c,oe.createRecord(c,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),c.state.pending=oe.createConnectionState(c),c.state.current.write=c.state.pending.write,oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createFinished(c)})),c.expect=aot,oe.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);oe.getClientSignature(t,a)};oe.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var r=t.entity===oe.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=oe.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?ear:sar,t.process()};oe.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=kt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===oe.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,d=lte;if(n=d(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))),t.expect=a?tar:aar,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,oe.flush(t),t.isConnected=!0,t.connected(t),t.process()};oe.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case oe.Alert.Description.close_notify:i="Connection closed.";break;case oe.Alert.Description.unexpected_message:i="Unexpected message.";break;case oe.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case oe.Alert.Description.decryption_failed:i="Decryption failed.";break;case oe.Alert.Description.record_overflow:i="Record overflow.";break;case oe.Alert.Description.decompression_failure:i="Decompression failed.";break;case oe.Alert.Description.handshake_failure:i="Handshake failure.";break;case oe.Alert.Description.bad_certificate:i="Bad certificate.";break;case oe.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case oe.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case oe.Alert.Description.certificate_expired:i="Certificate expired.";break;case oe.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case oe.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case oe.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case oe.Alert.Description.access_denied:i="Access denied.";break;case oe.Alert.Description.decode_error:i="Decode error.";break;case oe.Alert.Description.decrypt_error:i="Decrypt error.";break;case oe.Alert.Description.export_restriction:i="Export restriction.";break;case oe.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case oe.Alert.Description.insufficient_security:i="Insufficient security.";break;case oe.Alert.Description.internal_error:i="Internal error.";break;case oe.Alert.Description.user_canceled:i="User canceled.";break;case oe.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===oe.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===oe.ConnectionEnd.client?"server":"client",alert:n}),t.process()};oe.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=kt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in cte[t.entity][t.expect]?(t.entity===oe.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:kt.md.md5.create(),sha1:kt.md.sha1.create()}),n!==oe.HandshakeType.hello_request&&n!==oe.HandshakeType.certificate_verify&&n!==oe.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),cte[t.entity][t.expect][n](t,e,i)):oe.handleUnexpected(t,e)};oe.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};oe.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===oe.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();oe.queue(t,oe.createRecord(t,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_response,o)})),oe.flush(t)}else if(n===oe.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,kt.util.createBuffer(o))}t.process()};var Ksr=0,Jsr=1,oot=2,Xsr=3,Zsr=4,aot=5,ear=6,tar=7,rar=8,nar=0,iar=1,fbe=2,oar=3,pbe=4,sar=5,aar=6,ne=oe.handleUnexpected,cot=oe.handleChangeCipherSpec,qu=oe.handleAlert,Ef=oe.handleHandshake,lot=oe.handleApplicationData,Hu=oe.handleHeartbeat,mbe=[];mbe[oe.ConnectionEnd.client]=[[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[cot,qu,ne,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,lot,Hu],[ne,qu,Ef,ne,Hu]];mbe[oe.ConnectionEnd.server]=[[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,ne,Hu],[cot,qu,ne,ne,Hu],[ne,qu,Ef,ne,Hu],[ne,qu,Ef,lot,Hu],[ne,qu,Ef,ne,Hu]];var VT=oe.handleHelloRequest,car=oe.handleServerHello,uot=oe.handleCertificate,sot=oe.handleServerKeyExchange,ube=oe.handleCertificateRequest,ste=oe.handleServerHelloDone,dot=oe.handleFinished,cte=[];cte[oe.ConnectionEnd.client]=[[ne,ne,car,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,uot,sot,ube,ste,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,sot,ube,ste,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ube,ste,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ste,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,dot],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[VT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];var lar=oe.handleClientHello,uar=oe.handleClientKeyExchange,dar=oe.handleCertificateVerify;cte[oe.ConnectionEnd.server]=[[ne,lar,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,uot,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,uar,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,dar,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,dot],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];oe.generateKeys=function(t,e){var r=lte,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===oe.Versions.TLS_1_0.major&&t.version.minor===oe.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};oe.createConnectionState=function(t){var e=t.entity===oe.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=oe.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case oe.CompressionMethod.none:break;case oe.CompressionMethod.deflate:n.read.compressFunction=Ysr,n.write.compressFunction=zsr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};oe.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=kt.util.createBuffer();return r.putInt32(e),r.putBytes(kt.random.getBytes(28)),r};oe.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};oe.createAlert=function(t,e){var r=kt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),oe.createRecord(t,{type:oe.ContentType.alert,data:r})};oe.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=kt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=kt.util.createBuffer();o.putByte(oe.CompressionMethod.none);var a=o.length(),c=kt.util.createBuffer();if(t.virtualHost){var l=kt.util.createBuffer();l.putByte(0),l.putByte(0);var u=kt.util.createBuffer();u.putByte(0),Rh(u,2,kt.util.createBuffer(t.virtualHost));var d=kt.util.createBuffer();Rh(d,2,u),Rh(l,2,d),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=kt.util.createBuffer();return g.putByte(oe.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),Rh(g,1,kt.util.createBuffer(m)),Rh(g,2,e),Rh(g,1,o),p>0&&Rh(g,2,c),g};oe.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Rh(n,1,kt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};oe.createCertificate=function(t){var e=t.entity===oe.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=kt.util.createBuffer();if(r!==null)try{kt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=kt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=kt.util.createBuffer(c.body);o===null&&(o=kt.asn1.fromDer(u.bytes(),!1));var d=kt.util.createBuffer();Rh(d,3,u),i.putBuffer(d)}r=kt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var p=3+i.length(),m=kt.util.createBuffer();return m.putByte(oe.HandshakeType.certificate),m.putInt24(p),Rh(m,3,i),m};oe.createClientKeyExchange=function(t){var e=kt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(kt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=kt.util.createBuffer();return o.putByte(oe.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};oe.createServerKeyExchange=function(t){var e=0,r=kt.util.createBuffer();return e>0&&(r.putByte(oe.HandshakeType.server_key_exchange),r.putInt24(e)),r};oe.getClientSignature=function(t,e){var r=kt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=kt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};oe.createCertificateVerify=function(t,e){var r=e.length+2,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};oe.createCertificateRequest=function(t){var e=kt.util.createBuffer();e.putByte(1);var r=kt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=kt.pki.distinguishedNameToAsn1(i.subject),a=kt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=kt.util.createBuffer();return l.putByte(oe.HandshakeType.certificate_request),l.putInt24(c),Rh(l,1,e),Rh(l,2,r),l};oe.createServerHelloDone=function(t){var e=kt.util.createBuffer();return e.putByte(oe.HandshakeType.server_hello_done),e.putInt24(0),e};oe.createChangeCipherSpec=function(){var t=kt.util.createBuffer();return t.putByte(1),t};oe.createFinished=function(t){var e=kt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===oe.ConnectionEnd.client,n=t.session.sp,i=12,o=lte,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=kt.util.createBuffer();return c.putByte(oe.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};oe.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=kt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(kt.random.getBytes(o)),n};oe.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===oe.ContentType.handshake||e.type===oe.ContentType.alert||e.type===oe.ContentType.change_cipher_spec))){if(e.type===oe.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=oe.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>oe.MaxFragment;)n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i.slice(0,oe.MaxFragment))})),i=i.slice(oe.MaxFragment);i.length>0&&n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};oe.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var dbe=s(function(t){switch(t){case!0:return!0;case kt.pki.certificateError.bad_certificate:return oe.Alert.Description.bad_certificate;case kt.pki.certificateError.unsupported_certificate:return oe.Alert.Description.unsupported_certificate;case kt.pki.certificateError.certificate_revoked:return oe.Alert.Description.certificate_revoked;case kt.pki.certificateError.certificate_expired:return oe.Alert.Description.certificate_expired;case kt.pki.certificateError.certificate_unknown:return oe.Alert.Description.certificate_unknown;case kt.pki.certificateError.unknown_ca:return oe.Alert.Description.unknown_ca;default:return oe.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),far=s(function(t){switch(t){case!0:return!0;case oe.Alert.Description.bad_certificate:return kt.pki.certificateError.bad_certificate;case oe.Alert.Description.unsupported_certificate:return kt.pki.certificateError.unsupported_certificate;case oe.Alert.Description.certificate_revoked:return kt.pki.certificateError.certificate_revoked;case oe.Alert.Description.certificate_expired:return kt.pki.certificateError.certificate_expired;case oe.Alert.Description.certificate_unknown:return kt.pki.certificateError.certificate_unknown;case oe.Alert.Description.unknown_ca:return kt.pki.certificateError.unknown_ca;default:return kt.pki.certificateError.bad_certificate}},"_alertDescToCertError");oe.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=dbe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!kt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=far(u))}return u},kt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||kt.util.isArray(i))&&(i={send:!0,alert:{level:oe.Alert.Level.fatal,description:dbe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:oe.Alert.Level.fatal,description:dbe(i.error)}),t.error(t,i)}return!t.fail};oe.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=kt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=kt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};oe.createConnection=function(t){var e=null;t.caStore?kt.util.isArray(t.caStore)?e=kt.pki.createCaStore(t.caStore):e=t.caStore:e=kt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in oe.CipherSuites)r.push(oe.CipherSuites[n])}var i=t.server?oe.ConnectionEnd.server:oe.ConnectionEnd.client,o=t.sessionCache?oe.createSessionCache(t.sessionCache):null,a={version:{major:oe.Version.major,minor:oe.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:kt.util.createBuffer(),tlsData:kt.util.createBuffer(),data:kt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===oe.ConnectionEnd.client?"client":"server"),p.send&&(oe.queue(d,oe.createAlert(d,p.alert)),oe.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:oe.Version.major,minor:oe.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===oe.ConnectionEnd.client?Ksr:nar,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=oe.createConnectionState(a)},a.reset();var c=s(function(d,p){var m=p.type-oe.ContentType.change_cipher_spec,h=mbe[d.entity][d.expect];m in h?h[m](d,p):oe.handleUnexpected(d,p)},"_update"),l=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:kt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==oe.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:kt.md.md5.create(),sha1:kt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=oe.createRandom().getBytes(),a.open=!0,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.handshake,data:oe.createClientHello(a)})),oe.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(d){return oe.queue(a,oe.createRecord(a,{type:oe.ContentType.application_data,data:kt.util.createBuffer(d)})),oe.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof kt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_request,d,p)})),oe.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,oe.queue(a,oe.createAlert(a,{level:oe.Alert.Level.warning,description:oe.Alert.Description.close_notify})),oe.flush(a)),a.closed(a)),a.reset(d)},a};fot.exports=kt.tls=kt.tls||{};for(ate in oe)typeof oe[ate]!="function"&&(kt.tls[ate]=oe[ate]);var ate;kt.tls.prf_tls1=lte;kt.tls.hmac_sha1=Vsr;kt.tls.createSessionCache=oe.createSessionCache;kt.tls.createConnection=oe.createConnection});var hot=H((n0i,mot)=>{f();var zT=bi();qT();hbe();var kh=mot.exports=zT.tls;kh.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=kh.BulkCipherAlgorithm.aes,t.cipher_type=kh.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=kh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:pot};kh.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=kh.BulkCipherAlgorithm.aes,t.cipher_type=kh.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=kh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:pot};function pot(t,e,r){var n=e.entity===zT.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:zT.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:zT.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=gar,t.write.cipherFunction=par,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=kh.hmac_sha1}s(pot,"initConnectionState");function par(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===kh.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=zT.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=kh.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(mar)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(par,"encrypt_aes_cbc_sha1");function mar(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(mar,"encrypt_aes_cbc_sha1_padding");function har(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(har,"decrypt_aes_cbc_sha1_padding");function gar(t,e){var r=!1,n;t.version.minor===kh.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(har);var o=e.macLength,a=zT.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=zT.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Aar(e.macKey,a,l)&&r,r}s(gar,"decrypt_aes_cbc_sha1");function Aar(t,e,r){var n=zT.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(Aar,"compareMacs")});var ybe=H((s0i,Cot)=>{f();var ia=bi();QC();Oo();var M7=Cot.exports=ia.sha512=ia.sha512||{};ia.md.sha512=ia.md.algorithms.sha512=M7;var Aot=ia.sha384=ia.sha512.sha384=ia.sha512.sha384||{};Aot.create=function(){return M7.create("SHA-384")};ia.md.sha384=ia.md.algorithms.sha384=Aot;ia.sha512.sha256=ia.sha512.sha256||{create:s(function(){return M7.create("SHA-512/256")},"create")};ia.md["sha512/256"]=ia.md.algorithms["sha512/256"]=ia.sha512.sha256;ia.sha512.sha224=ia.sha512.sha224||{create:s(function(){return M7.create("SHA-512/224")},"create")};ia.md["sha512/224"]=ia.md.algorithms["sha512/224"]=ia.sha512.sha224;M7.create=function(t){if(yot||yar(),typeof t>"u"&&(t="SHA-512"),!(t in jR))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=jR[t],r=null,n=ia.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=ia.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=ia.util.encodeUtf8(l));var d=l.length;c.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=d[1],d[1]=d[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(l),got(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=ia.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,d=u&c.blockLength-1;l.putBytes(gbe.substr(0,c.blockLength-d));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);got(A,i,l);var y=ia.util.createBuffer(),x;t==="SHA-512"?x=A.length:t==="SHA-384"?x=A.length-2:x=A.length-4;for(var g=0;g<x;++g)y.putInt32(A[g][0]),(g!==x-1||t!=="SHA-512/224")&&y.putInt32(A[g][1]);return y},c};var gbe=null,yot=!1,Abe=null,jR=null;function yar(){gbe="\x80",gbe+=ia.util.fillString("\0",128),Abe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],jR={},jR["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],jR["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],jR["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],jR["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],yot=!0}s(yar,"_init");function got(t,e,r){for(var n,i,o,a,c,l,u,d,p,m,h,g,A,y,x,I,S,R,B,M,O,K,V,z,Q,U,Z,J,j,$,X,ie,ae,te,pe,Ae=r.length();Ae>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ie=e[j-2],$=ie[0],X=ie[1],n=(($>>>19|X<<13)^(X>>>29|$<<3)^$>>>6)>>>0,i=(($<<13|X>>>19)^(X<<3|$>>>29)^($<<26|X>>>6))>>>0,te=e[j-15],$=te[0],X=te[1],o=(($>>>1|X<<31)^($>>>8|X<<24)^$>>>7)>>>0,a=(($<<31|X>>>1)^($<<24|X>>>8)^($<<25|X>>>7))>>>0,ae=e[j-7],pe=e[j-16],X=i+ae[1]+a+pe[1],e[j][0]=n+ae[0]+o+pe[0]+(X/4294967296>>>0)>>>0,e[j][1]=X>>>0;for(A=t[0][0],y=t[0][1],x=t[1][0],I=t[1][1],S=t[2][0],R=t[2][1],B=t[3][0],M=t[3][1],O=t[4][0],K=t[4][1],V=t[5][0],z=t[5][1],Q=t[6][0],U=t[6][1],Z=t[7][0],J=t[7][1],j=0;j<80;++j)u=((O>>>14|K<<18)^(O>>>18|K<<14)^(K>>>9|O<<23))>>>0,d=((O<<18|K>>>14)^(O<<14|K>>>18)^(K<<23|O>>>9))>>>0,p=(Q^O&(V^Q))>>>0,m=(U^K&(z^U))>>>0,c=((A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25))>>>0,l=((A<<4|y>>>28)^(y<<30|A>>>2)^(y<<25|A>>>7))>>>0,h=(A&x|S&(A^x))>>>0,g=(y&I|R&(y^I))>>>0,X=J+d+m+Abe[j][1]+e[j][1],n=Z+u+p+Abe[j][0]+e[j][0]+(X/4294967296>>>0)>>>0,i=X>>>0,X=l+g,o=c+h+(X/4294967296>>>0)>>>0,a=X>>>0,Z=Q,J=U,Q=V,U=z,V=O,z=K,X=M+i,O=B+n+(X/4294967296>>>0)>>>0,K=X>>>0,B=S,M=R,S=x,R=I,x=A,I=y,X=i+a,A=n+o+(X/4294967296>>>0)>>>0,y=X>>>0;X=t[0][1]+y,t[0][0]=t[0][0]+A+(X/4294967296>>>0)>>>0,t[0][1]=X>>>0,X=t[1][1]+I,t[1][0]=t[1][0]+x+(X/4294967296>>>0)>>>0,t[1][1]=X>>>0,X=t[2][1]+R,t[2][0]=t[2][0]+S+(X/4294967296>>>0)>>>0,t[2][1]=X>>>0,X=t[3][1]+M,t[3][0]=t[3][0]+B+(X/4294967296>>>0)>>>0,t[3][1]=X>>>0,X=t[4][1]+K,t[4][0]=t[4][0]+O+(X/4294967296>>>0)>>>0,t[4][1]=X>>>0,X=t[5][1]+z,t[5][0]=t[5][0]+V+(X/4294967296>>>0)>>>0,t[5][1]=X>>>0,X=t[6][1]+U,t[6][0]=t[6][0]+Q+(X/4294967296>>>0)>>>0,t[6][1]=X>>>0,X=t[7][1]+J,t[7][0]=t[7][0]+Z+(X/4294967296>>>0)>>>0,t[7][1]=X>>>0,Ae-=128}}s(got,"_update")});var vot=H(Cbe=>{f();var Car=bi();SA();var su=Car.asn1;Cbe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:su.Class.UNIVERSAL,type:su.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:su.Class.UNIVERSAL,type:su.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:su.Class.UNIVERSAL,type:su.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:su.Class.UNIVERSAL,type:su.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:su.Class.UNIVERSAL,type:su.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Cbe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:su.Class.UNIVERSAL,type:su.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:su.Class.UNIVERSAL,type:su.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:su.Class.UNIVERSAL,type:su.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:su.Class.UNIVERSAL,type:su.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Bot=H((d0i,Dot)=>{f();var $u=bi();D7();Th();ybe();Oo();var wot=vot(),Ear=wot.publicKeyValidator,xar=wot.privateKeyValidator;typeof Eot>"u"&&(Eot=$u.jsbn.BigInteger);var Eot,xbe=$u.util.ByteBuffer,b0=typeof Buffer>"u"?Uint8Array:Buffer;$u.pki=$u.pki||{};Dot.exports=$u.pki.ed25519=$u.ed25519=$u.ed25519||{};var Vi=$u.ed25519;Vi.constants={};Vi.constants.PUBLIC_KEY_BYTE_LENGTH=32;Vi.constants.PRIVATE_KEY_BYTE_LENGTH=64;Vi.constants.SEED_BYTE_LENGTH=32;Vi.constants.SIGN_BYTE_LENGTH=64;Vi.constants.HASH_BYTE_LENGTH=64;Vi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=$u.random.getBytesSync(Vi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Vi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Vi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=RE({message:e,encoding:"binary"});for(var r=new b0(Vi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new b0(Vi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return war(r,n),{publicKey:r,privateKey:n}};Vi.privateKeyFromAsn1=function(t){var e={},r=[],n=$u.asn1.validate(t,xar,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=$u.asn1.derToOid(e.privateKeyOid),a=$u.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=RE({message:$u.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};Vi.publicKeyFromAsn1=function(t){var e={},r=[],n=$u.asn1.validate(t,Ear,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=$u.asn1.derToOid(e.publicKeyOid),a=$u.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==Vi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return RE({message:c,encoding:"binary"})};Vi.publicKeyFromPrivateKey=function(t){t=t||{};var e=RE({message:t.privateKey,encoding:"binary"});if(e.length!==Vi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Vi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new b0(Vi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Vi.sign=function(t){t=t||{};var e=RE(t),r=RE({message:t.privateKey,encoding:"binary"});if(r.length===Vi.constants.SEED_BYTE_LENGTH){var n=Vi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Vi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Vi.constants.SEED_BYTE_LENGTH+" or "+Vi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new b0(Vi.constants.SIGN_BYTE_LENGTH+e.length);Sar(i,e,e.length,r);for(var o=new b0(Vi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Vi.verify=function(t){t=t||{};var e=RE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=RE({message:t.signature,encoding:"binary"});if(r.length!==Vi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Vi.constants.SIGN_BYTE_LENGTH);var n=RE({message:t.publicKey,encoding:"binary"});if(n.length!==Vi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Vi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new b0(Vi.constants.SIGN_BYTE_LENGTH+e.length),o=new b0(Vi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Vi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Vi.constants.SIGN_BYTE_LENGTH]=e[a];return _ar(o,i,i.length,n)>=0};function RE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof b0)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new xbe(e,r)}else if(!(e instanceof xbe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new b0(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(RE,"messageToNativeBuffer");var bbe=Dn(),ute=Dn([1]),bar=Dn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Iar=Dn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),xot=Dn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),bot=Dn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),vbe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Tar=Dn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function F7(t,e){var r=$u.md.sha512.create(),n=new xbe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new b0(Vi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(F7,"sha512");function war(t,e){var r=[Dn(),Dn(),Dn(),Dn()],n,i=F7(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Sbe(r,i),wbe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(war,"crypto_sign_keypair");function Sar(t,e,r,n){var i,o,a=new Float64Array(64),c=[Dn(),Dn(),Dn(),Dn()],l=F7(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var d=F7(t.subarray(32),r+32);for(Ibe(d),Sbe(c,d),wbe(t,c),i=32;i<64;++i)t[i]=n[i];var p=F7(t,r+64);for(Ibe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return Sot(t.subarray(32),a),u}s(Sar,"crypto_sign");function _ar(t,e,r,n){var i,o,a=new b0(32),c=[Dn(),Dn(),Dn(),Dn()],l=[Dn(),Dn(),Dn(),Dn()];if(o=-1,r<64||Rar(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=F7(t,r);if(Ibe(u),kot(c,l,u),Sbe(l,e.subarray(32)),Tbe(c,l),wbe(a,c),r-=64,_ot(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(_ar,"crypto_sign_open");function Sot(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*vbe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*vbe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*vbe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(Sot,"modL");function Ibe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;Sot(t,e)}s(Ibe,"reduce");function Tbe(t,e){var r=Dn(),n=Dn(),i=Dn(),o=Dn(),a=Dn(),c=Dn(),l=Dn(),u=Dn(),d=Dn();ZB(r,t[1],t[0]),ZB(d,e[1],e[0]),bs(r,r,d),XB(n,t[0],t[1]),XB(d,e[0],e[1]),bs(n,n,d),bs(i,t[3],e[3]),bs(i,i,Iar),bs(o,t[2],e[2]),XB(o,o,o),ZB(a,n,r),ZB(c,o,i),XB(l,o,i),XB(u,n,r),bs(t[0],a,c),bs(t[1],u,l),bs(t[2],l,c),bs(t[3],a,u)}s(Tbe,"add");function Iot(t,e,r){for(var n=0;n<4;++n)Pot(t[n],e[n],r)}s(Iot,"cswap");function wbe(t,e){var r=Dn(),n=Dn(),i=Dn();Bar(i,e[2]),bs(r,e[0],i),bs(n,e[1],i),dte(t,n),t[31]^=Rot(r)<<7}s(wbe,"pack");function dte(t,e){var r,n,i,o=Dn(),a=Dn();for(r=0;r<16;++r)a[r]=e[r];for(Ebe(a),Ebe(a),Ebe(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Pot(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(dte,"pack25519");function Rar(t,e){var r=Dn(),n=Dn(),i=Dn(),o=Dn(),a=Dn(),c=Dn(),l=Dn();return YT(t[2],ute),kar(t[1],e),GR(i,t[1]),bs(o,i,bar),ZB(i,i,t[2]),XB(o,t[2],o),GR(a,o),GR(c,a),bs(l,c,a),bs(r,l,i),bs(r,r,o),Par(r,r),bs(r,r,i),bs(r,r,o),bs(r,r,o),bs(t[0],r,o),GR(n,t[0]),bs(n,n,o),Tot(n,i)&&bs(t[0],t[0],Tar),GR(n,t[0]),bs(n,n,o),Tot(n,i)?-1:(Rot(t[0])===e[31]>>7&&ZB(t[0],bbe,t[0]),bs(t[3],t[0],t[1]),0)}s(Rar,"unpackneg");function kar(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(kar,"unpack25519");function Par(t,e){var r=Dn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)GR(r,r),n!==1&&bs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Par,"pow2523");function Tot(t,e){var r=new b0(32),n=new b0(32);return dte(r,t),dte(n,e),_ot(r,0,n,0)}s(Tot,"neq25519");function _ot(t,e,r,n){return Dar(t,e,r,n,32)}s(_ot,"crypto_verify_32");function Dar(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(Dar,"vn");function Rot(t){var e=new b0(32);return dte(e,t),e[0]&1}s(Rot,"par25519");function kot(t,e,r){var n,i;for(YT(t[0],bbe),YT(t[1],ute),YT(t[2],ute),YT(t[3],bbe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Iot(t,e,n),Tbe(e,t),Tbe(t,t),Iot(t,e,n)}s(kot,"scalarmult");function Sbe(t,e){var r=[Dn(),Dn(),Dn(),Dn()];YT(r[0],xot),YT(r[1],bot),YT(r[2],ute),bs(r[3],xot,bot),kot(t,r,e)}s(Sbe,"scalarbase");function YT(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(YT,"set25519");function Bar(t,e){var r=Dn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)GR(r,r),n!==2&&n!==4&&bs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Bar,"inv25519");function Ebe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Ebe,"car25519");function Pot(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Pot,"sel25519");function Dn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Dn,"gf");function XB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(XB,"A");function ZB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(ZB,"Z");function GR(t,e){bs(t,e,e)}s(GR,"S");function bs(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=0,A=0,y=0,x=0,I=0,S=0,R=0,B=0,M=0,O=0,K=0,V=0,z=0,Q=0,U=0,Z=0,J=0,j=0,$=0,X=0,ie=0,ae=0,te=r[0],pe=r[1],Ae=r[2],Oe=r[3],Te=r[4],Je=r[5],Me=r[6],lt=r[7],_t=r[8],Et=r[9],ht=r[10],ue=r[11],Ue=r[12],ye=r[13],$e=r[14],se=r[15];n=e[0],o+=n*te,a+=n*pe,c+=n*Ae,l+=n*Oe,u+=n*Te,d+=n*Je,p+=n*Me,m+=n*lt,h+=n*_t,g+=n*Et,A+=n*ht,y+=n*ue,x+=n*Ue,I+=n*ye,S+=n*$e,R+=n*se,n=e[1],a+=n*te,c+=n*pe,l+=n*Ae,u+=n*Oe,d+=n*Te,p+=n*Je,m+=n*Me,h+=n*lt,g+=n*_t,A+=n*Et,y+=n*ht,x+=n*ue,I+=n*Ue,S+=n*ye,R+=n*$e,B+=n*se,n=e[2],c+=n*te,l+=n*pe,u+=n*Ae,d+=n*Oe,p+=n*Te,m+=n*Je,h+=n*Me,g+=n*lt,A+=n*_t,y+=n*Et,x+=n*ht,I+=n*ue,S+=n*Ue,R+=n*ye,B+=n*$e,M+=n*se,n=e[3],l+=n*te,u+=n*pe,d+=n*Ae,p+=n*Oe,m+=n*Te,h+=n*Je,g+=n*Me,A+=n*lt,y+=n*_t,x+=n*Et,I+=n*ht,S+=n*ue,R+=n*Ue,B+=n*ye,M+=n*$e,O+=n*se,n=e[4],u+=n*te,d+=n*pe,p+=n*Ae,m+=n*Oe,h+=n*Te,g+=n*Je,A+=n*Me,y+=n*lt,x+=n*_t,I+=n*Et,S+=n*ht,R+=n*ue,B+=n*Ue,M+=n*ye,O+=n*$e,K+=n*se,n=e[5],d+=n*te,p+=n*pe,m+=n*Ae,h+=n*Oe,g+=n*Te,A+=n*Je,y+=n*Me,x+=n*lt,I+=n*_t,S+=n*Et,R+=n*ht,B+=n*ue,M+=n*Ue,O+=n*ye,K+=n*$e,V+=n*se,n=e[6],p+=n*te,m+=n*pe,h+=n*Ae,g+=n*Oe,A+=n*Te,y+=n*Je,x+=n*Me,I+=n*lt,S+=n*_t,R+=n*Et,B+=n*ht,M+=n*ue,O+=n*Ue,K+=n*ye,V+=n*$e,z+=n*se,n=e[7],m+=n*te,h+=n*pe,g+=n*Ae,A+=n*Oe,y+=n*Te,x+=n*Je,I+=n*Me,S+=n*lt,R+=n*_t,B+=n*Et,M+=n*ht,O+=n*ue,K+=n*Ue,V+=n*ye,z+=n*$e,Q+=n*se,n=e[8],h+=n*te,g+=n*pe,A+=n*Ae,y+=n*Oe,x+=n*Te,I+=n*Je,S+=n*Me,R+=n*lt,B+=n*_t,M+=n*Et,O+=n*ht,K+=n*ue,V+=n*Ue,z+=n*ye,Q+=n*$e,U+=n*se,n=e[9],g+=n*te,A+=n*pe,y+=n*Ae,x+=n*Oe,I+=n*Te,S+=n*Je,R+=n*Me,B+=n*lt,M+=n*_t,O+=n*Et,K+=n*ht,V+=n*ue,z+=n*Ue,Q+=n*ye,U+=n*$e,Z+=n*se,n=e[10],A+=n*te,y+=n*pe,x+=n*Ae,I+=n*Oe,S+=n*Te,R+=n*Je,B+=n*Me,M+=n*lt,O+=n*_t,K+=n*Et,V+=n*ht,z+=n*ue,Q+=n*Ue,U+=n*ye,Z+=n*$e,J+=n*se,n=e[11],y+=n*te,x+=n*pe,I+=n*Ae,S+=n*Oe,R+=n*Te,B+=n*Je,M+=n*Me,O+=n*lt,K+=n*_t,V+=n*Et,z+=n*ht,Q+=n*ue,U+=n*Ue,Z+=n*ye,J+=n*$e,j+=n*se,n=e[12],x+=n*te,I+=n*pe,S+=n*Ae,R+=n*Oe,B+=n*Te,M+=n*Je,O+=n*Me,K+=n*lt,V+=n*_t,z+=n*Et,Q+=n*ht,U+=n*ue,Z+=n*Ue,J+=n*ye,j+=n*$e,$+=n*se,n=e[13],I+=n*te,S+=n*pe,R+=n*Ae,B+=n*Oe,M+=n*Te,O+=n*Je,K+=n*Me,V+=n*lt,z+=n*_t,Q+=n*Et,U+=n*ht,Z+=n*ue,J+=n*Ue,j+=n*ye,$+=n*$e,X+=n*se,n=e[14],S+=n*te,R+=n*pe,B+=n*Ae,M+=n*Oe,O+=n*Te,K+=n*Je,V+=n*Me,z+=n*lt,Q+=n*_t,U+=n*Et,Z+=n*ht,J+=n*ue,j+=n*Ue,$+=n*ye,X+=n*$e,ie+=n*se,n=e[15],R+=n*te,B+=n*pe,M+=n*Ae,O+=n*Oe,K+=n*Te,V+=n*Je,z+=n*Me,Q+=n*lt,U+=n*_t,Z+=n*Et,J+=n*ht,j+=n*ue,$+=n*Ue,X+=n*ye,ie+=n*$e,ae+=n*se,o+=38*B,a+=38*M,c+=38*O,l+=38*K,u+=38*V,d+=38*z,p+=38*Q,m+=38*U,h+=38*Z,g+=38*J,A+=38*j,y+=38*$,x+=38*X,I+=38*ie,S+=38*ae,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=A,t[11]=y,t[12]=x,t[13]=I,t[14]=S,t[15]=R}s(bs,"M")});var Fot=H((m0i,Mot)=>{f();var Qp=bi();Oo();Th();D7();Mot.exports=Qp.kem=Qp.kem||{};var Not=Qp.jsbn.BigInteger;Qp.kem.rsa={};Qp.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Qp.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new Not(Qp.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(Not.ONE)<=0);c=Qp.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=Qp.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),d=t.generate(c,o);return{encapsulation:u,key:d}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};Qp.kem.kdf1=function(t,e){Lot(this,t,0,e||t.digestLength)};Qp.kem.kdf2=function(t,e){Lot(this,t,1,e||t.digestLength)};function Lot(t,e,r,n){t.generate=function(i,o){for(var a=new Qp.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new Qp.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(Lot,"_createKDF")});var qot=H((A0i,Uot)=>{f();var uo=bi();Oo();Uot.exports=uo.log=uo.log||{};uo.log.levels=["none","error","warning","info","debug","verbose","max"];var fte={},kbe=[],Q7=null;uo.log.LEVEL_LOCKED=2;uo.log.NO_LEVEL_CHECK=4;uo.log.INTERPOLATE=8;for(VC=0;VC<uo.log.levels.length;++VC)_be=uo.log.levels[VC],fte[_be]={index:VC,name:_be.toUpperCase()};var _be,VC;uo.log.logMessage=function(t){for(var e=fte[t.level].index,r=0;r<kbe.length;++r){var n=kbe[r];if(n.flags&uo.log.NO_LEVEL_CHECK)n.f(t);else{var i=fte[n.level].index;e<=i&&n.f(n,t)}}};uo.log.prepareStandard=function(t){"standard"in t||(t.standard=fte[t.level].name+" ["+t.category+"] "+t.message)};uo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=uo.util.format.apply(this,e)}};uo.log.prepareStandardFull=function(t){"standardFull"in t||(uo.log.prepareStandard(t),t.standardFull=t.standard)};for(Rbe=["error","warning","info","debug","verbose"],VC=0;VC<Rbe.length;++VC)(function(e){uo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};uo.log.logMessage(o)}})(Rbe[VC]);var Rbe,VC;uo.log.makeLogger=function(t){var e={flags:0,f:t};return uo.log.setLevel(e,"none"),e};uo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&uo.log.LEVEL_LOCKED))for(var n=0;n<uo.log.levels.length;++n){var i=uo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};uo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=uo.log.LEVEL_LOCKED:t.flags&=~uo.log.LEVEL_LOCKED};uo.log.addLogger=function(t){kbe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Oot={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},U7=s(function(t,e){uo.log.prepareStandard(e);var r=Oot[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),eN=uo.log.makeLogger(U7)):(U7=s(function(e,r){uo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),eN=uo.log.makeLogger(U7)),uo.log.setLevel(eN,"debug"),uo.log.addLogger(eN),Q7=eN):console={log:s(function(){},"log")};var eN,Oot,U7;Q7!==null&&typeof window<"u"&&window.location&&(O7=new URL(window.location.href).searchParams,O7.has("console.level")&&uo.log.setLevel(Q7,O7.get("console.level").slice(-1)[0]),O7.has("console.lock")&&(Qot=O7.get("console.lock").slice(-1)[0],Qot=="true"&&uo.log.lock(Q7)));var O7,Qot;uo.log.consoleLogger=Q7});var $ot=H((v0i,Hot)=>{f();Hot.exports=QC();jee();VB();$xe();ybe()});var Got=H((x0i,jot)=>{f();var ar=bi();qT();SA();k7();HT();QR();nbe();Th();Oo();ote();var De=ar.asn1,xf=jot.exports=ar.pkcs7=ar.pkcs7||{};xf.messageFromPem=function(t){var e=ar.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=De.fromDer(e.body);return xf.messageFromAsn1(n)};xf.messageToPem=function(t,e){var r={type:"PKCS7",body:De.toDer(t.toAsn1()).getBytes()};return ar.pem.encode(r,{maxline:e})};xf.messageFromAsn1=function(t){var e={},r=[];if(!De.validate(t,xf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=De.derToOid(e.contentType),o;switch(i){case ar.pki.oids.envelopedData:o=xf.createEnvelopedData();break;case ar.pki.oids.encryptedData:o=xf.createEncryptedData();break;case ar.pki.oids.signedData:o=xf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};xf.createSignedData=function(){var t=null;return t={type:ar.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Dbe(t,n,xf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(ar.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(ar.pki.certificateToAsn1(t.certificates[i]));var o=[],a=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.signerInfos)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=ar.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=ar.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||ar.pki.oids.sha1;switch(l){case ar.pki.oids.sha1:case ar.pki.oids.sha256:case ar.pki.oids.sha384:case ar.pki.oids.sha512:case ar.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===ar.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===ar.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:ar.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(ar.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof ar.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=ar.util.encodeUtf8(t.content)),n.detached?t.detachedContent=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=ar.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=ar.md[ar.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=ar.md[ar.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(a).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=De.derToOid(t.contentInfo.value[0].value),a=De.toDer(i);a.getByte(),De.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==ar.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===ar.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===ar.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(Pbe(h)),d.authenticatedAttributesAsn1.value.push(Pbe(h))}a=De.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Qar(t.signers)}s(r,"addSignerInfos")};xf.createEncryptedData=function(){var t=null;return t={type:ar.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:ar.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Dbe(t,e,xf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),Wot(t)},"decrypt")},t};xf.createEnvelopedData=function(){var t=null;return t={type:ar.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:ar.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Dbe(t,e,xf.asn1.envelopedDataValidator);t.recipients=Mar(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,Far(t.recipients)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,Uar(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case ar.pki.oids.rsaEncryption:case ar.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=ar.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Wot(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:ar.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case ar.pki.oids["aes128-CBC"]:n=16,i=16,o=ar.aes.createEncryptionCipher;break;case ar.pki.oids["aes192-CBC"]:n=24,i=16,o=ar.aes.createEncryptionCipher;break;case ar.pki.oids["aes256-CBC"]:n=32,i=16,o=ar.aes.createEncryptionCipher;break;case ar.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=ar.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=ar.util.createBuffer(ar.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=ar.util.createBuffer(ar.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case ar.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Nar(t){var e={},r=[];if(!De.validate(t,xf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:ar.pki.RDNAttributesAsArray(e.issuer),serialNumber:ar.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:De.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Nar,"_recipientFromAsn1");function Lar(t){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[ar.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,ar.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.encryptedContent.algorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]),De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(Lar,"_recipientToAsn1");function Mar(t){for(var e=[],r=0;r<t.length;++r)e.push(Nar(t[r]));return e}s(Mar,"_recipientsFromAsn1");function Far(t){for(var e=[],r=0;r<t.length;++r)e.push(Lar(t[r]));return e}s(Far,"_recipientsToAsn1");function Oar(t){var e=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[ar.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,ar.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.digestAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.signatureAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=De.create(De.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Pbe(i))}e.value.push(r)}return e}s(Oar,"_signerToAsn1");function Qar(t){for(var e=[],r=0;r<t.length;++r)e.push(Oar(t[r]));return e}s(Qar,"_signersToAsn1");function Pbe(t){var e;if(t.type===ar.pki.oids.contentType)e=De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.value).getBytes());else if(t.type===ar.pki.oids.messageDigest)e=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===ar.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=De.utcTimeToDate(i):i=De.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=De.create(De.Class.UNIVERSAL,De.Type.UTCTIME,!1,De.dateToUtcTime(i)):e=De.create(De.Class.UNIVERSAL,De.Type.GENERALIZEDTIME,!1,De.dateToGeneralizedTime(i))}return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[e])])}s(Pbe,"_attributeToAsn1");function Uar(t){return[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(ar.pki.oids.data).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.algorithm).getBytes()),t.parameter?De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(Uar,"_encryptedContentToAsn1");function Dbe(t,e,r){var n={},i=[];if(!De.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=De.derToOid(n.contentType);if(a!==ar.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(ar.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:De.derToOid(n.encAlgorithm),parameter:ar.util.createBuffer(n.encParameter.value),content:ar.util.createBuffer(c)}}if(n.content){var c="";if(ar.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=ar.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Dbe,"_fromAsn1");function Wot(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case ar.pki.oids["aes128-CBC"]:case ar.pki.oids["aes192-CBC"]:case ar.pki.oids["aes256-CBC"]:e=ar.aes.createDecryptionCipher(t.encryptedContent.key);break;case ar.pki.oids.desCBC:case ar.pki.oids["des-EDE3-CBC"]:e=ar.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(Wot,"_decryptContent")});var zot=H((T0i,Vot)=>{f();var il=bi();qT();$B();jee();VB();Oo();var mte=Vot.exports=il.ssh=il.ssh||{};mte.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=il.util.createBuffer();tN(a,n),zC(a,t.e),zC(a,t.n);var c=il.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=il.util.createBuffer();zC(u,t.d),zC(u,t.p),zC(u,t.q),zC(u,t.qInv);var d;if(!e)d=il.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=pte(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=il.util.createBuffer();h.putBuffer(pte("\0\0\0\0",e)),h.putBuffer(pte("\0\0\0",e));var g=il.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(il.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),d=il.util.encode64(A.bytes(),64)}l=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=d;var y=pte("putty-private-key-file-mac-key",e),x=il.util.createBuffer();tN(x,n),tN(x,i),tN(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(u.length()),x.putBuffer(u);var I=il.hmac.create();return I.start("sha1",y),I.update(x.bytes()),o+=`\r
Private-MAC: `+I.digest().toHex()+`\r
`,o};mte.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=il.util.createBuffer();return tN(n,r),zC(n,t.e),zC(n,t.n),r+" "+il.util.encode64(n.bytes())+" "+e};mte.privateKeyToOpenSSH=function(t,e){return e?il.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):il.pki.privateKeyToPem(t)};mte.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||il.md.md5.create(),n="ssh-rsa",i=il.util.createBuffer();tN(i,n),zC(i,t.e),zC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function zC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=il.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(zC,"_addBigIntegerToBuffer");function tN(t,e){t.putInt32(e.length),t.putString(e)}s(tN,"_addStringToBuffer");function pte(){for(var t=il.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(pte,"_sha1")});var Kot=H((_0i,Yot)=>{f();Yot.exports=bi();qT();hot();SA();Oee();k7();Bot();$B();Fot();qot();$ot();ibe();Yee();QR();Xxe();abe();Got();lbe();ebe();Wxe();rte();Th();Vxe();zot();hbe();Oo()});var Zot=H(VR=>{"use strict";f();Object.defineProperty(VR,"__esModule",{value:!0});VR.convert=VR.Format=void 0;var q7=Kot(),KT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(KT=VR.Format||(VR.Format={}));function Jot(t){var e=q7.pki.pemToDer(t),r=q7.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(Jot,"myASN");function qar(t){var e=Jot(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(qar,"txtFormat");function Xot(t,e){switch(e){case KT.der:return q7.pki.pemToDer(t);case KT.pem:return t;case KT.txt:return qar(t);case KT.asn1:return Jot(t);case KT.fingerprint:var r=q7.md.sha1.create(),n=Xot(t,KT.der);return r.update(n.getBytes()),r.digest().toHex();case KT.x509:return q7.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(Xot,"convert");VR.convert=Xot});var ost=H(I0=>{"use strict";f();var JT=I0&&I0.__assign||function(){return JT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},JT.apply(this,arguments)},hte=I0&&I0.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(I0,"__esModule",{value:!0});I0.convert=I0.Format=I0.addToGlobalAgent=I0.get=void 0;var Bbe=require("https"),Har=require("tls"),est=require("child_process"),tst=Nnt(),kE=Zot();Object.defineProperty(I0,"Format",{enumerable:!0,get:s(function(){return kE.Format},"get")});Object.defineProperty(I0,"convert",{enumerable:!0,get:s(function(){return kE.convert},"get")});var rst=process.platform==="darwin",nst=Bbe.globalAgent,Ate={keychain:"all",unique:!0,excludeBundled:!0,format:kE.Format.pem};function ist(t){if(t===void 0&&(t=Ate),!rst)return[];t=JT(JT({},Ate),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,est.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=hte(hte([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,est.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=hte(hte([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,kE.convert)(u,kE.Format.fingerprint)}),l=t.excludeBundled?Har.rootCertificates.map(function(u){return(0,kE.convert)(u,kE.Format.fingerprint)}):[];n=n.filter(function(u,d){var p=c[d];return!(t.unique&&d!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,kE.convert)(u,t.format)})}s(ist,"get");I0.get=ist;var gte=nst.options.ca,$ar=s(function(t){if(t===void 0&&(t=Ate),!!rst){var e;Array.isArray(gte)?e=Array.from(gte):e=typeof gte<"u"?[gte]:[],ist(JT(JT(JT({},Ate),t),{format:kE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),nst.options.ca=e,Bbe.Agent=function(r){var n=s(function(i){var o=typeof i<"u"?JT({},i):{};return typeof o.ca>"u"&&(o.ca=e),r.call(this,o)},"newAgent");return n.prototype=r.prototype,n}(Bbe.Agent),(0,tst.setGlobalDispatcher)(new tst.Agent({connect:{ca:e}}))}},"addToGlobalAgent");I0.addToGlobalAgent=$ar});var sst=H((M0i,Nbe)=>{f();function War(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(War,"all");process.platform!=="win32"?Nbe.exports.all=()=>[]:Nbe.exports.all=War});var mst=H(($0i,pst)=>{"use strict";f();function fst(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(fst,"validateParameter");function Gar(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(Gar,"hasOwnProperty");function Var(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];Gar(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),fst(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(Var,"defineOperation");pst.exports={defineOperation:Var,validateParameter:fst}});var $be=H((G0i,Ast)=>{"use strict";f();var iN=nAe()("kerberos"),nN=iN.KerberosClient,hst=iN.KerberosServer,XT=mst().defineOperation,zar=1,Yar=2,Kar=4,Jar=8,Xar=16,Zar=32,ecr=64,tcr=128,rcr=256,gst=0,ncr=9,icr=6;nN.prototype.step=XT(nN.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);nN.prototype.wrap=XT(nN.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);nN.prototype.unwrap=XT(nN.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);hst.prototype.step=XT(hst.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var ocr=XT(iN.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),scr=XT(iN.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),acr=XT(iN.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:gst}},{name:"callback",type:"function",required:!1}]),ccr=XT(iN.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Ast.exports={initializeClient:acr,initializeServer:ccr,principalDetails:scr,checkPassword:ocr,GSS_C_DELEG_FLAG:zar,GSS_C_MUTUAL_FLAG:Yar,GSS_C_REPLAY_FLAG:Kar,GSS_C_SEQUENCE_FLAG:Jar,GSS_C_CONF_FLAG:Xar,GSS_C_INTEG_FLAG:Zar,GSS_C_ANON_FLAG:ecr,GSS_C_PROT_READY_FLAG:tcr,GSS_C_TRANS_FLAG:rcr,GSS_C_NO_OID:gst,GSS_MECH_OID_KRB5:ncr,GSS_MECH_OID_SPNEGO:icr}});var yst=H((z0i,lcr)=>{lcr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var vst=H((Y0i,Cst)=>{"use strict";f();var ucr=require("dns"),dcr=$be(),Wbe=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=fcr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();ucr.resolveCname(c,(u,d)=>{if(u)return l(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;dcr.initializeClient(l,c,(u,d)=>{if(u)return n(u,null);i.client=d,n(null,d)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function fcr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=pcr(t),r(null,i)})}}s(fcr,"firstTransition");function pcr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=mcr(t),r(null,i||"")})}}s(pcr,"secondTransition");function mcr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=hcr(t),r(null,a)})})}}s(mcr,"thirdTransition");function hcr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(hcr,"fourthTransition");Cst.exports={MongoAuthProcess:Wbe}});var xst=H((X0i,H7)=>{"use strict";f();var Est=$be();H7.exports=Est;H7.exports.Kerberos=Est;H7.exports.version=yst().version;H7.exports.processes={MongoAuthProcess:vst().MongoAuthProcess}});var _at=H(IIe=>{"use strict";f();Object.defineProperty(IIe,"__esModule",{value:!0});IIe.assertNever=Xlr;function Xlr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Xlr,"assertNever")});var fQ=H(HE=>{"use strict";f();Object.defineProperty(HE,"__esModule",{value:!0});HE.ChatCompletionContentPartOpaque=HE.ChatCompletionContentPartKind=HE.ChatRole=void 0;var Zlr=_at(),Are;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(Are||(HE.ChatRole=Are={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Zlr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(Are||(HE.ChatRole=Are={}));var Rat;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Rat||(HE.ChatCompletionContentPartKind=Rat={}));var kat;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(kat||(HE.ChatCompletionContentPartOpaque=kat={}))});var TIe=H(i1=>{"use strict";f();Object.defineProperty(i1,"__esModule",{value:!0});i1.BaseTokensPerName=i1.BaseTokensPerMessage=i1.BaseTokensPerCompletion=i1.ChatRole=void 0;var Pat;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Pat||(i1.ChatRole=Pat={}));i1.BaseTokensPerCompletion=3;i1.BaseTokensPerMessage=3;i1.BaseTokensPerName=1});var Bat=H(Cre=>{"use strict";f();Object.defineProperty(Cre,"__esModule",{value:!0});Cre.toOpenAiChatMessage=Dat;Cre.toOpenAIChatMessages=rur;var $E=fQ(),yre=TIe(),eur=lw();function wIe(t){return t.filter(e=>e.type===$E.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(wIe,"onlyStringContent");function tur(t){let e=t.map(r=>{if(r.type===$E.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===$E.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===$E.ChatCompletionContentPartKind.Opaque&&$E.ChatCompletionContentPartOpaque.usableIn(r,eur.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(tur,"stringAndImageContent");function Dat(t){switch(t.role){case $E.ChatRole.System:return{role:yre.ChatRole.System,content:wIe(t.content),name:t.name};case $E.ChatRole.User:return{role:yre.ChatRole.User,content:tur(t.content),name:t.name};case $E.ChatRole.Assistant:return{role:yre.ChatRole.Assistant,content:wIe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case $E.ChatRole.Tool:return{role:yre.ChatRole.Tool,content:wIe(t.content),tool_call_id:t.toolCallId};default:return}}s(Dat,"toOpenAiChatMessage");function rur(t){return t.map(Dat).filter(e=>!!e)}s(rur,"toOpenAIChatMessages")});var Lat=H(xre=>{"use strict";f();Object.defineProperty(xre,"__esModule",{value:!0});xre.toVsCodeChatMessage=Nat;xre.toVsCodeChatMessages=nur;var Ere=fQ();function vre(t){return t.filter(e=>e.type===Ere.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(vre,"onlyStringContent");var uw;function Nat(t){switch(uw??=require("vscode"),t.role){case Ere.ChatRole.Assistant:let e=uw.LanguageModelChatMessage.Assistant(vre(t.content),t.name);return t.toolCalls&&(e.content=[new uw.LanguageModelTextPart(vre(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new uw.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Ere.ChatRole.User:return uw.LanguageModelChatMessage.User(vre(t.content),t.name);case Ere.ChatRole.Tool:{let r=uw.LanguageModelChatMessage.User("");return r.content=[new uw.LanguageModelToolResultPart(t.toolCallId,[new uw.LanguageModelTextPart(vre(t.content))])],r}default:return}}s(Nat,"toVsCodeChatMessage");function nur(t){return t.map(Nat).filter(e=>!!e)}s(nur,"toVsCodeChatMessages")});var lw=H(BA=>{"use strict";f();Object.defineProperty(BA,"__esModule",{value:!0});BA.OutputMode=BA.Raw=BA.OpenAI=void 0;BA.toMode=SIe;BA.toVSCode=iur;BA.toOpenAI=our;var Mat=Bat(),Fat=Lat();BA.OpenAI=TIe();BA.Raw=fQ();var ik;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(ik||(BA.OutputMode=ik={}));function SIe(t,e){switch(t){case ik.Raw:return e;case ik.VSCode:return e instanceof Array?(0,Fat.toVsCodeChatMessages)(e):(0,Fat.toVsCodeChatMessage)(e);case ik.OpenAI:return e instanceof Array?(0,Mat.toOpenAIChatMessages)(e):(0,Mat.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(SIe,"toMode");function iur(t){return SIe(ik.VSCode,t)}s(iur,"toVSCode");function our(t){return SIe(ik.OpenAI,t)}s(our,"toOpenAI")});var _Ie=H(pQ=>{"use strict";f();Object.defineProperty(pQ,"__esModule",{value:!0});pQ.jsonRetainedProps=void 0;pQ.forEachNode=Oat;pQ.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Oat(t,e){if(e(t),t.type===1)for(let r of t.children)Oat(r,e)}s(Oat,"forEachNode")});var Qat=H(RIe=>{"use strict";f();Object.defineProperty(RIe,"__esModule",{value:!0});RIe.once=sur;function sur(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(sur,"once")});var BIe=H(Dd=>{"use strict";f();Object.defineProperty(Dd,"__esModule",{value:!0});Dd.BudgetExceededError=Dd.MaterializedChatMessageImage=Dd.MaterializedChatMessageBreakpoint=Dd.MaterializedChatMessageOpaque=Dd.MaterializedChatMessage=Dd.MaterializedChatMessageTextChunk=Dd.GenericMaterializedContainer=void 0;var vN=Qat(),Wp=lw(),WE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=fw(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return zat(e,this.children,r)}allMetadata(){return Vat(this)}findById(e){return DIe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)aur(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof LA&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof LA||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return PIe(this,e),e}};Dd.GenericMaterializedContainer=WE;var mQ=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,vN.once)(async e=>await e.tokenLength({type:Wp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Dd.MaterializedChatMessageTextChunk=mQ;var LA=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=zat(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return PIe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return DIe(e,this)}_tokenCount=(0,vN.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,Wp.toMode)(e.mode,r))});_upperBound=(0,vN.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,vN.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===Wp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===Wp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,Wp.toMode)(e.mode,r))});_text=(0,vN.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of jat(this)){if(r instanceof ok||r instanceof dw){e.push(r);continue}if(r instanceof NA){e.at(-1)instanceof NA?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:Wp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof ok)return{type:Wp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Yat(r.src),detail:r.detail}};if(r instanceof dw)return r.value;if(r instanceof NA)return r.part;throw new Error("Unexpected element type")});if(this.role===Wp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===Wp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===Wp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===Wp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Dd.MaterializedChatMessage=LA;var dw=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&Wp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Dd.MaterializedChatMessageOpaque=dw;var NA=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Dd.MaterializedChatMessageBreakpoint=NA;var ok=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,vN.once)(async e=>e.tokenLength({type:Wp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Yat(this.src),detail:this.detail}}));isEmpty=!1};Dd.MaterializedChatMessageImage=ok;function fw(t){return t instanceof WE||t instanceof LA}s(fw,"isContainerType");function Wat(t){return t instanceof mQ||t instanceof ok||t instanceof dw||t instanceof NA}s(Wat,"isContentType");function aur(t){if(!fw(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(aur,"assertContainerOrChatMessage");function*jat(t,e=!1){for(let r of t.children)r instanceof mQ?(yield{content:r,isTextSibling:e},e=!0):r instanceof ok||r instanceof dw||r instanceof NA?yield{content:r,isTextSibling:!1}:r instanceof dw?yield{content:r,isTextSibling:!0}:(r&&(yield*jat(r,e)),e=!1)}s(jat,"contentChunks");function cur(t,e){let r;function n(i,o){if(Wat(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");hQ(r.node,e)}s(cur,"removeLowestPriorityLegacy");var Uat=new WeakMap;function Gat(t){let e=Uat.get(t);if(e!==void 0)return e;let r=!1;return t instanceof NA?r=!0:t instanceof LA?r=t.children.some(n=>n instanceof NA):t instanceof WE&&(r=t.children.some(Gat)),Uat.set(t,r),r}s(Gat,"hasCachePoint");function lur(t){if(t instanceof LA)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof LA)return!1;return!0}s(lur,"shouldLookForCachePointInNode");function PIe(t,e){let r;if(t instanceof WE&&t.has(1)){cur(t,e);return}let n=lur(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&Gat(l)&&(r=void 0,l instanceof NA))){if(l instanceof WE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((d,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=qat(r.value);let u=qat(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new bre(t);Wat(r.value)||r.value instanceof WE&&r.value.has(2)||fw(r.value)&&!r.value.children.length?hQ(r.value,e):PIe(r.value,e)}s(PIe,"removeLowestPriorityChild");var bre=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof LA?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Dd.BudgetExceededError=bre;function qat(t){if(!fw(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(qat,"getLowestPriorityAmongChildren");function*Vat(t){yield*t.metadata;for(let e of t.children)fw(e)?yield*Vat(e):yield*e.metadata}s(Vat,"allMetadata");function zat(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(fw(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(zat,"replaceNode");function*Hat(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,fw(r)&&e.push(...r.children)}}s(Hat,"forEachNode");function uur(t){let e=t;for(;e.parent;)e=e.parent;return e}s(uur,"getRoot");function $at(t){return t instanceof WE&&t.keepWithId!==void 0}s($at,"isKeepWith");var kIe=new Set;function dur(t,e){let r=new Set;for(let n of Hat(t))$at(n)&&!kIe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)kIe.add(n);try{let n=uur(t);for(let i of Hat(n))$at(i)&&r.has(i.keepWithId)?hQ(i,e):i instanceof LA&&i.toolCalls&&(i.toolCalls=fur(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&hQ(i,e))}finally{for(let n of r)kIe.delete(n)}}s(dur,"removeOtherKeepWiths");function DIe(t,e){if(e.id===t)return e;for(let r of e.children)if(fw(r)){let n=DIe(t,r);if(n)return n}}s(DIe,"findNodeById");function hQ(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),dur(t,e),r.isEmpty?hQ(r,e):r.onChunksChange())}s(hQ,"removeNode");function Yat(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(Yat,"getEncodedBase64");function fur(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(fur,"filterIfDifferent")});var Jat=H(()=>{"use strict";f();function pur(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(pur,"_vscpp");function Kat(){throw new Error("This should not be invoked!")}s(Kat,"_vscppf");Kat.isFragment=!0;globalThis.vscpp=pur;globalThis.vscppf=Kat});var LIe=H(Ire=>{"use strict";f();Object.defineProperty(Ire,"__esModule",{value:!0});Ire.PromptElement=void 0;Jat();var NIe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Ire.PromptElement=NIe});var jIe=H(fo=>{"use strict";f();Object.defineProperty(fo,"__esModule",{value:!0});fo.LogicalWrapper=fo.IfEmpty=fo.AbstractKeepWith=fo.TokenLimit=fo.Expandable=fo.Chunk=fo.LegacyPrioritization=fo.ToolResult=fo.PrioritizedList=fo.Image=fo.TextChunk=fo.ToolMessage=fo.AssistantMessage=fo.UserMessage=fo.SystemMessage=fo.BaseChatMessage=void 0;fo.isChatMessagePromptElement=mur;fo.useKeepWith=yur;var AQ=MA(),Mh=LIe();function mur(t){return t instanceof Tre||t instanceof wre||t instanceof Sre}s(mur,"isChatMessagePromptElement");var sk=class extends Mh.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};fo.BaseChatMessage=sk;var Tre=class extends sk{static{s(this,"SystemMessage")}constructor(e){e.role=AQ.Raw.ChatRole.System,super(e)}};fo.SystemMessage=Tre;var wre=class extends sk{static{s(this,"UserMessage")}constructor(e){e.role=AQ.Raw.ChatRole.User,super(e)}};fo.UserMessage=wre;var Sre=class extends sk{static{s(this,"AssistantMessage")}constructor(e){e.role=AQ.Raw.ChatRole.Assistant,super(e)}};fo.AssistantMessage=Sre;var hur=/\s+/g,MIe=class extends sk{static{s(this,"ToolMessage")}constructor(e){e.role=AQ.Raw.ChatRole.Tool,super(e)}};fo.ToolMessage=MIe;var _re=class extends Mh.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?hur:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await gur(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};fo.TextChunk=_re;async function gur(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:AQ.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(gur,"getTextContentBelowBudget");var FIe=class extends Mh.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};fo.Image=FIe;var OIe=class extends Mh.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(_re,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};fo.PrioritizedList=OIe;var QIe=class extends Mh.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};fo.ToolResult=QIe;var UIe=class extends Mh.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};fo.LegacyPrioritization=UIe;var qIe=class extends Mh.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};fo.Chunk=qIe;var HIe=class extends Mh.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};fo.Expandable=HIe;var $Ie=class extends Mh.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};fo.TokenLimit=$Ie;var Rre=class extends Mh.PromptElement{static{s(this,"AbstractKeepWith")}};fo.AbstractKeepWith=Rre;var Aur=0;function yur(){let t=Aur++;return class extends Rre{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(yur,"useKeepWith");var WIe=class extends Mh.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(gQ,null,this.props.alt),vscpp(gQ,{flexGrow:1},this.props.children))}};fo.IfEmpty=WIe;var gQ=class extends Mh.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};fo.LogicalWrapper=gQ});var Zat=H(yQ=>{"use strict";f();Object.defineProperty(yQ,"__esModule",{value:!0});yQ.localize=Cur;yQ.localize2=vur;yQ.getConfiguredDefaultLocale=Eur;function Xat(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(Xat,"_format");function Cur(t,e,...r){return Xat(e,r)}s(Cur,"localize");function vur(t,e,...r){let n=Xat(e,r);return{original:n,value:n}}s(vur,"localize2");function Eur(t){}s(Eur,"getConfiguredDefaultLocale")});var YIe=H(jt=>{"use strict";f();Object.defineProperty(jt,"__esModule",{value:!0});jt.isAndroid=jt.isEdge=jt.isSafari=jt.isFirefox=jt.isChrome=jt.OS=jt.setTimeout0=jt.setTimeout0IsFaster=jt.translationsConfigFile=jt.platformLocale=jt.locale=jt.Language=jt.language=jt.userAgent=jt.platform=jt.isCI=jt.isMobile=jt.isIOS=jt.webWorkerOrigin=jt.isWebWorker=jt.isWeb=jt.isElectron=jt.isNative=jt.isLinuxSnap=jt.isLinux=jt.isMacintosh=jt.isWindows=jt.LANGUAGE_DEFAULT=void 0;jt.PlatformToString=bur;jt.isLittleEndian=Iur;jt.isBigSurOrNewer=Tur;var ect=Zat();jt.LANGUAGE_DEFAULT="en";var EQ=!1,xQ=!1,vQ=!1,ict=!1,oct=!1,VIe=!1,sct=!1,zIe=!1,act=!1,cct=!1,CQ,kre=jt.LANGUAGE_DEFAULT,GIe=jt.LANGUAGE_DEFAULT,lct,jE,GE=globalThis,jp;typeof GE.vscode<"u"&&typeof GE.vscode.process<"u"?jp=GE.vscode.process:typeof process<"u"&&(jp=process);var uct=typeof jp?.versions?.electron=="string",xur=uct&&jp?.type==="renderer";if(typeof jp=="object"){EQ=jp.platform==="win32",xQ=jp.platform==="darwin",vQ=jp.platform==="linux",ict=vQ&&!!jp.env.SNAP&&!!jp.env.SNAP_REVISION,sct=uct,act=!!jp.env.CI||!!jp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,CQ=jt.LANGUAGE_DEFAULT,kre=jt.LANGUAGE_DEFAULT;let t=jp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];CQ=e.locale,GIe=e.osLocale,kre=r||jt.LANGUAGE_DEFAULT,lct=e._translationsConfigFile}catch{}oct=!0}else typeof navigator=="object"&&!xur?(jE=navigator.userAgent,EQ=jE.indexOf("Windows")>=0,xQ=jE.indexOf("Macintosh")>=0,zIe=(jE.indexOf("Macintosh")>=0||jE.indexOf("iPad")>=0||jE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,vQ=jE.indexOf("Linux")>=0,cct=jE?.indexOf("Mobi")>=0,VIe=!0,CQ=ect.getConfiguredDefaultLocale(ect.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||jt.LANGUAGE_DEFAULT,kre=CQ,GIe=navigator.language):console.error("Unable to resolve platform.");function bur(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(bur,"PlatformToString");var Pre=0;xQ?Pre=1:EQ?Pre=3:vQ&&(Pre=2);jt.isWindows=EQ;jt.isMacintosh=xQ;jt.isLinux=vQ;jt.isLinuxSnap=ict;jt.isNative=oct;jt.isElectron=sct;jt.isWeb=VIe;jt.isWebWorker=VIe&&typeof GE.importScripts=="function";jt.webWorkerOrigin=jt.isWebWorker?GE.origin:void 0;jt.isIOS=zIe;jt.isMobile=cct;jt.isCI=act;jt.platform=Pre;jt.userAgent=jE;jt.language=kre;var tct;(function(t){function e(){return jt.language}s(e,"value"),t.value=e;function r(){return jt.language.length===2?jt.language==="en":jt.language.length>=3?jt.language[0]==="e"&&jt.language[1]==="n"&&jt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return jt.language==="en"}s(n,"isDefault"),t.isDefault=n})(tct||(jt.Language=tct={}));jt.locale=CQ;jt.platformLocale=GIe;jt.translationsConfigFile=lct;jt.setTimeout0IsFaster=typeof GE.postMessage=="function"&&!GE.importScripts;jt.setTimeout0=(()=>{if(jt.setTimeout0IsFaster){let t=[];GE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),GE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();jt.OS=xQ||zIe?2:EQ?1:3;var rct=!0,nct=!1;function Iur(){if(!nct){nct=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,rct=new Uint16Array(t.buffer)[0]===513}return rct}s(Iur,"isLittleEndian");jt.isChrome=!!(jt.userAgent&&jt.userAgent.indexOf("Chrome")>=0);jt.isFirefox=!!(jt.userAgent&&jt.userAgent.indexOf("Firefox")>=0);jt.isSafari=!!(!jt.isChrome&&jt.userAgent&&jt.userAgent.indexOf("Safari")>=0);jt.isEdge=!!(jt.userAgent&&jt.userAgent.indexOf("Edg/")>=0);jt.isAndroid=!!(jt.userAgent&&jt.userAgent.indexOf("Android")>=0);function Tur(t){return parseFloat(t)>=20}s(Tur,"isBigSurOrNewer")});var fct=H(o1=>{"use strict";f();Object.defineProperty(o1,"__esModule",{value:!0});o1.arch=o1.platform=o1.env=o1.cwd=void 0;var dct=YIe(),ak,KIe=globalThis.vscode;if(typeof KIe<"u"&&typeof KIe.process<"u"){let t=KIe.process;ak={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?ak={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:ak={get platform(){return dct.isWindows?"win32":dct.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};o1.cwd=ak.cwd;o1.env=ak.env;o1.platform=ak.platform;o1.arch=ak.arch});var mct=H(vr=>{"use strict";f();Object.defineProperty(vr,"__esModule",{value:!0});vr.delimiter=vr.sep=vr.toNamespacedPath=vr.parse=vr.format=vr.extname=vr.basename=vr.dirname=vr.relative=vr.resolve=vr.join=vr.isAbsolute=vr.normalize=vr.posix=vr.win32=void 0;var EN=fct(),wur=65,Sur=97,_ur=90,Rur=122,hw=46,cu=47,R0=92,pw=58,kur=63,Dre=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Pur(t,e){if(t===null||typeof t!="object")throw new Dre(e,"Object",t)}s(Pur,"validateObject");function cc(t,e){if(typeof t!="string")throw new Dre(e,"string",t)}s(cc,"validateString");var k0=EN.platform==="win32";function vi(t){return t===cu||t===R0}s(vi,"isPathSeparator");function JIe(t){return t===cu}s(JIe,"isPosixPathSeparator");function mw(t){return t>=wur&&t<=_ur||t>=Sur&&t<=Rur}s(mw,"isWindowsDeviceRoot");function Bre(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=cu}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==hw||i.charCodeAt(i.length-2)!==hw){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===hw&&c!==-1?++c:c=-1}return i}s(Bre,"normalizeString");function pct(t,e){Pur(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(pct,"_format");vr.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],cc(o,"path"),o.length===0)continue}else e.length===0?o=EN.cwd():(o=EN.env[`=${e}`]||EN.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===R0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,d=o.charCodeAt(0);if(a===1)vi(d)&&(c=1,u=!0);else if(vi(d))if(u=!0,vi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!vi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&vi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!vi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else mw(d)&&o.charCodeAt(1)===pw&&(l=o.slice(0,2),c=2,a>2&&vi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Bre(r,!n,"\\",vi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){cc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return JIe(o)?"\\":t;if(vi(o))if(i=!0,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else mw(o)&&t.charCodeAt(1)===pw&&(n=t.slice(0,2),r=2,e>2&&vi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Bre(t.slice(r),!i,"\\",vi):"";return a.length===0&&!i&&(a="."),a.length>0&&vi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){cc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return vi(r)||e>2&&mw(r)&&t.charCodeAt(1)===pw&&vi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];cc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&vi(r.charCodeAt(0))){++i;let o=r.length;o>1&&vi(r.charCodeAt(1))&&(++i,o>2&&(vi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&vi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return vr.win32.normalize(e)},relative(t,e){if(cc(t,"from"),cc(e,"to"),t===e)return"";let r=vr.win32.resolve(t),n=vr.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===R0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===R0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===R0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===R0;)l--;let u=l-c,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===R0&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(c+m)===R0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>d&&(t.charCodeAt(i+m)===R0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===R0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===R0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=vr.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===R0){if(e.charCodeAt(1)===R0){let r=e.charCodeAt(2);if(r!==kur&&r!==hw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(mw(e.charCodeAt(0))&&e.charCodeAt(1)===pw&&e.charCodeAt(2)===R0)return`\\\\?\\${e}`;return t},dirname(t){cc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return vi(i)?t:".";if(vi(i)){if(r=n=1,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else mw(i)&&t.charCodeAt(1)===pw&&(r=e>2&&vi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(vi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&cc(e,"ext"),cc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&mw(t.charCodeAt(0))&&t.charCodeAt(1)===pw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(vi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(vi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){cc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===pw&&mw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(vi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===hw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:pct.bind(null,"\\"),parse(t){cc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return vi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(vi(i)){if(n=1,vi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!vi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&vi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!vi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(mw(i)&&t.charCodeAt(1)===pw){if(r<=2)return e.root=e.dir=t,e;if(n=2,vi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),vi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===hw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return c!==-1&&(o===-1||d===0||d===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var Dur=(()=>{if(k0){let t=/\\/g;return()=>{let e=EN.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>EN.cwd()})();vr.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Dur();cc(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===cu)}return e=Bre(e,!r,"/",JIe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(cc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===cu,r=t.charCodeAt(t.length-1)===cu;return t=Bre(t,!e,"/",JIe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return cc(t,"path"),t.length>0&&t.charCodeAt(0)===cu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];cc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":vr.posix.normalize(e)},relative(t,e){if(cc(t,"from"),cc(e,"to"),t===e||(t=vr.posix.resolve(t),e=vr.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===cu&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===cu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===cu?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===cu)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(cc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===cu,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===cu){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&cc(e,"ext"),cc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===cu){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===cu){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){cc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===cu){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===hw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:pct.bind(null,"/"),parse(t){cc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===cu,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===cu){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===hw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};vr.posix.win32=vr.win32.win32=vr.win32;vr.posix.posix=vr.win32.posix=vr.posix;vr.normalize=k0?vr.win32.normalize:vr.posix.normalize;vr.isAbsolute=k0?vr.win32.isAbsolute:vr.posix.isAbsolute;vr.join=k0?vr.win32.join:vr.posix.join;vr.resolve=k0?vr.win32.resolve:vr.posix.resolve;vr.relative=k0?vr.win32.relative:vr.posix.relative;vr.dirname=k0?vr.win32.dirname:vr.posix.dirname;vr.basename=k0?vr.win32.basename:vr.posix.basename;vr.extname=k0?vr.win32.extname:vr.posix.extname;vr.format=k0?vr.win32.format:vr.posix.format;vr.parse=k0?vr.win32.parse:vr.posix.parse;vr.toNamespacedPath=k0?vr.win32.toNamespacedPath:vr.posix.toNamespacedPath;vr.sep=k0?vr.win32.sep:vr.posix.sep;vr.delimiter=k0?vr.win32.delimiter:vr.posix.delimiter});var Ect=H(xN=>{"use strict";f();Object.defineProperty(xN,"__esModule",{value:!0});xN.URI=void 0;xN.isUriComponents=Uur;xN.uriToFsPath=Fre;var hct=mct(),Lre=YIe(),Bur=/^\w[\w\d+.-]*$/,Nur=/^\//,Lur=/^\/\//;function Mur(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Bur.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Nur.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Lur.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Mur,"_validateUri");function Fur(t,e){return!t&&!e?"file":t}s(Fur,"_schemeFix");function Our(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==FA&&(e=FA+e):e=FA;break}return e}s(Our,"_referenceResolution");var Is="",FA="/",Qur=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Mre=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Is,this.authority=e.authority||Is,this.path=e.path||Is,this.query=e.query||Is,this.fragment=e.fragment||Is):(this.scheme=Fur(e,a),this.authority=r||Is,this.path=Our(this.scheme,n||Is),this.query=i||Is,this.fragment=o||Is,Mur(this,a))}get fsPath(){return Fre(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Is),n===void 0?n=this.authority:n===null&&(n=Is),i===void 0?i=this.path:i===null&&(i=Is),o===void 0?o=this.query:o===null&&(o=Is),a===void 0?a=this.fragment:a===null&&(a=Is),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new gw(r,n,i,o,a)}static parse(e,r=!1){let n=Qur.exec(e);return n?new gw(n[2]||Is,Nre(n[4]||Is),Nre(n[5]||Is),Nre(n[7]||Is),Nre(n[9]||Is),r):new gw(Is,Is,Is,Is,Is)}static file(e){let r=Is;if(Lre.isWindows&&(e=e.replace(/\\/g,FA)),e[0]===FA&&e[1]===FA){let n=e.indexOf(FA,2);n===-1?(r=e.substring(2),e=FA):(r=e.substring(2,n),e=e.substring(n)||FA)}return new gw("file",r,e,Is,Is)}static from(e,r){return new gw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Lre.isWindows&&e.scheme==="file"?n=t.file(hct.win32.join(Fre(e,!0),...r)).path:n=hct.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return XIe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new gw(e);return r._formatted=e.external??null,r._fsPath=e._sep===yct?e.fsPath??null:null,r}}else return e}};xN.URI=Mre;function Uur(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Uur,"isUriComponents");var yct=Lre.isWindows?1:void 0,gw=class extends Mre{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Fre(this,!1)),this._fsPath}toString(e=!1){return e?XIe(this,!0):(this._formatted||(this._formatted=XIe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=yct),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Cct={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function gct(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Cct[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(gct,"encodeURIComponentFast");function qur(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Cct[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(qur,"encodeURIComponentMinimal");function Fre(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Lre.isWindows&&(r=r.replace(/\//g,"\\")),r}s(Fre,"uriToFsPath");function XIe(t,e){let r=e?qur:gct,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=FA,n+=FA),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:gct(l,!1,!1)),n}s(XIe,"_asFormatted");function vct(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+vct(t.substr(3)):t}}s(vct,"decodeURIComponentGraceful");var Act=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Nre(t){return t.match(Act)?t.replace(Act,e=>vct(e)):t}s(Nre,"percentDecode")});var tTe=H(Aw=>{"use strict";f();Object.defineProperty(Aw,"__esModule",{value:!0});Aw.PromptReference=Aw.ChatResponseReferencePartStatusKind=Aw.PromptMetadata=void 0;var bQ=Ect(),ZIe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Aw.PromptMetadata=ZIe;var xct;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(xct||(Aw.ChatResponseReferencePartStatusKind=xct={}));var eTe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?bQ.URI.from(n):{uri:bQ.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?bQ.URI.from(e.iconPath):"light"in e.iconPath?{light:bQ.URI.from(e.iconPath.light),dark:bQ.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Aw.PromptReference=eTe});var uTe=H(IN=>{"use strict";f();Object.defineProperty(IN,"__esModule",{value:!0});IN.PromptRenderer=IN.MetadataMap=void 0;var Hur=_Ie(),IQ=BIe(),bN=lw(),Nc=jIe(),lTe=tTe(),bct;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(bct||(IN.MetadataMap=bct={}));var nTe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new Qre(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Sct(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Nc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let d=l+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let d=c(l),p=0;for(let{element:y}of u)p+=y.props.flexBasis??1;let m=0,h=u.map(y=>{if(y.tokenLimit===void 0)return!1;let x=y.element.props.flexBasis??1,I=x/p;return Math.floor(e.remainingTokenBudget*I)<y.tokenLimit?!1:(p-=x,m+=y.tokenLimit,!0)}),g=u.map((y,x)=>{let I=(y.element.props.flexBasis??1)/p;return{tokenBudget:h[x]?y.tokenLimit:Math.floor((e.remainingTokenBudget-m)*I),endpoint:e.endpoint,countTokens:s((S,R)=>this._tokenizer.tokenLength(typeof S=="string"?{type:bN.Raw.ChatCompletionContentPartKind.Text,text:S}:S,R),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((y,x)=>({id:y.element.node.id,tokenBudget:g[x].tokenBudget}))}),await Promise.all(u.map(async({element:y,promptElementInstance:x},I)=>{let S=await Tct(y,()=>x.prepare?.(g[I],n,i));y.node.setState(S)}));let A=await Promise.all(u.map(async({element:y,promptElementInstance:x},I)=>{let S=g[I];return await Tct(y,()=>x.render(y.node.getState(),S,n,i))}));for(let[y,{element:x,promptElementInstance:I}]of u.entries()){let S=g[y],R=A[y];if(!R)continue;let B=await this._processPromptRenderPiece(new ck(S.tokenBudget,this._endpoint),x,I,R,n,i);I instanceof Nc.Expandable&&this._growables.push({initialConsume:B,elem:x.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=wct(i),l=new ck(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await $ur(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new ck(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,bN.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new ck(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,d=l.map(m=>{if(!(m instanceof s1))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Ure),p=i.map(m=>{if(!(m instanceof s1)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Ure);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:d,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<l.limit&&!await this._grow(u,d,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Nc.Expandable))throw new Error("unreachable: expected growable");let c=new Qre(null,0,o.elem.id),l=new ck(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:bN.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=c.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Nc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Ore(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new s1(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new s1(l));else this._handleIntrinsic(e,c.name,c.props,Ore(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};IN.PromptRenderer=nTe;async function $ur(t,e,r,n){let i=0;if((0,Nc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,bN.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:bN.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s($ur,"computeTokensConsumedByLiterals");function wct(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new sTe(String(t))):Wur(t)?Ore(t.children,e):jur(t)?Ore(t,e):typeof t.ctor=="string"?e.push(new iTe(t.ctor,t.props,t.children)):e.push(new oTe(t.ctor,t.props,t.children)),e)}s(wct,"flattenAndReduce");function Ore(t,e=[]){for(let r of t)wct(r,e);return e}s(Ore,"flattenAndReduceArr");var iTe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},oTe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},sTe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},ck=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},Qre=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new s1(lTe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return TQ.fromJSON(i,a,o);default:}}).filter(Ure),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Nc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Nc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Nc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Nc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Nc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Nc.Chunk&&(this._objFlags|=2),this._obj instanceof Nc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new TQ(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new TQ(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(Ure),props:{},references:this._metadata.filter(r=>r instanceof s1).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=rTe(this._obj.props,Hur.jsonRetainedProps)),this._obj instanceof Nc.BaseChatMessage)e.ctor=1,Object.assign(e.props,rTe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Nc.Image)return{...e,ctor:3,props:{...e.props,...rTe(this._obj.props,["src","detail"])}};this._obj instanceof Nc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Nc.Image)return new IQ.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Nc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new IQ.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Nc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Nc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new IQ.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Nc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Nc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new aTe({type:bN.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},aTe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new IQ.MaterializedChatMessageBreakpoint(e,this.part)}},TQ=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new s1(lTe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new IQ.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof s1).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Wur(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Wur,"isFragmentCtor");function Ure(t){return t!==void 0}s(Ure,"isDefined");var cTe=class extends lTe.PromptMetadata{static{s(this,"InternalMetadata")}},s1=class extends cTe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function jur(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(jur,"isIterable");function rTe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(rTe,"pickProps");function Sct(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Sct,"atPath");var Ict=new WeakSet;async function Tct(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Ict.has(r)&&r.constructor.name!=="CancellationError"&&(Ict.add(r),r.message+=` (at tsx element ${Sct(t.path)})`),r}}s(Tct,"annotateError")});var _ct=H(qre=>{"use strict";f();Object.defineProperty(qre,"__esModule",{value:!0});qre.VSCodeTokenizer=void 0;var dTe=lw(),fTe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=dTe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==dTe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===dTe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};qre.VSCodeTokenizer=fTe});var Rct=H(TN=>{"use strict";f();Object.defineProperty(TN,"__esModule",{value:!0});TN.tracerCss=TN.tracerSrc=void 0;TN.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';TN.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Nct=H($re=>{"use strict";f();Object.defineProperty($re,"__esModule",{value:!0});$re.HTMLTracer=void 0;var kct=Rct(),lk=BIe(),Gur=lw(),pTe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return mTe.create({epochs:this.epochs,traceData:Dct(this.traceData)})}serveRouter(e){return new Hre({baseAddress:e,epochs:this.epochs,traceData:Dct(this.traceData)})}};$re.HTMLTracer=pTe;var Hre=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${kct.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Pct(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${kct.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Pct(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},mTe=class t extends Hre{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Pct(t,e){return{container:await Bct(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Pct,"serializeRenderData");async function Bct(t,e,r){let n={metadata:e.metadata.map(zur),priority:e.priority};if(e instanceof lk.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof lk.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof lk.MaterializedChatMessageOpaque||e instanceof lk.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Bct(t,o,r||e instanceof lk.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof lk.GenericMaterializedContainer)return{...i,type:0};if(e instanceof lk.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Gur.Raw.ChatRole.display(e.role),text:o}}}Vur(e)}s(Bct,"serializeMaterialized");function Vur(t){throw new Error("unreachable")}s(Vur,"assertNever");function zur(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(zur,"serializeMetadata");var Dct=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Mct=H(Lct=>{"use strict";f();Object.defineProperty(Lct,"__esModule",{value:!0})});var Oct=H(Fct=>{"use strict";f();Object.defineProperty(Fct,"__esModule",{value:!0})});var Uct=H(Qct=>{"use strict";f();Object.defineProperty(Qct,"__esModule",{value:!0})});var MA=H(aa=>{"use strict";f();var Yur=aa&&aa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uk=aa&&aa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Yur(e,t,r)};Object.defineProperty(aa,"__esModule",{value:!0});aa.contentType=aa.PromptRenderer=aa.MetadataMap=aa.PromptElement=aa.JSONTree=void 0;aa.renderPrompt=Xur;aa.renderElementJSON=Zur;var hTe=lw(),qct=uTe(),Kur=_ct();uk(Nct(),aa);aa.JSONTree=_Ie();uk(lw(),aa);uk(jIe(),aa);uk(tTe(),aa);uk(Mct(),aa);uk(Oct(),aa);uk(Uct(),aa);var Jur=LIe();Object.defineProperty(aa,"PromptElement",{enumerable:!0,get:s(function(){return Jur.PromptElement},"get")});var Hct=uTe();Object.defineProperty(aa,"MetadataMap",{enumerable:!0,get:s(function(){return Hct.MetadataMap},"get")});Object.defineProperty(aa,"PromptRenderer",{enumerable:!0,get:s(function(){return Hct.PromptRenderer},"get")});async function Xur(t,e,r,n,i,o,a=hTe.OutputMode.VSCode){let c="countTokens"in n?new Kur.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new qct.PromptRenderer(r,t,e,c),u=await l.render(i,o),d=l.getUsedContext();return{...u,usedContext:d}}s(Xur,"renderPrompt");aa.contentType="application/vnd.codechat.prompt+json.1";function Zur(t,e,r,n){return new qct.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:hTe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===hTe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(Zur,"renderElementJSON")});var zp=H(YQ=>{"use strict";f();Object.defineProperty(YQ,"__esModule",{value:!0});YQ.dedent=void 0;function Qut(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+n[l+1]}),a}s(Qut,"dedent");YQ.dedent=Qut;YQ.default=Qut});var Vut=H(Bwe=>{"use strict";f();Object.defineProperty(Bwe,"__esModule",{value:!0});Bwe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var Zut=H(Lwe=>{"use strict";f();Object.defineProperty(Lwe,"__esModule",{value:!0});var zut=require("worker_threads"),n0r=require("v8"),i0r=require("os"),Yut=Vut(),iie="ready",Kut="spawning",o0r="busy",oie="off",Jut=i0r.cpus().length,Xut=process.version.replace("v","").split("."),s0r=parseInt(Xut[0]),a0r=parseInt(Xut[1]),Nwe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=Jut,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new zut.Worker(Yut.workerFile,{eval:!0});e.status=Kut,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=iie,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=oie,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===oie).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===iie){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=o0r;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=n0r.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=oie,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=iie,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:Jut,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new zut.Worker(Yut.workerFile,{eval:!0});this.workers.push({status:Kut,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=iie,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=oie,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(s0r>=12&&a0r>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};Lwe.default=new Nwe});var sie=H(Tk=>{"use strict";f();var c0r=Tk&&Tk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tk,"__esModule",{value:!0});var KQ=c0r(Zut()),l0r=`job needs a function.
Try with:
> job(() => {...}, config)`,u0r=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function d0r(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(l0r));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(u0r));KQ.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(d0r,"job");Tk.job=d0r;Tk.stop=KQ.default.teardown.bind(KQ.default);Tk.start=KQ.default.setup.bind(KQ.default)});var gdt=H(wk=>{"use strict";f();var C1=wk&&wk.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},jwe=wk&&wk.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},rx,Dw;Object.defineProperty(wk,"__esModule",{value:!0});var Gwe=class{static{s(this,"AwaitLock")}constructor(){rx.set(this,!1),Dw.set(this,new Set)}get acquired(){return C1(this,rx,"f")}acquireAsync({timeout:e}={}){if(!C1(this,rx,"f"))return jwe(this,rx,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{C1(this,Dw,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),C1(this,Dw,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{C1(this,Dw,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return C1(this,rx,"f")?!1:(jwe(this,rx,!0,"f"),!0)}release(){if(!C1(this,rx,"f"))throw new Error("Cannot release an unacquired lock");if(C1(this,Dw,"f").size>0){let[e]=C1(this,Dw,"f");C1(this,Dw,"f").delete(e),e()}else jwe(this,rx,!1,"f")}};wk.default=Gwe;rx=new WeakMap,Dw=new WeakMap});var I_e=H((ulo,Dpt)=>{f();var xU=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Wyr=typeof AbortController=="function",Qoe=Wyr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new Rpt}abort(){this.signal.dispatchEvent("abort")}},jyr=typeof AbortSignal=="function",Gyr=typeof Qoe.AbortSignal=="function",Rpt=jyr?AbortSignal:Gyr?Qoe.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},x_e=new Set,C_e=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;Uoe(r)&&b_e(r,`${t} option`,`options.${e}`,g8)},"deprecatedOption"),v_e=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(Uoe(r)){let{prototype:n}=g8,{get:i}=Object.getOwnPropertyDescriptor(n,t);b_e(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),Vyr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(Uoe(r)){let{prototype:n}=g8,{get:i}=Object.getOwnPropertyDescriptor(n,t);b_e(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),kpt=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Uoe=s(t=>!x_e.has(t),"shouldWarn"),b_e=s((t,e,r,n)=>{x_e.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;kpt(i,"DeprecationWarning",t,n)},"warn"),Mk=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Ppt=s(t=>Mk(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?h8:null:null,"getUintArray"),h8=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},E_e=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=Ppt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},g8=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:A,fetchContext:y,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:I}=e,{length:S,maxAge:R,stale:B}=e instanceof t?{}:e;if(r!==0&&!Mk(r))throw new TypeError("max option must be a nonnegative integer");let M=r?Ppt(r):Array;if(!M)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||S,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=y,!this.fetchMethod&&y!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new M(r),this.prev=new M(r),this.head=0,this.tail=0,this.free=new E_e(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!x,this.maxSize!==0){if(!Mk(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!B,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=Mk(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||R||0,this.ttl){if(!Mk(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";Uoe(O)&&(x_e.add(O),kpt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}B&&C_e("stale","allowStale"),R&&C_e("maxAge","ttl"),S&&C_e("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new h8(this.max),this.starts=new h8(this.max),this.setItemTTL=(n,i,o=xU.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?xU.now():0};let e=0,r=s(()=>{let n=xU.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new h8(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!Mk(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!Mk(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return v_e("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=xU.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=xU.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let d=this.valList[u];r!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new Qoe,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(d).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let A=this.backgroundFetch(e,g,h,p);return A.__returned=A}else{let A=this.valList[g];if(this.isBackgroundFetch(A))return r&&A.__staleWhileFetching!==void 0?A.__staleWhileFetching:A.__returned=A;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),A;let y=this.backgroundFetch(e,g,h,p);return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return v_e("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return v_e("reset","clear"),this.clear}get length(){return Vyr("length","size"),this.size}static get AbortController(){return Qoe}static get AbortSignal(){return Rpt}};Dpt.exports=g8});var S_e=H((plo,Bpt)=>{"use strict";f();var bU=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},T_e=class extends bU{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},w_e=class extends bU{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};Bpt.exports={FetchBaseError:bU,FetchError:T_e,AbortError:w_e}});var cx=H((glo,Lpt)=>{"use strict";f();var{constants:{MAX_LENGTH:zyr}}=require("buffer"),{pipeline:qoe,PassThrough:Yyr}=require("stream"),{promisify:Kyr}=require("util"),{createGunzip:Jyr,createInflate:Xyr,createBrotliDecompress:Zyr,constants:{Z_SYNC_FLUSH:Npt}}=require("zlib"),eCr=iC()("helix-fetch:utils"),tCr=Kyr(qoe),rCr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),nCr=s((t,e,r,n)=>{if(!rCr(t,e))return r;let i=s(o=>{o&&(eCr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return qoe(r,Jyr({flush:Npt,finishFlush:Npt}),i);case"deflate":case"x-deflate":return qoe(r,Xyr(),i);case"br":return qoe(r,Zyr(),i);default:return r}},"decodeStream"),iCr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Hoe=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?oCr(t,e):sCr(t,e);default:return 0}},"calcSize"),oCr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Hoe(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),sCr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Hoe(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Hoe(t[i],e)}),r},"calcObjectSize"),aCr=s(t=>Hoe(t,new WeakSet),"sizeof"),cCr=s(async t=>{let e=new Yyr,r=0,n=[];return e.on("data",i=>{if(r+i.length>zyr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await tCr(t,e),Buffer.concat(n,r)},"streamToBuffer");Lpt.exports={decodeStream:nCr,isPlainObject:iCr,sizeof:aCr,streamToBuffer:cCr}});var Woe=H((Clo,Qpt)=>{"use strict";f();var{PassThrough:Mpt,Readable:lx}=require("stream"),{types:{isAnyArrayBuffer:Opt}}=require("util"),{FetchError:lCr,FetchBaseError:uCr}=S_e(),{streamToBuffer:dCr}=cx(),fCr=Buffer.alloc(0),Wh=Symbol("Body internals"),pCr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Fpt=s(async t=>{if(t[Wh].disturbed)throw new TypeError("Already read");if(t[Wh].error)throw new TypeError(`Stream had error: ${t[Wh].error.message}`);t[Wh].disturbed=!0;let{stream:e}=t[Wh];return e===null?fCr:dCr(e)},"consume"),$oe=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=lx.from(e.toString()):e instanceof lx?r=e:Buffer.isBuffer(e)?r=lx.from(e):Opt(e)?r=lx.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=lx.from(e):r=lx.from(String(e)),this[Wh]={stream:r,disturbed:!1,error:null},e instanceof lx&&r.on("error",n=>{let i=n instanceof uCr?n:new lCr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Wh].error=i})}get body(){return this[Wh].stream}get bodyUsed(){return this[Wh].disturbed}async buffer(){return Fpt(this)}async arrayBuffer(){return pCr(await this.buffer())}async text(){return(await Fpt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties($oe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var mCr=s(t=>{if(t[Wh].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Wh],r=e;if(e instanceof lx){r=new Mpt;let n=new Mpt;e.pipe(r),e.pipe(n),t[Wh].stream=n}return r},"cloneStream"),hCr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||Opt(t)||t instanceof lx?null:"text/plain; charset=utf-8","guessContentType");Qpt.exports={Body:$oe,cloneStream:mCr,guessContentType:hCr}});var A8=H((xlo,$pt)=>{"use strict";f();var{validateHeaderName:Upt,validateHeaderValue:qpt}=require("http"),{isPlainObject:gCr}=cx(),ux=Symbol("Headers internals"),IU=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof Upt=="function")Upt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),Hpt=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof qpt=="function")qpt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),joe=class t{static{s(this,"Headers")}constructor(e={}){if(this[ux]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(gCr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[ux].map.set(IU(e),Hpt(r,e))}has(e){return this[ux].map.has(IU(e))}get(e){let r=this[ux].map.get(IU(e));return r===void 0?null:r}append(e,r){let n=IU(e),i=Hpt(r,e),o=this[ux].map.get(n);this[ux].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[ux].map.delete(IU(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[ux].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[ux].map)}};Object.defineProperties(joe.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));$pt.exports={Headers:joe}});var __e=H((Tlo,Wpt)=>{"use strict";f();var{EventEmitter:ACr}=require("events"),JA=Symbol("AbortSignal internals"),y8=class{static{s(this,"AbortSignal")}constructor(){this[JA]={eventEmitter:new ACr,onabort:null,aborted:!1}}get aborted(){return this[JA].aborted}get onabort(){return this[JA].onabort}set onabort(e){this[JA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[JA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[JA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[JA][n]=="function"&&this[n](r),this[JA].eventEmitter.emit(e,r)}fire(){this[JA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(y8.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Voe=class extends y8{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[JA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[JA].timerId)}};Object.defineProperties(Voe.prototype,{clear:{enumerable:!0}});var Goe=Symbol("AbortController internals"),zoe=class{static{s(this,"AbortController")}constructor(){this[Goe]={signal:new y8}}get signal(){return this[Goe].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Goe].signal.aborted||this[Goe].signal.fire()}};Object.defineProperties(zoe.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});Wpt.exports={AbortController:zoe,AbortSignal:y8,TimeoutSignal:Voe}});var TU=H((_lo,Vpt)=>{"use strict";f();var{randomBytes:yCr}=require("crypto"),{Readable:CCr}=require("stream"),k_e=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),vCr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),jpt=s(t=>`--${t}--\r
\r
`,"getFooter"),Gpt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,k_e(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*ECr(t,e){for(let[r,n]of t)yield Gpt(e,r,n),k_e(n)?yield*n.stream():yield n,yield`\r
`;yield jpt(e)}s(ECr,"formDataIterator");var xCr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(Gpt(e,n,i)),r+=k_e(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(jpt(e)),r},"getFormDataLength"),R_e=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=yCr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=xCr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return CCr.from(ECr(this.fd,this.boundary))}};Vpt.exports={isFormData:vCr,FormDataSerializer:R_e}});var Ypt=H((Dlo,zpt)=>{"use strict";f();var{AbortSignal:Plo}=__e(),{Body:bCr,cloneStream:ICr,guessContentType:TCr}=Woe(),{Headers:wCr}=A8(),{isPlainObject:SCr}=cx(),{isFormData:_Cr,FormDataSerializer:RCr}=TU(),kCr=20,Hw=Symbol("Request internals"),Yoe=class t extends bCr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?ICr(n):null),c=new wCr(r.headers||n&&n.headers||{});if(_Cr(a)&&!c.has("content-type")){let p=new RCr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(SCr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=TCr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Hw]={init:{...r},method:o,redirect:u,cache:d,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=kCr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Hw].method}get url(){return this[Hw].parsedURL.toString()}get headers(){return this[Hw].headers}get redirect(){return this[Hw].redirect}get cache(){return this[Hw].cache}get signal(){return this[Hw].signal}clone(){return new t(this)}get init(){return this[Hw].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Yoe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});zpt.exports={Request:Yoe}});var P_e=H((Llo,Kpt)=>{"use strict";f();var{Body:PCr,cloneStream:DCr,guessContentType:BCr}=Woe(),{Headers:NCr}=A8(),{isPlainObject:LCr}=cx(),{isFormData:MCr,FormDataSerializer:FCr}=TU(),XA=Symbol("Response internals"),Koe=class t extends PCr{static{s(this,"Response")}constructor(e=null,r={}){let n=new NCr(r.headers),i=e;if(MCr(i)&&!n.has("content-type")){let o=new FCr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(LCr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=BCr(i);o&&n.set("content-type",o)}super(i),this[XA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[XA].url||""}get status(){return this[XA].status}get statusText(){return this[XA].statusText}get ok(){return this[XA].status>=200&&this[XA].status<300}get redirected(){return this[XA].counter>0}get headers(){return this[XA].headers}get httpVersion(){return this[XA].httpVersion}get decoded(){return this[XA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(DCr(this),{...this[XA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Koe.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Kpt.exports={Response:Koe}});var Xpt=H((Qlo,Jpt)=>{"use strict";f();var OCr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),QCr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),UCr=new Set([500,502,503,504]),qCr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},HCr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Fk(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(Fk,"toNumberOrZero");function $Cr(t){return t?UCr.has(t.status):!0}s($Cr,"isErrorResponse");function D_e(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(D_e,"parseCacheControl");function WCr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(WCr,"formatCacheControl");Jpt.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=D_e(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=D_e(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":WCr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&QCr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||OCr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=D_e(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)qCr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Fk(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Fk(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Fk(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Fk(this._rescc["stale-if-error"]),n=e+Fk(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Fk(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Fk(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&$Cr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!HCr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var rmt=H((Hlo,tmt)=>{"use strict";f();var jCr=Xpt(),{Headers:GCr}=A8(),Zpt=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),emt=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),B_e=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new jCr(Zpt(e),emt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Zpt(e))}responseHeaders(e){return new GCr(this.policy.responseHeaders(emt(e)))}timeToLive(){return this.policy.timeToLive()}};tmt.exports=B_e});var omt=H((jlo,imt)=>{"use strict";f();var{Readable:VCr}=require("stream"),{Headers:nmt}=A8(),{Response:zCr}=P_e(),$w=Symbol("CacheableResponse internals"),YCr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),N_e=class t extends zCr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new nmt(r.headers);this[$w]={headers:n,bufferedBody:e}}get headers(){return this[$w].headers}set headers(e){if(e instanceof nmt)this[$w].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return VCr.from(this[$w].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[$w].bufferedBody}async arrayBuffer(){return YCr(this[$w].bufferedBody)}async text(){return this[$w].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[$w].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},KCr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new N_e(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");imt.exports={cacheableResponse:KCr}});var Joe=H((zlo,smt)=>{"use strict";f();var L_e=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};smt.exports={RequestAbortedError:L_e}});var dmt=H((Jlo,umt)=>{"use strict";f();var cmt=require("http"),lmt=require("https"),{Readable:JCr}=require("stream"),dx=iC()("helix-fetch:h1"),{RequestAbortedError:amt}=Joe(),{decodeStream:XCr}=cx(),ZCr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new lmt.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new cmt.Agent(n),r.httpAgent):void 0},"getAgent"),e1r=s(t=>{t.h1={}},"setupContext"),t1r=s(async({h1:t})=>{t.httpAgent&&(dx("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(dx("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),r1r=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?XCr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),n1r=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?lmt:cmt,i=ZCr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{dx(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{dx(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{dx(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(dx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new amt),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new amt);return}p.addEventListener("abort",m)}d=n(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(dx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(r1r(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(dx(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(dx(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),c instanceof JCr?c.pipe(d):(c&&d.write(c),d.end())})},"h1Request");umt.exports={request:n1r,setupContext:e1r,resetContext:t1r}});var hmt=H((euo,mmt)=>{"use strict";f();var{connect:i1r,constants:o1r}=require("http2"),{Readable:s1r}=require("stream"),la=iC()("helix-fetch:h2"),{RequestAbortedError:fmt}=Joe(),{decodeStream:a1r}=cx(),{NGHTTP2_CANCEL:wU}=o1r,c1r=300*1e3,l1r=5e3,u1r=s(t=>{t.h2={sessionCache:{}}},"setupContext"),d1r=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),la(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),pmt=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?a1r(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),f1r=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=l1r}}}=t,u=i[":path"],d=`${e}${u}`;la(`received PUSH_PROMISE: ${d}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{n.close(wU)},"rejectPush")),n.on("push",(p,m)=>{la(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{la(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(wU)}),c&&c(d,i,pmt(p,n,r))}),n.on("aborted",()=>{la(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{la(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{la(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),p1r=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=c1r,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:A,socket:y,body:x,decode:I}=h;return y&&delete h.socket,A.host&&(A[":authority"]=A.host,delete A.host),new Promise((S,R)=>{let B=u[n];if(!B||B.closed||B.destroyed){let z=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),Q={...l,rejectUnauthorized:z};y&&!y.inUse&&(Q.createConnection=()=>(la(`reusing socket #${y.id} (${y.servername})`),y.inUse=!0,y)),B=i1r(n,{...Q,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{la(`closing session ${n} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{la(`session ${n} established`),la(`caching session ${n}`),u[n]=B}),B.on("localSettings",Z=>{la(`session ${n} localSettings: ${JSON.stringify(Z)}`)}),B.on("remoteSettings",Z=>{la(`session ${n} remoteSettings: ${JSON.stringify(Z)}`)}),B.once("close",()=>{la(`session ${n} closed`),u[n]===B&&(la(`discarding cached session ${n}`),delete u[n])}),B.once("error",Z=>{la(`session ${n} encountered error: ${Z}`),u[n]===B&&(la(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(Z,J,j)=>{la(`session ${n} encountered frameError: type: ${Z}, code: ${J}, id: ${j}`)}),B.once("goaway",(Z,J,j)=>{la(`session ${n} received GOAWAY frame: errorCode: ${Z}, lastStreamID: ${J}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(Z,J,j)=>{f1r(t,n,I,Z,J,j)})}else y&&y.id!==B.socket.id&&!y.inUse&&(la(`discarding redundant socket used for ALPN: #${y.id} ${y.servername}`),y.destroy());la(`${g} ${e.host}${c}`);let M,{signal:O}=h,K=s(()=>{O.removeEventListener("abort",K),R(new fmt),M&&M.close(wU)},"onAbortSignal");if(O){if(O.aborted){R(new fmt);return}O.addEventListener("abort",K)}let V=s(z=>{la(`session ${n} encountered error during ${h.method} ${e.href}: ${z}`),R(z)},"onSessionError");B.once("error",V),M=B.request({":method":g,":path":c,...A}),M.once("response",z=>{B.off("error",V),O&&O.removeEventListener("abort",K),S(pmt(z,M,h.decode,R))}),M.once("error",z=>{B.off("error",V),O&&O.removeEventListener("abort",K),M.rstCode!==wU&&(la(`${h.method} ${e.href} failed with: ${z.message}`),M.close(wU),R(z))}),M.once("frameError",(z,Q,U)=>{B.off("error",V),la(`encountered frameError during ${h.method} ${e.href}: type: ${z}, code: ${Q}, id: ${U}`)}),M.on("push",(z,Q)=>{la(`received 'push' event: headers: ${JSON.stringify(z)}, flags: ${Q}`)}),x instanceof s1r?x.pipe(M):(x&&M.write(x),M.end())})},"request");mmt.exports={request:p1r,setupContext:u1r,resetContext:d1r}});var Amt=H((nuo,gmt)=>{"use strict";f();var{EventEmitter:m1r}=require("events"),h1r=s(()=>{let t={},e=new m1r;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");gmt.exports=h1r});var ymt=H((suo,g1r)=>{g1r.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var bmt=H((auo,xmt)=>{"use strict";f();var{Readable:A1r}=require("stream"),y1r=require("tls"),{types:{isAnyArrayBuffer:C1r}}=require("util"),v1r=I_e(),M_e=iC()("helix-fetch:core"),{RequestAbortedError:Xoe}=Joe(),F_e=dmt(),Zoe=hmt(),E1r=Amt(),{isPlainObject:x1r}=cx(),{isFormData:b1r,FormDataSerializer:I1r}=TU(),{version:T1r}=ymt(),O_e="h2",Q_e="h2c",U_e="http/1.0",Ok="http/1.1",w1r=100,S1r=3600*1e3,_1r=[O_e,Ok,U_e],R1r=`helix-fetch/${T1r}`,k1r={method:"GET",compress:!0,decode:!0},Cmt=0,vmt=E1r(),Emt=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Xoe;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Xoe);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Xoe||(M_e(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=y1r.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),Cmt+=1,o.id=Cmt,o.secureConnecting=!1,M_e(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),P1r=s(async(t,e)=>{let r=await vmt.acquire(t.origin);try{return r||(r=await Emt(t,e)),r}finally{vmt.release(t.origin,r)}},"connect"),D1r=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=Ok,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Q_e,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let d=await P1r(e,u);return i=d.alpnProtocol,i||(i=Ok),t.alpnCache.set(n,i),{protocol:i,socket:d}},"determineProtocol"),B1r=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),N1r=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let d=await Emt(e,u);return{protocol:d.alpnProtocol||Ok,socket:d}}return{protocol:c.alpnProtocol||Ok,socket:c}},"getProtocolAndSocketFromFactory"),L1r=s(async(t,e,r)=>{let n=new URL(e),i={...k1r,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=B1r(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(b1r(i.body)){let u=new I1r(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":x1r(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):C1r(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof A1r||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await N1r(t.socketFactory,n,i,t.alpnProtocols):await D1r(t,n,a);switch(M_e(`${n.host} -> ${c}`),c){case O_e:try{return await Zoe.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Q_e:return Zoe.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case U_e:case Ok:return F_e.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),M1r=s(async t=>(t.alpnCache.clear(),Promise.all([F_e.resetContext(t),Zoe.resetContext(t)])),"resetContext"),F1r=s(t=>{let{options:{alpnProtocols:e=_1r,alpnCacheTTL:r=S1r,alpnCacheSize:n=w1r,userAgent:i=R1r,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new v1r({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,F_e.setupContext(t),Zoe.setupContext(t)},"setupContext");xmt.exports={request:L1r,setupContext:F1r,resetContext:M1r,RequestAbortedError:Xoe,ALPN_HTTP2:O_e,ALPN_HTTP2C:Q_e,ALPN_HTTP1_1:Ok,ALPN_HTTP1_0:U_e}});var Tmt=H((uuo,Imt)=>{"use strict";f();var O1r=iC()("helix-fetch:core"),{request:Q1r,setupContext:U1r,resetContext:q1r,RequestAbortedError:H1r,ALPN_HTTP2:$1r,ALPN_HTTP2C:W1r,ALPN_HTTP1_1:j1r,ALPN_HTTP1_0:G1r}=bmt(),q_e=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},U1r(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:H1r,ALPN_HTTP2:$1r,ALPN_HTTP2C:W1r,ALPN_HTTP1_1:j1r,ALPN_HTTP1_0:G1r}}async request(e,r){return Q1r(this,e,r)}setCA(e){this.options.ca=e}async reset(){return O1r("resetting context"),q1r(this)}};Imt.exports=new q_e().api()});var kmt=H((puo,Rmt)=>{"use strict";f();var{EventEmitter:V1r}=require("events"),{Readable:SU}=require("stream"),H_e=iC()("helix-fetch"),z1r=I_e(),{Body:Y1r}=Woe(),{Headers:G_e}=A8(),{Request:Qk}=Ypt(),{Response:W_e}=P_e(),{FetchBaseError:K1r,FetchError:_U,AbortError:ese}=S_e(),{AbortController:J1r,AbortSignal:X1r,TimeoutSignal:Z1r}=__e(),evr=rmt(),{cacheableResponse:tvr}=omt(),{sizeof:rvr}=cx(),{isFormData:nvr}=TU(),{context:ivr,RequestAbortedError:ovr}=Tmt(),wmt=["GET","HEAD"],svr=500,avr=100*1024*1024,$_e="push",Smt=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof Qk&&typeof r>"u"?e:new Qk(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let B=new ese("The operation was aborted.");throw i.init.body instanceof SU&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof SU)&&!nvr(m)?m:a,compress:l,decode:u,follow:d,redirect:p,signal:c})}catch(B){throw m instanceof SU&&m.destroy(B),B instanceof TypeError?B:B instanceof ovr?new ese("The operation was aborted."):new _U(B.message,"system",B)}let g=s(()=>{c.removeEventListener("abort",g);let B=new ese("The operation was aborted.");i.init.body instanceof SU&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:A,statusText:y,httpVersion:x,headers:I,readable:S,decoded:R}=h;if([301,302,303,307,308].includes(A)){let{location:B}=I,M=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new _U(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(M===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new _U(`maximum redirect reached at: ${i.url}`,"max-redirect");let O={headers:new G_e(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(A!==303&&i.body&&i.init.body instanceof SU)throw c&&c.removeEventListener("abort",g),new _U("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(A===303||(A===301||A===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),c&&c.removeEventListener("abort",g),Smt(t,new Qk(M,O))}default:}}return c&&(S.once("end",()=>{c.removeEventListener("abort",g)}),S.once("error",()=>{c.removeEventListener("abort",g)})),new W_e(S,{url:i.url,status:A,statusText:y,headers:I,httpVersion:x,decoded:R,counter:i.counter})},"fetch"),_mt=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!wmt.includes(e.method))return r;let n=new evr(e,r,{shared:!1});if(n.storable()){let i=await tvr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),cvr=s(async(t,e,r)=>{let n=new Qk(e,r);if(t.options.maxCacheSize!==0&&wmt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new G_e(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await Smt(t,n);return n.cache!=="no-store"?_mt(t,n,o):o},"cachingFetch"),lvr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),uvr=s(t=>new Z1r(t),"timeoutSignal"),j_e=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:avr,i=svr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>rvr(c),"sizeCalculation");this.cache=new z1r({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new V1r,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let d={...l};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(c,d,u)},this.options.h2.pushHandler=(c,l,u)=>{let d={...l};Object.keys(d).filter(x=>x.startsWith(":")).forEach(x=>delete d[x]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:A,decoded:y}=u;this.pushHandler(c,d,new W_e(A,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:y}))}),this.context=ivr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:Y1r,Headers:G_e,Request:Qk,Response:W_e,AbortController:J1r,AbortSignal:X1r,FetchBaseError:K1r,FetchError:_U,AbortError:ese,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:lvr,timeoutSignal:uvr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return cvr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on($_e,e)}offPush(e){return this.eventEmitter.off($_e,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){H_e(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new Qk(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(H_e(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){H_e(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await _mt(this,new Qk(e,{headers:r}),n);this.eventEmitter.emit($_e,e,i)}};Rmt.exports=new j_e().api()});var Dmt=H((guo,Pmt)=>{"use strict";f();Pmt.exports=kmt()});var Qgt=H((tae,Ogt)=>{f();(function(t,e){typeof tae=="object"&&typeof Ogt<"u"?e(tae):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(tae,function(t){"use strict";function e(){for(var F=arguments.length,D=Array(F),ee=0;ee<F;ee++)D[ee]=arguments[ee];if(D.length>1){D[0]=D[0].slice(0,-1);for(var ge=D.length-1,_e=1;_e<ge;++_e)D[_e]=D[_e].slice(1,-1);return D[ge]=D[ge].slice(1),D.join("")}else return D[0]}s(e,"merge");function r(F){return"(?:"+F+")"}s(r,"subexp");function n(F){return F===void 0?"undefined":F===null?"null":Object.prototype.toString.call(F).split(" ").pop().split("]").shift().toLowerCase()}s(n,"typeOf");function i(F){return F.toUpperCase()}s(i,"toUpperCase");function o(F){return F!=null?F instanceof Array?F:typeof F.length!="number"||F.split||F.setInterval||F.call?[F]:Array.prototype.slice.call(F):[]}s(o,"toArray");function a(F,D){var ee=F;if(D)for(var ge in D)ee[ge]=D[ge];return ee}s(a,"assign");function c(F){var D="[A-Za-z]",ee="[\\x0D]",ge="[0-9]",_e="[\\x22]",ut=e(ge,"[A-Fa-f]"),St="[\\x0A]",zt="[\\x20]",Zt=r(r("%[EFef]"+ut+"%"+ut+ut+"%"+ut+ut)+"|"+r("%[89A-Fa-f]"+ut+"%"+ut+ut)+"|"+r("%"+ut+ut)),Yt="[\\:\\/\\?\\#\\[\\]\\@]",bt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",yr=e(Yt,bt),si=F?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ji=F?"[\\uE000-\\uF8FF]":"[]",xn=e(D,ge,"[\\-\\.\\_\\~]",si),mo=r(D+e(D,ge,"[\\+\\-\\.]")+"*"),hi=r(r(Zt+"|"+e(xn,bt,"[\\:]"))+"*"),Vo=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("[1-9]"+ge)+"|"+ge),ua=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),dc=r(ua+"\\."+ua+"\\."+ua+"\\."+ua),Do=r(ut+"{1,4}"),Qs=r(r(Do+"\\:"+Do)+"|"+dc),Xu=r(r(Do+"\\:")+"{6}"+Qs),fc=r("\\:\\:"+r(Do+"\\:")+"{5}"+Qs),eg=r(r(Do)+"?\\:\\:"+r(Do+"\\:")+"{4}"+Qs),fl=r(r(r(Do+"\\:")+"{0,1}"+Do)+"?\\:\\:"+r(Do+"\\:")+"{3}"+Qs),tg=r(r(r(Do+"\\:")+"{0,2}"+Do)+"?\\:\\:"+r(Do+"\\:")+"{2}"+Qs),rg=r(r(r(Do+"\\:")+"{0,3}"+Do)+"?\\:\\:"+Do+"\\:"+Qs),Cx=r(r(r(Do+"\\:")+"{0,4}"+Do)+"?\\:\\:"+Qs),_a=r(r(r(Do+"\\:")+"{0,5}"+Do)+"?\\:\\:"+Do),pu=r(r(r(Do+"\\:")+"{0,6}"+Do)+"?\\:\\:"),mu=r([Xu,fc,eg,fl,tg,rg,Cx,_a,pu].join("|")),Zu=r(r(xn+"|"+Zt)+"+"),ng=r(mu+"\\%25"+Zu),Bl=r(mu+r("\\%25|\\%(?!"+ut+"{2})")+Zu),vx=r("[vV]"+ut+"+\\."+e(xn,bt,"[\\:]")+"+"),B1=r("\\["+r(Bl+"|"+mu+"|"+vx)+"\\]"),Ex=r(r(Zt+"|"+e(xn,bt))+"*"),_f=r(B1+"|"+dc+"(?!"+Ex+")|"+Ex),Rf=r(ge+"*"),Gr=r(r(hi+"@")+"?"+_f+r("\\:"+Rf)+"?"),pc=r(Zt+"|"+e(xn,bt,"[\\:\\@]")),ig=r(pc+"*"),og=r(pc+"+"),$8=r(r(Zt+"|"+e(xn,bt,"[\\@]"))+"+"),Lc=r(r("\\/"+ig)+"*"),ty=r("\\/"+r(og+Lc)+"?"),N1=r($8+Lc),em=r(og+Lc),ry="(?!"+pc+")",xx=r(Lc+"|"+ty+"|"+N1+"|"+em+"|"+ry),As=r(r(pc+"|"+e("[\\/\\?]",Ji))+"*"),ed=r(r(pc+"|[\\/\\?]")+"*"),ny=r(r("\\/\\/"+Gr+Lc)+"|"+ty+"|"+em+"|"+ry),m5=r(mo+"\\:"+ny+r("\\?"+As)+"?"+r("\\#"+ed)+"?"),W8=r(r("\\/\\/"+Gr+Lc)+"|"+ty+"|"+N1+"|"+ry),Xi=r(W8+r("\\?"+As)+"?"+r("\\#"+ed)+"?"),iy=r(m5+"|"+Xi),sg=r(mo+"\\:"+ny+r("\\?"+As)+"?"),h5="^("+mo+")\\:"+r(r("\\/\\/("+r("("+hi+")@")+"?("+_f+")"+r("\\:("+Rf+")")+"?)")+"?("+Lc+"|"+ty+"|"+em+"|"+ry+")")+r("\\?("+As+")")+"?"+r("\\#("+ed+")")+"?$",bx="^(){0}"+r(r("\\/\\/("+r("("+hi+")@")+"?("+_f+")"+r("\\:("+Rf+")")+"?)")+"?("+Lc+"|"+ty+"|"+N1+"|"+ry+")")+r("\\?("+As+")")+"?"+r("\\#("+ed+")")+"?$",td="^("+mo+")\\:"+r(r("\\/\\/("+r("("+hi+")@")+"?("+_f+")"+r("\\:("+Rf+")")+"?)")+"?("+Lc+"|"+ty+"|"+em+"|"+ry+")")+r("\\?("+As+")")+"?$",j8="^"+r("\\#("+ed+")")+"?$",G8="^"+r("("+hi+")@")+"?("+_f+")"+r("\\:("+Rf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",D,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",xn,bt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",xn,bt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",xn,bt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",xn,bt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",xn,bt,"[\\:\\@\\/\\?]",Ji),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",xn,bt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",xn,bt),"g"),UNRESERVED:new RegExp(xn,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",xn,yr),"g"),PCT_ENCODED:new RegExp(Zt,"g"),IPV4ADDRESS:new RegExp("^("+dc+")$"),IPV6ADDRESS:new RegExp("^\\[?("+mu+")"+r(r("\\%25|\\%(?!"+ut+"{2})")+"("+Zu+")")+"?\\]?$")}}s(c,"buildExps");var l=c(!1),u=c(!0),d=function(){function F(D,ee){var ge=[],_e=!0,ut=!1,St=void 0;try{for(var zt=D[Symbol.iterator](),Zt;!(_e=(Zt=zt.next()).done)&&(ge.push(Zt.value),!(ee&&ge.length===ee));_e=!0);}catch(Yt){ut=!0,St=Yt}finally{try{!_e&&zt.return&&zt.return()}finally{if(ut)throw St}}return ge}return s(F,"sliceIterator"),function(D,ee){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return F(D,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=s(function(F){if(Array.isArray(F)){for(var D=0,ee=Array(F.length);D<F.length;D++)ee[D]=F[D];return ee}else return Array.from(F)},"toConsumableArray"),m=2147483647,h=36,g=1,A=26,y=38,x=700,I=72,S=128,R="-",B=/^xn--/,M=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,K={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=h-g,z=Math.floor,Q=String.fromCharCode;function U(F){throw new RangeError(K[F])}s(U,"error$1");function Z(F,D){for(var ee=[],ge=F.length;ge--;)ee[ge]=D(F[ge]);return ee}s(Z,"map");function J(F,D){var ee=F.split("@"),ge="";ee.length>1&&(ge=ee[0]+"@",F=ee[1]),F=F.replace(O,".");var _e=F.split("."),ut=Z(_e,D).join(".");return ge+ut}s(J,"mapDomain");function j(F){for(var D=[],ee=0,ge=F.length;ee<ge;){var _e=F.charCodeAt(ee++);if(_e>=55296&&_e<=56319&&ee<ge){var ut=F.charCodeAt(ee++);(ut&64512)==56320?D.push(((_e&1023)<<10)+(ut&1023)+65536):(D.push(_e),ee--)}else D.push(_e)}return D}s(j,"ucs2decode");var $=s(function(D){return String.fromCodePoint.apply(String,p(D))},"ucs2encode"),X=s(function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:h},"basicToDigit"),ie=s(function(D,ee){return D+22+75*(D<26)-((ee!=0)<<5)},"digitToBasic"),ae=s(function(D,ee,ge){var _e=0;for(D=ge?z(D/x):D>>1,D+=z(D/ee);D>V*A>>1;_e+=h)D=z(D/V);return z(_e+(V+1)*D/(D+y))},"adapt"),te=s(function(D){var ee=[],ge=D.length,_e=0,ut=S,St=I,zt=D.lastIndexOf(R);zt<0&&(zt=0);for(var Zt=0;Zt<zt;++Zt)D.charCodeAt(Zt)>=128&&U("not-basic"),ee.push(D.charCodeAt(Zt));for(var Yt=zt>0?zt+1:0;Yt<ge;){for(var bt=_e,yr=1,si=h;;si+=h){Yt>=ge&&U("invalid-input");var Ji=X(D.charCodeAt(Yt++));(Ji>=h||Ji>z((m-_e)/yr))&&U("overflow"),_e+=Ji*yr;var xn=si<=St?g:si>=St+A?A:si-St;if(Ji<xn)break;var mo=h-xn;yr>z(m/mo)&&U("overflow"),yr*=mo}var hi=ee.length+1;St=ae(_e-bt,hi,bt==0),z(_e/hi)>m-ut&&U("overflow"),ut+=z(_e/hi),_e%=hi,ee.splice(_e++,0,ut)}return String.fromCodePoint.apply(String,ee)},"decode"),pe=s(function(D){var ee=[];D=j(D);var ge=D.length,_e=S,ut=0,St=I,zt=!0,Zt=!1,Yt=void 0;try{for(var bt=D[Symbol.iterator](),yr;!(zt=(yr=bt.next()).done);zt=!0){var si=yr.value;si<128&&ee.push(Q(si))}}catch(Bl){Zt=!0,Yt=Bl}finally{try{!zt&&bt.return&&bt.return()}finally{if(Zt)throw Yt}}var Ji=ee.length,xn=Ji;for(Ji&&ee.push(R);xn<ge;){var mo=m,hi=!0,Vo=!1,ua=void 0;try{for(var dc=D[Symbol.iterator](),Do;!(hi=(Do=dc.next()).done);hi=!0){var Qs=Do.value;Qs>=_e&&Qs<mo&&(mo=Qs)}}catch(Bl){Vo=!0,ua=Bl}finally{try{!hi&&dc.return&&dc.return()}finally{if(Vo)throw ua}}var Xu=xn+1;mo-_e>z((m-ut)/Xu)&&U("overflow"),ut+=(mo-_e)*Xu,_e=mo;var fc=!0,eg=!1,fl=void 0;try{for(var tg=D[Symbol.iterator](),rg;!(fc=(rg=tg.next()).done);fc=!0){var Cx=rg.value;if(Cx<_e&&++ut>m&&U("overflow"),Cx==_e){for(var _a=ut,pu=h;;pu+=h){var mu=pu<=St?g:pu>=St+A?A:pu-St;if(_a<mu)break;var Zu=_a-mu,ng=h-mu;ee.push(Q(ie(mu+Zu%ng,0))),_a=z(Zu/ng)}ee.push(Q(ie(_a,0))),St=ae(ut,Xu,xn==Ji),ut=0,++xn}}}catch(Bl){eg=!0,fl=Bl}finally{try{!fc&&tg.return&&tg.return()}finally{if(eg)throw fl}}++ut,++_e}return ee.join("")},"encode"),Ae=s(function(D){return J(D,function(ee){return B.test(ee)?te(ee.slice(4).toLowerCase()):ee})},"toUnicode"),Oe=s(function(D){return J(D,function(ee){return M.test(ee)?"xn--"+pe(ee):ee})},"toASCII"),Te={version:"2.1.0",ucs2:{decode:j,encode:$},decode:te,encode:pe,toASCII:Oe,toUnicode:Ae},Je={};function Me(F){var D=F.charCodeAt(0),ee=void 0;return D<16?ee="%0"+D.toString(16).toUpperCase():D<128?ee="%"+D.toString(16).toUpperCase():D<2048?ee="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():ee="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),ee}s(Me,"pctEncChar");function lt(F){for(var D="",ee=0,ge=F.length;ee<ge;){var _e=parseInt(F.substr(ee+1,2),16);if(_e<128)D+=String.fromCharCode(_e),ee+=3;else if(_e>=194&&_e<224){if(ge-ee>=6){var ut=parseInt(F.substr(ee+4,2),16);D+=String.fromCharCode((_e&31)<<6|ut&63)}else D+=F.substr(ee,6);ee+=6}else if(_e>=224){if(ge-ee>=9){var St=parseInt(F.substr(ee+4,2),16),zt=parseInt(F.substr(ee+7,2),16);D+=String.fromCharCode((_e&15)<<12|(St&63)<<6|zt&63)}else D+=F.substr(ee,9);ee+=9}else D+=F.substr(ee,3),ee+=3}return D}s(lt,"pctDecChars");function _t(F,D){function ee(ge){var _e=lt(ge);return _e.match(D.UNRESERVED)?_e:ge}return s(ee,"decodeUnreserved"),F.scheme&&(F.scheme=String(F.scheme).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_SCHEME,"")),F.userinfo!==void 0&&(F.userinfo=String(F.userinfo).replace(D.PCT_ENCODED,ee).replace(D.NOT_USERINFO,Me).replace(D.PCT_ENCODED,i)),F.host!==void 0&&(F.host=String(F.host).replace(D.PCT_ENCODED,ee).toLowerCase().replace(D.NOT_HOST,Me).replace(D.PCT_ENCODED,i)),F.path!==void 0&&(F.path=String(F.path).replace(D.PCT_ENCODED,ee).replace(F.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,Me).replace(D.PCT_ENCODED,i)),F.query!==void 0&&(F.query=String(F.query).replace(D.PCT_ENCODED,ee).replace(D.NOT_QUERY,Me).replace(D.PCT_ENCODED,i)),F.fragment!==void 0&&(F.fragment=String(F.fragment).replace(D.PCT_ENCODED,ee).replace(D.NOT_FRAGMENT,Me).replace(D.PCT_ENCODED,i)),F}s(_t,"_normalizeComponentEncoding");function Et(F){return F.replace(/^0*(.*)/,"$1")||"0"}s(Et,"_stripLeadingZeros");function ht(F,D){var ee=F.match(D.IPV4ADDRESS)||[],ge=d(ee,2),_e=ge[1];return _e?_e.split(".").map(Et).join("."):F}s(ht,"_normalizeIPv4");function ue(F,D){var ee=F.match(D.IPV6ADDRESS)||[],ge=d(ee,3),_e=ge[1],ut=ge[2];if(_e){for(var St=_e.toLowerCase().split("::").reverse(),zt=d(St,2),Zt=zt[0],Yt=zt[1],bt=Yt?Yt.split(":").map(Et):[],yr=Zt.split(":").map(Et),si=D.IPV4ADDRESS.test(yr[yr.length-1]),Ji=si?7:8,xn=yr.length-Ji,mo=Array(Ji),hi=0;hi<Ji;++hi)mo[hi]=bt[hi]||yr[xn+hi]||"";si&&(mo[Ji-1]=ht(mo[Ji-1],D));var Vo=mo.reduce(function(Xu,fc,eg){if(!fc||fc==="0"){var fl=Xu[Xu.length-1];fl&&fl.index+fl.length===eg?fl.length++:Xu.push({index:eg,length:1})}return Xu},[]),ua=Vo.sort(function(Xu,fc){return fc.length-Xu.length})[0],dc=void 0;if(ua&&ua.length>1){var Do=mo.slice(0,ua.index),Qs=mo.slice(ua.index+ua.length);dc=Do.join(":")+"::"+Qs.join(":")}else dc=mo.join(":");return ut&&(dc+="%"+ut),dc}else return F}s(ue,"_normalizeIPv6");var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ye="".match(/(){0}/)[1]===void 0;function $e(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee={},ge=D.iri!==!1?u:l;D.reference==="suffix"&&(F=(D.scheme?D.scheme+":":"")+"//"+F);var _e=F.match(Ue);if(_e){ye?(ee.scheme=_e[1],ee.userinfo=_e[3],ee.host=_e[4],ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=_e[7],ee.fragment=_e[8],isNaN(ee.port)&&(ee.port=_e[5])):(ee.scheme=_e[1]||void 0,ee.userinfo=F.indexOf("@")!==-1?_e[3]:void 0,ee.host=F.indexOf("//")!==-1?_e[4]:void 0,ee.port=parseInt(_e[5],10),ee.path=_e[6]||"",ee.query=F.indexOf("?")!==-1?_e[7]:void 0,ee.fragment=F.indexOf("#")!==-1?_e[8]:void 0,isNaN(ee.port)&&(ee.port=F.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_e[4]:void 0)),ee.host&&(ee.host=ue(ht(ee.host,ge),ge)),ee.scheme===void 0&&ee.userinfo===void 0&&ee.host===void 0&&ee.port===void 0&&!ee.path&&ee.query===void 0?ee.reference="same-document":ee.scheme===void 0?ee.reference="relative":ee.fragment===void 0?ee.reference="absolute":ee.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==ee.reference&&(ee.error=ee.error||"URI is not a "+D.reference+" reference.");var ut=Je[(D.scheme||ee.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!ut||!ut.unicodeSupport)){if(ee.host&&(D.domainHost||ut&&ut.domainHost))try{ee.host=Te.toASCII(ee.host.replace(ge.PCT_ENCODED,lt).toLowerCase())}catch(St){ee.error=ee.error||"Host's domain name can not be converted to ASCII via punycode: "+St}_t(ee,l)}else _t(ee,ge);ut&&ut.parse&&ut.parse(ee,D)}else ee.error=ee.error||"URI can not be parsed.";return ee}s($e,"parse");function se(F,D){var ee=D.iri!==!1?u:l,ge=[];return F.userinfo!==void 0&&(ge.push(F.userinfo),ge.push("@")),F.host!==void 0&&ge.push(ue(ht(String(F.host),ee),ee).replace(ee.IPV6ADDRESS,function(_e,ut,St){return"["+ut+(St?"%25"+St:"")+"]"})),(typeof F.port=="number"||typeof F.port=="string")&&(ge.push(":"),ge.push(String(F.port))),ge.length?ge.join(""):void 0}s(se,"_recomposeAuthority");var le=/^\.\.?\//,qe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,xe=/^\/?(?:.|\n)*?(?=\/|$)/;function je(F){for(var D=[];F.length;)if(F.match(le))F=F.replace(le,"");else if(F.match(qe))F=F.replace(qe,"/");else if(F.match(Be))F=F.replace(Be,"/"),D.pop();else if(F==="."||F==="..")F="";else{var ee=F.match(xe);if(ee){var ge=ee[0];F=F.slice(ge.length),D.push(ge)}else throw new Error("Unexpected dot segment condition")}return D.join("")}s(je,"removeDotSegments");function tt(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=D.iri?u:l,ge=[],_e=Je[(D.scheme||F.scheme||"").toLowerCase()];if(_e&&_e.serialize&&_e.serialize(F,D),F.host&&!ee.IPV6ADDRESS.test(F.host)){if(D.domainHost||_e&&_e.domainHost)try{F.host=D.iri?Te.toUnicode(F.host):Te.toASCII(F.host.replace(ee.PCT_ENCODED,lt).toLowerCase())}catch(zt){F.error=F.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+zt}}_t(F,ee),D.reference!=="suffix"&&F.scheme&&(ge.push(F.scheme),ge.push(":"));var ut=se(F,D);if(ut!==void 0&&(D.reference!=="suffix"&&ge.push("//"),ge.push(ut),F.path&&F.path.charAt(0)!=="/"&&ge.push("/")),F.path!==void 0){var St=F.path;!D.absolutePath&&(!_e||!_e.absolutePath)&&(St=je(St)),ut===void 0&&(St=St.replace(/^\/\//,"/%2F")),ge.push(St)}return F.query!==void 0&&(ge.push("?"),ge.push(F.query)),F.fragment!==void 0&&(ge.push("#"),ge.push(F.fragment)),ge.join("")}s(tt,"serialize");function pt(F,D){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=arguments[3],_e={};return ge||(F=$e(tt(F,ee),ee),D=$e(tt(D,ee),ee)),ee=ee||{},!ee.tolerant&&D.scheme?(_e.scheme=D.scheme,_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(_e.userinfo=D.userinfo,_e.host=D.host,_e.port=D.port,_e.path=je(D.path||""),_e.query=D.query):(D.path?(D.path.charAt(0)==="/"?_e.path=je(D.path):((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path?_e.path="/"+D.path:F.path?_e.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+D.path:_e.path=D.path,_e.path=je(_e.path)),_e.query=D.query):(_e.path=F.path,D.query!==void 0?_e.query=D.query:_e.query=F.query),_e.userinfo=F.userinfo,_e.host=F.host,_e.port=F.port),_e.scheme=F.scheme),_e.fragment=D.fragment,_e}s(pt,"resolveComponents");function Mt(F,D,ee){var ge=a({scheme:"null"},ee);return tt(pt($e(F,ge),$e(D,ge),ge,!0),ge)}s(Mt,"resolve");function Kt(F,D){return typeof F=="string"?F=tt($e(F,D),D):n(F)==="object"&&(F=$e(tt(F,D),D)),F}s(Kt,"normalize");function Ot(F,D,ee){return typeof F=="string"?F=tt($e(F,ee),ee):n(F)==="object"&&(F=tt(F,ee)),typeof D=="string"?D=tt($e(D,ee),ee):n(D)==="object"&&(D=tt(D,ee)),F===D}s(Ot,"equal");function Wr(F,D){return F&&F.toString().replace(!D||!D.iri?l.ESCAPE:u.ESCAPE,Me)}s(Wr,"escapeComponent");function Rr(F,D){return F&&F.toString().replace(!D||!D.iri?l.PCT_ENCODED:u.PCT_ENCODED,lt)}s(Rr,"unescapeComponent");var sn={scheme:"http",domainHost:!0,parse:s(function(D,ee){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},"parse"),serialize:s(function(D,ee){var ge=String(D.scheme).toLowerCase()==="https";return(D.port===(ge?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D},"serialize")},ve={scheme:"https",domainHost:sn.domainHost,parse:sn.parse,serialize:sn.serialize};function Ge(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}s(Ge,"isSecure");var ft={scheme:"ws",domainHost:!0,parse:s(function(D,ee){var ge=D;return ge.secure=Ge(ge),ge.resourceName=(ge.path||"/")+(ge.query?"?"+ge.query:""),ge.path=void 0,ge.query=void 0,ge},"parse"),serialize:s(function(D,ee){if((D.port===(Ge(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var ge=D.resourceName.split("?"),_e=d(ge,2),ut=_e[0],St=_e[1];D.path=ut&&ut!=="/"?ut:void 0,D.query=St,D.resourceName=void 0}return D.fragment=void 0,D},"serialize")},Tt={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},ir={},Xt=!0,br="[A-Za-z0-9\\-\\.\\_\\~"+(Xt?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",lr="[0-9A-Fa-f]",tr=r(r("%[EFef]"+lr+"%"+lr+lr+"%"+lr+lr)+"|"+r("%[89A-Fa-f]"+lr+"%"+lr+lr)+"|"+r("%"+lr+lr)),cr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",rr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Dr=e(rr,'[\\"\\\\]'),jr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",rn=new RegExp(br,"g"),An=new RegExp(tr,"g"),Zn=new RegExp(e("[^]",cr,"[\\.]",'[\\"]',Dr),"g"),Tn=new RegExp(e("[^]",br,jr),"g"),Kn=Tn;function nn(F){var D=lt(F);return D.match(rn)?D:F}s(nn,"decodeUnreserved");var Gn={scheme:"mailto",parse:s(function(D,ee){var ge=D,_e=ge.to=ge.path?ge.path.split(","):[];if(ge.path=void 0,ge.query){for(var ut=!1,St={},zt=ge.query.split("&"),Zt=0,Yt=zt.length;Zt<Yt;++Zt){var bt=zt[Zt].split("=");switch(bt[0]){case"to":for(var yr=bt[1].split(","),si=0,Ji=yr.length;si<Ji;++si)_e.push(yr[si]);break;case"subject":ge.subject=Rr(bt[1],ee);break;case"body":ge.body=Rr(bt[1],ee);break;default:ut=!0,St[Rr(bt[0],ee)]=Rr(bt[1],ee);break}}ut&&(ge.headers=St)}ge.query=void 0;for(var xn=0,mo=_e.length;xn<mo;++xn){var hi=_e[xn].split("@");if(hi[0]=Rr(hi[0]),ee.unicodeSupport)hi[1]=Rr(hi[1],ee).toLowerCase();else try{hi[1]=Te.toASCII(Rr(hi[1],ee).toLowerCase())}catch(Vo){ge.error=ge.error||"Email address's domain name can not be converted to ASCII via punycode: "+Vo}_e[xn]=hi.join("@")}return ge},"parse$$1"),serialize:s(function(D,ee){var ge=D,_e=o(D.to);if(_e){for(var ut=0,St=_e.length;ut<St;++ut){var zt=String(_e[ut]),Zt=zt.lastIndexOf("@"),Yt=zt.slice(0,Zt).replace(An,nn).replace(An,i).replace(Zn,Me),bt=zt.slice(Zt+1);try{bt=ee.iri?Te.toUnicode(bt):Te.toASCII(Rr(bt,ee).toLowerCase())}catch(xn){ge.error=ge.error||"Email address's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+xn}_e[ut]=Yt+"@"+bt}ge.path=_e.join(",")}var yr=D.headers=D.headers||{};D.subject&&(yr.subject=D.subject),D.body&&(yr.body=D.body);var si=[];for(var Ji in yr)yr[Ji]!==ir[Ji]&&si.push(Ji.replace(An,nn).replace(An,i).replace(Tn,Me)+"="+yr[Ji].replace(An,nn).replace(An,i).replace(Kn,Me));return si.length&&(ge.query=si.join("&")),ge},"serialize$$1")},Pe=/^([^\:]+)\:(.*)/,Y={scheme:"urn",parse:s(function(D,ee){var ge=D.path&&D.path.match(Pe),_e=D;if(ge){var ut=ee.scheme||_e.scheme||"urn",St=ge[1].toLowerCase(),zt=ge[2],Zt=ut+":"+(ee.nid||St),Yt=Je[Zt];_e.nid=St,_e.nss=zt,_e.path=void 0,Yt&&(_e=Yt.parse(_e,ee))}else _e.error=_e.error||"URN can not be parsed.";return _e},"parse$$1"),serialize:s(function(D,ee){var ge=ee.scheme||D.scheme||"urn",_e=D.nid,ut=ge+":"+(ee.nid||_e),St=Je[ut];St&&(D=St.serialize(D,ee));var zt=D,Zt=D.nss;return zt.path=(_e||ee.nid)+":"+Zt,zt},"serialize$$1")},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:s(function(D,ee){var ge=D;return ge.uuid=ge.nss,ge.nss=void 0,!ee.tolerant&&(!ge.uuid||!ge.uuid.match(Ce))&&(ge.error=ge.error||"UUID is not valid."),ge},"parse"),serialize:s(function(D,ee){var ge=D;return ge.nss=(D.uuid||"").toLowerCase(),ge},"serialize")};Je[sn.scheme]=sn,Je[ve.scheme]=ve,Je[ft.scheme]=ft,Je[Tt.scheme]=Tt,Je[Gn.scheme]=Gn,Je[Y.scheme]=Y,Je[Ie.scheme]=Ie,t.SCHEMES=Je,t.pctEncChar=Me,t.pctDecChars=lt,t.parse=$e,t.removeDotSegments=je,t.serialize=tt,t.resolveComponents=pt,t.resolve=Mt,t.normalize=Kt,t.equal=Ot,t.escapeComponent=Wr,t.unescapeComponent=Rr,Object.defineProperty(t,"__esModule",{value:!0})})});var rae=H((Ixo,Ugt)=>{"use strict";f();Ugt.exports=s(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},"equal")});var Hgt=H((Sxo,qgt)=>{"use strict";f();qgt.exports=s(function(e){for(var r=0,n=e.length,i=0,o;i<n;)r++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return r},"ucs2length")});var a5=H((kxo,jgt)=>{"use strict";f();jgt.exports={copy:vIr,checkDataType:H2e,checkDataTypes:EIr,coerceToTypes:xIr,toHash:W2e,getProperty:j2e,escapeQuotes:G2e,equal:rae(),ucs2length:Hgt(),varOccurences:TIr,varReplace:wIr,schemaHasRules:SIr,schemaHasRulesExcept:_Ir,schemaUnknownRules:RIr,toQuotedString:$2e,getPathExpr:kIr,getPath:PIr,getData:NIr,unescapeFragment:LIr,unescapeJsonPointer:z2e,escapeFragment:MIr,escapeJsonPointer:V2e};function vIr(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}s(vIr,"copy");function H2e(t,e,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",a=n?"!":"",c=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+o+"typeof "+e+i+'"object"'+o+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+c+"("+e+" % 1)"+o+e+i+e+(r?o+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+t+'"'+(r?o+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+t+'"'}}s(H2e,"checkDataType");function EIr(t,e,r){switch(t.length){case 1:return H2e(t[0],e,r,!0);default:var n="",i=W2e(t);i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)n+=(n?" && ":"")+H2e(o,e,r,!0);return n}}s(EIr,"checkDataTypes");var $gt=W2e(["string","number","integer","boolean","null"]);function xIr(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];($gt[i]||t==="array"&&i==="array")&&(r[r.length]=i)}if(r.length)return r}else{if($gt[e])return[e];if(t==="array"&&e==="array")return["array"]}}s(xIr,"coerceToTypes");function W2e(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}s(W2e,"toHash");var bIr=/^[a-z$_][a-z$_0-9]*$/i,IIr=/'|\\/g;function j2e(t){return typeof t=="number"?"["+t+"]":bIr.test(t)?"."+t:"['"+G2e(t)+"']"}s(j2e,"getProperty");function G2e(t){return t.replace(IIr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}s(G2e,"escapeQuotes");function TIr(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}s(TIr,"varOccurences");function wIr(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}s(wIr,"varReplace");function SIr(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}s(SIr,"schemaHasRules");function _Ir(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}s(_Ir,"schemaHasRulesExcept");function RIr(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}s(RIr,"schemaUnknownRules");function $2e(t){return"'"+G2e(t)+"'"}s($2e,"toQuotedString");function kIr(t,e,r,n){var i=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Wgt(t,i)}s(kIr,"getPathExpr");function PIr(t,e,r){var n=$2e(r?"/"+V2e(e):j2e(e));return Wgt(t,n)}s(PIr,"getPath");var DIr=/^\/(?:[^~]|~0|~1)*$/,BIr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function NIr(t,e,r){var n,i,o,a;if(t==="")return"rootData";if(t[0]=="/"){if(!DIr.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,o="rootData"}else{if(a=t.match(BIr),!a)throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],i=a[2],i=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!i)return o}for(var c=o,l=i.split("/"),u=0;u<l.length;u++){var d=l[u];d&&(o+=j2e(z2e(d)),c+=" && "+o)}return c}s(NIr,"getData");function Wgt(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}s(Wgt,"joinPaths");function LIr(t){return z2e(decodeURIComponent(t))}s(LIr,"unescapeFragment");function MIr(t){return encodeURIComponent(V2e(t))}s(MIr,"escapeFragment");function V2e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(V2e,"escapeJsonPointer");function z2e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}s(z2e,"unescapeJsonPointer")});var Y2e=H((Bxo,Ggt)=>{"use strict";f();var FIr=a5();Ggt.exports=OIr;function OIr(t){FIr.copy(t,this)}s(OIr,"SchemaObject")});var zgt=H((Mxo,Vgt)=>{"use strict";f();var Yw=Vgt.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};nae(e,n,i,t,"",t)};Yw.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Yw.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yw.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yw.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function nae(t,e,r,n,i,o,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,a,c,l,u);for(var d in n){var p=n[d];if(Array.isArray(p)){if(d in Yw.arrayKeywords)for(var m=0;m<p.length;m++)nae(t,e,r,p[m],i+"/"+d+"/"+m,o,i,d,n,m)}else if(d in Yw.propsKeywords){if(p&&typeof p=="object")for(var h in p)nae(t,e,r,p[h],i+"/"+d+"/"+QIr(h),o,i,d,n,h)}else(d in Yw.keywords||t.allKeys&&!(d in Yw.skipKeywords))&&nae(t,e,r,p,i+"/"+d,o,i,d,n)}r(n,i,o,a,c,l,u)}}s(nae,"_traverse");function QIr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(QIr,"escapeJsonPtr")});var lae=H((Qxo,Xgt)=>{"use strict";f();var GU=Qgt(),Ygt=rae(),aae=a5(),iae=Y2e(),UIr=zgt();Xgt.exports=Jw;Jw.normalizeId=Kw;Jw.fullPath=oae;Jw.url=sae;Jw.ids=jIr;Jw.inlineRef=K2e;Jw.schema=cae;function Jw(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return Jw.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof iae)return K2e(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i=cae.call(this,e,r),o,a,c;return i&&(o=i.schema,e=i.root,c=i.baseId),o instanceof iae?a=o.validate||t.call(this,o.schema,e,void 0,c):o!==void 0&&(a=K2e(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,c)),a}s(Jw,"resolve");function cae(t,e){var r=GU.parse(e),n=Jgt(r),i=oae(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==i){var o=Kw(n),a=this._refs[o];if(typeof a=="string")return qIr.call(this,t,a,r);if(a instanceof iae)a.validate||this._compile(a),t=a;else if(a=this._schemas[o],a instanceof iae){if(a.validate||this._compile(a),o==Kw(e))return{schema:a,root:t,baseId:i};t=a}else return;if(!t.schema)return;i=oae(this._getId(t.schema))}return Kgt.call(this,r,i,t.schema,t)}s(cae,"resolveSchema");function qIr(t,e,r){var n=cae.call(this,t,e);if(n){var i=n.schema,o=n.baseId;t=n.root;var a=this._getId(i);return a&&(o=sae(o,a)),Kgt.call(this,r,o,i,t)}}s(qIr,"resolveRecursive");var HIr=aae.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Kgt(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=aae.unescapeFragment(a),r=r[a],r===void 0)break;var c;if(!HIr[a]&&(c=this._getId(r),c&&(e=sae(e,c)),r.$ref)){var l=sae(e,r.$ref),u=cae.call(this,n,l);u&&(r=u.schema,n=u.root,e=u.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}s(Kgt,"getJsonPointer");var $Ir=aae.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function K2e(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return J2e(t);if(e)return X2e(t)<=e}s(K2e,"inlineRef");function J2e(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!J2e(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!J2e(e)))return!1;return!0}s(J2e,"checkNoRef");function X2e(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=X2e(r)),e==1/0)return 1/0}else for(var i in t){if(i=="$ref")return 1/0;if($Ir[i])e++;else if(r=t[i],typeof r=="object"&&(e+=X2e(r)+1),e==1/0)return 1/0}return e}s(X2e,"countKeys");function oae(t,e){e!==!1&&(t=Kw(t));var r=GU.parse(t);return Jgt(r)}s(oae,"getFullPath");function Jgt(t){return GU.serialize(t).split("#")[0]+"#"}s(Jgt,"_getFullPath");var WIr=/#\/?$/;function Kw(t){return t?t.replace(WIr,""):""}s(Kw,"normalizeId");function sae(t,e){return e=Kw(e),GU.resolve(t,e)}s(sae,"resolveUrl");function jIr(t){var e=Kw(this._getId(t)),r={"":e},n={"":oae(e,!1)},i={},o=this;return UIr(t,{allKeys:!0},function(a,c,l,u,d,p,m){if(c!==""){var h=o._getId(a),g=r[u],A=n[u]+"/"+d;if(m!==void 0&&(A+="/"+(typeof m=="number"?m:aae.escapeFragment(m))),typeof h=="string"){h=g=Kw(g?GU.resolve(g,h):h);var y=o._refs[h];if(typeof y=="string"&&(y=o._refs[y]),y&&y.schema){if(!Ygt(a,y.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=Kw(A))if(h[0]=="#"){if(i[h]&&!Ygt(a,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=a}else o._refs[h]=A}r[c]=g,n[c]=A}}),i}s(jIr,"resolveIds")});var uae=H((Hxo,eAt)=>{"use strict";f();var Z2e=lae();eAt.exports={Validation:Zgt(GIr),MissingRef:Zgt(eRe)};function GIr(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}s(GIr,"ValidationError");eRe.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function eRe(t,e,r){this.message=r||eRe.message(t,e),this.missingRef=Z2e.url(t,e),this.missingSchema=Z2e.normalizeId(Z2e.fullPath(this.missingRef))}s(eRe,"MissingRefError");function Zgt(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}s(Zgt,"errorSubclass")});var tRe=H((jxo,tAt)=>{"use strict";f();tAt.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(o){return function(a){return function(c,l){var u={key:c,value:a[c]},d={key:l,value:a[l]};return o(u,d)}}}(e.cmp),i=[];return s(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=o(a[c])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,d=Object.keys(a).sort(n&&n(a));for(l="",c=0;c<d.length;c++){var p=d[c],m=o(a[p]);m&&(l&&(l+=","),l+=JSON.stringify(p)+":"+m)}return i.splice(u,1),"{"+l+"}"}},"stringify")(t)}});var rRe=H((zxo,rAt)=>{"use strict";f();rAt.exports=s(function(e,r,n){var i="",o=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var r="false schema",d=e.level,p=e.dataLevel,m=e.schema[r],h=e.schemaPath+e.util.getProperty(r),g=e.errSchemaPath+"/"+r,B=!e.opts.allErrors,K,A="data"+(p||""),R="valid"+d;if(e.schema===!1){e.isTop?B=!0:i+=" var "+R+" = false; ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var x=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+R+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var I=e.isTop,d=e.level=0,p=e.dataLevel=0,A="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var d=e.level,p=e.dataLevel,A="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+d+" = errors;"}var R="valid"+d,B=!e.opts.allErrors,M="",O="",K,V=e.schema.type,z=Array.isArray(V);if(V&&e.opts.nullable&&e.schema.nullable===!0&&(z?V.indexOf("null")==-1&&(V=V.concat("null")):V!="null"&&(V=[V,"null"],z=!0)),z&&V.length==1&&(V=V[0],z=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),V){if(e.opts.coerceTypes)var Q=e.util.coerceToTypes(e.opts.coerceTypes,V);var U=e.RULES.types[V];if(Q||z||U===!0||U&&!xe(U)){var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",h=e.schemaPath+".type",g=e.errSchemaPath+"/type",Z=z?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[Z](V,A,e.opts.strictNumbers,!0)+") { ",Q){var J="dataType"+d,j="coerced"+d;i+=" var "+J+" = typeof "+A+"; var "+j+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+J+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+J+" = typeof "+A+"; if ("+e.util.checkDataType(e.schema.type,A,e.opts.strictNumbers)+") "+j+" = "+A+"; } "),i+=" if ("+j+" !== undefined) ; ";var $=Q;if($)for(var X,ie=-1,ae=$.length-1;ie<ae;)X=$[ie+=1],X=="string"?i+=" else if ("+J+" == 'number' || "+J+" == 'boolean') "+j+" = '' + "+A+"; else if ("+A+" === null) "+j+" = ''; ":X=="number"||X=="integer"?(i+=" else if ("+J+" == 'boolean' || "+A+" === null || ("+J+" == 'string' && "+A+" && "+A+" == +"+A+" ",X=="integer"&&(i+=" && !("+A+" % 1)"),i+=")) "+j+" = +"+A+"; "):X=="boolean"?i+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+j+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+j+" = true; ":X=="null"?i+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+j+" = null; ":e.opts.coerceTypes=="array"&&X=="array"&&(i+=" else if ("+J+" == 'string' || "+J+" == 'number' || "+J+" == 'boolean' || "+A+" == null) "+j+" = ["+A+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var x=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+j+" !== undefined) {  ";var te=p?"data"+(p-1||""):"parentData",pe=p?e.dataPathArr[p]:"parentDataProperty";i+=" "+A+" = "+j+"; ",p||(i+="if ("+te+" !== undefined)"),i+=" "+te+"["+pe+"] = "+j+"; } "}else{var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var x=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",B&&(i+=" } if (errors === ",I?i+="0":i+="errs_"+d,i+=") { ",O+="}");else{var Ae=e.RULES;if(Ae){for(var U,Oe=-1,Te=Ae.length-1;Oe<Te;)if(U=Ae[Oe+=1],xe(U)){if(U.type&&(i+=" if ("+e.util.checkDataType(U.type,A,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(U.type=="object"&&e.schema.properties){var m=e.schema.properties,Je=Object.keys(m),Me=Je;if(Me)for(var lt,_t=-1,Et=Me.length-1;_t<Et;){lt=Me[_t+=1];var ht=m[lt];if(ht.default!==void 0){var ue=A+e.util.getProperty(lt);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}else if(U.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var ht,ie=-1,ye=Ue.length-1;ie<ye;)if(ht=Ue[ie+=1],ht.default!==void 0){var ue=A+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(ht.default)+" ":i+=" "+JSON.stringify(ht.default)+" ",i+="; "}}}}var $e=U.rules;if($e){for(var se,le=-1,qe=$e.length-1;le<qe;)if(se=$e[le+=1],je(se)){var Be=se.code(e,se.keyword,U.type);Be&&(i+=" "+Be+" ",B&&(M+="}"))}}if(B&&(i+=" "+M+" ",M=""),U.type&&(i+=" } ",V&&V===U.type&&!Q)){i+=" else { ";var h=e.schemaPath+".type",g=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(K||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",z?i+=""+V.join(","):i+=""+V,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",z?i+=""+V.join(","):i+=""+V,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var x=i;i=y.pop(),!e.compositeRule&&B?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}B&&(i+=" if (errors === ",I?i+="0":i+="errs_"+d,i+=") { ",O+="}")}}}B&&(i+=" "+O+" "),I?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+R+" = errors === errs_"+d+";";function xe(pt){for(var Mt=pt.rules,Kt=0;Kt<Mt.length;Kt++)if(je(Mt[Kt]))return!0}s(xe,"$shouldUseGroup");function je(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&tt(pt)}s(je,"$shouldUseRule");function tt(pt){for(var Mt=pt.implements,Kt=0;Kt<Mt.length;Kt++)if(e.schema[Mt[Kt]]!==void 0)return!0}return s(tt,"$ruleImplementsSomeKeyword"),i},"generate_validate")});var aAt=H((Jxo,sAt)=>{"use strict";f();var dae=lae(),pae=a5(),iAt=uae(),VIr=tRe(),nAt=rRe(),zIr=pae.ucs2length,YIr=rae(),KIr=iAt.Validation;sAt.exports=nRe;function nRe(t,e,r,n){var i=this,o=this._opts,a=[void 0],c={},l=[],u={},d=[],p={},m=[];e=e||{schema:t,refVal:a,refs:c};var h=JIr.call(this,t,e,n),g=this._compilations[h.index];if(h.compiling)return g.callValidate=S;var A=this._formats,y=this.RULES;try{var x=R(t,e,r,n);g.validate=x;var I=g.callValidate;return I&&(I.schema=x.schema,I.errors=null,I.refs=x.refs,I.refVal=x.refVal,I.root=x.root,I.$async=x.$async,o.sourceCode&&(I.source=x.source)),x}finally{XIr.call(this,t,e,n)}function S(){var Z=g.validate,J=Z.apply(this,arguments);return S.errors=Z.errors,J}s(S,"callValidate");function R(Z,J,j,$){var X=!J||J&&J.schema==Z;if(J.schema!=e.schema)return nRe.call(i,Z,J,j,$);var ie=Z.$async===!0,ae=nAt({isTop:!0,schema:Z,isRoot:X,baseId:$,root:J,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:iAt.MissingRef,RULES:y,validate:nAt,util:pae,resolve:dae,resolveRef:B,usePattern:z,useDefault:Q,useCustomRule:U,opts:o,formats:A,logger:i.logger,self:i});ae=fae(a,tTr)+fae(l,ZIr)+fae(d,eTr)+fae(m,rTr)+ae,o.processCode&&(ae=o.processCode(ae,Z));var te;try{var pe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ae);te=pe(i,y,A,e,a,d,m,YIr,zIr,KIr),a[0]=te}catch(Ae){throw i.logger.error("Error compiling schema, function code:",ae),Ae}return te.schema=Z,te.errors=null,te.refs=c,te.refVal=a,te.root=X?te:J,ie&&(te.$async=!0),o.sourceCode===!0&&(te.source={code:ae,patterns:l,defaults:d}),te}s(R,"localCompile");function B(Z,J,j){J=dae.url(Z,J);var $=c[J],X,ie;if($!==void 0)return X=a[$],ie="refVal["+$+"]",V(X,ie);if(!j&&e.refs){var ae=e.refs[J];if(ae!==void 0)return X=e.refVal[ae],ie=M(J,X),V(X,ie)}ie=M(J);var te=dae.call(i,R,e,J);if(te===void 0){var pe=r&&r[J];pe&&(te=dae.inlineRef(pe,o.inlineRefs)?pe:nRe.call(i,pe,e,r,Z))}if(te===void 0)O(J);else return K(J,te),V(te,ie)}s(B,"resolveRef");function M(Z,J){var j=a.length;return a[j]=J,c[Z]=j,"refVal"+j}s(M,"addLocalRef");function O(Z){delete c[Z]}s(O,"removeLocalRef");function K(Z,J){var j=c[Z];a[j]=J}s(K,"replaceLocalRef");function V(Z,J){return typeof Z=="object"||typeof Z=="boolean"?{code:J,schema:Z,inline:!0}:{code:J,$async:Z&&!!Z.$async}}s(V,"resolvedRef");function z(Z){var J=u[Z];return J===void 0&&(J=u[Z]=l.length,l[J]=Z),"pattern"+J}s(z,"usePattern");function Q(Z){switch(typeof Z){case"boolean":case"number":return""+Z;case"string":return pae.toQuotedString(Z);case"object":if(Z===null)return"null";var J=VIr(Z),j=p[J];return j===void 0&&(j=p[J]=d.length,d[j]=Z),"default"+j}}s(Q,"useDefault");function U(Z,J,j,$){if(i._opts.validateSchema!==!1){var X=Z.definition.dependencies;if(X&&!X.every(function(Me){return Object.prototype.hasOwnProperty.call(j,Me)}))throw new Error("parent schema must have all required keywords: "+X.join(","));var ie=Z.definition.validateSchema;if(ie){var ae=ie(J);if(!ae){var te="keyword schema is invalid: "+i.errorsText(ie.errors);if(i._opts.validateSchema=="log")i.logger.error(te);else throw new Error(te)}}}var pe=Z.definition.compile,Ae=Z.definition.inline,Oe=Z.definition.macro,Te;if(pe)Te=pe.call(i,J,j,$);else if(Oe)Te=Oe.call(i,J,j,$),o.validateSchema!==!1&&i.validateSchema(Te,!0);else if(Ae)Te=Ae.call(i,$,Z.keyword,J,j);else if(Te=Z.definition.validate,!Te)return;if(Te===void 0)throw new Error('custom keyword "'+Z.keyword+'"failed to compile');var Je=m.length;return m[Je]=Te,{code:"customRule"+Je,validate:Te}}s(U,"useCustomRule")}s(nRe,"compile");function JIr(t,e,r){var n=oAt.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}s(JIr,"checkCompiling");function XIr(t,e,r){var n=oAt.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}s(XIr,"endCompiling");function oAt(t,e,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==t&&i.root==e&&i.baseId==r)return n}return-1}s(oAt,"compIndex");function ZIr(t,e){return"var pattern"+t+" = new RegExp("+pae.toQuotedString(e[t])+");"}s(ZIr,"patternCode");function eTr(t){return"var default"+t+" = defaults["+t+"];"}s(eTr,"defaultCode");function tTr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}s(tTr,"refValCode");function rTr(t){return"var customRule"+t+" = customRules["+t+"];"}s(rTr,"customRuleCode");function fae(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}s(fae,"vars")});var lAt=H((ebo,cAt)=>{"use strict";f();var mae=cAt.exports=s(function(){this._cache={}},"Cache");mae.prototype.put=s(function(e,r){this._cache[e]=r},"Cache_put");mae.prototype.get=s(function(e){return this._cache[e]},"Cache_get");mae.prototype.del=s(function(e){delete this._cache[e]},"Cache_del");mae.prototype.clear=s(function(){this._cache={}},"Cache_clear")});var EAt=H((nbo,vAt)=>{"use strict";f();var nTr=a5(),iTr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,oTr=[0,31,28,31,30,31,30,31,31,30,31,30,31],sTr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,uAt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,aTr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,cTr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,dAt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,fAt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,pAt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,mAt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,hAt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,gAt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;vAt.exports=hae;function hae(t){return t=t=="full"?"full":"fast",nTr.copy(hae[t])}s(hae,"formats");hae.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":dAt,url:fAt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:uAt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:CAt,uuid:pAt,"json-pointer":mAt,"json-pointer-uri-fragment":hAt,"relative-json-pointer":gAt};hae.full={date:AAt,time:yAt,"date-time":dTr,uri:pTr,"uri-reference":cTr,"uri-template":dAt,url:fAt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:uAt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:CAt,uuid:pAt,"json-pointer":mAt,"json-pointer-uri-fragment":hAt,"relative-json-pointer":gAt};function lTr(t){return t%4===0&&(t%100!==0||t%400===0)}s(lTr,"isLeapYear");function AAt(t){var e=t.match(iTr);if(!e)return!1;var r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&lTr(r)?29:oTr[n])}s(AAt,"date");function yAt(t,e){var r=t.match(sTr);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!e||a)}s(yAt,"time");var uTr=/t|\s/i;function dTr(t){var e=t.split(uTr);return e.length==2&&AAt(e[0])&&yAt(e[1],!0)}s(dTr,"date_time");var fTr=/\/|:/;function pTr(t){return fTr.test(t)&&aTr.test(t)}s(pTr,"uri");var mTr=/[^\\]\\Z/;function CAt(t){if(mTr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}s(CAt,"regex")});var bAt=H((sbo,xAt)=>{"use strict";f();xAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d="data"+(a||""),p="valid"+o,m,h;if(c=="#"||c=="#/")e.isRoot?(m=e.async,h="validate"):(m=e.root.schema.$async===!0,h="root.refVal[0]");else{var g=e.resolveRef(e.baseId,c,e.isRoot);if(g===void 0){var A=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(A);var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var x=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(A),u&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,A)}else if(g.inline){var I=e.util.copy(e);I.level++;var S="valid"+I.level;I.schema=g.schema,I.schemaPath="",I.errSchemaPath=c;var R=e.validate(I).replace(/validate\.schema/g,g.code);i+=" "+R+" ",u&&(i+=" if ("+S+") { ")}else m=g.$async===!0||e.async&&g.$async!==!1,h=g.code}if(h){var y=y||[];y.push(i),i="",e.opts.passContext?i+=" "+h+".call(this, ":i+=" "+h+"( ",i+=" "+d+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var B=a?"data"+(a-1||""):"parentData",M=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+B+" , "+M+", rootData)  ";var O=i;if(i=y.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+O+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+O+") { if (vErrors === null) vErrors = "+h+".errors; else vErrors = vErrors.concat("+h+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},"generate_ref")});var TAt=H((lbo,IAt)=>{"use strict";f();IAt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),d="";u.level++;var p="valid"+u.level,m=u.baseId,h=!0,g=o;if(g)for(var A,y=-1,x=g.length-1;y<x;)A=g[y+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))&&(h=!1,u.schema=A,u.schemaPath=a+"["+y+"]",u.errSchemaPath=c+"/"+y,i+="  "+e.validate(u)+" ",u.baseId=m,l&&(i+=" if ("+p+") { ",d+="}"));return l&&(h?i+=" if (true) { ":i+=" "+d.slice(0,-1)+" "),i},"generate_allOf")});var SAt=H((fbo,wAt)=>{"use strict";f();wAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,x=c.every(function(K){return e.opts.strictKeywords?typeof K=="object"&&Object.keys(K).length>0||K===!1:e.util.schemaHasRules(K,e.RULES.all)});if(x){var I=g.baseId;i+=" var "+h+" = errors; var "+m+" = false;  ";var S=e.compositeRule;e.compositeRule=g.compositeRule=!0;var R=c;if(R)for(var B,M=-1,O=R.length-1;M<O;)B=R[M+=1],g.schema=B,g.schemaPath=l+"["+M+"]",g.errSchemaPath=u+"/"+M,i+="  "+e.validate(g)+" ",g.baseId=I,i+=" "+m+" = "+m+" || "+y+"; if (!"+m+") { ",A+="}";e.compositeRule=g.compositeRule=S,i+=" "+A+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else d&&(i+=" if (true) { ");return i},"generate_anyOf")});var RAt=H((hbo,_At)=>{"use strict";f();_At.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},"generate_comment")});var PAt=H((ybo,kAt)=>{"use strict";f();kAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,h||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+m+" = equal("+p+", schema"+o+"); if (!"+m+") {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",d&&(i+=" else { "),i},"generate_const")});var BAt=H((Ebo,DAt)=>{"use strict";f();DAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,x="i"+o,I=g.dataLevel=e.dataLevel+1,S="data"+I,R=e.baseId,B=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(i+="var "+h+" = errors;var "+m+";",B){var M=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+y+" = false; for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0);var O=p+"["+x+"]";g.dataPathArr[I]=x;var K=e.validate(g);g.baseId=R,e.util.varOccurences(K,S)<2?i+=" "+e.util.varReplace(K,S,O)+" ":i+=" var "+S+" = "+O+"; "+K+" ",i+=" if ("+y+") break; }  ",e.compositeRule=g.compositeRule=M,i+=" "+A+" if (!"+y+") {"}else i+=" if ("+p+".length == 0) {";var V=V||[];V.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var z=i;return i=V.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+z+"]); ":i+=" validate.errors = ["+z+"]; return false; ":i+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",B&&(i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},"generate_contains")});var LAt=H((Ibo,NAt)=>{"use strict";f();NAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y={},x={},I=e.opts.ownProperties;for(M in c)if(M!="__proto__"){var S=c[M],R=Array.isArray(S)?x:y;R[M]=S}i+="var "+m+" = errors;";var B=e.errorPath;i+="var missing"+o+";";for(var M in x)if(R=x[M],R.length){if(i+=" if ( "+p+e.util.getProperty(M)+" !== undefined ",I&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(M)+"') "),d){i+=" && ( ";var O=R;if(O)for(var K,V=-1,z=O.length-1;V<z;){K=O[V+=1],V&&(i+=" || ");var Q=e.util.getProperty(K),U=p+Q;i+=" ( ( "+U+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(K)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?K:Q)+") ) "}i+=")) {  ";var Z="missing"+o,J="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(B,Z,!0):B+" + "+Z);var j=j||[];j.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(M)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(M)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var $=i;i=j.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+$+"]); ":i+=" validate.errors = ["+$+"]; return false; ":i+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var X=R;if(X)for(var K,ie=-1,ae=X.length-1;ie<ae;){K=X[ie+=1];var Q=e.util.getProperty(K),J=e.util.escapeQuotes(K),U=p+Q;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,K,e.opts.jsonPointers)),i+=" if ( "+U+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(K)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(M)+"', missingProperty: '"+J+"', depsCount: "+R.length+", deps: '"+e.util.escapeQuotes(R.length==1?R[0]:R.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",R.length==1?i+="property "+e.util.escapeQuotes(R[0]):i+="properties "+e.util.escapeQuotes(R.join(", ")),i+=" when property "+e.util.escapeQuotes(M)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",d&&(g+="}",i+=" else { ")}e.errorPath=B;var te=h.baseId;for(var M in y){var S=y[M];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(i+=" "+A+" = true; if ( "+p+e.util.getProperty(M)+" !== undefined ",I&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(M)+"') "),i+=") { ",h.schema=S,h.schemaPath=l+e.util.getProperty(M),h.errSchemaPath=u+"/"+e.util.escapeFragment(M),i+="  "+e.validate(h)+" ",h.baseId=te,i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}"))}return d&&(i+="   "+g+" if ("+m+" == errors) {"),i},"generate_dependencies")});var FAt=H((Sbo,MAt)=>{"use strict";f();MAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="i"+o,y="schema"+o;h||(i+=" var "+y+" = validate.schema"+l+";"),i+="var "+m+";",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=""+m+" = false;for (var "+A+"=0; "+A+"<"+y+".length; "+A+"++) if (equal("+p+", "+y+"["+A+"])) { "+m+" = true; break; }",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var x=x||[];x.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var I=i;return i=x.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",d&&(i+=" else { "),i},"generate_enum")});var QAt=H((kbo,OAt)=>{"use strict";f();OAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return d&&(i+=" if (true) { "),i;var m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=e.opts.unknownFormats,A=Array.isArray(g);if(m){var y="format"+o,x="isObject"+o,I="formatType"+o;i+=" var "+y+" = formats["+h+"]; var "+x+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+I+" = "+x+" && "+y+".type || 'string'; if ("+x+") { ",e.async&&(i+=" var async"+o+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (",g!="ignore"&&(i+=" ("+h+" && !"+y+" ",A&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+y+" && "+I+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+y+"("+p+") : "+y+"("+p+")) ":i+=" "+y+"("+p+") ",i+=" : "+y+".test("+p+"))))) {"}else{var y=e.formats[c];if(!y){if(g=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),d&&(i+=" if (true) { "),i;if(A&&g.indexOf(c)>=0)return d&&(i+=" if (true) { "),i;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var x=typeof y=="object"&&!(y instanceof RegExp)&&y.validate,I=x&&y.type||"string";if(x){var S=y.async===!0;y=y.validate}if(I!=n)return d&&(i+=" if (true) { "),i;if(S){if(!e.async)throw new Error("async format in sync schema");var R="formats"+e.util.getProperty(c)+".validate";i+=" if (!(await "+R+"("+p+"))) { "}else{i+=" if (! ";var R="formats"+e.util.getProperty(c);x&&(R+=".validate"),typeof y=="function"?i+=" "+R+"("+p+") ":i+=" "+R+".test("+p+") ",i+=") { "}}var B=B||[];B.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var M=i;return i=B.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { "),i},"generate_format")});var qAt=H((Bbo,UAt)=>{"use strict";f();UAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e);g.level++;var A="valid"+g.level,y=e.schema.then,x=e.schema.else,I=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),S=x!==void 0&&(e.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:e.util.schemaHasRules(x,e.RULES.all)),R=g.baseId;if(I||S){var B;g.createErrors=!1,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+h+" = errors; var "+m+" = true;  ";var M=e.compositeRule;e.compositeRule=g.compositeRule=!0,i+="  "+e.validate(g)+" ",g.baseId=R,g.createErrors=!0,i+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=g.compositeRule=M,I?(i+=" if ("+A+") {  ",g.schema=e.schema.then,g.schemaPath=e.schemaPath+".then",g.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",I&&S?(B="ifClause"+o,i+=" var "+B+" = 'then'; "):B="'then'",i+=" } ",S&&(i+=" else { ")):i+=" if (!"+A+") { ",S&&(g.schema=e.schema.else,g.schemaPath=e.schemaPath+".else",g.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(g)+" ",g.baseId=R,i+=" "+m+" = "+A+"; ",I&&S?(B="ifClause"+o,i+=" var "+B+" = 'else'; "):B="'else'",i+=" } "),i+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+B+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+B+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i},"generate_if")});var $At=H((Mbo,HAt)=>{"use strict";f();HAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,x="i"+o,I=g.dataLevel=e.dataLevel+1,S="data"+I,R=e.baseId;if(i+="var "+h+" = errors;var "+m+";",Array.isArray(c)){var B=e.schema.additionalItems;if(B===!1){i+=" "+m+" = "+p+".length <= "+c.length+"; ";var M=u;u=e.errSchemaPath+"/additionalItems",i+="  if (!"+m+") {   ";var O=O||[];O.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var K=i;i=O.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+K+"]); ":i+=" validate.errors = ["+K+"]; return false; ":i+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u=M,d&&(A+="}",i+=" else { ")}var V=c;if(V){for(var z,Q=-1,U=V.length-1;Q<U;)if(z=V[Q+=1],e.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:e.util.schemaHasRules(z,e.RULES.all)){i+=" "+y+" = true; if ("+p+".length > "+Q+") { ";var Z=p+"["+Q+"]";g.schema=z,g.schemaPath=l+"["+Q+"]",g.errSchemaPath=u+"/"+Q,g.errorPath=e.util.getPathExpr(e.errorPath,Q,e.opts.jsonPointers,!0),g.dataPathArr[I]=Q;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",i+=" }  ",d&&(i+=" if ("+y+") { ",A+="}")}}if(typeof B=="object"&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))){g.schema=B,g.schemaPath=e.schemaPath+".additionalItems",g.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+p+".length > "+c.length+") {  for (var "+x+" = "+c.length+"; "+x+" < "+p+".length; "+x+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0);var Z=p+"["+x+"]";g.dataPathArr[I]=x;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",d&&(i+=" if (!"+y+") break; "),i+=" } }  ",d&&(i+=" if ("+y+") { ",A+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+="  for (var "+x+" = 0; "+x+" < "+p+".length; "+x+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,x,e.opts.jsonPointers,!0);var Z=p+"["+x+"]";g.dataPathArr[I]=x;var J=e.validate(g);g.baseId=R,e.util.varOccurences(J,S)<2?i+=" "+e.util.varReplace(J,S,Z)+" ":i+=" var "+S+" = "+Z+"; "+J+" ",d&&(i+=" if (!"+y+") break; "),i+=" }"}return d&&(i+=" "+A+" if ("+h+" == errors) {"),i},"generate_items")});var iRe=H((Qbo,WAt)=>{"use strict";f();WAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,R,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=r=="maximum",A=g?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[A],x=e.opts.$data&&y&&y.$data,I=g?"<":">",S=g?">":"<",R=void 0;if(!(m||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(x||y===void 0||typeof y=="number"||typeof y=="boolean"))throw new Error(A+" must be number or boolean");if(x){var B=e.util.getData(y.$data,a,e.dataPathArr),M="exclusive"+o,O="exclType"+o,K="exclIsNumber"+o,V="op"+o,z="' + "+V+" + '";i+=" var schemaExcl"+o+" = "+B+"; ",B="schemaExcl"+o,i+=" var "+M+"; var "+O+" = typeof "+B+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var R=A,Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;i=Q.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+O+" == 'number' ? ( ("+M+" = "+h+" === undefined || "+B+" "+I+"= "+h+") ? "+p+" "+S+"= "+B+" : "+p+" "+S+" "+h+" ) : ( ("+M+" = "+B+" === true) ? "+p+" "+S+"= "+h+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { var op"+o+" = "+M+" ? '"+I+"' : '"+I+"='; ",c===void 0&&(R=A,u=e.errSchemaPath+"/"+A,h=B,m=x)}else{var K=typeof y=="number",z=I;if(K&&m){var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" ( "+h+" === undefined || "+y+" "+I+"= "+h+" ? "+p+" "+S+"= "+y+" : "+p+" "+S+" "+h+" ) || "+p+" !== "+p+") { "}else{K&&c===void 0?(M=!0,R=A,u=e.errSchemaPath+"/"+A,h=y,S+="="):(K&&(h=Math[g?"min":"max"](y,c)),y===(K?h:!0)?(M=!0,R=A,u=e.errSchemaPath+"/"+A,S+="="):(M=!1,z+="="));var V="'"+z+"'";i+=" if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+" "+S+" "+h+" || "+p+" !== "+p+") { "}}R=R||r;var Q=Q||[];Q.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(R||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+V+", limit: "+h+", exclusive: "+M+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+z+" ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;return i=Q.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { "),i},"generate__limit")});var oRe=H((Hbo,jAt)=>{"use strict";f();jAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxItems"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" "+p+".length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxItems"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var x=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitItems")});var sRe=H((jbo,GAt)=>{"use strict";f();GAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxLength"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),e.opts.unicode===!1?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",r=="maxLength"?i+="longer":i+="shorter",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var x=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitLength")});var aRe=H((zbo,VAt)=>{"use strict";f();VAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,A,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxProperties"?">":"<";i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),i+=" Object.keys("+p+").length "+g+" "+h+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxProperties"?i+="more":i+="fewer",i+=" than ",m?i+="' + "+h+" + '":i+=""+c,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var x=i;return i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate__limitProperties")});var YAt=H((Jbo,zAt)=>{"use strict";f();zAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c,!(m||typeof c=="number"))throw new Error(r+" must be number");i+="var division"+o+";if (",m&&(i+=" "+h+" !== undefined && ( typeof "+h+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+h+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",m&&(i+="  )  "),i+=" ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+h+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",m?i+="' + "+h:i+=""+h+"'"),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var A=i;return i=g.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate_multipleOf")});var JAt=H((eIo,KAt)=>{"use strict";f();KAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e);h.level++;var g="valid"+h.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u,i+=" var "+m+" = errors;  ";var A=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var y;h.opts.allErrors&&(y=h.opts.allErrors,h.opts.allErrors=!1),i+=" "+e.validate(h)+" ",h.createErrors=!0,y&&(h.opts.allErrors=y),e.compositeRule=h.compositeRule=A,i+=" if ("+g+") {   ";var x=x||[];x.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var I=i;i=x.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(i+=" if (false) { ");return i},"generate_not")});var ZAt=H((nIo,XAt)=>{"use strict";f();XAt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,x=g.baseId,I="prevValid"+o,S="passingSchemas"+o;i+="var "+h+" = errors , "+I+" = false , "+m+" = false , "+S+" = null; ";var R=e.compositeRule;e.compositeRule=g.compositeRule=!0;var B=c;if(B)for(var M,O=-1,K=B.length-1;O<K;)M=B[O+=1],(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))?(g.schema=M,g.schemaPath=l+"["+O+"]",g.errSchemaPath=u+"/"+O,i+="  "+e.validate(g)+" ",g.baseId=x):i+=" var "+y+" = true; ",O&&(i+=" if ("+y+" && "+I+") { "+m+" = false; "+S+" = ["+S+", "+O+"]; } else { ",A+="}"),i+=" if ("+y+") { "+m+" = "+I+" = true; "+S+" = "+O+"; }";return e.compositeRule=g.compositeRule=R,i+=""+A+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},"generate_oneOf")});var tyt=H((sIo,eyt)=>{"use strict";f();eyt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m=e.opts.$data&&c&&c.$data,h;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",h="schema"+o):h=c;var g=m?"(new RegExp("+h+"))":e.usePattern(c);i+="if ( ",m&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" !"+g+".test("+p+") ) {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",m?i+=""+h:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,m?i+="' + "+h+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",d&&(i+=" else { "),i},"generate_pattern")});var nyt=H((lIo,ryt)=>{"use strict";f();ryt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level,y="key"+o,x="idx"+o,I=h.dataLevel=e.dataLevel+1,S="data"+I,R="dataProperties"+o,B=Object.keys(c||{}).filter(ie),M=e.schema.patternProperties||{},O=Object.keys(M).filter(ie),K=e.schema.additionalProperties,V=B.length||O.length,z=K===!1,Q=typeof K=="object"&&Object.keys(K).length,U=e.opts.removeAdditional,Z=z||Q||U,J=e.opts.ownProperties,j=e.baseId,$=e.schema.required;if($&&!(e.opts.$data&&$.$data)&&$.length<e.opts.loopRequired)var X=e.util.toHash($);function ie(Rr){return Rr!=="__proto__"}if(s(ie,"notProto"),i+="var "+m+" = errors;var "+A+" = true;",J&&(i+=" var "+R+" = undefined;"),Z){if(J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+x+"=0; "+x+"<"+R+".length; "+x+"++) { var "+y+" = "+R+"["+x+"]; ":i+=" for (var "+y+" in "+p+") { ",V){if(i+=" var isAdditional"+o+" = !(false ",B.length)if(B.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+y+") ";else{var ae=B;if(ae)for(var te,pe=-1,Ae=ae.length-1;pe<Ae;)te=ae[pe+=1],i+=" || "+y+" == "+e.util.toQuotedString(te)+" "}if(O.length){var Oe=O;if(Oe)for(var Te,Je=-1,Me=Oe.length-1;Je<Me;)Te=Oe[Je+=1],i+=" || "+e.usePattern(Te)+".test("+y+") "}i+=" ); if (isAdditional"+o+") { "}if(U=="all")i+=" delete "+p+"["+y+"]; ";else{var lt=e.errorPath,_t="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),z)if(U)i+=" delete "+p+"["+y+"]; ";else{i+=" "+A+" = false; ";var Et=u;u=e.errSchemaPath+"/additionalProperties";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+_t+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Et,d&&(i+=" break; ")}else if(Q)if(U=="failing"){i+=" var "+m+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=K,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[I]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",i+=" if (!"+A+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+y+"]; }  ",e.compositeRule=h.compositeRule=Ue}else{h.schema=K,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[I]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",d&&(i+=" if (!"+A+") break; ")}e.errorPath=lt}V&&(i+=" } "),i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(B.length){var le=B;if(le)for(var te,qe=-1,Be=le.length-1;qe<Be;){te=le[qe+=1];var xe=c[te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){var je=e.util.getProperty(te),ye=p+je,tt=se&&xe.default!==void 0;h.schema=xe,h.schemaPath=l+je,h.errSchemaPath=u+"/"+e.util.escapeFragment(te),h.errorPath=e.util.getPath(e.errorPath,te,e.opts.jsonPointers),h.dataPathArr[I]=e.util.toQuotedString(te);var $e=e.validate(h);if(h.baseId=j,e.util.varOccurences($e,S)<2){$e=e.util.varReplace($e,S,ye);var pt=ye}else{var pt=S;i+=" var "+S+" = "+ye+"; "}if(tt)i+=" "+$e+" ";else{if(X&&X[te]){i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = false; ";var lt=e.errorPath,Et=u,Mt=e.util.escapeQuotes(te);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(lt,te,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ht=ht||[];ht.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Mt+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Mt+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=ht.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Et,e.errorPath=lt,i+=" } else { "}else d?(i+=" if ( "+pt+" === undefined ",J&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = true; } else { "):(i+=" if ("+pt+" !== undefined ",J&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+$e+" } "}}d&&(i+=" if ("+A+") { ",g+="}")}}if(O.length){var Kt=O;if(Kt)for(var Te,Ot=-1,Wr=Kt.length-1;Ot<Wr;){Te=Kt[Ot+=1];var xe=M[Te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){h.schema=xe,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Te),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Te),J?i+=" "+R+" = "+R+" || Object.keys("+p+"); for (var "+x+"=0; "+x+"<"+R+".length; "+x+"++) { var "+y+" = "+R+"["+x+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" if ("+e.usePattern(Te)+".test("+y+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";h.dataPathArr[I]=y;var $e=e.validate(h);h.baseId=j,e.util.varOccurences($e,S)<2?i+=" "+e.util.varReplace($e,S,ye)+" ":i+=" var "+S+" = "+ye+"; "+$e+" ",d&&(i+=" if (!"+A+") break; "),i+=" } ",d&&(i+=" else "+A+" = true; "),i+=" }  ",d&&(i+=" if ("+A+") { ",g+="}")}}}return d&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_properties")});var oyt=H((fIo,iyt)=>{"use strict";f();iyt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="errs__"+o,h=e.util.copy(e),g="";h.level++;var A="valid"+h.level;if(i+="var "+m+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){h.schema=c,h.schemaPath=l,h.errSchemaPath=u;var y="key"+o,x="idx"+o,I="i"+o,S="' + "+y+" + '",R=h.dataLevel=e.dataLevel+1,B="data"+R,M="dataProperties"+o,O=e.opts.ownProperties,K=e.baseId;O&&(i+=" var "+M+" = undefined; "),O?i+=" "+M+" = "+M+" || Object.keys("+p+"); for (var "+x+"=0; "+x+"<"+M+".length; "+x+"++) { var "+y+" = "+M+"["+x+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" var startErrs"+o+" = errors; ";var V=y,z=e.compositeRule;e.compositeRule=h.compositeRule=!0;var Q=e.validate(h);h.baseId=K,e.util.varOccurences(Q,B)<2?i+=" "+e.util.varReplace(Q,B,V)+" ":i+=" var "+B+" = "+V+"; "+Q+" ",e.compositeRule=h.compositeRule=z,i+=" if (!"+A+") { for (var "+I+"=startErrs"+o+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+y+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),d&&(i+=" break; "),i+=" } }"}return d&&(i+=" "+g+" if ("+m+" == errors) {"),i},"generate_propertyNames")});var ayt=H((hIo,syt)=>{"use strict";f();syt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="schema"+o;if(!h)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],x=c;if(x)for(var I,S=-1,R=x.length-1;S<R;){I=x[S+=1];var B=e.schema.properties[I];B&&(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))||(y[y.length]=I)}}else var y=c;if(h||y.length){var M=e.errorPath,O=h||y.length>=e.opts.loopRequired,K=e.opts.ownProperties;if(d)if(i+=" var missing"+o+"; ",O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(M,z,e.opts.jsonPointers)),i+=" var "+m+" = true; ",h&&(i+=" if (schema"+o+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+o+")) "+m+" = false; else {"),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { "+m+" = "+p+"["+A+"["+V+"]] !== undefined ",K&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+="; if (!"+m+") break; } ",h&&(i+="  }  "),i+="  if (!"+m+") {   ";var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var J=y;if(J)for(var j,V=-1,$=J.length-1;V<$;){j=J[V+=1],V&&(i+=" || ");var X=e.util.getProperty(j),ie=p+X;i+=" ( ( "+ie+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:X)+") ) "}i+=") {  ";var z="missing"+o,Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(M,z,!0):M+" + "+z);var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Z=i;i=U.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(O){h||(i+=" var "+A+" = validate.schema"+l+"; ");var V="i"+o,z="schema"+o+"["+V+"]",Q="' + "+z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(M,z,e.opts.jsonPointers)),h&&(i+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),i+=" for (var "+V+" = 0; "+V+" < "+A+".length; "+V+"++) { if ("+p+"["+A+"["+V+"]] === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+A+"["+V+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(i+="  }  ")}else{var ae=y;if(ae)for(var j,te=-1,pe=ae.length-1;te<pe;){j=ae[te+=1];var X=e.util.getProperty(j),Q=e.util.escapeQuotes(j),ie=p+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,j,e.opts.jsonPointers)),i+=" if ( "+ie+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Q+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=M}else d&&(i+=" if (true) {");return i},"generate_required")});var lyt=H((yIo,cyt)=>{"use strict";f();cyt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(a||""),m="valid"+o,h=e.opts.$data&&c&&c.$data,g;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,(c||h)&&e.opts.uniqueItems!==!1){h&&(i+=" var "+m+"; if ("+g+" === false || "+g+" === undefined) "+m+" = true; else if (typeof "+g+" != 'boolean') "+m+" = false; else { "),i+=" var i = "+p+".length , "+m+" = true , j; if (i > 1) { ";var A=e.schema.items&&e.schema.items.type,y=Array.isArray(A);if(!A||A=="object"||A=="array"||y&&(A.indexOf("object")>=0||A.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+m+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var x="checkDataType"+(y?"s":"");i+=" if ("+e.util[x](A,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+m+") {   ";var I=I||[];I.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var S=i;i=I.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i},"generate_uniqueItems")});var dyt=H((EIo,uyt)=>{"use strict";f();uyt.exports={$ref:bAt(),allOf:TAt(),anyOf:SAt(),$comment:RAt(),const:PAt(),contains:BAt(),dependencies:LAt(),enum:FAt(),format:QAt(),if:qAt(),items:$At(),maximum:iRe(),minimum:iRe(),maxItems:oRe(),minItems:oRe(),maxLength:sRe(),minLength:sRe(),maxProperties:aRe(),minProperties:aRe(),multipleOf:YAt(),not:JAt(),oneOf:ZAt(),pattern:tyt(),properties:nyt(),propertyNames:oyt(),required:ayt(),uniqueItems:lyt(),validate:rRe()}});var myt=H((bIo,pyt)=>{"use strict";f();var fyt=dyt(),cRe=a5().toHash;pyt.exports=s(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=cRe(r),e.types=cRe(i),e.forEach(function(o){o.rules=o.rules.map(function(a){var c;if(typeof a=="object"){var l=Object.keys(a)[0];c=a[l],a=l,c.forEach(function(d){r.push(d),e.all[d]=!0})}r.push(a);var u=e.all[a]={keyword:a,code:fyt[a],implements:c};return u}),e.all.$comment={keyword:"$comment",code:fyt.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=cRe(r.concat(n)),e.custom={},e},"rules")});var Ayt=H((wIo,gyt)=>{"use strict";f();var hyt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];gyt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),i=t,o;for(o=1;o<n.length;o++)i=i[n[o]];for(o=0;o<hyt.length;o++){var a=hyt[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var vyt=H((_Io,Cyt)=>{"use strict";f();var hTr=uae().MissingRef;Cyt.exports=yyt;function yyt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var i=o(t).then(function(){var c=n._addSchema(t,void 0,e);return c.validate||a(c)});return r&&i.then(function(c){r(null,c)},r),i;function o(c){var l=c.$schema;return l&&!n.getSchema(l)?yyt.call(n,{$ref:l},!0):Promise.resolve()}s(o,"loadMetaSchemaOf");function a(c){try{return n._compile(c)}catch(u){if(u instanceof hTr)return l(u);throw u}function l(u){var d=u.missingSchema;if(h(d))throw new Error("Schema "+d+" is loaded but "+u.missingRef+" cannot be resolved");var p=n._loadingSchemas[d];return p||(p=n._loadingSchemas[d]=n._opts.loadSchema(d),p.then(m,m)),p.then(function(g){if(!h(d))return o(g).then(function(){h(d)||n.addSchema(g,d,void 0,e)})}).then(function(){return a(c)});function m(){delete n._loadingSchemas[d]}s(m,"removePromise");function h(g){return n._refs[g]||n._schemas[g]}s(h,"added")}s(l,"loadMissingSchema")}s(a,"_compileAsync")}s(yyt,"compileAsync")});var xyt=H((PIo,Eyt)=>{"use strict";f();Eyt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p,m="data"+(a||""),h="valid"+o,g="errs__"+o,A=e.opts.$data&&c&&c.$data,y;A?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",y="schema"+o):y=c;var x=this,I="definition"+o,S=x.definition,R="",B,M,O,K,V;if(A&&S.$data){V="keywordValidate"+o;var z=S.validateSchema;i+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+V+" = "+I+".validate;"}else{if(K=e.useCustomRule(x,c,e.schema,e),!K)return;y="validate.schema"+l,V=K.code,B=S.compile,M=S.inline,O=S.macro}var Q=V+".errors",U="i"+o,Z="ruleErr"+o,J=S.async;if(J&&!e.async)throw new Error("async keyword in sync schema");if(M||O||(i+=""+Q+" = null;"),i+="var "+g+" = errors;var "+h+";",A&&S.$data&&(R+="}",i+=" if ("+y+" === undefined) { "+h+" = true; } else { ",z&&(R+="}",i+=" "+h+" = "+I+".validateSchema("+y+"); if ("+h+") { ")),M)S.statements?i+=" "+K.validate+" ":i+=" "+h+" = "+K.validate+"; ";else if(O){var j=e.util.copy(e),R="";j.level++;var $="valid"+j.level;j.schema=K.validate,j.schemaPath="";var X=e.compositeRule;e.compositeRule=j.compositeRule=!0;var ie=e.validate(j).replace(/validate\.schema/g,V);e.compositeRule=j.compositeRule=X,i+=" "+ie}else{var ae=ae||[];ae.push(i),i="",i+="  "+V+".call( ",e.opts.passContext?i+="this":i+="self",B||S.schema===!1?i+=" , "+m+" ":i+=" , "+y+" , "+m+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var te=a?"data"+(a-1||""):"parentData",pe=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+te+" , "+pe+" , rootData )  ";var Ae=i;i=ae.pop(),S.errors===!1?(i+=" "+h+" = ",J&&(i+="await "),i+=""+Ae+"; "):J?(Q="customErrors"+o,i+=" var "+Q+" = null; try { "+h+" = await "+Ae+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+Q+" = e.errors; else throw e; } "):i+=" "+Q+" = null; "+h+" = "+Ae+"; "}if(S.modifying&&(i+=" if ("+te+") "+m+" = "+te+"["+pe+"];"),i+=""+R,S.valid)d&&(i+=" if (true) { ");else{i+=" if ( ",S.valid===void 0?(i+=" !",O?i+=""+$:i+=""+h):i+=" "+!S.valid+" ",i+=") { ",p=x.keyword;var ae=ae||[];ae.push(i),i="";var ae=ae||[];ae.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+x.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+x.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";var Oe=i;i=ae.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+Oe+"]); ":i+=" validate.errors = ["+Oe+"]; return false; ":i+=" var err = "+Oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Te=i;i=ae.pop(),M?S.errors?S.errors!="full"&&(i+="  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } "):S.errors===!1?i+=" "+Te+" ":(i+=" if ("+g+" == errors) { "+Te+" } else {  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+Z+".schemaPath === undefined) { "+Z+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } "):O?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+x.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+x.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):S.errors===!1?i+=" "+Te+" ":(i+=" if (Array.isArray("+Q+")) { if (vErrors === null) vErrors = "+Q+"; else vErrors = vErrors.concat("+Q+"); errors = vErrors.length;  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+Z+" = vErrors["+U+"]; if ("+Z+".dataPath === undefined) "+Z+".dataPath = (dataPath || '') + "+e.errorPath+";  "+Z+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+Z+".schema = "+y+"; "+Z+".data = "+m+"; "),i+=" } } else { "+Te+" } "),i+=" } ",d&&(i+=" else { ")}return i},"generate_custom")});var lRe=H((NIo,gTr)=>{gTr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Tyt=H((LIo,Iyt)=>{"use strict";f();var byt=lRe();Iyt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:byt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:byt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Syt=H((FIo,wyt)=>{"use strict";f();var ATr=/^[a-z_$][a-z0-9_$-]*$/i,yTr=xyt(),CTr=Tyt();wyt.exports={add:vTr,get:ETr,remove:xTr,validate:uRe};function vTr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!ATr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)a(t,n[i],e);else a(t,n,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}r.keywords[t]=r.all[t]=!0;function a(c,l,u){for(var d,p=0;p<r.length;p++){var m=r[p];if(m.type==l){d=m;break}}d||(d={type:l,rules:[]},r.push(d));var h={keyword:c,definition:u,custom:!0,code:yTr,implements:u.implements};d.rules.push(h),r.custom[c]=h}return s(a,"_addRule"),this}s(vTr,"addKeyword");function ETr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}s(ETr,"getKeyword");function xTr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,i=0;i<n.length;i++)if(n[i].keyword==t){n.splice(i,1);break}return this}s(xTr,"removeKeyword");function uRe(t,e){uRe.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(CTr,!0);if(r(t))return!0;if(uRe.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}s(uRe,"validateKeyword")});var _yt=H((UIo,bTr)=>{bTr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Oyt=H((qIo,Fyt)=>{"use strict";f();var kyt=aAt(),c5=lae(),ITr=lAt(),Pyt=Y2e(),TTr=tRe(),wTr=EAt(),STr=myt(),Dyt=Ayt(),Byt=a5();Fyt.exports=uc;uc.prototype.validate=RTr;uc.prototype.compile=kTr;uc.prototype.addSchema=PTr;uc.prototype.addMetaSchema=DTr;uc.prototype.validateSchema=BTr;uc.prototype.getSchema=LTr;uc.prototype.removeSchema=FTr;uc.prototype.addFormat=jTr;uc.prototype.errorsText=WTr;uc.prototype._addSchema=OTr;uc.prototype._compile=QTr;uc.prototype.compileAsync=vyt();var yae=Syt();uc.prototype.addKeyword=yae.add;uc.prototype.getKeyword=yae.get;uc.prototype.removeKeyword=yae.remove;uc.prototype.validateKeyword=yae.validate;var Nyt=uae();uc.ValidationError=Nyt.Validation;uc.MissingRefError=Nyt.MissingRef;uc.$dataMetaSchema=Dyt;var Aae="http://json-schema.org/draft-07/schema",Ryt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],_Tr=["/properties"];function uc(t){if(!(this instanceof uc))return new uc(t);t=this._opts=Byt.copy(t)||{},JTr(this),this._schemas={},this._refs={},this._fragments={},this._formats=wTr(t.format),this._cache=t.cache||new ITr,this._loadingSchemas={},this._compilations=[],this.RULES=STr(),this._getId=UTr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=TTr),this._metaOpts=KTr(this),t.formats&&zTr(this),t.keywords&&YTr(this),GTr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),VTr(this)}s(uc,"Ajv");function RTr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var i=r(e);return r.$async!==!0&&(this.errors=r.errors),i}s(RTr,"validate");function kTr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}s(kTr,"compile");function PTr(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.addSchema(t[i],void 0,r,n);return this}var o=this._getId(t);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=c5.normalizeId(e||o),Myt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}s(PTr,"addSchema");function DTr(t,e,r){return this.addSchema(t,e,r,!0),this}s(DTr,"addMetaSchema");function BTr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||NTr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return n}s(BTr,"validateSchema");function NTr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(Aae)?Aae:void 0,t._opts.defaultMeta}s(NTr,"defaultMeta");function LTr(t){var e=Lyt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return MTr(this,t)}}s(LTr,"getSchema");function MTr(t,e){var r=c5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,i=r.root,o=r.baseId,a=kyt.call(t,n,i,void 0,o);return t._fragments[e]=new Pyt({ref:e,fragment:!0,schema:n,root:i,baseId:o,validate:a}),a}}s(MTr,"_getSchemaFragment");function Lyt(t,e){return e=c5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}s(Lyt,"_getSchemaObj");function FTr(t){if(t instanceof RegExp)return gae(this,this._schemas,t),gae(this,this._refs,t),this;switch(typeof t){case"undefined":return gae(this,this._schemas),gae(this,this._refs),this._cache.clear(),this;case"string":var e=Lyt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var i=this._getId(t);i&&(i=c5.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}s(FTr,"removeSchema");function gae(t,e,r){for(var n in e){var i=e[n];!i.meta&&(!r||r.test(n))&&(t._cache.del(i.cacheKey),delete e[n])}}s(gae,"_removeAllSchemas");function OTr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(t):t,a=this._cache.get(o);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var c=c5.normalizeId(this._getId(t));c&&n&&Myt(this,c);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=c&&c==c5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var d=c5.ids.call(this,t),p=new Pyt({id:c,schema:t,localRefs:d,cacheKey:o,meta:r});return c[0]!="#"&&n&&(this._refs[c]=p),this._cache.put(o,p),l&&u&&this.validateSchema(t,!0),p}s(OTr,"_addSchema");function QTr(t,e){if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e||i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=kyt.call(this,t.schema,e,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function i(){var o=t.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}s(i,"callValidate")}s(QTr,"_compile");function UTr(t){switch(t.schemaId){case"auto":return $Tr;case"id":return qTr;default:return HTr}}s(UTr,"chooseGetId");function qTr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}s(qTr,"_getId");function HTr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}s(HTr,"_get$Id");function $Tr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}s($Tr,"_get$IdOrId");function WTr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<t.length;o++){var a=t[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)}s(WTr,"errorsText");function jTr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}s(jTr,"addFormat");function GTr(t){var e;if(t._opts.$data&&(e=_yt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=lRe();t._opts.$data&&(r=Dyt(r,_Tr)),t.addMetaSchema(r,Aae,!0),t._refs["http://json-schema.org/schema"]=Aae}}s(GTr,"addDefaultMetaSchema");function VTr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}s(VTr,"addInitialSchemas");function zTr(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}s(zTr,"addInitialFormats");function YTr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}s(YTr,"addInitialKeywords");function Myt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}s(Myt,"checkUnique");function KTr(t){for(var e=Byt.copy(t._opts),r=0;r<Ryt.length;r++)delete e[Ryt[r]];return e}s(KTr,"getMetaSchemaOptions");function JTr(t){var e=t._opts.logger;if(e===!1)t.logger={log:dRe,warn:dRe,error:dRe};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}s(JTr,"setLogger");function dRe(){}s(dRe,"noop")});var iCt=H((awo,nCt)=>{f();nCt.exports=rCt;rCt.sync=Iwr;var eCt=require("fs");function bwr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(bwr,"checkPathExt");function tCt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:bwr(e,r)}s(tCt,"checkStat");function rCt(t,e,r){eCt.stat(t,function(n,i){r(n,n?!1:tCt(i,t,e))})}s(rCt,"isexe");function Iwr(t,e){return tCt(eCt.statSync(t),t,e)}s(Iwr,"sync")});var lCt=H((uwo,cCt)=>{f();cCt.exports=sCt;sCt.sync=Twr;var oCt=require("fs");function sCt(t,e,r){oCt.stat(t,function(n,i){r(n,n?!1:aCt(i,e))})}s(sCt,"isexe");function Twr(t,e){return aCt(oCt.statSync(t),e)}s(Twr,"sync");function aCt(t,e){return t.isFile()&&wwr(t,e)}s(aCt,"checkStat");function wwr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),d=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&d&&o===0;return p}s(wwr,"checkMode")});var dCt=H((mwo,uCt)=>{f();var pwo=require("fs"),_ae;process.platform==="win32"||global.TESTING_WINDOWS?_ae=iCt():_ae=lCt();uCt.exports=kRe;kRe.sync=Swr;function kRe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){kRe(t,e||{},function(o,a){o?i(o):n(a)})})}_ae(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(kRe,"isexe");function Swr(t,e){try{return _ae.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(Swr,"sync")});var yCt=H((Awo,ACt)=>{f();var Q8=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",fCt=require("path"),_wr=Q8?";":":",pCt=dCt(),mCt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),hCt=s((t,e)=>{let r=e.colon||_wr,n=t.match(/\//)||Q8&&t.match(/\\/)?[""]:[...Q8?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Q8?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Q8?i.split(r):[""];return Q8&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),gCt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=hCt(t,e),a=[],c=s(u=>new Promise((d,p)=>{if(u===n.length)return e.all&&a.length?d(a):p(mCt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=fCt.join(h,t),A=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(l(A,u,0))}),"step"),l=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(d+1));let g=i[p];pCt(u+g,{pathExt:o},(A,y)=>{if(!A&&y)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,d,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),Rwr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=hCt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=fCt.join(l,t),d=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=d+n[p];try{if(pCt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw mCt(t)},"whichSync");ACt.exports=gCt;gCt.sync=Rwr});var vCt=H((vwo,PRe)=>{"use strict";f();var CCt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");PRe.exports=CCt;PRe.exports.default=CCt});var ICt=H((bwo,bCt)=>{"use strict";f();var ECt=require("path"),kwr=yCt(),Pwr=vCt();function xCt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=kwr.sync(t.command,{path:r[Pwr({env:r})],pathExt:e?ECt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=ECt.resolve(i?t.options.cwd:"",a)),a}s(xCt,"resolveCommandAttempt");function Dwr(t){return xCt(t)||xCt(t,!0)}s(Dwr,"resolveCommand");bCt.exports=Dwr});var TCt=H((wwo,BRe)=>{"use strict";f();var DRe=/([()\][%!^"`<>&|;, *?])/g;function Bwr(t){return t=t.replace(DRe,"^$1"),t}s(Bwr,"escapeCommand");function Nwr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(DRe,"^$1"),e&&(t=t.replace(DRe,"^$1")),t}s(Nwr,"escapeArgument");BRe.exports.command=Bwr;BRe.exports.argument=Nwr});var SCt=H((Rwo,wCt)=>{"use strict";f();wCt.exports=/^#!(.*)/});var RCt=H((Pwo,_Ct)=>{"use strict";f();var Lwr=SCt();_Ct.exports=(t="")=>{let e=t.match(Lwr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var PCt=H((Bwo,kCt)=>{"use strict";f();var NRe=require("fs"),Mwr=RCt();function Fwr(t){let r=Buffer.alloc(150),n;try{n=NRe.openSync(t,"r"),NRe.readSync(n,r,0,150,0),NRe.closeSync(n)}catch{}return Mwr(r.toString())}s(Fwr,"readShebang");kCt.exports=Fwr});var LCt=H((Mwo,NCt)=>{"use strict";f();var Owr=require("path"),DCt=ICt(),BCt=TCt(),Qwr=PCt(),Uwr=process.platform==="win32",qwr=/\.(?:com|exe)$/i,Hwr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function $wr(t){t.file=DCt(t);let e=t.file&&Qwr(t.file);return e?(t.args.unshift(t.file),t.command=e,DCt(t)):t.file}s($wr,"detectShebang");function Wwr(t){if(!Uwr)return t;let e=$wr(t),r=!qwr.test(e);if(t.options.forceShell||r){let n=Hwr.test(e);t.command=Owr.normalize(t.command),t.command=BCt.command(t.command),t.args=t.args.map(o=>BCt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(Wwr,"parseNonShell");function jwr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Wwr(n)}s(jwr,"parse");NCt.exports=jwr});var OCt=H((Qwo,FCt)=>{"use strict";f();var LRe=process.platform==="win32";function MRe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(MRe,"notFoundError");function Gwr(t,e){if(!LRe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=MCt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(Gwr,"hookChildProcess");function MCt(t,e){return LRe&&t===1&&!e.file?MRe(e.original,"spawn"):null}s(MCt,"verifyENOENT");function Vwr(t,e){return LRe&&t===1&&!e.file?MRe(e.original,"spawnSync"):null}s(Vwr,"verifyENOENTSync");FCt.exports={hookChildProcess:Gwr,verifyENOENT:MCt,verifyENOENTSync:Vwr,notFoundError:MRe}});var qCt=H((Hwo,U8)=>{"use strict";f();var QCt=require("child_process"),FRe=LCt(),ORe=OCt();function UCt(t,e,r){let n=FRe(t,e,r),i=QCt.spawn(n.command,n.args,n.options);return ORe.hookChildProcess(i,n),i}s(UCt,"spawn");function zwr(t,e,r){let n=FRe(t,e,r),i=QCt.spawnSync(n.command,n.args,n.options);return i.error=i.error||ORe.verifyENOENTSync(i.status,n),i}s(zwr,"spawnSync");U8.exports=UCt;U8.exports.spawn=UCt;U8.exports.sync=zwr;U8.exports._parse=FRe;U8.exports._enoent=ORe});var uSr={};ma(uSr,{getTokenizer:()=>Wi,getTokenizerAsync:()=>tqe,main:()=>s1t});module.exports=kvt(uSr);f();f();S5e().install();f();f();f();var JS=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(JS||{}),qc=class{static{s(this,"LogTarget")}},Py=class{static{s(this,"TelemetryLogSender")}},vt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(qc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(Py).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(Py).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},an=new vt("default");f();f();f();var gM="github.copilot",_5e="github-enterprise";f();f();f();f();f();f();var ga=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();var gm=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return JH(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var Am="X-Copilot-RelatedPluginVersion-",AM=($=>($.Market="X-MSEdge-Market",$.CorpNet="X-FD-Corpnet",$.Build="X-VSCode-Build",$.ApplicationVersion="X-VSCode-AppVersion",$.TargetPopulation="X-VSCode-TargetPopulation",$.ClientId="X-MSEdge-ClientId",$.ExtensionName="X-VSCode-ExtensionName",$.ExtensionVersion="X-VSCode-ExtensionVersion",$.ExtensionRelease="X-VSCode-ExtensionRelease",$.Language="X-VSCode-Language",$.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",$.CopilotEngine="X-Copilot-Engine",$.CopilotOverrideEngine="X-Copilot-OverrideEngine",$.CopilotRepository="X-Copilot-Repository",$.CopilotFileType="X-Copilot-FileType",$.CopilotUserKind="X-Copilot-UserKind",$.CopilotDogfood="X-Copilot-Dogfood",$.CopilotCustomModel="X-Copilot-CustomModel",$.CopilotOrgs="X-Copilot-Orgs",$.CopilotCustomModelNames="X-Copilot-CustomModelNames",$.CopilotTrackingId="X-Copilot-CopilotTrackingId",$.CopilotClientVersion="X-Copilot-ClientVersion",$.CopilotRelatedPluginVersionCppTools=Am+"msvscodecpptools",$.CopilotRelatedPluginVersionCMakeTools=Am+"msvscodecmaketools",$.CopilotRelatedPluginVersionMakefileTools=Am+"msvscodemakefiletools",$.CopilotRelatedPluginVersionCSharpDevKit=Am+"msdotnettoolscsdevkit",$.CopilotRelatedPluginVersionPython=Am+"mspythonpython",$.CopilotRelatedPluginVersionPylance=Am+"mspythonvscodepylance",$.CopilotRelatedPluginVersionJavaPack=Am+"vscjavavscodejavapack",$.CopilotRelatedPluginVersionTypescript=Am+"vscodetypescriptlanguagefeatures",$.CopilotRelatedPluginVersionTypescriptNext=Am+"msvscodevscodetypescriptnext",$.CopilotRelatedPluginVersionCSharp=Am+"msdotnettoolscsharp",$))(AM||{});var hEt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},XS=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=hEt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();f();var Eu=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ws(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var M$=Fe(Ub()),F$=Fe(require("os"));var gEt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function AEt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(gEt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(AEt,"buildExceptionDetail");function Kle(t,e){let r=t.get(pn),n=r.getEditorInfo(),i=t.get(Eu),o={"#editor":n.devName??n.name,"#editor_version":Dy({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":Dy(r.getEditorPluginInfo()),"#session_id":t.get(Ss).sessionId,"#machine_id":t.get(Ss).machineId,"#architecture":F$.arch(),"#os_platform":F$.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(Kle,"buildContext");function FPe(t,e){let r=t.get(Eo),n=t.get(pn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Kle(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let d=AEt(l);o.exception_detail.unshift(d),a.unshift([l,d]),c+=1,l=l.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,M$.SHA256)(M$.enc.Utf16.parse(u.join(`
`))).toString()),o}s(FPe,"buildPayload");f();var CM=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var QPe=Fe(Ub());var kr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},ZS=class extends kr{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},Q$=class extends kr{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var By=class{constructor(e=5){this.perTenMinutes=e;this.cache=new kr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var ym=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:qPe(r,n),verboseLogging:CEt(r,n),testMode:e,simulation:yEt(n)})}};function Tg(t){return t.get(ym).flags.testMode}s(Tg,"isRunningInTest");function MP(t){return Tg(t)}s(MP,"shouldFailForDebugPurposes");function vM(t){return t.get(ym).flags.debug}s(vM,"isDebugEnabled");function UPe(t){return t.get(ym).flags.verboseLogging}s(UPe,"isVerboseLoggingEnabled");function qPe(t,e){return t.includes("--debug")||Jle(e,"DEBUG")}s(qPe,"determineDebugFlag");function yEt(t){return Jle(t,"SIMULATION")}s(yEt,"determineSimulationFlag");function U$(t){return t.get(ym).flags.simulation}s(U$,"isRunningInSimulation");function CEt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||Jle(e,"VERBOSE")||qPe(t,e)}s(CEt,"determineVerboseLoggingEnabled");function Jle(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(Jle,"determineEnvFlagEnabled");f();var Hc=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var WPe=require("os"),jPe=Fe(require("path"));function EM(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(EM,"redactPaths");var vEt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),EEt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function Zle(t){if(vEt.has(t))return t;for(let e of EEt)if(e.test(t))return t;return EM(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(Zle,"redactMessage");function q$(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(q$,"escapeForRegExp");var xEt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+q$((0,WPe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function Xle(t){return t.replace(xEt,"~")}s(Xle,"redactHomeDir");var GPe="[\\\\/]?([^:)]*)(?=:\\d)",HPe=new RegExp(q$(jPe.sep),"g"),$Pe=new RegExp(q$(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+GPe,"gi");function eue(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if($Pe.test(c))i.stack+=`
${EM(c.replace($Pe,(l,u)=>"./"+u.replace(HPe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${EM(c)}`;else{let l=!1;for(let{prefix:u,path:d}of n){let p=new RegExp(q$(d.replace(/[\\/]$/,""))+GPe,"gi");if(p.test(c)){i.stack+=`
${EM(c.replace(p,(m,h)=>u+h.replace(HPe,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${Xle(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=Xle(o));return t.cause instanceof Error&&(i.cause=eue(t.cause,e,r,n)),i}s(eue,"cloneError");function VPe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(VPe,"errorMessageWithoutPath");function zPe(t,e){return eue(t,s(function(n){return Xle(VPe(n))},"prepareMessage"),!0,e)}s(zPe,"prepareErrorForRestrictedTelemetry");function YPe(t,e,r=!1){return eue(t,s(function(i){if(r)return Zle(VPe(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=EM(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(YPe,"redactError");f();f();var ad={};ma(ad,{HasPropertyKey:()=>H$,IsArray:()=>Cc,IsAsyncIterator:()=>tue,IsBigInt:()=>xM,IsBoolean:()=>sv,IsDate:()=>e_,IsFunction:()=>rue,IsIterator:()=>nue,IsNull:()=>iue,IsNumber:()=>z0,IsObject:()=>rs,IsRegExp:()=>bM,IsString:()=>Cs,IsSymbol:()=>oue,IsUint8Array:()=>av,IsUndefined:()=>vc});f();function H$(t,e){return e in t}s(H$,"HasPropertyKey");function tue(t){return rs(t)&&!Cc(t)&&!av(t)&&Symbol.asyncIterator in t}s(tue,"IsAsyncIterator");function Cc(t){return Array.isArray(t)}s(Cc,"IsArray");function xM(t){return typeof t=="bigint"}s(xM,"IsBigInt");function sv(t){return typeof t=="boolean"}s(sv,"IsBoolean");function e_(t){return t instanceof globalThis.Date}s(e_,"IsDate");function rue(t){return typeof t=="function"}s(rue,"IsFunction");function nue(t){return rs(t)&&!Cc(t)&&!av(t)&&Symbol.iterator in t}s(nue,"IsIterator");function iue(t){return t===null}s(iue,"IsNull");function z0(t){return typeof t=="number"}s(z0,"IsNumber");function rs(t){return typeof t=="object"&&t!==null}s(rs,"IsObject");function bM(t){return t instanceof globalThis.RegExp}s(bM,"IsRegExp");function Cs(t){return typeof t=="string"}s(Cs,"IsString");function oue(t){return typeof t=="symbol"}s(oue,"IsSymbol");function av(t){return t instanceof globalThis.Uint8Array}s(av,"IsUint8Array");function vc(t){return t===void 0}s(vc,"IsUndefined");function bEt(t){return t.map(e=>$$(e))}s(bEt,"ArrayType");function IEt(t){return new Date(t.getTime())}s(IEt,"DateType");function TEt(t){return new Uint8Array(t)}s(TEt,"Uint8ArrayType");function wEt(t){return new RegExp(t.source,t.flags)}s(wEt,"RegExpType");function SEt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=$$(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=$$(t[r]);return e}s(SEt,"ObjectType");function $$(t){return Cc(t)?bEt(t):e_(t)?IEt(t):av(t)?TEt(t):bM(t)?wEt(t):rs(t)?SEt(t):t}s($$,"Visit");function $s(t){return $$(t)}s($s,"Clone");function FP(t,e){return e===void 0?$s(t):$s({...e,...t})}s(FP,"CloneType");f();f();f();function W$(t){return xi(t)&&globalThis.Symbol.asyncIterator in t}s(W$,"IsAsyncIterator");function j$(t){return xi(t)&&globalThis.Symbol.iterator in t}s(j$,"IsIterator");function sue(t){return xi(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(sue,"IsStandardObject");function G$(t){return t instanceof globalThis.Promise}s(G$,"IsPromise");function Gd(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Gd,"IsDate");function KPe(t){return t instanceof globalThis.Map}s(KPe,"IsMap");function JPe(t){return t instanceof globalThis.Set}s(JPe,"IsSet");function Cm(t){return globalThis.ArrayBuffer.isView(t)}s(Cm,"IsTypedArray");function OP(t){return t instanceof globalThis.Uint8Array}s(OP,"IsUint8Array");function Sn(t,e){return e in t}s(Sn,"HasPropertyKey");function xi(t){return t!==null&&typeof t=="object"}s(xi,"IsObject");function _n(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(_n,"IsArray");function Ws(t){return t===void 0}s(Ws,"IsUndefined");function cv(t){return t===null}s(cv,"IsNull");function Ny(t){return typeof t=="boolean"}s(Ny,"IsBoolean");function on(t){return typeof t=="number"}s(on,"IsNumber");function V$(t){return globalThis.Number.isInteger(t)}s(V$,"IsInteger");function xu(t){return typeof t=="bigint"}s(xu,"IsBigInt");function ho(t){return typeof t=="string"}s(ho,"IsString");function qb(t){return typeof t=="function"}s(qb,"IsFunction");function lv(t){return typeof t=="symbol"}s(lv,"IsSymbol");function Y0(t){return xu(t)||Ny(t)||cv(t)||on(t)||ho(t)||lv(t)||Ws(t)}s(Y0,"IsValueType");var _s;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=xi(a);return t.AllowArrayObject?c:c&&!_n(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?on(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ws(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(_s||(_s={}));f();function _Et(t){return globalThis.Object.freeze(t).map(e=>IM(e))}s(_Et,"ImmutableArray");function REt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=IM(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=IM(t[r]);return globalThis.Object.freeze(e)}s(REt,"ImmutableObject");function IM(t){return Cc(t)?_Et(t):e_(t)?t:av(t)?t:bM(t)?t:rs(t)?REt(t):t}s(IM,"Immutable");function at(t,e){let r=e!==void 0?{...e,...t}:t;switch(_s.InstanceMode){case"freeze":return IM(r);case"clone":return $s(r);default:return r}}s(at,"CreateType");f();var Rn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Aa=Symbol.for("TypeBox.Transform"),wg=Symbol.for("TypeBox.Readonly"),bu=Symbol.for("TypeBox.Optional"),vm=Symbol.for("TypeBox.Hint"),ot=Symbol.for("TypeBox.Kind");function QP(t){return rs(t)&&t[wg]==="Readonly"}s(QP,"IsReadonly");function Qf(t){return rs(t)&&t[bu]==="Optional"}s(Qf,"IsOptional");function aue(t){return to(t,"Any")}s(aue,"IsAny");function cue(t){return to(t,"Argument")}s(cue,"IsArgument");function Sg(t){return to(t,"Array")}s(Sg,"IsArray");function t_(t){return to(t,"AsyncIterator")}s(t_,"IsAsyncIterator");function r_(t){return to(t,"BigInt")}s(r_,"IsBigInt");function uv(t){return to(t,"Boolean")}s(uv,"IsBoolean");function _g(t){return to(t,"Computed")}s(_g,"IsComputed");function Rg(t){return to(t,"Constructor")}s(Rg,"IsConstructor");function kEt(t){return to(t,"Date")}s(kEt,"IsDate");function kg(t){return to(t,"Function")}s(kg,"IsFunction");function Pg(t){return to(t,"Integer")}s(Pg,"IsInteger");function Ba(t){return to(t,"Intersect")}s(Ba,"IsIntersect");function n_(t){return to(t,"Iterator")}s(n_,"IsIterator");function to(t,e){return rs(t)&&ot in t&&t[ot]===e}s(to,"IsKindOf");function z$(t){return sv(t)||z0(t)||Cs(t)}s(z$,"IsLiteralValue");function K0(t){return to(t,"Literal")}s(K0,"IsLiteral");function J0(t){return to(t,"MappedKey")}s(J0,"IsMappedKey");function js(t){return to(t,"MappedResult")}s(js,"IsMappedResult");function Hb(t){return to(t,"Never")}s(Hb,"IsNever");function PEt(t){return to(t,"Not")}s(PEt,"IsNot");function TM(t){return to(t,"Null")}s(TM,"IsNull");function Dg(t){return to(t,"Number")}s(Dg,"IsNumber");function Ec(t){return to(t,"Object")}s(Ec,"IsObject");function i_(t){return to(t,"Promise")}s(i_,"IsPromise");function o_(t){return to(t,"Record")}s(o_,"IsRecord");function Ga(t){return to(t,"Ref")}s(Ga,"IsRef");function lue(t){return to(t,"RegExp")}s(lue,"IsRegExp");function dv(t){return to(t,"String")}s(dv,"IsString");function wM(t){return to(t,"Symbol")}s(wM,"IsSymbol");function X0(t){return to(t,"TemplateLiteral")}s(X0,"IsTemplateLiteral");function DEt(t){return to(t,"This")}s(DEt,"IsThis");function Lo(t){return rs(t)&&Aa in t}s(Lo,"IsTransform");function Z0(t){return to(t,"Tuple")}s(Z0,"IsTuple");function fv(t){return to(t,"Undefined")}s(fv,"IsUndefined");function go(t){return to(t,"Union")}s(go,"IsUnion");function BEt(t){return to(t,"Uint8Array")}s(BEt,"IsUint8Array");function NEt(t){return to(t,"Unknown")}s(NEt,"IsUnknown");function LEt(t){return to(t,"Unsafe")}s(LEt,"IsUnsafe");function MEt(t){return to(t,"Void")}s(MEt,"IsVoid");function $b(t){return rs(t)&&ot in t&&Cs(t[ot])}s($b,"IsKind");function ya(t){return aue(t)||cue(t)||Sg(t)||uv(t)||r_(t)||t_(t)||_g(t)||Rg(t)||kEt(t)||kg(t)||Pg(t)||Ba(t)||n_(t)||K0(t)||J0(t)||js(t)||Hb(t)||PEt(t)||TM(t)||Dg(t)||Ec(t)||i_(t)||o_(t)||Ga(t)||lue(t)||dv(t)||wM(t)||X0(t)||DEt(t)||Z0(t)||fv(t)||go(t)||BEt(t)||NEt(t)||LEt(t)||MEt(t)||$b(t)}s(ya,"IsSchema");var Le={};ma(Le,{IsAny:()=>t4e,IsArgument:()=>r4e,IsArray:()=>n4e,IsAsyncIterator:()=>i4e,IsBigInt:()=>o4e,IsBoolean:()=>s4e,IsComputed:()=>a4e,IsConstructor:()=>c4e,IsDate:()=>l4e,IsFunction:()=>u4e,IsImport:()=>HEt,IsInteger:()=>d4e,IsIntersect:()=>f4e,IsIterator:()=>p4e,IsKind:()=>Q4e,IsKindOf:()=>Bi,IsLiteral:()=>_M,IsLiteralBoolean:()=>$Et,IsLiteralNumber:()=>h4e,IsLiteralString:()=>m4e,IsLiteralValue:()=>g4e,IsMappedKey:()=>A4e,IsMappedResult:()=>y4e,IsNever:()=>C4e,IsNot:()=>v4e,IsNull:()=>E4e,IsNumber:()=>x4e,IsObject:()=>b4e,IsOptional:()=>qEt,IsPromise:()=>I4e,IsProperties:()=>Y$,IsReadonly:()=>UEt,IsRecord:()=>T4e,IsRecursive:()=>WEt,IsRef:()=>w4e,IsRegExp:()=>S4e,IsSchema:()=>Gs,IsString:()=>_4e,IsSymbol:()=>R4e,IsTemplateLiteral:()=>k4e,IsThis:()=>P4e,IsTransform:()=>D4e,IsTuple:()=>B4e,IsUint8Array:()=>L4e,IsUndefined:()=>N4e,IsUnion:()=>pue,IsUnionLiteral:()=>jEt,IsUnknown:()=>M4e,IsUnsafe:()=>F4e,IsVoid:()=>O4e,TypeGuardUnknownTypeError:()=>uue});f();var uue=class extends Rn{static{s(this,"TypeGuardUnknownTypeError")}},FEt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function XPe(t){try{return new RegExp(t),!0}catch{return!1}}s(XPe,"IsPattern");function due(t){if(!Cs(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(due,"IsControlCharacterFree");function ZPe(t){return fue(t)||Gs(t)}s(ZPe,"IsAdditionalProperties");function SM(t){return vc(t)||xM(t)}s(SM,"IsOptionalBigInt");function vs(t){return vc(t)||z0(t)}s(vs,"IsOptionalNumber");function fue(t){return vc(t)||sv(t)}s(fue,"IsOptionalBoolean");function ns(t){return vc(t)||Cs(t)}s(ns,"IsOptionalString");function OEt(t){return vc(t)||Cs(t)&&due(t)&&XPe(t)}s(OEt,"IsOptionalPattern");function QEt(t){return vc(t)||Cs(t)&&due(t)}s(QEt,"IsOptionalFormat");function e4e(t){return vc(t)||Gs(t)}s(e4e,"IsOptionalSchema");function UEt(t){return rs(t)&&t[wg]==="Readonly"}s(UEt,"IsReadonly");function qEt(t){return rs(t)&&t[bu]==="Optional"}s(qEt,"IsOptional");function t4e(t){return Bi(t,"Any")&&ns(t.$id)}s(t4e,"IsAny");function r4e(t){return Bi(t,"Argument")&&z0(t.index)}s(r4e,"IsArgument");function n4e(t){return Bi(t,"Array")&&t.type==="array"&&ns(t.$id)&&Gs(t.items)&&vs(t.minItems)&&vs(t.maxItems)&&fue(t.uniqueItems)&&e4e(t.contains)&&vs(t.minContains)&&vs(t.maxContains)}s(n4e,"IsArray");function i4e(t){return Bi(t,"AsyncIterator")&&t.type==="AsyncIterator"&&ns(t.$id)&&Gs(t.items)}s(i4e,"IsAsyncIterator");function o4e(t){return Bi(t,"BigInt")&&t.type==="bigint"&&ns(t.$id)&&SM(t.exclusiveMaximum)&&SM(t.exclusiveMinimum)&&SM(t.maximum)&&SM(t.minimum)&&SM(t.multipleOf)}s(o4e,"IsBigInt");function s4e(t){return Bi(t,"Boolean")&&t.type==="boolean"&&ns(t.$id)}s(s4e,"IsBoolean");function a4e(t){return Bi(t,"Computed")&&Cs(t.target)&&Cc(t.parameters)&&t.parameters.every(e=>Gs(e))}s(a4e,"IsComputed");function c4e(t){return Bi(t,"Constructor")&&t.type==="Constructor"&&ns(t.$id)&&Cc(t.parameters)&&t.parameters.every(e=>Gs(e))&&Gs(t.returns)}s(c4e,"IsConstructor");function l4e(t){return Bi(t,"Date")&&t.type==="Date"&&ns(t.$id)&&vs(t.exclusiveMaximumTimestamp)&&vs(t.exclusiveMinimumTimestamp)&&vs(t.maximumTimestamp)&&vs(t.minimumTimestamp)&&vs(t.multipleOfTimestamp)}s(l4e,"IsDate");function u4e(t){return Bi(t,"Function")&&t.type==="Function"&&ns(t.$id)&&Cc(t.parameters)&&t.parameters.every(e=>Gs(e))&&Gs(t.returns)}s(u4e,"IsFunction");function HEt(t){return Bi(t,"Import")&&H$(t,"$defs")&&rs(t.$defs)&&Y$(t.$defs)&&H$(t,"$ref")&&Cs(t.$ref)&&t.$ref in t.$defs}s(HEt,"IsImport");function d4e(t){return Bi(t,"Integer")&&t.type==="integer"&&ns(t.$id)&&vs(t.exclusiveMaximum)&&vs(t.exclusiveMinimum)&&vs(t.maximum)&&vs(t.minimum)&&vs(t.multipleOf)}s(d4e,"IsInteger");function Y$(t){return rs(t)&&Object.entries(t).every(([e,r])=>due(e)&&Gs(r))}s(Y$,"IsProperties");function f4e(t){return Bi(t,"Intersect")&&!(Cs(t.type)&&t.type!=="object")&&Cc(t.allOf)&&t.allOf.every(e=>Gs(e)&&!D4e(e))&&ns(t.type)&&(fue(t.unevaluatedProperties)||e4e(t.unevaluatedProperties))&&ns(t.$id)}s(f4e,"IsIntersect");function p4e(t){return Bi(t,"Iterator")&&t.type==="Iterator"&&ns(t.$id)&&Gs(t.items)}s(p4e,"IsIterator");function Bi(t,e){return rs(t)&&ot in t&&t[ot]===e}s(Bi,"IsKindOf");function m4e(t){return _M(t)&&Cs(t.const)}s(m4e,"IsLiteralString");function h4e(t){return _M(t)&&z0(t.const)}s(h4e,"IsLiteralNumber");function $Et(t){return _M(t)&&sv(t.const)}s($Et,"IsLiteralBoolean");function _M(t){return Bi(t,"Literal")&&ns(t.$id)&&g4e(t.const)}s(_M,"IsLiteral");function g4e(t){return sv(t)||z0(t)||Cs(t)}s(g4e,"IsLiteralValue");function A4e(t){return Bi(t,"MappedKey")&&Cc(t.keys)&&t.keys.every(e=>z0(e)||Cs(e))}s(A4e,"IsMappedKey");function y4e(t){return Bi(t,"MappedResult")&&Y$(t.properties)}s(y4e,"IsMappedResult");function C4e(t){return Bi(t,"Never")&&rs(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(C4e,"IsNever");function v4e(t){return Bi(t,"Not")&&Gs(t.not)}s(v4e,"IsNot");function E4e(t){return Bi(t,"Null")&&t.type==="null"&&ns(t.$id)}s(E4e,"IsNull");function x4e(t){return Bi(t,"Number")&&t.type==="number"&&ns(t.$id)&&vs(t.exclusiveMaximum)&&vs(t.exclusiveMinimum)&&vs(t.maximum)&&vs(t.minimum)&&vs(t.multipleOf)}s(x4e,"IsNumber");function b4e(t){return Bi(t,"Object")&&t.type==="object"&&ns(t.$id)&&Y$(t.properties)&&ZPe(t.additionalProperties)&&vs(t.minProperties)&&vs(t.maxProperties)}s(b4e,"IsObject");function I4e(t){return Bi(t,"Promise")&&t.type==="Promise"&&ns(t.$id)&&Gs(t.item)}s(I4e,"IsPromise");function T4e(t){return Bi(t,"Record")&&t.type==="object"&&ns(t.$id)&&ZPe(t.additionalProperties)&&rs(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&XPe(r[0])&&rs(e.patternProperties)&&Gs(e.patternProperties[r[0]])})(t)}s(T4e,"IsRecord");function WEt(t){return rs(t)&&vm in t&&t[vm]==="Recursive"}s(WEt,"IsRecursive");function w4e(t){return Bi(t,"Ref")&&ns(t.$id)&&Cs(t.$ref)}s(w4e,"IsRef");function S4e(t){return Bi(t,"RegExp")&&ns(t.$id)&&Cs(t.source)&&Cs(t.flags)&&vs(t.maxLength)&&vs(t.minLength)}s(S4e,"IsRegExp");function _4e(t){return Bi(t,"String")&&t.type==="string"&&ns(t.$id)&&vs(t.minLength)&&vs(t.maxLength)&&OEt(t.pattern)&&QEt(t.format)}s(_4e,"IsString");function R4e(t){return Bi(t,"Symbol")&&t.type==="symbol"&&ns(t.$id)}s(R4e,"IsSymbol");function k4e(t){return Bi(t,"TemplateLiteral")&&t.type==="string"&&Cs(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(k4e,"IsTemplateLiteral");function P4e(t){return Bi(t,"This")&&ns(t.$id)&&Cs(t.$ref)}s(P4e,"IsThis");function D4e(t){return rs(t)&&Aa in t}s(D4e,"IsTransform");function B4e(t){return Bi(t,"Tuple")&&t.type==="array"&&ns(t.$id)&&z0(t.minItems)&&z0(t.maxItems)&&t.minItems===t.maxItems&&(vc(t.items)&&vc(t.additionalItems)&&t.minItems===0||Cc(t.items)&&t.items.every(e=>Gs(e)))}s(B4e,"IsTuple");function N4e(t){return Bi(t,"Undefined")&&t.type==="undefined"&&ns(t.$id)}s(N4e,"IsUndefined");function jEt(t){return pue(t)&&t.anyOf.every(e=>m4e(e)||h4e(e))}s(jEt,"IsUnionLiteral");function pue(t){return Bi(t,"Union")&&ns(t.$id)&&rs(t)&&Cc(t.anyOf)&&t.anyOf.every(e=>Gs(e))}s(pue,"IsUnion");function L4e(t){return Bi(t,"Uint8Array")&&t.type==="Uint8Array"&&ns(t.$id)&&vs(t.minByteLength)&&vs(t.maxByteLength)}s(L4e,"IsUint8Array");function M4e(t){return Bi(t,"Unknown")&&ns(t.$id)}s(M4e,"IsUnknown");function F4e(t){return Bi(t,"Unsafe")}s(F4e,"IsUnsafe");function O4e(t){return Bi(t,"Void")&&t.type==="void"&&ns(t.$id)}s(O4e,"IsVoid");function Q4e(t){return rs(t)&&ot in t&&Cs(t[ot])&&!FEt.includes(t[ot])}s(Q4e,"IsKind");function Gs(t){return rs(t)&&(t4e(t)||r4e(t)||n4e(t)||s4e(t)||o4e(t)||i4e(t)||a4e(t)||c4e(t)||l4e(t)||u4e(t)||d4e(t)||f4e(t)||p4e(t)||_M(t)||A4e(t)||y4e(t)||C4e(t)||v4e(t)||E4e(t)||x4e(t)||b4e(t)||I4e(t)||T4e(t)||w4e(t)||S4e(t)||_4e(t)||R4e(t)||k4e(t)||P4e(t)||B4e(t)||N4e(t)||pue(t)||L4e(t)||M4e(t)||F4e(t)||O4e(t)||Q4e(t))}s(Gs,"IsSchema");f();var mue="(true|false)",RM="(0|[1-9][0-9]*)",hue="(.*)",GEt="(?!.*)",$Rr=`^${mue}$`,Ly=`^${RM}$`,My=`^${hue}$`,U4e=`^${GEt}$`;f();var Bg={};ma(Bg,{Clear:()=>zEt,Delete:()=>YEt,Entries:()=>VEt,Get:()=>XEt,Has:()=>KEt,Set:()=>JEt});f();var UP=new Map;function VEt(){return new Map(UP)}s(VEt,"Entries");function zEt(){return UP.clear()}s(zEt,"Clear");function YEt(t){return UP.delete(t)}s(YEt,"Delete");function KEt(t){return UP.has(t)}s(KEt,"Has");function JEt(t,e){UP.set(t,e)}s(JEt,"Set");function XEt(t){return UP.get(t)}s(XEt,"Get");var Vd={};ma(Vd,{Clear:()=>ext,Delete:()=>txt,Entries:()=>ZEt,Get:()=>ixt,Has:()=>rxt,Set:()=>nxt});f();var qP=new Map;function ZEt(){return new Map(qP)}s(ZEt,"Entries");function ext(){return qP.clear()}s(ext,"Clear");function txt(t){return qP.delete(t)}s(txt,"Delete");function rxt(t){return qP.has(t)}s(rxt,"Has");function nxt(t,e){qP.set(t,e)}s(nxt,"Set");function ixt(t){return qP.get(t)}s(ixt,"Get");f();function q4e(t,e){return t.includes(e)}s(q4e,"SetIncludes");function H4e(t){return[...new Set(t)]}s(H4e,"SetDistinct");function oxt(t,e){return t.filter(r=>e.includes(r))}s(oxt,"SetIntersect");function sxt(t,e){return t.reduce((r,n)=>oxt(r,n),e)}s(sxt,"SetIntersectManyResolve");function $4e(t){return t.length===1?t[0]:t.length>1?sxt(t.slice(1),t[0]):[]}s($4e,"SetIntersectMany");function W4e(t){let e=[];for(let r of t)e.push(...r);return e}s(W4e,"SetUnionMany");f();function Wb(t){return at({[ot]:"Any"},t)}s(Wb,"Any");f();function HP(t,e){return at({[ot]:"Array",type:"array",items:t},e)}s(HP,"Array");f();function j4e(t){return at({[ot]:"Argument",index:t})}s(j4e,"Argument");f();function $P(t,e){return at({[ot]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s($P,"AsyncIterator");f();f();function Rs(t,e,r){return at({[ot]:"Computed",target:t,parameters:e},r)}s(Rs,"Computed");f();f();function axt(t,e){let{[e]:r,...n}=t;return n}s(axt,"DiscardKey");function Na(t,e){return e.reduce((r,n)=>axt(r,n),t)}s(Na,"Discard");f();function gi(t){return at({[ot]:"Never",not:{}},t)}s(gi,"Never");f();f();function xo(t){return at({[ot]:"MappedResult",properties:t})}s(xo,"MappedResult");f();f();function WP(t,e,r){return at({[ot]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(WP,"Constructor");f();function Fy(t,e,r){return at({[ot]:"Function",type:"Function",parameters:t,returns:e},r)}s(Fy,"Function");f();f();f();f();function kM(t,e){return at({[ot]:"Union",anyOf:t},e)}s(kM,"UnionCreate");function cxt(t){return t.some(e=>Qf(e))}s(cxt,"IsUnionOptional");function G4e(t){return t.map(e=>Qf(e)?lxt(e):e)}s(G4e,"RemoveOptionalFromRest");function lxt(t){return Na(t,[bu])}s(lxt,"RemoveOptionalFromType");function uxt(t,e){return cxt(t)?cd(kM(G4e(t),e)):kM(G4e(t),e)}s(uxt,"ResolveUnion");function Oy(t,e){return t.length===1?at(t[0],e):t.length===0?gi(e):uxt(t,e)}s(Oy,"UnionEvaluated");f();function Mo(t,e){return t.length===0?gi(e):t.length===1?at(t[0],e):kM(t,e)}s(Mo,"Union");f();f();f();var K$=class extends Rn{static{s(this,"TemplateLiteralParserError")}};function dxt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(dxt,"Unescape");function gue(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(gue,"IsNonEscaped");function mv(t,e){return gue(t,e,"(")}s(mv,"IsOpenParen");function PM(t,e){return gue(t,e,")")}s(PM,"IsCloseParen");function V4e(t,e){return gue(t,e,"|")}s(V4e,"IsSeparator");function fxt(t){if(!(mv(t,0)&&PM(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(mv(t,r)&&(e+=1),PM(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(fxt,"IsGroup");function pxt(t){return t.slice(1,t.length-1)}s(pxt,"InGroup");function mxt(t){let e=0;for(let r=0;r<t.length;r++)if(mv(t,r)&&(e+=1),PM(t,r)&&(e-=1),V4e(t,r)&&e===0)return!0;return!1}s(mxt,"IsPrecedenceOr");function hxt(t){for(let e=0;e<t.length;e++)if(mv(t,e))return!0;return!1}s(hxt,"IsPrecedenceAnd");function gxt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(mv(t,o)&&(e+=1),PM(t,o)&&(e-=1),V4e(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(jP(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(jP(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(gxt,"Or");function Axt(t){function e(i,o){if(!mv(i,o))throw new K$("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(mv(i,c)&&(a+=1),PM(i,c)&&(a-=1),a===0)return[o,c];throw new K$("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(mv(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(mv(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(jP(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(jP(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(Axt,"And");function jP(t){return fxt(t)?jP(pxt(t)):mxt(t)?gxt(t):hxt(t)?Axt(t):{type:"const",const:dxt(t)}}s(jP,"TemplateLiteralParse");function GP(t){return jP(t.slice(1,t.length-1))}s(GP,"TemplateLiteralParseExact");var Aue=class extends Rn{static{s(this,"TemplateLiteralFiniteError")}};function yxt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(yxt,"IsNumberExpression");function Cxt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(Cxt,"IsBooleanExpression");function vxt(t){return t.type==="const"&&t.const===".*"}s(vxt,"IsStringExpression");function s_(t){return yxt(t)||vxt(t)?!1:Cxt(t)?!0:t.type==="and"?t.expr.every(e=>s_(e)):t.type==="or"?t.expr.every(e=>s_(e)):t.type==="const"?!0:(()=>{throw new Aue("Unknown expression type")})()}s(s_,"IsTemplateLiteralExpressionFinite");function J$(t){let e=GP(t.pattern);return s_(e)}s(J$,"IsTemplateLiteralFinite");f();var yue=class extends Rn{static{s(this,"TemplateLiteralGenerateError")}};function*z4e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of z4e(t.slice(1)))yield`${e}${r}`}s(z4e,"GenerateReduce");function*Ext(t){return yield*z4e(t.expr.map(e=>[...DM(e)]))}s(Ext,"GenerateAnd");function*xxt(t){for(let e of t.expr)yield*DM(e)}s(xxt,"GenerateOr");function*bxt(t){return yield t.const}s(bxt,"GenerateConst");function*DM(t){return t.type==="and"?yield*Ext(t):t.type==="or"?yield*xxt(t):t.type==="const"?yield*bxt(t):(()=>{throw new yue("Unknown expression")})()}s(DM,"TemplateLiteralExpressionGenerate");function VP(t){let e=GP(t.pattern);return s_(e)?[...DM(e)]:[]}s(VP,"TemplateLiteralGenerate");f();f();function ro(t,e){return at({[ot]:"Literal",const:t,type:typeof t},e)}s(ro,"Literal");f();function X$(t){return at({[ot]:"Boolean",type:"boolean"},t)}s(X$,"Boolean");f();function zP(t){return at({[ot]:"BigInt",type:"bigint"},t)}s(zP,"BigInt");f();function Em(t){return at({[ot]:"Number",type:"number"},t)}s(Em,"Number");f();function zd(t){return at({[ot]:"String",type:"string"},t)}s(zd,"String");function*Ixt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield X$():e==="number"?yield Em():e==="bigint"?yield zP():e==="string"?yield zd():yield(()=>{let r=e.split("|").map(n=>ro(n.trim()));return r.length===0?gi():r.length===1?r[0]:Oy(r)})()}s(Ixt,"FromUnion");function*Txt(t){if(t[1]!=="{"){let e=ro("$"),r=Cue(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=Ixt(t.slice(2,e)),n=Cue(t.slice(e+1));return yield*[...r,...n]}yield ro(t)}s(Txt,"FromTerminal");function*Cue(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=ro(t.slice(0,e)),n=Txt(t.slice(e));return yield*[r,...n]}yield ro(t)}s(Cue,"FromSyntax");function Y4e(t){return[...Cue(t)]}s(Y4e,"TemplateLiteralSyntax");f();var vue=class extends Rn{static{s(this,"TemplateLiteralPatternError")}};function wxt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(wxt,"Escape");function K4e(t,e){return X0(t)?t.pattern.slice(1,t.pattern.length-1):go(t)?`(${t.anyOf.map(r=>K4e(r,e)).join("|")})`:Dg(t)?`${e}${RM}`:Pg(t)?`${e}${RM}`:r_(t)?`${e}${RM}`:dv(t)?`${e}${hue}`:K0(t)?`${e}${wxt(t.const.toString())}`:uv(t)?`${e}${mue}`:(()=>{throw new vue(`Unexpected Kind '${t[ot]}'`)})()}s(K4e,"Visit");function Eue(t){return`^${t.map(e=>K4e(e,"")).join("")}$`}s(Eue,"TemplateLiteralPattern");f();function a_(t){let r=VP(t).map(n=>ro(n));return Oy(r)}s(a_,"TemplateLiteralToUnion");f();function Z$(t,e){let r=Cs(t)?Eue(Y4e(t)):Eue(t);return at({[ot]:"TemplateLiteral",type:"string",pattern:r},e)}s(Z$,"TemplateLiteral");function Sxt(t){return VP(t).map(r=>r.toString())}s(Sxt,"FromTemplateLiteral");function _xt(t){let e=[];for(let r of t)e.push(...Uf(r));return e}s(_xt,"FromUnion");function Rxt(t){return[t.toString()]}s(Rxt,"FromLiteral");function Uf(t){return[...new Set(X0(t)?Sxt(t):go(t)?_xt(t.anyOf):K0(t)?Rxt(t.const):Dg(t)?["[number]"]:Pg(t)?["[number]"]:[])]}s(Uf,"IndexPropertyKeys");f();function kxt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=jb(t,Uf(e[i]),r);return n}s(kxt,"FromProperties");function Pxt(t,e,r){return kxt(t,e.properties,r)}s(Pxt,"FromMappedResult");function J4e(t,e,r){let n=Pxt(t,e,r);return xo(n)}s(J4e,"IndexFromMappedResult");function Z4e(t,e){return t.map(r=>eDe(r,e))}s(Z4e,"FromRest");function Dxt(t){return t.filter(e=>!Hb(e))}s(Dxt,"FromIntersectRest");function Bxt(t,e){return eW(Dxt(Z4e(t,e)))}s(Bxt,"FromIntersect");function Nxt(t){return t.some(e=>Hb(e))?[]:t}s(Nxt,"FromUnionRest");function Lxt(t,e){return Oy(Nxt(Z4e(t,e)))}s(Lxt,"FromUnion");function Mxt(t,e){return e in t?t[e]:e==="[number]"?Oy(t):gi()}s(Mxt,"FromTuple");function Fxt(t,e){return e==="[number]"?t:gi()}s(Fxt,"FromArray");function Oxt(t,e){return e in t?t[e]:gi()}s(Oxt,"FromProperty");function eDe(t,e){return Ba(t)?Bxt(t.allOf,e):go(t)?Lxt(t.anyOf,e):Z0(t)?Mxt(t.items??[],e):Sg(t)?Fxt(t.items,e):Ec(t)?Oxt(t.properties,e):gi()}s(eDe,"IndexFromPropertyKey");function BM(t,e){return e.map(r=>eDe(t,r))}s(BM,"IndexFromPropertyKeys");function X4e(t,e){return Oy(BM(t,e))}s(X4e,"FromSchema");function jb(t,e,r){if(Ga(t)||Ga(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!ya(t)||!ya(e))throw new Rn(n);return Rs("Index",[t,e])}return js(e)?J4e(t,e,r):J0(e)?tDe(t,e,r):at(ya(e)?X4e(t,Uf(e)):X4e(t,e),r)}s(jb,"Index");function Qxt(t,e,r){return{[e]:jb(t,[e],$s(r))}}s(Qxt,"MappedIndexPropertyKey");function Uxt(t,e,r){return e.reduce((n,i)=>({...n,...Qxt(t,i,r)}),{})}s(Uxt,"MappedIndexPropertyKeys");function qxt(t,e,r){return Uxt(t,e.keys,r)}s(qxt,"MappedIndexProperties");function tDe(t,e,r){let n=qxt(t,e,r);return xo(n)}s(tDe,"IndexFromMappedKey");f();function YP(t,e){return at({[ot]:"Iterator",type:"Iterator",items:t},e)}s(YP,"Iterator");f();function Hxt(t){let e=[];for(let r in t)Qf(t[r])||e.push(r);return e}s(Hxt,"RequiredKeys");function $xt(t,e){let r=Hxt(t),n=r.length>0?{[ot]:"Object",type:"object",properties:t,required:r}:{[ot]:"Object",type:"object",properties:t};return at(n,e)}s($xt,"_Object");var Fo=$xt;f();function tW(t,e){return at({[ot]:"Promise",type:"Promise",item:t},e)}s(tW,"Promise");f();f();function Wxt(t){return at(Na(t,[wg]))}s(Wxt,"RemoveReadonly");function jxt(t){return at({...t,[wg]:"Readonly"})}s(jxt,"AddReadonly");function Gxt(t,e){return e===!1?Wxt(t):jxt(t)}s(Gxt,"ReadonlyWithFlag");function qf(t,e){let r=e??!0;return js(t)?rDe(t,r):Gxt(t,r)}s(qf,"Readonly");function Vxt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=qf(t[n],e);return r}s(Vxt,"FromProperties");function zxt(t,e){return Vxt(t.properties,e)}s(zxt,"FromMappedResult");function rDe(t,e){let r=zxt(t,e);return xo(r)}s(rDe,"ReadonlyFromMappedResult");f();function xm(t,e){return at(t.length>0?{[ot]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[ot]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(xm,"Tuple");function nDe(t,e){return t in e?bm(t,e[t]):xo(e)}s(nDe,"FromMappedResult");function Yxt(t){return{[t]:ro(t)}}s(Yxt,"MappedKeyToKnownMappedResultProperties");function Kxt(t){let e={};for(let r of t)e[r]=ro(r);return e}s(Kxt,"MappedKeyToUnknownMappedResultProperties");function Jxt(t,e){return q4e(e,t)?Yxt(t):Kxt(e)}s(Jxt,"MappedKeyToMappedResultProperties");function Xxt(t,e){let r=Jxt(t,e);return nDe(t,r)}s(Xxt,"FromMappedKey");function NM(t,e){return e.map(r=>bm(t,r))}s(NM,"FromRest");function Zxt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=bm(t,e[n]);return r}s(Zxt,"FromProperties");function bm(t,e){let r={...e};return Qf(e)?cd(bm(t,Na(e,[bu]))):QP(e)?qf(bm(t,Na(e,[wg]))):js(e)?nDe(t,e.properties):J0(e)?Xxt(t,e.keys):Rg(e)?WP(NM(t,e.parameters),bm(t,e.returns),r):kg(e)?Fy(NM(t,e.parameters),bm(t,e.returns),r):t_(e)?$P(bm(t,e.items),r):n_(e)?YP(bm(t,e.items),r):Ba(e)?ld(NM(t,e.allOf),r):go(e)?Mo(NM(t,e.anyOf),r):Z0(e)?xm(NM(t,e.items??[]),r):Ec(e)?Fo(Zxt(t,e.properties),r):Sg(e)?HP(bm(t,e.items),r):i_(e)?tW(bm(t,e.item),r):e}s(bm,"FromSchemaType");function ebt(t,e){let r={};for(let n of t)r[n]=bm(n,e);return r}s(ebt,"MappedFunctionReturnType");function iDe(t,e,r){let n=ya(t)?Uf(t):t,i=e({[ot]:"MappedKey",keys:n}),o=ebt(n,i);return Fo(o,r)}s(iDe,"Mapped");f();function tbt(t){return at(Na(t,[bu]))}s(tbt,"RemoveOptional");function rbt(t){return at({...t,[bu]:"Optional"})}s(rbt,"AddOptional");function nbt(t,e){return e===!1?tbt(t):rbt(t)}s(nbt,"OptionalWithFlag");function cd(t,e){let r=e??!0;return js(t)?oDe(t,r):nbt(t,r)}s(cd,"Optional");function ibt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=cd(t[n],e);return r}s(ibt,"FromProperties");function obt(t,e){return ibt(t.properties,e)}s(obt,"FromMappedResult");function oDe(t,e){let r=obt(t,e);return xo(r)}s(oDe,"OptionalFromMappedResult");f();function LM(t,e={}){let r=t.every(i=>Ec(i)),n=ya(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return at(e.unevaluatedProperties===!1||ya(e.unevaluatedProperties)||r?{...n,[ot]:"Intersect",type:"object",allOf:t}:{...n,[ot]:"Intersect",allOf:t},e)}s(LM,"IntersectCreate");function sbt(t){return t.every(e=>Qf(e))}s(sbt,"IsIntersectOptional");function abt(t){return Na(t,[bu])}s(abt,"RemoveOptionalFromType");function sDe(t){return t.map(e=>Qf(e)?abt(e):e)}s(sDe,"RemoveOptionalFromRest");function cbt(t,e){return sbt(t)?cd(LM(sDe(t),e)):LM(sDe(t),e)}s(cbt,"ResolveIntersect");function eW(t,e={}){if(t.length===1)return at(t[0],e);if(t.length===0)return gi(e);if(t.some(r=>Lo(r)))throw new Error("Cannot intersect transform types");return cbt(t,e)}s(eW,"IntersectEvaluated");f();function ld(t,e){if(t.length===1)return at(t[0],e);if(t.length===0)return gi(e);if(t.some(r=>Lo(r)))throw new Error("Cannot intersect transform types");return LM(t,e)}s(ld,"Intersect");f();function Im(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Rn("Ref: $ref must be a string");return at({[ot]:"Ref",$ref:e},r)}s(Im,"Ref");function lbt(t,e){return Rs("Awaited",[Rs(t,e)])}s(lbt,"FromComputed");function ubt(t){return Rs("Awaited",[Im(t)])}s(ubt,"FromRef");function dbt(t){return ld(aDe(t))}s(dbt,"FromIntersect");function fbt(t){return Mo(aDe(t))}s(fbt,"FromUnion");function pbt(t){return KP(t)}s(pbt,"FromPromise");function aDe(t){return t.map(e=>KP(e))}s(aDe,"FromRest");function KP(t,e){return at(_g(t)?lbt(t.target,t.parameters):Ba(t)?dbt(t.allOf):go(t)?fbt(t.anyOf):i_(t)?pbt(t.item):Ga(t)?ubt(t.$ref):t,e)}s(KP,"Awaited");f();f();f();f();function cDe(t){let e=[];for(let r of t)e.push(Hf(r));return e}s(cDe,"FromRest");function mbt(t){let e=cDe(t);return W4e(e)}s(mbt,"FromIntersect");function hbt(t){let e=cDe(t);return $4e(e)}s(hbt,"FromUnion");function gbt(t){return t.map((e,r)=>r.toString())}s(gbt,"FromTuple");function Abt(t){return["[number]"]}s(Abt,"FromArray");function ybt(t){return globalThis.Object.getOwnPropertyNames(t)}s(ybt,"FromProperties");function Cbt(t){return xue?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(Cbt,"FromPatternProperties");function Hf(t){return Ba(t)?mbt(t.allOf):go(t)?hbt(t.anyOf):Z0(t)?gbt(t.items??[]):Sg(t)?Abt(t.items):Ec(t)?ybt(t.properties):o_(t)?Cbt(t.patternProperties):[]}s(Hf,"KeyOfPropertyKeys");var xue=!1;function hv(t){xue=!0;let e=Hf(t);return xue=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(hv,"KeyOfPattern");function vbt(t,e){return Rs("KeyOf",[Rs(t,e)])}s(vbt,"FromComputed");function Ebt(t){return Rs("KeyOf",[Im(t)])}s(Ebt,"FromRef");function xbt(t,e){let r=Hf(t),n=bbt(r),i=Oy(n);return at(i,e)}s(xbt,"KeyOfFromType");function bbt(t){return t.map(e=>e==="[number]"?Em():ro(e))}s(bbt,"KeyOfPropertyKeysToRest");function JP(t,e){return _g(t)?vbt(t.target,t.parameters):Ga(t)?Ebt(t.$ref):js(t)?lDe(t,e):xbt(t,e)}s(JP,"KeyOf");function Ibt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=JP(t[n],$s(e));return r}s(Ibt,"FromProperties");function Tbt(t,e){return Ibt(t.properties,e)}s(Tbt,"FromMappedResult");function lDe(t,e){let r=Tbt(t,e);return xo(r)}s(lDe,"KeyOfFromMappedResult");f();function rW(t){let e=Hf(t),r=BM(t,e);return e.map((n,i)=>[e[i],r[i]])}s(rW,"KeyOfPropertyEntries");function wbt(t){let e=[];for(let r of t)e.push(...Hf(r));return H4e(e)}s(wbt,"CompositeKeys");function Sbt(t){return t.filter(e=>!Hb(e))}s(Sbt,"FilterNever");function _bt(t,e){let r=[];for(let n of t)r.push(...BM(n,[e]));return Sbt(r)}s(_bt,"CompositeProperty");function Rbt(t,e){let r={};for(let n of e)r[n]=eW(_bt(t,n));return r}s(Rbt,"CompositeProperties");function uDe(t,e){let r=wbt(t),n=Rbt(t,r);return Fo(n,e)}s(uDe,"Composite");f();f();function nW(t){return at({[ot]:"Date",type:"Date"},t)}s(nW,"Date");f();function iW(t){return at({[ot]:"Null",type:"null"},t)}s(iW,"Null");f();function oW(t){return at({[ot]:"Symbol",type:"symbol"},t)}s(oW,"Symbol");f();function sW(t){return at({[ot]:"Undefined",type:"undefined"},t)}s(sW,"Undefined");f();function aW(t){return at({[ot]:"Uint8Array",type:"Uint8Array"},t)}s(aW,"Uint8Array");f();function Ng(t){return at({[ot]:"Unknown"},t)}s(Ng,"Unknown");function kbt(t){return t.map(e=>bue(e,!1))}s(kbt,"FromArray");function Pbt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=qf(bue(t[r],!1));return e}s(Pbt,"FromProperties");function cW(t,e){return e===!0?t:qf(t)}s(cW,"ConditionalReadonly");function bue(t,e){return tue(t)?cW(Wb(),e):nue(t)?cW(Wb(),e):Cc(t)?qf(xm(kbt(t))):av(t)?aW():e_(t)?nW():rs(t)?cW(Fo(Pbt(t)),e):rue(t)?cW(Fy([],Ng()),e):vc(t)?sW():iue(t)?iW():oue(t)?oW():xM(t)?zP():z0(t)?ro(t):sv(t)?ro(t):Cs(t)?ro(t):Fo({})}s(bue,"FromValue");function dDe(t,e){return at(bue(t,!0),e)}s(dDe,"Const");f();function fDe(t,e){return Rg(t)?xm(t.parameters,e):gi(e)}s(fDe,"ConstructorParameters");f();function pDe(t,e){if(vc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>ro(o));return Mo(i,{...e,[vm]:"Enum"})}s(pDe,"Enum");f();f();f();var Tue=class extends Rn{static{s(this,"ExtendsResolverError")}},ct;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ct||(ct={}));function Tm(t){return t===ct.False?t:ct.True}s(Tm,"IntoBooleanResult");function XP(t){throw new Tue(t)}s(XP,"Throw");function $c(t){return Le.IsNever(t)||Le.IsIntersect(t)||Le.IsUnion(t)||Le.IsUnknown(t)||Le.IsAny(t)}s($c,"IsStructuralRight");function Wc(t,e){return Le.IsNever(e)?vDe(t,e):Le.IsIntersect(e)?lW(t,e):Le.IsUnion(e)?Rue(t,e):Le.IsUnknown(e)?IDe(t,e):Le.IsAny(e)?_ue(t,e):XP("StructuralRight")}s(Wc,"StructuralRight");function _ue(t,e){return ct.True}s(_ue,"FromAnyRight");function Dbt(t,e){return Le.IsIntersect(e)?lW(t,e):Le.IsUnion(e)&&e.anyOf.some(r=>Le.IsAny(r)||Le.IsUnknown(r))?ct.True:Le.IsUnion(e)?ct.Union:Le.IsUnknown(e)||Le.IsAny(e)?ct.True:ct.Union}s(Dbt,"FromAny");function Bbt(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)?ct.True:ct.False}s(Bbt,"FromArrayRight");function Nbt(t,e){return Le.IsObject(e)&&uW(e)?ct.True:$c(e)?Wc(t,e):Le.IsArray(e)?Tm(is(t.items,e.items)):ct.False}s(Nbt,"FromArray");function Lbt(t,e){return $c(e)?Wc(t,e):Le.IsAsyncIterator(e)?Tm(is(t.items,e.items)):ct.False}s(Lbt,"FromAsyncIterator");function Mbt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsBigInt(e)?ct.True:ct.False}s(Mbt,"FromBigInt");function yDe(t,e){return Le.IsLiteralBoolean(t)||Le.IsBoolean(t)?ct.True:ct.False}s(yDe,"FromBooleanRight");function Fbt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsBoolean(e)?ct.True:ct.False}s(Fbt,"FromBoolean");function Obt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsConstructor(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Tm(is(e.parameters[n],r))===ct.True)?Tm(is(t.returns,e.returns)):ct.False:ct.False}s(Obt,"FromConstructor");function Qbt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsDate(e)?ct.True:ct.False}s(Qbt,"FromDate");function Ubt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsFunction(e)?t.parameters.length>e.parameters.length?ct.False:t.parameters.every((r,n)=>Tm(is(e.parameters[n],r))===ct.True)?Tm(is(t.returns,e.returns)):ct.False:ct.False}s(Ubt,"FromFunction");function CDe(t,e){return Le.IsLiteral(t)&&ad.IsNumber(t.const)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(CDe,"FromIntegerRight");function qbt(t,e){return Le.IsInteger(e)||Le.IsNumber(e)?ct.True:$c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):ct.False}s(qbt,"FromInteger");function lW(t,e){return e.allOf.every(r=>is(t,r)===ct.True)?ct.True:ct.False}s(lW,"FromIntersectRight");function Hbt(t,e){return t.allOf.some(r=>is(r,e)===ct.True)?ct.True:ct.False}s(Hbt,"FromIntersect");function $bt(t,e){return $c(e)?Wc(t,e):Le.IsIterator(e)?Tm(is(t.items,e.items)):ct.False}s($bt,"FromIterator");function Wbt(t,e){return Le.IsLiteral(e)&&e.const===t.const?ct.True:$c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsString(e)?bDe(t,e):Le.IsNumber(e)?EDe(t,e):Le.IsInteger(e)?CDe(t,e):Le.IsBoolean(e)?yDe(t,e):ct.False}s(Wbt,"FromLiteral");function vDe(t,e){return ct.False}s(vDe,"FromNeverRight");function jbt(t,e){return ct.True}s(jbt,"FromNever");function mDe(t){let[e,r]=[t,0];for(;Le.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Ng()}s(mDe,"UnwrapTNot");function Gbt(t,e){return Le.IsNot(t)?is(mDe(t),e):Le.IsNot(e)?is(t,mDe(e)):XP("Invalid fallthrough for Not")}s(Gbt,"FromNot");function Vbt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsNull(e)?ct.True:ct.False}s(Vbt,"FromNull");function EDe(t,e){return Le.IsLiteralNumber(t)||Le.IsNumber(t)||Le.IsInteger(t)?ct.True:ct.False}s(EDe,"FromNumberRight");function zbt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsInteger(e)||Le.IsNumber(e)?ct.True:ct.False}s(zbt,"FromNumber");function $f(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s($f,"IsObjectPropertyCount");function hDe(t){return uW(t)}s(hDe,"IsObjectStringLike");function gDe(t){return $f(t,0)||$f(t,1)&&"description"in t.properties&&Le.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Le.IsString(t.properties.description.anyOf[0])&&Le.IsUndefined(t.properties.description.anyOf[1])||Le.IsString(t.properties.description.anyOf[1])&&Le.IsUndefined(t.properties.description.anyOf[0]))}s(gDe,"IsObjectSymbolLike");function Iue(t){return $f(t,0)}s(Iue,"IsObjectNumberLike");function ADe(t){return $f(t,0)}s(ADe,"IsObjectBooleanLike");function Ybt(t){return $f(t,0)}s(Ybt,"IsObjectBigIntLike");function Kbt(t){return $f(t,0)}s(Kbt,"IsObjectDateLike");function Jbt(t){return uW(t)}s(Jbt,"IsObjectUint8ArrayLike");function Xbt(t){let e=Em();return $f(t,0)||$f(t,1)&&"length"in t.properties&&Tm(is(t.properties.length,e))===ct.True}s(Xbt,"IsObjectFunctionLike");function Zbt(t){return $f(t,0)}s(Zbt,"IsObjectConstructorLike");function uW(t){let e=Em();return $f(t,0)||$f(t,1)&&"length"in t.properties&&Tm(is(t.properties.length,e))===ct.True}s(uW,"IsObjectArrayLike");function eIt(t){let e=Fy([Wb()],Wb());return $f(t,0)||$f(t,1)&&"then"in t.properties&&Tm(is(t.properties.then,e))===ct.True}s(eIt,"IsObjectPromiseLike");function xDe(t,e){return is(t,e)===ct.False||Le.IsOptional(t)&&!Le.IsOptional(e)?ct.False:ct.True}s(xDe,"Property");function ud(t,e){return Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:Le.IsNever(t)||Le.IsLiteralString(t)&&hDe(e)||Le.IsLiteralNumber(t)&&Iue(e)||Le.IsLiteralBoolean(t)&&ADe(e)||Le.IsSymbol(t)&&gDe(e)||Le.IsBigInt(t)&&Ybt(e)||Le.IsString(t)&&hDe(e)||Le.IsSymbol(t)&&gDe(e)||Le.IsNumber(t)&&Iue(e)||Le.IsInteger(t)&&Iue(e)||Le.IsBoolean(t)&&ADe(e)||Le.IsUint8Array(t)&&Jbt(e)||Le.IsDate(t)&&Kbt(e)||Le.IsConstructor(t)&&Zbt(e)||Le.IsFunction(t)&&Xbt(e)?ct.True:Le.IsRecord(t)&&Le.IsString(wue(t))?e[vm]==="Record"?ct.True:ct.False:Le.IsRecord(t)&&Le.IsNumber(wue(t))?$f(e,0)?ct.True:ct.False:ct.False}s(ud,"FromObjectRight");function tIt(t,e){return $c(e)?Wc(t,e):Le.IsRecord(e)?wm(t,e):Le.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Le.IsOptional(e.properties[r]))return ct.False;if(Le.IsOptional(e.properties[r]))return ct.True;if(xDe(t.properties[r],e.properties[r])===ct.False)return ct.False}return ct.True})():ct.False}s(tIt,"FromObject");function rIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)&&eIt(e)?ct.True:Le.IsPromise(e)?Tm(is(t.item,e.item)):ct.False}s(rIt,"FromPromise");function wue(t){return Ly in t.patternProperties?Em():My in t.patternProperties?zd():XP("Unknown record key pattern")}s(wue,"RecordKey");function Sue(t){return Ly in t.patternProperties?t.patternProperties[Ly]:My in t.patternProperties?t.patternProperties[My]:XP("Unable to get record value schema")}s(Sue,"RecordValue");function wm(t,e){let[r,n]=[wue(e),Sue(e)];return Le.IsLiteralString(t)&&Le.IsNumber(r)&&Tm(is(t,n))===ct.True?ct.True:Le.IsUint8Array(t)&&Le.IsNumber(r)||Le.IsString(t)&&Le.IsNumber(r)||Le.IsArray(t)&&Le.IsNumber(r)?is(t,n):Le.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(xDe(n,t.properties[i])===ct.False)return ct.False;return ct.True})():ct.False}s(wm,"FromRecordRight");function nIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?is(Sue(t),Sue(e)):ct.False}s(nIt,"FromRecord");function iIt(t,e){let r=Le.IsRegExp(t)?zd():t,n=Le.IsRegExp(e)?zd():e;return is(r,n)}s(iIt,"FromRegExp");function bDe(t,e){return Le.IsLiteral(t)&&ad.IsString(t.const)||Le.IsString(t)?ct.True:ct.False}s(bDe,"FromStringRight");function oIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsString(e)?ct.True:ct.False}s(oIt,"FromString");function sIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsSymbol(e)?ct.True:ct.False}s(sIt,"FromSymbol");function aIt(t,e){return Le.IsTemplateLiteral(t)?is(a_(t),e):Le.IsTemplateLiteral(e)?is(t,a_(e)):XP("Invalid fallthrough for TemplateLiteral")}s(aIt,"FromTemplateLiteral");function cIt(t,e){return Le.IsArray(e)&&t.items!==void 0&&t.items.every(r=>is(r,e.items)===ct.True)}s(cIt,"IsArrayOfTuple");function lIt(t,e){return Le.IsNever(t)?ct.True:Le.IsUnknown(t)?ct.False:Le.IsAny(t)?ct.Union:ct.False}s(lIt,"FromTupleRight");function uIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)&&uW(e)||Le.IsArray(e)&&cIt(t,e)?ct.True:Le.IsTuple(e)?ad.IsUndefined(t.items)&&!ad.IsUndefined(e.items)||!ad.IsUndefined(t.items)&&ad.IsUndefined(e.items)?ct.False:ad.IsUndefined(t.items)&&!ad.IsUndefined(e.items)||t.items.every((r,n)=>is(r,e.items[n])===ct.True)?ct.True:ct.False:ct.False}s(uIt,"FromTuple");function dIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsUint8Array(e)?ct.True:ct.False}s(dIt,"FromUint8Array");function fIt(t,e){return $c(e)?Wc(t,e):Le.IsObject(e)?ud(t,e):Le.IsRecord(e)?wm(t,e):Le.IsVoid(e)?hIt(t,e):Le.IsUndefined(e)?ct.True:ct.False}s(fIt,"FromUndefined");function Rue(t,e){return e.anyOf.some(r=>is(t,r)===ct.True)?ct.True:ct.False}s(Rue,"FromUnionRight");function pIt(t,e){return t.anyOf.every(r=>is(r,e)===ct.True)?ct.True:ct.False}s(pIt,"FromUnion");function IDe(t,e){return ct.True}s(IDe,"FromUnknownRight");function mIt(t,e){return Le.IsNever(e)?vDe(t,e):Le.IsIntersect(e)?lW(t,e):Le.IsUnion(e)?Rue(t,e):Le.IsAny(e)?_ue(t,e):Le.IsString(e)?bDe(t,e):Le.IsNumber(e)?EDe(t,e):Le.IsInteger(e)?CDe(t,e):Le.IsBoolean(e)?yDe(t,e):Le.IsArray(e)?Bbt(t,e):Le.IsTuple(e)?lIt(t,e):Le.IsObject(e)?ud(t,e):Le.IsUnknown(e)?ct.True:ct.False}s(mIt,"FromUnknown");function hIt(t,e){return Le.IsUndefined(t)||Le.IsUndefined(t)?ct.True:ct.False}s(hIt,"FromVoidRight");function gIt(t,e){return Le.IsIntersect(e)?lW(t,e):Le.IsUnion(e)?Rue(t,e):Le.IsUnknown(e)?IDe(t,e):Le.IsAny(e)?_ue(t,e):Le.IsObject(e)?ud(t,e):Le.IsVoid(e)?ct.True:ct.False}s(gIt,"FromVoid");function is(t,e){return Le.IsTemplateLiteral(t)||Le.IsTemplateLiteral(e)?aIt(t,e):Le.IsRegExp(t)||Le.IsRegExp(e)?iIt(t,e):Le.IsNot(t)||Le.IsNot(e)?Gbt(t,e):Le.IsAny(t)?Dbt(t,e):Le.IsArray(t)?Nbt(t,e):Le.IsBigInt(t)?Mbt(t,e):Le.IsBoolean(t)?Fbt(t,e):Le.IsAsyncIterator(t)?Lbt(t,e):Le.IsConstructor(t)?Obt(t,e):Le.IsDate(t)?Qbt(t,e):Le.IsFunction(t)?Ubt(t,e):Le.IsInteger(t)?qbt(t,e):Le.IsIntersect(t)?Hbt(t,e):Le.IsIterator(t)?$bt(t,e):Le.IsLiteral(t)?Wbt(t,e):Le.IsNever(t)?jbt(t,e):Le.IsNull(t)?Vbt(t,e):Le.IsNumber(t)?zbt(t,e):Le.IsObject(t)?tIt(t,e):Le.IsRecord(t)?nIt(t,e):Le.IsString(t)?oIt(t,e):Le.IsSymbol(t)?sIt(t,e):Le.IsTuple(t)?uIt(t,e):Le.IsPromise(t)?rIt(t,e):Le.IsUint8Array(t)?dIt(t,e):Le.IsUndefined(t)?fIt(t,e):Le.IsUnion(t)?pIt(t,e):Le.IsUnknown(t)?mIt(t,e):Le.IsVoid(t)?gIt(t,e):XP(`Unknown left type operand '${t[ot]}'`)}s(is,"Visit");function Gb(t,e){return is(t,e)}s(Gb,"ExtendsCheck");f();f();f();function AIt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=ZP(t[a],e,r,n,$s(i));return o}s(AIt,"FromProperties");function yIt(t,e,r,n,i){return AIt(t.properties,e,r,n,i)}s(yIt,"FromMappedResult");function TDe(t,e,r,n,i){let o=yIt(t,e,r,n,i);return xo(o)}s(TDe,"ExtendsFromMappedResult");function CIt(t,e,r,n){let i=Gb(t,e);return i===ct.Union?Mo([r,n]):i===ct.True?r:n}s(CIt,"ExtendsResolve");function ZP(t,e,r,n,i){return js(t)?TDe(t,e,r,n,i):J0(t)?at(wDe(t,e,r,n,i)):at(CIt(t,e,r,n),i)}s(ZP,"Extends");function vIt(t,e,r,n,i){return{[t]:ZP(ro(t),e,r,n,$s(i))}}s(vIt,"FromPropertyKey");function EIt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...vIt(a,e,r,n,i)}),{})}s(EIt,"FromPropertyKeys");function xIt(t,e,r,n,i){return EIt(t.keys,e,r,n,i)}s(xIt,"FromMappedKey");function wDe(t,e,r,n,i){let o=xIt(t,e,r,n,i);return xo(o)}s(wDe,"ExtendsFromMappedKey");f();function bIt(t){return t.allOf.every(e=>gv(e))}s(bIt,"Intersect");function IIt(t){return t.anyOf.some(e=>gv(e))}s(IIt,"Union");function TIt(t){return!gv(t.not)}s(TIt,"Not");function gv(t){return t[ot]==="Intersect"?bIt(t):t[ot]==="Union"?IIt(t):t[ot]==="Not"?TIt(t):t[ot]==="Undefined"}s(gv,"ExtendsUndefinedCheck");f();function SDe(t,e){return e4(a_(t),e)}s(SDe,"ExcludeFromTemplateLiteral");function wIt(t,e){let r=t.filter(n=>Gb(n,e)===ct.False);return r.length===1?r[0]:Mo(r)}s(wIt,"ExcludeRest");function e4(t,e,r={}){return X0(t)?at(SDe(t,e),r):js(t)?at(_De(t,e),r):at(go(t)?wIt(t.anyOf,e):Gb(t,e)!==ct.False?gi():t,r)}s(e4,"Exclude");function SIt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=e4(t[n],e);return r}s(SIt,"FromProperties");function _It(t,e){return SIt(t.properties,e)}s(_It,"FromMappedResult");function _De(t,e){let r=_It(t,e);return xo(r)}s(_De,"ExcludeFromMappedResult");f();f();f();function RDe(t,e){return t4(a_(t),e)}s(RDe,"ExtractFromTemplateLiteral");function RIt(t,e){let r=t.filter(n=>Gb(n,e)!==ct.False);return r.length===1?r[0]:Mo(r)}s(RIt,"ExtractRest");function t4(t,e,r){return X0(t)?at(RDe(t,e),r):js(t)?at(kDe(t,e),r):at(go(t)?RIt(t.anyOf,e):Gb(t,e)!==ct.False?t:gi(),r)}s(t4,"Extract");function kIt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=t4(t[n],e);return r}s(kIt,"FromProperties");function PIt(t,e){return kIt(t.properties,e)}s(PIt,"FromMappedResult");function kDe(t,e){let r=PIt(t,e);return xo(r)}s(kDe,"ExtractFromMappedResult");f();function PDe(t,e){return Rg(t)?at(t.returns,e):gi(e)}s(PDe,"InstanceType");f();f();function dW(t){return qf(cd(t))}s(dW,"ReadonlyOptional");f();function c_(t,e,r){return at({[ot]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(c_,"RecordCreateFromPattern");function kue(t,e,r){let n={};for(let i of t)n[i]=e;return Fo(n,{...r,[vm]:"Record"})}s(kue,"RecordCreateFromKeys");function DIt(t,e,r){return J$(t)?kue(Uf(t),e,r):c_(t.pattern,e,r)}s(DIt,"FromTemplateLiteralKey");function BIt(t,e,r){return kue(Uf(Mo(t)),e,r)}s(BIt,"FromUnionKey");function NIt(t,e,r){return kue([t.toString()],e,r)}s(NIt,"FromLiteralKey");function LIt(t,e,r){return c_(t.source,e,r)}s(LIt,"FromRegExpKey");function MIt(t,e,r){let n=vc(t.pattern)?My:t.pattern;return c_(n,e,r)}s(MIt,"FromStringKey");function FIt(t,e,r){return c_(My,e,r)}s(FIt,"FromAnyKey");function OIt(t,e,r){return c_(U4e,e,r)}s(OIt,"FromNeverKey");function QIt(t,e,r){return Fo({true:e,false:e},r)}s(QIt,"FromBooleanKey");function UIt(t,e,r){return c_(Ly,e,r)}s(UIt,"FromIntegerKey");function qIt(t,e,r){return c_(Ly,e,r)}s(qIt,"FromNumberKey");function fW(t,e,r={}){return go(t)?BIt(t.anyOf,e,r):X0(t)?DIt(t,e,r):K0(t)?NIt(t.const,e,r):uv(t)?QIt(t,e,r):Pg(t)?UIt(t,e,r):Dg(t)?qIt(t,e,r):lue(t)?LIt(t,e,r):dv(t)?MIt(t,e,r):aue(t)?FIt(t,e,r):Hb(t)?OIt(t,e,r):gi(r)}s(fW,"Record");function pW(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(pW,"RecordPattern");function DDe(t){let e=pW(t);return e===My?zd():e===Ly?Em():zd({pattern:e})}s(DDe,"RecordKey");function mW(t){return t.patternProperties[pW(t)]}s(mW,"RecordValue");function HIt(t,e){return e.parameters=MM(t,e.parameters),e.returns=Lg(t,e.returns),e}s(HIt,"FromConstructor");function $It(t,e){return e.parameters=MM(t,e.parameters),e.returns=Lg(t,e.returns),e}s($It,"FromFunction");function WIt(t,e){return e.allOf=MM(t,e.allOf),e}s(WIt,"FromIntersect");function jIt(t,e){return e.anyOf=MM(t,e.anyOf),e}s(jIt,"FromUnion");function GIt(t,e){return vc(e.items)||(e.items=MM(t,e.items)),e}s(GIt,"FromTuple");function VIt(t,e){return e.items=Lg(t,e.items),e}s(VIt,"FromArray");function zIt(t,e){return e.items=Lg(t,e.items),e}s(zIt,"FromAsyncIterator");function YIt(t,e){return e.items=Lg(t,e.items),e}s(YIt,"FromIterator");function KIt(t,e){return e.item=Lg(t,e.item),e}s(KIt,"FromPromise");function JIt(t,e){let r=tTt(t,e.properties);return{...e,...Fo(r)}}s(JIt,"FromObject");function XIt(t,e){let r=Lg(t,DDe(e)),n=Lg(t,mW(e)),i=fW(r,n);return{...e,...i}}s(XIt,"FromRecord");function ZIt(t,e){return e.index in t?t[e.index]:Ng()}s(ZIt,"FromArgument");function eTt(t,e){let r=QP(e),n=Qf(e),i=Lg(t,e);return r&&n?dW(i):r&&!n?qf(i):!r&&n?cd(i):i}s(eTt,"FromProperty");function tTt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:eTt(t,e[n])}),{})}s(tTt,"FromProperties");function MM(t,e){return e.map(r=>Lg(t,r))}s(MM,"FromTypes");function Lg(t,e){return Rg(e)?HIt(t,e):kg(e)?$It(t,e):Ba(e)?WIt(t,e):go(e)?jIt(t,e):Z0(e)?GIt(t,e):Sg(e)?VIt(t,e):t_(e)?zIt(t,e):n_(e)?YIt(t,e):i_(e)?KIt(t,e):Ec(e)?JIt(t,e):o_(e)?XIt(t,e):cue(e)?ZIt(t,e):e}s(Lg,"FromType");function BDe(t,e){return Lg(e,FP(t))}s(BDe,"Instantiate");f();function NDe(t){return at({[ot]:"Integer",type:"integer"},t)}s(NDe,"Integer");f();f();f();function rTt(t,e,r){return{[t]:Mg(ro(t),e,$s(r))}}s(rTt,"MappedIntrinsicPropertyKey");function nTt(t,e,r){return t.reduce((i,o)=>({...i,...rTt(o,e,r)}),{})}s(nTt,"MappedIntrinsicPropertyKeys");function iTt(t,e,r){return nTt(t.keys,e,r)}s(iTt,"MappedIntrinsicProperties");function LDe(t,e,r){let n=iTt(t,e,r);return xo(n)}s(LDe,"IntrinsicFromMappedKey");function oTt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(oTt,"ApplyUncapitalize");function sTt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(sTt,"ApplyCapitalize");function aTt(t){return t.toUpperCase()}s(aTt,"ApplyUppercase");function cTt(t){return t.toLowerCase()}s(cTt,"ApplyLowercase");function lTt(t,e,r){let n=GP(t.pattern);if(!s_(n))return{...t,pattern:MDe(t.pattern,e)};let a=[...DM(n)].map(u=>ro(u)),c=FDe(a,e),l=Mo(c);return Z$([l],r)}s(lTt,"FromTemplateLiteral");function MDe(t,e){return typeof t=="string"?e==="Uncapitalize"?oTt(t):e==="Capitalize"?sTt(t):e==="Uppercase"?aTt(t):e==="Lowercase"?cTt(t):t:t.toString()}s(MDe,"FromLiteralValue");function FDe(t,e){return t.map(r=>Mg(r,e))}s(FDe,"FromRest");function Mg(t,e,r={}){return J0(t)?LDe(t,e,r):X0(t)?lTt(t,e,r):go(t)?Mo(FDe(t.anyOf,e),r):K0(t)?ro(MDe(t.const,e),r):at(t,r)}s(Mg,"Intrinsic");function ODe(t,e={}){return Mg(t,"Capitalize",e)}s(ODe,"Capitalize");f();function QDe(t,e={}){return Mg(t,"Lowercase",e)}s(QDe,"Lowercase");f();function UDe(t,e={}){return Mg(t,"Uncapitalize",e)}s(UDe,"Uncapitalize");f();function qDe(t,e={}){return Mg(t,"Uppercase",e)}s(qDe,"Uppercase");f();f();f();f();f();function uTt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Vb(t[i],e,$s(r));return n}s(uTt,"FromProperties");function dTt(t,e,r){return uTt(t.properties,e,r)}s(dTt,"FromMappedResult");function HDe(t,e,r){let n=dTt(t,e,r);return xo(n)}s(HDe,"OmitFromMappedResult");function fTt(t,e){return t.map(r=>Pue(r,e))}s(fTt,"FromIntersect");function pTt(t,e){return t.map(r=>Pue(r,e))}s(pTt,"FromUnion");function mTt(t,e){let{[e]:r,...n}=t;return n}s(mTt,"FromProperty");function hTt(t,e){return e.reduce((r,n)=>mTt(r,n),t)}s(hTt,"FromProperties");function gTt(t,e){let r=Na(t,[Aa,"$id","required","properties"]),n=hTt(t.properties,e);return Fo(n,r)}s(gTt,"FromObject");function ATt(t){let e=t.reduce((r,n)=>z$(n)?[...r,ro(n)]:r,[]);return Mo(e)}s(ATt,"UnionFromPropertyKeys");function Pue(t,e){return Ba(t)?ld(fTt(t.allOf,e)):go(t)?Mo(pTt(t.anyOf,e)):Ec(t)?gTt(t,e):Fo({})}s(Pue,"OmitResolve");function Vb(t,e,r){let n=Cc(e)?ATt(e):e,i=ya(e)?Uf(e):e,o=Ga(t),a=Ga(e);return js(t)?HDe(t,i,r):J0(e)?$De(t,e,r):o&&a?Rs("Omit",[t,n],r):!o&&a?Rs("Omit",[t,n],r):o&&!a?Rs("Omit",[t,n],r):at({...Pue(t,i),...r})}s(Vb,"Omit");function yTt(t,e,r){return{[e]:Vb(t,[e],$s(r))}}s(yTt,"FromPropertyKey");function CTt(t,e,r){return e.reduce((n,i)=>({...n,...yTt(t,i,r)}),{})}s(CTt,"FromPropertyKeys");function vTt(t,e,r){return CTt(t,e.keys,r)}s(vTt,"FromMappedKey");function $De(t,e,r){let n=vTt(t,e,r);return xo(n)}s($De,"OmitFromMappedKey");f();f();f();function ETt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=zb(t[i],e,$s(r));return n}s(ETt,"FromProperties");function xTt(t,e,r){return ETt(t.properties,e,r)}s(xTt,"FromMappedResult");function WDe(t,e,r){let n=xTt(t,e,r);return xo(n)}s(WDe,"PickFromMappedResult");function bTt(t,e){return t.map(r=>Due(r,e))}s(bTt,"FromIntersect");function ITt(t,e){return t.map(r=>Due(r,e))}s(ITt,"FromUnion");function TTt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(TTt,"FromProperties");function wTt(t,e){let r=Na(t,[Aa,"$id","required","properties"]),n=TTt(t.properties,e);return Fo(n,r)}s(wTt,"FromObject");function STt(t){let e=t.reduce((r,n)=>z$(n)?[...r,ro(n)]:r,[]);return Mo(e)}s(STt,"UnionFromPropertyKeys");function Due(t,e){return Ba(t)?ld(bTt(t.allOf,e)):go(t)?Mo(ITt(t.anyOf,e)):Ec(t)?wTt(t,e):Fo({})}s(Due,"PickResolve");function zb(t,e,r){let n=Cc(e)?STt(e):e,i=ya(e)?Uf(e):e,o=Ga(t),a=Ga(e);return js(t)?WDe(t,i,r):J0(e)?jDe(t,e,r):o&&a?Rs("Pick",[t,n],r):!o&&a?Rs("Pick",[t,n],r):o&&!a?Rs("Pick",[t,n],r):at({...Due(t,i),...r})}s(zb,"Pick");function _Tt(t,e,r){return{[e]:zb(t,[e],$s(r))}}s(_Tt,"FromPropertyKey");function RTt(t,e,r){return e.reduce((n,i)=>({...n,..._Tt(t,i,r)}),{})}s(RTt,"FromPropertyKeys");function kTt(t,e,r){return RTt(t,e.keys,r)}s(kTt,"FromMappedKey");function jDe(t,e,r){let n=kTt(t,e,r);return xo(n)}s(jDe,"PickFromMappedKey");f();f();function PTt(t,e){return Rs("Partial",[Rs(t,e)])}s(PTt,"FromComputed");function DTt(t){return Rs("Partial",[Im(t)])}s(DTt,"FromRef");function BTt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=cd(t[r]);return e}s(BTt,"FromProperties");function NTt(t){let e=Na(t,[Aa,"$id","required","properties"]),r=BTt(t.properties);return Fo(r,e)}s(NTt,"FromObject");function GDe(t){return t.map(e=>VDe(e))}s(GDe,"FromRest");function VDe(t){return _g(t)?PTt(t.target,t.parameters):Ga(t)?DTt(t.$ref):Ba(t)?ld(GDe(t.allOf)):go(t)?Mo(GDe(t.anyOf)):Ec(t)?NTt(t):r_(t)||uv(t)||Pg(t)||K0(t)||TM(t)||Dg(t)||dv(t)||wM(t)||fv(t)?t:Fo({})}s(VDe,"PartialResolve");function r4(t,e){return js(t)?zDe(t,e):at({...VDe(t),...e})}s(r4,"Partial");function LTt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=r4(t[n],$s(e));return r}s(LTt,"FromProperties");function MTt(t,e){return LTt(t.properties,e)}s(MTt,"FromMappedResult");function zDe(t,e){let r=MTt(t,e);return xo(r)}s(zDe,"PartialFromMappedResult");f();f();function FTt(t,e){return Rs("Required",[Rs(t,e)])}s(FTt,"FromComputed");function OTt(t){return Rs("Required",[Im(t)])}s(OTt,"FromRef");function QTt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Na(t[r],[bu]);return e}s(QTt,"FromProperties");function UTt(t){let e=Na(t,[Aa,"$id","required","properties"]),r=QTt(t.properties);return Fo(r,e)}s(UTt,"FromObject");function YDe(t){return t.map(e=>KDe(e))}s(YDe,"FromRest");function KDe(t){return _g(t)?FTt(t.target,t.parameters):Ga(t)?OTt(t.$ref):Ba(t)?ld(YDe(t.allOf)):go(t)?Mo(YDe(t.anyOf)):Ec(t)?UTt(t):r_(t)||uv(t)||Pg(t)||K0(t)||TM(t)||Dg(t)||dv(t)||wM(t)||fv(t)?t:Fo({})}s(KDe,"RequiredResolve");function n4(t,e){return js(t)?JDe(t,e):at({...KDe(t),...e})}s(n4,"Required");function qTt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=n4(t[n],e);return r}s(qTt,"FromProperties");function HTt(t,e){return qTt(t.properties,e)}s(HTt,"FromMappedResult");function JDe(t,e){let r=HTt(t,e);return xo(r)}s(JDe,"RequiredFromMappedResult");function $Tt(t,e){return e.map(r=>Ga(r)?Bue(t,r.$ref):ep(t,r))}s($Tt,"DereferenceParameters");function Bue(t,e){return e in t?Ga(t[e])?Bue(t,t[e].$ref):ep(t,t[e]):gi()}s(Bue,"Dereference");function WTt(t){return KP(t[0])}s(WTt,"FromAwaited");function jTt(t){return jb(t[0],t[1])}s(jTt,"FromIndex");function GTt(t){return JP(t[0])}s(GTt,"FromKeyOf");function VTt(t){return r4(t[0])}s(VTt,"FromPartial");function zTt(t){return Vb(t[0],t[1])}s(zTt,"FromOmit");function YTt(t){return zb(t[0],t[1])}s(YTt,"FromPick");function KTt(t){return n4(t[0])}s(KTt,"FromRequired");function JTt(t,e,r){let n=$Tt(t,r);return e==="Awaited"?WTt(n):e==="Index"?jTt(n):e==="KeyOf"?GTt(n):e==="Partial"?VTt(n):e==="Omit"?zTt(n):e==="Pick"?YTt(n):e==="Required"?KTt(n):gi()}s(JTt,"FromComputed");function XTt(t,e){return HP(ep(t,e))}s(XTt,"FromArray");function ZTt(t,e){return $P(ep(t,e))}s(ZTt,"FromAsyncIterator");function ewt(t,e,r){return WP(FM(t,e),ep(t,r))}s(ewt,"FromConstructor");function twt(t,e,r){return Fy(FM(t,e),ep(t,r))}s(twt,"FromFunction");function rwt(t,e){return ld(FM(t,e))}s(rwt,"FromIntersect");function nwt(t,e){return YP(ep(t,e))}s(nwt,"FromIterator");function iwt(t,e){return Fo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:ep(t,e[n])}),{}))}s(iwt,"FromObject");function owt(t,e){let[r,n]=[ep(t,mW(e)),pW(e)],i=FP(e);return i.patternProperties[n]=r,i}s(owt,"FromRecord");function swt(t,e){return Ga(e)?{...Bue(t,e.$ref),[Aa]:e[Aa]}:e}s(swt,"FromTransform");function awt(t,e){return xm(FM(t,e))}s(awt,"FromTuple");function cwt(t,e){return Mo(FM(t,e))}s(cwt,"FromUnion");function FM(t,e){return e.map(r=>ep(t,r))}s(FM,"FromTypes");function ep(t,e){return Qf(e)?at(ep(t,Na(e,[bu])),e):QP(e)?at(ep(t,Na(e,[wg])),e):Lo(e)?at(swt(t,e),e):Sg(e)?at(XTt(t,e.items),e):t_(e)?at(ZTt(t,e.items),e):_g(e)?at(JTt(t,e.target,e.parameters)):Rg(e)?at(ewt(t,e.parameters,e.returns),e):kg(e)?at(twt(t,e.parameters,e.returns),e):Ba(e)?at(rwt(t,e.allOf),e):n_(e)?at(nwt(t,e.items),e):Ec(e)?at(iwt(t,e.properties),e):o_(e)?at(owt(t,e)):Z0(e)?at(awt(t,e.items||[]),e):go(e)?at(cwt(t,e.anyOf),e):e}s(ep,"FromType");function lwt(t,e){return e in t?ep(t,t[e]):gi()}s(lwt,"ComputeType");function XDe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:lwt(t,r)}),{})}s(XDe,"ComputeModuleProperties");var Nue=class{static{s(this,"TModule")}constructor(e){let r=XDe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:at(this.$defs[e],r)};return at({[ot]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function ZDe(t){return new Nue(t)}s(ZDe,"Module");f();function e3e(t,e){return at({[ot]:"Not",not:t},e)}s(e3e,"Not");f();function t3e(t,e){return kg(t)?xm(t.parameters,e):gi()}s(t3e,"Parameters");f();var uwt=0;function r3e(t,e={}){vc(e.$id)&&(e.$id=`T${uwt++}`);let r=FP(t({[ot]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,at({[vm]:"Recursive",...r},e)}s(r3e,"Recursive");f();function n3e(t,e){let r=Cs(t)?new globalThis.RegExp(t):t;return at({[ot]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(n3e,"RegExp");f();function dwt(t){return Ba(t)?t.allOf:go(t)?t.anyOf:Z0(t)?t.items??[]:[]}s(dwt,"RestResolve");function i3e(t){return dwt(t)}s(i3e,"Rest");f();function o3e(t,e){return kg(t)?at(t.returns,e):gi(e)}s(o3e,"ReturnType");f();var Lue=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new Mue(this.schema,e)}},Mue=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Aa].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Aa].Decode(a)),"Decode")};return{...r,[Aa]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Aa]:n}}Encode(e){return Lo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function s3e(t){return new Lue(t)}s(s3e,"Transform");f();function a3e(t={}){return at({[ot]:t[ot]??"Unsafe"},t)}s(a3e,"Unsafe");f();function c3e(t){return at({[ot]:"Void",type:"void"},t)}s(c3e,"Void");f();var Fue={};ma(Fue,{Any:()=>Wb,Argument:()=>j4e,Array:()=>HP,AsyncIterator:()=>$P,Awaited:()=>KP,BigInt:()=>zP,Boolean:()=>X$,Capitalize:()=>ODe,Composite:()=>uDe,Const:()=>dDe,Constructor:()=>WP,ConstructorParameters:()=>fDe,Date:()=>nW,Enum:()=>pDe,Exclude:()=>e4,Extends:()=>ZP,Extract:()=>t4,Function:()=>Fy,Index:()=>jb,InstanceType:()=>PDe,Instantiate:()=>BDe,Integer:()=>NDe,Intersect:()=>ld,Iterator:()=>YP,KeyOf:()=>JP,Literal:()=>ro,Lowercase:()=>QDe,Mapped:()=>iDe,Module:()=>ZDe,Never:()=>gi,Not:()=>e3e,Null:()=>iW,Number:()=>Em,Object:()=>Fo,Omit:()=>Vb,Optional:()=>cd,Parameters:()=>t3e,Partial:()=>r4,Pick:()=>zb,Promise:()=>tW,Readonly:()=>qf,ReadonlyOptional:()=>dW,Record:()=>fW,Recursive:()=>r3e,Ref:()=>Im,RegExp:()=>n3e,Required:()=>n4,Rest:()=>i3e,ReturnType:()=>o3e,String:()=>zd,Symbol:()=>oW,TemplateLiteral:()=>Z$,Transform:()=>s3e,Tuple:()=>xm,Uint8Array:()=>aW,Uncapitalize:()=>UDe,Undefined:()=>sW,Union:()=>Mo,Unknown:()=>Ng,Unsafe:()=>a3e,Uppercase:()=>qDe,Void:()=>c3e});f();var E=Fue;f();f();function fwt(t){switch(t.errorType){case nt.ArrayContains:return"Expected array to contain at least one matching value";case nt.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case nt.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case nt.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case nt.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case nt.ArrayUniqueItems:return"Expected array elements to be unique";case nt.Array:return"Expected array";case nt.AsyncIterator:return"Expected AsyncIterator";case nt.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case nt.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case nt.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case nt.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case nt.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case nt.BigInt:return"Expected bigint";case nt.Boolean:return"Expected boolean";case nt.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case nt.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case nt.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case nt.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case nt.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case nt.Date:return"Expected Date";case nt.Function:return"Expected function";case nt.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case nt.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case nt.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case nt.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case nt.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case nt.Integer:return"Expected integer";case nt.IntersectUnevaluatedProperties:return"Unexpected property";case nt.Intersect:return"Expected all values to match";case nt.Iterator:return"Expected Iterator";case nt.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case nt.Never:return"Never";case nt.Not:return"Value should not match";case nt.Null:return"Expected null";case nt.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case nt.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case nt.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case nt.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case nt.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case nt.Number:return"Expected number";case nt.Object:return"Expected object";case nt.ObjectAdditionalProperties:return"Unexpected property";case nt.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case nt.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case nt.ObjectRequiredProperty:return"Expected required property";case nt.Promise:return"Expected Promise";case nt.RegExp:return"Expected string to match regular expression";case nt.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case nt.StringFormat:return`Expected string to match '${t.schema.format}' format`;case nt.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case nt.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case nt.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case nt.String:return"Expected string";case nt.Symbol:return"Expected symbol";case nt.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case nt.Tuple:return"Expected tuple";case nt.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case nt.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case nt.Uint8Array:return"Expected Uint8Array";case nt.Undefined:return"Expected undefined";case nt.Union:return"Expected union value";case nt.Void:return"Expected void";case nt.Kind:return`Expected kind '${t.schema[ot]}'`;default:return"Unknown error type"}}s(fwt,"DefaultErrorFunction");var pwt=fwt;function l3e(){return pwt}s(l3e,"GetErrorFunction");f();var Oue=class extends Rn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function mwt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new Oue(t);return bo(r,e)}s(mwt,"Resolve");function Ul(t,e){return!ho(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Ul,"Pushref");function bo(t,e){return t[ot]==="This"||t[ot]==="Ref"?mwt(t,e):t}s(bo,"Deref");f();var Que=class extends Rn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},tp;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(tp||(tp={}));var i4=BigInt("14695981039346656037"),[hwt,gwt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Awt=Array.from({length:256}).map((t,e)=>BigInt(e)),u3e=new Float64Array(1),d3e=new DataView(u3e.buffer),f3e=new Uint8Array(u3e.buffer);function*ywt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(ywt,"NumberToBytes");function Cwt(t){dd(tp.Array);for(let e of t)o4(e)}s(Cwt,"ArrayType");function vwt(t){dd(tp.Boolean),dd(t?1:0)}s(vwt,"BooleanType");function Ewt(t){dd(tp.BigInt),d3e.setBigInt64(0,t);for(let e of f3e)dd(e)}s(Ewt,"BigIntType");function xwt(t){dd(tp.Date),o4(t.getTime())}s(xwt,"DateType");function bwt(t){dd(tp.Null)}s(bwt,"NullType");function Iwt(t){dd(tp.Number),d3e.setFloat64(0,t);for(let e of f3e)dd(e)}s(Iwt,"NumberType");function Twt(t){dd(tp.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())o4(e),o4(t[e])}s(Twt,"ObjectType");function wwt(t){dd(tp.String);for(let e=0;e<t.length;e++)for(let r of ywt(t.charCodeAt(e)))dd(r)}s(wwt,"StringType");function Swt(t){dd(tp.Symbol),o4(t.description)}s(Swt,"SymbolType");function _wt(t){dd(tp.Uint8Array);for(let e=0;e<t.length;e++)dd(t[e])}s(_wt,"Uint8ArrayType");function Rwt(t){return dd(tp.Undefined)}s(Rwt,"UndefinedType");function o4(t){if(_n(t))return Cwt(t);if(Ny(t))return vwt(t);if(xu(t))return Ewt(t);if(Gd(t))return xwt(t);if(cv(t))return bwt(t);if(on(t))return Iwt(t);if(xi(t))return Twt(t);if(ho(t))return wwt(t);if(lv(t))return Swt(t);if(OP(t))return _wt(t);if(Ws(t))return Rwt(t);throw new Que(t)}s(o4,"Visit");function dd(t){i4=i4^Awt[t],i4=i4*hwt%gwt}s(dd,"FNV1A64");function Yb(t){return i4=BigInt("14695981039346656037"),o4(t),i4}s(Yb,"Hash");f();var Uue=class extends Rn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function kwt(t){return t[ot]==="Any"||t[ot]==="Unknown"}s(kwt,"IsAnyOrUnknown");function Ui(t){return t!==void 0}s(Ui,"IsDefined");function Pwt(t,e,r){return!0}s(Pwt,"FromAny");function Dwt(t,e,r){return!0}s(Dwt,"FromArgument");function Bwt(t,e,r){if(!_n(r)||Ui(t.minItems)&&!(r.length>=t.minItems)||Ui(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>ql(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=Yb(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Ui(t.contains)||on(t.minContains)||on(t.maxContains)))return!0;let n=Ui(t.contains)?t.contains:gi(),i=r.reduce((o,a)=>ql(n,e,a)?o+1:o,0);return!(i===0||on(t.minContains)&&i<t.minContains||on(t.maxContains)&&i>t.maxContains)}s(Bwt,"FromArray");function Nwt(t,e,r){return W$(r)}s(Nwt,"FromAsyncIterator");function Lwt(t,e,r){return!(!xu(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(Lwt,"FromBigInt");function Mwt(t,e,r){return Ny(r)}s(Mwt,"FromBoolean");function Fwt(t,e,r){return ql(t.returns,e,r.prototype)}s(Fwt,"FromConstructor");function Owt(t,e,r){return!(!Gd(r)||Ui(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Ui(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Ui(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Ui(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Ui(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(Owt,"FromDate");function Qwt(t,e,r){return qb(r)}s(Qwt,"FromFunction");function Uwt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return ql(i,[...e,...n],r)}s(Uwt,"FromImport");function qwt(t,e,r){return!(!V$(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.multipleOf)&&r%t.multipleOf!==0)}s(qwt,"FromInteger");function Hwt(t,e,r){let n=t.allOf.every(i=>ql(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(hv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(ya(t.unevaluatedProperties)){let i=new RegExp(hv(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||ql(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(Hwt,"FromIntersect");function $wt(t,e,r){return j$(r)}s($wt,"FromIterator");function Wwt(t,e,r){return r===t.const}s(Wwt,"FromLiteral");function jwt(t,e,r){return!1}s(jwt,"FromNever");function Gwt(t,e,r){return!ql(t.not,e,r)}s(Gwt,"FromNot");function Vwt(t,e,r){return cv(r)}s(Vwt,"FromNull");function zwt(t,e,r){return!(!_s.IsNumberLike(r)||Ui(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ui(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ui(t.minimum)&&!(r>=t.minimum)||Ui(t.maximum)&&!(r<=t.maximum)||Ui(t.multipleOf)&&r%t.multipleOf!==0)}s(zwt,"FromNumber");function Ywt(t,e,r){if(!_s.IsObjectLike(r)||Ui(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ui(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!ql(o,e,r[i])||(gv(o)||kwt(o))&&!(i in r))return!1}else if(_s.IsExactOptionalProperty(r,i)&&!ql(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||ql(t.additionalProperties,e,r[o])):!0}s(Ywt,"FromObject");function Kwt(t,e,r){return G$(r)}s(Kwt,"FromPromise");function Jwt(t,e,r){if(!_s.IsRecordLike(r)||Ui(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ui(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,d])=>o.test(u)?ql(i,e,d):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>o.test(u)?!0:ql(t.additionalProperties,e,d)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(Jwt,"FromRecord");function Xwt(t,e,r){return ql(bo(t,e),e,r)}s(Xwt,"FromRef");function Zwt(t,e,r){let n=new RegExp(t.source,t.flags);return Ui(t.minLength)&&!(r.length>=t.minLength)||Ui(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(Zwt,"FromRegExp");function eSt(t,e,r){return!ho(r)||Ui(t.minLength)&&!(r.length>=t.minLength)||Ui(t.maxLength)&&!(r.length<=t.maxLength)||Ui(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Ui(t.format)?Bg.Has(t.format)?Bg.Get(t.format)(r):!1:!0}s(eSt,"FromString");function tSt(t,e,r){return lv(r)}s(tSt,"FromSymbol");function rSt(t,e,r){return ho(r)&&new RegExp(t.pattern).test(r)}s(rSt,"FromTemplateLiteral");function nSt(t,e,r){return ql(bo(t,e),e,r)}s(nSt,"FromThis");function iSt(t,e,r){if(!_n(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!ql(t.items[n],e,r[n]))return!1;return!0}s(iSt,"FromTuple");function oSt(t,e,r){return Ws(r)}s(oSt,"FromUndefined");function sSt(t,e,r){return t.anyOf.some(n=>ql(n,e,r))}s(sSt,"FromUnion");function aSt(t,e,r){return!(!OP(r)||Ui(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Ui(t.minByteLength)&&!(r.length>=t.minByteLength))}s(aSt,"FromUint8Array");function cSt(t,e,r){return!0}s(cSt,"FromUnknown");function lSt(t,e,r){return _s.IsVoidLike(r)}s(lSt,"FromVoid");function uSt(t,e,r){return Vd.Has(t[ot])?Vd.Get(t[ot])(t,r):!1}s(uSt,"FromKind");function ql(t,e,r){let n=Ui(t.$id)?Ul(t,e):e,i=t;switch(i[ot]){case"Any":return Pwt(i,n,r);case"Argument":return Dwt(i,n,r);case"Array":return Bwt(i,n,r);case"AsyncIterator":return Nwt(i,n,r);case"BigInt":return Lwt(i,n,r);case"Boolean":return Mwt(i,n,r);case"Constructor":return Fwt(i,n,r);case"Date":return Owt(i,n,r);case"Function":return Qwt(i,n,r);case"Import":return Uwt(i,n,r);case"Integer":return qwt(i,n,r);case"Intersect":return Hwt(i,n,r);case"Iterator":return $wt(i,n,r);case"Literal":return Wwt(i,n,r);case"Never":return jwt(i,n,r);case"Not":return Gwt(i,n,r);case"Null":return Vwt(i,n,r);case"Number":return zwt(i,n,r);case"Object":return Ywt(i,n,r);case"Promise":return Kwt(i,n,r);case"Record":return Jwt(i,n,r);case"Ref":return Xwt(i,n,r);case"RegExp":return Zwt(i,n,r);case"String":return eSt(i,n,r);case"Symbol":return tSt(i,n,r);case"TemplateLiteral":return rSt(i,n,r);case"This":return nSt(i,n,r);case"Tuple":return iSt(i,n,r);case"Undefined":return oSt(i,n,r);case"Union":return sSt(i,n,r);case"Uint8Array":return aSt(i,n,r);case"Unknown":return cSt(i,n,r);case"Void":return lSt(i,n,r);default:if(!Vd.Has(i[ot]))throw new Uue(i);return uSt(i,n,r)}}s(ql,"Visit");function Ti(...t){return t.length===3?ql(t[0],t[1],t[2]):ql(t[0],[],t[1])}s(Ti,"Check");var nt;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(nt||(nt={}));var que=class extends Rn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function Av(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(Av,"EscapeKey");function qi(t){return t!==void 0}s(qi,"IsDefined");var Kb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function dr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:l3e()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(dr,"Create");function*dSt(t,e,r,n){}s(dSt,"FromAny");function*fSt(t,e,r,n){}s(fSt,"FromArgument");function*pSt(t,e,r,n){if(!_n(n))return yield dr(nt.Array,t,r,n);qi(t.minItems)&&!(n.length>=t.minItems)&&(yield dr(nt.ArrayMinItems,t,r,n)),qi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield dr(nt.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Hl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=Yb(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield dr(nt.ArrayUniqueItems,t,r,n)),!(qi(t.contains)||qi(t.minContains)||qi(t.maxContains)))return;let i=qi(t.contains)?t.contains:gi(),o=n.reduce((a,c,l)=>Hl(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield dr(nt.ArrayContains,t,r,n)),on(t.minContains)&&o<t.minContains&&(yield dr(nt.ArrayMinContains,t,r,n)),on(t.maxContains)&&o>t.maxContains&&(yield dr(nt.ArrayMaxContains,t,r,n))}s(pSt,"FromArray");function*mSt(t,e,r,n){W$(n)||(yield dr(nt.AsyncIterator,t,r,n))}s(mSt,"FromAsyncIterator");function*hSt(t,e,r,n){if(!xu(n))return yield dr(nt.BigInt,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield dr(nt.BigIntExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield dr(nt.BigIntExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield dr(nt.BigIntMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield dr(nt.BigIntMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield dr(nt.BigIntMultipleOf,t,r,n))}s(hSt,"FromBigInt");function*gSt(t,e,r,n){Ny(n)||(yield dr(nt.Boolean,t,r,n))}s(gSt,"FromBoolean");function*ASt(t,e,r,n){yield*Hl(t.returns,e,r,n.prototype)}s(ASt,"FromConstructor");function*ySt(t,e,r,n){if(!Gd(n))return yield dr(nt.Date,t,r,n);qi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield dr(nt.DateExclusiveMaximumTimestamp,t,r,n)),qi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield dr(nt.DateExclusiveMinimumTimestamp,t,r,n)),qi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield dr(nt.DateMaximumTimestamp,t,r,n)),qi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield dr(nt.DateMinimumTimestamp,t,r,n)),qi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield dr(nt.DateMultipleOfTimestamp,t,r,n))}s(ySt,"FromDate");function*CSt(t,e,r,n){qb(n)||(yield dr(nt.Function,t,r,n))}s(CSt,"FromFunction");function*vSt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Hl(o,[...e,...i],r,n)}s(vSt,"FromImport");function*ESt(t,e,r,n){if(!V$(n))return yield dr(nt.Integer,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield dr(nt.IntegerExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield dr(nt.IntegerExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield dr(nt.IntegerMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield dr(nt.IntegerMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield dr(nt.IntegerMultipleOf,t,r,n))}s(ESt,"FromInteger");function*xSt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Hl(o,e,r,n))i=!0,yield a;if(i)return yield dr(nt.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(hv(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield dr(nt.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(hv(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Hl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(xSt,"FromIntersect");function*bSt(t,e,r,n){j$(n)||(yield dr(nt.Iterator,t,r,n))}s(bSt,"FromIterator");function*ISt(t,e,r,n){n!==t.const&&(yield dr(nt.Literal,t,r,n))}s(ISt,"FromLiteral");function*TSt(t,e,r,n){yield dr(nt.Never,t,r,n)}s(TSt,"FromNever");function*wSt(t,e,r,n){Hl(t.not,e,r,n).next().done===!0&&(yield dr(nt.Not,t,r,n))}s(wSt,"FromNot");function*SSt(t,e,r,n){cv(n)||(yield dr(nt.Null,t,r,n))}s(SSt,"FromNull");function*_St(t,e,r,n){if(!_s.IsNumberLike(n))return yield dr(nt.Number,t,r,n);qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield dr(nt.NumberExclusiveMaximum,t,r,n)),qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield dr(nt.NumberExclusiveMinimum,t,r,n)),qi(t.maximum)&&!(n<=t.maximum)&&(yield dr(nt.NumberMaximum,t,r,n)),qi(t.minimum)&&!(n>=t.minimum)&&(yield dr(nt.NumberMinimum,t,r,n)),qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield dr(nt.NumberMultipleOf,t,r,n))}s(_St,"FromNumber");function*RSt(t,e,r,n){if(!_s.IsObjectLike(n))return yield dr(nt.Object,t,r,n);qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield dr(nt.ObjectMinProperties,t,r,n)),qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield dr(nt.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield dr(nt.ObjectRequiredProperty,t.properties[c],`${r}/${Av(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield dr(nt.ObjectAdditionalProperties,t,`${r}/${Av(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Hl(t.additionalProperties,e,`${r}/${Av(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Hl(l,e,`${r}/${Av(c)}`,n[c]),gv(t)&&!(c in n)&&(yield dr(nt.ObjectRequiredProperty,l,`${r}/${Av(c)}`,void 0))):_s.IsExactOptionalProperty(n,c)&&(yield*Hl(l,e,`${r}/${Av(c)}`,n[c]))}}s(RSt,"FromObject");function*kSt(t,e,r,n){G$(n)||(yield dr(nt.Promise,t,r,n))}s(kSt,"FromPromise");function*PSt(t,e,r,n){if(!_s.IsRecordLike(n))return yield dr(nt.Object,t,r,n);qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield dr(nt.ObjectMinProperties,t,r,n)),qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield dr(nt.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Hl(o,e,`${r}/${Av(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Hl(t.additionalProperties,e,`${r}/${Av(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield dr(nt.ObjectAdditionalProperties,t,`${r}/${Av(c)}`,l)}}s(PSt,"FromRecord");function*DSt(t,e,r,n){yield*Hl(bo(t,e),e,r,n)}s(DSt,"FromRef");function*BSt(t,e,r,n){if(!ho(n))return yield dr(nt.String,t,r,n);if(qi(t.minLength)&&!(n.length>=t.minLength)&&(yield dr(nt.StringMinLength,t,r,n)),qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield dr(nt.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield dr(nt.RegExp,t,r,n)}s(BSt,"FromRegExp");function*NSt(t,e,r,n){if(!ho(n))return yield dr(nt.String,t,r,n);qi(t.minLength)&&!(n.length>=t.minLength)&&(yield dr(nt.StringMinLength,t,r,n)),qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield dr(nt.StringMaxLength,t,r,n)),ho(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield dr(nt.StringPattern,t,r,n))),ho(t.format)&&(Bg.Has(t.format)?Bg.Get(t.format)(n)||(yield dr(nt.StringFormat,t,r,n)):yield dr(nt.StringFormatUnknown,t,r,n))}s(NSt,"FromString");function*LSt(t,e,r,n){lv(n)||(yield dr(nt.Symbol,t,r,n))}s(LSt,"FromSymbol");function*MSt(t,e,r,n){if(!ho(n))return yield dr(nt.String,t,r,n);new RegExp(t.pattern).test(n)||(yield dr(nt.StringPattern,t,r,n))}s(MSt,"FromTemplateLiteral");function*FSt(t,e,r,n){yield*Hl(bo(t,e),e,r,n)}s(FSt,"FromThis");function*OSt(t,e,r,n){if(!_n(n))return yield dr(nt.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield dr(nt.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield dr(nt.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Hl(t.items[i],e,`${r}/${i}`,n[i])}s(OSt,"FromTuple");function*QSt(t,e,r,n){Ws(n)||(yield dr(nt.Undefined,t,r,n))}s(QSt,"FromUndefined");function*USt(t,e,r,n){if(Ti(t,e,n))return;let i=t.anyOf.map(o=>new Kb(Hl(o,e,r,n)));yield dr(nt.Union,t,r,n,i)}s(USt,"FromUnion");function*qSt(t,e,r,n){if(!OP(n))return yield dr(nt.Uint8Array,t,r,n);qi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield dr(nt.Uint8ArrayMaxByteLength,t,r,n)),qi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield dr(nt.Uint8ArrayMinByteLength,t,r,n))}s(qSt,"FromUint8Array");function*HSt(t,e,r,n){}s(HSt,"FromUnknown");function*$St(t,e,r,n){_s.IsVoidLike(n)||(yield dr(nt.Void,t,r,n))}s($St,"FromVoid");function*WSt(t,e,r,n){Vd.Get(t[ot])(t,n)||(yield dr(nt.Kind,t,r,n))}s(WSt,"FromKind");function*Hl(t,e,r,n){let i=qi(t.$id)?[...e,t]:e,o=t;switch(o[ot]){case"Any":return yield*dSt(o,i,r,n);case"Argument":return yield*fSt(o,i,r,n);case"Array":return yield*pSt(o,i,r,n);case"AsyncIterator":return yield*mSt(o,i,r,n);case"BigInt":return yield*hSt(o,i,r,n);case"Boolean":return yield*gSt(o,i,r,n);case"Constructor":return yield*ASt(o,i,r,n);case"Date":return yield*ySt(o,i,r,n);case"Function":return yield*CSt(o,i,r,n);case"Import":return yield*vSt(o,i,r,n);case"Integer":return yield*ESt(o,i,r,n);case"Intersect":return yield*xSt(o,i,r,n);case"Iterator":return yield*bSt(o,i,r,n);case"Literal":return yield*ISt(o,i,r,n);case"Never":return yield*TSt(o,i,r,n);case"Not":return yield*wSt(o,i,r,n);case"Null":return yield*SSt(o,i,r,n);case"Number":return yield*_St(o,i,r,n);case"Object":return yield*RSt(o,i,r,n);case"Promise":return yield*kSt(o,i,r,n);case"Record":return yield*PSt(o,i,r,n);case"Ref":return yield*DSt(o,i,r,n);case"RegExp":return yield*BSt(o,i,r,n);case"String":return yield*NSt(o,i,r,n);case"Symbol":return yield*LSt(o,i,r,n);case"TemplateLiteral":return yield*MSt(o,i,r,n);case"This":return yield*FSt(o,i,r,n);case"Tuple":return yield*OSt(o,i,r,n);case"Undefined":return yield*QSt(o,i,r,n);case"Union":return yield*USt(o,i,r,n);case"Uint8Array":return yield*qSt(o,i,r,n);case"Unknown":return yield*HSt(o,i,r,n);case"Void":return yield*$St(o,i,r,n);default:if(!Vd.Has(o[ot]))throw new que(t);return yield*WSt(o,i,r,n)}}s(Hl,"Visit");function Qy(...t){let e=t.length===3?Hl(t[0],t[1],"",t[2]):Hl(t[0],[],"",t[1]);return new Kb(e)}s(Qy,"Errors");f();f();var s4=class extends Rn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},Hue=class extends Rn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Ca(t,e,r){try{return Lo(t)?t[Aa].Decode(r):r}catch(n){throw new Hue(t,e,r,n)}}s(Ca,"Default");function jSt(t,e,r,n){return _n(n)?Ca(t,r,n.map((i,o)=>Fg(t.items,e,`${r}/${o}`,i))):Ca(t,r,n)}s(jSt,"FromArray");function GSt(t,e,r,n){if(!xi(n)||Y0(n))return Ca(t,r,n);let i=rW(t),o=i.map(d=>d[0]),a={...n};for(let[d,p]of i)d in a&&(a[d]=Fg(p,e,`${r}/${d}`,a[d]));if(!Lo(t.unevaluatedProperties))return Ca(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let d of c)o.includes(d)||(u[d]=Ca(l,`${r}/${d}`,u[d]));return Ca(t,r,u)}s(GSt,"FromIntersect");function VSt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Fg(o,[...e,...i],r,n);return Ca(t,r,a)}s(VSt,"FromImport");function zSt(t,e,r,n){return Ca(t,r,Fg(t.not,e,r,n))}s(zSt,"FromNot");function YSt(t,e,r,n){if(!xi(n))return Ca(t,r,n);let i=Hf(t),o={...n};for(let u of i)Sn(o,u)&&(Ws(o[u])&&(!fv(t.properties[u])||_s.IsExactOptionalProperty(o,u))||(o[u]=Fg(t.properties[u],e,`${r}/${u}`,o[u])));if(!ya(t.additionalProperties))return Ca(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=Ca(c,`${r}/${u}`,l[u]));return Ca(t,r,l)}s(YSt,"FromObject");function KSt(t,e,r,n){if(!xi(n))return Ca(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let d of Object.getOwnPropertyNames(n))o.test(d)&&(a[d]=Fg(t.patternProperties[i],e,`${r}/${d}`,a[d]));if(!ya(t.additionalProperties))return Ca(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)o.test(d)||(u[d]=Ca(l,`${r}/${d}`,u[d]));return Ca(t,r,u)}s(KSt,"FromRecord");function JSt(t,e,r,n){let i=bo(t,e);return Ca(t,r,Fg(i,e,r,n))}s(JSt,"FromRef");function XSt(t,e,r,n){let i=bo(t,e);return Ca(t,r,Fg(i,e,r,n))}s(XSt,"FromThis");function ZSt(t,e,r,n){return _n(n)&&_n(t.items)?Ca(t,r,t.items.map((i,o)=>Fg(i,e,`${r}/${o}`,n[o]))):Ca(t,r,n)}s(ZSt,"FromTuple");function e_t(t,e,r,n){for(let i of t.anyOf){if(!Ti(i,e,n))continue;let o=Fg(i,e,r,n);return Ca(t,r,o)}return Ca(t,r,n)}s(e_t,"FromUnion");function Fg(t,e,r,n){let i=Ul(t,e),o=t;switch(t[ot]){case"Array":return jSt(o,i,r,n);case"Import":return VSt(o,i,r,n);case"Intersect":return GSt(o,i,r,n);case"Not":return zSt(o,i,r,n);case"Object":return YSt(o,i,r,n);case"Record":return KSt(o,i,r,n);case"Ref":return JSt(o,i,r,n);case"Symbol":return Ca(o,r,n);case"This":return XSt(o,i,r,n);case"Tuple":return ZSt(o,i,r,n);case"Union":return e_t(o,i,r,n);default:return Ca(o,r,n)}}s(Fg,"Visit");function a4(t,e,r){return Fg(t,e,"",r)}s(a4,"TransformDecode");f();var c4=class extends Rn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},$ue=class extends Rn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function Iu(t,e,r){try{return Lo(t)?t[Aa].Encode(r):r}catch(n){throw new $ue(t,e,r,n)}}s(Iu,"Default");function t_t(t,e,r,n){let i=Iu(t,r,n);return _n(i)?i.map((o,a)=>Og(t.items,e,`${r}/${a}`,o)):i}s(t_t,"FromArray");function r_t(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Iu(t,r,n);return Og(o,[...e,...i],r,a)}s(r_t,"FromImport");function n_t(t,e,r,n){let i=Iu(t,r,n);if(!xi(n)||Y0(n))return i;let o=rW(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=Og(m,e,`${r}/${p}`,c[p]));if(!Lo(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,d={...c};for(let p of l)a.includes(p)||(d[p]=Iu(u,`${r}/${p}`,d[p]));return d}s(n_t,"FromIntersect");function i_t(t,e,r,n){return Iu(t.not,r,Iu(t,r,n))}s(i_t,"FromNot");function o_t(t,e,r,n){let i=Iu(t,r,n);if(!xi(i))return i;let o=Hf(t),a={...i};for(let d of o)Sn(a,d)&&(Ws(a[d])&&(!fv(t.properties[d])||_s.IsExactOptionalProperty(a,d))||(a[d]=Og(t.properties[d],e,`${r}/${d}`,a[d])));if(!ya(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)o.includes(d)||(u[d]=Iu(l,`${r}/${d}`,u[d]));return u}s(o_t,"FromObject");function s_t(t,e,r,n){let i=Iu(t,r,n);if(!xi(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=Og(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!ya(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)a.test(p)||(d[p]=Iu(u,`${r}/${p}`,d[p]));return d}s(s_t,"FromRecord");function a_t(t,e,r,n){let i=bo(t,e),o=Og(i,e,r,n);return Iu(t,r,o)}s(a_t,"FromRef");function c_t(t,e,r,n){let i=bo(t,e),o=Og(i,e,r,n);return Iu(t,r,o)}s(c_t,"FromThis");function l_t(t,e,r,n){let i=Iu(t,r,n);return _n(t.items)?t.items.map((o,a)=>Og(o,e,`${r}/${a}`,i[a])):[]}s(l_t,"FromTuple");function u_t(t,e,r,n){for(let i of t.anyOf){if(!Ti(i,e,n))continue;let o=Og(i,e,r,n);return Iu(t,r,o)}for(let i of t.anyOf){let o=Og(i,e,r,n);if(Ti(t,e,o))return Iu(t,r,o)}return Iu(t,r,n)}s(u_t,"FromUnion");function Og(t,e,r,n){let i=Ul(t,e),o=t;switch(t[ot]){case"Array":return t_t(o,i,r,n);case"Import":return r_t(o,i,r,n);case"Intersect":return n_t(o,i,r,n);case"Not":return i_t(o,i,r,n);case"Object":return o_t(o,i,r,n);case"Record":return s_t(o,i,r,n);case"Ref":return a_t(o,i,r,n);case"This":return c_t(o,i,r,n);case"Tuple":return l_t(o,i,r,n);case"Union":return u_t(o,i,r,n);default:return Iu(o,r,n)}}s(Og,"Visit");function l4(t,e,r){return Og(t,e,"",r)}s(l4,"TransformEncode");f();function d_t(t,e){return Lo(t)||Al(t.items,e)}s(d_t,"FromArray");function f_t(t,e){return Lo(t)||Al(t.items,e)}s(f_t,"FromAsyncIterator");function p_t(t,e){return Lo(t)||Al(t.returns,e)||t.parameters.some(r=>Al(r,e))}s(p_t,"FromConstructor");function m_t(t,e){return Lo(t)||Al(t.returns,e)||t.parameters.some(r=>Al(r,e))}s(m_t,"FromFunction");function h_t(t,e){return Lo(t)||Lo(t.unevaluatedProperties)||t.allOf.some(r=>Al(r,e))}s(h_t,"FromIntersect");function g_t(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Lo(t)||Al(n,[...r,...e])}s(g_t,"FromImport");function A_t(t,e){return Lo(t)||Al(t.items,e)}s(A_t,"FromIterator");function y_t(t,e){return Lo(t)||Al(t.not,e)}s(y_t,"FromNot");function C_t(t,e){return Lo(t)||Object.values(t.properties).some(r=>Al(r,e))||ya(t.additionalProperties)&&Al(t.additionalProperties,e)}s(C_t,"FromObject");function v_t(t,e){return Lo(t)||Al(t.item,e)}s(v_t,"FromPromise");function E_t(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Lo(t)||Al(n,e)||ya(t.additionalProperties)&&Lo(t.additionalProperties)}s(E_t,"FromRecord");function x_t(t,e){return Lo(t)?!0:Al(bo(t,e),e)}s(x_t,"FromRef");function b_t(t,e){return Lo(t)?!0:Al(bo(t,e),e)}s(b_t,"FromThis");function I_t(t,e){return Lo(t)||!Ws(t.items)&&t.items.some(r=>Al(r,e))}s(I_t,"FromTuple");function T_t(t,e){return Lo(t)||t.anyOf.some(r=>Al(r,e))}s(T_t,"FromUnion");function Al(t,e){let r=Ul(t,e),n=t;if(t.$id&&Wue.has(t.$id))return!1;switch(t.$id&&Wue.add(t.$id),t[ot]){case"Array":return d_t(n,r);case"AsyncIterator":return f_t(n,r);case"Constructor":return p_t(n,r);case"Function":return m_t(n,r);case"Import":return g_t(n,r);case"Intersect":return h_t(n,r);case"Iterator":return A_t(n,r);case"Not":return y_t(n,r);case"Object":return C_t(n,r);case"Promise":return v_t(n,r);case"Record":return E_t(n,r);case"Ref":return x_t(n,r);case"This":return b_t(n,r);case"Tuple":return I_t(n,r);case"Union":return T_t(n,r);default:return Lo(t)}}s(Al,"Visit");var Wue=new Set;function yv(t,e){return Wue.clear(),Al(t,e)}s(yv,"HasTransform");var jue=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=yv(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return Qy(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new s4(this.schema,e,this.Errors(e).First());return this.hasTransform?a4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?l4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new c4(this.schema,e,this.Errors(e).First());return r}},Cv;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(Cv||(Cv={}));var hW;(function(t){function e(o){return o.length===0?!1:Cv.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(Cv.IsAlpha(c)||Cv.IsNumeric(c)||Cv.DollarSign(c)||Cv.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(hW||(hW={}));var Gue;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);Cv.IsNumeric(o)||Cv.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(Gue||(Gue={}));var Vue;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(Vue||(Vue={}));var zue=class extends Rn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},gW=class extends Rn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},l_;(function(t){function e(a,c,l){return _s.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${hW.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return _s.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return _s.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return _s.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return _s.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(l_||(l_={}));var Vs;(function(t){function e(ue){return ue[ot]==="Any"||ue[ot]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ue,Ue,ye){yield"true"}s(r,"FromAny");function*n(ue,Ue,ye){yield"true"}s(n,"FromArgument");function*i(ue,Ue,ye){yield`Array.isArray(${ye})`;let[$e,se]=[Me("value","any"),Me("acc","number")];on(ue.maxItems)&&(yield`${ye}.length <= ${ue.maxItems}`),on(ue.minItems)&&(yield`${ye}.length >= ${ue.minItems}`);let le=Ae(ue.items,Ue,"value");if(yield`${ye}.every((${$e}) => ${le})`,Gs(ue.contains)||on(ue.minContains)||on(ue.maxContains)){let qe=Gs(ue.contains)?ue.contains:gi(),Be=Ae(qe,Ue,"value"),xe=on(ue.minContains)?[`(count >= ${ue.minContains})`]:[],je=on(ue.maxContains)?[`(count <= ${ue.maxContains})`]:[],tt=`const count = value.reduce((${se}, ${$e}) => ${Be} ? acc + 1 : acc, 0)`,pt=["(count > 0)",...xe,...je].join(" && ");yield`((${$e}) => { ${tt}; return ${pt}})(${ye})`}ue.uniqueItems===!0&&(yield`((${$e}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ue,Ue,ye){yield`(typeof ${ye} === 'bigint')`,xu(ue.exclusiveMaximum)&&(yield`${ye} < BigInt(${ue.exclusiveMaximum})`),xu(ue.exclusiveMinimum)&&(yield`${ye} > BigInt(${ue.exclusiveMinimum})`),xu(ue.maximum)&&(yield`${ye} <= BigInt(${ue.maximum})`),xu(ue.minimum)&&(yield`${ye} >= BigInt(${ue.minimum})`),xu(ue.multipleOf)&&(yield`(${ye} % BigInt(${ue.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(ue,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(ue,Ue,ye){yield*te(ue.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(ue,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,on(ue.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ue.exclusiveMaximumTimestamp}`),on(ue.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ue.exclusiveMinimumTimestamp}`),on(ue.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ue.maximumTimestamp}`),on(ue.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ue.minimumTimestamp}`),on(ue.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ue.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ue,Ue,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ue,Ue,ye){let $e=globalThis.Object.getOwnPropertyNames(ue.$defs).reduce((se,le)=>[...se,ue.$defs[le]],[]);yield*te(Im(ue.$ref),[...Ue,...$e],ye)}s(p,"FromImport");function*m(ue,Ue,ye){yield`Number.isInteger(${ye})`,on(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),on(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),on(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),on(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),on(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ue,Ue,ye){let $e=ue.allOf.map(se=>Ae(se,Ue,ye)).join(" && ");if(ue.unevaluatedProperties===!1){let se=Te(`${new RegExp(hv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key))`;yield`(${$e} && ${le})`}else if(Gs(ue.unevaluatedProperties)){let se=Te(`${new RegExp(hv(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key) || ${Ae(ue.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${$e} && ${le})`}else yield`(${$e})`}s(h,"FromIntersect");function*g(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*A(ue,Ue,ye){typeof ue.const=="number"||typeof ue.const=="boolean"?yield`(${ye} === ${ue.const})`:yield`(${ye} === '${Vue.Escape(ue.const)}')`}s(A,"FromLiteral");function*y(ue,Ue,ye){yield"false"}s(y,"FromNever");function*x(ue,Ue,ye){yield`(!${Ae(ue.not,Ue,ye)})`}s(x,"FromNot");function*I(ue,Ue,ye){yield`(${ye} === null)`}s(I,"FromNull");function*S(ue,Ue,ye){yield l_.IsNumberLike(ye),on(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),on(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),on(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),on(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),on(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(S,"FromNumber");function*R(ue,Ue,ye){yield l_.IsObjectLike(ye),on(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),on(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let $e=Object.getOwnPropertyNames(ue.properties);for(let se of $e){let le=hW.Encode(ye,se),qe=ue.properties[se];if(ue.required&&ue.required.includes(se))yield*te(qe,Ue,le),(gv(qe)||e(qe))&&(yield`('${se}' in ${ye})`);else{let Be=Ae(qe,Ue,le);yield l_.IsExactOptionalProperty(ye,se,Be)}}if(ue.additionalProperties===!1)if(ue.required&&ue.required.length===$e.length)yield`Object.getOwnPropertyNames(${ye}).length === ${$e.length}`;else{let se=`[${$e.map(le=>`'${le}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${se}.includes(key))`}if(typeof ue.additionalProperties=="object"){let se=Ae(ue.additionalProperties,Ue,`${ye}[key]`),le=`[${$e.map(qe=>`'${qe}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${le}.includes(key) || ${se}))`}}s(R,"FromObject");function*B(ue,Ue,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*M(ue,Ue,ye){yield l_.IsRecordLike(ye),on(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),on(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let[$e,se]=Object.entries(ue.patternProperties)[0],le=Te(`${new RegExp($e)}`),qe=Ae(se,Ue,"value"),Be=Gs(ue.additionalProperties)?Ae(ue.additionalProperties,Ue,ye):ue.additionalProperties===!1?"false":"true",xe=`(${le}.test(key) ? ${qe} : ${Be})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(M,"FromRecord");function*O(ue,Ue,ye){let $e=bo(ue,Ue);if(pe.functions.has(ue.$ref))return yield`${Oe(ue.$ref)}(${ye})`;yield*te($e,Ue,ye)}s(O,"FromRef");function*K(ue,Ue,ye){let $e=Te(`${new RegExp(ue.source,ue.flags)};`);yield`(typeof ${ye} === 'string')`,on(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),on(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),yield`${$e}.test(${ye})`}s(K,"FromRegExp");function*V(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,on(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),on(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),ue.pattern!==void 0&&(yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`),ue.format!==void 0&&(yield`format('${ue.format}', ${ye})`)}s(V,"FromString");function*z(ue,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(z,"FromSymbol");function*Q(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`}s(Q,"FromTemplateLiteral");function*U(ue,Ue,ye){yield`${Oe(ue.$ref)}(${ye})`}s(U,"FromThis");function*Z(ue,Ue,ye){if(yield`Array.isArray(${ye})`,ue.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ue.maxItems})`;for(let $e=0;$e<ue.items.length;$e++)yield`${Ae(ue.items[$e],Ue,`${ye}[${$e}]`)}`}s(Z,"FromTuple");function*J(ue,Ue,ye){yield`${ye} === undefined`}s(J,"FromUndefined");function*j(ue,Ue,ye){yield`(${ue.anyOf.map(se=>Ae(se,Ue,ye)).join(" || ")})`}s(j,"FromUnion");function*$(ue,Ue,ye){yield`${ye} instanceof Uint8Array`,on(ue.maxByteLength)&&(yield`(${ye}.length <= ${ue.maxByteLength})`),on(ue.minByteLength)&&(yield`(${ye}.length >= ${ue.minByteLength})`)}s($,"FromUint8Array");function*X(ue,Ue,ye){yield"true"}s(X,"FromUnknown");function*ie(ue,Ue,ye){yield l_.IsVoidLike(ye)}s(ie,"FromVoid");function*ae(ue,Ue,ye){let $e=pe.instances.size;pe.instances.set($e,ue),yield`kind('${ue[ot]}', ${$e}, ${ye})`}s(ae,"FromKind");function*te(ue,Ue,ye,$e=!0){let se=ho(ue.$id)?[...Ue,ue]:Ue,le=ue;if($e&&ho(ue.$id)){let qe=Oe(ue.$id);if(pe.functions.has(qe))return yield`${qe}(${ye})`;{pe.functions.set(qe,"<deferred>");let Be=Je(qe,ue,Ue,"value",!1);return pe.functions.set(qe,Be),yield`${qe}(${ye})`}}switch(le[ot]){case"Any":return yield*r(le,se,ye);case"Argument":return yield*n(le,se,ye);case"Array":return yield*i(le,se,ye);case"AsyncIterator":return yield*o(le,se,ye);case"BigInt":return yield*a(le,se,ye);case"Boolean":return yield*c(le,se,ye);case"Constructor":return yield*l(le,se,ye);case"Date":return yield*u(le,se,ye);case"Function":return yield*d(le,se,ye);case"Import":return yield*p(le,se,ye);case"Integer":return yield*m(le,se,ye);case"Intersect":return yield*h(le,se,ye);case"Iterator":return yield*g(le,se,ye);case"Literal":return yield*A(le,se,ye);case"Never":return yield*y(le,se,ye);case"Not":return yield*x(le,se,ye);case"Null":return yield*I(le,se,ye);case"Number":return yield*S(le,se,ye);case"Object":return yield*R(le,se,ye);case"Promise":return yield*B(le,se,ye);case"Record":return yield*M(le,se,ye);case"Ref":return yield*O(le,se,ye);case"RegExp":return yield*K(le,se,ye);case"String":return yield*V(le,se,ye);case"Symbol":return yield*z(le,se,ye);case"TemplateLiteral":return yield*Q(le,se,ye);case"This":return yield*U(le,se,ye);case"Tuple":return yield*Z(le,se,ye);case"Undefined":return yield*J(le,se,ye);case"Union":return yield*j(le,se,ye);case"Uint8Array":return yield*$(le,se,ye);case"Unknown":return yield*X(le,se,ye);case"Void":return yield*ie(le,se,ye);default:if(!Vd.Has(le[ot]))throw new zue(ue);return yield*ae(le,se,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ae(ue,Ue,ye,$e=!0){return`(${[...te(ue,Ue,ye,$e)].join(" && ")})`}s(Ae,"CreateExpression");function Oe(ue){return`check_${Gue.Encode(ue)}`}s(Oe,"CreateFunctionName");function Te(ue){let Ue=`local_${pe.variables.size}`;return pe.variables.set(Ue,`const ${Ue} = ${ue}`),Ue}s(Te,"CreateVariable");function Je(ue,Ue,ye,$e,se=!0){let[le,qe]=[`
`,tt=>"".padStart(tt," ")],Be=Me("value","any"),xe=lt("boolean"),je=[...te(Ue,ye,$e,se)].map(tt=>`${qe(4)}${tt}`).join(` &&${le}`);return`function ${ue}(${Be})${xe} {${le}${qe(2)}return (${le}${je}${le}${qe(2)})
}`}s(Je,"CreateFunction");function Me(ue,Ue){let ye=pe.language==="typescript"?`: ${Ue}`:"";return`${ue}${ye}`}s(Me,"CreateParameter");function lt(ue){return pe.language==="typescript"?`: ${ue}`:""}s(lt,"CreateReturns");function _t(ue,Ue,ye){let $e=Je("check",ue,Ue,"value"),se=Me("value","any"),le=lt("boolean"),qe=[...pe.functions.values()],Be=[...pe.variables.values()],xe=ho(ue.$id)?`return function check(${se})${le} {
  return ${Oe(ue.$id)}(value)
}`:`return ${$e}`;return[...Be,...qe,xe].join(`
`)}s(_t,"Build");function Et(...ue){let Ue={language:"javascript"},[ye,$e,se]=ue.length===2&&_n(ue[1])?[ue[0],ue[1],Ue]:ue.length===2&&!_n(ue[1])?[ue[0],[],ue[1]]:ue.length===3?[ue[0],ue[1],ue[2]]:ue.length===1?[ue[0],[],Ue]:[null,[],Ue];if(pe.language=se.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!Gs(ye))throw new gW(ye);for(let le of $e)if(!Gs(le))throw new gW(le);return _t(ye,$e,se)}s(Et,"Code"),t.Code=Et;function ht(ue,Ue=[]){let ye=Et(ue,Ue,{language:"javascript"}),$e=globalThis.Function("kind","format","hash",ye),se=new Map(pe.instances);function le(je,tt,pt){if(!Vd.Has(je)||!se.has(tt))return!1;let Mt=Vd.Get(je),Kt=se.get(tt);return Mt(Kt,pt)}s(le,"typeRegistryFunction");function qe(je,tt){return Bg.Has(je)?Bg.Get(je)(tt):!1}s(qe,"formatRegistryFunction");function Be(je){return Yb(je)}s(Be,"hashFunction");let xe=$e(le,qe,Be);return new jue(ue,Ue,xe,ye)}s(ht,"Compile"),t.Compile=ht})(Vs||(Vs={}));var oj=Fe(Ub());f();f();var Tu=[];for(let t=0;t<256;++t)Tu.push((t+256).toString(16).slice(1));function p3e(t,e=0){return(Tu[t[e+0]]+Tu[t[e+1]]+Tu[t[e+2]]+Tu[t[e+3]]+"-"+Tu[t[e+4]]+Tu[t[e+5]]+"-"+Tu[t[e+6]]+Tu[t[e+7]]+"-"+Tu[t[e+8]]+Tu[t[e+9]]+"-"+Tu[t[e+10]]+Tu[t[e+11]]+Tu[t[e+12]]+Tu[t[e+13]]+Tu[t[e+14]]+Tu[t[e+15]]).toLowerCase()}s(p3e,"unsafeStringify");f();var m3e=require("crypto");var yW=new Uint8Array(256),AW=yW.length;function Yue(){return AW>yW.length-16&&((0,m3e.randomFillSync)(yW),AW=0),yW.slice(AW,AW+=16)}s(Yue,"rng");f();f();var h3e=require("crypto"),Kue={randomUUID:h3e.randomUUID};function w_t(t,e,r){if(Kue.randomUUID&&!e&&!t)return Kue.randomUUID();t=t||{};let n=t.random??t.rng?.()??Yue();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return p3e(n)}s(w_t,"v4");var Ar=w_t;var sj=Fe(ui());function R4(t){return t===1}s(R4,"isRestricted");var k2t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],VM=8192,P2t=21;var Su=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return R4(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(P4(e))return this.reporterRestricted;if(MP(e))return new CM}getFTReporter(e){if(j8e(e))return this.reporterFT;if(MP(e))return new CM}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},D2t=E.Object({},{additionalProperties:E.String()}),B2t=E.Object({meanLogProb:E.Optional(E.Number()),meanAlternativeLogProb:E.Optional(E.Number())},{additionalProperties:E.Number()}),N2t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function L2t(t){return N2t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(L2t,"isOomError");function M2t(t){return YM(t)?"network":L2t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(M2t,"getErrorType");var $r=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Vs.Compile(D2t)}static{this.validateTelemetryMeasurements=Vs.Compile(B2t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Ea())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ea())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Nt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=Dy(e.get(pn).getEditorInfo()),this.properties.editor_plugin_version=Dy(e.get(pn).getEditorPluginInfo());let r=e.get(Ss);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${h_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(pn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=Dy(n.getEditorInfo());let i=e.get(ln);this.properties.fetcher=i.name;let o=e.get(xc).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=K8e(e);r["copilot.build"]=J8e(e),r["copilot.buildType"]=Wy(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(R4(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>VM){let a=0,c=0;for(;o>0&&c<P2t;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+VM;o<VM&&(u=a+o),r[l]=i.slice(a,u),o-=VM,a+=VM}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=Q2t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(MP(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return qg(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),R4(r)&&qg(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,G8e(e))}},$y=class t extends $r{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}extendWithExpTelemetry(){return this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new XS({}),exp:gm.createEmptyConfig()})}};function zM(t,e,r,n){t.get(Su).getReporter(t,e)?.sendTelemetryEvent(r,$r.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(zM,"sendTelemetryEvent");function F2t(t,e,r,n){t.get(Su).getReporter(t,e)?.sendTelemetryErrorEvent(r,$r.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(F2t,"sendTelemetryErrorEvent");function O2t(t,e,r,n){t.get(Su).getFTReporter(t)?.sendTelemetryEvent(r,$r.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(O2t,"sendFTTelemetryEvent");function k4(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(k4,"telemetrizePromptLength");function Ea(){return performance.now()}s(Ea,"now");function Q2t(t){return Math.floor(t/1e3)}s(Q2t,"nowSeconds");function P4(t){return t.get(Eu).optedIn}s(P4,"shouldSendRestricted");function j8e(t){return t.get(Eu).ftFlag!==""}s(j8e,"shouldSendFinetuningTelemetry");function Dt(t,e,r,n){return t.get(Hc).register(U2t(t,e,Ea(),r?.extendedBy(),n))}s(Dt,"telemetry");async function U2t(t,e,r,n,i=0){let o=n||$r.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!R4(i)||P4(t))&&zM(t,i,e,o),R4(i)&&k2t.includes(e)&&j8e(t)&&O2t(t,i,e,o)}s(U2t,"_telemetry");function JH(t,e){return t.get(Hc).register(q2t(t,e,Ea()))}s(JH,"telemetryExpProblem");async function q2t(t,e,r){let n="expProblem",i=$r.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),zM(t,0,n,i)}s(q2t,"_telemetryExpProblem");function Tfe(t,e,r,n){let i={...r,...G8e(t)};zM(t,0,e,{properties:i,measurements:n})}s(Tfe,"telemetryRaw");function G8e(t){let e=t.get(pn),r={unique_id:Ar(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:Dy(e.getEditorInfo())},n=t.get(Eu);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(G8e,"createRequiredProperties");var Ife=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,oj.SHA256)(oj.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ma(t,e,r,n,i){return t.get(Hc).register(V8e(t,e,Ea(),r,{...n},i))}s(Ma,"telemetryException");async function V8e(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||hd(a)||a instanceof ga||a instanceof sj.ConnectionError||a instanceof sj.ResponseError)return}else{if(a=new Ife(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let A=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(A[0]??"")&&A.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(A[0]??"")&&A.shift(),a.stack=`${a}
${A.join(`
`)}`}}let c=t.get(pn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=P4(t),d=YPe(a,l,u),p=M2t(a),m=p==="exception",h=$r.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let A of o.exception_detail)A.value&&(u?A.value=Zle(A.value):A.value="[redacted]");if(o??=FPe(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let A=zPe(a,l),y=$r.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:A.stack||A.toString(),message:A.message,...i});o.rollup_id!=="auto"&&(y.properties.errno=o.rollup_id),await y.makeReadyForSending(t,1,"IncludeExp",r),y.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=y.properties.unique_id,zM(t,1,`error.${p}`,y)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(By).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),zM(t,0,`error.${p}`,h)}s(V8e,"_telemetryException");function Wl(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await V8e(t,a,Ea(),r,n)}},"wrapped");return(...o)=>t.get(Hc).register(i(...o))}s(Wl,"telemetryCatch");function qg(t,e,r,n){return t.get(Hc).register(H2t(t,e,Ea(),r?.extendedBy(),n))}s(qg,"telemetryError");async function H2t(t,e,r,n,i=0){if(R4(i)&&!P4(t))return;let o=n||$r.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),F2t(t,i,e,o)}s(H2t,"_telemetryError");function z8e(t,e,r,n,i){let o=$r.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Dt(t,"engine.completion",o,1)}s(z8e,"logEngineCompletion");function Y8e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Dt(t,"engine.prompt",i,1)}s(Y8e,"logEnginePrompt");f();f();var X8e=Fe(ui()),Z8e=E.Object({accessToken:E.Optional(E.String({minLength:1})),handle:E.Optional(E.String({minLength:1})),login:E.Optional(E.String({minLength:1})),githubAppId:E.Optional(E.String({minLength:1})),apiUrl:E.Optional(E.String({})),serverUrl:E.Optional(E.String({})),tokenEndpoint:E.Optional(E.String({}))}),wfe;(r=>(r.method="github/didChangeAuth",r.type=new X8e.ProtocolNotificationType(r.method)))(wfe||={});f();var eLe=Fe(ui()),Sfe;(r=>(r.method="copilot/ipCodeCitation",r.type=new eLe.NotificationType(r.method)))(Sfe||={});f();var tLe=Fe(ui()),aj;(r=>(r.method="context/update",r.type=new tLe.ProtocolRequestType(r.method)))(aj||={});f();f();var sI="Cancelled";f();var In=Fe(ui()),KM=E.String(),zf=E.Object({uri:KM}),g_=E.Intersect([zf,E.Object({version:E.Optional(E.Integer())})]),Hqr=E.Required(g_),jl=E.Object({line:E.Integer({minimum:0}),character:E.Integer({minimum:0})}),bc=E.Object({start:jl,end:jl}),_fe=E.Union([E.Integer(),E.String()]),$qr=E.Object({isCancellationRequested:E.Boolean(),onCancellationRequested:E.Any()});f();var rLe=Fe(ui()),Rfe;(r=>(r.method="textDocument/didFocus",r.type=new rLe.ProtocolNotificationType(r.method)))(Rfe||={});f();var $2t=E.Object({didChangeFeatureFlags:E.Boolean(),fetch:E.Boolean(),ipCodeCitation:E.Boolean(),redirectedTelemetry:E.Boolean(),related:E.Boolean(),token:E.Boolean(),watchedFiles:E.Boolean(),showPanelMessage:E.Boolean()}),W2t=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),nLe=E.Object({name:E.String(),version:E.Optional(E.String()),readableName:E.Optional(E.String())}),iLe=E.Object({editorInfo:E.Optional(nLe),editorPluginInfo:E.Optional(nLe),relatedPluginInfo:E.Optional(E.Array(W2t)),copilotIntegrationId:E.Optional(E.String()),copilotCapabilities:E.Optional(E.Partial($2t)),githubAppId:E.Optional(E.String())});f();var JM=Fe(ui());var cj=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(cj||{}),j2t=E.Enum(cj),G2t=E.Object({triggerKind:j2t,selectedCompletionInfo:E.Optional(E.Object({text:E.String(),range:bc,tooltipSignature:E.Optional(E.String())}))}),oLe=E.Object({textDocument:g_,position:jl,formattingOptions:E.Optional(E.Object({tabSize:E.Optional(E.Union([E.Integer({minimum:1}),E.String()])),insertSpaces:E.Optional(E.Union([E.Boolean(),E.String()]))})),context:G2t,data:E.Optional(E.Unknown())}),kfe;(r=>(r.method="textDocument/inlineCompletion",r.type=new JM.ProtocolRequestType(r.method)))(kfe||={});var sLe=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),aLe=E.Object({item:sLe}),Pfe;(r=>(r.method="textDocument/didShowCompletion",r.type=new JM.ProtocolNotificationType(r.method)))(Pfe||={});var cLe=E.Object({item:sLe,acceptedLength:E.Integer({minimum:1})}),Dfe;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new JM.ProtocolNotificationType(r.method)))(Dfe||={});f();var lLe=Fe(ui()),Bfe;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new lLe.ProtocolRequestType(r.method)))(Bfe||={});f();var uLe=Fe(ui()),dLe=E.Object({textDocument:g_,position:jl}),V2t=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),fLe=E.Object({item:V2t}),Nfe;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new uLe.ProtocolNotificationType(r.method)))(Nfe||={});f();var lj=Fe(ui());var pLe=E.Object({textDocument:g_,position:jl,partialResultToken:E.Optional(_fe),workDoneToken:E.Optional(_fe)}),uj;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new lj.ProtocolRequestType(n.method),n.partialResult=new lj.ProgressType))(uj||={});f();var mLe=Fe(ui()),Lfe;(r=>(r.method="copilot/related",r.type=new mLe.ProtocolRequestType(r.method)))(Lfe||={});f();var hLe=Fe(ui()),Mfe;(r=>(r.method="statusNotification",r.type=new hLe.ProtocolNotificationType(r.method)))(Mfe||={});var gLe=Fe(require("events"));var Hg=class{static{s(this,"CopilotTokenNotifier")}#e=new gLe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=Wl(e,n,`event.${r}`);return this.#e.on(r,i),In.Disposable.create(()=>this.#e.off(r,i))}};function ws(t,e){return t.get(Hg).on(t,"CopilotToken",e)}s(ws,"onCopilotToken");function XM(t,e){return t.get(Hg).emitToken(e)}s(XM,"emitCopilotToken");function dj(t){return t.get(Hg).lastToken}s(dj,"getLastCopilotToken");f();var fj=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function Ffe(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(Ffe,"findKnownOrg");function ALe(t){let e=t.organization_list??[];return Ffe(e)??""}s(ALe,"getUserKind");f();f();var za=class{constructor(){this.recentNotifications=new kr(100)}static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}async showInformationMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showInformationMessage(r,...n)}};f();var _u=class{static{s(this,"UrlOpener")}};var z2t=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],yLe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",CLe="https://gh.io/copilot-network-errors",Yd=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&z2t.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new vt("certificates").error(e,`${yLe} Please visit ${CLe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(za).showWarningMessage(yLe,n).then(i=>{if(i?.title===n.title)return e.get(_u).open(CLe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();var ZM=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function hd(t){return!t||typeof t!="object"?!1:t instanceof ZM||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(hd,"isAbortError");var D4=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},jy=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Y2t=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function YM(t,e=!0){return t instanceof Error?e&&"cause"in t&&YM(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof D4||t instanceof jy||t?.message?.startsWith("net::")||Y2t.has(t.code??""):!1}s(YM,"isNetworkError");var aI=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new D4(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new D4(`Response body truncated: actualLength=${o}`,"Truncated"):new D4(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};f();function pj(){return typeof process>"u"}s(pj,"isWeb");function e9(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(e9,"isMsBenchModeEnabled");var Ofe=class extends jy{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Rm(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...pj()?{}:ip(t),...n.headers}};let i=await t.get(ln).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new jy(i);if(!i.headers.get("x-github-request-id"))throw new Ofe(i);return i}s(Rm,"apiFetch");f();f();var xLe=require("os"),mj=require("path");f();var vLe;(()=>{"use strict";var t={975:Q=>{function U(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(U,"e");function Z(j,$){for(var X,ie="",ae=0,te=-1,pe=0,Ae=0;Ae<=j.length;++Ae){if(Ae<j.length)X=j.charCodeAt(Ae);else{if(X===47)break;X=47}if(X===47){if(!(te===Ae-1||pe===1))if(te!==Ae-1&&pe===2){if(ie.length<2||ae!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Oe=ie.lastIndexOf("/");if(Oe!==ie.length-1){Oe===-1?(ie="",ae=0):ae=(ie=ie.slice(0,Oe)).length-1-ie.lastIndexOf("/"),te=Ae,pe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ae=0,te=Ae,pe=0;continue}}$&&(ie.length>0?ie+="/..":ie="..",ae=2)}else ie.length>0?ie+="/"+j.slice(te+1,Ae):ie=j.slice(te+1,Ae),ae=Ae-te-1;te=Ae,pe=0}else X===46&&pe!==-1?++pe:pe=-1}return ie}s(Z,"r");var J={resolve:s(function(){for(var j,$="",X=!1,ie=arguments.length-1;ie>=-1&&!X;ie--){var ae;ie>=0?ae=arguments[ie]:(j===void 0&&(j=process.cwd()),ae=j),U(ae),ae.length!==0&&($=ae+"/"+$,X=ae.charCodeAt(0)===47)}return $=Z($,!X),X?$.length>0?"/"+$:"/":$.length>0?$:"."},"resolve"),normalize:s(function(j){if(U(j),j.length===0)return".";var $=j.charCodeAt(0)===47,X=j.charCodeAt(j.length-1)===47;return(j=Z(j,!$)).length!==0||$||(j="."),j.length>0&&X&&(j+="/"),$?"/"+j:j},"normalize"),isAbsolute:s(function(j){return U(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,$=0;$<arguments.length;++$){var X=arguments[$];U(X),X.length>0&&(j===void 0?j=X:j+="/"+X)}return j===void 0?".":J.normalize(j)},"join"),relative:s(function(j,$){if(U(j),U($),j===$||(j=J.resolve(j))===($=J.resolve($)))return"";for(var X=1;X<j.length&&j.charCodeAt(X)===47;++X);for(var ie=j.length,ae=ie-X,te=1;te<$.length&&$.charCodeAt(te)===47;++te);for(var pe=$.length-te,Ae=ae<pe?ae:pe,Oe=-1,Te=0;Te<=Ae;++Te){if(Te===Ae){if(pe>Ae){if($.charCodeAt(te+Te)===47)return $.slice(te+Te+1);if(Te===0)return $.slice(te+Te)}else ae>Ae&&(j.charCodeAt(X+Te)===47?Oe=Te:Te===0&&(Oe=0));break}var Je=j.charCodeAt(X+Te);if(Je!==$.charCodeAt(te+Te))break;Je===47&&(Oe=Te)}var Me="";for(Te=X+Oe+1;Te<=ie;++Te)Te!==ie&&j.charCodeAt(Te)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+$.slice(te+Oe):(te+=Oe,$.charCodeAt(te)===47&&++te,$.slice(te))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(U(j),j.length===0)return".";for(var $=j.charCodeAt(0),X=$===47,ie=-1,ae=!0,te=j.length-1;te>=1;--te)if(($=j.charCodeAt(te))===47){if(!ae){ie=te;break}}else ae=!1;return ie===-1?X?"/":".":X&&ie===1?"//":j.slice(0,ie)},"dirname"),basename:s(function(j,$){if($!==void 0&&typeof $!="string")throw new TypeError('"ext" argument must be a string');U(j);var X,ie=0,ae=-1,te=!0;if($!==void 0&&$.length>0&&$.length<=j.length){if($.length===j.length&&$===j)return"";var pe=$.length-1,Ae=-1;for(X=j.length-1;X>=0;--X){var Oe=j.charCodeAt(X);if(Oe===47){if(!te){ie=X+1;break}}else Ae===-1&&(te=!1,Ae=X+1),pe>=0&&(Oe===$.charCodeAt(pe)?--pe==-1&&(ae=X):(pe=-1,ae=Ae))}return ie===ae?ae=Ae:ae===-1&&(ae=j.length),j.slice(ie,ae)}for(X=j.length-1;X>=0;--X)if(j.charCodeAt(X)===47){if(!te){ie=X+1;break}}else ae===-1&&(te=!1,ae=X+1);return ae===-1?"":j.slice(ie,ae)},"basename"),extname:s(function(j){U(j);for(var $=-1,X=0,ie=-1,ae=!0,te=0,pe=j.length-1;pe>=0;--pe){var Ae=j.charCodeAt(pe);if(Ae!==47)ie===-1&&(ae=!1,ie=pe+1),Ae===46?$===-1?$=pe:te!==1&&(te=1):$!==-1&&(te=-1);else if(!ae){X=pe+1;break}}return $===-1||ie===-1||te===0||te===1&&$===ie-1&&$===X+1?"":j.slice($,ie)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function($,X){var ie=X.dir||X.root,ae=X.base||(X.name||"")+(X.ext||"");return ie?ie===X.root?ie+ae:ie+"/"+ae:ae}(0,j)},"format"),parse:s(function(j){U(j);var $={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return $;var X,ie=j.charCodeAt(0),ae=ie===47;ae?($.root="/",X=1):X=0;for(var te=-1,pe=0,Ae=-1,Oe=!0,Te=j.length-1,Je=0;Te>=X;--Te)if((ie=j.charCodeAt(Te))!==47)Ae===-1&&(Oe=!1,Ae=Te+1),ie===46?te===-1?te=Te:Je!==1&&(Je=1):te!==-1&&(Je=-1);else if(!Oe){pe=Te+1;break}return te===-1||Ae===-1||Je===0||Je===1&&te===Ae-1&&te===pe+1?Ae!==-1&&($.base=$.name=pe===0&&ae?j.slice(1,Ae):j.slice(pe,Ae)):(pe===0&&ae?($.name=j.slice(1,te),$.base=j.slice(1,Ae)):($.name=j.slice(pe,te),$.base=j.slice(pe,Ae)),$.ext=j.slice(te,Ae)),pe>0?$.dir=j.slice(0,pe-1):ae&&($.dir="/"),$},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,Q.exports=J}},e={};function r(Q){var U=e[Q];if(U!==void 0)return U.exports;var Z=e[Q]={exports:{}};return t[Q](Z,Z.exports,r),Z.exports}s(r,"r"),r.d=(Q,U)=>{for(var Z in U)r.o(U,Z)&&!r.o(Q,Z)&&Object.defineProperty(Q,Z,{enumerable:!0,get:U[Z]})},r.o=(Q,U)=>Object.prototype.hasOwnProperty.call(Q,U),r.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>z,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(Q,U){if(!Q.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${Q.authority}", path: "${Q.path}", query: "${Q.query}", fragment: "${Q.fragment}"}`);if(Q.scheme&&!o.test(Q.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(Q.path){if(Q.authority){if(!a.test(Q.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(Q.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(U){return U instanceof m||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,Z,J,j,$,X=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(ie,ae){return ie||ae?ie:"file"}(U,X),this.authority=Z||u,this.path=function(ie,ae){switch(ie){case"https":case"http":case"file":ae?ae[0]!==d&&(ae=d+ae):ae=d}return ae}(this.scheme,J||u),this.query=j||u,this.fragment=$||u,l(this,X))}get fsPath(){return I(this,!1)}with(U){if(!U)return this;let{scheme:Z,authority:J,path:j,query:$,fragment:X}=U;return Z===void 0?Z=this.scheme:Z===null&&(Z=u),J===void 0?J=this.authority:J===null&&(J=u),j===void 0?j=this.path:j===null&&(j=u),$===void 0?$=this.query:$===null&&($=u),X===void 0?X=this.fragment:X===null&&(X=u),Z===this.scheme&&J===this.authority&&j===this.path&&$===this.query&&X===this.fragment?this:new g(Z,J,j,$,X)}static parse(U,Z=!1){let J=p.exec(U);return J?new g(J[2]||u,M(J[4]||u),M(J[5]||u),M(J[7]||u),M(J[9]||u),Z):new g(u,u,u,u,u)}static file(U){let Z=u;if(i&&(U=U.replace(/\\/g,d)),U[0]===d&&U[1]===d){let J=U.indexOf(d,2);J===-1?(Z=U.substring(2),U=d):(Z=U.substring(2,J),U=U.substring(J)||d)}return new g("file",Z,U,u,u)}static from(U){let Z=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return l(Z,!0),Z}toString(U=!1){return S(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof m)return U;{let Z=new g(U);return Z._formatted=U.external,Z._fsPath=U._sep===h?U.fsPath:null,Z}}return U}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath}toString(U=!1){return U?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=h),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(Q,U,Z){let J,j=-1;for(let $=0;$<Q.length;$++){let X=Q.charCodeAt($);if(X>=97&&X<=122||X>=65&&X<=90||X>=48&&X<=57||X===45||X===46||X===95||X===126||U&&X===47||Z&&X===91||Z&&X===93||Z&&X===58)j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J!==void 0&&(J+=Q.charAt($));else{J===void 0&&(J=Q.substr(0,$));let ie=A[X];ie!==void 0?(j!==-1&&(J+=encodeURIComponent(Q.substring(j,$)),j=-1),J+=ie):j===-1&&(j=$)}}return j!==-1&&(J+=encodeURIComponent(Q.substring(j))),J!==void 0?J:Q}s(y,"m");function x(Q){let U;for(let Z=0;Z<Q.length;Z++){let J=Q.charCodeAt(Z);J===35||J===63?(U===void 0&&(U=Q.substr(0,Z)),U+=A[J]):U!==void 0&&(U+=Q[Z])}return U!==void 0?U:Q}s(x,"y");function I(Q,U){let Z;return Z=Q.authority&&Q.path.length>1&&Q.scheme==="file"?`//${Q.authority}${Q.path}`:Q.path.charCodeAt(0)===47&&(Q.path.charCodeAt(1)>=65&&Q.path.charCodeAt(1)<=90||Q.path.charCodeAt(1)>=97&&Q.path.charCodeAt(1)<=122)&&Q.path.charCodeAt(2)===58?U?Q.path.substr(1):Q.path[1].toLowerCase()+Q.path.substr(2):Q.path,i&&(Z=Z.replace(/\//g,"\\")),Z}s(I,"v");function S(Q,U){let Z=U?x:y,J="",{scheme:j,authority:$,path:X,query:ie,fragment:ae}=Q;if(j&&(J+=j,J+=":"),($||j==="file")&&(J+=d,J+=d),$){let te=$.indexOf("@");if(te!==-1){let pe=$.substr(0,te);$=$.substr(te+1),te=pe.lastIndexOf(":"),te===-1?J+=Z(pe,!1,!1):(J+=Z(pe.substr(0,te),!1,!1),J+=":",J+=Z(pe.substr(te+1),!1,!0)),J+="@"}$=$.toLowerCase(),te=$.lastIndexOf(":"),te===-1?J+=Z($,!1,!0):(J+=Z($.substr(0,te),!1,!0),J+=$.substr(te))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58){let te=X.charCodeAt(1);te>=65&&te<=90&&(X=`/${String.fromCharCode(te+32)}:${X.substr(3)}`)}else if(X.length>=2&&X.charCodeAt(1)===58){let te=X.charCodeAt(0);te>=65&&te<=90&&(X=`${String.fromCharCode(te+32)}:${X.substr(2)}`)}J+=Z(X,!0,!1)}return ie&&(J+="?",J+=Z(ie,!1,!1)),ae&&(J+="#",J+=U?ae:y(ae,!1,!1)),J}s(S,"b");function R(Q){try{return decodeURIComponent(Q)}catch{return Q.length>3?Q.substr(0,3)+R(Q.substr(3)):Q}}s(R,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function M(Q){return Q.match(B)?Q.replace(B,U=>R(U)):Q}s(M,"w");var O=r(975);let K=O.posix||O,V="/";var z;(function(Q){Q.joinPath=function(U,...Z){return U.with({path:K.join(U.path,...Z)})},Q.resolvePath=function(U,...Z){let J=U.path,j=!1;J[0]!==V&&(J=V+J,j=!0);let $=K.resolve(J,...Z);return j&&$[0]===V&&!U.authority&&($=$.substring(1)),U.with({path:$})},Q.dirname=function(U){if(U.path.length===0||U.path===V)return U;let Z=K.dirname(U.path);return Z.length===1&&Z.charCodeAt(0)===46&&(Z=""),U.with({path:Z})},Q.basename=function(U){return K.basename(U.path)},Q.extname=function(U){return K.extname(U.path)}})(z||(z={})),vLe=n})();var{URI:cI,Utils:t9}=vLe;function bLe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+bLe(t.substring(3)):t}}s(bLe,"decodeURIComponentGraceful");var ELe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Qfe(t){return t.match(ELe)?t.replace(ELe,e=>bLe(e)):t}s(Qfe,"percentDecode");function yl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return cI.file(t).toString()}s(yl,"makeFsUri");function A_(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?cI.parse(e[1]+e[2],!0):cI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(A_,"parseUri");function hj(t){return A_(t),t}s(hj,"validateUri");function Cl(t){try{return A_(t).toString()}catch{return t}}s(Cl,"normalizeUri");var ILe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Ya(t){let e=A_(t);if(!ILe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,xLe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,mj.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(Ya,"fsPath");function Ko(t){try{return Ya(t)}catch{return}}s(Ko,"getFsPath");function TLe(t){let e=Ko(t);if(e)return cI.file(e).toString()}s(TLe,"getFsUri");function y_(t,...e){let r,n=Ko(t);return n?r=yl((0,mj.resolve)(n,...e)):r=t9.resolvePath(A_(t),...e.map(i=>wLe(i))).toString(),typeof t=="string"?r:{uri:r}}s(y_,"resolveFilePath");function no(t,...e){let r=t9.joinPath(A_(t),...e.map(wLe)).toString();return typeof t=="string"?r:{uri:r}}s(no,"joinPath");function wLe(t){return K2t(t)?t.replaceAll("\\","/"):t}s(wLe,"pathToURIPath");function K2t(t){return/^[^/\\]*\\/.test(t)}s(K2t,"isWinPath");function Hi(t){return Qfe((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Hi,"basename");function gd(t){let e=t9.dirname(A_(t)),r;return ILe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(gd,"dirname");function SLe(t){return t9.extname(A_(t))}s(SLe,"extname");var Kd=class{static{s(this,"NetworkConfiguration")}};function gj(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!qfe(t)&&r.protocol==="http:")return r.href}catch{}}s(gj,"ensurePermittedUrl");var C_={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function Ufe(t,e,r){if(r&&Tg(t)){for(let n of r){let i=$i(t,n);if(i)return i}return}for(let n of e){let i=$i(t,n);if(i)return i}}s(Ufe,"urlConfigOverride");function J2t(t,e){switch(e){case"api":return Ufe(t,[qt.DebugOverrideCapiUrl,qt.DebugOverrideCapiUrlLegacy],[qt.DebugTestOverrideCapiUrl,qt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return Ufe(t,[qt.DebugOverrideProxyUrl,qt.DebugOverrideProxyUrlLegacy],[qt.DebugTestOverrideProxyUrl,qt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!qfe(t))return Ufe(t,[qt.DebugSnippyOverrideUrl])}}s(J2t,"getEndpointOverrideUrl");function km(t,e,r,...n){let i=J2t(t,r)??e.endpoints[r];return no(i,...n)}s(km,"getEndpointUrl");function B4(t){return dj(t)?.endpoints??C_}s(B4,"getLastKnownEndpoints");function _Le(t,e){if(e&&!gj(t,e)){t.get(za).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(Kd).setConfiguredUrls(t,{serverUrl:e})}s(_Le,"updateServerUrl");var op=new vt("auth"),Aj=60;function Yf(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Yf,"fillGitHubUrls");function RLe(){return Math.floor(Date.now()/1e3)}s(RLe,"nowSeconds");async function yj(t,e){let r=$r.createAndMarkAsIssued({},{});Dt(t,"auth.new_login");let n=await X2t(t,e),i=await n.json(),o=i.user_notification;if(kLe(t,o,e),n.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return op.info(t,d),qg(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!n.ok||!i.token){op.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),qg(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&kLe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=RLe()+i.refresh_in+Aj;let c=await Hfe(t,e),l;c.ok&&(l=await c.json());let u=new v_(i,l);return XM(t,u),Dt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:RLe()})),{kind:"success",copilotToken:u}}s(yj,"authFromGitHubSession");async function X2t(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Rm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Yd).notifyUser(t,i),i}}s(X2t,"fetchCopilotToken");async function Hfe(t,e){let r={"X-GitHub-Api-Version":lI},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Rm(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Yd).notifyUser(t,i),i}}s(Hfe,"fetchCopilotUserInfo");function kLe(t,e,r){e&&t.get(za).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(pn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(_u).open(c)}e.notification_id&&o&&await Z2t(t,e.notification_id,r)}).catch(n=>{op.exception(t,n,"copilotToken.notification")})}s(kLe,"notifyUser");async function Z2t(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Rm(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&op.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Z2t,"sendNotificationResultToGitHub");var v_=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new fj(r)}static{s(this,"CopilotToken")}get endpoints(){return{...C_,...this.envelope.endpoints??{}}}needsRefresh(){return(this.envelope.expires_at-Aj)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return Ffe(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}};f();f();var r9="apps",$fe="hosts",$g=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=sp,i=await this.persistenceManager.read(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Gl).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read($fe,e);if(r)return{...r,githubAppId:sp}}async saveAuthRecord(e){await this.persistenceManager.update(r9,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===sp&&await this.persistenceManager.delete($fe,r),await this.persistenceManager.delete(r9,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:sp})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting($fe)}authRecordKey(e,r){let n=r.githubAppId??e.get(Gl).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};f();f();f();var LLe=Fe(DLe()),MLe=Fe(NLe()),ap=Fe(require("os"));var N4=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(ln).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{an.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new MLe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[LLe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=eRt(e),this.commonProperties=tRt(e),this.#e=ws(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function eRt(t){let e={},r=t.get(Ss);e["ai.session.id"]=r.sessionId;let n=t.get(Eu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${ap.type()} ${ap.release()}`,e["ai.device.osArchitecture"]=ap.arch(),e["ai.device.osPlatform"]=ap.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(Eo).getVersion(),e}s(eRt,"getTags");function tRt(t){let e={};e.common_os=ap.platform(),e.common_platformversion=ap.release(),e.common_arch=ap.arch(),e.common_cpu=Array.from(new Set(ap.cpus().map(n=>n.model))).join();let r=t.get(Ss);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(tRt,"getCommonProperties");var rRt="7d7048df-6dd0-4048-bb23-b716c1461f8f",nRt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",iRt="f0000000-0000-0000-0000-000000000000";function FLe(t){return new URL(t).hostname==="github.com"?C_.telemetry:t.replace("://","://copilot-telemetry-service.")}s(FLe,"getEndpointForServerUrl");var Ad=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=FLe(this.serverUrl);this.shuttingDown=new Set;ws(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(Su);i.setReporter(new N4(r,this.namespace,n,rRt)),i.setRestrictedReporter(new N4(r,this.namespace,n,nRt)),i.setFTReporter(new N4(r,this.namespace,n,iRt,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Su);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Su).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=FLe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};async function OLe(t,e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Rm(t,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":"2025-05-01"},body:JSON.stringify({restricted_telemetry:t.get(Ad).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json()).subscribed}catch(n){return op.exception(t,n,"signUpLimited failed"),!1}}s(OLe,"apiFetchSignUpLimited");var io=class{constructor(e,r){this.ctx=e;this.env=r}static{s(this,"AuthManager")}hasTransientSession(){return this.transientSession!==void 0}get _copilotTokenManager(){return this.ctx.get(qr)}getConfiguredUrls(){return this.ctx.get(Kd).getConfiguredUrls()}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof Wg)return r&&n.result.envelope?.can_signup_for_limited&&await OLe(this.ctx,e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession(){await this.ctx.get(xc).requireReady();let e=Wfe(this.env)??this.transientSession;if(!(e&&e.accessToken===void 0))return e?{...e,...Yf(e)}:await this.getPersistedSession()}setTransientSession(e){this.transientSession=e,this._copilotTokenManager.resetToken()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}get authPersistence(){return this.ctx.get($g)}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&Wy(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}};function Wfe(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{...Yf({apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL}),login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{...Yf({apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL}),login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{...Yf({apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL}),login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Wfe,"getSessionFromEnv");f();var Io=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},Ej=class extends Io{static{s(this,"NoOpStatusReporter")}didChange(){}};var Wg=class extends ga{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},qr=class{constructor(e,r=!1){this.ctx=e;this.primed=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async fetchCopilotToken(e){if(!e.accessToken)throw new Wg({reason:"HTTP401"});let r=await yj(this.ctx,e);if(r.kind==="failure"){if(r.message)throw new Wg(r);let n=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw n.code=`CopilotToken.${r.reason}`,n}return r.copilotToken}async getToken(){if(!this.primed){let e=new Error("Token requested before initialization");if(QLe(this.ctx))throw e;op.exception(this.ctx,e,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.getGitHubSession().then(async n=>{if(!n)throw new Wg({reason:"NotSignedIn"});return await this.fetchCopilotToken(n)}).then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(Io).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(Io);if(n instanceof Wg)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(e){e!==void 0?(Dt(this.ctx,"auth.reset_token_"+e),op.debug(this.ctx,`Resetting copilot token on HTTP error ${e}`)):op.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},n9=class extends qr{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(io).getSession()}};f();var Gy=class{static{s(this,"Clock")}now(){return new Date}};f();var jg=class{static{s(this,"ExpConfigMaker")}},i9=class extends jg{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(ln),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return gm.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return gm.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return Ma(r,m,"fetchExperiments"),gm.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new gm(d.Parameters,u.AssignmentContext,p.join(";"))}},xj=class extends jg{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(gm.createEmptyConfig())}};f();f();var bj=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},jfe=class extends bj{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},ULe=s(t=>new jfe(t),"DEFAULT_GRANULARITY"),Ij=class extends bj{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var qLe="X-Copilot-ClientTimeBucket",Tj=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=ULe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new Ij(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(qLe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(qLe,o))}}};f();f();f();f();f();f();f();var Sj="4.11.0",E_="04b07795-8ddb-461a-bbee-02f9e1bf7b46",HLe="common",wj;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(wj||(wj={}));var o9=wj.AzurePublicCloud,$Le="login.microsoftonline.com",WLe=["*"],jLe="cae",GLe="nocae",VLe="msal.cache";var Gfe;var zLe,_j,Vfe;function YLe(){return _j!==void 0&&Vfe!==void 0}s(YLe,"hasVSCodePlugin");function oRt(t){let e={cache:{},broker:{...t.brokerOptions,isEnabled:t.brokerOptions?.enabled??!1,enableMsaPassthrough:t.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(t.tokenCachePersistenceOptions?.enabled){if(Gfe===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let r=t.tokenCachePersistenceOptions.name||VLe;e.cache.cachePlugin=Gfe({name:`${r}.${GLe}`,...t.tokenCachePersistenceOptions}),e.cache.cachePluginCae=Gfe({name:`${r}.${jLe}`,...t.tokenCachePersistenceOptions})}if(t.brokerOptions?.enabled)if(t.isVSCodeCredential){if(Vfe===void 0)throw new Error(["Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found.","You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=Vfe.broker}else{if(zLe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(brokerPlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=zLe.broker}return e}s(oRt,"generatePluginConfiguration");var KLe={generatePluginConfiguration:oRt};f();f();f();function sRt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(sRt,"isErrorResponse");var XLe="CredentialUnavailableError",Or=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=XLe}},Rj="AuthenticationError",uI=class extends Error{static{s(this,"AuthenticationError")}statusCode;errorResponse;constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(sRt(r))i=JLe(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=JLe(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=Rj}},ZLe="AggregateAuthenticationError",s9=class extends Error{static{s(this,"AggregateAuthenticationError")}errors;constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=ZLe}};function JLe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(JLe,"convertOAuthErrorResponseToErrorResponse");var Pm=class extends Error{static{s(this,"AuthenticationRequiredError")}scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};f();f();f();f();var eMe=require("node:os"),tMe=Fe(require("node:util"),1),rMe=Fe(require("node:process"),1);function nMe(t,...e){rMe.stderr.write(`${tMe.default.format(t,...e)}${eMe.EOL}`)}s(nMe,"log");var iMe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,oMe,zfe=[],Yfe=[],kj=[];iMe&&Kfe(iMe);var sMe=Object.assign(t=>aMe(t),{enable:Kfe,enabled:Jfe,disable:aRt,log:nMe});function Kfe(t){oMe=t,zfe=[],Yfe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Yfe.push(new RegExp(`^${n.substr(1)}$`)):zfe.push(new RegExp(`^${n}$`));for(let n of kj)n.enabled=Jfe(n.namespace)}s(Kfe,"enable");function Jfe(t){if(t.endsWith("*"))return!0;for(let e of Yfe)if(e.test(t))return!1;for(let e of zfe)if(e.test(t))return!0;return!1}s(Jfe,"enabled");function aRt(){let t=oMe||"";return Kfe(""),t}s(aRt,"disable");function aMe(t){let e=Object.assign(r,{enabled:Jfe(t),destroy:cRt,log:sMe.log,namespace:t,extend:lRt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),kj.push(e),e}s(aMe,"createDebugger");function cRt(){let t=kj.indexOf(this);return t>=0?(kj.splice(t,1),!0):!1}s(cRt,"destroy");function lRt(t){let e=aMe(`${this.namespace}:${t}`);return e.log=this.log,e}s(lRt,"extend");var L4=sMe;var lMe=new Set,Pj=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,Bj,Xfe=L4("azure");Xfe.log=(...t)=>{L4.log(...t)};var Zfe=["verbose","info","warning","error"];Pj&&(fMe(Pj)?uRt(Pj):console.error(`AZURE_LOG_LEVEL set to unknown log level '${Pj}'; logging is not enabled. Acceptable values: ${Zfe.join(", ")}.`));function uRt(t){if(t&&!fMe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Zfe.join(",")}`);Bj=t;let e=[];for(let r of lMe)dMe(r)&&e.push(r.namespace);L4.enable(e.join(","))}s(uRt,"setLogLevel");function Nj(){return Bj}s(Nj,"getLogLevel");var cMe={verbose:400,info:300,warning:200,error:100};function dI(t){let e=Xfe.extend(t);return uMe(Xfe,e),{error:Dj(e,"error"),warning:Dj(e,"warning"),info:Dj(e,"info"),verbose:Dj(e,"verbose")}}s(dI,"createClientLogger");function uMe(t,e){e.log=(...r)=>{t.log(...r)}}s(uMe,"patchLogMethod");function Dj(t,e){let r=Object.assign(t.extend(e),{level:e});if(uMe(t,r),dMe(r)){let n=L4.disable();L4.enable(n+","+r.namespace)}return lMe.add(r),r}s(Dj,"createLogger");function dMe(t){return!!(Bj&&cMe[t.level]<=cMe[Bj])}s(dMe,"shouldEnable");function fMe(t){return Zfe.includes(t)}s(fMe,"isAzureLogLevel");var cp=dI("identity");function Lj(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(Lj,"processEnvVars");function vl(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(vl,"formatSuccess");function yo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(yo,"formatError");function pMe(t,e,r=cp){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(pMe,"credentialLoggerInstance");function Xn(t,e=cp){let r=pMe(t,void 0,e);return{...r,parent:e,getToken:pMe("=> getToken()",r,e)}}s(Xn,"credentialLogger");f();f();f();f();var M4={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function mMe(t={}){let e=new e0e(t.parentContext);return t.span&&(e=e.setValue(M4.span,t.span)),t.namespace&&(e=e.setValue(M4.namespace,t.namespace)),e}s(mMe,"createTracingContext");var e0e=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};f();var gMe=Fe(hMe(),1),Fj=gMe.state;function dRt(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(dRt,"createDefaultTracingSpan");function fRt(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:dRt(),tracingContext:mMe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(fRt,"createDefaultInstrumenter");function a9(){return Fj.instrumenterImplementation||(Fj.instrumenterImplementation=fRt()),Fj.instrumenterImplementation}s(a9,"getInstrumenter");f();function c9(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,d,p){var m;let h=a9().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=d?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,A=h.span;g.getValue(M4.namespace)||(g=g.setValue(M4.namespace,e)),A.setAttribute("az.namespace",g.getValue(M4.namespace));let y=Object.assign({},d,{tracingOptions:Object.assign(Object.assign({},d?.tracingOptions),{tracingContext:g})});return{span:A,updatedOptions:y}}s(i,"startSpan");async function o(u,d,p,m){let{span:h,updatedOptions:g}=i(u,d,m);try{let A=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),A}catch(A){throw h.setStatus({status:"error",error:A}),A}finally{h.end()}}s(o,"withSpan");function a(u,d,...p){return a9().withContext(u,d,...p)}s(a,"withContext");function c(u){return a9().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return a9().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(c9,"createTracingClient");var Jo=c9({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:Sj});var t0e=Xn("ChainedTokenCredential"),l9=class{static{s(this,"ChainedTokenCredential")}_sources=[];constructor(...e){this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return Jo.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw t0e.getToken.info(yo(e,l)),l}if(!n&&o.length>0){let c=new s9(o,"ChainedTokenCredential authentication failed.");throw t0e.getToken.info(yo(e,c)),c}if(t0e.getToken.info(`Result for ${i.constructor.name}: ${vl(e)}`),n===null)throw new Or("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};f();f();f();f();var mp={};ma(mp,{AuthError:()=>ri,AuthErrorCodes:()=>U4,AuthErrorMessage:()=>n0e,AzureCloudInstance:()=>Sv,ClientApplication:()=>DI,ClientAssertion:()=>Lv,ClientAuthError:()=>CI,ClientAuthErrorCodes:()=>ds,ClientAuthErrorMessage:()=>o0e,ClientConfigurationError:()=>G4,ClientConfigurationErrorCodes:()=>j4,ClientConfigurationErrorMessage:()=>u0e,ClientCredentialClient:()=>BI,ConfidentialClientApplication:()=>hD,CryptoProvider:()=>Zy,DeviceCodeClient:()=>fD,DistributedCachePlugin:()=>fV,InteractionRequiredAuthError:()=>dp,InteractionRequiredAuthErrorCodes:()=>aG,InteractionRequiredAuthErrorMessage:()=>gpe,LogLevel:()=>Fa,Logger:()=>lp,ManagedIdentityApplication:()=>gD,ManagedIdentitySourceNames:()=>zn,OnBehalfOfClient:()=>mD,PromptValue:()=>pI,ProtocolMode:()=>yd,PublicClientApplication:()=>pD,ResponseMode:()=>Vy,ServerError:()=>ef,TokenCache:()=>eD,TokenCacheContext:()=>fp,UsernamePasswordClient:()=>dD,internals:()=>Ape,version:()=>Yg});f();var Ape={};ma(Ape,{Deserializer:()=>Bv,Serializer:()=>fI});f();f();var fI=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};f();f();f();f();f();f();f();f();f();var rt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ti={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Kf=[rt.OPENID_SCOPE,rt.PROFILE_SCOPE,rt.OFFLINE_ACCESS_SCOPE],r0e=[...Kf,rt.EMAIL_SCOPE],Ps={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var Jf={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},x_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},pI={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Oj={PLAIN:"plain",S256:"S256"},F4={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var Vy={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Xf={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},b_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ka={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},To={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var u9="appmetadata",AMe="client_info",xv="1",O4={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Jd={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},El={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},oo={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},zy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},d9={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},f9={username:"username",password:"password"},I_={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Qj={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Es={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var Q4=300,Ru={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var U4={};ma(U4,{postRequestFailed:()=>m9,unexpectedError:()=>p9});f();var p9="unexpected_error",m9="post_request_failed";var Uj={[p9]:"Unexpected error in authentication.",[m9]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},n0e={unexpectedError:{code:p9,desc:Uj[p9]},postRequestFailed:{code:m9,desc:Uj[m9]}},ri=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||rt.EMPTY_STRING,this.errorMessage=r||rt.EMPTY_STRING,this.subError=n||rt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function i0e(t,e){return new ri(t,e?`${Uj[t]} ${e}`:Uj[t])}s(i0e,"createAuthError");var ds={};ma(ds,{authTimeNotFound:()=>bv,authorizationCodeMissingFromServerResponse:()=>Q_,bindingKeyNotRemoved:()=>T9,cannotAppendScopeSet:()=>M_,cannotRemoveEmptyScope:()=>L_,clientInfoDecodingError:()=>mI,clientInfoEmptyError:()=>T_,deviceCodeExpired:()=>y9,deviceCodePollingCancelled:()=>A9,deviceCodeUnknownError:()=>C9,emptyInputScopeSet:()=>AI,endSessionEndpointNotSupported:()=>U_,endpointResolutionError:()=>Xd,hashNotDeserialized:()=>R_,invalidAssertion:()=>x9,invalidCacheEnvironment:()=>Tv,invalidCacheRecord:()=>F_,invalidClientCredential:()=>b9,invalidState:()=>Gg,keyIdMissing:()=>q_,maxAgeTranspired:()=>D_,methodNotImplemented:()=>wi,missingTenantIdError:()=>_9,multipleMatchingAccounts:()=>g9,multipleMatchingAppMetadata:()=>B_,multipleMatchingTokens:()=>h9,nestedAppAuthBridgeDisabled:()=>R9,networkError:()=>S_,noAccountFound:()=>v9,noAccountInSilentRequest:()=>Iv,noCryptoObject:()=>yI,noNetworkConnectivity:()=>w9,nonceMismatch:()=>P_,nullOrEmptyToken:()=>w_,openIdConfigError:()=>__,requestCannotBeMade:()=>N_,stateMismatch:()=>k_,stateNotFound:()=>gI,tokenClaimsCnfRequiredForSignedJwt:()=>O_,tokenParsingError:()=>hI,tokenRefreshRequired:()=>wv,unexpectedCredentialType:()=>E9,userCanceled:()=>S9,userTimeoutReached:()=>I9});f();var mI="client_info_decoding_error",T_="client_info_empty_error",hI="token_parsing_error",w_="null_or_empty_token",Xd="endpoints_resolution_error",S_="network_error",__="openid_config_error",R_="hash_not_deserialized",Gg="invalid_state",k_="state_mismatch",gI="state_not_found",P_="nonce_mismatch",bv="auth_time_not_found",D_="max_age_transpired",h9="multiple_matching_tokens",g9="multiple_matching_accounts",B_="multiple_matching_appMetadata",N_="request_cannot_be_made",L_="cannot_remove_empty_scope",M_="cannot_append_scopeset",AI="empty_input_scopeset",A9="device_code_polling_cancelled",y9="device_code_expired",C9="device_code_unknown_error",Iv="no_account_in_silent_request",F_="invalid_cache_record",Tv="invalid_cache_environment",v9="no_account_found",yI="no_crypto_object",E9="unexpected_credential_type",x9="invalid_assertion",b9="invalid_client_credential",wv="token_refresh_required",I9="user_timeout_reached",O_="token_claims_cnf_required_for_signedjwt",Q_="authorization_code_missing_from_server_response",T9="binding_key_not_removed",U_="end_session_endpoint_not_supported",q_="key_id_missing",w9="no_network_connectivity",S9="user_canceled",_9="missing_tenant_id_error",wi="method_not_implemented",R9="nested_app_auth_bridge_disabled";var ni={[mI]:"The client info could not be parsed/decoded correctly",[T_]:"The client info was empty",[hI]:"Token cannot be parsed",[w_]:"The token is null or empty",[Xd]:"Endpoints cannot be resolved",[S_]:"Network request failed",[__]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[R_]:"The hash parameters could not be deserialized",[Gg]:"State was not the expected format",[k_]:"State mismatch error",[gI]:"State not found",[P_]:"Nonce mismatch error",[bv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[D_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[h9]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[g9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[B_]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[N_]:"Token request cannot be made without authorization code or refresh token.",[L_]:"Cannot remove null or empty scope from ScopeSet",[M_]:"Cannot append ScopeSet",[AI]:"Empty input ScopeSet cannot be processed",[A9]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[y9]:"Device code is expired.",[C9]:"Device code stopped polling for unknown reasons.",[Iv]:"Please pass an account object, silent flow is not supported without account information",[F_]:"Cache record object was null or undefined.",[Tv]:"Invalid environment when attempting to create cache entry",[v9]:"No account found in cache for given key.",[yI]:"No crypto object detected.",[E9]:"Unexpected credential type.",[x9]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[b9]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[wv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[I9]:"User defined timeout for device code polling reached",[O_]:"Cannot generate a POP jwt if the token_claims are not populated",[Q_]:"Server response does not contain an authorization code to proceed",[T9]:"Could not remove the credential's binding key from storage.",[U_]:"The provided authority does not support logout",[q_]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[w9]:"No network connectivity. Check your internet connection.",[S9]:"User cancelled the flow.",[_9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[wi]:"This method has not been implemented",[R9]:"The nested app auth bridge is disabled"},o0e={clientInfoDecodingError:{code:mI,desc:ni[mI]},clientInfoEmptyError:{code:T_,desc:ni[T_]},tokenParsingError:{code:hI,desc:ni[hI]},nullOrEmptyToken:{code:w_,desc:ni[w_]},endpointResolutionError:{code:Xd,desc:ni[Xd]},networkError:{code:S_,desc:ni[S_]},unableToGetOpenidConfigError:{code:__,desc:ni[__]},hashNotDeserialized:{code:R_,desc:ni[R_]},invalidStateError:{code:Gg,desc:ni[Gg]},stateMismatchError:{code:k_,desc:ni[k_]},stateNotFoundError:{code:gI,desc:ni[gI]},nonceMismatchError:{code:P_,desc:ni[P_]},authTimeNotFoundError:{code:bv,desc:ni[bv]},maxAgeTranspired:{code:D_,desc:ni[D_]},multipleMatchingTokens:{code:h9,desc:ni[h9]},multipleMatchingAccounts:{code:g9,desc:ni[g9]},multipleMatchingAppMetadata:{code:B_,desc:ni[B_]},tokenRequestCannotBeMade:{code:N_,desc:ni[N_]},removeEmptyScopeError:{code:L_,desc:ni[L_]},appendScopeSetError:{code:M_,desc:ni[M_]},emptyInputScopeSetError:{code:AI,desc:ni[AI]},DeviceCodePollingCancelled:{code:A9,desc:ni[A9]},DeviceCodeExpired:{code:y9,desc:ni[y9]},DeviceCodeUnknownError:{code:C9,desc:ni[C9]},NoAccountInSilentRequest:{code:Iv,desc:ni[Iv]},invalidCacheRecord:{code:F_,desc:ni[F_]},invalidCacheEnvironment:{code:Tv,desc:ni[Tv]},noAccountFound:{code:v9,desc:ni[v9]},noCryptoObj:{code:yI,desc:ni[yI]},unexpectedCredentialType:{code:E9,desc:ni[E9]},invalidAssertion:{code:x9,desc:ni[x9]},invalidClientCredential:{code:b9,desc:ni[b9]},tokenRefreshRequired:{code:wv,desc:ni[wv]},userTimeoutReached:{code:I9,desc:ni[I9]},tokenClaimsRequired:{code:O_,desc:ni[O_]},noAuthorizationCodeFromServer:{code:Q_,desc:ni[Q_]},bindingKeyNotRemovedError:{code:T9,desc:ni[T9]},logoutNotSupported:{code:U_,desc:ni[U_]},keyIdMissing:{code:q_,desc:ni[q_]},noNetworkConnectivity:{code:w9,desc:ni[w9]},userCanceledError:{code:S9,desc:ni[S9]},missingTenantIdError:{code:_9,desc:ni[_9]},nestedAppAuthBridgeDisabled:{code:R9,desc:ni[R9]}},CI=class t extends ri{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${ni[e]}: ${r}`:ni[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function Ct(t,e){return new CI(t,e)}s(Ct,"createClientAuthError");var q4={createNewGuid:s(()=>{throw Ct(wi)},"createNewGuid"),base64Decode:s(()=>{throw Ct(wi)},"base64Decode"),base64Encode:s(()=>{throw Ct(wi)},"base64Encode"),base64UrlEncode:s(()=>{throw Ct(wi)},"base64UrlEncode"),encodeKid:s(()=>{throw Ct(wi)},"encodeKid"),async getPublicKeyThumbprint(){throw Ct(wi)},async removeTokenBindingKey(){throw Ct(wi)},async clearKeystore(){throw Ct(wi)},async signJwt(){throw Ct(wi)},async hashString(){throw Ct(wi)}};f();var Fa;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Fa||(Fa={}));var lp=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Fa.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Fa.Info,this.correlationId=o.correlationId||rt.EMPTY_STRING,this.packageName=r||rt.EMPTY_STRING,this.packageVersion=n||rt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Fa.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Fa[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Fa.Error,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Fa.Error,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Fa.Warning,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Fa.Warning,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Fa.Info,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Fa.Info,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Fa.Verbose,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Fa.Verbose,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Fa.Trace,containsPii:!1,correlationId:r||rt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Fa.Trace,containsPii:!0,correlationId:r||rt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};f();var qj="@azure/msal-common",H4="15.8.1";f();var Sv={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};f();var xl={};ma(xl,{createAccessTokenEntity:()=>c0e,createIdTokenEntity:()=>a0e,createRefreshTokenEntity:()=>l0e,generateAppMetadataKey:()=>TRt,generateAuthorityMetadataExpiresAt:()=>Wj,generateCredentialKey:()=>D9,isAccessTokenEntity:()=>hRt,isAppMetadataEntity:()=>wRt,isAuthorityMetadataEntity:()=>SRt,isAuthorityMetadataExpired:()=>jj,isCredentialEntity:()=>$j,isIdTokenEntity:()=>gRt,isRefreshTokenEntity:()=>ARt,isServerTelemetryEntity:()=>bRt,isThrottlingEntity:()=>IRt,updateAuthorityEndpointMetadata:()=>W4,updateCloudDiscoveryMetadata:()=>B9});f();var Hj={};ma(Hj,{checkMaxAge:()=>k9,extractTokenClaims:()=>_v,getJWSPayload:()=>yMe});f();function _v(t,e){let r=yMe(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ct(hI)}}s(_v,"extractTokenClaims");function yMe(t){if(!t)throw Ct(w_);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ct(hI);return r[2]}s(yMe,"getJWSPayload");function k9(t,e){if(e===0||Date.now()-3e5>t+e)throw Ct(D_)}s(k9,"checkMaxAge");var Ys={};ma(Ys,{delay:()=>mRt,isTokenExpired:()=>$4,nowSeconds:()=>up,toDateFromSeconds:()=>P9,toSecondsFromDate:()=>pRt,wasClockTurnedBack:()=>s0e});f();function up(){return Math.round(new Date().getTime()/1e3)}s(up,"nowSeconds");function pRt(t){return t.getTime()/1e3}s(pRt,"toSecondsFromDate");function P9(t){return t?new Date(Number(t)*1e3):new Date}s(P9,"toDateFromSeconds");function $4(t,e){let r=Number(t)||0;return up()+e>r}s($4,"isTokenExpired");function s0e(t){return Number(t)>up()}s(s0e,"wasClockTurnedBack");function mRt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(mRt,"delay");function D9(t){return[yRt(t),CRt(t),vRt(t),ERt(t),xRt(t)].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}s(D9,"generateCredentialKey");function a0e(t,e,r,n,i){return{credentialType:To.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(a0e,"createIdTokenEntity");function c0e(t,e,r,n,i,o,a,c,l,u,d,p,m,h,g){let A={homeAccountId:t,credentialType:To.ACCESS_TOKEN,secret:r,cachedAt:up().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:d||oo.BEARER};if(p&&(A.userAssertionHash=p),u&&(A.refreshOn=u.toString()),h&&(A.requestedClaims=h,A.requestedClaimsHash=g),A.tokenType?.toLowerCase()!==oo.BEARER.toLowerCase())switch(A.credentialType=To.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case oo.POP:let y=_v(r,l);if(!y?.cnf?.kid)throw Ct(O_);A.keyId=y.cnf.kid;break;case oo.SSH:A.keyId=m}return A}s(c0e,"createAccessTokenEntity");function l0e(t,e,r,n,i,o,a){let c={credentialType:To.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(l0e,"createRefreshTokenEntity");function $j(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s($j,"isCredentialEntity");function hRt(t){return t?$j(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===To.ACCESS_TOKEN||t.credentialType===To.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(hRt,"isAccessTokenEntity");function gRt(t){return t?$j(t)&&t.hasOwnProperty("realm")&&t.credentialType===To.ID_TOKEN:!1}s(gRt,"isIdTokenEntity");function ARt(t){return t?$j(t)&&t.credentialType===To.REFRESH_TOKEN:!1}s(ARt,"isRefreshTokenEntity");function yRt(t){return[t.homeAccountId,t.environment].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}s(yRt,"generateAccountId");function CRt(t){let e=t.credentialType===To.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}s(CRt,"generateCredentialId");function vRt(t){return(t.target||"").toLowerCase()}s(vRt,"generateTarget");function ERt(t){return(t.requestedClaimsHash||"").toLowerCase()}s(ERt,"generateClaimsHash");function xRt(t){return t.tokenType&&t.tokenType.toLowerCase()!==oo.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(xRt,"generateScheme");function bRt(t,e){let r=t.indexOf(El.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(bRt,"isServerTelemetryEntity");function IRt(t,e){let r=!1;t&&(r=t.indexOf(zy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(IRt,"isThrottlingEntity");function TRt({environment:t,clientId:e}){return[u9,t,e].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}s(TRt,"generateAppMetadataKey");function wRt(t,e){return e?t.indexOf(u9)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(wRt,"isAppMetadataEntity");function SRt(t,e){return e?t.indexOf(O4.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(SRt,"isAuthorityMetadataEntity");function Wj(){return up()+O4.REFRESH_TIME_SECONDS}s(Wj,"generateAuthorityMetadataExpiresAt");function W4(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(W4,"updateAuthorityEndpointMetadata");function B9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(B9,"updateCloudDiscoveryMetadata");function jj(t){return t.expiresAt<=up()}s(jj,"isAuthorityMetadataExpired");f();f();var j4={};ma(j4,{authorityMismatch:()=>q9,authorityUriInsecure:()=>$_,cannotAllowPlatformBroker:()=>U9,cannotSetOIDCOptions:()=>Q9,claimsRequestParsingError:()=>N9,emptyInputScopesError:()=>j_,invalidAuthenticationHeader:()=>O9,invalidAuthorityMetadata:()=>Y_,invalidClaims:()=>vI,invalidCloudDiscoveryMetadata:()=>EI,invalidCodeChallengeMethod:()=>L9,logoutRequestEmpty:()=>V_,missingNonceAuthenticationHeader:()=>F9,missingSshJwk:()=>Rv,missingSshKid:()=>M9,pkceParamsMissing:()=>z_,redirectUriEmpty:()=>H_,tokenRequestEmpty:()=>G_,untrustedAuthority:()=>K_,urlEmptyError:()=>W_,urlParseError:()=>Yy});f();var H_="redirect_uri_empty",N9="claims_request_parsing_error",$_="authority_uri_insecure",Yy="url_parse_error",W_="empty_url_error",j_="empty_input_scopes_error",vI="invalid_claims",G_="token_request_empty",V_="logout_request_empty",L9="invalid_code_challenge_method",z_="pkce_params_missing",EI="invalid_cloud_discovery_metadata",Y_="invalid_authority_metadata",K_="untrusted_authority",Rv="missing_ssh_jwk",M9="missing_ssh_kid",F9="missing_nonce_authentication_header",O9="invalid_authentication_header",Q9="cannot_set_OIDCOptions",U9="cannot_allow_platform_broker",q9="authority_mismatch";var Ja={[H_]:"A redirect URI is required for all calls, and none has been set.",[N9]:"Could not parse the given claims request object.",[$_]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Yy]:"URL could not be parsed into appropriate segments.",[W_]:"URL was empty or null.",[j_]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[vI]:"Given claims parameter must be a stringified JSON object.",[G_]:"Token request was empty and not found in cache.",[V_]:"The logout request was null or undefined.",[L9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[z_]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[EI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Y_]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[K_]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Rv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[M9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[F9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[O9]:"Invalid authentication header provided",[Q9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[U9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[q9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},u0e={redirectUriNotSet:{code:H_,desc:Ja[H_]},claimsRequestParsingError:{code:N9,desc:Ja[N9]},authorityUriInsecure:{code:$_,desc:Ja[$_]},urlParseError:{code:Yy,desc:Ja[Yy]},urlEmptyError:{code:W_,desc:Ja[W_]},emptyScopesError:{code:j_,desc:Ja[j_]},invalidClaimsRequest:{code:vI,desc:Ja[vI]},tokenRequestEmptyError:{code:G_,desc:Ja[G_]},logoutRequestEmptyError:{code:V_,desc:Ja[V_]},invalidCodeChallengeMethod:{code:L9,desc:Ja[L9]},invalidCodeChallengeParams:{code:z_,desc:Ja[z_]},invalidCloudDiscoveryMetadata:{code:EI,desc:Ja[EI]},invalidAuthorityMetadata:{code:Y_,desc:Ja[Y_]},untrustedAuthority:{code:K_,desc:Ja[K_]},missingSshJwk:{code:Rv,desc:Ja[Rv]},missingSshKid:{code:M9,desc:Ja[M9]},missingNonceAuthenticationHeader:{code:F9,desc:Ja[F9]},invalidAuthenticationHeader:{code:O9,desc:Ja[O9]},cannotSetOIDCOptions:{code:Q9,desc:Ja[Q9]},cannotAllowPlatformBroker:{code:U9,desc:Ja[U9]},authorityMismatch:{code:q9,desc:Ja[q9]}},G4=class t extends ri{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Ja[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function ps(t){return new G4(t)}s(ps,"createClientConfigurationError");f();var xa=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var Gc=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?xa.trimArrayEntries([...e]):[],n=r?xa.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ps(j_);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||rt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(rt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return r0e.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ct(M_)}}removeScope(e){if(!e)throw Ct(L_);this.scopes.delete(e.trim())}removeOIDCScopes(){r0e.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ct(AI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ct(AI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):rt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};f();f();function V4(t,e){if(!t)throw Ct(T_);try{let r=e(t);return JSON.parse(r)}catch{throw Ct(mI)}}s(V4,"buildClientInfo");function Ky(t){if(!t)throw Ct(mI);let e=t.split(Ka.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?rt.EMPTY_STRING:e[1]}}s(Ky,"buildClientInfoFromHomeAccountId");f();function CMe(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(CMe,"tenantIdMatchesHomeTenant");function H9(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,d=a||l||u||"";return{tenantId:d,localAccountId:i||o||"",name:c,isHomeTenant:CMe(d,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:CMe(r,t)}}s(H9,"buildTenantProfile");function Gj(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=H9(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(Gj,"updateAccountTenantProfileData");f();var Dm={Default:0,Adfs:1,Dsts:2,Ciam:3};f();function Vj(t){return t&&(t.tid||t.tfp||t.acr)||null}s(Vj,"getTenantIdFromIdTokenClaims");f();var yd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var ku=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(Ka.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===Dm.Adfs?i.authorityType=b_.ADFS_ACCOUNT_TYPE:r.protocolMode===yd.OIDC?i.authorityType=b_.GENERIC_ACCOUNT_TYPE:i.authorityType=b_.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=V4(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw Ct(Tv);i.environment=a,i.realm=o?.utid||Vj(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=H9(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||b_.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===Dm.Adfs||r===Dm.Dsts)){if(e)try{let a=V4(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};f();f();var Pu={};ma(Pu,{getDeserializedResponse:()=>d0e,mapToQueryString:()=>Jy,stripLeadingHashOrQuery:()=>vMe});f();function vMe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(vMe,"stripLeadingHashOrQuery");function d0e(t){if(!t||t.indexOf("=")<0)return null;try{let e=vMe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ct(R_)}return null}s(d0e,"getDeserializedResponse");function Jy(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(Jy,"mapToQueryString");var Si=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ps(W_);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return xa.endsWith(r,"?")?r=r.slice(0,-1):xa.endsWith(r,"?/")&&(r=r.slice(0,-2)),xa.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ps(Yy)}if(!e.HostNameAndPort||!e.PathSegments)throw ps(Yy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ps($_)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Jf.COMMON||n[0]===Jf.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ps(Yy);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ps(Yy);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===rt.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!d0e(e)}};var xMe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},f0e=xMe.endpointMetadata,p0e=xMe.instanceDiscoveryMetadata,m0e=new Set;p0e.metadata.forEach(t=>{t.aliases.forEach(e=>{m0e.add(e)})});function bMe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new Si(n).getUrlComponents().HostNameAndPort;r=EMe(i,t.cloudDiscoveryMetadata?.metadata,Jd.CONFIG,e)||EMe(i,p0e.metadata,Jd.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(bMe,"getAliasesFromStaticSources");function EMe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=$9(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(EMe,"getAliasesFromMetadata");function IMe(t){return $9(p0e.metadata,t)}s(IMe,"getCloudDiscoveryMetadataFromHardcodedValues");function $9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s($9,"getCloudDiscoveryMetadataFromNetworkResponse");f();f();var h0e="cache_quota_exceeded",zj="cache_error_unknown";var g0e={[h0e]:"Exceeded cache storage capacity.",[zj]:"Unexpected error occurred when using cache storage."},W9=class t extends ri{static{s(this,"CacheError")}constructor(e,r){let n=r||(g0e[e]?g0e[e]:g0e[zj]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function TMe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new W9(h0e):new W9(t.name,t.message):new W9(zj)}s(TMe,"createCacheError");var xI=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(qj,H4),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=_v(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=Gj(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let d=this.getTenantedAccountInfoByFilter(o,c,u,r,i);d&&l.push(d)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw Ct(F_);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ri?i:TMe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=Gc.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&Gc.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(Ka.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Ka.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(To.ID_TOKEN.toLowerCase())===-1&&r.indexOf(To.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(To.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(To.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(To.REFRESH_TOKEN.toLowerCase())>-1){let n=`${To.REFRESH_TOKEN}${Ka.CACHE_KEY_SEPARATOR}${this.clientId}${Ka.CACHE_KEY_SEPARATOR}`,i=`${To.REFRESH_TOKEN}${Ka.CACHE_KEY_SEPARATOR}${xv}${Ka.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===To.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===oo.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==To.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==oo.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=ku.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:To.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let d=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&d.set(h,m)});let p=d.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=Gc.createSearchScopes(r.scopes),c=r.authenticationScheme||oo.BEARER,l=c&&c.toLowerCase()!==oo.BEARER.toLowerCase()?To.ACCESS_TOKEN_WITH_AUTH_SCHEME:To.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},d=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(D9(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?xv:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:To.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&n&&o.addFields({multiMatchedRT:d},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw Ct(B_);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===xv)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=bMe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==To.ACCESS_TOKEN&&e.credentialType!==To.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Gc.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(u9)!==-1}isAuthorityMetadata(e){return e.indexOf(O4.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${O4.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},j9=class extends xI{static{s(this,"DefaultStorageClass")}async setAccount(){throw Ct(wi)}getAccount(){throw Ct(wi)}async setIdTokenCredential(){throw Ct(wi)}getIdTokenCredential(){throw Ct(wi)}async setAccessTokenCredential(){throw Ct(wi)}getAccessTokenCredential(){throw Ct(wi)}async setRefreshTokenCredential(){throw Ct(wi)}getRefreshTokenCredential(){throw Ct(wi)}setAppMetadata(){throw Ct(wi)}getAppMetadata(){throw Ct(wi)}setServerTelemetry(){throw Ct(wi)}getServerTelemetry(){throw Ct(wi)}setAuthorityMetadata(){throw Ct(wi)}getAuthorityMetadata(){throw Ct(wi)}getAuthorityMetadataKeys(){throw Ct(wi)}setThrottlingCache(){throw Ct(wi)}getThrottlingCache(){throw Ct(wi)}removeItem(){throw Ct(wi)}getKeys(){throw Ct(wi)}getAccountKeys(){throw Ct(wi)}getTokenKeys(){throw Ct(wi)}};f();f();var Ke={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},Xzr=new Map([[Ke.AcquireTokenByCode,"ATByCode"],[Ke.AcquireTokenByRefreshToken,"ATByRT"],[Ke.AcquireTokenSilent,"ATS"],[Ke.AcquireTokenSilentAsync,"ATSAsync"],[Ke.AcquireTokenPopup,"ATPopup"],[Ke.AcquireTokenRedirect,"ATRedirect"],[Ke.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ke.CryptoOptsSignJwt,"CryptoSignJwt"],[Ke.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ke.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ke.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ke.SsoSilent,"SsoSlt"],[Ke.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ke.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ke.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ke.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ke.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ke.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ke.BrokerHandhshake,"BrokerHandshake"],[Ke.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ke.AcquireTokenByBroker,"ATByBroker"],[Ke.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ke.RefreshTokenClientAcquireToken,"RTClientAT"],[Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ke.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ke.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ke.AcquireTokenFromCache,"ATFromCache"],[Ke.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ke.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ke.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ke.InitializeBaseRequest,"InitBaseReq"],[Ke.InitializeSilentRequest,"InitSltReq"],[Ke.InitializeClientApplication,"InitClientApplication"],[Ke.InitializeCache,"InitCache"],[Ke.ImportExistingCache,"importCache"],[Ke.SetUserData,"setUserData"],[Ke.LocalStorageUpdated,"localStorageUpdated"],[Ke.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ke.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ke.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ke.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ke.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ke.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ke.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ke.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ke.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ke.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ke.HandleCodeResponse,"HandleCodeResp"],[Ke.HandleResponseEar,"HandleRespEar"],[Ke.HandleResponseCode,"HandleRespCode"],[Ke.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ke.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ke.AuthClientAcquireToken,"AuthClientAT"],[Ke.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ke.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ke.PopTokenGenerateCnf,"PopTGenCnf"],[Ke.PopTokenGenerateKid,"PopTGenKid"],[Ke.HandleServerTokenResponse,"HandleServerTRes"],[Ke.DeserializeResponse,"DeserializeRes"],[Ke.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ke.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ke.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ke.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ke.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ke.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ke.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ke.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ke.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ke.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ke.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ke.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ke.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ke.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ke.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ke.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ke.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ke.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ke.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ke.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ke.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ke.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ke.GeneratePkceCodes,"GenPkceCodes"],[Ke.GenerateCodeVerifier,"GenCodeVerifier"],[Ke.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ke.Sha256Digest,"Sha256Digest"],[Ke.GetRandomValues,"GetRandomValues"],[Ke.GenerateHKDF,"genHKDF"],[Ke.GenerateBaseKey,"genBaseKey"],[Ke.Base64Decode,"b64Decode"],[Ke.UrlEncodeArr,"urlEncArr"],[Ke.Encrypt,"encrypt"],[Ke.Decrypt,"decrypt"],[Ke.GenerateEarKey,"genEarKey"],[Ke.DecryptEarResponse,"decryptEarResp"]]),wMe={NotStarted:0,InProgress:1,Completed:2};var Yj=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},J_=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:wMe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new Yj}}startPerformanceMeasurement(){return new Yj}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var _Rt={tokenRenewalOffsetSeconds:Q4,preventCorsPreflight:!1},RRt={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Fa.Info,correlationId:rt.EMPTY_STRING},kRt={claimsBasedCachingEnabled:!1},PRt={async sendGetRequestAsync(){throw Ct(wi)},async sendPostRequestAsync(){throw Ct(wi)}},DRt={sku:rt.SKU,version:H4,cpu:rt.EMPTY_STRING,os:rt.EMPTY_STRING},BRt={clientSecret:rt.EMPTY_STRING,clientAssertion:void 0},NRt={azureCloudInstance:Sv.None,tenant:`${rt.DEFAULT_COMMON_TENANT}`},LRt={application:{appName:"",appVersion:""}};function SMe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:p,serializableCache:m}){let h={...RRt,...r};return{authOptions:MRt(t),systemOptions:{..._Rt,...e},loggerOptions:h,cacheOptions:{...kRt,...n},storageInterface:i||new j9(t.clientId,q4,new lp(h),new J_),networkInterface:o||PRt,cryptoInterface:a||q4,clientCredentials:c||BRt,libraryInfo:{...DRt,...l},telemetry:{...LRt,...u},serverTelemetryManager:d||null,persistencePlugin:p||null,serializableCache:m||null}}s(SMe,"buildClientConfiguration");function MRt(t){return{clientCapabilities:[],azureCloudOptions:NRt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(MRt,"buildAuthOptions");function Kj(t){return t.authOptions.authority.options.protocolMode===yd.OIDC}s(Kj,"isOidcProtocolMode");f();var Zd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var fr={};ma(fr,{addApplicationTelemetry:()=>z9,addAuthorizationCode:()=>ape,addBrokerParameters:()=>Dv,addCcsOid:()=>kv,addCcsUpn:()=>bI,addClaims:()=>n2,addClientAssertion:()=>J9,addClientAssertionType:()=>X9,addClientCapabilitiesToClaims:()=>_Me,addClientId:()=>t2,addClientInfo:()=>o2,addClientSecret:()=>K9,addCodeChallengeParams:()=>JRt,addCodeVerifier:()=>lpe,addCorrelationId:()=>i2,addDeviceCode:()=>XRt,addDomainHint:()=>ipe,addEARParameters:()=>nkt,addExtraQueryParameters:()=>Pv,addGrantType:()=>Z9,addIdTokenHint:()=>npe,addInstanceAware:()=>e6,addLibraryInfo:()=>V9,addLoginHint:()=>Y4,addLogoutHint:()=>upe,addNativeBroker:()=>KRt,addNonce:()=>spe,addOboAssertion:()=>ZRt,addPassword:()=>rkt,addPopToken:()=>t6,addPostLogoutRedirectUri:()=>rpe,addPrompt:()=>ope,addRedirectUri:()=>r2,addRefreshToken:()=>cpe,addRequestTokenUse:()=>ekt,addResponseMode:()=>tpe,addResponseType:()=>YRt,addScopes:()=>e2,addServerTelemetry:()=>n6,addSid:()=>rG,addSshJwk:()=>r6,addState:()=>Y9,addThrottling:()=>i6,addUsername:()=>tkt,instrumentBrokerParams:()=>Z_});f();var X_={};ma(X_,{ACCESS_TOKEN:()=>QRt,BROKER_CLIENT_ID:()=>G9,BROKER_REDIRECT_URI:()=>tG,CCS_HEADER:()=>VRt,CLAIMS:()=>v0e,CLIENT_ASSERTION:()=>W0e,CLIENT_ASSERTION_TYPE:()=>j0e,CLIENT_ID:()=>Xy,CLIENT_INFO:()=>WRt,CLIENT_REQUEST_ID:()=>k0e,CLIENT_SECRET:()=>$0e,CODE:()=>w0e,CODE_CHALLENGE:()=>S0e,CODE_CHALLENGE_METHOD:()=>_0e,CODE_VERIFIER:()=>R0e,DEVICE_CODE:()=>H0e,DOMAIN_HINT:()=>X0e,EAR_JWE_CRYPTO:()=>epe,EAR_JWK:()=>Z0e,ERROR:()=>FRt,ERROR_DESCRIPTION:()=>ORt,EXPIRES_IN:()=>qRt,FOCI:()=>GRt,GRANT_TYPE:()=>C0e,ID_TOKEN:()=>URt,ID_TOKEN_HINT:()=>q0e,INSTANCE_AWARE:()=>z4,LOGIN_HINT:()=>J0e,LOGOUT_HINT:()=>Y0e,NATIVE_BROKER:()=>z0e,NONCE:()=>I0e,OBO_ASSERTION:()=>G0e,ON_BEHALF_OF:()=>jRt,POST_LOGOUT_URI:()=>U0e,PROMPT:()=>T0e,REDIRECT_URI:()=>Jj,REFRESH_TOKEN:()=>x0e,REFRESH_TOKEN_EXPIRES_IN:()=>HRt,REQUESTED_TOKEN_USE:()=>V0e,REQ_CNF:()=>Zj,RESPONSE_MODE:()=>y0e,RESPONSE_TYPE:()=>A0e,RETURN_SPA_CODE:()=>eG,SCOPE:()=>E0e,SESSION_STATE:()=>$Rt,SID:()=>K0e,STATE:()=>b0e,TOKEN_TYPE:()=>Xj,X_APP_NAME:()=>O0e,X_APP_VER:()=>Q0e,X_CLIENT_CPU:()=>N0e,X_CLIENT_CURR_TELEM:()=>L0e,X_CLIENT_EXTRA_SKU:()=>zRt,X_CLIENT_LAST_TELEM:()=>M0e,X_CLIENT_OS:()=>B0e,X_CLIENT_SKU:()=>P0e,X_CLIENT_VER:()=>D0e,X_MS_LIB_CAPABILITY:()=>F0e});f();var Xy="client_id",Jj="redirect_uri",A0e="response_type",y0e="response_mode",C0e="grant_type",v0e="claims",E0e="scope",FRt="error",ORt="error_description",QRt="access_token",URt="id_token",x0e="refresh_token",qRt="expires_in",HRt="refresh_token_expires_in",b0e="state",I0e="nonce",T0e="prompt",$Rt="session_state",WRt="client_info",w0e="code",S0e="code_challenge",_0e="code_challenge_method",R0e="code_verifier",k0e="client-request-id",P0e="x-client-SKU",D0e="x-client-VER",B0e="x-client-OS",N0e="x-client-CPU",L0e="x-client-current-telemetry",M0e="x-client-last-telemetry",F0e="x-ms-lib-capability",O0e="x-app-name",Q0e="x-app-ver",U0e="post_logout_redirect_uri",q0e="id_token_hint",H0e="device_code",$0e="client_secret",W0e="client_assertion",j0e="client_assertion_type",Xj="token_type",Zj="req_cnf",G0e="assertion",V0e="requested_token_use",jRt="on_behalf_of",GRt="foci",VRt="X-AnchorMailbox",eG="return_spa_code",z0e="nativebroker",Y0e="logout_hint",K0e="sid",J0e="login_hint",X0e="domain_hint",zRt="x-client-xtra-sku",G9="brk_client_id",tG="brk_redirect_uri",z4="instance_aware",Z0e="ear_jwk",epe="ear_jwe_crypto";function Z_(t,e,r){if(!e)return;let n=t.get(Xy);n&&t.has(G9)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(Jj)},e)}s(Z_,"instrumentBrokerParams");function YRt(t,e){t.set(A0e,e)}s(YRt,"addResponseType");function tpe(t,e){t.set(y0e,e||Vy.QUERY)}s(tpe,"addResponseMode");function KRt(t){t.set(z0e,"1")}s(KRt,"addNativeBroker");function e2(t,e,r=!0,n=Kf){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new Gc(i);t.set(E0e,o.printScopes())}s(e2,"addScopes");function t2(t,e){t.set(Xy,e)}s(t2,"addClientId");function r2(t,e){t.set(Jj,e)}s(r2,"addRedirectUri");function rpe(t,e){t.set(U0e,e)}s(rpe,"addPostLogoutRedirectUri");function npe(t,e){t.set(q0e,e)}s(npe,"addIdTokenHint");function ipe(t,e){t.set(X0e,e)}s(ipe,"addDomainHint");function Y4(t,e){t.set(J0e,e)}s(Y4,"addLoginHint");function bI(t,e){t.set(Ps.CCS_HEADER,`UPN:${e}`)}s(bI,"addCcsUpn");function kv(t,e){t.set(Ps.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(kv,"addCcsOid");function rG(t,e){t.set("sid",e)}s(rG,"addSid");function n2(t,e,r){let n=_Me(e,r);try{JSON.parse(n)}catch{throw ps(vI)}t.set(v0e,n)}s(n2,"addClaims");function i2(t,e){t.set(k0e,e)}s(i2,"addCorrelationId");function V9(t,e){t.set(P0e,e.sku),t.set(D0e,e.version),e.os&&t.set(B0e,e.os),e.cpu&&t.set(N0e,e.cpu)}s(V9,"addLibraryInfo");function z9(t,e){e?.appName&&t.set(O0e,e.appName),e?.appVersion&&t.set(Q0e,e.appVersion)}s(z9,"addApplicationTelemetry");function ope(t,e){t.set(T0e,e)}s(ope,"addPrompt");function Y9(t,e){e&&t.set(b0e,e)}s(Y9,"addState");function spe(t,e){t.set(I0e,e)}s(spe,"addNonce");function JRt(t,e,r){if(e&&r)t.set(S0e,e),t.set(_0e,r);else throw ps(z_)}s(JRt,"addCodeChallengeParams");function ape(t,e){t.set(w0e,e)}s(ape,"addAuthorizationCode");function XRt(t,e){t.set(H0e,e)}s(XRt,"addDeviceCode");function cpe(t,e){t.set(x0e,e)}s(cpe,"addRefreshToken");function lpe(t,e){t.set(R0e,e)}s(lpe,"addCodeVerifier");function K9(t,e){t.set($0e,e)}s(K9,"addClientSecret");function J9(t,e){e&&t.set(W0e,e)}s(J9,"addClientAssertion");function X9(t,e){e&&t.set(j0e,e)}s(X9,"addClientAssertionType");function ZRt(t,e){t.set(G0e,e)}s(ZRt,"addOboAssertion");function ekt(t,e){t.set(V0e,e)}s(ekt,"addRequestTokenUse");function Z9(t,e){t.set(C0e,e)}s(Z9,"addGrantType");function o2(t){t.set(AMe,"1")}s(o2,"addClientInfo");function e6(t){t.has(z4)||t.set(z4,"true")}s(e6,"addInstanceAware");function Pv(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(Pv,"addExtraQueryParameters");function _Me(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw ps(vI)}return e&&e.length>0&&(r.hasOwnProperty(x_.ACCESS_TOKEN)||(r[x_.ACCESS_TOKEN]={}),r[x_.ACCESS_TOKEN][x_.XMS_CC]={values:e}),JSON.stringify(r)}s(_Me,"addClientCapabilitiesToClaims");function tkt(t,e){t.set(f9.username,e)}s(tkt,"addUsername");function rkt(t,e){t.set(f9.password,e)}s(rkt,"addPassword");function t6(t,e){e&&(t.set(Xj,oo.POP),t.set(Zj,e))}s(t6,"addPopToken");function r6(t,e){e&&(t.set(Xj,oo.SSH),t.set(Zj,e))}s(r6,"addSshJwk");function n6(t,e){t.set(L0e,e.generateCurrentRequestHeaderValue()),t.set(M0e,e.generateLastRequestHeaderValue())}s(n6,"addServerTelemetry");function i6(t){t.set(F0e,zy.X_MS_LIB_CAPABILITY_VALUE)}s(i6,"addThrottling");function upe(t,e){t.set(Y0e,e)}s(upe,"addLogoutHint");function Dv(t,e,r){t.has(G9)||t.set(G9,e),t.has(tG)||t.set(tG,r)}s(Dv,"addBrokerParameters");function nkt(t,e){t.set(Z0e,encodeURIComponent(e)),t.set(epe,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(nkt,"addEARParameters");var iG={};ma(iG,{createDiscoveredInstance:()=>fpe});f();f();f();function RMe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(RMe,"isOpenIdConfigResponse");f();function kMe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(kMe,"isCloudInstanceDiscoveryResponse");f();function PMe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(PMe,"isCloudInstanceDiscoveryErrorResponse");f();f();var DMe=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),so=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var o6=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=I_.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await so(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(rt.IMDS_VERSION,i);if(o.status===ti.SUCCESS&&(n=o.body,r.region_source=I_.IMDS),o.status===ti.BAD_REQUEST){let a=await so(this.getCurrentVersion.bind(this),Ke.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=I_.FAILED_AUTO_DETECTION,null;let c=await so(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===ti.SUCCESS&&(n=c.body,r.region_source=I_.IMDS)}}catch{return r.region_source=I_.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=I_.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,rt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${rt.IMDS_ENDPOINT}?format=json`,e);return r.status===ti.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};o6.IMDS_OPTIONS={headers:{Metadata:"true"}};var Vg=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new o6(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL))return Dm.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case rt.ADFS:return Dm.Adfs;case rt.DSTS:return Dm.Dsts}return Dm.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Si(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ct(Xd)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ct(Xd)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ct(Xd)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ct(U_);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ct(Xd)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ct(Xd)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ct(Xd)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Dm.Default&&this.protocolMode!==yd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new Si(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let d=new Si(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Dm.Adfs||this.protocolMode===yd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await so(this.updateCloudDiscoveryMetadata.bind(this),Ke.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await so(this.updateEndpointMetadata.bind(this),Ke.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Wj(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Jd.CACHE&&n?.source!==Jd.CACHE&&(e.expiresAt=Wj(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Jd.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await so(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);W4(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await so(this.getEndpointMetadataFromNetwork.bind(this),Ke.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await so(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),W4(e,n,!0),Jd.NETWORK;throw Ct(__,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),W4(e,r,!1),{source:Jd.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return W4(e,i,!1),{source:Jd.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=jj(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Jd.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Si(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ps(Y_)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return RMe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in f0e?f0e[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==rt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Qj.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await so(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ke.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=Qj.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=Qj.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await so(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return B9(e,n,!0),Jd.NETWORK;throw ps(K_)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||rt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||rt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),B9(e,r,!1),Jd.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=IMe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),B9(e,i,!1),Jd.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=jj(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Jd.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Dm.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=$9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ps(EI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${rt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(kMe(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(PMe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===rt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=$9(a,this.hostnameAndPort)}catch(i){if(i instanceof ri)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Si.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Sv.None){let i=r.tenant?r.tenant:rt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return rt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ct(Xd)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return m0e.has(e)}static isPublicCloudAuthority(e){return rt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new Si(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${rt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=Si.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new Si(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(rt.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${rt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};Vg.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Jf.COMMON,Jf.CONSUMERS,Jf.ORGANIZATIONS]);function BMe(t){let n=new Si(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Jf.COMMON:case Jf.ORGANIZATIONS:case Jf.CONSUMERS:return;default:return n}}s(BMe,"getTenantFromAuthorityString");function nG(t){return t.endsWith(rt.FORWARD_SLASH)?t:`${t}${rt.FORWARD_SLASH}`}s(nG,"formatAuthorityUri");function dpe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ps(EI)}return{canonicalAuthority:t.authority?nG(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(dpe,"buildStaticAuthorityOptions");async function fpe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ke.AuthorityFactoryCreateDiscoveredInstance,o);let c=Vg.transformCIAMAuthority(nG(t)),l=new Vg(c,e,r,n,i,o,a);try{return await so(l.resolveEndpointsAsync.bind(l),Ke.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw Ct(Xd)}}s(fpe,"createDiscoveredInstance");f();f();var ef=class t extends ri{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};f();function K4(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(K4,"getRequestThumbprint");var s6=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${zy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new ef(o.errorCodes?.join(" ")||rt.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Ps.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ps.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||zy.DEFAULT_THROTTLE_TIME_SECONDS),n+zy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=K4(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};f();var oG=class t extends ri{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var Du=class{static{s(this,"BaseClient")}constructor(e,r){this.config=SMe(e),this.logger=new lp(this.config.loggerOptions,qj,H4),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Ps.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Zd.HOME_ACCOUNT_ID:try{let n=Ky(e.credential);r[Ps.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Zd.UPN:r[Ps.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){s6.preProcess(this.cacheManager,e,i);let o;try{o=await so(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ke.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Ps.X_MS_HTTP_VERSION]||"",requestId:a[Ps.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof oG){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Ps.X_MS_HTTP_VERSION]||"",requestId:c[Ps.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Ps.CONTENT_TYPE]||void 0,contentLengthHeader:c[Ps.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof ri?a:Ct(S_)}return s6.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ke.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await fpe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&Dv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Pv(r,e.tokenQueryParameters),i2(r,e.correlationId),Z_(r,e.correlationId,this.performanceClient),Jy(r)}};f();f();var aG={};ma(aG,{badToken:()=>TI,consentRequired:()=>mpe,interactionRequired:()=>ppe,loginRequired:()=>hpe,nativeAccountUnavailable:()=>a6,noTokensFound:()=>II,refreshTokenExpired:()=>c6,uxNotAllowed:()=>sG});f();var II="no_tokens_found",a6="native_account_unavailable",c6="refresh_token_expired",sG="ux_not_allowed",ppe="interaction_required",mpe="consent_required",hpe="login_required",TI="bad_token";var NMe=[ppe,mpe,hpe,TI,sG],ikt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],cG={[II]:"No refresh token found in the cache. Please sign-in.",[a6]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[c6]:"Refresh token has expired.",[TI]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[sG]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},gpe={noTokensFoundError:{code:II,desc:cG[II]},native_account_unavailable:{code:a6,desc:cG[a6]},bad_token:{code:TI,desc:cG[TI]}},dp=class t extends ri{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||rt.EMPTY_STRING,this.traceId=o||rt.EMPTY_STRING,this.correlationId=a||rt.EMPTY_STRING,this.claims=c||rt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function lG(t,e,r){let n=!!t&&NMe.indexOf(t)>-1,i=!!r&&ikt.indexOf(r)>-1,o=!!e&&NMe.some(a=>e.indexOf(a)>-1);return n||o||i}s(lG,"isInteractionRequiredError");function uG(t){return new dp(t,cG[t])}s(uG,"createInteractionRequiredAuthError");f();var dG=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${rt.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ct(yI);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ct(yI);if(!r)throw Ct(Gg);try{let n=r.split(rt.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(rt.RESOURCE_DELIM):rt.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||rt.EMPTY_STRING,libraryState:c}}catch{throw Ct(Gg)}}};f();var okt={SW:"sw"},wI=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateCnf,e.correlationId);let n=await so(this.generateKid.bind(this),Ke.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:okt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new Si(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:up(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};f();var fp=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Ic=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||rt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||rt.NOT_AVAILABLE} - Description: ${e.error_description||rt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||rt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||rt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new ef(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=ti.SERVER_ERROR_RANGE_START&&e.status<=ti.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=ti.CLIENT_ERROR_RANGE_START&&e.status<=ti.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw lG(e.error,e.error_description,e.suberror)?new dp(e.error,e.error_description,e.suberror,e.timestamp||rt.EMPTY_STRING,e.trace_id||rt.EMPTY_STRING,e.correlation_id||rt.EMPTY_STRING,e.claims||rt.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ke.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=_v(e.id_token||rt.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&d.nonce!==o.nonce)throw Ct(P_);if(i.maxAge||i.maxAge===0){let g=d.auth_time;if(!g)throw Ct(bv);k9(g,i.maxAge)}}this.homeAccountIdentifier=ku.generateHomeAccountId(e.client_info||rt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,d);let p;o&&o.state&&(p=dG.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,d,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new fp(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,d,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,d,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw Ct(Tv);let u=Vj(o),d,p;e.id_token&&o&&(d=a0e(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=LMe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let A=e.scope?Gc.fromString(e.scope):new Gc(i.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,x=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,I=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,S=n+y,R=S+x,B=I&&I>0?n+I:void 0;m=c0e(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",A.printScopes(),S,R,this.cryptoObj.base64Decode,B,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=n+y}h=l0e(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,A)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:d,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let d=rt.EMPTY_STRING,p=[],m=null,h,g,A=rt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===oo.POP&&!o.popKid){let S=new wI(e),{secret:R,keyId:B}=n.accessToken;if(!B)throw Ct(q_);d=await S.signPopToken(R,B,o)}else d=n.accessToken.secret;p=Gc.fromString(n.accessToken.target).asArray(),m=P9(n.accessToken.expiresOn),h=P9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=P9(n.accessToken.refreshOn))}n.appMetadata&&(A=n.appMetadata.familyId===xv?xv:"");let y=a?.oid||a?.sub||"",x=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let I=n.account?Gj(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:y,tenantId:x,scopes:p,account:I,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:d,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||rt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||rt.EMPTY_STRING,state:c?c.userRequestState:rt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||rt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||rt.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function LMe(t,e,r,n,i,o,a,c,l,u,d,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(I=>I.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let A=g||ku.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:d},e,n),y=A.tenantProfiles||[],x=l||A.realm;if(x&&!y.find(I=>I.tenantId===x)){let I=H9(r,A.localAccountId,x,o);y.push(I)}return A.tenantProfiles=y,A}s(LMe,"buildAccountToCache");f();async function tf(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(tf,"getClientAssertion");var l6=class extends Du{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ke.AuthClientAcquireToken,e.correlationId),!e.code)throw Ct(N_);let n=up(),i=await so(this.executeTokenRequest.bind(this),Ke.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Ps.X_MS_REQUEST_ID],a=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),so(a.handleServerTokenResponse.bind(a),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw ps(V_);let r=this.createLogoutUrlQueryString(e);return Si.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=Si.appendQueryString(e.tokenEndpoint,n),o=await so(this.createTokenRequestBody.bind(this),Ke.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=V4(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ka.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Zd.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=K4(this.config.authOptions.clientId,r);return so(this.executePostToTokenEndpoint.bind(this),Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ke.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(t2(r,e.embeddedClientId||e.tokenBodyParameters?.[Xy]||this.config.authOptions.clientId),this.includeRedirectUri)r2(r,e.redirectUri);else if(!e.redirectUri)throw ps(H_);if(e2(r,e.scopes,!0,this.oidcDefaultScopes),ape(r,e.code),V9(r,this.config.libraryInfo),z9(r,this.config.telemetry.application),i6(r),this.serverTelemetryManager&&!Kj(this.config)&&n6(r,this.serverTelemetryManager),e.codeVerifier&&lpe(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&K9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;J9(r,await tf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),X9(r,i.assertionType)}if(Z9(r,Xf.AUTHORIZATION_CODE_GRANT),o2(r),e.authenticationScheme===oo.POP){let i=new wI(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await so(i.generateCnf.bind(i),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t6(r,o)}else if(e.authenticationScheme===oo.SSH)if(e.sshJwk)r6(r,e.sshJwk);else throw ps(Rv);(!xa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n2(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=V4(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${Ka.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Zd.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Zd.HOME_ACCOUNT_ID:try{let i=Ky(n.credential);kv(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Zd.UPN:bI(r,n.credential);break}return e.embeddedClientId&&Dv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pv(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[eG])&&Pv(r,{[eG]:"1"}),Z_(r,e.correlationId,this.performanceClient),Jy(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&rpe(r,e.postLogoutRedirectUri),e.correlationId&&i2(r,e.correlationId),e.idTokenHint&&npe(r,e.idTokenHint),e.state&&Y9(r,e.state),e.logoutHint&&upe(r,e.logoutHint),e.extraQueryParameters&&Pv(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&e6(r),Jy(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};f();var skt=300,s2=class extends Du{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireToken,e.correlationId);let r=up(),n=await so(this.executeTokenRequest.bind(this),Ke.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Ps.X_MS_REQUEST_ID],o=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),so(o.handleServerTokenResponse.bind(o),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ps(G_);if(this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ct(Iv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await so(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof dp&&n.errorCode===II,o=n instanceof ef&&n.errorCode===d9.INVALID_GRANT_ERROR&&n.subError===d9.CLIENT_MISMATCH_ERROR;if(i||o)return so(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return so(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=DMe(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ke.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw uG(II);if(n.expiresOn&&$4(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||skt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),uG(c6);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||oo.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Zd.HOME_ACCOUNT_ID}};try{return await so(this.acquireToken.bind(this),Ke.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof dp&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===TI)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=D9(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=Si.appendQueryString(r.tokenEndpoint,n),o=await so(this.createTokenRequestBody.bind(this),Ke.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=K4(this.config.authOptions.clientId,e);return so(this.executePostToTokenEndpoint.bind(this),Ke.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ke.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(t2(r,e.embeddedClientId||e.tokenBodyParameters?.[Xy]||this.config.authOptions.clientId),e.redirectUri&&r2(r,e.redirectUri),e2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Z9(r,Xf.REFRESH_TOKEN_GRANT),o2(r),V9(r,this.config.libraryInfo),z9(r,this.config.telemetry.application),i6(r),this.serverTelemetryManager&&!Kj(this.config)&&n6(r,this.serverTelemetryManager),cpe(r,e.refreshToken),this.config.clientCredentials.clientSecret&&K9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;J9(r,await tf(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),X9(r,n.assertionType)}if(e.authenticationScheme===oo.POP){let n=new wI(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await so(n.generateCnf.bind(n),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t6(r,i)}else if(e.authenticationScheme===oo.SSH)if(e.sshJwk)r6(r,e.sshJwk);else throw ps(Rv);if((!xa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n2(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Zd.HOME_ACCOUNT_ID:try{let n=Ky(e.ccsCredential.credential);kv(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Zd.UPN:bI(r,e.ccsCredential.credential);break}return e.embeddedClientId&&Dv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pv(r,e.tokenBodyParameters),Z_(r,e.correlationId,this.performanceClient),Jy(r)}};f();var u6=class extends Du{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Es.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!xa.isEmptyObj(e.claims))throw this.setCacheOutcome(Es.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ct(wv);if(!e.account)throw Ct(Iv);let n=e.account.tenantId||BMe(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(s0e(o.cachedAt)||$4(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ct(wv);o.refreshOn&&$4(o.refreshOn,0)&&(r=Es.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ct(wv);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await so(this.generateResultFromCacheRecord.bind(this),Ke.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Es.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=_v(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ct(bv);k9(i,r.maxAge)}return Ic.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var d6={};ma(d6,{getAuthorizationCodePayload:()=>lkt,getAuthorizeUrl:()=>ckt,getStandardAuthorizeRequestParameters:()=>akt,validateAuthorizationResponse:()=>MMe});f();function akt(t,e,r,n){let i=e.correlationId,o=new Map;t2(o,e.embeddedClientId||e.extraQueryParameters?.[Xy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(e2(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),r2(o,e.redirectUri),i2(o,i),tpe(o,e.responseMode),o2(o),e.prompt&&(ope(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(ipe(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==pI.SELECT_ACCOUNT)if(e.sid&&e.prompt===pI.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),rG(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=dkt(e.account),l=fkt(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Y4(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=Ky(e.account.homeAccountId);kv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===pI.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),rG(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=Ky(e.account.homeAccountId);kv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Y4(o,e.loginHint),bI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Y4(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=Ky(e.account.homeAccountId);kv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Y4(o,e.loginHint),bI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&spe(o,e.nonce),e.state&&Y9(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&n2(o,e.claims,t.clientCapabilities),e.embeddedClientId&&Dv(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(z4))&&e6(o),o}s(akt,"getStandardAuthorizeRequestParameters");function ckt(t,e,r,n){let i=Jy(e,r,n);return Si.appendQueryString(t.authorizationEndpoint,i)}s(ckt,"getAuthorizeUrl");function lkt(t,e){if(MMe(t,e),!t.code)throw Ct(Q_);return t}s(lkt,"getAuthorizationCodePayload");function MMe(t,e){if(!t.state||!e)throw t.state?Ct(gI,"Cached State"):Ct(gI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ct(Gg,t.state)}try{n=decodeURIComponent(e)}catch{throw Ct(Gg,t.state)}if(r!==n)throw Ct(k_);if(t.error||t.error_description||t.suberror){let i=ukt(t);throw lG(t.error,t.error_description,t.suberror)?new dp(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new ef(t.error||"",t.error_description,t.suberror,i)}}s(MMe,"validateAuthorizationResponse");function ukt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(ukt,"parseServerErrorNo");function dkt(t){return t.idTokenClaims?.sid||null}s(dkt,"extractAccountSid");function fkt(t){return t.idTokenClaims?.login_hint||null}s(fkt,"extractLoginHint");f();var FMe=",",OMe="|";function pkt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(FMe),c.length<4)return e}else c=Array.from({length:4},()=>OMe);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&mkt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(FMe)}s(pkt,"makeExtraSkuString");function mkt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(OMe))}s(mkt,"setSku");var a2=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=Es.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||rt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||rt.EMPTY_STRING,this.telemetryCacheKey=El.CACHE_KEY+Ka.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${El.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(El.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(El.VALUE_SEPARATOR);return[El.SCHEMA_VERSION,a,i].join(El.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(El.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(El.VALUE_SEPARATOR),o=e.errors.length,a=r<o?El.OVERFLOW_TRUE:El.OVERFLOW_FALSE,c=[o,a].join(El.VALUE_SEPARATOR);return[El.SCHEMA_VERSION,e.cacheHits,n,i,c].join(El.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=El.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ri?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(El.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||rt.EMPTY_STRING,c=e.failedRequests[2*r+1]||rt.EMPTY_STRING,l=e.errors[r]||rt.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<El.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||rt.EMPTY_STRING),e.push(this.regionSource||rt.EMPTY_STRING),e.push(this.regionOutcome||rt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return pkt(e)}};var Bv=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new ku;xI.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};f();f();var QMe="system_assigned_managed_identity",vkt="managed_identity",ype=`https://login.microsoftonline.com/${vkt}/`,Zf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},Vc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},On={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},zn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Oa={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Ks={GET:"get",POST:"post"},fG={SUCCESS_RANGE_START:ti.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ti.SUCCESS_RANGE_END,SERVER_ERROR:ti.SERVER_ERROR},UMe="REGION_NAME",qMe="MSAL_FORCE_REGION",HMe=32,$Me={SHA256:"sha256"},pG={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},bl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Nv={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Bm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},mG={INTERVAL_MS:100,TIMEOUT_MS:5e3},WMe=4096;f();f();f();f();var J4=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var hG=Fe(require("http"),1),Cpe=Fe(require("https"),1);var X4=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?jMe(e,this.proxyUrl,Ks.GET,r,this.customAgentOptions,n):GMe(e,Ks.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?jMe(e,this.proxyUrl,Ks.POST,r,this.customAgentOptions):GMe(e,Ks.POST,r,this.customAgentOptions)}},jMe=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new hG.default.Agent(i));let d="";if(r===Ks.POST){let m=n?.body||"";d=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+d+`\r
`;return new Promise((m,h)=>{let g=hG.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(A,y)=>{let x=A?.statusCode||fG.SERVER_ERROR;(x<fG.SUCCESS_RANGE_START||x>fG.SUCCESS_RANGE_END)&&(g.destroy(),y.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${A.statusCode}. Http status message: ${A?.statusMessage||"Unknown"}`))),y.write(p);let I=[];y.on("data",S=>{I.push(S)}),y.on("end",()=>{let R=Buffer.concat([...I]).toString().split(`\r
`),B=parseInt(R[0].split(" ")[1]),M=R[0].split(" ").slice(2).join(" "),O=R[R.length-1],K=R.slice(1,R.length-2),V=new Map;K.forEach(Z=>{let J=Z.split(new RegExp(/:\s(.*)/s)),j=J[0],$=J[1];try{let X=JSON.parse($);X&&typeof X=="object"&&($=X)}catch{}V.set(j,$)});let Q=Object.fromEntries(V),U=J4.getNetworkResponse(Q,VMe(B,M,Q,O),B);(B<ti.SUCCESS_RANGE_START||B>ti.SUCCESS_RANGE_END)&&U.body.error!==bl.AUTHORIZATION_PENDING&&g.destroy(),m(U)}),y.on("error",S=>{g.destroy(),y.destroy(),h(new Error(S.toString()))})}),g.on("error",A=>{g.destroy(),h(new Error(A.toString()))})})},"networkRequestViaProxy"),GMe=s((t,e,r,n,i)=>{let o=e===Ks.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...J4.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new Cpe.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((d,p)=>{let m;u.protocol==="http:"?m=hG.default.request(u):m=Cpe.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,A=h.statusCode,y=h.statusMessage,x=[];h.on("data",I=>{x.push(I)}),h.on("end",()=>{let I=Buffer.concat([...x]).toString(),S=g,R=J4.getNetworkResponse(S,VMe(A,y,S,I),A);(A<ti.SUCCESS_RANGE_START||A>ti.SUCCESS_RANGE_END)&&R.body.error!==bl.AUTHORIZATION_PENDING&&m.destroy(),d(R)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),VMe=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=ti.CLIENT_ERROR_RANGE_START&&t<=ti.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=ti.SERVER_ERROR_RANGE_START&&t<=ti.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");f();f();f();var gG="invalid_file_extension",AG="invalid_file_path",SI="invalid_managed_identity_id_type",yG="invalid_secret",zMe="missing_client_id",YMe="network_unavailable",CG="platform_not_supported",vG="unable_to_create_azure_arc",EG="unable_to_create_cloud_shell",xG="unable_to_create_source",f6="unable_to_read_secret_file",KMe="user_assigned_not_available_at_runtime",bG="www_authenticate_header_missing",IG="www_authenticate_header_unsupported_format",c2={[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[On.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[On.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[On.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var Ekt={[gG]:"The file path in the WWW-Authenticate header does not contain a .key file.",[AG]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[SI]:"More than one ManagedIdentityIdType was provided.",[yG]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[CG]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[zMe]:"A ManagedIdentityId id was not provided.",[c2.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${On.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[c2.IDENTITY_ENDPOINT]:`The Managed Identity's '${On.IDENTITY_ENDPOINT}' environment variable is malformed.`,[c2.IMDS_ENDPOINT]:`The Managed Identity's '${On.IMDS_ENDPOINT}' environment variable is malformed.`,[c2.MSI_ENDPOINT]:`The Managed Identity's '${On.MSI_ENDPOINT}' environment variable is malformed.`,[YMe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[vG]:"Azure Arc Managed Identities can only be system assigned.",[EG]:"Cloud Shell Managed Identities can only be system assigned.",[xG]:"Unable to create a Managed Identity source based on environment variables.",[f6]:"Unable to read the secret file.",[KMe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[bG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[IG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},vpe=class t extends ri{static{s(this,"ManagedIdentityError")}constructor(e){super(e,Ekt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Tc(t){return new vpe(t)}s(Tc,"createManagedIdentityError");var TG=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw Tc(SI);this.id=r,this.idType=Oa.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw Tc(SI);this.id=n,this.idType=Oa.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw Tc(SI);this.id=i,this.idType=Oa.USER_ASSIGNED_OBJECT_ID}else this.id=QMe,this.idType=Oa.SYSTEM_ASSIGNED}};f();var Vl={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},e0=class t extends ri{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(Vl.invalidLoopbackAddressType.code,`${Vl.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(Vl.unableToLoadRedirectUri.code,`${Vl.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(Vl.noAuthCodeInResponse.code,`${Vl.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(Vl.noLoopbackServerExists.code,`${Vl.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(Vl.loopbackServerAlreadyExists.code,`${Vl.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(Vl.loopbackServerTimeout.code,`${Vl.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(Vl.stateNotFoundError.code,Vl.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(Vl.thumbprintMissing.code,Vl.thumbprintMissing.desc)}};var xkt={clientId:rt.EMPTY_STRING,authority:rt.DEFAULT_AUTHORITY,clientSecret:rt.EMPTY_STRING,clientAssertion:rt.EMPTY_STRING,clientCertificate:{thumbprint:rt.EMPTY_STRING,thumbprintSha256:rt.EMPTY_STRING,privateKey:rt.EMPTY_STRING,x5c:rt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:rt.EMPTY_STRING,authorityMetadata:rt.EMPTY_STRING,clientCapabilities:[],protocolMode:yd.AAD,azureCloudOptions:{azureCloudInstance:Sv.None,tenant:rt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},bkt={claimsBasedCachingEnabled:!1},Epe={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Fa.Info},Ikt={loggerOptions:Epe,networkClient:new X4,proxyUrl:rt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},Tkt={application:{appName:rt.EMPTY_STRING,appVersion:rt.EMPTY_STRING}};function JMe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...Ikt,networkClient:new X4(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Epe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw e0.createStateNotFoundError();return{auth:{...xkt,...t},broker:{...e},cache:{...bkt,...r},system:{...o,...n},telemetry:{...Tkt,...i}}}s(JMe,"buildAppConfiguration");function XMe({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new TG(e),i=r?.loggerOptions||Epe,o;return r?.networkClient?o=r.networkClient:o=new X4(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(XMe,"buildManagedIdentityConfiguration");f();f();f();f();var ZMe=Fe(require("crypto"));var SG=new Uint8Array(256),wG=SG.length;function xpe(){return wG>SG.length-16&&(ZMe.default.randomFillSync(SG),wG=0),SG.slice(wG,wG+=16)}s(xpe,"rng");f();f();f();var e9e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wkt(t){return typeof t=="string"&&e9e.test(t)}s(wkt,"validate");var t9e=wkt;var Bu=[];for(let t=0;t<256;++t)Bu.push((t+256).toString(16).substr(1));function Skt(t,e=0){let r=(Bu[t[e+0]]+Bu[t[e+1]]+Bu[t[e+2]]+Bu[t[e+3]]+"-"+Bu[t[e+4]]+Bu[t[e+5]]+"-"+Bu[t[e+6]]+Bu[t[e+7]]+"-"+Bu[t[e+8]]+Bu[t[e+9]]+"-"+Bu[t[e+10]]+Bu[t[e+11]]+Bu[t[e+12]]+Bu[t[e+13]]+Bu[t[e+14]]+Bu[t[e+15]]).toLowerCase();if(!t9e(r))throw TypeError("Stringified UUID is invalid");return r}s(Skt,"stringify");var r9e=Skt;f();function _kt(t,e,r){t=t||{};let n=t.random||(t.rng||xpe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return r9e(n)}s(_kt,"v4");var bpe=_kt;var Z4=class{static{s(this,"GuidGenerator")}generateGuid(){return bpe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};f();var pp=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Ru.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,rt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Ru.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};f();f();var n9e=Fe(require("crypto"),1);var _I=class{static{s(this,"HashUtils")}sha256(e){return n9e.default.createHash($Me.SHA256).update(e).digest()}};var i9e=Fe(require("crypto"),1);var _G=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new _I}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%pG.CV_CHARSET.length;for(;e.length<=HMe;){let i=i9e.default.randomBytes(1)[0];if(i>=r)continue;let o=i%pG.CV_CHARSET.length;e.push(pG.CV_CHARSET[o])}let n=e.join(rt.EMPTY_STRING);return pp.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return pp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Ru.BASE64),Ru.BASE64)}};var Zy=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new _G,this.guidGenerator=new Z4,this.hashUtils=new _I}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return pp.base64Encode(e)}base64Decode(e){return pp.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return pp.base64EncodeUrl(this.hashUtils.sha256(e).toString(Ru.BASE64),Ru.BASE64)}};f();f();var RI=class extends xI{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new J_,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof ku)r.accounts[n]=i;else if(xl.isIdTokenEntity(i))r.idTokens[n]=i;else if(xl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(xl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(xl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new ku,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return xl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return xl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return xl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=xl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return xl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=xl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&xl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&xl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&xl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Bv.deserializeAllCache(Bv.deserializeJSONBlob(e))}static generateJsonCache(e){return fI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=xl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};f();var p6={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},eD=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=fI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Bv.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=RI.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new Zy().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new fp(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new fp(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(ku.generateAccountCacheKey(e),r||new Z4().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new fp(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...p6.Account,...e.Account},IdToken:{...p6.IdToken,...e.IdToken},AccessToken:{...p6.AccessToken,...e.AccessToken},RefreshToken:{...p6.RefreshToken,...e.RefreshToken},AppMetadata:{...p6.AppMetadata,...e.AppMetadata}}}};f();var NOe=Fe(BOe(),1);var Lv=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ct(ds.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Ys.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?Bm.PSS_256:Bm.RSA_256},c=this.useSha256?Bm.X5T_256:Bm.X5T;Object.assign(a,{[c]:pp.base64EncodeUrl(this.thumbprint,Ru.HEX)}),this.publicCertificate&&Object.assign(a,{[Bm.X5C]:this.publicCertificate});let l={[Bm.AUDIENCE]:this.jwtAudience,[Bm.EXPIRATION_TIME]:this.expirationTime,[Bm.ISSUER]:this.issuer,[Bm.SUBJECT]:this.issuer,[Bm.NOT_BEFORE]:i,[Bm.JWT_ID]:e.createNewGuid()};return this.jwt=NOe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<Ys.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,rt.EMPTY_STRING));return n}};f();var iV="@azure/msal-node",Yg="3.6.3";f();var dD=class extends Du{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Ys.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=Si.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:Zd.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;fr.addClientId(r,this.config.authOptions.clientId),fr.addUsername(r,e.username),fr.addPassword(r,e.password),fr.addScopes(r,e.scopes),fr.addResponseType(r,F4.IDTOKEN_TOKEN),fr.addGrantType(r,Xf.RESOURCE_OWNER_PASSWORD_GRANT),fr.addClientInfo(r),fr.addLibraryInfo(r,this.config.libraryInfo),fr.addApplicationTelemetry(r,this.config.telemetry.application),fr.addThrottling(r),this.serverTelemetryManager&&fr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();fr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&fr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(fr.addClientAssertion(r,await tf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),fr.addClientAssertionType(r,i.assertionType)),(!xa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&fr.addCcsUpn(r,e.username),Pu.mapToQueryString(r)}};f();function LOe(t,e,r,n){let i=d6.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return fr.addLibraryInfo(i,{sku:bl.MSAL_SKU,version:Yg,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==yd.OIDC&&fr.addApplicationTelemetry(i,t.telemetry.application),fr.addResponseType(i,F4.CODE),r.codeChallenge&&r.codeChallengeMethod&&fr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),fr.addExtraQueryParameters(i,r.extraQueryParameters||{}),d6.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(LOe,"getAuthCodeRequestUrl");var DI=class{static{s(this,"ClientApplication")}constructor(e){this.config=JMe(e),this.cryptoProvider=new Zy,this.logger=new lp(this.config.system.loggerOptions,iV,Yg),this.storage=new RI(this.logger,this.config.auth.clientId,this.cryptoProvider,dpe(this.config.auth)),this.tokenCache=new eD(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||Vy.QUERY,authenticationScheme:oo.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return LOe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:oo.BEARER},i=this.initializeServerTelemetryManager(Nv.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new l6(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof ri&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:oo.BEARER},n=this.initializeServerTelemetryManager(Nv.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new s2(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Nv.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new u6(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof CI&&c.errorCode===ds.tokenRefreshRequired)return new s2(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Kf]});if(o===Es.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new s2(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Nv.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new dD(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw e0.createStateNotFoundError();if(e!==r)throw Ct(ds.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:bl.MSAL_SKU,version:Yg,cpu:process.arch||rt.EMPTY_STRING,os:process.platform||rt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=Lv.fromAssertion(await tf(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:bl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===oo.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=oo.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!xa.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...Kf],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new a2(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=Vg.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return iG.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};f();var MOe=Fe(require("http"),1);var oV=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw e0.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=MOe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===rt.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(e0.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),d=Pu.getDeserializedResponse(u.search)||{};d.code&&(a.writeHead(ti.REDIRECT,{location:l}),a.end()),d.error&&a.end(r||`Error occurred: ${d.error}`),n(d)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw e0.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),e0.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};f();var fD=class extends Du{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=Ys.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Si.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&fr.addExtraQueryParameters(r,e.extraQueryParameters),Pu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:d,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:d,message:p}}createQueryString(e){let r=new Map;return fr.addScopes(r,e.scopes),fr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&fr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Pu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Ct(ds.deviceCodePollingCancelled);if(r&&r<e&&Ys.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),Ct(ds.userTimeoutReached);if(Ys.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Ct(ds.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=Si.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?Ys.nowSeconds()+e.timeout:void 0,l=Ys.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let d={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,d,e.correlationId);if(p.body&&p.body.error)if(p.body.error===rt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Ys.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),i0e(U4.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),Ct(ds.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;fr.addScopes(n,e.scopes),fr.addClientId(n,this.config.authOptions.clientId),fr.addGrantType(n,Xf.DEVICE_CODE_GRANT),fr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return fr.addCorrelationId(n,i),fr.addClientInfo(n),fr.addLibraryInfo(n,this.config.libraryInfo),fr.addApplicationTelemetry(n,this.config.telemetry.application),fr.addThrottling(n),this.serverTelemetryManager&&fr.addServerTelemetry(n,this.serverTelemetryManager),(!xa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),Pu.mapToQueryString(n)}};var pD=class extends DI{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=a2.makeExtraSkuString({libraryName:bl.MSAL_SKU,libraryVersion:Yg})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(Nv.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new fD(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||Kf,redirectUri:`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[X_.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:d}=await this.cryptoProvider.generatePkceCodes(),p=c||new oV,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(R=>{m=R}).catch(R=>{h=R}),A=await this.waitForRedirectUri(p),y={...l,correlationId:r,scopes:e.scopes||Kf,redirectUri:A,responseMode:Vy.QUERY,codeChallenge:d,codeChallengeMethod:Oj.S256},x=await this.getAuthCodeUrl(y);if(await n(x),await g,h)throw h;if(m.error)throw new ef(m.error,m.error_description,m.suberror);if(!m.code)throw e0.createNoAuthCodeInResponseError();let I=m.client_info,S={code:m.code,codeVerifier:u,clientInfo:I||rt.EMPTY_STRING,...y};return await this.acquireTokenByCode(S)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||Kf,redirectUri:`${bl.HTTP_PROTOCOL}${bl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[X_.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(mG.TIMEOUT_MS/mG.INTERVAL_MS<i){clearInterval(o),n(e0.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof ri&&a.errorCode===Vl.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},mG.INTERVAL_MS)})}};f();f();var BI=class extends Du{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Es.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=Es.NOT_APPLICABLE,d;c.serializableCache&&c.persistencePlugin&&(d=new fp(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(d));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new Gc(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&d&&await c.persistencePlugin.afterCacheAccess(d),p?Ys.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||Q4)?(a?.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED),[null,Es.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&Ys.isTokenExpired(p.refreshOn.toString(),0)&&(u=Es.PROACTIVELY_REFRESHED,a?.setCacheOutcome(Es.PROACTIVELY_REFRESHED)),[await Ic.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN),[null,Es.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:rt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:To.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Gc.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw Ct(ds.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=Ys.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:oo.BEARER}}else{let l=this.createTokenQueryParameters(e),u=Si.appendQueryString(r.tokenEndpoint,l),d=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=Ys.nowSeconds();let h=await this.executePostToTokenEndpoint(u,d,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;fr.addClientId(r,this.config.authOptions.clientId),fr.addScopes(r,e.scopes,!1),fr.addGrantType(r,Xf.CLIENT_CREDENTIALS_GRANT),fr.addLibraryInfo(r,this.config.libraryInfo),fr.addApplicationTelemetry(r,this.config.telemetry.application),fr.addThrottling(r),this.serverTelemetryManager&&fr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();fr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&fr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(fr.addClientAssertion(r,await tf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),fr.addClientAssertionType(r,i.assertionType)),(!xa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Pu.mapToQueryString(r)}};f();var mD=class extends Du{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Gc(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Ys.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Es.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ct(ds.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Es.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ct(ds.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=Hj.extractTokenClaims(n.secret,pp.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:rt.EMPTY_STRING,localAccountId:a||rt.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Ic.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:To.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||oo.BEARER,o={credentialType:n&&n.toLowerCase()!==oo.BEARER.toLowerCase()?To.ACCESS_TOKEN_WITH_AUTH_SCHEME:To.ACCESS_TOKEN,clientId:e,target:Gc.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw Ct(ds.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=Si.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=Ys.nowSeconds(),d=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(d.body),await p.handleServerTokenResponse(d.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;fr.addClientId(r,this.config.authOptions.clientId),fr.addScopes(r,e.scopes),fr.addGrantType(r,Xf.JWT_BEARER),fr.addClientInfo(r),fr.addLibraryInfo(r,this.config.libraryInfo),fr.addApplicationTelemetry(r,this.config.telemetry.application),fr.addThrottling(r),this.serverTelemetryManager&&fr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();fr.addCorrelationId(r,n),fr.addRequestTokenUse(r,X_.ON_BEHALF_OF),fr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&fr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(fr.addClientAssertion(r,await tf(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),fr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Pu.mapToQueryString(r)}};var hD=class extends DI{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ct(ds.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?Lv.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):Lv.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ct(ds.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await tf(e.clientAssertion,this.config.auth.clientId),assertionType:bl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!Kf.includes(m))},o={...e,...i,clientAssertion:r},c=new Si(o.authority).getUrlComponents().PathSegments[0];if(Object.values(Jf).includes(c))throw Ct(ds.missingTenantIdError);let l=process.env[qMe],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let d={azureRegion:u,environmentRegion:process.env[UMe]},p=this.initializeServerTelemetryManager(Nv.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,d,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new BI(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof ri&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new mD(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof ri&&n.setCorrelationId(r.correlationId),n}}};f();f();f();f();f();function FOe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(FOe,"isIso8601");f();var sV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Ks.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Ps.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Ks.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Ks.POST,e,r)}};var f2={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},of=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(FOe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Ys.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[Vc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[Vc.XMS_CC]=h}let a=o.headers;a[Ps.CONTENT_TYPE]=rt.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new sV(this.networkClient,o.retryPolicy,this.logger),u=Ys.nowSeconds(),d;try{o.httpMethod===Ks.POST?d=await l.sendPostRequestAsync(o.computeUri(),c):d=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof ri?h:Ct(ds.networkError)}let p=new Ic(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(d,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Oa.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?f2.MANAGED_IDENTITY_CLIENT_ID_2017:f2.MANAGED_IDENTITY_CLIENT_ID;case Oa.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?f2.MANAGED_IDENTITY_RESOURCE_ID_IMDS:f2.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Oa.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),f2.MANAGED_IDENTITY_OBJECT_ID;default:throw Tc(SI)}}};of.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Si(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Tc(c2[t])}};f();f();f();var aV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var BBt=3,NBt=1e3,LBt=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.TOO_MANY_REQUESTS,ti.SERVER_ERROR,ti.SERVICE_UNAVAILABLE,ti.GATEWAY_TIMEOUT],cV=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new aV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return NBt}async pauseForRetry(e,r,n,i){if(LBt.includes(e)&&r<BBt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var r0=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new cV}computeUri(){let e=new Map;this.queryParameters&&fr.addExtraQueryParameters(e,this.queryParameters);let r=Pu.mapToQueryString(e);return Si.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&fr.addExtraQueryParameters(e,this.bodyParameters),Pu.mapToQueryString(e)}};var MBt="2019-08-01",T6=class t extends of{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${zn.APP_SERVICE} managed identity is unavailable because one or both of the '${On.IDENTITY_HEADER}' and '${On.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,a,zn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${zn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${zn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new r0(Ks.GET,this.identityEndpoint);return n.headers[Zf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Vc.API_VERSION]=MBt,n.queryParameters[Vc.RESOURCE]=e,r.idType!==Oa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var Mv=require("fs"),qOe=Fe(require("path"),1);var FBt="2019-11-01",OOe="http://127.0.0.1:40342/metadata/identity/oauth2/token",QOe="N/A: himds executable exists",UOe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},OBt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},w6=class t extends of{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IMDS_ENDPOINT];if(!e||!r){let n=OBt[process.platform];try{(0,Mv.accessSync)(n,Mv.constants.F_OK|Mv.constants.R_OK),e=OOe,r=QOe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${zn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${On.IDENTITY_ENDPOINT}' and '${On.IMDS_ENDPOINT}' are not defined. ${zn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===QOe)e.info(`[Managed Identity] ${zn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${zn.AZURE_ARC} endpoint: ${OOe}. Creating ${zn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,c,zn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(On.IMDS_ENDPOINT,l,zn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${zn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${zn.AZURE_ARC} managed identity.`)}if(a.idType!==Oa.SYSTEM_ASSIGNED)throw Tc(vG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new r0(Ks.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[Zf.METADATA_HEADER_NAME]="true",r.queryParameters[Vc.API_VERSION]=FBt,r.queryParameters[Vc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===ti.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw Tc(bG);if(!a.includes("Basic realm="))throw Tc(IG);let c=a.split("Basic realm=")[1];if(!UOe.hasOwnProperty(process.platform))throw Tc(CG);let l=UOe[process.platform],u=qOe.default.basename(c);if(!u.endsWith(".key"))throw Tc(gG);if(l+u!==c)throw Tc(AG);let d;try{d=await(0,Mv.statSync)(c).size}catch{throw Tc(f6)}if(d>WMe)throw Tc(yG);let p;try{p=(0,Mv.readFileSync)(c,Ru.UTF8)}catch{throw Tc(f6)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[Zf.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof ri?h:Ct(ds.networkError)}}return this.getServerTokenResponse(o||e)}};f();var S6=class t extends of{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[On.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${zn.CLOUD_SHELL} managed identity is unavailable because the '${On.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.MSI_ENDPOINT,c,zn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${zn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${zn.CLOUD_SHELL} managed identity.`),a.idType!==Oa.SYSTEM_ASSIGNED)throw Tc(EG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new r0(Ks.POST,this.msiEndpoint);return r.headers[Zf.METADATA_HEADER_NAME]="true",r.bodyParameters[Vc.RESOURCE]=e,r}};f();f();f();var lV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var QBt=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.GONE,ti.TOO_MANY_REQUESTS],UBt=3,qBt=7,HBt=1e3,$Bt=4e3,WBt=2e3,jBt=10*1e3,uV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new lV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return HBt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return $Bt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return WBt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return jBt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ti.GONE?qBt:UBt),(QBt.includes(e)||e>=ti.SERVER_ERROR_RANGE_START&&e<=ti.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===ti.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var HOe="/metadata/identity/oauth2/token",GBt=`http://169.254.169.254${HOe}`,VBt="2018-02-01",dV=class t extends of{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${On.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${zn.IMDS} returned endpoint: ${process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(On.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${HOe}`,zn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${On.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${zn.IMDS}, using the default endpoint.`),a=GBt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new r0(Ks.GET,this.identityEndpoint);return n.headers[Zf.METADATA_HEADER_NAME]="true",n.queryParameters[Vc.API_VERSION]=VBt,n.queryParameters[Vc.RESOURCE]=e,r.idType!==Oa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new uV,n}};f();var zBt="2019-07-01-preview",_6=class t extends of{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IDENTITY_HEADER],n=process.env[On.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${zn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${On.IDENTITY_HEADER}', '${On.IDENTITY_ENDPOINT}' or '${On.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let d=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,c,zn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${zn.SERVICE_FABRIC} managed identity. Endpoint URI: ${d}. Creating ${zn.SERVICE_FABRIC} managed identity.`),a.idType!==Oa.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${zn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new r0(Ks.GET,this.identityEndpoint);return n.headers[Zf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Vc.API_VERSION]=zBt,n.queryParameters[Vc.RESOURCE]=e,r.idType!==Oa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var YBt="2017-09-01",KBt=`Only client id is supported for user-assigned managed identity in ${zn.MACHINE_LEARNING}.`,R6=class t extends of{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[On.MSI_ENDPOINT],r=process.env[On.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${zn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${On.MSI_ENDPOINT}' and '${On.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.MSI_ENDPOINT,a,zn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${zn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${zn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new r0(Ks.GET,this.msiEndpoint);if(n.headers[Zf.METADATA_HEADER_NAME]="true",n.headers[Zf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[Vc.API_VERSION]=YBt,n.queryParameters[Vc.RESOURCE]=e,r.idType===Oa.SYSTEM_ASSIGNED)n.queryParameters[f2.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[On.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===Oa.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(KBt);return n}};var k6=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(_6.getEnvironmentVariables())?zn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(T6.getEnvironmentVariables())?zn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(R6.getEnvironmentVariables())?zn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(S6.getEnvironmentVariables())?zn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(w6.getEnvironmentVariables())?zn.AZURE_ARC:zn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=_6.tryCreate(e,r,n,i,o,a)||T6.tryCreate(e,r,n,i,o)||R6.tryCreate(e,r,n,i,o)||S6.tryCreate(e,r,n,i,o,a)||w6.tryCreate(e,r,n,i,o,a)||dV.tryCreate(e,r,n,i,o);if(!c)throw Tc(xG);return c}};var JBt=[zn.SERVICE_FABRIC],gD=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=XMe(e||{}),this.logger=new lp(this.config.system.loggerOptions,iV,Yg);let r={canonicalAuthority:rt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new RI(this.logger,this.config.managedIdentityId.id,q4,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new Zy;let n={protocolMode:yd.AAD,knownAuthorities:[ype],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new Vg(ype,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new BI({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new k6(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new _I}async acquireToken(e){if(!e.resource)throw ps(j4.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&JBt.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(Ru.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===Es.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return k6.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};f();var fV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>ku.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};f();f();f();f();f();function P6(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(P6,"getRandomIntegerInclusive");function D6(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+P6(0,n/2)}}s(D6,"calculateRetryDelay");f();function AD(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(AD,"isObject");f();function p2(t){if(AD(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(p2,"isError");f();f();var $Oe=require("node:crypto");var fme,XBt=typeof((fme=globalThis?.crypto)===null||fme===void 0?void 0:fme.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):$Oe.randomUUID;function yD(){return XBt()}s(yD,"randomUUID");f();var pme,mme,hme,gme,WOe=typeof window<"u"&&typeof window.document<"u",jOe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((pme=self.constructor)===null||pme===void 0?void 0:pme.name)==="DedicatedWorkerGlobalScope"||((mme=self.constructor)===null||mme===void 0?void 0:mme.name)==="ServiceWorkerGlobalScope"||((hme=self.constructor)===null||hme===void 0?void 0:hme.name)==="SharedWorkerGlobalScope"),GOe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",VOe=typeof Bun<"u"&&typeof Bun.version<"u",NI=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((gme=globalThis.process.versions)===null||gme===void 0)&&gme.node);var zOe=typeof navigator<"u"&&navigator?.product==="ReactNative";f();function n0(t,e){return Buffer.from(t,e)}s(n0,"stringToUint8Array");f();var Ame="REDACTED",ZBt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],eNt=["api-version"],Kg=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=ZBt.concat(e),r=eNt.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||AD(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Ame);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Ame;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Ame;return r}};f();f();f();f();var m2=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function Cme(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new m2(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(d=>{l(),o(d)},d=>{l(),a(d)})}catch(d){a(d)}n?.addEventListener("abort",u)})}s(Cme,"createAbortablePromise");f();var oNt="The delay was aborted.";function vme(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return Cme(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??oNt})}s(vme,"delay");f();function CD(t){if(p2(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(CD,"getErrorMessage");f();function YOe(t,e){return D6(t,e)}s(YOe,"calculateRetryDelay");function pV(t){return p2(t)}s(pV,"isError");var mV=NI,vD=NI;f();var B6=Xn("IdentityUtils"),KOe="1.0";function h2(t,e,r){let n=s(i=>(B6.getToken.info(i),new Pm({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(h2,"ensureValidMsalToken");function Eme(t){let e=t?.authorityHost;return!e&&vD&&(e=process.env.AZURE_AUTHORITY_HOST),e??o9}s(Eme,"getAuthorityHost");function xme(t,e){return e||(e=o9),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(xme,"getAuthority");function JOe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(JOe,"getKnownAuthorities");var hV=s((t,e=mV?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case mp.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case mp.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case mp.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case mp.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function gV(t){switch(t){case"error":return mp.LogLevel.Error;case"info":return mp.LogLevel.Info;case"verbose":return mp.LogLevel.Verbose;case"warning":return mp.LogLevel.Warning;default:return mp.LogLevel.Info}}s(gV,"getMSALLogLevel");function g2(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return B6.info(yo(t,e.message)),new Or(e.message);case"device_code_polling_cancelled":return new m2("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":B6.info(yo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:B6.info(yo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(B6.info(yo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Pm({scopes:t,getTokenOptions:r,message:e.message})}s(g2,"handleMsalError");function XOe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(XOe,"publicToMsal");function ZOe(t,e){return{authority:e.environment??$Le,homeAccountId:e.homeAccountId,tenantId:e.tenantId||HLe,username:e.username,clientId:t,version:KOe}}s(ZOe,"msalToPublic");function bme(t){let e=JSON.parse(t);if(e.version&&e.version!==KOe)throw Error("Unsupported AuthenticationRecord version");return e}s(bme,"deserializeAuthenticationRecord");f();f();f();f();f();f();function aNt(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(aNt,"isPrimitiveBody");function cNt(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(cNt,"handleNullableResponseAndWrappableBody");function Ime(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(d=>l[d].serializedName==="");if(c==="Sequence"||u){let d=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(d[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))d[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:d}return cNt({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:aNt(t.parsedBody,c)})}s(Ime,"flattenResponse");var rC={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};f();f();f();f();f();var nC=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};f();f();f();var e7e=require("node:os"),t7e=Fe(require("node:util"),1),r7e=Fe(require("node:process"),1);function n7e(t,...e){r7e.stderr.write(`${t7e.default.format(t,...e)}${e7e.EOL}`)}s(n7e,"log");var i7e=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,o7e,Tme=[],wme=[],yV=[];i7e&&Sme(i7e);var s7e=Object.assign(t=>a7e(t),{enable:Sme,enabled:_me,disable:lNt,log:n7e});function Sme(t){o7e=t,Tme=[],wme=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?wme.push(new RegExp(`^${n.substr(1)}$`)):Tme.push(new RegExp(`^${n}$`));for(let n of yV)n.enabled=_me(n.namespace)}s(Sme,"enable");function _me(t){if(t.endsWith("*"))return!0;for(let e of wme)if(e.test(t))return!1;for(let e of Tme)if(e.test(t))return!0;return!1}s(_me,"enabled");function lNt(){let t=o7e||"";return Sme(""),t}s(lNt,"disable");function a7e(t){let e=Object.assign(r,{enabled:_me(t),destroy:uNt,log:s7e.log,namespace:t,extend:dNt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),yV.push(e),e}s(a7e,"createDebugger");function uNt(){let t=yV.indexOf(this);return t>=0?(yV.splice(t,1),!0):!1}s(uNt,"destroy");function dNt(t){let e=a7e(`${this.namespace}:${t}`);return e.log=this.log,e}s(dNt,"extend");var ED=s7e;var Rme=["verbose","info","warning","error"],c7e={verbose:400,info:300,warning:200,error:100};function l7e(t,e){e.log=(...r)=>{t.log(...r)}}s(l7e,"patchLogMethod");function u7e(t){return Rme.includes(t)}s(u7e,"isTypeSpecRuntimeLogLevel");function fNt(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=ED(t.namespace);i.log=(...d)=>{ED.log(...d)};function o(d){if(d&&!u7e(d))throw new Error(`Unknown log level '${d}'. Acceptable values: ${Rme.join(",")}`);n=d;let p=[];for(let m of e)a(m)&&p.push(m.namespace);ED.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(u7e(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${Rme.join(", ")}.`));function a(d){return!!(n&&c7e[d.level]<=c7e[n])}s(a,"shouldEnable");function c(d,p){let m=Object.assign(d.extend(p),{level:p});if(l7e(d,m),a(m)){let h=ED.disable();ED.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(d){let p=i.extend(d);return l7e(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(fNt,"createLoggerContext");var d7e=fNt({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),pNt=d7e.logger;function L6(t){return d7e.createClientLogger(t)}s(L6,"createClientLogger");f();function CV(t){return t.toLowerCase()}s(CV,"normalizeName");function*mNt(t){for(let e of t.values())yield[e.name,e.value]}s(mNt,"headerIterator");var kme=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(CV(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(CV(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(CV(e))}delete(e){this._headersMap.delete(CV(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return mNt(this._headersMap)}};function hp(t){return new kme(t)}s(hp,"createHttpHeaders");f();f();f();var Pme=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:hp(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||yD(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function vV(t){return new Pme(t)}s(vV,"createPipelineRequest");f();var f7e=new Set(["Deserialize","Serialize","Retry","Sign"]),Dme=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!f7e.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!f7e.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function d(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(d,"getPhase");for(let g of this._policies){let A=g.policy,y=g.options,x=A.name;if(r.has(x))throw new Error("Duplicate policy names not allowed in pipeline");let I={policy:A,dependsOn:new Set,dependants:new Set};y.afterPhase&&(I.afterPhase=d(y.afterPhase),I.afterPhase.hasAfterPolicies=!0),r.set(x,I),d(y.phase).policies.add(I)}for(let g of this._policies){let{policy:A,options:y}=g,x=A.name,I=r.get(x);if(!I)throw new Error(`Missing node for policy ${x}`);if(y.afterPolicies)for(let S of y.afterPolicies){let R=r.get(S);R&&(I.dependsOn.add(R),R.dependants.add(I))}if(y.beforePolicies)for(let S of y.beforePolicies){let R=r.get(S);R&&(R.dependsOn.add(I),I.dependants.add(R))}}function p(g){g.hasRun=!0;for(let A of g.policies)if(!(A.afterPhase&&(!A.afterPhase.hasRun||A.afterPhase.policies.size))&&A.dependsOn.size===0){e.push(A.policy);for(let y of A.dependants)y.dependsOn.delete(A);r.delete(A.policy.name),g.policies.delete(A)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function EV(){return Dme.create()}s(EV,"createEmptyPipeline");f();f();var p7e=require("node:util"),m7e=p7e.inspect.custom;var hNt=new Kg,Nu=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,m7e,{value:s(()=>`RestError: ${this.message} 
 ${hNt.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};Nu.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Nu.PARSE_ERROR="PARSE_ERROR";function xV(t){return t instanceof Nu?!0:p2(t)&&t.name==="RestError"}s(xV,"isRestError");f();f();var xD=Fe(require("node:http"),1),bD=Fe(require("node:https"),1),IV=Fe(require("node:zlib"),1),g7e=require("node:stream");f();var Fm=L6("ts-http-runtime");var gNt={};function M6(t){return t&&typeof t.pipe=="function"}s(M6,"isReadableStream");function h7e(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(h7e,"isStreamComplete");function A7e(t){return t&&typeof t.byteLength=="number"}s(A7e,"isArrayBuffer");var bV=class extends g7e.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Bme=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new nC("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new Kg;Fm.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),d=typeof e.body=="function"?e.body():e.body;if(d&&!e.headers.has("Content-Length")){let m=vNt(d);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(d&&e.onUploadProgress){let x=e.onUploadProgress,I=new bV(x);I.on("error",S=>{Fm.error("Error in upload progress",S)}),M6(d)?d.pipe(I):I.end(d),d=I}let m=await this.makeRequest(e,o,d);c!==void 0&&clearTimeout(c);let h=ANt(m),A={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),A;p=u?yNt(m,h):m;let y=e.onDownloadProgress;if(y){let x=new bV(y);x.on("error",I=>{Fm.error("Error in download progress",I)}),p.pipe(x),p=x}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(A.status)?A.readableStreamBody=p:A.bodyAsText=await CNt(p),A}finally{if(e.abortSignal&&a){let m=Promise.resolve();M6(d)&&(m=h7e(d));let h=Promise.resolve();M6(p)&&(h=h7e(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{Fm.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,d)=>{let p=a?xD.request(l,u):bD.request(l,u);p.once("error",m=>{var h;d(new Nu(m.message,{code:(h=m.code)!==null&&h!==void 0?h:Nu.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new nC("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),d(m)}),n&&M6(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):A7e(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Fm.error("Unrecognized body type",n),d(new Nu("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?xD.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new xD.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return bD.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:gNt,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(Fm.info("No cached TLS Agent exist, creating a new Agent"),a=new bD.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function ANt(t){let e=hp();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(ANt,"getResponseHeaders");function yNt(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=IV.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=IV.createInflate();return t.pipe(n),n}return t}s(yNt,"getDecodedResponseStream");function CNt(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new Nu(`Error reading response as text: ${i.message}`,{code:Nu.PARSE_ERROR}))})})}s(CNt,"streamToText");function vNt(t){return t?Buffer.isBuffer(t)?t.length:M6(t)?null:A7e(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(vNt,"getBodyLength");function y7e(){return new Bme}s(y7e,"createNodeHttpClient");function TV(){return y7e()}s(TV,"createDefaultHttpClient");f();f();f();f();var Nme="logPolicy";function wV(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:Fm.info,n=new Kg({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Nme,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(wV,"logPolicy");f();var Lme="redirectPolicy",C7e=["GET","HEAD"];function SV(t={}){let{maxRetries:e=20}=t;return{name:Lme,async sendRequest(r,n){let i=await n(r);return v7e(n,i,e)}}}s(SV,"redirectPolicy");async function v7e(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&C7e.includes(i.method)||o===302&&C7e.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return v7e(t,u,r,n+1)}return e}s(v7e,"handleRedirect");f();f();f();function E7e(){return"User-Agent"}s(E7e,"getHeaderName");f();function x7e(){return E7e()}s(x7e,"getUserAgentHeaderName");var Wfn=x7e();f();var Mme="decompressResponsePolicy";function _V(){return{name:Mme,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(_V,"decompressResponsePolicy");f();f();f();f();var ENt="The operation was aborted.";function b7e(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new nC(r?.abortErrorMsg?r?.abortErrorMsg:ENt)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(b7e,"delay");function I7e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(I7e,"parseHeaderValueAsNumber");var Fme="Retry-After",xNt=["retry-after-ms","x-ms-retry-after-ms",Fme];function T7e(t){if(t&&[429,503].includes(t.status))try{for(let i of xNt){let o=I7e(t,i);if(o===0||o)return o*(i===Fme?1e3:1)}let e=t.headers.get(Fme);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(T7e,"getRetryAfterInMs");function w7e(t){return Number.isFinite(T7e(t))}s(w7e,"isThrottlingRetryResponse");function Ome(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=T7e(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Ome,"throttlingRetryStrategy");var bNt=1e3,INt=1e3*64;function RV(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:bNt,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:INt;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=wNt(c),u=l&&t.ignoreSystemErrors,d=TNt(a),p=d&&t.ignoreHttpStatusCodes;return a&&(w7e(a)||!d)||p||u?{skipStrategy:!0}:c&&!l&&!d?{errorToThrow:c}:D6(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(RV,"exponentialRetryStrategy");function TNt(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(TNt,"isExponentialRetryResponse");function wNt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(wNt,"isSystemError");f();var SNt=L6("ts-http-runtime retryPolicy"),_Nt="retryPolicy";function LI(t,e={maxRetries:3}){let r=e.logger||SNt;return{name:_Nt,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(d){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=d,!d||l.name!=="RestError")throw d;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new nC;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let d of t){let p=d.logger||r;p.info(`Retry ${u}: Processing retry strategy ${d.name}.`);let m=d.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:A}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${d.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${d.name} retries after ${g}`),await b7e(g,void 0,{abortSignal:n.abortSignal});continue e}if(A){p.info(`Retry ${u}: Retry strategy ${d.name} redirects to ${A}`),n.url=A;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(LI,"retryPolicy");var Qme="defaultRetryPolicy";function kV(t={}){var e;return{name:Qme,sendRequest:LI([Ome(),RV(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(kV,"defaultRetryPolicy");f();var Ume="formDataPolicy";function RNt(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(RNt,"formDataToFormDataMap");function PV(){return{name:Ume,async sendRequest(t,e){if(NI&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=RNt(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=kNt(t.formData):await PNt(t.formData,t),t.formData=void 0}return e(t)}}}s(PV,"formDataPolicy");function kNt(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(kNt,"wwwFormUrlEncode");async function PNt(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:hp({"Content-Disposition":`form-data; name="${i}"`}),body:n0(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=hp();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(PNt,"prepareFormData");f();var eQe=Fe(V7e(),1),tQe=Fe(K7e(),1);var T8t="HTTPS_PROXY",w8t="HTTP_PROXY",S8t="ALL_PROXY",_8t="NO_PROXY",zme="proxyPolicy",J7e=[],rQe=!1,R8t=new Map;function OV(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(OV,"getEnvironmentValue");function k8t(){if(!process)return;let t=OV(T8t),e=OV(S8t),r=OV(w8t);return t||e||r}s(k8t,"loadEnvironmentProxyValue");function P8t(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(P8t,"isBypassed");function D8t(){let t=OV(_8t);return rQe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(D8t,"loadNoProxy");function B8t(){let t=k8t();return t?new URL(t):void 0}s(B8t,"getDefaultProxySettingsInternal");function X7e(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(X7e,"getUrlFromProxySettings");function Z7e(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&Fm.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new tQe.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new eQe.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(Z7e,"setProxyAgentOnRequest");function QV(t,e){rQe||J7e.push(...D8t());let r=t?X7e(t):B8t(),n={};return{name:zme,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!P8t(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:J7e,e?.customNoProxyList?void 0:R8t)?Z7e(i,n,r):i.proxySettings&&Z7e(i,n,X7e(i.proxySettings)),o(i)}}}s(QV,"proxyPolicy");f();var Yme="agentPolicy";function UV(t){return{name:Yme,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(UV,"agentPolicy");f();var Kme="tlsPolicy";function qV(t){return{name:Kme,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(qV,"tlsPolicy");f();f();function HV(t){return typeof t.stream=="function"}s(HV,"isBlob");f();f();function nQe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(nQe,"__values");function sC(t){return this instanceof sC?(this.v=t,this):new sC(t)}s(sC,"__await");function Jme(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(A){return new Promise(function(y,x){o.push([h,A,y,x])>1||l(h,A)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(A){m(o[0][3],A)}}function u(h){h.value instanceof sC?Promise.resolve(h.value.v).then(d,p):m(o[0][2],h)}function d(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(Jme,"__asyncGenerator");function iQe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof nQe=="function"?nQe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(iQe,"__asyncValues");var $V=require("stream");function oQe(){return Jme(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield sC(e.read());if(r)return yield sC(void 0);yield yield sC(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(oQe,"streamAsyncIterator");function N8t(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=oQe.bind(t)),t.values||(t.values=oQe.bind(t))}s(N8t,"makeAsyncIterable");function sQe(t){return t instanceof ReadableStream?(N8t(t),$V.Readable.fromWeb(t)):t}s(sQe,"ensureNodeStream");function L8t(t){return t instanceof Uint8Array?$V.Readable.from(Buffer.from(t)):HV(t)?sQe(t.stream()):sQe(t)}s(L8t,"toStream");async function aQe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(L8t);return $V.Readable.from(function(){return Jme(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,iQe(u)),l;l=yield sC(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield sC(o)}catch(d){n={error:d}}finally{try{!a&&!r&&(i=c.return)&&(yield sC(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(aQe,"concat");function M8t(){return`----AzSDKFormBoundary${yD()}`}s(M8t,"generateBoundary");function F8t(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(F8t,"encodeHeaders");function O8t(t){return t instanceof Uint8Array?t.byteLength:HV(t)?t.size===-1?void 0:t.size:void 0}s(O8t,"getLength");function Q8t(t){let e=0;for(let r of t){let n=O8t(r);if(n===void 0)return;e+=n}return e}s(Q8t,"getTotalLength");async function U8t(t,e,r){let n=[n0(`--${r}`,"utf-8"),...e.flatMap(o=>[n0(`\r
`,"utf-8"),n0(F8t(o.headers),"utf-8"),n0(`\r
`,"utf-8"),o.body,n0(`\r
--${r}`,"utf-8")]),n0(`--\r
\r
`,"utf-8")],i=Q8t(n);i&&t.headers.set("Content-Length",i),t.body=await aQe(n)}s(U8t,"buildRequestBody");var O6="multipartPolicy",q8t=70,H8t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function $8t(t){if(t.length>q8t)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!H8t.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s($8t,"assertValidBoundary");function WV(){return{name:O6,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?$8t(n):n=M8t(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await U8t(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(WV,"multipartPolicy");f();f();f();f();f();f();f();f();f();f();f();f();function jV(){return EV()}s(jV,"createEmptyPipeline");f();f();f();var aC=dI("core-rest-pipeline");f();f();f();f();function Zme(t={}){return wV(Object.assign({logger:aC.info},t))}s(Zme,"logPolicy");f();function ehe(t={}){return SV(t)}s(ehe,"redirectPolicy");f();f();f();var wD=Fe(require("node:os"),1),GV=Fe(require("node:process"),1);function cQe(){return"User-Agent"}s(cQe,"getHeaderName");async function lQe(t){if(GV&&GV.versions){let e=GV.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${wD.arch()}-${wD.type()}-${wD.release()})`)}s(lQe,"setPlatformSpecificData");f();var VV="1.22.0";function X8t(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(X8t,"getUserAgentString");function uQe(){return cQe()}s(uQe,"getUserAgentHeaderName");async function zV(t){let e=new Map;e.set("core-rest-pipeline",VV),await lQe(e);let r=X8t(e);return t?`${t} ${r}`:r}s(zV,"getUserAgentValue");var dQe=uQe(),fQe="userAgentPolicy";function the(t={}){let e=zV(t.userAgentPrefix);return{name:fQe,async sendRequest(r,n){return r.headers.has(dQe)||r.headers.set(dQe,await e),n(r)}}}s(the,"userAgentPolicy");f();f();var pQe=Symbol("rawContent");function rhe(t){return typeof t[pQe]=="function"}s(rhe,"hasRawContent");function mQe(t){return rhe(t)?t[pQe]():t}s(mQe,"getRawContent");var YV=O6;function nhe(){let t=WV();return{name:YV,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)rhe(n.body)&&(n.body=mQe(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(nhe,"multipartPolicy");f();function ihe(){return _V()}s(ihe,"decompressResponsePolicy");f();function ohe(t={}){return kV(t)}s(ohe,"defaultRetryPolicy");f();function she(){return PV()}s(she,"formDataPolicy");f();function ahe(t,e){return QV(t,e)}s(ahe,"proxyPolicy");f();var hQe="setClientRequestIdPolicy";function che(t="x-ms-client-request-id"){return{name:hQe,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(che,"setClientRequestIdPolicy");f();function lhe(t){return UV(t)}s(lhe,"agentPolicy");f();function uhe(t){return qV(t)}s(uhe,"tlsPolicy");f();f();var SD=Nu;function Q6(t){return xV(t)}s(Q6,"isRestError");var gQe="tracingPolicy";function dhe(t={}){let e=zV(t.userAgentPrefix),r=new Kg({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=Z8t();return{name:gQe,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:d}=(a=eLt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!d)return o(i);try{let p=await n.withContext(d,o,i);return rLt(u,p),p}catch(p){throw tLt(u,p),p}}}}s(dhe,"tracingPolicy");function Z8t(){try{return c9({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:VV})}catch(t){aC.warning(`Error when creating the TracingClient: ${CD(t)}`);return}}s(Z8t,"tryCreateTracingClient");function eLt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){aC.warning(`Skipping creating a tracing span due to an error: ${CD(n)}`);return}}s(eLt,"tryCreateSpan");function tLt(t,e){try{t.setStatus({status:"error",error:pV(e)?e:void 0}),Q6(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){aC.warning(`Skipping tracing span processing due to an error: ${CD(r)}`)}}s(tLt,"tryProcessError");function rLt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){aC.warning(`Skipping tracing span processing due to an error: ${CD(r)}`)}}s(rLt,"tryProcessResponse");f();f();function KV(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(KV,"wrapAbortSignalLike");var nLt="wrapAbortSignalLikePolicy";function AQe(){return{name:nLt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=KV(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(AQe,"wrapAbortSignalLikePolicy");function fhe(t){var e;let r=jV();return vD&&(t.agent&&r.addPolicy(lhe(t.agent)),t.tlsOptions&&r.addPolicy(uhe(t.tlsOptions)),r.addPolicy(ahe(t.proxyOptions)),r.addPolicy(ihe())),r.addPolicy(AQe()),r.addPolicy(she(),{beforePolicies:[YV]}),r.addPolicy(the(t.userAgentOptions)),r.addPolicy(che((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(nhe(),{afterPhase:"Deserialize"}),r.addPolicy(ohe(t.retryOptions),{phase:"Retry"}),r.addPolicy(dhe(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),vD&&r.addPolicy(ehe(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Zme(t.loggingOptions),{afterPhase:"Sign"}),r}s(fhe,"createPipelineFromOptions");f();function phe(){let t=TV();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?KV(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(phe,"createDefaultHttpClient");f();function FI(t){return hp(t)}s(FI,"createHttpHeaders");f();function Jg(t){return vV(t)}s(Jg,"createPipelineRequest");f();f();f();f();var oLt=dI("core-rest-pipeline retryPolicy");function mhe(t,e={maxRetries:3}){return LI(t,Object.assign({logger:oLt},e))}s(mhe,"retryPolicy");f();f();var sLt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function aLt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await vme(e),i=await n();return i}s(aLt,"beginRefresh");function hhe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},sLt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var d;return a.isRefreshing||(r=aLt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(d=n?.expiresOnTimestamp)!==null&&d!==void 0?d:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let d=!!u.claims,p=i!==u.tenantId;return d&&(n=null),p||d||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(hhe,"createTokenCycler");var EQe="bearerTokenAuthenticationPolicy";async function JV(t,e){try{return[await e(t),void 0]}catch(r){if(Q6(r)&&r.response)return[r.response,r];throw r}}s(JV,"trySendRequest");async function cLt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(cLt,"defaultAuthorizeRequest");function yQe(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(yQe,"isChallengeResponse");async function CQe(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(CQe,"authorizeRequestOnCaeChallenge");function XV(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||aC,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:cLt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?hhe(i):()=>Promise.resolve(null);return{name:EQe,async sendRequest(d,p){if(!d.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:d,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await JV(d,p),yQe(m)){let A=vQe(m.headers.get("WWW-Authenticate"));if(A){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await CQe({scopes:Array.isArray(o)?o:[o],response:m,request:d,getAccessToken:u,logger:c},y),g&&([m,h]=await JV(d,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:d,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await JV(d,p)),yQe(m)&&(A=vQe(m.headers.get("WWW-Authenticate")),A))){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),m}g=await CQe({scopes:Array.isArray(o)?o:[o],response:m,request:d,getAccessToken:u,logger:c},y),g&&([m,h]=await JV(d,p))}}if(h)throw h;return m}}}s(XV,"bearerTokenAuthenticationPolicy");function lLt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(lLt,"parseChallenges");function vQe(t){var e;return t?(e=lLt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(vQe,"getCaeChallengeClaims");f();f();f();f();f();f();var bQe=Fe(xQe(),1),ghe=bQe.state;function OI(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=IQe(t,n);!a.propertyFound&&r&&(a=IQe(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=OI(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(OI,"getOperationArgumentValueFromParameter");function IQe(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(IQe,"getPropertyFromParameterPath");var TQe=Symbol.for("@azure/core-client original request");function uLt(t){return TQe in t}s(uLt,"hasOriginalRequest");function Fv(t){if(uLt(t))return Fv(t[TQe]);let e=ghe.operationRequestMap.get(t);return e||(e={},ghe.operationRequestMap.set(t,e)),e}s(Fv,"getOperationRequestInfo");var dLt=["application/json","text/json"],fLt=["application/xml","application/atom+xml"],wQe="deserializationPolicy";function Ahe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:dLt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:fLt,d=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}};return{name:wQe,async sendRequest(h,g){let A=await g(h);return hLt(l,u,A,m,d)}}}s(Ahe,"deserializationPolicy");function pLt(t){let e,r=t.request,n=Fv(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(pLt,"getOperationResponseMap");function mLt(t){let e=t.request,r=Fv(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(mLt,"shouldDeserializeResponse");async function hLt(t,e,r,n,i){let o=await yLt(t,e,r,n,i);if(!mLt(o))return o;let a=Fv(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=pLt(o),{error:u,shouldReturnResponse:d}=ALt(o,c,l,n);if(u)throw u;if(d)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===rC.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new SD(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(hLt,"deserializeResponseBody");function gLt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(gLt,"isOperationSpecEmpty");function ALt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(gLt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new SD(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let d=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(d){let A=m;if(e.isXML&&d.type.name===rC.Sequence){A=[];let y=d.xmlElementName;typeof m=="object"&&y&&(A=m[y])}h=e.serializer.deserialize(d,A,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),d&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(ALt,"handleErrorResponse");async function yLt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let d=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||SD.PARSE_ERROR;throw new SD(d,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(yLt,"parse");f();f();function SQe(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===rC.Stream&&e.add(Number(r))}return e}s(SQe,"getStreamingResponseStatusCodes");function cC(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(cC,"getPathStringFromParameter");var _Qe="serializationPolicy";function yhe(t={}){let e=t.stringifyXML;return{name:_Qe,async sendRequest(r,n){let i=Fv(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(CLt(r,a,o),vLt(r,a,o,e)),n(r)}}}s(yhe,"serializationPolicy");function CLt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=OI(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,cC(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||cC(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(CLt,"serializeHeaders");function vLt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,d={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:"_"}},p=d.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=OI(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:A,xmlElementName:y,xmlNamespace:x,xmlNamespacePrefix:I,nullable:S}=m,R=m.type.name;try{if(t.body!==void 0&&t.body!==null||S&&t.body===null||h){let B=cC(r.requestBody);t.body=r.serializer.serialize(m,t.body,B,d);let M=R===rC.Stream;if(r.isXML){let O=I?`xmlns:${I}`:"xmlns",K=ELt(x,O,R,t.body,d);R===rC.Sequence?t.body=n(xLt(K,y||A||g,O,x),{rootName:A||g,xmlCharKey:p}):M||(t.body=n(K,{rootName:A||g,xmlCharKey:p}))}else{if(R===rC.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;M||(t.body=JSON.stringify(t.body))}}}catch(B){throw new Error(`Error "${B.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=OI(e,m);if(h!=null){let g=m.mapper.serializedName||cC(m);t.formData[g]=r.serializer.serialize(m.mapper,h,cC(m),d)}}}}s(vLt,"serializeRequestBody");function ELt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o["$"]={[e]:t},o}return n}s(ELt,"getXmlValueWithNamespace");function xLt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i["$"]={[r]:n},i}s(xLt,"prepareXMLRootList");function Che(t={}){let e=fhe(t??{});return t.credentialOptions&&e.addPolicy(XV({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(yhe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(Ahe(t.deserializationOptions),{phase:"Deserialize"}),e}s(Che,"createClientPipeline");f();var vhe;function RQe(){return vhe||(vhe=phe()),vhe}s(RQe,"getCachedDefaultHttpClient");f();var bLt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function PQe(t,e,r,n){let i=ILt(e,r,n),o=!1,a=kQe(t,i);if(e.path){let u=kQe(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),TLt(u)?(a=u,o=!0):a=wLt(a,u)}let{queryParams:c,sequenceParams:l}=SLt(e,r,n);return a=RLt(a,c,l,o),a}s(PQe,"getRequestUrl");function kQe(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(kQe,"replaceAll");function ILt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=OI(e,o,r),c=cC(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(ILt,"calculateUrlReplacements");function TLt(t){return t.includes("://")}s(TLt,"isAbsoluteUrl");function wLt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(wLt,"appendPath");function SLt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=OI(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,cC(a));let l=a.collectionFormat?bLt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||cC(a),c)}}return{queryParams:i,sequenceParams:o}}s(SLt,"calculateQueryParameters");function _Lt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(_Lt,"simpleParseQueryParams");function RLt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=_Lt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let d=new Set(u);o.set(c,Array.from(d))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(RLt,"appendQueryParams");f();var Ehe=dI("core-client");var U6=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&Ehe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||RQe(),this.pipeline=e.pipeline||kLt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=PQe(n,r,e,this),o=Jg({url:i});o.method=r.httpMethod;let a=Fv(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=SQe(r));try{let u=await this.sendRequest(o),d=Ime(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,d),d}catch(u){if(typeof u=="object"&&u?.response){let d=u.response,p=Ime(d,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(d,p,u)}throw u}}};function kLt(t){let e=PLt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return Che(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(kLt,"createDefaultPipeline");function PLt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(PLt,"getCredentialScopes");f();f();f();function DQe(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(DQe,"getIdentityTokenEndpointSuffix");f();var BQe="/.default",NQe="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function q6(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(BQe)?e.substr(0,e.lastIndexOf(BQe)):e}s(q6,"mapScopesToResource");function LQe(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(LQe,"parseExpirationTimestamp");function MQe(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(MQe,"parseRefreshTimestamp");var H6="noCorrelationId";function DLt(t){let e=t?.authorityHost;return mV&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??o9}s(DLt,"getIdentityClientAuthorityHost");var QI=class extends U6{static{s(this,"IdentityClient")}authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let r=`azsdk-js-identity/${Sj}`,n=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,i=DLt(e);if(!i.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:n},baseUri:i}),this.authorityHost=i,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){cp.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:LQe(n),refreshAfterTimestamp:MQe(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return cp.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new uI(r.status,r.bodyAsText);throw cp.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;cp.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return Jo.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let d=DQe(e),p=Jg({url:`${this.authorityHost}/${e}/${d}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:FI({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return cp.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(d){if(d.name===Rj&&d.errorResponse.error==="interaction_required")return cp.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw cp.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${d}`),d}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||H6,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(H6)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){let r=e?.body?.split("&").map(n=>n.split("=")).find(([n])=>n==="client-request-id");return r&&r.length&&r[1]||H6}async sendGetRequestAsync(e,r){let n=Jg({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:FI(r?.headers),abortSignal:this.generateAbortSignal(H6)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=Jg({url:e,method:"POST",body:r?.body,headers:FI(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));cp.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){cp.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};f();var xhe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(xhe||(xhe={}));function ez(t){let e=t;return e===void 0&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(e=process.env.AZURE_REGIONAL_AUTHORITY_NAME),e===xhe.AutoDiscoverRegion?"AUTO_DISCOVER":e}s(ez,"calculateRegionalAuthority");f();f();function BLt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(BLt,"createConfigurationErrorMessage");function Qa(t,e,r=[],n){let i;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?i=t:i=e?.tenantId??t,t&&i!==t&&!r.includes("*")&&!r.some(o=>o.localeCompare(i)===0)){let o=BLt(i);throw n?.info(o),new Or(o)}return i}s(Qa,"processMultiTenantRequest");function Yl(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(yo("",r)),r}}s(Yl,"checkTenantId");function _D(t,e,r){return e?(Yl(t,e),e):(r||(r=E_),r!==E_?"common":"organizations")}s(_D,"resolveTenantId");function Xa(t){return!t||t.length===0?[]:t.includes("*")?WLe:t}s(Xa,"resolveAdditionallyAllowedTenantIds");var sf=Xn("MsalClient");function zLt(t,e,r={}){let n=_D(r.logger??sf,e,t),i=xme(n,Eme(r)),o=new QI({...r.tokenCredentialOptions,authorityHost:i,loggingOptions:r.loggingOptions});return{auth:{clientId:t,authority:i,knownAuthorities:JOe(n,i,r.disableInstanceDiscovery)},system:{networkClient:o,loggerOptions:{loggerCallback:hV(r.logger??sf),logLevel:gV(Nj()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}s(zLt,"generateMsalConfiguration");function vd(t,e,r={}){let n={msalConfig:zLt(t,e,r),cachedAccount:r.authenticationRecord?XOe(r.authenticationRecord):null,pluginConfiguration:KLe.generatePluginConfiguration(r),logger:r.logger??sf},i=new Map;async function o(O={}){let K=O.enableCae?"CAE":"default",V=i.get(K);if(V)return n.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new PublicClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new pD({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),i.set(K,V),V}s(o,"getPublicApp");let a=new Map;async function c(O={}){let K=O.enableCae?"CAE":"default",V=a.get(K);if(V)return n.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),V;n.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let z=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,V=new hD({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await z}}),a.set(K,V),V}s(c,"getConfidentialApp");async function l(O,K,V={}){if(n.cachedAccount===null)throw n.logger.getToken.info("No cached account found in local state."),new Pm({scopes:K});V.claims&&(n.cachedClaims=V.claims);let z={account:n.cachedAccount,scopes:K,claims:n.cachedClaims};n.pluginConfiguration.broker.isEnabled&&(z.tokenQueryParameters||={},n.pluginConfiguration.broker.enableMsaPassthrough&&(z.tokenQueryParameters.msal_request_type="consumer_passthrough")),V.proofOfPossessionOptions&&(z.shrNonce=V.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl),n.logger.getToken.info("Attempting to acquire token silently");try{return await O.acquireTokenSilent(z)}catch(Q){throw g2(K,Q,V)}}s(l,"getTokenSilent");function u(O){return O?.tenantId?xme(O.tenantId,Eme(r)):n.msalConfig.auth.authority}s(u,"calculateRequestAuthority");async function d(O,K,V,z){let Q=null;try{Q=await l(O,K,V)}catch(U){if(U.name!=="AuthenticationRequiredError")throw U;if(V.disableAutomaticAuthentication)throw new Pm({scopes:K,getTokenOptions:V,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(Q===null)try{Q=await z()}catch(U){throw g2(K,U,V)}return h2(K,Q,V),n.cachedAccount=Q?.account??null,n.logger.getToken.info(vl(K)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}s(d,"withSilentAuthentication");async function p(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client secret"),n.msalConfig.auth.clientSecret=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:ez(),claims:V?.claims});return h2(O,Q,V),n.logger.getToken.info(vl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw g2(O,Q,V)}}s(p,"getTokenByClientSecret");async function m(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client assertion"),n.msalConfig.auth.clientAssertion=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:ez(),claims:V?.claims,clientAssertion:K});return h2(O,Q,V),n.logger.getToken.info(vl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw g2(O,Q,V)}}s(m,"getTokenByClientAssertion");async function h(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using client certificate"),n.msalConfig.auth.clientCertificate=K;let z=await c(V);try{let Q=await z.acquireTokenByClientCredential({scopes:O,authority:u(V),azureRegion:ez(),claims:V?.claims});return h2(O,Q,V),n.logger.getToken.info(vl(O)),{token:Q.accessToken,expiresOnTimestamp:Q.expiresOn.getTime(),refreshAfterTimestamp:Q.refreshOn?.getTime(),tokenType:Q.tokenType}}catch(Q){throw g2(O,Q,V)}}s(h,"getTokenByClientCertificate");async function g(O,K,V={}){n.logger.getToken.info("Attempting to acquire token using device code");let z=await o(V);return d(z,O,V,()=>{let Q={scopes:O,cancel:V?.abortSignal?.aborted??!1,deviceCodeCallback:K,authority:u(V),claims:V?.claims},U=z.acquireTokenByDeviceCode(Q);return V.abortSignal&&V.abortSignal.addEventListener("abort",()=>{Q.cancel=!0}),U})}s(g,"getTokenByDeviceCode");async function A(O,K,V,z={}){n.logger.getToken.info("Attempting to acquire token using username and password");let Q=await o(z);return d(Q,O,z,()=>{let U={scopes:O,username:K,password:V,authority:u(z),claims:z?.claims};return Q.acquireTokenByUsernamePassword(U)})}s(A,"getTokenByUsernamePassword");function y(){if(n.cachedAccount)return ZOe(t,n.cachedAccount)}s(y,"getActiveAccount");async function x(O,K,V,z,Q={}){n.logger.getToken.info("Attempting to acquire token using authorization code");let U;return z?(n.msalConfig.auth.clientSecret=z,U=await c(Q)):U=await o(Q),d(U,O,Q,()=>U.acquireTokenByCode({scopes:O,redirectUri:K,code:V,authority:u(Q),claims:Q?.claims}))}s(x,"getTokenByAuthorizationCode");async function I(O,K,V,z={}){sf.getToken.info("Attempting to acquire token on behalf of another user"),typeof V=="string"?(sf.getToken.info("Using client secret for on behalf of flow"),n.msalConfig.auth.clientSecret=V):typeof V=="function"?(sf.getToken.info("Using client assertion callback for on behalf of flow"),n.msalConfig.auth.clientAssertion=V):(sf.getToken.info("Using client certificate for on behalf of flow"),n.msalConfig.auth.clientCertificate=V);let Q=await c(z);try{let U=await Q.acquireTokenOnBehalfOf({scopes:O,authority:u(z),claims:z.claims,oboAssertion:K});return h2(O,U,z),sf.getToken.info(vl(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw g2(O,U,z)}}s(I,"getTokenOnBehalfOf");function S(O,K){return{openBrowser:s(async V=>{await(await Promise.resolve().then(()=>(nz(),fUe))).default(V,{newInstance:!0})},"openBrowser"),scopes:O,authority:u(K),claims:K?.claims,loginHint:K?.loginHint,errorTemplate:K?.browserCustomizationOptions?.errorMessage,successTemplate:K?.browserCustomizationOptions?.successMessage,prompt:K?.loginHint?"login":"select_account"}}s(S,"createBaseInteractiveRequest");async function R(O,K,V={}){sf.verbose("Authentication will resume through the broker");let z=await o(V),Q=S(O,V);n.pluginConfiguration.broker.parentWindowHandle?Q.windowHandle=Buffer.from(n.pluginConfiguration.broker.parentWindowHandle):sf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),n.pluginConfiguration.broker.enableMsaPassthrough&&((Q.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),K?(Q.prompt="none",sf.verbose("Attempting broker authentication using the default broker account")):sf.verbose("Attempting broker authentication without the default broker account"),V.proofOfPossessionOptions&&(Q.shrNonce=V.proofOfPossessionOptions.nonce,Q.authenticationScheme="pop",Q.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,Q.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl);try{return await z.acquireTokenInteractive(Q)}catch(U){if(sf.verbose(`Failed to authenticate through the broker: ${U.message}`),V.disableAutomaticAuthentication)throw new Pm({scopes:O,getTokenOptions:V,message:"Cannot silently authenticate with default broker account."});if(K)return R(O,!1,V);throw U}}s(R,"getBrokeredTokenInternal");async function B(O,K,V={}){sf.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${K}`);let z=await R(O,K,V);return h2(O,z,V),n.cachedAccount=z?.account??null,n.logger.getToken.info(vl(O)),{token:z.accessToken,expiresOnTimestamp:z.expiresOn.getTime(),refreshAfterTimestamp:z.refreshOn?.getTime(),tokenType:z.tokenType}}s(B,"getBrokeredToken");async function M(O,K={}){sf.getToken.info("Attempting to acquire token interactively");let V=await o(K);return d(V,O,K,async()=>{let z=S(O,K);return n.pluginConfiguration.broker.isEnabled?R(O,n.pluginConfiguration.broker.useDefaultBrokerAccount??!1,K):(K.proofOfPossessionOptions&&(z.shrNonce=K.proofOfPossessionOptions.nonce,z.authenticationScheme="pop",z.resourceRequestMethod=K.proofOfPossessionOptions.resourceRequestMethod,z.resourceRequestUri=K.proofOfPossessionOptions.resourceRequestUrl),V.acquireTokenInteractive(z))})}return s(M,"getTokenByInteractiveRequest"),{getActiveAccount:y,getBrokeredToken:B,getTokenByClientSecret:p,getTokenByClientAssertion:m,getTokenByClientCertificate:h,getTokenByDeviceCode:g,getTokenByUsernamePassword:A,getTokenByAuthorizationCode:x,getTokenOnBehalfOf:I,getTokenByInteractiveRequest:M}}s(vd,"createMsalClient");var V6=require("node:crypto");var mUe=require("node:fs/promises");var G6="ClientCertificateCredential",pUe=Xn(G6),z6=class{static{s(this,"ClientCertificateCredential")}tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${G6}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=Xa(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration={...typeof n=="string"?{certificatePath:n}:n};let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${G6}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${G6}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=vd(r,e,{...i,logger:pUe,tokenCredentialOptions:i})}async getToken(e,r={}){return Jo.withSpan(`${G6}.getToken`,r,async n=>{n.tenantId=Qa(this.tenantId,n,this.additionallyAllowedTenantIds,pUe);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){let e=await YLt(this.certificateConfiguration,this.sendCertificateChain??!1),r;return this.certificateConfiguration.certificatePassword!==void 0?r=(0,V6.createPrivateKey)({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():r=e.certificateContents,{thumbprint:e.thumbprint,thumbprintSha256:e.thumbprintSha256,privateKey:r,x5c:e.x5c}}};async function YLt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,mUe.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,V6.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),d=(0,V6.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:d,thumbprint:u,x5c:o}}s(YLt,"parseCertificate");f();f();function qm(t){return Array.isArray(t)?t:[t]}s(qm,"ensureScopes");function DD(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(yo(t,r)),r}}s(DD,"ensureValidScopeForDevTimeCreds");function iz(t){return t.replace(/\/.default$/,"")}s(iz,"getScopeResource");var hUe=Xn("ClientSecretCredential"),Y6=class{static{s(this,"ClientSecretCredential")}tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,r,n,i={}){if(!e)throw new Or("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new Or("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new Or("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=Xa(i?.additionallyAllowedTenants),this.msalClient=vd(r,e,{...i,logger:hUe,tokenCredentialOptions:i})}async getToken(e,r={}){return Jo.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Qa(this.tenantId,n,this.additionallyAllowedTenantIds,hUe);let i=qm(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};f();var KLt=Xn("UsernamePasswordCredential"),K6=class{static{s(this,"UsernamePasswordCredential")}tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,r,n,i,o={}){if(!e)throw new Or("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new Or("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new Or("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new Or("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=Xa(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=vd(r,this.tenantId,{...o,tokenCredentialOptions:o??{}})}async getToken(e,r={}){return Jo.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Qa(this.tenantId,n,this.additionallyAllowedTenantIds,KLt);let i=qm(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var JLt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function XLt(){return(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";")}s(XLt,"getAdditionallyAllowedTenants");var oz="EnvironmentCredential",Ov=Xn(oz);function ZLt(){let t=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),e=t==="true"||t==="1";return Ov.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${e}`),e}s(ZLt,"getSendCertificateChain");var J6=class{static{s(this,"EnvironmentCredential")}_credential=void 0;constructor(e){let r=Lj(JLt).assigned.join(", ");Ov.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=XLt(),c=ZLt(),l={...e,additionallyAllowedTenantIds:a,sendCertificateChain:c};if(n&&Yl(Ov,n),n&&i&&o){Ov.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new Y6(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,d=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){Ov.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new z6(n,i,{certificatePath:u,certificatePassword:d},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(Ov.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),Ov.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new K6(n,i,p,m,l))}async getToken(e,r={}){return Jo.withSpan(`${oz}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return Ov.getToken.info(vl(e)),i}catch(i){let o=new uI(400,{error:`${oz} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw Ov.getToken.info(yo(e,o)),o}throw new Or(`${oz} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};f();f();var eMt=1e3*64,tMt=3e3;function gUe(t){return mhe([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(tMt,t.startDelayInMs):t.startDelayInMs;return YOe(e,{retryDelayInMs:n,maxRetryDelayInMs:eMt})},"retry")}],{maxRetries:t.maxRetries})}s(gUe,"imdsRetryPolicy");f();var Qv="ManagedIdentityCredential - IMDS",E2=Xn(Qv),rMt="http://169.254.169.254",nMt="/metadata/identity/oauth2/token";function iMt(t){if(!q6(t))throw new Error(`${Qv}: Multiple scopes are not supported.`);let r=new URL(nMt,process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??rMt),n={Accept:"application/json"};return{url:`${r}`,method:"GET",headers:FI(n)}}s(iMt,"prepareInvalidRequestOptions");var AUe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=q6(e);if(!i)return E2.info(`${Qv}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=iMt(i);return Jo.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{o.tracingOptions=a.tracingOptions;let c=Jg(o);c.timeout=a.requestOptions?.timeout||1e3,c.allowInsecureConnection=!0;let l;try{E2.info(`${Qv}: Pinging the Azure IMDS endpoint`),l=await r.sendRequest(c)}catch(u){return pV(u)&&E2.verbose(`${Qv}: Caught error ${u.name}: ${u.message}`),E2.info(`${Qv}: The Azure IMDS endpoint is unavailable`),!1}return l.status===403&&l.bodyAsText?.includes("unreachable")?(E2.info(`${Qv}: The Azure IMDS endpoint is unavailable`),E2.info(`${Qv}: ${l.bodyAsText}`),!1):(E2.info(`${Qv}: The Azure IMDS endpoint is available`),!0)})}};f();f();f();var yUe=Xn("ClientAssertionCredential"),BD=class{static{s(this,"ClientAssertionCredential")}msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,r,n,i={}){if(!e)throw new Or("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new Or("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new Or("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=Xa(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=vd(r,e,{...i,logger:yUe,tokenCredentialOptions:this.options})}async getToken(e,r={}){return Jo.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Qa(this.tenantId,n,this.additionallyAllowedTenantIds,yUe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var CUe=require("node:fs/promises");var x2="WorkloadIdentityCredential",oMt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],X6=Xn(x2),Uv=class{static{s(this,"WorkloadIdentityCredential")}client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let r=Lj(oMt).assigned.join(", ");X6.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&Yl(X6,i),!o)throw new Or(`${x2}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new Or(`${x2}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new Or(`${x2}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);X6.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new BD(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${x2}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw X6.info(n),new Or(n)}return X6.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Or(`${x2}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,CUe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new Or(`${x2}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var vUe="ManagedIdentityCredential - Token Exchange",sMt=Xn(vUe),Qhe={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||sMt.info(`${vUe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new Uv({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...i,disableInstanceDiscovery:!0}).getToken(r,e)}};var yp=Xn("ManagedIdentityCredential"),UI=class{static{s(this,"ManagedIdentityCredential")}managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,r){let n;typeof e=="string"?(this.clientId=e,n=r??{}):(this.clientId=e?.clientId,n=e??{}),this.resourceId=n?.resourceId,this.objectId=n?.objectId;let i=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(a=>a.value);if(i.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);n.allowInsecureConnection=!0,n.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=n.retryOptions.maxRetries),this.identityClient=new QI({...n,additionalPolicies:[{policy:gUe(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new gD({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:gV(Nj()),piiLoggingEnabled:n.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:hV(yp)}}}),this.isAvailableIdentityClient=new QI({...n,retryOptions:{maxRetries:0}});let o=this.managedIdentityApp.getManagedIdentitySource();if(o==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw yp.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Or("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(o==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw yp.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Or(`ManagedIdentityCredential: ${NQe}`);if(yp.info(`Using ${o} managed identity.`),i.length===1){let{key:a,value:c}=i[0];yp.info(`${o} with ${a}: ${c}`)}}async getToken(e,r={}){yp.getToken.info("Using the MSAL provider for Managed Identity.");let n=q6(e);if(!n)throw new Or(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return Jo.withSpan("ManagedIdentityCredential.getToken",r,async()=>{try{let i=await Qhe.isAvailable(this.clientId),o=this.managedIdentityApp.getManagedIdentitySource(),a=o==="DefaultToImds"||o==="Imds";if(yp.getToken.info(`MSAL Identity source: ${o}`),i){yp.getToken.info("Using the token exchange managed identity.");let l=await Qhe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(l===null)throw new Or("Attempted to use the token exchange managed identity, but received a null response.");return l}else if(a&&(yp.getToken.info("Using the IMDS endpoint to probe for availability."),!await AUe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Or("Attempted to use the IMDS endpoint, but it is not available.");yp.getToken.info("Calling into MSAL for managed identity token.");let c=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,c,r),yp.getToken.info(vl(e)),{expiresOnTimestamp:c.expiresOn.getTime(),token:c.accessToken,refreshAfterTimestamp:c.refreshOn?.getTime(),tokenType:"Bearer"}}catch(i){throw yp.getToken.error(yo(e,i)),i.name==="AuthenticationRequiredError"?i:aMt(i)?new Or(`ManagedIdentityCredential: Network unreachable. Message: ${i.message}`,{cause:i}):new Or(`ManagedIdentityCredential: Authentication failed. Message ${i.message}`,{cause:i})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(yp.getToken.info(o),new Pm({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function aMt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(aMt,"isNetworkError");f();var EUe=Fe(require("child_process"),1);var qv=Xn("AzureDeveloperCliCredential"),xUe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(qv.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{let c=["azd",...["auth","token","--output","json",...t.reduce((l,u)=>l.concat("--scope",u),[]),...n]].join(" ");EUe.default.exec(c,{cwd:xUe.getSafeWorkingDir(),timeout:r},(l,u,d)=>{i({stdout:u,stderr:d,error:l})})}catch(a){o(a)}})}},Z6=class{static{s(this,"AzureDeveloperCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(Yl(qv,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Xa(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Qa(this.tenantId,r,this.additionallyAllowedTenantIds);n&&Yl(qv,n);let i;return typeof e=="string"?i=[e]:i=e,qv.getToken.info(`Using the scopes ${e}`),Jo.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{i.forEach(l=>{DD(l,qv)});let o=await xUe.getAzdAccessToken(i,n,this.timeout),a=o.stderr?.match("not logged in, run `azd login` to login")||o.stderr?.match("not logged in, run `azd auth login` to login");if(o.stderr?.match("azd:(.*)not found")||o.stderr?.startsWith("'azd' is not recognized")||o.error&&o.error.code==="ENOENT"){let l=new Or("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw qv.getToken.info(yo(e,l)),l}if(a){let l=new Or("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw qv.getToken.info(yo(e,l)),l}try{let l=JSON.parse(o.stdout);return qv.getToken.info(vl(e)),{token:l.token,expiresOnTimestamp:new Date(l.expiresOn).getTime(),tokenType:"Bearer"}}catch(l){throw o.stderr?new Or(o.stderr):l}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Or(o.message||"Unknown error while trying to retrieve the access token");throw qv.getToken.info(yo(e,a)),a}})}};f();var bUe=Fe(require("child_process"),1);f();function Uhe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(yo("",r)),r}}s(Uhe,"checkSubscription");var Hm=Xn("AzureCliCredential"),IUe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(Hm.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{let u=["az",...["account","get-access-token","--output","json","--resource",t,...i,...o]].join(" ");bUe.default.exec(u,{cwd:IUe.getSafeWorkingDir(),timeout:n},(d,p,m)=>{a({stdout:p,stderr:m,error:d})})}catch(l){c(l)}})}},eF=class{static{s(this,"AzureCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(Yl(Hm,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(Uhe(Hm,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=Xa(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Qa(this.tenantId,r,this.additionallyAllowedTenantIds);n&&Yl(Hm,n),this.subscription&&Uhe(Hm,this.subscription);let i=typeof e=="string"?e:e[0];return Hm.getToken.info(`Using the scope ${i}`),Jo.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{DD(i,Hm);let o=iz(i),a=await IUe.getAzureCliAccessToken(o,n,this.subscription,this.timeout),c=a.stderr?.match("(.*)az login --scope(.*)"),l=a.stderr?.match("(.*)az login(.*)")&&!c;if(a.stderr?.match("az:(.*)not found")||a.stderr?.startsWith("'az' is not recognized")){let d=new Or("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw Hm.getToken.info(yo(e,d)),d}if(l){let d=new Or("Please run 'az login' from a command prompt to authenticate before using this credential.");throw Hm.getToken.info(yo(e,d)),d}try{let d=a.stdout,p=this.parseRawResponse(d);return Hm.getToken.info(vl(e)),p}catch(d){throw a.stderr?new Or(a.stderr):d}}catch(o){let a=o.name==="CredentialUnavailableError"?o:new Or(o.message||"Unknown error while trying to retrieve the access token");throw Hm.getToken.info(yo(e,a)),a}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return Hm.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new Or(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};f();f();var TUe=Fe(require("node:child_process"),1),wUe={execFile(t,e,r){return new Promise((n,i)=>{let o=[...e],a=[t,...o].join(" ");TUe.default.exec(a,r,(c,l,u)=>{Buffer.isBuffer(l)&&(l=l.toString("utf8")),Buffer.isBuffer(u)&&(u=u.toString("utf8")),u||c?i(u?new Error(u):c):n(l)})})}};var Hv=Xn("AzurePowerShellCredential"),_Ue=process.platform==="win32";function RUe(t){return _Ue?`${t}.exe`:t}s(RUe,"formatCommand");async function SUe(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await wUe.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(SUe,"runCommands");var kUe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},qhe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},cMt=s(t=>t.message.match(`(.*)${kUe.login}(.*)`),"isLoginError"),lMt=s(t=>t.message.match(kUe.installed),"isNotInstalledError"),Hhe=[RUe("pwsh")];_Ue&&Hhe.push(RUe("powershell"));var tF=class{static{s(this,"AzurePowerShellCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(Yl(Hv,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Xa(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...Hhe]){try{await SUe([[i,"/?"]],n)}catch{Hhe.shift();continue}let a=(await SUe([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return uMt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return Jo.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=Qa(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&Yl(Hv,n);try{DD(i,Hv),Hv.getToken.info(`Using the scope ${i}`);let o=iz(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return Hv.getToken.info(vl(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(lMt(o)){let c=new Or(qhe.installed);throw Hv.getToken.info(yo(i,c)),c}else if(cMt(o)){let c=new Or(qhe.login);throw Hv.getToken.info(yo(i,c)),c}let a=new Or(`${o}. ${qhe.troubleshoot}`);throw Hv.getToken.info(yo(i,a)),a}})}};async function uMt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&Hv.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(uMt,"parseJsonToken");f();var PUe=require("node:fs/promises");var dMt="common",fMt="aebc6443-996d-45c2-90f0-388ff96faa56",$he=Xn("VisualStudioCodeCredential"),pMt={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function mMt(t){let e=pMt[t];if(e)throw new Or(e)}s(mMt,"checkUnsupportedTenant");var rF=class{static{s(this,"VisualStudioCodeCredential")}tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(Yl($he,e.tenantId),this.tenantId=e.tenantId):this.tenantId=dMt,this.additionallyAllowedTenantIds=Xa(e?.additionallyAllowedTenants),mMt(this.tenantId)}async prepare(e){let r=Qa(this.tenantId,this.options,this.additionallyAllowedTenantIds,$he)||this.tenantId;if(!YLe()||!_j)throw new Or("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let n=await this.loadAuthRecord(_j,e);this.msalClient=vd(fMt,r,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:n})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,r){let n=qm(e);if(await this.prepareOnce(n),!this.msalClient)throw new Or("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(n,r||{})}async loadAuthRecord(e,r){try{let n=await(0,PUe.readFile)(e,{encoding:"utf8"});return bme(n)}catch(n){throw $he.getToken.info(yo(r,n)),new Or("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}};f();var sz=Xn("BrokerCredential"),az=class{static{s(this,"BrokerCredential")}brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=_D(sz,e.tenantId),this.brokerAdditionallyAllowedTenantIds=Xa(e?.additionallyAllowedTenants);let r={...e,tokenCredentialOptions:e,logger:sz,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=vd(E_,this.brokerTenantId,r)}async getToken(e,r={}){return Jo.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Qa(this.brokerTenantId,n,this.brokerAdditionallyAllowedTenantIds,sz);let i=qm(e);try{return this.brokerMsalClient.getBrokeredToken(i,!0,{...n,disableAutomaticAuthentication:!0})}catch(o){throw sz.getToken.info(yo(i,o)),new Or("Failed to acquire token using broker authentication",{cause:o})}})}};function DUe(t={}){return new az(t)}s(DUe,"createDefaultBrokerCredential");function Whe(t={}){return new rF(t)}s(Whe,"createDefaultVisualStudioCodeCredential");function jhe(t={}){t.retryOptions??={maxRetries:5,retryDelayInMs:800};let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=t?.managedIdentityResourceId,i=process.env.AZURE_FEDERATED_TOKEN_FILE,o=t?.tenantId??process.env.AZURE_TENANT_ID;if(n){let a={...t,resourceId:n};return new UI(a)}if(i&&r){let a={...t,tenantId:o};return new UI(r,a)}if(e){let a={...t,clientId:e};return new UI(a)}return new UI(t)}s(jhe,"createDefaultManagedIdentityCredential");function Ghe(t){let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=process.env.AZURE_FEDERATED_TOKEN_FILE,i=t?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let o={...t,tenantId:i,clientId:r,tokenFilePath:n};return new Uv(o)}if(i){let o={...t,tenantId:i};return new Uv(o)}return new Uv(t)}s(Ghe,"createDefaultWorkloadIdentityCredential");function Vhe(t={}){return new Z6(t)}s(Vhe,"createDefaultAzureDeveloperCliCredential");function zhe(t={}){return new eF(t)}s(zhe,"createDefaultAzureCliCredential");function Yhe(t={}){return new tF(t)}s(Yhe,"createDefaultAzurePowershellCredential");function Khe(t={}){return new J6(t)}s(Khe,"createDefaultEnvironmentCredential");var Jhe=Xn("DefaultAzureCredential"),Xhe=class{static{s(this,"UnavailableDefaultCredential")}credentialUnavailableErrorMessage;credentialName;constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return Jhe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},ND=class extends l9{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[Whe,zhe,Yhe,Vhe,DUe],i=[Khe,Ghe,jhe],o=[],a="EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential";if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;case"environmentcredential":o=[Khe];break;case"workloadidentitycredential":o=[Ghe];break;case"managedidentitycredential":o=[jhe];break;case"visualstudiocodecredential":o=[Whe];break;case"azureclicredential":o=[zhe];break;case"azurepowershellcredential":o=[Yhe];break;case"azuredeveloperclicredential":o=[Vhe];break;default:{let l=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - ${a}.`;throw Jhe.warning(l),new Error(l)}}else o=[...i,...n];let c=o.map(l=>{try{return l(e)}catch(u){return Jhe.warning(`Skipped ${l.name} because of an error creating the credential: ${u}`),new Xhe(l.name,u.message)}});super(...c)}};f();var dTn=Xn("InteractiveBrowserCredential");f();var ETn=Xn("DeviceCodeCredential");f();var hMt="AzurePipelinesCredential",PTn=Xn(hMt);f();var qTn=Xn("AuthorizationCodeCredential");f();var gMt="OnBehalfOfCredential",JTn=Xn(gMt);f();function AMt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(AMt,"getIntegrationId");function lC(t){let e={...ip(t),"X-GitHub-Api-Version":lI},r=AMt(t.get(pn));return r&&(e["Copilot-Integration-Id"]=r),e9()&&(e["ces-proxy-target"]=C_.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(lC,"getCapiHeaders");function cz(t,e,...r){if(e9()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return km(t,e,"api",...r)}s(cz,"getCapiUrl");async function b2(t,e){let r=await t.get(qr).getToken(),n=cz(t,r,e),i=r.token;e9()&&(i=await NUe());let o={Authorization:`Bearer ${i}`,...lC(t)};return await t.get(ln).fetch(new URL(n).href,{method:"GET",headers:o})}s(b2,"fetchCapiUrl");async function BUe(t,e,r){let n=await t.get(qr).getToken(),i=cz(t,n,e),o=n.token;e9()&&(o=await NUe());let a={Authorization:`Bearer ${o}`,...lC(t)};return await t.get(ln).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(BUe,"postCapiUrl");async function NUe(){let e=await new ND().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(NUe,"getMsBenchToken");f();var LUe=600*1e3,Jr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",Gpt5:"gpt-5",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},MUe=new Set([Jr.O1Ga,Jr.O3Mini,Jr.O1Mini,Jr.Gemini20Pro,Jr.Gemini20Flash]);function $m(t){switch(t){case"edits":case"user":case"inline":return[Jr.Gpt4o,Jr.Gpt4turbo,Jr.Gpt4,Jr.O1Mini,Jr.O1Ga,Jr.Claude35Sonnet,Jr.O3Mini,Jr.Gemini20Flash,Jr.Claude37Sonnet,Jr.Claude37SonnetThought,Jr.Gpt45,Jr.Gpt41,Jr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[Jr.Gpt4oMini,Jr.Gpt4o,Jr.Gpt35turbo,Jr.Gpt41,Jr.CopilotBase];case"gitCommit":return[Jr.Gpt4oMini,Jr.Gpt4o,Jr.Gpt4,Jr.Gpt41,Jr.CopilotBase];case"codeReview":return[Jr.Gpt4,Jr.Gpt4o,Jr.Gpt41,Jr.CopilotBase];case"nesStubs":return[Jr.Gpt4oMini,Jr.Gpt4o,Jr.Gpt41,Jr.CopilotBase]}}s($m,"getSupportedModelFamiliesForPrompt");var dz={textEmbedding3Small:"text-embedding-3-small"},yMt=E.Object({type:E.Union([E.Literal("chat"),E.Literal("embeddings"),E.Literal("completion")]),tokenizer:E.String(),family:E.String(),object:E.String(),supports:E.Optional(E.Object({tool_calls:E.Optional(E.Boolean()),parallel_tool_calls:E.Optional(E.Boolean()),streaming:E.Optional(E.Boolean()),vision:E.Optional(E.Boolean())})),limits:E.Optional(E.Object({max_inputs:E.Optional(E.Number()),max_prompt_tokens:E.Optional(E.Number()),max_output_tokens:E.Optional(E.Number()),max_context_window_tokens:E.Optional(E.Number())}))}),CMt=E.Object({id:E.String(),name:E.String(),version:E.String(),model_picker_enabled:E.Boolean(),is_chat_default:E.Optional(E.Boolean()),is_chat_fallback:E.Optional(E.Boolean()),capabilities:yMt,billing:E.Optional(E.Object({is_premium:E.Optional(E.Boolean()),multiplier:E.Optional(E.Number())})),object:E.String(),preview:E.Optional(E.Boolean()),isExperimental:E.Optional(E.Boolean()),policy:E.Optional(E.Object({state:E.String(),terms:E.String()}))}),FUe=E.Object({data:E.Array(CMt)}),af=class{static{s(this,"ModelMetadataProvider")}},lz=class extends af{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ws(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await b2(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){an.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw an.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new jy(r)}await this.processModels(r)}async fetchModel(r){let n=await b2(this.ctx,`/models/${r}`);if(!n.ok){an.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await BUe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){an.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>LUe}},uz=class extends af{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Nt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<LUe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function OUe(t){let e=$i(t,qt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(OUe,"getUserSelectedModelConfiguration");f();f();f();var LD=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var QUe=Fe(require("node:fs/promises")),fz=Fe(require("node:path"));async function pz(t){return await QUe.readFile(Zhe(t))}s(pz,"readFile");function Zhe(t){return fz.default.resolve(fz.default.extname(__filename)!==".ts"?__dirname:fz.default.resolve(__dirname,"../../dist"),t)}s(Zhe,"locateFile");var MD=Fe(ZUe());var Cz=new Map;function Wi(t="o200k_base"){let e=Cz.get(t);return e!==void 0||(e=Cz.get("o200k_base"),e!==void 0)?e:new HI}s(Wi,"getTokenizer");async function tqe(t="o200k_base"){return await I2,Wi(t)}s(tqe,"getTokenizerAsync");async function LMt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await pz(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(LMt,"parseTikTokenNoIndex");var uge=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,MD.createTokenizer)(await LMt(`resources/${e}.tiktoken.noindex`),(0,MD.getSpecialTokensByEncoder)(e),(0,MD.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new LD("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},dge=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},MMt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},lge=4,HI=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,lge)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-lge),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-lge)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?MMt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function eqe(t){try{let e=await uge.create(t);Cz.set(t,e)}catch{}}s(eqe,"setTokenizer");var I2=(async()=>{Cz.set("mock",new dge),await Promise.all([eqe("cl100k_base"),eqe("o200k_base")])})();f();f();var FMt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},nqe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},fge,vz,iqe,pge=class extends Rn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),fge.add(this),vz.set(this,void 0),FMt(this,vz,e,"f"),this.error=r}Errors(){return new Kb(nqe(this,fge,"m",iqe).call(this))}};vz=new WeakMap,fge=new WeakSet,iqe=s(function*(){this.error&&(yield this.error),yield*nqe(this,vz,"f")},"_AssertError_Iterator");function rqe(t,e,r){if(!Ti(t,e,r))throw new pge(Qy(t,e,r))}s(rqe,"AssertValue");function Ez(...t){return t.length===3?rqe(t[0],t[1],t[2]):rqe(t[0],[],t[1])}s(Ez,"Assert");f();f();f();function OMt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=wo(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=wo(t[r]);return e}s(OMt,"FromObject");function QMt(t){return t.map(e=>wo(e))}s(QMt,"FromArray");function UMt(t){return t.slice()}s(UMt,"FromTypedArray");function qMt(t){return new Map(wo([...t.entries()]))}s(qMt,"FromMap");function HMt(t){return new Set(wo([...t.entries()]))}s(HMt,"FromSet");function $Mt(t){return new Date(t.toISOString())}s($Mt,"FromDate");function wo(t){if(_n(t))return QMt(t);if(Gd(t))return $Mt(t);if(Cm(t))return UMt(t);if(KPe(t))return qMt(t);if(JPe(t))return HMt(t);if(xi(t))return OMt(t);if(Y0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(wo,"Clone");var Cp=class extends Rn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function So(t){return qb(t)?t():wo(t)}s(So,"FromDefault");function WMt(t,e){return Sn(t,"default")?So(t.default):{}}s(WMt,"FromAny");function jMt(t,e){return{}}s(jMt,"FromArgument");function GMt(t,e){if(t.uniqueItems===!0&&!Sn(t,"default"))throw new Cp(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!Sn(t,"default"))throw new Cp(t,"Array with the contains constraint requires a default value");return"default"in t?So(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>o0(t.items,e)):[]}s(GMt,"FromArray");function VMt(t,e){return Sn(t,"default")?So(t.default):async function*(){}()}s(VMt,"FromAsyncIterator");function zMt(t,e){return Sn(t,"default")?So(t.default):BigInt(0)}s(zMt,"FromBigInt");function YMt(t,e){return Sn(t,"default")?So(t.default):!1}s(YMt,"FromBoolean");function KMt(t,e){if(Sn(t,"default"))return So(t.default);{let r=o0(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(KMt,"FromConstructor");function JMt(t,e){return Sn(t,"default")?So(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(JMt,"FromDate");function XMt(t,e){return Sn(t,"default")?So(t.default):()=>o0(t.returns,e)}s(XMt,"FromFunction");function ZMt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return o0(n,[...e,...r])}s(ZMt,"FromImport");function e9t(t,e){return Sn(t,"default")?So(t.default):t.minimum!==void 0?t.minimum:0}s(e9t,"FromInteger");function t9t(t,e){if(Sn(t,"default"))return So(t.default);{let r=t.allOf.reduce((n,i)=>{let o=o0(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!Ti(t,e,r))throw new Cp(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(t9t,"FromIntersect");function r9t(t,e){return Sn(t,"default")?So(t.default):function*(){}()}s(r9t,"FromIterator");function n9t(t,e){return Sn(t,"default")?So(t.default):t.const}s(n9t,"FromLiteral");function i9t(t,e){if(Sn(t,"default"))return So(t.default);throw new Cp(t,"Never types cannot be created. Consider using a default value.")}s(i9t,"FromNever");function o9t(t,e){if(Sn(t,"default"))return So(t.default);throw new Cp(t,"Not types must have a default value")}s(o9t,"FromNot");function s9t(t,e){return Sn(t,"default")?So(t.default):null}s(s9t,"FromNull");function a9t(t,e){return Sn(t,"default")?So(t.default):t.minimum!==void 0?t.minimum:0}s(a9t,"FromNumber");function c9t(t,e){if(Sn(t,"default"))return So(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=o0(o,e));return n}}s(c9t,"FromObject");function l9t(t,e){return Sn(t,"default")?So(t.default):Promise.resolve(o0(t.item,e))}s(l9t,"FromPromise");function u9t(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(Sn(t,"default"))return So(t.default);if(r===My||r===Ly)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=o0(n,e);return o}}s(u9t,"FromRecord");function d9t(t,e){return Sn(t,"default")?So(t.default):o0(bo(t,e),e)}s(d9t,"FromRef");function f9t(t,e){if(Sn(t,"default"))return So(t.default);throw new Cp(t,"RegExp types cannot be created. Consider using a default value.")}s(f9t,"FromRegExp");function p9t(t,e){if(t.pattern!==void 0){if(Sn(t,"default"))return So(t.default);throw new Cp(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(Sn(t,"default"))return So(t.default);throw new Cp(t,"String types with formats must specify a default value")}else return Sn(t,"default")?So(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(p9t,"FromString");function m9t(t,e){return Sn(t,"default")?So(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(m9t,"FromSymbol");function h9t(t,e){if(Sn(t,"default"))return So(t.default);if(!J$(t))throw new Cp(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return VP(t)[0]}s(h9t,"FromTemplateLiteral");function g9t(t,e){if(oqe++>I9t)throw new Cp(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Sn(t,"default")?So(t.default):o0(bo(t,e),e)}s(g9t,"FromThis");function A9t(t,e){return Sn(t,"default")?So(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>o0(t.items[n],e))}s(A9t,"FromTuple");function y9t(t,e){if(Sn(t,"default"))return So(t.default)}s(y9t,"FromUndefined");function C9t(t,e){if(Sn(t,"default"))return So(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return o0(t.anyOf[0],e)}s(C9t,"FromUnion");function v9t(t,e){return Sn(t,"default")?So(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(v9t,"FromUint8Array");function E9t(t,e){return Sn(t,"default")?So(t.default):{}}s(E9t,"FromUnknown");function x9t(t,e){if(Sn(t,"default"))return So(t.default)}s(x9t,"FromVoid");function b9t(t,e){if(Sn(t,"default"))return So(t.default);throw new Error("User defined types must specify a default value")}s(b9t,"FromKind");function o0(t,e){let r=Ul(t,e),n=t;switch(n[ot]){case"Any":return WMt(n,r);case"Argument":return jMt(n,r);case"Array":return GMt(n,r);case"AsyncIterator":return VMt(n,r);case"BigInt":return zMt(n,r);case"Boolean":return YMt(n,r);case"Constructor":return KMt(n,r);case"Date":return JMt(n,r);case"Function":return XMt(n,r);case"Import":return ZMt(n,r);case"Integer":return e9t(n,r);case"Intersect":return t9t(n,r);case"Iterator":return r9t(n,r);case"Literal":return n9t(n,r);case"Never":return i9t(n,r);case"Not":return o9t(n,r);case"Null":return s9t(n,r);case"Number":return a9t(n,r);case"Object":return c9t(n,r);case"Promise":return l9t(n,r);case"Record":return u9t(n,r);case"Ref":return d9t(n,r);case"RegExp":return f9t(n,r);case"String":return p9t(n,r);case"Symbol":return m9t(n,r);case"TemplateLiteral":return h9t(n,r);case"This":return g9t(n,r);case"Tuple":return A9t(n,r);case"Undefined":return y9t(n,r);case"Union":return C9t(n,r);case"Uint8Array":return v9t(n,r);case"Unknown":return E9t(n,r);case"Void":return x9t(n,r);default:if(!Vd.Has(n[ot]))throw new Cp(n,"Unknown type");return b9t(n,r)}}s(o0,"Visit");var I9t=512,oqe=0;function Wm(...t){return oqe=0,t.length===2?o0(t[0],t[1]):o0(t[0],[])}s(Wm,"Create");var xz=class extends Rn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function T9t(t,e,r){if(t[ot]==="Object"&&typeof r=="object"&&!cv(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,d])=>{let p=d[ot]==="Literal"&&d.const===r[u]?c:0,m=Ti(d,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return Ti(t,e,r)?1:0}s(T9t,"ScoreUnion");function w9t(t,e,r){let n=t.anyOf.map(a=>bo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=T9t(a,e,r);c>o&&(i=a,o=c)}return i}s(w9t,"SelectUnion");function S9t(t,e,r){if("default"in t)return typeof r=="function"?t.default:wo(t.default);{let n=w9t(t,e,r);return iF(n,e,r)}}s(S9t,"CastUnion");function _9t(t,e,r){return Ti(t,e,r)?wo(r):Wm(t,e)}s(_9t,"DefaultClone");function R9t(t,e,r){return Ti(t,e,r)?r:Wm(t,e)}s(R9t,"Default");function k9t(t,e,r){if(Ti(t,e,r))return wo(r);let n=_n(r)?wo(r):Wm(t,e),i=on(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(on(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>Xg(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!Ti(t,e,c))throw new xz(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(k9t,"FromArray");function P9t(t,e,r){if(Ti(t,e,r))return Wm(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=Xg(a,e,r.prototype[o]));return i}s(P9t,"FromConstructor");function D9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Xg(i,[...e,...n],r)}s(D9t,"FromImport");function B9t(t,e,r){let n=Wm(t,e),i=xi(n)&&xi(r)?{...n,...r}:r;return Ti(t,e,i)?i:Wm(t,e)}s(B9t,"FromIntersect");function N9t(t,e,r){throw new xz(t,"Never types cannot be cast")}s(N9t,"FromNever");function L9t(t,e,r){if(Ti(t,e,r))return r;if(r===null||typeof r!="object")return Wm(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=Xg(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=Xg(t.additionalProperties,e,r[a]))}return i}s(L9t,"FromObject");function M9t(t,e,r){if(Ti(t,e,r))return wo(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Wm(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=Xg(i,e,c);return o}s(M9t,"FromRecord");function F9t(t,e,r){return Xg(bo(t,e),e,r)}s(F9t,"FromRef");function O9t(t,e,r){return Xg(bo(t,e),e,r)}s(O9t,"FromThis");function Q9t(t,e,r){return Ti(t,e,r)?wo(r):_n(r)?t.items===void 0?[]:t.items.map((n,i)=>Xg(n,e,r[i])):Wm(t,e)}s(Q9t,"FromTuple");function U9t(t,e,r){return Ti(t,e,r)?wo(r):S9t(t,e,r)}s(U9t,"FromUnion");function Xg(t,e,r){let n=ho(t.$id)?Ul(t,e):e,i=t;switch(t[ot]){case"Array":return k9t(i,n,r);case"Constructor":return P9t(i,n,r);case"Import":return D9t(i,n,r);case"Intersect":return B9t(i,n,r);case"Never":return N9t(i,n,r);case"Object":return L9t(i,n,r);case"Record":return M9t(i,n,r);case"Ref":return F9t(i,n,r);case"This":return O9t(i,n,r);case"Tuple":return Q9t(i,n,r);case"Union":return U9t(i,n,r);case"Date":case"Symbol":case"Uint8Array":return _9t(t,e,r);default:return R9t(i,n,r)}}s(Xg,"Visit");function iF(...t){return t.length===3?Xg(t[0],t[1],t[2]):Xg(t[0],[],t[1])}s(iF,"Cast");f();function q9t(t){return $b(t)&&t[ot]!=="Unsafe"}s(q9t,"IsCheckable");function H9t(t,e,r){return _n(r)?r.map(n=>s0(t.items,e,n)):r}s(H9t,"FromArray");function $9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return s0(i,[...e,...n],r)}s($9t,"FromImport");function W9t(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>s0(c,e,wo(r))).reduce((c,l)=>xi(l)?{...c,...l}:l,{});if(!xi(r)||!xi(o)||!$b(n))return o;let a=Hf(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||Ti(n,e,r[c])&&(o[c]=s0(n,e,r[c]));return o}s(W9t,"FromIntersect");function j9t(t,e,r){if(!xi(r)||_n(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(Sn(t.properties,i)){r[i]=s0(t.properties[i],e,r[i]);continue}if($b(n)&&Ti(n,e,r[i])){r[i]=s0(n,e,r[i]);continue}delete r[i]}return r}s(j9t,"FromObject");function G9t(t,e,r){if(!xi(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=s0(a,e,r[l]);continue}if($b(n)&&Ti(n,e,r[l])){r[l]=s0(n,e,r[l]);continue}delete r[l]}return r}s(G9t,"FromRecord");function V9t(t,e,r){return s0(bo(t,e),e,r)}s(V9t,"FromRef");function z9t(t,e,r){return s0(bo(t,e),e,r)}s(z9t,"FromThis");function Y9t(t,e,r){if(!_n(r))return r;if(Ws(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=s0(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(Y9t,"FromTuple");function K9t(t,e,r){for(let n of t.anyOf)if(q9t(n)&&Ti(n,e,r))return s0(n,e,r);return r}s(K9t,"FromUnion");function s0(t,e,r){let n=ho(t.$id)?Ul(t,e):e,i=t;switch(i[ot]){case"Array":return H9t(i,n,r);case"Import":return $9t(i,n,r);case"Intersect":return W9t(i,n,r);case"Object":return j9t(i,n,r);case"Record":return G9t(i,n,r);case"Ref":return V9t(i,n,r);case"This":return z9t(i,n,r);case"Tuple":return Y9t(i,n,r);case"Union":return K9t(i,n,r);default:return r}}s(s0,"Visit");function bz(...t){return t.length===3?s0(t[0],t[1],t[2]):s0(t[0],[],t[1])}s(bz,"Clean");f();function Iz(t){return ho(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(Iz,"IsStringNumeric");function J9t(t){return xu(t)||Ny(t)||on(t)}s(J9t,"IsValueToString");function oF(t){return t===!0||on(t)&&t===1||xu(t)&&t===BigInt("1")||ho(t)&&(t.toLowerCase()==="true"||t==="1")}s(oF,"IsValueTrue");function sF(t){return t===!1||on(t)&&(t===0||Object.is(t,-0))||xu(t)&&t===BigInt("0")||ho(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(sF,"IsValueFalse");function X9t(t){return ho(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(X9t,"IsTimeStringWithTimeZone");function Z9t(t){return ho(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Z9t,"IsTimeStringWithoutTimeZone");function e6t(t){return ho(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(e6t,"IsDateTimeStringWithTimeZone");function t6t(t){return ho(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(t6t,"IsDateTimeStringWithoutTimeZone");function r6t(t){return ho(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(r6t,"IsDateString");function n6t(t,e){let r=aqe(t);return r===e?r:t}s(n6t,"TryConvertLiteralString");function i6t(t,e){let r=cqe(t);return r===e?r:t}s(i6t,"TryConvertLiteralNumber");function o6t(t,e){let r=sqe(t);return r===e?r:t}s(o6t,"TryConvertLiteralBoolean");function s6t(t,e){return ho(t.const)?n6t(e,t.const):on(t.const)?i6t(e,t.const):Ny(t.const)?o6t(e,t.const):e}s(s6t,"TryConvertLiteral");function sqe(t){return oF(t)?!0:sF(t)?!1:t}s(sqe,"TryConvertBoolean");function a6t(t){let e=s(r=>r.split(".")[0],"truncateInteger");return Iz(t)?BigInt(e(t)):on(t)?BigInt(Math.trunc(t)):sF(t)?BigInt(0):oF(t)?BigInt(1):t}s(a6t,"TryConvertBigInt");function aqe(t){return lv(t)&&t.description!==void 0?t.description.toString():J9t(t)?t.toString():t}s(aqe,"TryConvertString");function cqe(t){return Iz(t)?parseFloat(t):oF(t)?1:sF(t)?0:t}s(cqe,"TryConvertNumber");function c6t(t){return Iz(t)?parseInt(t):on(t)?Math.trunc(t):oF(t)?1:sF(t)?0:t}s(c6t,"TryConvertInteger");function l6t(t){return ho(t)&&t.toLowerCase()==="null"?null:t}s(l6t,"TryConvertNull");function u6t(t){return ho(t)&&t==="undefined"?void 0:t}s(u6t,"TryConvertUndefined");function d6t(t){return Gd(t)?t:on(t)?new Date(t):oF(t)?new Date(1):sF(t)?new Date(0):Iz(t)?new Date(parseInt(t)):Z9t(t)?new Date(`1970-01-01T${t}.000Z`):X9t(t)?new Date(`1970-01-01T${t}`):t6t(t)?new Date(`${t}.000Z`):e6t(t)?new Date(t):r6t(t)?new Date(`${t}T00:00:00.000Z`):t}s(d6t,"TryConvertDate");function f6t(t,e,r){return(_n(r)?r:[r]).map(i=>Zg(t.items,e,i))}s(f6t,"FromArray");function p6t(t,e,r){return a6t(r)}s(p6t,"FromBigInt");function m6t(t,e,r){return sqe(r)}s(m6t,"FromBoolean");function h6t(t,e,r){return d6t(r)}s(h6t,"FromDate");function g6t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Zg(i,[...e,...n],r)}s(g6t,"FromImport");function A6t(t,e,r){return c6t(r)}s(A6t,"FromInteger");function y6t(t,e,r){return t.allOf.reduce((n,i)=>Zg(i,e,n),r)}s(y6t,"FromIntersect");function C6t(t,e,r){return s6t(t,r)}s(C6t,"FromLiteral");function v6t(t,e,r){return l6t(r)}s(v6t,"FromNull");function E6t(t,e,r){return cqe(r)}s(E6t,"FromNumber");function x6t(t,e,r){if(!xi(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))Sn(r,n)&&(r[n]=Zg(t.properties[n],e,r[n]));return r}s(x6t,"FromObject");function b6t(t,e,r){if(!xi(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=Zg(o,e,c);return r}s(b6t,"FromRecord");function I6t(t,e,r){return Zg(bo(t,e),e,r)}s(I6t,"FromRef");function T6t(t,e,r){return aqe(r)}s(T6t,"FromString");function w6t(t,e,r){return ho(r)||on(r)?Symbol(r):r}s(w6t,"FromSymbol");function S6t(t,e,r){return Zg(bo(t,e),e,r)}s(S6t,"FromThis");function _6t(t,e,r){return _n(r)&&!Ws(t.items)?r.map((i,o)=>o<t.items.length?Zg(t.items[o],e,i):i):r}s(_6t,"FromTuple");function R6t(t,e,r){return u6t(r)}s(R6t,"FromUndefined");function k6t(t,e,r){for(let n of t.anyOf){let i=Zg(n,e,wo(r));if(Ti(n,e,i))return i}return r}s(k6t,"FromUnion");function Zg(t,e,r){let n=Ul(t,e),i=t;switch(t[ot]){case"Array":return f6t(i,n,r);case"BigInt":return p6t(i,n,r);case"Boolean":return m6t(i,n,r);case"Date":return h6t(i,n,r);case"Import":return g6t(i,n,r);case"Integer":return A6t(i,n,r);case"Intersect":return y6t(i,n,r);case"Literal":return C6t(i,n,r);case"Null":return v6t(i,n,r);case"Number":return E6t(i,n,r);case"Object":return x6t(i,n,r);case"Record":return b6t(i,n,r);case"Ref":return I6t(i,n,r);case"String":return T6t(i,n,r);case"Symbol":return w6t(i,n,r);case"This":return S6t(i,n,r);case"Tuple":return _6t(i,n,r);case"Undefined":return R6t(i,n,r);case"Union":return k6t(i,n,r);default:return r}}s(Zg,"Visit");function Tz(...t){return t.length===3?Zg(t[0],t[1],t[2]):Zg(t[0],[],t[1])}s(Tz,"Convert");f();function lqe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Ti(e,r,n))throw new s4(e,n,Qy(e,r,n).First());return yv(e,r)?a4(e,r,n):n}s(lqe,"Decode");f();function $v(t,e){let r=Sn(t,"default")?t.default:void 0,n=qb(r)?r():wo(r);return Ws(e)?n:xi(e)&&xi(n)?Object.assign(n,e):e}s($v,"ValueOrDefault");function mge(t){return $b(t)&&"default"in t}s(mge,"HasDefaultProperty");function P6t(t,e,r){if(_n(r)){for(let i=0;i<r.length;i++)r[i]=lf(t.items,e,r[i]);return r}let n=$v(t,r);if(!_n(n))return n;for(let i=0;i<n.length;i++)n[i]=lf(t.items,e,n[i]);return n}s(P6t,"FromArray");function D6t(t,e,r){return Gd(r)?r:$v(t,r)}s(D6t,"FromDate");function B6t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return lf(i,[...e,...n],r)}s(B6t,"FromImport");function N6t(t,e,r){let n=$v(t,r);return t.allOf.reduce((i,o)=>{let a=lf(o,e,n);return xi(a)?{...i,...a}:a},{})}s(N6t,"FromIntersect");function L6t(t,e,r){let n=$v(t,r);if(!xi(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=lf(t.properties[o],e,n[o]);Ws(a)||(n[o]=lf(t.properties[o],e,n[o]))}if(!mge(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=lf(t.additionalProperties,e,n[o]));return n}s(L6t,"FromObject");function M6t(t,e,r){let n=$v(t,r);if(!xi(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&mge(a)&&(n[l]=lf(a,e,n[l]));if(!mge(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=lf(i,e,n[l]));return n}s(M6t,"FromRecord");function F6t(t,e,r){return lf(bo(t,e),e,$v(t,r))}s(F6t,"FromRef");function O6t(t,e,r){return lf(bo(t,e),e,r)}s(O6t,"FromThis");function Q6t(t,e,r){let n=$v(t,r);if(!_n(n)||Ws(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=lf(i[a],e,n[a]));return n}s(Q6t,"FromTuple");function U6t(t,e,r){let n=$v(t,r);for(let i of t.anyOf){let o=lf(i,e,wo(n));if(Ti(i,e,o))return o}return n}s(U6t,"FromUnion");function lf(t,e,r){let n=Ul(t,e),i=t;switch(i[ot]){case"Array":return P6t(i,n,r);case"Date":return D6t(i,n,r);case"Import":return B6t(i,n,r);case"Intersect":return N6t(i,n,r);case"Object":return L6t(i,n,r);case"Record":return M6t(i,n,r);case"Ref":return F6t(i,n,r);case"This":return O6t(i,n,r);case"Tuple":return Q6t(i,n,r);case"Union":return U6t(i,n,r);default:return $v(i,r)}}s(lf,"Visit");function wz(...t){return t.length===3?lf(t[0],t[1],t[2]):lf(t[0],[],t[1])}s(wz,"Default");f();f();var eA={};ma(eA,{Delete:()=>H6t,Format:()=>aF,Get:()=>W6t,Has:()=>$6t,Set:()=>q6t,ValuePointerRootDeleteError:()=>_z,ValuePointerRootSetError:()=>Sz});f();var Sz=class extends Rn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},_z=class extends Rn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function uqe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(uqe,"Escape");function*aF(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield uqe(t.slice(e,r))),e=n+1):r=n;yield uqe(t.slice(e))}s(aF,"Format");function q6t(t,e,r){if(e==="")throw new Sz(t,e,r);let[n,i,o]=[null,t,""];for(let a of aF(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(q6t,"Set");function H6t(t,e){if(e==="")throw new _z(t,e);let[r,n,i]=[null,t,""];for(let o of aF(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(H6t,"Delete");function $6t(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of aF(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s($6t,"Has");function W6t(t,e){if(e==="")return t;let r=t;for(let n of aF(e)){if(r[n]===void 0)return;r=r[n]}return r}s(W6t,"Get");f();function j6t(t,e){if(!xi(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>T2(t[i],e[i]))}s(j6t,"ObjectType");function G6t(t,e){return Gd(e)&&t.getTime()===e.getTime()}s(G6t,"DateType");function V6t(t,e){return!_n(e)||t.length!==e.length?!1:t.every((r,n)=>T2(r,e[n]))}s(V6t,"ArrayType");function z6t(t,e){return!Cm(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>T2(r,e[n]))}s(z6t,"TypedArrayType");function Y6t(t,e){return t===e}s(Y6t,"ValueType");function T2(t,e){if(Gd(t))return G6t(t,e);if(Cm(t))return z6t(t,e);if(_n(t))return V6t(t,e);if(xi(t))return j6t(t,e);if(Y0(t))return Y6t(t,e);throw new Error("ValueEquals: Unable to compare value")}s(T2,"Equal");var K6t=Fo({type:ro("insert"),path:zd(),value:Ng()}),J6t=Fo({type:ro("update"),path:zd(),value:Ng()}),X6t=Fo({type:ro("delete"),path:zd()}),fqe=Mo([K6t,J6t,X6t]),Rz=class extends Rn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function kz(t,e){return{type:"update",path:t,value:e}}s(kz,"CreateUpdate");function pqe(t,e){return{type:"insert",path:t,value:e}}s(pqe,"CreateInsert");function mqe(t){return{type:"delete",path:t}}s(mqe,"CreateDelete");function dqe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new Rz(t,"Cannot diff objects with symbols")}s(dqe,"AssertDiffable");function*Z6t(t,e,r){if(dqe(e),dqe(r),!sue(r))return yield kz(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)Sn(e,o)||(yield pqe(`${t}/${o}`,r[o]));for(let o of n)Sn(r,o)&&(T2(e,r)||(yield*Pz(`${t}/${o}`,e[o],r[o])));for(let o of n)Sn(r,o)||(yield mqe(`${t}/${o}`))}s(Z6t,"ObjectType");function*eFt(t,e,r){if(!_n(r))return yield kz(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*Pz(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield pqe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield mqe(`${t}/${n}`))}s(eFt,"ArrayType");function*tFt(t,e,r){if(!Cm(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield kz(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*Pz(`${t}/${n}`,e[n],r[n])}s(tFt,"TypedArrayType");function*rFt(t,e,r){e!==r&&(yield kz(t,r))}s(rFt,"ValueType");function*Pz(t,e,r){if(sue(e))return yield*Z6t(t,e,r);if(_n(e))return yield*eFt(t,e,r);if(Cm(e))return yield*tFt(t,e,r);if(Y0(e))return yield*rFt(t,e,r);throw new Rz(e,"Unable to diff value")}s(Pz,"Visit");function hqe(t,e){return[...Pz("",t,e)]}s(hqe,"Diff");function nFt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(nFt,"IsRootUpdate");function iFt(t){return t.length===0}s(iFt,"IsIdentity");function gqe(t,e){if(nFt(e))return wo(e[0].value);if(iFt(e))return wo(t);let r=wo(t);for(let n of e)switch(n.type){case"insert":{eA.Set(r,n.path,n.value);break}case"update":{eA.Set(r,n.path,n.value);break}case"delete":{eA.Delete(r,n.path);break}}return r}s(gqe,"Patch");f();function Aqe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=yv(e,r)?l4(e,r,n):n;if(!Ti(e,r,i))throw new c4(e,i,Qy(e,r,i).First());return i}s(Aqe,"Encode");f();function Dz(t){return xi(t)&&!_n(t)}s(Dz,"IsStandardObject");var Bz=class extends Rn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function oFt(t,e,r,n){if(!Dz(r))eA.Set(t,e,wo(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)hge(t,`${e}/${a}`,r[a],n[a])}}s(oFt,"ObjectType");function sFt(t,e,r,n){if(!_n(r))eA.Set(t,e,wo(n));else{for(let i=0;i<n.length;i++)hge(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(sFt,"ArrayType");function aFt(t,e,r,n){if(Cm(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else eA.Set(t,e,wo(n))}s(aFt,"TypedArrayType");function cFt(t,e,r,n){r!==n&&eA.Set(t,e,n)}s(cFt,"ValueType");function hge(t,e,r,n){if(_n(n))return sFt(t,e,r,n);if(Cm(n))return aFt(t,e,r,n);if(Dz(n))return oFt(t,e,r,n);if(Y0(n))return cFt(t,e,r,n)}s(hge,"Visit");function yqe(t){return Cm(t)||Y0(t)}s(yqe,"IsNonMutableValue");function lFt(t,e){return Dz(t)&&_n(e)||_n(t)&&Dz(e)}s(lFt,"IsMismatchedValue");function Cqe(t,e){if(yqe(t)||yqe(e))throw new Bz("Only object and array types can be mutated at the root level");if(lFt(t,e))throw new Bz("Cannot assign due type mismatch of assignable values");hge(t,"",t,e)}s(Cqe,"Mutate");f();var Nz=class extends Rn{static{s(this,"ParseError")}constructor(e){super(e)}},gge;(function(t){let e=new Map([["Assert",(o,a,c)=>(Ez(o,a,c),c)],["Cast",(o,a,c)=>iF(o,a,c)],["Clean",(o,a,c)=>bz(o,a,c)],["Clone",(o,a,c)=>wo(c)],["Convert",(o,a,c)=>Tz(o,a,c)],["Decode",(o,a,c)=>yv(o,a)?a4(o,a,c):c],["Default",(o,a,c)=>wz(o,a,c)],["Encode",(o,a,c)=>yv(o,a)?l4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(gge||(gge={}));var vqe=["Clone","Clean","Default","Convert","Assert","Decode"];function uFt(t,e,r,n){return t.reduce((i,o)=>{let a=gge.Get(o);if(Ws(a))throw new Nz(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(uFt,"ParseValue");function Eqe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?_n(t[0])?[t[0],t[1],[],t[2]]:[vqe,t[0],t[1],t[2]]:t.length===2?[vqe,t[0],[],t[1]]:(()=>{throw new Nz("Invalid Arguments")})();return uFt(e,r,n,i)}s(Eqe,"Parse");f();var fC={};ma(fC,{Assert:()=>Ez,Cast:()=>iF,Check:()=>Ti,Clean:()=>bz,Clone:()=>wo,Convert:()=>Tz,Create:()=>Wm,Decode:()=>lqe,Default:()=>wz,Diff:()=>hqe,Edit:()=>fqe,Encode:()=>Aqe,Equal:()=>T2,Errors:()=>Qy,Hash:()=>Yb,Mutate:()=>Cqe,Parse:()=>Eqe,Patch:()=>gqe,ValueErrorIterator:()=>Kb});f();var dFt="gpt-4o-copilot",jm=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ws(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return dFt}parseModelsResponse(e){try{return fC.Parse(FUe,e)}catch(r){an.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await b2(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(an.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=OUe(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&an.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=$i(this._ctx,qt.DebugOverrideEngine)||$i(this._ctx,qt.DebugOverrideEngineLegacy);if(i)return new $I(i,"override");let o=e?this._ctx.get(Nt).customEngine(e):"",a=e?this._ctx.get(Nt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new $I(o,"exp"):new $I(n,"modelpicker"):o?new $I(o,"exp"):this.customModels.length>0?new $I(this.customModels[0],"custommodel"):new $I(r,"default")}},$I=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function WI(t,e=void 0){let r=t.get(jm),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(WI,"getEngineRequestInfo");f();f();var Ni=class{static{s(this,"FileSystem")}};var Qqe=Fe(Oqe());function Uqe(t){return t!==void 0&&t!==0}s(Uqe,"isRepoInfo");function qqe(t){if(t===void 0||t===0)return"";let e=Wv(t);if(e==="github/github")return e;let r=FFt(t)?.toLowerCase();return r!==void 0?r:""}s(qqe,"getDogFood");function Wv(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(Wv,"tryGetGitHubNWO");function FFt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(FFt,"tryGetADONWO");function jI(t,e){let r=gd(e);return OFt(t,r)}s(jI,"extractRepoInfoInBackground");var OFt=HFt(QFt,1e4);async function QFt(t,e){let r=TLe(e);if(!r)return;let n=await UFt(t,r);if(!n)return;let i=t.get(Ni),o=no(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=qFt(a)??"",l=vge(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(QFt,"extractRepoInfo");function vge(t){let e;try{if(e=(0,Qqe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(vge,"parseRepoUrl");async function UFt(t,e){let r=e+"_add_to_make_longer",n=t.get(Ni);for(;e!=="file:///"&&e.length<r.length;){let i=no(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=gd(e)}}s(UFt,"getRepoBaseUri");function qFt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=l.match(n);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(qFt,"getRepoUrlFromConfigText");var Cge=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function HFt(t,e){let r=new kr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new Cge(u)),n.delete(a)}),0}}s(HFt,"computeInBackgroundAndMemoize");f();var cF=500,Hqe=8192-cF,$qe=4,Lz=10,Wqe=1e3*5,Mz={prefix:35,suffix:15,stableContext:35,volatileContext:15},$Ft={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function lF(t){return t=t.toLowerCase(),$Ft[t]??t}s(lF,"normalizeLanguageId");var Ege=class{constructor(e){this.ctx=e;this.cache=new kr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new xge(()=>this.ctx.get(jg).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},xge=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function jFt(t){return"uri"in t}s(jFt,"isCompletionsFiltersInfo");var Nt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Ege(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=$r.createAndMarkAsIssued(),n=void 0){if(r instanceof $y)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&jFt(e)?jI(this.ctx,e.uri):void 0,o=Wv(i)??"",a=qqe(i)??"",c=e?.languageId??"",l=WI(this.ctx).modelId;n??=await this.ctx.get(qr).getToken();let u=ALe(n),d=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,A={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},y=this.getGranularityDirectory(),x=this.makeFilterSettings(A),I=y.extendFilters(x),S=await this.getExpConfig(I.newFilterSettings,g);y.update(x,+(S.variables.copilotbycallbuckets??NaN),+(S.variables.copilottimeperiodsizeinh??NaN));let R=y.extendFilters(x),B=R.newFilterSettings,M=await this.getExpConfig(B,g),O=new Promise(K=>setTimeout(K,t.upcomingDynamicFilterCheckDelayMs));for(let K of R.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(V=>setTimeout(V,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(K,g)});return this.prepareForUpcomingFilters(B,g),new $y(r.properties,r.measurements,r.issuedTime,{filters:B,exp:M})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ss).machineId;this.granularityDirectory=new Tj(e,this.ctx.get(Gy))}return this.granularityDirectory}makeFilterSettings(e){return new XS({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return gm.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new XS({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=B4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??Mz.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??Lz}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??Hqe+cF}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??Wqe}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??Mz.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??Mz.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};f();f();var Fz=Fe(jqe());var Ige={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function vp(t){return t in Ige&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(vp,"isSupportedLanguageId");function Oz(t){if(!(t in Ige))throw new Error(`Unrecognized language: ${t}`);return Ige[t]}s(Oz,"languageIdToWasmLanguage");var bge=new Map;async function GFt(t){let e;try{e=await pz(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new LD(`Could not load tree-sitter-${t}.wasm`,r):r}return Fz.default.Language.load(e)}s(GFt,"loadWasmLanguage");function VFt(t){let e=Oz(t);if(!bge.has(e)){let r=GFt(e);bge.set(e,r)}return bge.get(e)}s(VFt,"getLanguage");var Tge=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function jv(t,e){await Fz.default.init({locateFile:s(o=>Zhe(o),"locateFile")});let r;try{r=new Fz.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Tge(`Could not init Parse for language <${t}>`,o):o}let n=await VFt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(jv,"parseTreeSitter");function Gqe(t){switch(Oz(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(Gqe,"getBlockCloseToken");function zFt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(zFt,"innerQuery");var YFt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function Vqe(t){return zFt([YFt],t).length==1}s(Vqe,"queryPythonIsDocstring");var mC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},Ed=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return uF.languageIds.has(e)||dF.languageIds.has(e)||fF.languageIds.has(e)||pF.languageIds.has(e)||mF.languageIds.has(e)||hF.languageIds.has(e)||gF.languageIds.has(e)||AF.languageIds.has(e)}static create(e,r,n,i){if(uF.languageIds.has(e))return new uF(e,r,n,i);if(dF.languageIds.has(e))return new dF(e,r,n,i);if(fF.languageIds.has(e))return new fF(e,r,n,i);if(hF.languageIds.has(e))return new hF(e,r,n,i);if(pF.languageIds.has(e))return new pF(e,r,n,i);if(mF.languageIds.has(e))return new mF(e,r,n,i);if(gF.languageIds.has(e))return new gF(e,r,n,i);if(AF.languageIds.has(e))return new AF(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await jv(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},wge=class t extends mC{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},uF=class extends Ed{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new wge(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Sge=class t extends mC{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},dF=class extends Ed{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Sge(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},_ge=class t extends mC{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},fF=class extends Ed{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new _ge(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Rge=class t extends mC{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},pF=class extends Ed{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Rge(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},kge=class t extends mC{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},mF=class extends Ed{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new kge(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},Pge=class t extends mC{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},hF=class extends Ed{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new Pge(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Dge=class t extends mC{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},gF=class extends Ed{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Dge(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},Bge=class t extends mC{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},AF=class extends Ed{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new Bge(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};f();function KFt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(KFt,"getProxyFromEnvironment");function JFt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(JFt,"getRejectUnauthorizedFromEnvironment");var zqe=E.Object({proxy:E.Optional(E.String()),proxyStrictSSL:E.Optional(E.Boolean()),proxyAuthorization:E.Optional(E.String()),proxyKerberosServicePrincipal:E.Optional(E.String())});function Yqe(t){let e=KFt(t),r=yF({proxy:e,proxyStrictSSL:JFt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(Yqe,"getHttpSettingsFromEnvironment");function yF(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||XFt(n,i)}}catch{return{...t,proxy:""}}}s(yF,"normalizeHttpSettings");function XFt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(XFt,"getAuth");f();var Kqe=Fe(ui());var Ua=class extends Kqe.Emitter{static{s(this,"Emitter")}get event(){return super.event}};var Nge={};ma(Nge,{activationEvents:()=>yOt,badges:()=>AOt,browser:()=>COt,bugs:()=>lOt,build:()=>nOt,buildType:()=>iOt,categories:()=>hOt,contributes:()=>Lge,default:()=>wOt,dependencies:()=>IOt,description:()=>tOt,devDependencies:()=>bOt,displayName:()=>eOt,enabledApiProposals:()=>EOt,engines:()=>mOt,extensionPack:()=>pOt,homepage:()=>aOt,icon:()=>dOt,keywords:()=>gOt,license:()=>cOt,main:()=>vOt,name:()=>ZFt,overrides:()=>TOt,preview:()=>sOt,pricing:()=>fOt,publisher:()=>oOt,qna:()=>uOt,scripts:()=>xOt,version:()=>rOt});var ZFt="copilot",eOt="GitHub Copilot",tOt="Your AI pair programmer",rOt="1.356.0",nOt="1732",iOt="prod",oOt="GitHub",sOt=!1,aOt="https://github.com/features/copilot?editor=vscode",cOt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",lOt={url:"https://github.com/microsoft/vscode/issues"},uOt="https://github.com/github-community/community/discussions/categories/copilot",dOt="assets/Copilot-App-Icon.png",fOt="Trial",pOt=["GitHub.copilot-chat","GitHub.copilot"],mOt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},hOt=["AI","Chat","Programming Languages","Machine Learning"],gOt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],AOt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],yOt=["onStartupFinished"],COt="./dist/web",vOt="./dist/extension",EOt=["inlineCompletionsAdditions"],Lge={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},xOt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/deviceFlow.ts --save-as-test-token",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},bOt={"@azure/identity":"^4.11.0","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.17.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.0",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.3.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.2.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},IOt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.39","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.3",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},TOt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},wOt={name:ZFt,displayName:eOt,description:tOt,version:rOt,build:nOt,buildType:iOt,publisher:oOt,preview:sOt,homepage:aOt,license:cOt,bugs:lOt,qna:uOt,icon:dOt,pricing:fOt,extensionPack:pOt,engines:mOt,categories:hOt,keywords:gOt,badges:AOt,activationEvents:yOt,browser:COt,main:vOt,enabledApiProposals:EOt,contributes:Lge,scripts:xOt,devDependencies:bOt,dependencies:IOt,overrides:TOt};var qt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function Xqe(t){return["server","parsingandserver"].includes(t)}s(Xqe,"shouldDoServerTrimming");var tA=class{static{s(this,"BlockModeConfig")}},OD=class extends tA{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Nt).overrideBlockMode(n);if(i)return Jqe(i,r);let o=e.get(Nt).enableProgressiveReveal(n);return $i(e,qt.AlwaysRequestMultiline)??o?Jqe("moremultiline",r):r=="ruby"?"parsing":vp(r)?"parsingandserver":"server"}};function SOt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(SOt,"blockModeRequiresTreeSitter");function Jqe(t,e){return t==="moremultiline"&&Ed.isSupported(e)?t:SOt(t)&&!vp(e)?"server":t}s(Jqe,"toApplicableBlockMode");var xc=class{static{s(this,"ConfigProvider")}requireReady(){return Promise.resolve()}},QD=class extends xc{constructor(){super(...arguments);this.onDidChangeCopilotSettings=s(()=>({dispose:s(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{s(this,"DefaultsOnlyConfigProvider")}getConfig(r){return ROt(r)}getOptionalConfig(r){return kOt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},w2=class extends xc{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new Ua;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new Ua;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,i]of Object.entries(r))i!==void 0?this.overrides.set(n,i):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=yF(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[qt.ShowEditorCompletions,qt.EnableAutoCompletions,qt.DelayCompletions,qt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function _Ot(t){return t?.type==="object"&&"properties"in t}s(_Ot,"isContributesObject");function Zqe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(Zqe,"getConfigKeyRecursively");function ROt(t){if(FD.has(t))return FD.get(t);throw new Error(`Missing config default value: ${gM}.${t}`)}s(ROt,"getConfigDefaultForKey");function kOt(t){return FD.get(t)}s(kOt,"getOptionalConfigDefaultForKey");var FD=new Map([[qt.DebugOverrideCppHeadersEnableSwitch,!1],[qt.RelatedFilesVSCodeCSharp,!1],[qt.RelatedFilesVSCodeTypeScript,!1],[qt.RelatedFilesVSCode,!1],[qt.IncludeNeighboringFiles,!1],[qt.ExcludeRelatedFiles,!1],[qt.ContextProviders,[]],[qt.DebugUseEditorFetcher,null],[qt.DebugUseElectronFetcher,null],[qt.DebugOverrideLogLevels,{}],[qt.DebugSnippyOverrideUrl,""],[qt.FetchStrategy,"auto"],[qt.ToolConfirmAutoApprove,!1],[qt.MaxToolCallingLoop,25],[qt.UseSubsetMatching,null],[qt.ContextProviderTimeBudget,void 0],[qt.DebugOverrideCapiUrl,""],[qt.DebugTestOverrideCapiUrl,""],[qt.DebugOverrideProxyUrl,""],[qt.DebugTestOverrideProxyUrl,""],[qt.DebugOverrideEngine,""],[qt.AlwaysRequestMultiline,void 0],[qt.ModelAlwaysTerminatesSingleline,void 0],[qt.TrimCompletionsAggressively,void 0],[qt.CompletionsDebounce,void 0],[qt.NESXTab,void 0],[qt.UseWorkspaceContextCoordinator,void 0],[qt.ShowWorkspaceContextDebugger,!1],[qt.CompletionsDelay,void 0],[qt.UseSplitContextPrompt,void 0],[qt.UseCompletionsComparisonPanel,!1],[qt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[qt.ComparisonPanelRandomizedMode,!1],[qt.ShowEditorCompletions,void 0],[qt.EnableAutoCompletions,void 0],[qt.DelayCompletions,void 0],[qt.FilterCompletions,void 0]]);for(let t of Object.values(qt)){let e=Lge.configuration[0],r=[],n=`${gM}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(_Ot(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(FD.has(t))throw new Error(`Duplicate config default value ${gM}.${t}`);FD.set(t,i.default)}}if(!FD.has(t))throw new Error(`Missing config default value ${gM}.${t}`)}function $i(t,e){return t.get(xc).getConfig(e)}s($i,"getConfig");function K8e(t){return t.get(xc).dumpForTelemetry()}s(K8e,"dumpForTelemetry");var Eo=class{constructor(){this.packageJson=Nge}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function qfe(t){return t.get(Eo).isProduction()}s(qfe,"isProduction");function QLe(t){return t.get(Eo).getBuildType()==="dev"}s(QLe,"isDevBuild");function Wy(t){return t.get(Eo).getBuildType()}s(Wy,"getBuildType");function J8e(t){return t.get(Eo).getBuild()}s(J8e,"getBuild");function h_(t){return t.get(Eo).getVersion()}s(h_,"getVersion");var Ss=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function Dy({name:t,version:e}){return`${t}/${e}`}s(Dy,"formatNameAndVersion");var pn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},lI="2025-05-01";function ip(t){let e=t.get(pn);return{"Editor-Version":Dy(e.getEditorInfo()),"Editor-Plugin-Version":Dy(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":h_(t)}}s(ip,"editorVersionHeaders");var sp="Iv1.b507a08c87ecfe98",eHe="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",Gl=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??sp}};var ln=class{static{s(this,"Fetcher")}getImplementation(){return this}};function Gv(t,e,r,n,i,o,a,c,l,u){let d={...c,Authorization:`Bearer ${r}`,...ip(t)};u===void 0&&(d["Openai-Organization"]="github-copilot",d["X-Request-Id"]=i,d["VScode-SessionId"]=t.get(Ss).sessionId,d["VScode-MachineId"]=t.get(Ss).machineId,d["X-GitHub-Api-Version"]=lI),n&&(d["OpenAI-Intent"]=n);let p={method:"POST",headers:d,json:o,timeout:l},m=t.get(ln);if(a){let g=new AbortController;a.onCancellationRequested(()=>{Dt(t,"networking.cancelRequest",$r.createAndMarkAsIssued({headerRequestId:i})),g.abort()}),p.signal=g.signal}return m.fetch(e,p).catch(g=>{if(POt(g))return Dt(t,"networking.disconnectAll"),m.disconnectAll().then(()=>m.fetch(e,p));throw g})}s(Gv,"postRequest");function POt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(POt,"isInterruptedNetworkError");var DOt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function BOt(t){return DOt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(BOt,"isOomError");function Vv(t,e,r,n=an){if(!hd(e)){if(e instanceof Error){let i=e;BOt(i)?t.get(Io).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Io).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Io).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Io).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Io).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(Vv,"handleException");function tHe(t){process.addListener("uncaughtException",r=>{Vv(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,Vv(t,r,"unhandledRejection")}finally{e=!1}})}s(tHe,"registerDefaultHandlers");async function rHe(t){try{await I2}catch(e){Vv(t,e,"initializeTokenizers")}}s(rHe,"waitForTokenizers");f();var GI=require("fs"),nHe=require("os"),iHe=Fe(require("path")),UD=require("process");var Li=class{static{s(this,"PersistenceManager")}},Mge=class extends Li{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await GI.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await GI.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await GI.promises.rm(i):await GI.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await GI.promises.rm(n)}catch{}}async listSettings(){try{return(await GI.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await GI.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function Fge(){return UD.env.XDG_CONFIG_HOME&&iHe.isAbsolute(UD.env.XDG_CONFIG_HOME)?UD.env.XDG_CONFIG_HOME+"/github-copilot":(0,nHe.platform)()==="win32"?UD.env.USERPROFILE+"\\AppData\\Local\\github-copilot":UD.env.HOME+"/.config/github-copilot"}s(Fge,"getXdgConfigPath");function oHe(){return new Mge(Fge())}s(oHe,"makeXdgPersistenceManager");f();f();f();var zv={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var sHe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],aHe={".php":[".blade"]},S2=Object.keys(zv).flatMap(t=>zv[t].extensions);var Oge=Fe(require("node:path"));var HD=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},CF=class{static{s(this,"LanguageDetection")}},Qge=new Map,qD=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(zv)){for(let n of e)Qge.set(n,[...Qge.get(n)??[],t]);for(let n of r??[])qD.set(n,[...qD.get(n)??[],t])}var Uge=class extends CF{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Hi(e.uri),n=Oge.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new HD(o.languageId,o.isGuess,a):new HD(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(sHe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=Oge.extname(n).toLowerCase();if(i.length>0&&S2.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=aHe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(qD.has(e))return{languageId:qD.get(e)[0],isGuess:!1};let n=Qge.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),qD.has(e))return{languageId:qD.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},qge=class extends CF{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new HD("cpp",n.isGuess,n.fileExtension):n}},Hge=class extends CF{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new HD(r.languageId,!0,""):this.delegate.detectLanguage(r)}},NOt=new qge(new Hge(new Uge));function $D({uri:t,languageId:e}){let r=NOt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s($D,"detectLanguage");f();f();f();f();function Yv(t){if(t.isCancellationRequested)throw new Qz}s(Yv,"throwIfCancellationRequested");function qz(t){return t instanceof Qz?!0:t instanceof Error&&t.name===$ge&&t.message===$ge}s(qz,"isCancellationError");var Qz=class extends Error{static{s(this,"CancellationError")}constructor(){super($ge),this.name=this.message}},$ge="Canceled",Uz=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function _2(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(_2,"isTypeDefinition");var Bs=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=lHe(e,e.length,i),cHe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=lHe(e,e.length,++i),cHe(n,r)):i++;return n.join("")}};function cHe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(cHe,"appendIndent");function lHe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(lHe,"consumeIndent");var Gm=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Kc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await jv(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new Uz,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let x=0;x<i.length;x++){let I=i[x].name;I==="name"?(u=i[x].node.startIndex,d=i[x].node.endIndex):I==="reference"?(u=i[x].node.startIndex,d=i[x].node.endIndex,c=i[x].node.startIndex,l=i[x].node.endIndex,h=I):I==="body"?(p=i[x].node.startIndex,m=i[x].node.endIndex):I==="comment"?(o=o===0?i[x].node.startIndex:Math.min(o,i[x].node.startIndex),a=Math.max(a,i[x].node.endIndex)):I==="receiver"?g=Bs.fromBounds(i[x].node.startIndex,i[x].node.endIndex).getText(n):(c=i[x].node.startIndex,l=i[x].node.endIndex,h=I)}h==="definition.module.filescoped"&&(m=n.length,l=m);let A=Bs.fromBounds(c,l),y=c>0||l>0||u>0||d>0?new Gm(r,"","",Bs.fromBounds(o,a),Bs.fromBounds(u,d),Bs.fromBounds(p,m),A,t.kindFromString(h),0):null;if(y){t.updateScopesForSymbol(e,y);let x=y.nameRange.getText(n),I=this.createNameFromScopes(n,e.toArray());return I=g?`${g}.${I}`:I,new Gm(r,I,x.substring(x.lastIndexOf(".")+1),y.commentRange,y.nameRange,y.bodyRange,y.extentRange,y.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var Hz=class extends Kc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,LOt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},$z=class extends Kc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,FOt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,OOt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},Wz=class extends Kc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,MOt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new Bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Bs(d,p-d),h=new Bs(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=Bs.empty,A=Bs.empty,y=u.substring(u.lastIndexOf("/")+1);i.add(new Gm(e,u,y,g,m,A,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},LOt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,MOt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,FOt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,OOt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var Gz=class extends Kc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,QOt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Vz=class extends Kc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,qOt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,HOt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},zz=class extends Kc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,UOt)).filter(i=>i.kind===0)}},QOt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,UOt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,qOt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,HOt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var $Ot=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Yz=class extends Kc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,WOt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Kz=class extends Kc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,jOt)).filter(i=>!$Ot.has(i.unqualifiedName))}};var WOt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,jOt=`
(call_expression function: (_) @name) @reference
`;f();var GOt=new Set(["int","str","float","bool","list","dict","tuple","set"]),Jz=class extends Kc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,VOt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},Xz=class extends Kc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,zOt)).filter(i=>!GOt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,KOt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},Zz=class extends Kc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,YOt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?l=d:d.name==="alias"?c=d:d.name==="import"&&(u=d);if(l&&u){let d=a||l,p=c?new Bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Bs(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new Bs(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Bs.empty,g=Bs.empty,A=d.node.text,y=A.split(".").pop()||A,x;a?x=`${l.node.text}.${a.node.text}`:x=l.node.text,i.add(new Gm(e,x,y,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},VOt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,zOt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,YOt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,KOt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var JOt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),WD=class extends Kc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,XOt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},jD=class extends Kc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,ZOt)).filter(i=>!JOt.has(i.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var XOt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,ZOt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var e7t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),eY=class extends WD{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,t7t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},tY=class extends jD{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,r7t),super.extractReferences(e,r)]);return[...n.filter(o=>!e7t.has(o.unqualifiedName)),...i]}},t7t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,r7t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var vF=[{symbolExtractor:new Gz,referenceExtractor:new Vz,importExtractor:new zz,languageId:"java"},{symbolExtractor:new Hz,referenceExtractor:new $z,importExtractor:new Wz,languageId:"go"},{symbolExtractor:new Jz,referenceExtractor:new Xz,importExtractor:new Zz,languageId:"python"},{symbolExtractor:new WD,referenceExtractor:new jD,languageId:"typescript"},{symbolExtractor:new eY,referenceExtractor:new tY,languageId:"typescriptreact"},{symbolExtractor:new Yz,referenceExtractor:new Kz,languageId:"javascript"}];function uHe(t){let e=$D({uri:t});if(e&&vF.some(r=>e===r.languageId))return e}s(uHe,"getSupportedLanguageIdForMultiLanguageProvider");var dHe=new Map(vF.map(t=>[t.languageId,t.referenceExtractor])),rY=new Map(vF.map(t=>[t.languageId,t.symbolExtractor])),fHe=new Map(vF.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),Wge=vF.map(t=>zv[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function jge(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(jge,"virtualNode");function pHe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(pHe,"lineNode");function Gge(t){return{type:"blank",lineNumber:t,subs:[]}}s(Gge,"blankNode");function nY(t){return{type:"top",indentation:-1,subs:t??[]}}s(nY,"topNode");function Mu(t){return t.type==="blank"}s(Mu,"isBlank");function R2(t){return t.type==="line"}s(R2,"isLine");function k2(t){return t.type==="virtual"}s(k2,"isVirtual");f();function mHe(t,e){return xd(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(mHe,"clearLabelsIf");function P2(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>P2(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>P2(r,e)),label:t.label?e(t.label):void 0}}}s(P2,"mapLabels");function xd(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(xd,"visitTree");function Vge(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),xd(t,o,n),i}s(Vge,"foldTree");function iY(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:nY()}s(iY,"rebuildTree");f();function i7t(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,r[u]);return[pHe(r[u],u,n[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let A=g;A<h;A++)m.push(Gge(A));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(Gge(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return nY(a)}s(i7t,"parseRaw");function EF(t,e){function r(n){if(R2(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),xd(t,r,"bottomUp")}s(EF,"labelLines");function oY(t){function e(r){if(k2(r)&&r.label===void 0){let n=r.subs.filter(i=>!Mu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),xd(t,e,"bottomUp")}s(oY,"labelVirtualInherited");function xF(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(xF,"buildLabelRules");function zge(t){let r=iY(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&R2(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(R2(c)||k2(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Mu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[jge(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),Mu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return mHe(t,n=>n==="newVirtual"),r}s(zge,"combineClosersAndOpeners");function hHe(t,e=Mu,r){return iY(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(d=!1){if(c!==void 0&&(o.length>0||!d)){let p=jge(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),Mu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(hHe,"groupBlocks");function D2(t){return iY(t,s(function(r){return k2(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&k2(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(D2,"flattenVirtual");var o7t={opener:/^[[({]/,closer:/^[\])}]/},s7t=xF(o7t),gHe={};function Yge(t,e){gHe[t]=e}s(Yge,"registerLanguageSpecificParser");function B2(t,e){let r=i7t(t),n=gHe[e??""];return n?n(r):(EF(r,s7t),zge(r))}s(B2,"parseTree");var a7t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},c7t=xF(a7t);function AHe(t){let e=t;return EF(e,c7t),e=zge(e),e=D2(e),oY(e),xd(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!Mu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(AHe,"processJava");f();var l7t={heading:/^# /,subheading:/^## /,subsubheading:/### /},u7t=xF(l7t);function yHe(t){let e=t;if(EF(e,u7t),Mu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||Mu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=hHe(e),e=D2(e),oY(e),e}s(yHe,"processMarkdown");f();function CHe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(CHe,"deparseLine");Yge("markdown",yHe);Yge("java",AHe);var d7t={worthUp:.9,worthSibling:.88,worthDown:.8};function Kge(t,e,r=Wi(),n=d7t){let i=P2(t,o=>o?1:void 0);return xd(i,o=>{if(Mu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),xd(i,o=>{if(Mu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((d,p)=>Math.max(d,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,d)=>u.label=c[d])},"topDown"),f7t(i,e,r)}s(Kge,"fromTreeWithFocussedLines");function f7t(t,e,r=Wi()){let n=Vge(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[CHe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Qt(n,e,r)}s(f7t,"fromTreeWithValuedLines");function Ep(t,e=!0,r=!0,n,i=Wi()){let o=typeof t=="string"?B2(t):B2(t.source,t.languageId);D2(o);let a=P2(o,c=>e&&c!=="closer");return xd(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&xd(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&xd(a,c=>{c.label||=(R2(c)||Mu(c))&&c.lineNumber==0},"topDown"),Kge(a,n,i)}s(Ep,"elidableTextForSourceCode");f();var bF=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Wi().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Qt=class t{constructor(e,r,n=Wi()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new bF(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&Ep(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Wi().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=m7t(this.lines,i);if(l<=e)return Jge(c);h7t(u,a);let d=l;for(;d>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?g7t(c,m):"",A=vHe(g,r,o,h);c[m]=A,d-=h.cost,d+=A.cost;let y=m+1;if(y<c.length){let I=c[y];sY(I,r)&&(d-=I.cost,I.markedForRemoval=!0)}let x=m-1;if(x>=0){let I=c[x];sY(I,r)&&(d-=I.cost,I.markedForRemoval=!0)}}if(d>e)return Jge([vHe("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)sY(p[m],r)&&sY(p[m-1],r)&&p.splice(m,1);return Jge(p)}};function p7t(t){return t?.text.match(/^\s*/)?.[0]??""}s(p7t,"getIndentation");function sY(t,e){return t?.text.trim()===e.trim()}s(sY,"isEllipsis");function Jge(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(Jge,"produceElidedText");function m7t(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(m7t,"initializeElisionContext");function h7t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(h7t,"sortPriorityQueue");function g7t(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=p7t(i);break}}return r}s(g7t,"getClosestIndentation");function vHe(t,e,r,n){let i=t+e;return new bF(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(vHe,"getNewEllipsis");f();var EHe=require("fs");async function xHe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((A,y)=>A+y.node.extentRange.length,0);for(let A of m){if(c<=5)return u;Yv(i);let y=A.node.extentRange.length/g,x=Math.min(c,y*l),I=(await A7t([A])).elide(x).getText();c-=n.tokenLength(I),u.push({uri:h,value:I})}}return u}s(xHe,"symbolRangesToCodeSnippets");async function A7t(t){if(t.length===0)return new Qt([]);let e=t[0].node.fileName,r=[],n="";try{let i=Ko(e);i&&(n=(await EHe.promises.readFile(i)).toString())}catch{}for(let i of t)bHe(i,n).forEach(o=>r.push(o));return new Qt(r)}s(A7t,"sameFileSymbolRangeToElidableText");function bHe(t,e){let n=[],i=t.node,o=e.substring(Xge(e,i.commentRange.start),i.commentRange.end);n.push([Zge(o),1-3e-4]);let a=Xge(e,i.bodyRange.start),c=Xge(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(_2(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([Zge(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...bHe(u,e));else{let u=1-(_2(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);n.push([Zge(d),u])}return _2(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(bHe,"prepareForElidableText");function Xge(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(Xge,"shiftLeftToNearestLineEndingOrAlphanumeric");function Zge(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(Zge,"trimLineEndingsAndTrailingWhitespace");var eAe=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},VI=class extends eAe{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];Yv(a);let l=await c.extractReferences(e,r);Yv(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>_2(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(d.length+m.length>r.mlcpMaxContextItems){d.push(...m.slice(0,r.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,r){if(Yv(r),_2(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},aY=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new VI(e,r,!0,!0)),this.strategies.set("java",new VI(e,r,!0,!0)),this.strategies.set("python",new VI(e,r,!0,!1)),this.strategies.set("typescript",new VI(e,r,!0,!0)),this.strategies.set("typescriptreact",new VI(e,r,!0,!0)),this.strategies.set("javascript",new VI(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);Yv(c);let u=Wi();return xHe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};f();f();f();f();var N2={Id:"id"},xp={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},ao={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var cY=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new tAe(N2.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},IF=class t extends cY{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${xp.FilePath}');`]);this.fields=[new SF(xp.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new a0(xp.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},TF=class t extends cY{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${ao.DocumentId}', '${ao.ExtentStart}', '${ao.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${ao.UnqualifiedName}');`],`FOREIGN KEY(${ao.DocumentId}) REFERENCES Document(${N2.Id}) ON DELETE CASCADE`);this.fields=[new a0(ao.DocumentId),new SF(ao.FullyQualifiedName,{notNull:!0}),new SF(ao.UnqualifiedName,{notNull:!0}),new a0(ao.CommentStart,{notNull:!0}),new a0(ao.CommentLength,{notNull:!0}),new a0(ao.NameStart,{notNull:!0}),new a0(ao.NameLength,{notNull:!0}),new a0(ao.BodyStart,{notNull:!0}),new a0(ao.BodyLength,{notNull:!0}),new a0(ao.ExtentStart,{notNull:!0}),new a0(ao.ExtentLength,{notNull:!0}),new a0(ao.SymbolKind,{notNull:!0}),new a0(ao.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},wF=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},SF=class extends wF{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},a0=class extends wF{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},tAe=class extends wF{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var lY=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?Vm(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Vm(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${N2.Id} = ?`,[e])}},Kv=class t extends lY{static{s(this,"DocumentTable")}static{this.tableName=IF.tableName}createQueryGenerator(){return new IF}async updateTimestamp(e,r){let n=await this.init;n&&await Vm(n,`UPDATE ${t.tableName} SET ${xp.LastWriteTimeUtc} = ? WHERE ${xp.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Vm(r,`DELETE FROM ${t.tableName} WHERE ${xp.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Vm(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${xp.FilePath} = ?`,[e]):[]}},Jc=class t extends lY{static{s(this,"SymbolTable")}static{this.tableName=TF.tableName}createQueryGenerator(){return new TF}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Vm(r,`DELETE FROM ${t.tableName} WHERE ${ao.DocumentId} = ?`,[e])}};async function Vm(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(Vm,"runPromisifiedDBQuery");var fY=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Kv.tableName} ON ${Jc.tableName}.${ao.DocumentId} = ${Kv.tableName}.${N2.Id}`;this.db=this.initDb(e),this.documentTable=new Kv(this.db),this.symbolTable=new Jc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Fe(LHe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Vm(n,"pragma journal_mode=wal",[]),await Vm(n,"pragma synchronous=normal",[]),await Vm(n,"pragma optimize=0x10002",[]),await Vm(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${ao.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${ao.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${ao.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${ao.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${Kv.tableName}.${xp.FilePath} = ? AND ${Jc.tableName}.${ao.ExtentStart} <= ? AND (${Jc.tableName}.${ao.ExtentStart} + ${Jc.tableName}.${ao.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${Kv.tableName}.${xp.FilePath} = ? AND ${Jc.tableName}.${ao.ExtentStart} >= ? AND (${Jc.tableName}.${ao.ExtentStart} + ${Jc.tableName}.${ao.ExtentLength}) <= ?`,`ORDER BY ${Jc.tableName}.${ao.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Jc.tableName}`,this.innerJoinStatement,`WHERE ${Kv.tableName}.${xp.FilePath} = ? AND ${Jc.tableName}.${ao.FullyQualifiedName} LIKE ?`,`ORDER BY ${Jc.tableName}.${ao.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Vm(n,e,r)):[]}};var pY=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new fY(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return zD(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),Yv(n)}return zD(i)}async getDefinitionsAsync(e){return zD(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return zD(n)}async findSymbolsContainedByRangeAsync(e,r,n){return zD(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return zD(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function zD(t){return t.map(e=>new Gm(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Bs(e.commentStart,e.commentLength),new Bs(e.nameStart,e.nameLength),new Bs(e.bodyStart,e.bodyLength),new Bs(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(zD,"symbolsToSymbolRanges");var hY=Fe(require("fs/promises"));var mY=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new pY(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=Ko(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await hY.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await hY.readFile(n)).toString(),u=await c.extractSymbols(e,l),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function aAe(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>I7t(r))}s(aAe,"isIndexWorkerData");var RF=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},zI=class extends RF{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},gY=class extends RF{constructor(r){super(bd.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},bd={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},AY=class extends zI{constructor(r,n,i){super(r,bd.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},yY=class extends zI{constructor(r,n){super(r,bd.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},CY=class extends zI{constructor(r,n,i){super(r,bd.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},vY=class extends zI{constructor(r,n){super(r,bd.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},EY=class extends zI{constructor(r,n,i,o,a,c){super(r,bd.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},xY=class extends zI{static{s(this,"ExitRequest")}constructor(e){super(e,bd.Exit)}},rA=class extends RF{constructor(r,n,i){super(bd.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function I7t(t){return"databaseFilePath"in t&&"rootPath"in t}s(I7t,"isIndexableWorkspaceFolder");var MHe=Fe(ui()),YI=require("worker_threads");var bY=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new mY(e,rY,fHe,r),this.contextRetreival=new aY(this.index.reader,dHe)}},cAe=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=Ya(i.rootPath);this.indices.set(o,new bY(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new MHe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case bd.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case bd.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case bd.Cancel:n.get(e.id)?.cancel(),o=new rA(e.id,void 0,void 0);break;case bd.Exit:o=await this.dispatchExit(e,r,i.token);break;case bd.CreateIndex:o=t.dispatchCreateIndex(e,r,i.token);break;case bd.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case bd.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new rA(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=Ya(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new rA(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=Ya(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new rA(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=Ya(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new rA(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new rA(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let i=Ya(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new bY(e.databaseFilePath)),new rA(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=Ya(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new rA(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function FHe(){return aAe(YI.workerData)}s(FHe,"isIndexWorker");function OHe(){let t=YI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!aAe(YI.workerData))throw new Error("Worker data must provide a valid database path.");let e=YI.workerData.cwd;process.cwd=()=>e,new cAe(t,YI.workerData.indexWorkspaceRoots,YI.workerData.params)}s(OHe,"runIndexWorker");f();var kF=Fe(require("util"));function QHe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(Wy(t)==="dev")return t.get(qc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",kF.format(...i)))},e.dir=(n,i)=>r(4,kF.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(kF.format(...n));i.name="Trace",e.log(i)},e}s(QHe,"createConsole");var yx=Fe(require("fs/promises")),i1t=Fe(require("os")),pq=Fe(require("path")),Zh=Fe(iA()),o1t=require("worker_threads");f();f();var aK=require("assert");f();f();var FQt={right:HQt,center:$Qt},OQt=0,eK=1,QQt=2,tK=3,NAe=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&bp.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),bp.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=bp.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),d=a;if(u>bp.stringWidth(a)&&(d+=" ".repeat(u-bp.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=FQt[e[c].align];d=m(d,u),bp.stringWidth(d)<u&&(d+=" ".repeat((l||0)-bp.stringWidth(d)-1))}let p=e[c].padding||[0,0,0,0];p[tK]&&(o+=" ".repeat(p[tK])),o+=B$e(e[c],d,"| "),o+=d,o+=B$e(e[c],d," |"),p[eK]&&(o+=" ".repeat(p[eK])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=bp.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=bp.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[OQt]||0).fill("")),i.push(...new Array(o.padding[QQt]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[tK]||0)+(e.padding[eK]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||bp.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,UQt(e[c])):a)}};function B$e(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(B$e,"addBorder");function UQt(t){let e=t.padding||[],r=1+(e[tK]||0)+(e[eK]||0);return t.border?r+4:r}s(UQt,"_minWidth");function qQt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(qQt,"getWindowWidth");function HQt(t,e){t=t.trim();let r=bp.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(HQt,"alignRight");function $Qt(t,e){t=t.trim();let r=bp.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s($Qt,"alignCenter");var bp;function N$e(t,e){return bp=e,new NAe({width:t?.width||qQt(),wrap:t?.wrap})}s(N$e,"cliui");f();var L$e=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function LAe(t){return t.replace(L$e,"")}s(LAe,"stripAnsi");function M$e(t,e){let[r,n]=t.match(L$e)||["",""];t=LAe(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(M$e,"wrap");function MAe(t){return N$e(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:LAe,wrap:M$e})}s(MAe,"ui");f();var XD=require("path"),rK=require("fs");function FAe(t,e){let r=(0,XD.resolve)(".",t),n;for((0,rK.statSync)(r).isDirectory()||(r=(0,XD.dirname)(r));;){if(n=e(r,(0,rK.readdirSync)(r)),n)return(0,XD.resolve)(r,n);if(r=(0,XD.dirname)(n=r),n===r)break}}s(FAe,"default");var X$e=require("util"),Z$e=require("fs"),eWe=require("url");f();var q$e=require("util"),sK=require("path");f();function O2(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(O2,"camelCase");function nK(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(nK,"decamelize");function iK(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(iK,"looksLikeNumber");f();f();function F$e(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(F$e,"tokenizeArgString");f();var Zm;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(Zm||(Zm={}));var Jv,oK=class{static{s(this,"YargsParser")}constructor(e){Jv=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=F$e(e),o=typeof e=="string",a=WQt(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],d=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),A=n.__||Jv.format,y={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},x=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,I=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(se){let le=typeof se=="object"?se.key:se,qe=Object.keys(se).map(function(Be){return{boolean:"bools",string:"strings",number:"numbers"}[Be]}).filter(Boolean).pop();qe&&(y[qe][le]=!0),y.arrays[le]=!0,y.keys.push(le)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(se){y.bools[se]=!0,y.keys.push(se)}),[].concat(n.string||[]).filter(Boolean).forEach(function(se){y.strings[se]=!0,y.keys.push(se)}),[].concat(n.number||[]).filter(Boolean).forEach(function(se){y.numbers[se]=!0,y.keys.push(se)}),[].concat(n.count||[]).filter(Boolean).forEach(function(se){y.counts[se]=!0,y.keys.push(se)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(se){y.normalize[se]=!0,y.keys.push(se)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([se,le])=>{typeof le=="number"&&(y.nargs[se]=le,y.keys.push(se))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([se,le])=>{typeof le=="function"&&(y.coercions[se]=le,y.keys.push(se))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(se){y.configs[se]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([se,le])=>{(typeof le=="boolean"||typeof le=="function")&&(y.configs[se]=le)})),Oe(n.key,a,n.default,y.arrays),Object.keys(l).forEach(function(se){(y.aliases[se]||[]).forEach(function(le){l[le]=l[se]})});let S=null;$e();let R=[],B=Object.assign(Object.create(null),{_:[]}),M={};for(let se=0;se<i.length;se++){let le=i[se],qe=le.replace(/^-{3,}/,"---"),Be,xe,je,tt,pt,Mt;if(le!=="--"&&/^-/.test(le)&&_t(le))O(le);else if(qe.match(/^---+(=|$)/)){O(le);continue}else if(le.match(/^--.+=/)||!c["short-option-groups"]&&le.match(/^-.+=/))tt=le.match(/^--?([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&(Te(tt[1],y.arrays)?se=V(se,tt[1],i,tt[2]):Te(tt[1],y.nargs)!==!1?se=K(se,tt[1],i,tt[2]):z(tt[1],tt[2],!0));else if(le.match(I)&&c["boolean-negation"])tt=le.match(I),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(xe=tt[1],z(xe,Te(xe,y.arrays)?[!1]:!1));else if(le.match(/^--.+/)||!c["short-option-groups"]&&le.match(/^-[^-]+/))tt=le.match(/^--?(.+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(xe=tt[1],Te(xe,y.arrays)?se=V(se,xe,i):Te(xe,y.nargs)!==!1?se=K(se,xe,i):(pt=i[se+1],pt!==void 0&&(!pt.match(/^-/)||pt.match(x))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(z(xe,pt),se++):z(xe,ht(xe))));else if(le.match(/^-.\..+=/))tt=le.match(/^-([^=]+)=([\s\S]*)$/),tt!==null&&Array.isArray(tt)&&tt.length>=3&&z(tt[1],tt[2]);else if(le.match(/^-.\..+/)&&!le.match(x))pt=i[se+1],tt=le.match(/^-(.\..+)/),tt!==null&&Array.isArray(tt)&&tt.length>=2&&(xe=tt[1],pt!==void 0&&!pt.match(/^-/)&&!Te(xe,y.bools)&&!Te(xe,y.counts)?(z(xe,pt),se++):z(xe,ht(xe)));else if(le.match(/^-[^-]+/)&&!le.match(x)){je=le.slice(1,-1).split(""),Be=!1;for(let Kt=0;Kt<je.length;Kt++){if(pt=le.slice(Kt+2),je[Kt+1]&&je[Kt+1]==="="){Mt=le.slice(Kt+3),xe=je[Kt],Te(xe,y.arrays)?se=V(se,xe,i,Mt):Te(xe,y.nargs)!==!1?se=K(se,xe,i,Mt):z(xe,Mt),Be=!0;break}if(pt==="-"){z(je[Kt],pt);continue}if(/[A-Za-z]/.test(je[Kt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(pt)&&Te(pt,y.bools)===!1){z(je[Kt],pt),Be=!0;break}if(je[Kt+1]&&je[Kt+1].match(/\W/)){z(je[Kt],pt),Be=!0;break}else z(je[Kt],ht(je[Kt]))}xe=le.slice(-1)[0],!Be&&xe!=="-"&&(Te(xe,y.arrays)?se=V(se,xe,i):Te(xe,y.nargs)!==!1?se=K(se,xe,i):(pt=i[se+1],pt!==void 0&&(!/^(-|--)[^-]/.test(pt)||pt.match(x))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(z(xe,pt),se++):z(xe,ht(xe))))}else if(le.match(/^-[0-9]$/)&&le.match(x)&&Te(le.slice(1),y.bools))xe=le.slice(1),z(xe,ht(xe));else if(le==="--"){R=i.slice(se+1);break}else if(c["halt-at-non-option"]){R=i.slice(se);break}else O(le)}X(B,!0),X(B,!1),J(B),$(),te(B,y.aliases,l,!0),ie(B),c["set-placeholder-key"]&&ae(B),Object.keys(y.counts).forEach(function(se){pe(B,se.split("."))||z(se,0)}),p&&R.length&&(B[m]=[]),R.forEach(function(se){B[m].push(se)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(B).filter(se=>se!=="--"&&se.includes("-")).forEach(se=>{delete B[se]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(se=>a[se])).forEach(se=>{c["camel-case-expansion"]&&se.includes("-")&&delete B[se.split(".").map(le=>O2(le)).join(".")],delete B[se]});function O(se){let le=Z("_",se);(typeof le=="string"||typeof le=="number")&&B._.push(le)}s(O,"pushPositional");function K(se,le,qe,Be){let xe,je=Te(le,y.nargs);if(je=typeof je!="number"||isNaN(je)?1:je,je===0)return ye(Be)||(S=Error(A("Argument unexpected for: %s",le))),z(le,ht(le)),se;let tt=ye(Be)?0:1;if(c["nargs-eats-options"])qe.length-(se+1)+tt<je&&(S=Error(A("Not enough arguments following: %s",le))),tt=je;else{for(xe=se+1;xe<qe.length&&(!qe[xe].match(/^-[^0-9]/)||qe[xe].match(x)||_t(qe[xe]));xe++)tt++;tt<je&&(S=Error(A("Not enough arguments following: %s",le)))}let pt=Math.min(tt,je);for(!ye(Be)&&pt>0&&(z(le,Be),pt--),xe=se+1;xe<pt+se+1;xe++)z(le,qe[xe]);return se+pt}s(K,"eatNargs");function V(se,le,qe,Be){let xe=[],je=Be||qe[se+1],tt=Te(le,y.nargs);if(Te(le,y.bools)&&!/^(true|false)$/.test(je))xe.push(!0);else if(ye(je)||ye(Be)&&/^-/.test(je)&&!x.test(je)&&!_t(je)){if(l[le]!==void 0){let pt=l[le];xe=Array.isArray(pt)?pt:[pt]}}else{ye(Be)||xe.push(U(le,Be,!0));for(let pt=se+1;pt<qe.length&&!(!c["greedy-arrays"]&&xe.length>0||tt&&typeof tt=="number"&&xe.length>=tt||(je=qe[pt],/^-/.test(je)&&!x.test(je)&&!_t(je)));pt++)se=pt,xe.push(U(le,je,o))}return typeof tt=="number"&&(tt&&xe.length<tt||isNaN(tt)&&xe.length===0)&&(S=Error(A("Not enough arguments following: %s",le))),z(le,xe),se}s(V,"eatArray");function z(se,le,qe=o){if(/-/.test(se)&&c["camel-case-expansion"]){let je=se.split(".").map(function(tt){return O2(tt)}).join(".");Q(se,je)}let Be=U(se,le,qe),xe=se.split(".");Ae(B,xe,Be),y.aliases[se]&&y.aliases[se].forEach(function(je){let tt=je.split(".");Ae(B,tt,Be)}),xe.length>1&&c["dot-notation"]&&(y.aliases[xe[0]]||[]).forEach(function(je){let tt=je.split("."),pt=[].concat(xe);pt.shift(),tt=tt.concat(pt),(y.aliases[se]||[]).includes(tt.join("."))||Ae(B,tt,Be)}),Te(se,y.normalize)&&!Te(se,y.arrays)&&[se].concat(y.aliases[se]||[]).forEach(function(tt){Object.defineProperty(M,tt,{enumerable:!0,get(){return le},set(pt){le=typeof pt=="string"?Jv.normalize(pt):pt}})})}s(z,"setArg");function Q(se,le){y.aliases[se]&&y.aliases[se].length||(y.aliases[se]=[le],h[le]=!0),y.aliases[le]&&y.aliases[le].length||Q(le,se)}s(Q,"addNewAlias");function U(se,le,qe){qe&&(le=jQt(le)),(Te(se,y.bools)||Te(se,y.counts))&&typeof le=="string"&&(le=le==="true");let Be=Array.isArray(le)?le.map(function(xe){return Z(se,xe)}):Z(se,le);return Te(se,y.counts)&&(ye(Be)||typeof Be=="boolean")&&(Be=OAe()),Te(se,y.normalize)&&Te(se,y.arrays)&&(Array.isArray(le)?Be=le.map(xe=>Jv.normalize(xe)):Be=Jv.normalize(le)),Be}s(U,"processValue");function Z(se,le){return!c["parse-positional-numbers"]&&se==="_"||!Te(se,y.strings)&&!Te(se,y.bools)&&!Array.isArray(le)&&(iK(le)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${le}`)))||!ye(le)&&Te(se,y.numbers))&&(le=Number(le)),le}s(Z,"maybeCoerceNumber");function J(se){let le=Object.create(null);te(le,y.aliases,l),Object.keys(y.configs).forEach(function(qe){let Be=se[qe]||le[qe];if(Be)try{let xe=null,je=Jv.resolve(Jv.cwd(),Be),tt=y.configs[qe];if(typeof tt=="function"){try{xe=tt(je)}catch(pt){xe=pt}if(xe instanceof Error){S=xe;return}}else xe=Jv.require(je);j(xe)}catch(xe){xe.name==="PermissionDenied"?S=xe:se[qe]&&(S=Error(A("Invalid JSON config file: %s",Be)))}})}s(J,"setConfig");function j(se,le){Object.keys(se).forEach(function(qe){let Be=se[qe],xe=le?le+"."+qe:qe;typeof Be=="object"&&Be!==null&&!Array.isArray(Be)&&c["dot-notation"]?j(Be,xe):(!pe(B,xe.split("."))||Te(xe,y.arrays)&&c["combine-arrays"])&&z(xe,Be)})}s(j,"setConfigObject");function $(){typeof u<"u"&&u.forEach(function(se){j(se)})}s($,"setConfigObjects");function X(se,le){if(typeof d>"u")return;let qe=typeof d=="string"?d:"",Be=Jv.env();Object.keys(Be).forEach(function(xe){if(qe===""||xe.lastIndexOf(qe,0)===0){let je=xe.split("__").map(function(tt,pt){return pt===0&&(tt=tt.substring(qe.length)),O2(tt)});(le&&y.configs[je.join(".")]||!le)&&!pe(se,je)&&z(je.join("."),Be[xe])}})}s(X,"applyEnvVars");function ie(se){let le,qe=new Set;Object.keys(se).forEach(function(Be){if(!qe.has(Be)&&(le=Te(Be,y.coercions),typeof le=="function"))try{let xe=Z(Be,le(se[Be]));[].concat(y.aliases[Be]||[],Be).forEach(je=>{qe.add(je),se[je]=xe})}catch(xe){S=xe}})}s(ie,"applyCoercions");function ae(se){return y.keys.forEach(le=>{~le.indexOf(".")||typeof se[le]>"u"&&(se[le]=void 0)}),se}s(ae,"setPlaceholderKeys");function te(se,le,qe,Be=!1){Object.keys(qe).forEach(function(xe){pe(se,xe.split("."))||(Ae(se,xe.split("."),qe[xe]),Be&&(g[xe]=!0),(le[xe]||[]).forEach(function(je){pe(se,je.split("."))||Ae(se,je.split("."),qe[xe])}))})}s(te,"applyDefaultsAndAliases");function pe(se,le){let qe=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(xe){qe=qe[xe]||{}});let Be=le[le.length-1];return typeof qe!="object"?!1:Be in qe}s(pe,"hasKey");function Ae(se,le,qe){let Be=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Mt){Mt=O$e(Mt),typeof Be=="object"&&Be[Mt]===void 0&&(Be[Mt]={}),typeof Be[Mt]!="object"||Array.isArray(Be[Mt])?(Array.isArray(Be[Mt])?Be[Mt].push({}):Be[Mt]=[Be[Mt],{}],Be=Be[Mt][Be[Mt].length-1]):Be=Be[Mt]});let xe=O$e(le[le.length-1]),je=Te(le.join("."),y.arrays),tt=Array.isArray(qe),pt=c["duplicate-arguments-array"];!pt&&Te(xe,y.nargs)&&(pt=!0,(!ye(Be[xe])&&y.nargs[xe]===1||Array.isArray(Be[xe])&&Be[xe].length===y.nargs[xe])&&(Be[xe]=void 0)),qe===OAe()?Be[xe]=OAe(Be[xe]):Array.isArray(Be[xe])?pt&&je&&tt?Be[xe]=c["flatten-duplicate-arrays"]?Be[xe].concat(qe):(Array.isArray(Be[xe][0])?Be[xe]:[Be[xe]]).concat([qe]):!pt&&!!je==!!tt?Be[xe]=qe:Be[xe]=Be[xe].concat([qe]):Be[xe]===void 0&&je?Be[xe]=tt?qe:[qe]:pt&&!(Be[xe]===void 0||Te(xe,y.counts)||Te(xe,y.bools))?Be[xe]=[Be[xe],qe]:Be[xe]=qe}s(Ae,"setKey");function Oe(...se){se.forEach(function(le){Object.keys(le||{}).forEach(function(qe){y.aliases[qe]||(y.aliases[qe]=[].concat(a[qe]||[]),y.aliases[qe].concat(qe).forEach(function(Be){if(/-/.test(Be)&&c["camel-case-expansion"]){let xe=O2(Be);xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),h[xe]=!0)}}),y.aliases[qe].concat(qe).forEach(function(Be){if(Be.length>1&&/[A-Z]/.test(Be)&&c["camel-case-expansion"]){let xe=nK(Be,"-");xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),h[xe]=!0)}}),y.aliases[qe].forEach(function(Be){y.aliases[Be]=[qe].concat(y.aliases[qe].filter(function(xe){return Be!==xe}))}))})})}s(Oe,"extendAliases");function Te(se,le){let qe=[].concat(y.aliases[se]||[],se),Be=Object.keys(le),xe=qe.find(je=>Be.includes(je));return xe?le[xe]:!1}s(Te,"checkAllAliases");function Je(se){let le=Object.keys(y);return[].concat(le.map(Be=>y[Be])).some(function(Be){return Array.isArray(Be)?Be.includes(se):Be[se]})}s(Je,"hasAnyFlag");function Me(se,...le){return[].concat(...le).some(function(Be){let xe=se.match(Be);return xe&&Je(xe[1])})}s(Me,"hasFlagsMatching");function lt(se){if(se.match(x)||!se.match(/^-[^-]+/))return!1;let le=!0,qe,Be=se.slice(1).split("");for(let xe=0;xe<Be.length;xe++){if(qe=se.slice(xe+2),!Je(Be[xe])){le=!1;break}if(Be[xe+1]&&Be[xe+1]==="="||qe==="-"||/[A-Za-z]/.test(Be[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(qe)||Be[xe+1]&&Be[xe+1].match(/\W/))break}return le}s(lt,"hasAllShortFlags");function _t(se){return c["unknown-options-as-args"]&&Et(se)}s(_t,"isUnknownOptionAsArg");function Et(se){return se=se.replace(/^-{3,}/,"--"),se.match(x)||lt(se)?!1:!Me(se,/^-+([^=]+?)=[\s\S]*$/,I,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(Et,"isUnknownOption");function ht(se){return!Te(se,y.bools)&&!Te(se,y.counts)&&`${se}`in l?l[se]:ue(Ue(se))}s(ht,"defaultValue");function ue(se){return{[Zm.BOOLEAN]:!0,[Zm.STRING]:"",[Zm.NUMBER]:void 0,[Zm.ARRAY]:[]}[se]}s(ue,"defaultForType");function Ue(se){let le=Zm.BOOLEAN;return Te(se,y.strings)?le=Zm.STRING:Te(se,y.numbers)?le=Zm.NUMBER:Te(se,y.bools)?le=Zm.BOOLEAN:Te(se,y.arrays)&&(le=Zm.ARRAY),le}s(Ue,"guessType");function ye(se){return se===void 0}s(ye,"isUndefined");function $e(){Object.keys(y.counts).find(se=>Te(se,y.arrays)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.array.",se)),!0):Te(se,y.nargs)?(S=Error(A("Invalid configuration: %s, opts.count excludes opts.narg.",se)),!0):!1)}return s($e,"checkConfiguration"),{aliases:Object.assign({},y.aliases),argv:Object.assign(M,B),configuration:c,defaulted:Object.assign({},g),error:S,newAliases:Object.assign({},h)}}};function WQt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(WQt,"combineAliases");function OAe(t){return t!==void 0?t+1:1}s(OAe,"increment");function O$e(t){return t==="__proto__"?"___proto___":t}s(O$e,"sanitizeKey");function jQt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(jQt,"stripQuotes");var H$e=require("fs");var QAe,UAe,qAe,Q$e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,U$e=(UAe=(QAe=process==null?void 0:process.versions)===null||QAe===void 0?void 0:QAe.node)!==null&&UAe!==void 0?UAe:(qAe=process==null?void 0:process.version)===null||qAe===void 0?void 0:qAe.slice(1);if(U$e&&Number(U$e.match(/^([^.]+)/)[1])<Q$e)throw Error(`yargs parser supports a minimum Node.js version of ${Q$e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var GQt=process?process.env:{},$$e=new oK({cwd:process.cwd,env:s(()=>GQt,"env"),format:q$e.format,normalize:sK.normalize,resolve:sK.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,H$e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),FF=s(function(e,r){return $$e.parse(e.slice(),r).argv},"Parser");FF.detailed=function(t,e){return $$e.parse(t.slice(),e)};FF.camelCase=O2;FF.decamelize=nK;FF.looksLikeNumber=iK;var W$e=FF;var sA=require("path");f();function VQt(){return zQt()?0:1}s(VQt,"getProcessArgvBinIndex");function zQt(){return YQt()&&!process.defaultApp}s(zQt,"isBundledElectronApp");function YQt(){return!!process.versions.electron}s(YQt,"isElectronApp");function j$e(){return process.argv[VQt()]}s(j$e,"getProcessArgvBin");f();var Xs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var ZD=require("fs"),G$e=require("util"),V$e=require("path");var z$e={fs:{readFileSync:ZD.readFileSync,writeFile:ZD.writeFile},format:G$e.format,resolve:V$e.resolve,exists:s(t=>{try{return(0,ZD.statSync)(t).isFile()}catch{return!1}},"exists")};f();var oA,HAe=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),oA.format.apply(oA.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),oA.format.apply(oA.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);oA.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{oA.fs.readFileSync&&(e=JSON.parse(oA.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=oA.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=oA.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return oA.exists(e)}};function Y$e(t,e){oA=e;let r=new HAe(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(Y$e,"y18n");var KQt=s(t=>Y$e(t,z$e),"y18n"),K$e=KQt;var JQt="require is not supported by ESM",J$e="loading a directory of commands is not supported yet for ESM",OF;try{OF=(0,eWe.fileURLToPath)(importMetaUrlShim)}catch{OF=process.cwd()}var XQt=OF.substring(0,OF.lastIndexOf("node_modules")),tWe={assert:{notStrictEqual:aK.notStrictEqual,strictEqual:aK.strictEqual},cliui:MAe,findUp:FAe,getEnv:s(t=>process.env[t],"getEnv"),inspect:X$e.inspect,getCallerFile:s(()=>{throw new Xs(J$e)},"getCallerFile"),getProcessArgvBin:j$e,mainFilename:XQt||process.cwd(),Parser:W$e,path:{basename:sA.basename,dirname:sA.dirname,extname:sA.extname,relative:sA.relative,resolve:sA.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:Z$e.readFileSync,require:s(()=>{throw new Xs(JQt)},"require"),requireDirectory:s(()=>{throw new Xs(J$e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:K$e({directory:(0,sA.resolve)(OF,"../../../locales"),updateFiles:!1})};f();f();f();function df(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(df,"assertNotStrictEqual");function $Ae(t,e){e.assert.strictEqual(typeof t,"string")}s($Ae,"assertSingleKey");function e3(t){return Object.keys(t)}s(e3,"objectKeys");f();function Zs(t){return!!t&&!!t.then&&typeof t.then=="function"}s(Zs,"isPromise");f();f();f();function ZI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(ZI,"parseCommand");var ZQt=["first","second","third","fourth","fifth","sixth"];function Br(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[ZI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Xs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new Xs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=rWe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&nWe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=rWe(m);p.cmd.filter(A=>A===h||A==="*").length===0&&nWe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Br,"argsert");function rWe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(rWe,"guessType");function nWe(t,e,r){throw new Xs(`Invalid ${ZQt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(nWe,"argumentTypeError");var cK=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Br("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function iWe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(iWe,"commandMiddlewareFactory");function Q2(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(Zs(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return Zs(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(Q2,"applyMiddleware");f();function U2(t,e,r=n=>{throw n}){try{let n=eUt(t)?t():t;return Zs(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(U2,"maybeAsyncResult");function eUt(t){return typeof t=="function"}s(eUt,"isFunction");f();function WAe(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(WAe,"whichModule");var t3=/(^\*)|(^\$0)/,jAe=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=iWe(o);if(i=i||(()=>{}),Array.isArray(e))if(tUt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(nUt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(oWe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=ZI(e);c=c.map(m=>ZI(m).cmd);let d=!1,p=[u.cmd].concat(c).filter(m=>t3.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],c=p.slice(1),e=e.replace(t3,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,d,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),d=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(d,c,r,n.aliases,u,i,o,a);return Zs(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(d,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,d=n;if(lK(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(Zs(p))return p.then(m=>(d=aWe(m)?m:n,this.parseAndUpdateUsage(e,r,d,o,a,c)))}else rUt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),d=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,d,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return Zs(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=t3.test(r.original)?r.original.replace(t3,"").trim():r.original,i=e.filter(o=>!t3.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=U2(n,d=>(u(d),d))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=Q2(n,a,c,!1),n=U2(n,d=>{let p=r.handler(d);return Zs(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Zs(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),d=Q2(n,c,u,!0);return Zs(d)?d.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,d,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=ZI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(d=>{u.push(...l.aliases[d])}),Object.keys(l.argv).forEach(d=>{u.includes(d)&&(r[d]||(r[d]=l.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(l.argv,d)&&(Array.isArray(e[d])||Array.isArray(l.argv[d]))?e[d]=[].concat(e[d],l.argv[d]):e[d]=l.argv[d])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=t3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(lK(r))return r(e,!0);oWe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=WAe(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;df(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();df(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function sWe(t,e,r,n){return new jAe(t,e,r,n)}s(sWe,"command");function oWe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(oWe,"isCommandBuilderDefinition");function tUt(t){return t.every(e=>typeof e=="string")}s(tUt,"isCommandAndAliases");function lK(t){return typeof t=="function"}s(lK,"isCommandBuilderCallback");function rUt(t){return typeof t=="object"}s(rUt,"isCommandBuilderOptionDefinitions");function nUt(t){return typeof t=="object"&&!Array.isArray(t)}s(nUt,"isCommandHandlerDefinition");f();f();function eT(t={},e=()=>!0){let r={};return e3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(eT,"objFilter");f();function tT(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(tT,"setBlocking");function iUt(t){return typeof t=="boolean"}s(iUt,"isBoolean");function lWe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(U=!0,Z){let[J,j]=typeof U=="string"?[!0,U]:[U,Z];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,c=J,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(U,Z){let J=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let $=i[j];if(iUt($)){if(Z)throw Z;if(U)throw Error(U)}else $(U,Z,n)}else{if(t.getExitProcess()&&tT(!0),!l){l=!0,c&&(t.showHelp("error"),J.error()),(U||Z)&&J.error(U||Z);let j=o||a;j&&((U||Z)&&J.error(""),J.error(j))}if(Z=Z||new Xs(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,Z);throw Z}},"fail");let u=[],d=!1;n.usage=(Q,U)=>Q===null?(d=!0,u=[],n):(d=!1,u.push([Q,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>d,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(Q,U)=>{p.push([Q,U||""])};let m=[];n.command=s(function(U,Z,J,j,$=!1){J&&(m=m.map(X=>(X[2]=!1,X))),m.push([U,Z||"",J,j,$])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(U,Z){Array.isArray(U)?U.forEach(J=>{n.describe(J,Z)}):typeof U=="object"?Object.keys(U).forEach(J=>{n.describe(J,U[J])}):h[U]=Z},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=Q=>{g.push(Q)};let A=!1,y;n.wrap=Q=>{A=!0,y=Q},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(A||(y=K(),A=!0),y);let x="__yargsString__:";n.deferY18nLookup=Q=>x+Q,n.help=s(function(){if(R)return R;S();let U=t.customScriptName?t.$0:e.path.basename(t.$0),Z=t.getDemandedOptions(),J=t.getDemandedCommands(),j=t.getDeprecatedOptions(),$=t.getGroups(),X=t.getOptions(),ie=[];ie=ie.concat(Object.keys(h)),ie=ie.concat(Object.keys(Z)),ie=ie.concat(Object.keys(J)),ie=ie.concat(Object.keys(X.default)),ie=ie.filter(M),ie=Object.keys(ie.reduce((Me,lt)=>(lt!=="_"&&(Me[lt]=!0),Me),{}));let ae=n.getWrap(),te=e.cliui({width:ae,wrap:!!ae});if(!d){if(u.length)u.forEach(Me=>{te.div({text:`${Me[0].replace(/\$0/g,U)}`}),Me[1]&&te.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),te.div();else if(m.length){let Me=null;J._?Me=`${U} <${r("command")}>
`:Me=`${U} [${r("command")}]
`,te.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){te.div(r("Commands:"));let Me=t.getInternalMethods().getContext(),lt=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((Et,ht)=>Et[0].localeCompare(ht[0])));let _t=U?`${U} `:"";m.forEach(Et=>{let ht=`${_t}${lt}${Et[0].replace(/^\$0 ?/,"")}`;te.span({text:ht,padding:[0,2,0,2],width:I(m,ae,`${U}${lt}`)+4},{text:Et[1]});let ue=[];Et[2]&&ue.push(`[${r("default")}]`),Et[3]&&Et[3].length&&ue.push(`[${r("aliases:")} ${Et[3].join(", ")}]`),Et[4]&&(typeof Et[4]=="string"?ue.push(`[${r("deprecated: %s",Et[4])}]`):ue.push(`[${r("deprecated")}]`)),ue.length?te.div({text:ue.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(X.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Me=>!t.parsed.newAliases[Me]&&pe.every(lt=>(X.alias[lt]||[]).indexOf(Me)===-1));let Ae=r("Options:");$[Ae]||($[Ae]=[]),B(ie,X.alias,$,Ae);let Oe=s(Me=>/^--/.test(uK(Me)),"isLongSwitch"),Te=Object.keys($).filter(Me=>$[Me].length>0).map(Me=>{let lt=$[Me].filter(M).map(_t=>{if(pe.includes(_t))return _t;for(let Et=0,ht;(ht=pe[Et])!==void 0;Et++)if((X.alias[ht]||[]).includes(_t))return ht;return _t});return{groupName:Me,normalizedKeys:lt}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:lt})=>{let _t=lt.reduce((Et,ht)=>(Et[ht]=[ht].concat(X.alias[ht]||[]).map(ue=>Me===n.getPositionalGroupName()?ue:(/^[0-9]$/.test(ue)?X.boolean.includes(ht)?"-":"--":ue.length>1?"--":"-")+ue).sort((ue,Ue)=>Oe(ue)===Oe(Ue)?0:Oe(ue)?1:-1).join(", "),Et),{});return{groupName:Me,normalizedKeys:lt,switches:_t}});if(Te.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).some(({normalizedKeys:Me,switches:lt})=>!Me.every(_t=>Oe(lt[_t])))&&Te.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:lt})=>{Me.forEach(_t=>{Oe(lt[_t])&&(lt[_t]=oUt(lt[_t],4))})}),Te.forEach(({groupName:Me,normalizedKeys:lt,switches:_t})=>{te.div(Me),lt.forEach(Et=>{let ht=_t[Et],ue=h[Et]||"",Ue=null;ue.includes(x)&&(ue=r(ue.substring(x.length))),X.boolean.includes(Et)&&(Ue=`[${r("boolean")}]`),X.count.includes(Et)&&(Ue=`[${r("count")}]`),X.string.includes(Et)&&(Ue=`[${r("string")}]`),X.normalize.includes(Et)&&(Ue=`[${r("string")}]`),X.array.includes(Et)&&(Ue=`[${r("array")}]`),X.number.includes(Et)&&(Ue=`[${r("number")}]`);let ye=s(le=>typeof le=="string"?`[${r("deprecated: %s",le)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),$e=[Et in j?ye(j[Et]):null,Ue,Et in Z?`[${r("required")}]`:null,X.choices&&X.choices[Et]?`[${r("choices:")} ${n.stringifiedValues(X.choices[Et])}]`:null,O(X.default[Et],X.defaultDescription[Et])].filter(Boolean).join(" ");te.span({text:uK(ht),padding:[0,2,0,2+cWe(ht)],width:I(_t,ae)+4},ue);let se=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;$e&&!se?te.div({text:$e,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(r("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,U)}),p.forEach(Me=>{Me[1]===""?te.div({text:Me[0],padding:[0,2,0,2]}):te.div({text:Me[0],padding:[0,2,0,2],width:I(p,ae)+4},{text:Me[1]})}),te.div()),g.length>0){let Me=g.map(lt=>lt.replace(/\$0/g,U)).join(`
`);te.div(`${Me}
`)}return te.toString().replace(/\s*$/,"")},"help");function I(Q,U,Z){let J=0;return Array.isArray(Q)||(Q=Object.values(Q).map(j=>[j])),Q.forEach(j=>{J=Math.max(e.stringWidth(Z?`${Z} ${uK(j[0])}`:uK(j[0]))+cWe(j[0]),J)}),U&&(J=Math.min(J,parseInt((U*.5).toString(),10))),J}s(I,"maxWidth");function S(){let Q=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(Z=>{U.alias[Z].forEach(J=>{h[J]&&n.describe(Z,h[J]),J in Q&&t.demandOption(Z,Q[J]),U.boolean.includes(J)&&t.boolean(Z),U.count.includes(J)&&t.count(Z),U.string.includes(J)&&t.string(Z),U.normalize.includes(J)&&t.normalize(Z),U.array.includes(J)&&t.array(Z),U.number.includes(J)&&t.number(Z)})})}s(S,"normalizeAliases");let R;n.cacheHelpMessage=function(){R=this.help()},n.clearCachedHelpMessage=function(){R=void 0},n.hasCachedHelpMessage=function(){return!!R};function B(Q,U,Z,J){let j=[],$=null;return Object.keys(Z).forEach(X=>{j=j.concat(Z[X])}),Q.forEach(X=>{$=[X].concat(U[X]),$.some(ie=>j.indexOf(ie)!==-1)||Z[J].push(X)}),j}s(B,"addUngroupedKeys");function M(Q){return t.getOptions().hiddenOptions.indexOf(Q)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(M,"filterHiddenOptions"),n.showHelp=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(n.help())},n.functionDescription=Q=>["(",Q.name?e.Parser.decamelize(Q.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,Z){let J="",j=Z||", ",$=[].concat(U);return!U||!$.length||$.forEach(X=>{J.length&&(J+=j),J+=JSON.stringify(X)}),J},"stringifiedValues");function O(Q,U){let Z=`[${r("default:")} `;if(Q===void 0&&!U)return null;if(U)Z+=U;else switch(typeof Q){case"string":Z+=`"${Q}"`;break;case"object":Z+=JSON.stringify(Q);break;default:Z+=Q}return`${Z}]`}s(O,"defaultString");function K(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(K,"windowWidth");let V=null;n.version=Q=>{V=Q},n.showVersion=Q=>{let U=t.getInternalMethods().getLoggerInstance();Q||(Q="error"),(typeof Q=="function"?Q:U[Q])(V)},n.reset=s(function(U){return o=null,l=!1,u=[],d=!1,g=[],p=[],m=[],h=eT(h,Z=>!U[Z]),n},"reset");let z=[];return n.freeze=s(function(){z.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(U=!1){let Z=z.pop();Z&&(U?(h={...Z.descriptions,...h},m=[...Z.commands,...m],u=[...Z.usages,...u],p=[...Z.examples,...p],g=[...Z.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=Z)},"unfreeze"),n}s(lWe,"usage");function GAe(t){return typeof t=="object"}s(GAe,"isIndentedText");function oUt(t,e){return GAe(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(oUt,"addIndentation");function cWe(t){return GAe(t)?t.indentation:0}s(cWe,"getIndentation");function uK(t){return GAe(t)?t.text:t}s(uK,"getText");f();f();var uWe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,dWe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var VAe=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(lK(u)){this.indexAfterLastReset=c+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=ZI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(x=>{let I=h[x];return typeof I=="string"&&I.length>0}),A=g?h[g]:void 0,y=(l=(c=h[e])!==null&&c!==void 0?c:A)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${y.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(df(this.customCompletionFunction,null,this.shim),aUt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return Zs(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return cUt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return Zs(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?dWe:uWe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function fWe(t,e,r,n){return new VAe(t,e,r,n)}s(fWe,"completion");function aUt(t){return t.length<3}s(aUt,"isSyncCompletionFunction");function cUt(t){return t.length>3}s(cUt,"isFallbackCompletionFunction");f();f();function pWe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(pWe,"levenshtein");var mWe=["$0","--","_"];function hWe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let y of Object.keys(h)){let x=h[y];x&&g.indexOf(x)<0&&g.push(x)}let A=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+A))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,A=!0){var y;let x=t.getInternalMethods().getCommandInstance().getCommands(),I=[],S=t.getInternalMethods().getContext();if(Object.keys(p).forEach(R=>{!mWe.includes(R)&&!Object.prototype.hasOwnProperty.call(h,R)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),R)&&!o.isValidAndSomeAliasIsNotNew(R,m)&&I.push(R)}),A&&(S.commands.length>0||x.length>0||g)&&p._.slice(S.commands.length).forEach(R=>{x.includes(""+R)||I.push(""+R)}),A){let B=((y=t.getDemandedCommands()._)===null||y===void 0?void 0:y.max)||0,M=S.commands.length+B;M<p._.length&&p._.slice(M).forEach(O=>{O=String(O),!S.commands.includes(O)&&!I.includes(O)&&I.push(O)})}I.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",I.length,I.map(R=>R.trim()?R:`"${R}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(A=>{m.includes(""+A)||h.push(""+A)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(y=>{mWe.indexOf(y)===-1&&Object.prototype.hasOwnProperty.call(m.choices,y)&&[].concat(p[y]).forEach(x=>{m.choices[y].indexOf(x)===-1&&x!==void 0&&(h[y]=(h[y]||[]).concat(x))})});let g=Object.keys(h);if(!g.length)return;let A=n("Invalid values:");g.forEach(y=>{A+=`
  ${n("Argument: %s, Given: %s, Choices: %s",y,e.stringifiedValues(h[y]),e.stringifiedValues(m.choices[y]))}`}),e.fail(A)},"limitedChoices");let a={};o.implies=s(function(p,m){Br("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(df(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(A=>{let y=g,x=A;y=c(p,y),A=c(p,A),y&&!A&&m.push(` ${g} -> ${x}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){Br("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((y,x)=>x.length-y.length);let g=null,A=1/0;for(let y=0,x;(x=m[y])!==void 0;y++){let I=pWe(p,x);I<=3&&I<A&&(A=I,g=x)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=eT(a,m=>!p[m]),l=eT(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();df(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(hWe,"validation");f();var zAe=[],QF;function dK(t,e,r,n){QF=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=uUt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}lUt(a),zAe.push(a),i=o?JSON.parse(QF.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=dK(i,QF.path.dirname(a),r,QF)}return zAe=[],r?gWe(i,t):Object.assign({},i,t)}s(dK,"applyExtends");function lUt(t){if(zAe.indexOf(t)>-1)throw new Xs(`Circular extended configurations: '${t}'.`)}s(lUt,"checkForCircularExtends");function uUt(t,e){return QF.path.resolve(t,e)}s(uUt,"getPathToDefaultConfig");function gWe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=gWe(t[i],e[i]):r[i]=e[i];return r}s(gWe,"mergeDeep");var Lr=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},he=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},wc,q2,UF,eh,Ip,fK,rT,H2,pK,th,mK,rh,hC,Tp,nh,hK,r3,Kl,tn,gK,AK,wp,$2,n3,W2,nT,yK,Wn,j2,G2,V2,ii,CK,gC,Za;function MWe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new oye(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(MWe,"YargsFactory");var AWe=Symbol("copyDoubleDash"),yWe=Symbol("copyDoubleDash"),YAe=Symbol("deleteFromParserHintObject"),CWe=Symbol("emitWarning"),vWe=Symbol("freeze"),EWe=Symbol("getDollarZero"),z2=Symbol("getParserConfiguration"),xWe=Symbol("getUsageConfiguration"),KAe=Symbol("guessLocale"),bWe=Symbol("guessVersion"),IWe=Symbol("parsePositionalNumbers"),JAe=Symbol("pkgUp"),iT=Symbol("populateParserHintArray"),i3=Symbol("populateParserHintSingleValueDictionary"),XAe=Symbol("populateParserHintArrayDictionary"),ZAe=Symbol("populateParserHintDictionary"),eye=Symbol("sanitizeKey"),tye=Symbol("setKey"),rye=Symbol("unfreeze"),TWe=Symbol("validateAsync"),wWe=Symbol("getCommandInstance"),SWe=Symbol("getContext"),_We=Symbol("getHasOutput"),RWe=Symbol("getLoggerInstance"),kWe=Symbol("getParseContext"),PWe=Symbol("getUsageInstance"),DWe=Symbol("getValidationInstance"),vK=Symbol("hasParseCallback"),BWe=Symbol("isGlobalContext"),Y2=Symbol("postProcess"),NWe=Symbol("rebase"),nye=Symbol("reset"),qF=Symbol("runYargsParserAndExecuteCommands"),iye=Symbol("runValidation"),LWe=Symbol("setHasOutput"),K2=Symbol("kTrackManuallySetKeys"),oye=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,wc.set(this,void 0),q2.set(this,void 0),UF.set(this,{commands:[],fullCommands:[]}),eh.set(this,null),Ip.set(this,null),fK.set(this,"show-hidden"),rT.set(this,null),H2.set(this,!0),pK.set(this,{}),th.set(this,!0),mK.set(this,[]),rh.set(this,void 0),hC.set(this,{}),Tp.set(this,!1),nh.set(this,null),hK.set(this,!0),r3.set(this,void 0),Kl.set(this,""),tn.set(this,void 0),gK.set(this,void 0),AK.set(this,{}),wp.set(this,null),$2.set(this,null),n3.set(this,{}),W2.set(this,{}),nT.set(this,void 0),yK.set(this,!1),Wn.set(this,void 0),j2.set(this,!1),G2.set(this,!1),V2.set(this,!1),ii.set(this,void 0),CK.set(this,{}),gC.set(this,null),Za.set(this,void 0),Lr(this,Wn,i,"f"),Lr(this,nT,e,"f"),Lr(this,q2,r,"f"),Lr(this,gK,n,"f"),Lr(this,rh,new cK(this),"f"),this.$0=this[EWe](),this[nye](),Lr(this,wc,he(this,wc,"f"),"f"),Lr(this,ii,he(this,ii,"f"),"f"),Lr(this,Za,he(this,Za,"f"),"f"),Lr(this,tn,he(this,tn,"f"),"f"),he(this,tn,"f").showHiddenOpt=he(this,fK,"f"),Lr(this,r3,this[yWe](),"f")}addHelpOpt(e,r){let n="help";return Br("[string|boolean] [string]",[e,r],arguments.length),he(this,nh,"f")&&(this[YAe](he(this,nh,"f")),Lr(this,nh,null,"f")),e===!1&&r===void 0?this:(Lr(this,nh,typeof e=="string"?e:n,"f"),this.boolean(he(this,nh,"f")),this.describe(he(this,nh,"f"),r||he(this,ii,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Br("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:he(this,fK,"f");return this.boolean(n),this.describe(n,r||he(this,ii,"f").deferY18nLookup("Show hidden options")),he(this,tn,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Br("<object|string|array> [string|array]",[e,r],arguments.length),this[XAe](this.alias.bind(this),"alias",e,r),this}array(e){return Br("<array|string>",[e],arguments.length),this[iT]("array",e),this[K2](e),this}boolean(e){return Br("<array|string>",[e],arguments.length),this[iT]("boolean",e),this[K2](e),this}check(e,r){return Br("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>U2(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&he(this,ii,"f").fail(o.toString(),o):he(this,ii,"f").fail(he(this,Wn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(he(this,ii,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Br("<object|string|array> [string|array]",[e,r],arguments.length),this[XAe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Br("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Xs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Xs("coerce callback must be provided");return he(this,tn,"f").key[e]=!0,he(this,rh,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?U2(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Xs(c.message)}):n},e),this}conflicts(e,r){return Br("<string|object> [string|array]",[e,r],arguments.length),he(this,Za,"f").conflicts(e,r),this}config(e="config",r,n){return Br("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=dK(e,he(this,q2,"f"),this[z2]()["deep-merge-config"]||!1,he(this,Wn,"f")),he(this,tn,"f").configObjects=(he(this,tn,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||he(this,ii,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{he(this,tn,"f").config[i]=n||!0}),this)}completion(e,r,n){return Br("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Lr(this,Ip,e||he(this,Ip,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(he(this,Ip,"f"),r),n&&he(this,eh,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Br("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),he(this,wc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Br("<string> [object]",[e,r],arguments.length);let n=he(this,gK,"f")||he(this,Wn,"f").require;return he(this,wc,"f").addDirectory(e,n,he(this,Wn,"f").getCallerFile(),r),this}count(e){return Br("<array|string>",[e],arguments.length),this[iT]("count",e),this[K2](e),this}default(e,r,n){return Br("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&($Ae(e,he(this,Wn,"f")),he(this,tn,"f").defaultDescription[e]=n),typeof r=="function"&&($Ae(e,he(this,Wn,"f")),he(this,tn,"f").defaultDescription[e]||(he(this,tn,"f").defaultDescription[e]=he(this,ii,"f").functionDescription(r)),r=r.call()),this[i3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Br("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),he(this,tn,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{df(n,!0,he(this,Wn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(df(n,!0,he(this,Wn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{df(n,!0,he(this,Wn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Br("<object|string|array> [string]",[e,r],arguments.length),this[i3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Br("<string> [string|boolean]",[e,r],arguments.length),he(this,tn,"f").deprecatedOptions[e]=r,this}describe(e,r){return Br("<object|string|array> [string]",[e,r],arguments.length),this[tye](e,!0),he(this,ii,"f").describe(e,r),this}detectLocale(e){return Br("<boolean>",[e],arguments.length),Lr(this,H2,e,"f"),this}env(e){return Br("[string|boolean]",[e],arguments.length),e===!1?delete he(this,tn,"f").envPrefix:he(this,tn,"f").envPrefix=e||"",this}epilogue(e){return Br("<string>",[e],arguments.length),he(this,ii,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Br("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):he(this,ii,"f").example(e,r),this}exit(e,r){Lr(this,Tp,!0,"f"),Lr(this,rT,r,"f"),he(this,th,"f")&&he(this,Wn,"f").process.exit(e)}exitProcess(e=!0){return Br("[boolean]",[e],arguments.length),Lr(this,th,e,"f"),this}fail(e){if(Br("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Xs("Invalid first argument. Expected function or boolean 'false'");return he(this,ii,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Br("<array> [function]",[e,r],arguments.length),r?he(this,eh,"f").getCompletion(e,r):new Promise((n,i)=>{he(this,eh,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Br([],0),he(this,tn,"f").demandedOptions}getDemandedCommands(){return Br([],0),he(this,tn,"f").demandedCommands}getDeprecatedOptions(){return Br([],0),he(this,tn,"f").deprecatedOptions}getDetectLocale(){return he(this,H2,"f")}getExitProcess(){return he(this,th,"f")}getGroups(){return Object.assign({},he(this,hC,"f"),he(this,W2,"f"))}getHelp(){if(Lr(this,Tp,!0,"f"),!he(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[qF](he(this,nT,"f"),void 0,void 0,0,!0);if(Zs(r))return r.then(()=>he(this,ii,"f").help())}let e=he(this,wc,"f").runDefaultBuilderOn(this);if(Zs(e))return e.then(()=>he(this,ii,"f").help())}return Promise.resolve(he(this,ii,"f").help())}getOptions(){return he(this,tn,"f")}getStrict(){return he(this,j2,"f")}getStrictCommands(){return he(this,G2,"f")}getStrictOptions(){return he(this,V2,"f")}global(e,r){return Br("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?he(this,tn,"f").local=he(this,tn,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{he(this,tn,"f").local.includes(n)||he(this,tn,"f").local.push(n)}),this}group(e,r){Br("<string|array> <string>",[e,r],arguments.length);let n=he(this,W2,"f")[r]||he(this,hC,"f")[r];he(this,W2,"f")[r]&&delete he(this,W2,"f")[r];let i={};return he(this,hC,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Br("<string>",[e],arguments.length),he(this,tn,"f").hiddenOptions.push(e),this}implies(e,r){return Br("<string|object> [number|string|array]",[e,r],arguments.length),he(this,Za,"f").implies(e,r),this}locale(e){return Br("[string]",[e],arguments.length),e===void 0?(this[KAe](),he(this,Wn,"f").y18n.getLocale()):(Lr(this,H2,!1,"f"),he(this,Wn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return he(this,rh,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Br("<string|object|array> [number]",[e,r],arguments.length),this[i3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Br("<array|string>",[e],arguments.length),this[iT]("normalize",e),this}number(e){return Br("<array|string>",[e],arguments.length),this[iT]("number",e),this[K2](e),this}option(e,r){if(Br("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[K2](e),he(this,gC,"f")&&(e==="version"||r?.alias==="version")&&this[CWe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),he(this,tn,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(he(this,tn,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=he(this,ii,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Br("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[vWe](),typeof e>"u"&&(e=he(this,nT,"f")),typeof r=="object"&&(Lr(this,$2,r,"f"),r=n),typeof r=="function"&&(Lr(this,wp,r,"f"),r=!1),r||Lr(this,nT,e,"f"),he(this,wp,"f")&&Lr(this,th,!1,"f");let i=this[qF](e,!!r),o=this.parsed;return he(this,eh,"f").setParsed(this.parsed),Zs(i)?i.then(a=>(he(this,wp,"f")&&he(this,wp,"f").call(this,he(this,rT,"f"),a,he(this,Kl,"f")),a)).catch(a=>{throw he(this,wp,"f")&&he(this,wp,"f")(a,this.parsed.argv,he(this,Kl,"f")),a}).finally(()=>{this[rye](),this.parsed=o}):(he(this,wp,"f")&&he(this,wp,"f").call(this,he(this,rT,"f"),i,he(this,Kl,"f")),this[rye](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Zs(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Zs(i))throw new Xs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Br("<object>",[e],arguments.length),Lr(this,AK,e,"f"),this}pkgConf(e,r){Br("<string> [string]",[e,r],arguments.length);let n=null,i=this[JAe](r||he(this,q2,"f"));return i[e]&&typeof i[e]=="object"&&(n=dK(i[e],r||he(this,q2,"f"),this[z2]()["deep-merge-config"]||!1,he(this,Wn,"f")),he(this,tn,"f").configObjects=(he(this,tn,"f").configObjects||[]).concat(n)),this}positional(e,r){Br("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=eT(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=he(this,UF,"f").fullCommands[he(this,UF,"f").fullCommands.length-1],o=i?he(this,wc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return e3(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,he(this,ii,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Br("[boolean]",[e],arguments.length),Lr(this,yK,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Br("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&he(this,tn,"f").narg[e]?this:(this[i3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Br("[string] [string]",[e,r],arguments.length),e=e||this.$0,he(this,r3,"f").log(he(this,eh,"f").generateCompletionScript(e,r||he(this,Ip,"f")||"completion")),this}showHelp(e){if(Br("[string|function]",[e],arguments.length),Lr(this,Tp,!0,"f"),!he(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[qF](he(this,nT,"f"),void 0,void 0,0,!0);if(Zs(n))return n.then(()=>{he(this,ii,"f").showHelp(e)}),this}let r=he(this,wc,"f").runDefaultBuilderOn(this);if(Zs(r))return r.then(()=>{he(this,ii,"f").showHelp(e)}),this}return he(this,ii,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Br("[boolean|string] [string]",[e,r],arguments.length),he(this,ii,"f").showHelpOnFail(e,r),this}showVersion(e){return Br("[string|function]",[e],arguments.length),he(this,ii,"f").showVersion(e),this}skipValidation(e){return Br("<array|string>",[e],arguments.length),this[iT]("skipValidation",e),this}strict(e){return Br("[boolean]",[e],arguments.length),Lr(this,j2,e!==!1,"f"),this}strictCommands(e){return Br("[boolean]",[e],arguments.length),Lr(this,G2,e!==!1,"f"),this}strictOptions(e){return Br("[boolean]",[e],arguments.length),Lr(this,V2,e!==!1,"f"),this}string(e){return Br("<array|string>",[e],arguments.length),this[iT]("string",e),this[K2](e),this}terminalWidth(){return Br([],0),he(this,Wn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Br("<object>",[e],arguments.length),Lr(this,H2,!1,"f"),he(this,Wn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Br("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(df(e,null,he(this,Wn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Xs(".usage() description must start with $0 if being used as alias for .command()")}else return he(this,ii,"f").usage(e),this}usageConfiguration(e){return Br("<object>",[e],arguments.length),Lr(this,CK,e,"f"),this}version(e,r,n){let i="version";if(Br("[boolean|string] [string] [string]",[e,r,n],arguments.length),he(this,gC,"f")&&(this[YAe](he(this,gC,"f")),he(this,ii,"f").version(void 0),Lr(this,gC,null,"f")),arguments.length===0)n=this[bWe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Lr(this,gC,typeof e=="string"?e:i,"f"),r=r||he(this,ii,"f").deferY18nLookup("Show version number"),he(this,ii,"f").version(n||void 0),this.boolean(he(this,gC,"f")),this.describe(he(this,gC,"f"),r),this}wrap(e){return Br("<number|null|undefined>",[e],arguments.length),he(this,ii,"f").wrap(e),this}[(wc=new WeakMap,q2=new WeakMap,UF=new WeakMap,eh=new WeakMap,Ip=new WeakMap,fK=new WeakMap,rT=new WeakMap,H2=new WeakMap,pK=new WeakMap,th=new WeakMap,mK=new WeakMap,rh=new WeakMap,hC=new WeakMap,Tp=new WeakMap,nh=new WeakMap,hK=new WeakMap,r3=new WeakMap,Kl=new WeakMap,tn=new WeakMap,gK=new WeakMap,AK=new WeakMap,wp=new WeakMap,$2=new WeakMap,n3=new WeakMap,W2=new WeakMap,nT=new WeakMap,yK=new WeakMap,Wn=new WeakMap,j2=new WeakMap,G2=new WeakMap,V2=new WeakMap,ii=new WeakMap,CK=new WeakMap,gC=new WeakMap,Za=new WeakMap,AWe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[yWe](){return{log:s((...e)=>{this[vK]()||console.log(...e),Lr(this,Tp,!0,"f"),he(this,Kl,"f").length&&Lr(this,Kl,he(this,Kl,"f")+`
`,"f"),Lr(this,Kl,he(this,Kl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[vK]()||console.error(...e),Lr(this,Tp,!0,"f"),he(this,Kl,"f").length&&Lr(this,Kl,he(this,Kl,"f")+`
`,"f"),Lr(this,Kl,he(this,Kl,"f")+e.join(" "),"f")},"error")}}[YAe](e){e3(he(this,tn,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=he(this,tn,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete he(this,ii,"f").getDescriptions()[e]}[CWe](e,r,n){he(this,pK,"f")[n]||(he(this,Wn,"f").process.emitWarning(e,r),he(this,pK,"f")[n]=!0)}[vWe](){he(this,mK,"f").push({options:he(this,tn,"f"),configObjects:he(this,tn,"f").configObjects.slice(0),exitProcess:he(this,th,"f"),groups:he(this,hC,"f"),strict:he(this,j2,"f"),strictCommands:he(this,G2,"f"),strictOptions:he(this,V2,"f"),completionCommand:he(this,Ip,"f"),output:he(this,Kl,"f"),exitError:he(this,rT,"f"),hasOutput:he(this,Tp,"f"),parsed:this.parsed,parseFn:he(this,wp,"f"),parseContext:he(this,$2,"f")}),he(this,ii,"f").freeze(),he(this,Za,"f").freeze(),he(this,wc,"f").freeze(),he(this,rh,"f").freeze()}[EWe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(he(this,Wn,"f").process.argv()[0])?r=he(this,Wn,"f").process.argv().slice(1,2):r=he(this,Wn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[NWe](he(this,q2,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),he(this,Wn,"f").getEnv("_")&&he(this,Wn,"f").getProcessArgvBin()===he(this,Wn,"f").getEnv("_")&&(e=he(this,Wn,"f").getEnv("_").replace(`${he(this,Wn,"f").path.dirname(he(this,Wn,"f").process.execPath())}/`,"")),e}[z2](){return he(this,AK,"f")}[xWe](){return he(this,CK,"f")}[KAe](){if(!he(this,H2,"f"))return;let e=he(this,Wn,"f").getEnv("LC_ALL")||he(this,Wn,"f").getEnv("LC_MESSAGES")||he(this,Wn,"f").getEnv("LANG")||he(this,Wn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[bWe](){return this[JAe]().version||"unknown"}[IWe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)he(this,Wn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[JAe](e){let r=e||"*";if(he(this,n3,"f")[r])return he(this,n3,"f")[r];let n={};try{let i=e||he(this,Wn,"f").mainFilename;!e&&he(this,Wn,"f").path.extname(i)&&(i=he(this,Wn,"f").path.dirname(i));let o=he(this,Wn,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});df(o,void 0,he(this,Wn,"f")),n=JSON.parse(he(this,Wn,"f").readFileSync(o,"utf8"))}catch{}return he(this,n3,"f")[r]=n||{},he(this,n3,"f")[r]}[iT](e,r){r=[].concat(r),r.forEach(n=>{n=this[eye](n),he(this,tn,"f")[e].push(n)})}[i3](e,r,n,i){this[ZAe](e,r,n,i,(o,a,c)=>{he(this,tn,"f")[o][a]=c})}[XAe](e,r,n,i){this[ZAe](e,r,n,i,(o,a,c)=>{he(this,tn,"f")[o][a]=(he(this,tn,"f")[o][a]||[]).concat(c)})}[ZAe](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of e3(n))e(a,n[a]);else o(r,this[eye](n),i)}[eye](e){return e==="__proto__"?"___proto___":e}[tye](e,r){return this[i3](this[tye].bind(this),"key",e,r),this}[rye](){var e,r,n,i,o,a,c,l,u,d,p,m;let h=he(this,mK,"f").pop();df(h,void 0,he(this,Wn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,d=this,p=this,m=this,{options:{set value(A){Lr(e,tn,A,"f")}}.value,configObjects:g,exitProcess:{set value(A){Lr(r,th,A,"f")}}.value,groups:{set value(A){Lr(n,hC,A,"f")}}.value,output:{set value(A){Lr(i,Kl,A,"f")}}.value,exitError:{set value(A){Lr(o,rT,A,"f")}}.value,hasOutput:{set value(A){Lr(a,Tp,A,"f")}}.value,parsed:this.parsed,strict:{set value(A){Lr(c,j2,A,"f")}}.value,strictCommands:{set value(A){Lr(l,G2,A,"f")}}.value,strictOptions:{set value(A){Lr(u,V2,A,"f")}}.value,completionCommand:{set value(A){Lr(d,Ip,A,"f")}}.value,parseFn:{set value(A){Lr(p,wp,A,"f")}}.value,parseContext:{set value(A){Lr(m,$2,A,"f")}}.value}=h,he(this,tn,"f").configObjects=g,he(this,ii,"f").unfreeze(),he(this,Za,"f").unfreeze(),he(this,wc,"f").unfreeze(),he(this,rh,"f").unfreeze()}[TWe](e,r){return U2(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[wWe].bind(this),getContext:this[SWe].bind(this),getHasOutput:this[_We].bind(this),getLoggerInstance:this[RWe].bind(this),getParseContext:this[kWe].bind(this),getParserConfiguration:this[z2].bind(this),getUsageConfiguration:this[xWe].bind(this),getUsageInstance:this[PWe].bind(this),getValidationInstance:this[DWe].bind(this),hasParseCallback:this[vK].bind(this),isGlobalContext:this[BWe].bind(this),postProcess:this[Y2].bind(this),reset:this[nye].bind(this),runValidation:this[iye].bind(this),runYargsParserAndExecuteCommands:this[qF].bind(this),setHasOutput:this[LWe].bind(this)}}[wWe](){return he(this,wc,"f")}[SWe](){return he(this,UF,"f")}[_We](){return he(this,Tp,"f")}[RWe](){return he(this,r3,"f")}[kWe](){return he(this,$2,"f")||{}}[PWe](){return he(this,ii,"f")}[DWe](){return he(this,Za,"f")}[vK](){return!!he(this,wp,"f")}[BWe](){return he(this,hK,"f")}[Y2](e,r,n,i){return n||Zs(e)||(r||(e=this[AWe](e)),(this[z2]()["parse-positional-numbers"]||this[z2]()["parse-positional-numbers"]===void 0)&&(e=this[IWe](e)),i&&(e=Q2(e,this,he(this,rh,"f").getMiddleware(),!1))),e}[nye](e={}){Lr(this,tn,he(this,tn,"f")||{},"f");let r={};r.local=he(this,tn,"f").local||[],r.configObjects=he(this,tn,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(he(this,W2,"f"),Object.keys(he(this,hC,"f")).reduce((a,c)=>{let l=he(this,hC,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),Lr(this,hC,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(he(this,tn,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=eT(he(this,tn,"f")[a],c=>!n[c])}),r.envPrefix=he(this,tn,"f").envPrefix,Lr(this,tn,r,"f"),Lr(this,ii,he(this,ii,"f")?he(this,ii,"f").reset(n):lWe(this,he(this,Wn,"f")),"f"),Lr(this,Za,he(this,Za,"f")?he(this,Za,"f").reset(n):hWe(this,he(this,ii,"f"),he(this,Wn,"f")),"f"),Lr(this,wc,he(this,wc,"f")?he(this,wc,"f").reset():sWe(he(this,ii,"f"),he(this,Za,"f"),he(this,rh,"f"),he(this,Wn,"f")),"f"),he(this,eh,"f")||Lr(this,eh,fWe(this,he(this,ii,"f"),he(this,wc,"f"),he(this,Wn,"f")),"f"),he(this,rh,"f").reset(),Lr(this,Ip,null,"f"),Lr(this,Kl,"","f"),Lr(this,rT,null,"f"),Lr(this,Tp,!1,"f"),this.parsed=!1,this}[NWe](e,r){return he(this,Wn,"f").path.relative(e,r)}[qF](e,r,n,i=0,o=!1){let a=!!n||o;e=e||he(this,nT,"f"),he(this,tn,"f").__=he(this,Wn,"f").y18n.__,he(this,tn,"f").configuration=this[z2]();let c=!!he(this,tn,"f").configuration["populate--"],l=Object.assign({},he(this,tn,"f").configuration,{"populate--":!0}),u=he(this,Wn,"f").Parser.detailed(e,Object.assign({},he(this,tn,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),d=Object.assign(u.argv,he(this,$2,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(A=>{A===he(this,nh,"f")&&d[A]?h=!0:A===he(this,gC,"f")&&d[A]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&he(this,ii,"f").clearCachedHelpMessage();try{if(this[KAe](),r)return this[Y2](d,c,!!n,!1);he(this,nh,"f")&&[he(this,nh,"f")].concat(m[he(this,nh,"f")]||[]).filter(S=>S.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),Lr(this,hK,!1,"f");let A=he(this,wc,"f").getCommands(),y=he(this,eh,"f").completionKey in d,x=h||y||o;if(d._.length){if(A.length){let I;for(let S=i||0,R;d._[S]!==void 0;S++)if(R=String(d._[S]),A.includes(R)&&R!==he(this,Ip,"f")){let B=he(this,wc,"f").runCommand(R,this,u,S+1,o,h||g||o);return this[Y2](B,c,!!n,!1)}else if(!I&&R!==he(this,Ip,"f")){I=R;break}!he(this,wc,"f").hasDefaultCommand()&&he(this,yK,"f")&&I&&!x&&he(this,Za,"f").recommendCommands(I,A)}he(this,Ip,"f")&&d._.includes(he(this,Ip,"f"))&&!y&&(he(this,th,"f")&&tT(!0),this.showCompletionScript(),this.exit(0))}if(he(this,wc,"f").hasDefaultCommand()&&!x){let I=he(this,wc,"f").runCommand(null,this,u,0,o,h||g||o);return this[Y2](I,c,!!n,!1)}if(y){he(this,th,"f")&&tT(!0),e=[].concat(e);let I=e.slice(e.indexOf(`--${he(this,eh,"f").completionKey}`)+1);return he(this,eh,"f").getCompletion(I,(S,R)=>{if(S)throw new Xs(S.message);(R||[]).forEach(B=>{he(this,r3,"f").log(B)}),this.exit(0)}),this[Y2](d,!c,!!n,!1)}if(he(this,Tp,"f")||(h?(he(this,th,"f")&&tT(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(he(this,th,"f")&&tT(!0),a=!0,he(this,ii,"f").showVersion("log"),this.exit(0))),!a&&he(this,tn,"f").skipValidation.length>0&&(a=Object.keys(d).some(I=>he(this,tn,"f").skipValidation.indexOf(I)>=0&&d[I]===!0)),!a){if(u.error)throw new Xs(u.error.message);if(!y){let I=this[iye](m,{},u.error);n||(p=Q2(d,this,he(this,rh,"f").getMiddleware(),!0)),p=this[TWe](I,p??d),Zs(p)&&!n&&(p=p.then(()=>Q2(d,this,he(this,rh,"f").getMiddleware(),!1)))}}}catch(A){if(A instanceof Xs)he(this,ii,"f").fail(A.message,A);else throw A}return this[Y2](p??d,c,!!n,!0)}[iye](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Xs(n.message);he(this,Za,"f").nonOptionCount(a),he(this,Za,"f").requiredArguments(a,o);let c=!1;he(this,G2,"f")&&(c=he(this,Za,"f").unknownCommands(a)),he(this,j2,"f")&&!c?he(this,Za,"f").unknownArguments(a,e,r,!!i):he(this,V2,"f")&&he(this,Za,"f").unknownArguments(a,e,{},!1,!1),he(this,Za,"f").limitedChoices(a),he(this,Za,"f").implications(a),he(this,Za,"f").conflicting(a)}}[LWe](){Lr(this,Tp,!0,"f")}[K2](e){if(typeof e=="string")he(this,tn,"f").key[e]=!0;else for(let r of e)he(this,tn,"f").key[r]=!0}};function aWe(t){return!!t&&typeof t.getInternalMethods=="function"}s(aWe,"isYargsInstance");var dUt=MWe(tWe),FWe=dUt;f();f();f();var OWe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function QWe(t,e,r){let n=$r.createAndMarkAsIssued({authSource:e,authType:r});return Dt(t,OWe.NewGitHubLogin,n)}s(QWe,"telemetryNewGitHubLogin");function UWe(t,e){let r=$r.createAndMarkAsIssued({authType:e});return Dt(t,OWe.GitHubLoginSuccess,r)}s(UWe,"telemetryGitHubLoginSuccess");var sye=class extends ga{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function fUt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...ip(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(ln).fetch(o,n)}catch(a){throw a instanceof Error&&YM(a)?new ga(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new ga(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(fUt,"requestDeviceFlowStage1");async function pUt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...ip(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(ln).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new sye(a):new ga(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(pUt,"requestDeviceFlowStage2");async function mUt(t,e){UWe(t,"deviceFlow");let n=await(await Rm(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ga(`Error retrieving user information: ${String(n.errors)}`);return n}s(mUt,"requestUserInfo");var ff=class{constructor(e){this.ctx=e;this.pendingSignIn=void 0}static{s(this,"GitHubDeviceFlow")}get authManager(){return this.ctx.get(io)}get authPersistence(){return this.ctx.get($g)}async save(e){let r=new URL(e.serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e.accessToken,user:e.login,githubAppId:e.githubAppId,authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n,freshSignIn:n})}async initiate(e,r){let n=e?.githubAppId??this.ctx.get(Gl).findAppIdToAuthenticate();r??=this.authManager.getConfiguredUrls();try{let i=await this.getTokenUnguarded(n,r),o=i.waitForAuth.then(async a=>(this.ctx.get(Gl).githubAppId=n,await this.save(a)));return o.catch(()=>{}),this.pendingSignIn={verificationUri:i.verification_uri,status:o},i}catch(i){throw this.ctx.get(Yd).notifyUser(this.ctx,i),i}}async abandon(){let{serverUrl:e}=this.authManager.getConfiguredUrls(),r=new URL(e).hostname;await this.authPersistence.deleteAuthRecord({authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n})}async getTokenUnguarded(e,r){let n=this.ctx;QWe(n,"unknown","deviceFlow");let i=await fUt(n,e,r),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*l));let u=await pUt(n,i.device_code,e,r);if(a-=l,c=u.access_token,c){let d=await mUt(n,{...r,accessToken:c});return{...r,githubAppId:e,login:d.login,accessToken:c}}l=u.interval??l}throw new ga("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();f();f();var AC="byok",Il=class{constructor(e){this.persistenceManager=e}static{s(this,"ByokPersistence")}async getAPIKey(e,r){if(r){let i=await this.persistenceManager.read(AC,`${e}-${r}-api-key`);if(i)return i}return await this.persistenceManager.read(AC,`${e}-api-key`)}async storeAPIKey(e,r,n,i){n!==2&&(n===0?await this.persistenceManager.update(AC,`${e}-api-key`,r):n===1&&i&&await this.persistenceManager.update(AC,`${e}-${i}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(AC,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(AC,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(AC,`${e}-models-config`)||{}}async saveModelConfig(e,r,n,i,o){let a=await this.getStoredModelConfigs(e);a[r]=n,await this.persistenceManager.update(AC,`${e}-models-config`,a),i&&o&&await this.storeAPIKey(e,i,o,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),i=n[r];i&&(delete n[r],await this.persistenceManager.update(AC,`${e}-models-config`,n),i.deploymentUrl&&await this.deleteAPIKey(e,1,r))}async removeAllModelConfigs(e){await this.persistenceManager.delete(AC,`${e}-models-config`)}};var ih={Azure:"Azure",OpenAI:"OpenAI"};function oT(t){switch(t){case ih.Azure:return 1;default:return 0}}s(oT,"getAuthTypeForProvider");async function o3(t,e,r){let i=await new Il(t.get(Li)).getStoredModelConfigs(e),o=i?Object.values(i).find(d=>d.isRegistered!==!1):void 0,a=o?.modelCapabilities,c=a?.name||r,l=a?.maxInputTokens||1e5,u=a?.maxOutputTokens||8192;return{modelId:r,uiName:c,modelFamily:Jr.BYOK,providerName:e,deploymentUrl:o?.deploymentUrl,maxRequestTokens:l,maxResponseTokens:u,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!a?.toolCalling}}s(o3,"resolveModelConfiguration");async function qWe(t,e,r){return await new Il(t.get(Li)).getAPIKey(e,r)}s(qWe,"resolveModelKey");function HWe(t,e){let{protocol:r,hostname:n,pathname:i}=new URL(e);if(i.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}s(HWe,"resolveAzureUrl");f();var hUt=new vt("openAICompatibleLMProvider"),aye={[ih.OpenAI]:"https://api.openai.com/v1"},xK=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{s(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=`${this.getBaseUrl()}/models`,r={"Content-Type":"application/json"},n=await new Il(this.ctx.get(Li)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let i=await fetch(e,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch models: ${i.status} ${i.statusText}`);let o=await i.json();if(o.error)throw new Error(`API Error: ${JSON.stringify(o.error)}`);let a=[];for(let c of o.data){let l=this._knownModels?.[c.id];l&&a.push({providerName:this.providerName,modelId:c.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:l})}return a}catch(e){throw hUt.error(this.ctx,"Error fetching models from OpenAI-compatible provider:",e),e}}getBaseUrl(){let e=aye[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};var J2=class extends xK{static{s(this,"OpenAIProvider")}constructor(e){super(ih.OpenAI,e)}async getAllModels(){return await super.getAllModels()}};f();var pf=class{static{s(this,"CitationManager")}},bK=class extends pf{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var gUt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},ms=class{constructor(){this.capabilities={...gUt};this.emitter=new Ua;this.onDidSetCapabilities=this.emitter.event}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};f();f();f();f();function cye(t,e){let r=aA(t,e);return r===-1?void 0:t[r]}s(cye,"findLastMonotonous");function aA(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(aA,"findLastIdxMonotonous");function s3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(s3,"findFirstIdxMonotonousOrArrLen");var $We=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=aA(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var lye=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?IK.isErrorNoTelemetry(e)?new IK(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},WWe=new lye;function X2(t){WWe.onUnexpectedError(t)}s(X2,"onBugIndicatingError");function a3(t){AUt(t)||WWe.onUnexpectedError(t)}s(a3,"onUnexpectedError");var uye="Canceled";function AUt(t){return t instanceof yC?!0:t instanceof Error&&t.name===uye&&t.message===uye}s(AUt,"isCancellationError");var yC=class extends Error{static{s(this,"CancellationError")}constructor(){super(uye),this.name=this.message}};function HF(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(HF,"illegalArgument");function jWe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(jWe,"illegalState");var IK=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Cn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function c3(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(c3,"equals");function*Z2(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(Z2,"groupAdjacentBy");function VWe(t){return t.filter(e=>!!e)}s(VWe,"coalesce");var zWe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(zWe||={});function oh(t,e){return(r,n)=>e(t(r),t(n))}s(oh,"compareBy");var sh=s((t,e)=>t-e,"numberComparator");var TK=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},GWe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||zWe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function $F(t,e){return t.reduce((r,n)=>r+e(n),0)}s($F,"sumBy");f();function XWe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(XWe,"groupBy");var KWe,JWe,YWe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[KWe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(JWe=Symbol.iterator,KWe=Symbol.toStringTag,JWe)](){return this.values()}};f();function dye(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(dye,"createSingleCallFunction");f();var fye;(S=>{function t(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}S.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}S.empty=r,s(r,"empty");function*n(R){yield R}S.single=n,s(n,"single");function i(R){return t(R)?R:n(R)}S.wrap=i,s(i,"wrap");function o(R){return R||e}S.from=o,s(o,"from");function*a(R){for(let B=R.length-1;B>=0;B--)yield R[B]}S.reverse=a,s(a,"reverse");function c(R){return!R||R[Symbol.iterator]().next().done===!0}S.isEmpty=c,s(c,"isEmpty");function l(R){return R[Symbol.iterator]().next().value}S.first=l,s(l,"first");function u(R,B){let M=0;for(let O of R)if(B(O,M++))return!0;return!1}S.some=u,s(u,"some");function d(R,B){for(let M of R)if(B(M))return M}S.find=d,s(d,"find");function*p(R,B){for(let M of R)B(M)&&(yield M)}S.filter=p,s(p,"filter");function*m(R,B){let M=0;for(let O of R)yield B(O,M++)}S.map=m,s(m,"map");function*h(R,B){let M=0;for(let O of R)yield*B(O,M++)}S.flatMap=h,s(h,"flatMap");function*g(...R){for(let B of R)yield*B}S.concat=g,s(g,"concat");function A(R,B,M){let O=M;for(let K of R)O=B(O,K);return O}S.reduce=A,s(A,"reduce");function*y(R,B,M=R.length){for(B<-R.length&&(B=0),B<0&&(B+=R.length),M<0?M+=R.length:M>R.length&&(M=R.length);B<M;B++)yield R[B]}S.slice=y,s(y,"slice");function x(R,B=Number.POSITIVE_INFINITY){let M=[];if(B===0)return[M,R];let O=R[Symbol.iterator]();for(let K=0;K<B;K++){let V=O.next();if(V.done)return[M,S.empty()];M.push(V.value)}return[M,{[Symbol.iterator](){return O}}]}S.consume=x,s(x,"consume");async function I(R){let B=[];for await(let M of R)B.push(M);return Promise.resolve(B)}S.asyncToArray=I,s(I,"asyncToArray")})(fye||={});f();var pye=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function CUt(t){return Array.isArray(t)}s(CUt,"isEntries");var eje,wK=class t{constructor(e,r){this[eje]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(CUt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new pye(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(eje=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},tje,ZWe=class{constructor(e,r){this[tje]="ResourceSet";!e||typeof e=="function"?this._map=new wK(e):(this._map=new wK(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(tje=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var rje,mye=class{constructor(){this[rje]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(rje=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},hye=class extends mye{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},l3=class extends hye{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var SK=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var vUt=!1,u3=null;var nje=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&d.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new SK;for(let l of n){let u=i(l);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),l)}n.sort(oh(l=>l.idx,sh));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),A=XWe([...g].map(y=>i(y)[p]),y=>y);delete A[u[p]];for(let[y,x]of Object.entries(A))d.unshift(`    - stacktraces of ${x.length} other leaks continue with ${y}`);d.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function EUt(t){u3=t}s(EUt,"setDisposableTracker");if(vUt){let t="__is_disposable_tracked__";EUt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==xs.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==xs.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function d3(t){return u3?.trackDisposable(t),t}s(d3,"trackDisposable");function f3(t){u3?.markAsDisposed(t)}s(f3,"markAsDisposed");function gye(t,e){u3?.setParent(t,e)}s(gye,"setParentOfDisposable");function xUt(t,e){if(u3)for(let r of t)u3.setParent(r,e)}s(xUt,"setParentOfDisposables");function ije(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(ije,"isDisposable");function _K(t){if(fye.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(_K,"dispose");function oje(...t){let e=Sc(()=>_K(t));return xUt(t,e),e}s(oje,"combinedDisposable");function Sc(t){let e=d3({dispose:dye(()=>{f3(e),t()})});return e}s(Sc,"toDisposable");var Fu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;d3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(f3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{_K(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return gye(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),gye(e,null))}},xs=class{constructor(){this._store=new Fu;d3(this),gye(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){f3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var ah=class extends xs{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ws(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var sje=Fe(require("events"));var RK="CompletionRequested",CC=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new sje.default;notifyRequest(e,r,n,i,o){return this.#e.emit(RK,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Wl(this.ctx,e,`event.${RK}`);return this.#e.on(RK,r),In.Disposable.create(()=>this.#e.off(RK,r))}};f();var Aye=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},p3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Aye(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var kK=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=lje(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,d=aje(n.text,!1,o);if(l-c===d.length)for(let m=0,h=d.length;m<h;m++)u[m+c+1]=d[m];else d.length<1e4?u.splice(c+1,l-c,...d):this._lineOffsets=u=u.slice(0,c+1).concat(d,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=aje(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&cje(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},sT;(function(t){function e(i,o,a,c){return new kK(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof kK)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=yye(o.map(bUt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),l=0,u=[];for(let d of c){let p=i.offsetAt(d.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),d.newText.length&&u.push(d.newText),l=i.offsetAt(d.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(sT||(sT={}));function yye(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);yye(n,e),yye(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(yye,"mergeSort");function aje(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);cje(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(aje,"computeLineOffsets");function cje(t){return t===13||t===10}s(cje,"isEOL");function lje(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(lje,"getWellformedRange");function bUt(t){let e=lje(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(bUt,"getWellformedEdit");f();var uje;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(uje||(uje={}));var Cye;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Cye||(Cye={}));var dje;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(dje||(dje={}));var PK;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(PK||(PK={}));var Td;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=PK.MAX_VALUE),i===Number.MAX_VALUE&&(i=PK.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.line)&&Xe.uinteger(i.character)}s(r,"is"),t.is=r})(Td||(Td={}));var Ns;(function(t){function e(n,i,o,a){if(Xe.uinteger(n)&&Xe.uinteger(i)&&Xe.uinteger(o)&&Xe.uinteger(a))return{start:Td.create(n,i),end:Td.create(o,a)};if(Td.is(n)&&Td.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Td.is(i.start)&&Td.is(i.end)}s(r,"is"),t.is=r})(Ns||(Ns={}));var DK;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&(Xe.string(i.uri)||Xe.undefined(i.uri))}s(r,"is"),t.is=r})(DK||(DK={}));var fje;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.targetRange)&&Xe.string(i.targetUri)&&Ns.is(i.targetSelectionRange)&&(Ns.is(i.originSelectionRange)||Xe.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(fje||(fje={}));var vye;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.numberRange(i.red,0,1)&&Xe.numberRange(i.green,0,1)&&Xe.numberRange(i.blue,0,1)&&Xe.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(vye||(vye={}));var pje;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&vye.is(i.color)}s(r,"is"),t.is=r})(pje||(pje={}));var mje;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.undefined(i.textEdit)||h3.is(i))&&(Xe.undefined(i.additionalTextEdits)||Xe.typedArray(i.additionalTextEdits,h3.is))}s(r,"is"),t.is=r})(mje||(mje={}));var hje;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(hje||(hje={}));var gje;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return Xe.defined(o)&&(u.startCharacter=o),Xe.defined(a)&&(u.endCharacter=a),Xe.defined(c)&&(u.kind=c),Xe.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.startLine)&&Xe.uinteger(i.startLine)&&(Xe.undefined(i.startCharacter)||Xe.uinteger(i.startCharacter))&&(Xe.undefined(i.endCharacter)||Xe.uinteger(i.endCharacter))&&(Xe.undefined(i.kind)||Xe.string(i.kind))}s(r,"is"),t.is=r})(gje||(gje={}));var Eye;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&DK.is(i.location)&&Xe.string(i.message)}s(r,"is"),t.is=r})(Eye||(Eye={}));var Aje;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Aje||(Aje={}));var yje;(function(t){t.Unnecessary=1,t.Deprecated=2})(yje||(yje={}));var Cje;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Xe.string(n.href)}s(e,"is"),t.is=e})(Cje||(Cje={}));var BK;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return Xe.defined(o)&&(u.severity=o),Xe.defined(a)&&(u.code=a),Xe.defined(c)&&(u.source=c),Xe.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Xe.defined(o)&&Ns.is(o.range)&&Xe.string(o.message)&&(Xe.number(o.severity)||Xe.undefined(o.severity))&&(Xe.integer(o.code)||Xe.string(o.code)||Xe.undefined(o.code))&&(Xe.undefined(o.codeDescription)||Xe.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Xe.string(o.source)||Xe.undefined(o.source))&&(Xe.undefined(o.relatedInformation)||Xe.typedArray(o.relatedInformation,Eye.is))}s(r,"is"),t.is=r})(BK||(BK={}));var m3;(function(t){function e(n,i,...o){let a={title:n,command:i};return Xe.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.title)&&Xe.string(i.command)}s(r,"is"),t.is=r})(m3||(m3={}));var h3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Xe.objectLiteral(a)&&Xe.string(a.newText)&&Ns.is(a.range)}s(i,"is"),t.is=i})(h3||(h3={}));var xye;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Xe.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(xye||(xye={}));var g3;(function(t){function e(r){let n=r;return Xe.string(n)}s(e,"is"),t.is=e})(g3||(g3={}));var vje;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return h3.is(a)&&(xye.is(a.annotationId)||g3.is(a.annotationId))}s(i,"is"),t.is=i})(vje||(vje={}));var bye;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&_ye.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(bye||(bye={}));var Iye;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||g3.is(i.annotationId))}s(r,"is"),t.is=r})(Iye||(Iye={}));var Tye;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Xe.string(i.oldUri)&&Xe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||g3.is(i.annotationId))}s(r,"is"),t.is=r})(Tye||(Tye={}));var wye;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Xe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Xe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||g3.is(i.annotationId))}s(r,"is"),t.is=r})(wye||(wye={}));var Sye;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Xe.string(i.kind)?Iye.is(i)||Tye.is(i)||wye.is(i):bye.is(i)))}s(e,"is"),t.is=e})(Sye||(Sye={}));var Eje;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)}s(r,"is"),t.is=r})(Eje||(Eje={}));var xje;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.integer(i.version)}s(r,"is"),t.is=r})(xje||(xje={}));var _ye;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&(i.version===null||Xe.integer(i.version))}s(r,"is"),t.is=r})(_ye||(_ye={}));var bje;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.string(i.languageId)&&Xe.integer(i.version)&&Xe.string(i.text)}s(r,"is"),t.is=r})(bje||(bje={}));var Rye;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(Rye||(Rye={}));var WF;(function(t){function e(r){let n=r;return Xe.objectLiteral(r)&&Rye.is(n.kind)&&Xe.string(n.value)}s(e,"is"),t.is=e})(WF||(WF={}));var Ije;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ije||(Ije={}));var Tje;(function(t){t.PlainText=1,t.Snippet=2})(Tje||(Tje={}));var wje;(function(t){t.Deprecated=1})(wje||(wje={}));var Sje;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.newText)&&Ns.is(i.insert)&&Ns.is(i.replace)}s(r,"is"),t.is=r})(Sje||(Sje={}));var _je;(function(t){t.asIs=1,t.adjustIndentation=2})(_je||(_je={}));var Rje;(function(t){function e(r){let n=r;return n&&(Xe.string(n.detail)||n.detail===void 0)&&(Xe.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(Rje||(Rje={}));var kje;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(kje||(kje={}));var Pje;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(Pje||(Pje={}));var NK;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Xe.string(i)||Xe.objectLiteral(i)&&Xe.string(i.language)&&Xe.string(i.value)}s(r,"is"),t.is=r})(NK||(NK={}));var Dje;(function(t){function e(r){let n=r;return!!n&&Xe.objectLiteral(n)&&(WF.is(n.contents)||NK.is(n.contents)||Xe.typedArray(n.contents,NK.is))&&(r.range===void 0||Ns.is(r.range))}s(e,"is"),t.is=e})(Dje||(Dje={}));var Bje;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(Bje||(Bje={}));var Nje;(function(t){function e(r,n,...i){let o={label:r};return Xe.defined(n)&&(o.documentation=n),Xe.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(Nje||(Nje={}));var Lje;(function(t){t.Text=1,t.Read=2,t.Write=3})(Lje||(Lje={}));var Mje;(function(t){function e(r,n){let i={range:r};return Xe.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(Mje||(Mje={}));var Fje;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Fje||(Fje={}));var Oje;(function(t){t.Deprecated=1})(Oje||(Oje={}));var Qje;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(Qje||(Qje={}));var Uje;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(Uje||(Uje={}));var qje;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.name)&&Xe.number(i.kind)&&Ns.is(i.range)&&Ns.is(i.selectionRange)&&(i.detail===void 0||Xe.string(i.detail))&&(i.deprecated===void 0||Xe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(qje||(qje={}));var Hje;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Hje||(Hje={}));var LK;(function(t){t.Invoked=1,t.Automatic=2})(LK||(LK={}));var $je;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.typedArray(i.diagnostics,BK.is)&&(i.only===void 0||Xe.typedArray(i.only,Xe.string))&&(i.triggerKind===void 0||i.triggerKind===LK.Invoked||i.triggerKind===LK.Automatic)}s(r,"is"),t.is=r})($je||($je={}));var Wje;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):m3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.title)&&(i.diagnostics===void 0||Xe.typedArray(i.diagnostics,BK.is))&&(i.kind===void 0||Xe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||m3.is(i.command))&&(i.isPreferred===void 0||Xe.boolean(i.isPreferred))&&(i.edit===void 0||Sye.is(i.edit))}s(r,"is"),t.is=r})(Wje||(Wje={}));var jje;(function(t){function e(n,i){let o={range:n};return Xe.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(i.range)&&(Xe.undefined(i.command)||m3.is(i.command))}s(r,"is"),t.is=r})(jje||(jje={}));var Gje;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.uinteger(i.tabSize)&&Xe.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(Gje||(Gje={}));var Vje;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(i.range)&&(Xe.undefined(i.target)||Xe.string(i.target))}s(r,"is"),t.is=r})(Vje||(Vje={}));var zje;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ns.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(zje||(zje={}));var Yje;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Yje||(Yje={}));var Kje;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Kje||(Kje={}));var Jje;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(Jje||(Jje={}));var Xje;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&Xe.string(i.text)}s(r,"is"),t.is=r})(Xje||(Xje={}));var Zje;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&Xe.boolean(i.caseSensitiveLookup)&&(Xe.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(Zje||(Zje={}));var eGe;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ns.is(i.range)&&(Xe.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(eGe||(eGe={}));var tGe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ns.is(n.stoppedLocation)}s(r,"is"),t.is=r})(tGe||(tGe={}));var kye;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(kye||(kye={}));var Pye;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&(i.tooltip===void 0||Xe.string(i.tooltip)||WF.is(i.tooltip))&&(i.location===void 0||DK.is(i.location))&&(i.command===void 0||m3.is(i.command))}s(r,"is"),t.is=r})(Pye||(Pye={}));var rGe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Td.is(i.position)&&(Xe.string(i.label)||Xe.typedArray(i.label,Pye.is))&&(i.kind===void 0||kye.is(i.kind))&&i.textEdits===void 0||Xe.typedArray(i.textEdits,h3.is)&&(i.tooltip===void 0||Xe.string(i.tooltip)||WF.is(i.tooltip))&&(i.paddingLeft===void 0||Xe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Xe.boolean(i.paddingRight))}s(r,"is"),t.is=r})(rGe||(rGe={}));var nGe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(nGe||(nGe={}));var iGe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(iGe||(iGe={}));var oGe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(oGe||(oGe={}));var sGe;(function(t){t.Invoked=0,t.Automatic=1})(sGe||(sGe={}));var aGe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(aGe||(aGe={}));var cGe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(cGe||(cGe={}));var lGe;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Cye.is(n.uri)&&Xe.string(n.name)}s(e,"is"),t.is=e})(lGe||(lGe={}));var uGe;(function(t){function e(o,a,c,l){return new Dye(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Xe.defined(a)&&Xe.string(a.uri)&&(Xe.undefined(a.languageId)||Xe.string(a.languageId))&&Xe.uinteger(a.lineCount)&&Xe.func(a.getText)&&Xe.func(a.positionAt)&&Xe.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=c.length;for(let d=l.length-1;d>=0;d--){let p=l[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let d=0,p=0,m=0;for(;d<l.length&&p<u.length;)a(l[d],u[p])<=0?o[m++]=l[d++]:o[m++]=u[p++];for(;d<l.length;)o[m++]=l[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(uGe||(uGe={}));var Dye=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Td.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Td.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Xe;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,A){return e.call(h)==="[object Number]"&&g<=h&&h<=A}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Xe||(Xe={}));var hs=class{static{s(this,"LocationFactory")}static{this.range=Ns.create.bind(Ns)}static{this.position=Td.create.bind(Td)}},Xv=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=sT.create(e.clientUri,e.clientLanguageId,n,e.getText());return sT.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=sT.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return sT.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=$D({uri:e,languageId:r})){return new t(Cl(e),sT.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Ns.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Ns.create(Td.create(r,0),Td.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var jF={isBlocked:!1,reason:"VALID_FILE"},MK={isBlocked:!1,reason:"NO_MATCHING_POLICY"},dGe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},eR={all:"all",repo:"repo"},aT=new vt("contentExclusion");f();f();var FK=class{static{s(this,"PolicyEvaluator")}};f();f();f();var fGe=new vt("repository"),tR=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},cA=class{static{s(this,"GitConfigLoader")}},OK=class extends cA{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};f();var pGe=require("os");var QK=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return cI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=cI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,pGe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var UK=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(cA).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new QK(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var IUt=100,Bye=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},Zv=class t{constructor(e){this.ctx=e;this.remoteResolver=new UK;this.cache=new kr(IUt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=gd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Bye(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(Ni),i=no(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=no(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=y_(r,o[1]),c=no(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=no(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=no(a,"commondir");a=y_(a,(await e.readFileString(u)).trimEnd());let d=no(a,"config");return await e.stat(d),d}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var rR=s((t,e)=>{if(fC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...fC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var qK=new WeakMap;function HK(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&qK.has(t))return qK.get(t);switch(qK.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=HK(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+HK(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+HK(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return qK.set(t,n),n}s(HK,"t");function $K(t){return HK(t,0)}s($K,"r");var Nye=new WeakMap;function mGe(t,e,r=$K(e)){let n,i,o=Nye.get(t);o||(Nye.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=n[d++];u.r(m));}s(p,"o"),Nye.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?n[d-1].r(u):n[d-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,d){l.s=u,l.r=d})}s(mGe,"n");var hGe=new WeakMap;function TUt(t,e,r,n=$K(r)){if(e||(e=hGe.get(t)),e||hGe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=mGe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(TUt,"n");function gGe(t,e){return function(r,n){return TUt(t,e,r,n)}}s(gGe,"o");f();var FGe=Fe(RGe(),1);f();var zF=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var BUt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},YF=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),NUt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),kGe=s(t=>t.join(""),"rangesToString"),PGe=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,d=r,p="";e:for(;o<t.length;){let A=t.charAt(o);if((A==="!"||A==="^")&&o===r+1){u=!0,o++;continue}if(A==="]"&&a&&!l){d=o+1;break}if(a=!0,A==="\\"&&!l){l=!0,o++;continue}if(A==="["&&!l){for(let[y,[x,I,S]]of Object.entries(BUt))if(t.startsWith(y,o)){if(p)return["$.",!1,t.length-r,!0];o+=y.length,S?i.push(x):n.push(x),c=c||I;continue e}}if(l=!1,p){A>p?n.push(YF(p)+"-"+YF(A)):A===p&&n.push(YF(A)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(YF(A+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=A,o+=2;continue}n.push(YF(A)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let A=n[0].length===2?n[0].slice(-1):n[0];return[NUt(A),!1,d-r,!1]}let m="["+(u?"^":"")+kGe(n)+"]",h="["+(u?"":"^")+kGe(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,d-r,!0]},"parseClass");f();var cT=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var LUt=new Set(["!","?","+","*","@"]),DGe=s(t=>LUt.has(t),"isExtglobType"),MUt="(?!(?:^|/)\\.\\.?(?:$|/))",WK="(?!\\.)",FUt=new Set(["[","."]),OUt=new Set(["..","."]),QUt=new Set("().*{}+?[]^$\\!"),UUt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Fye="[^/]",BGe=Fye+"*?",NGe=Fye+"+?",A3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let A=e.charAt(h++);if(o||A==="\\"){o=!o,g+=A;continue}if(a){h===c+1?(A==="^"||A==="!")&&(l=!0):A==="]"&&!(h===c+2&&l)&&(a=!1),g+=A;continue}else if(A==="["){a=!0,c=h,l=!1,g+=A;continue}if(!i.noext&&DGe(A)&&e.charAt(h)==="("){r.push(g),g="";let y=new t(A,r);h=t.#u(e,y,h,i),r.push(y);continue}g+=A}return r.push(g),h}let u=n+1,d=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(DGe(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),d.push(m),m="",r.push(...p,d),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,A,y,x]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||x,g}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&OUt.has(this.#n[0]))){let g=FUt,A=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),y=!r&&!e&&g.has(u.charAt(0));d=A?MUt:y?WK:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,cT(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,cT(this.toString()),!1,!1]}let a=!n||e||r||!WK?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?WK:"")+NGe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?WK:"")+BGe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,cT(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(QUt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,d,p,m]=PGe(e,c);if(p){o+=u,a=a||d,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=NGe:o+=BGe,r=!0;continue}if(l==="?"){o+=Fye,r=!0;continue}o+=UUt(l)}return[o,cT(e),!!r,a]}};f();var Oye=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var _c=s((t,e,r={})=>(zF(e),!r.nocomment&&e.charAt(0)==="#"?!1:new y3(e,r).match(t)),"minimatch"),qUt=/^\*+([^+@!?\*\[\(]*)$/,HUt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),$Ut=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),WUt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),jUt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),GUt=/^\*+\.\*+$/,VUt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),zUt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),YUt=/^\.\*+$/,KUt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),JUt=/^\*+$/,XUt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),ZUt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),eqt=/^\?+([^+@!?\*\[\(]*)?$/,tqt=s(([t,e=""])=>{let r=OGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),rqt=s(([t,e=""])=>{let r=QGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),nqt=s(([t,e=""])=>{let r=QGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),iqt=s(([t,e=""])=>{let r=OGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),OGe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),QGe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),UGe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",LGe={win32:{sep:"\\"},posix:{sep:"/"}},oqt=UGe==="win32"?LGe.win32.sep:LGe.posix.sep;_c.sep=oqt;var lh=Symbol("globstar **");_c.GLOBSTAR=lh;var sqt="[^/]",aqt=sqt+"*?",cqt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",lqt="(?:(?!(?:\\/|^)\\.).)*?",uqt=s((t,e={})=>r=>_c(r,t,e),"filter");_c.filter=uqt;var ch=s((t,e={})=>Object.assign({},t,e),"ext"),dqt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return _c;let e=_c;return Object.assign(s((n,i,o={})=>e(n,i,ch(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,ch(t,o))}static defaults(i){return e.defaults(ch(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,ch(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,ch(t,o))}},unescape:s((n,i={})=>e.unescape(n,ch(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,ch(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,ch(t,i)),"filter"),defaults:s(n=>e.defaults(ch(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,ch(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,ch(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,ch(t,o)),"match"),sep:e.sep,GLOBSTAR:lh})},"defaults");_c.defaults=dqt;var qGe=s((t,e={})=>(zF(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,FGe.default)(t)),"braceExpand");_c.braceExpand=qGe;var fqt=s((t,e={})=>new y3(t,e).makeRe(),"makeRe");_c.makeRe=fqt;var pqt=s((t,e,r={})=>{let n=new y3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");_c.match=pqt;var MGe=/[?*]|[+@!]\(.*?\)|\[|\]/,mqt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),y3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){zF(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||UGe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!MGe.test(o[2]))&&!MGe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let A=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!A&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),x=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),I=!x&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),S=y?3:A?0:void 0,R=I?3:x?0:void 0;if(typeof S=="number"&&typeof R=="number"){let[B,M]=[e[S],r[R]];B.toLowerCase()===M.toLowerCase()&&(r[R]=B,R>S?r=r.slice(R):S>R&&(e=e.slice(S)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var d=r[c],p=e[a];if(this.debug(r,d,p),d===!1)return!1;if(d===lh){this.debug("GLOBSTAR",[r,d,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let A;if(typeof d=="string"?(A=p===d,this.debug("string match",d,p,A)):(A=d.test(p),this.debug("pattern match",d,p,A)),!A)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return qGe(this.pattern,this.options)}parse(e){zF(e);let r=this.options;if(e==="**")return lh;if(e==="")return"";let n,i=null;(n=e.match(JUt))?i=r.dot?ZUt:XUt:(n=e.match(qUt))?i=(r.nocase?r.dot?jUt:WUt:r.dot?$Ut:HUt)(n[1]):(n=e.match(eqt))?i=(r.nocase?r.dot?rqt:tqt:r.dot?nqt:iqt)(n):(n=e.match(GUt))?i=r.dot?zUt:VUt:(n=e.match(YUt))&&(i=KUt);let o=A3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?aqt:r.dot?cqt:lqt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?mqt(d):d===lh?lh:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==lh||h===lh||(h===void 0?m!==void 0&&m!==lh?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==lh&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=lh))}),u.filter(d=>d!==lh).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return _c.defaults(e).Minimatch}};_c.AST=A3;_c.Minimatch=y3;_c.escape=Oye;_c.unescape=cT;var Qye="contentExclusion",jK=class extends FK{static{s(this,"CopilotContentExclusion")}#e;#t=new kr(1e4);#i=new kr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=y_(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??eR.all);if(!i)return MK;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return aT.exception(this.#e,n,`${Qye}.evaluate`),dGe}return jF}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=jF,a,c=Qfe(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(_c(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=Uye(l,"FILE_BLOCKED_PATH"),a=u;break e}return aT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return jF;let a=this.evaluateFileContent(i,o,n);return aT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>HGe(a)).some(a=>a.test(n)))return Uye(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>HGe(a)).some(a=>a.test(n)))return Uye(i,"FILE_BLOCKED_TEXT_BASED");return jF}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ma(this.#e,e,`${Qye}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=gGe(async e=>{let r=await this.#e.get(qr).getGitHubSession();if(!r)throw new ga("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(eR.all);e.filter(u=>u!==eR.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==eR.all).join(",")),i.searchParams.set("scope",o?eR.all:eR.repo);let c=await Rm(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new jy(c)}return this.#s("fetch.success"),rR(yqt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(Zv).getRepo(gd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Dt(this.#e,`${Qye}.${e}`,$r.createAndMarkAsIssued(r,n))}};function HGe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(HGe,"stringToRegex");function Uye(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(Uye,"fileBlockedEvaluationResult");var hqt=E.Object({name:E.String(),type:E.String()}),gqt=E.Object({paths:E.Array(E.String()),ifNoneMatch:E.Optional(E.Array(E.String())),ifAnyMatch:E.Optional(E.Array(E.String())),source:hqt}),qye=E.Array(gqt),Aqt=E.Object({rules:qye,last_updated_at:E.String(),scope:E.String()}),yqt=E.Array(Aqt);var el=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new jK(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Cr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");let r=Wl(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(Cr).onDidFocusTextDocument(r),ws(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let d=performance.now(),p=await u.evaluate(e,r),m=performance.now();return i.push({key:l,result:p,elapsedMs:Math.round(m-d)}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){aT.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Io).setInactive(r??"Copilot is disabled"):this.ctx.get(Io).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===MK.reason)return aT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={contentExclusionEvalMs:i};return Dt(this.ctx,e,$r.createAndMarkAsIssued(c,l)),Dt(this.ctx,e,$r.createAndMarkAsIssued({...c,path:r},l),1),aT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function eE(t,e,r){let n=await t.get(el).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(eE,"isDocumentValid");var Cr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await eE(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Cl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return eE(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Ni).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Ni).readFileString(e)}getWorkspaceFolder(e){let r=Cl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Cl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Cl(e.uri);for(let n of this.getWorkspaceFolders()){let i=Cl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Hi(r)}};function ea(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ea,"statusFromTextDocumentResult");var vn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Cr).getRelativePath(e)??Hi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Cr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await eE(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:Xv.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Ni).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Ni).stat(e)).size/1024/1024}};f();f();var uh=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function vC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(vC,"delay");f();var Hye=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},GK=class extends Hye{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var l0=class{constructor(e){this.ctx=e;this.#e=new vt("AsyncCompletionManager");this.requests=new kr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if($ye(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new GK;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Nt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new uh,c=new Map,l=s(d=>()=>{let p=c.get(d);p!==void 0&&(p(),c.delete(d),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if($ye(r,n,d)){if(d.state===0){let p=r.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){l(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),l(d.headerRequestId)()},"next");for(let[d,p]of this.requests)$ye(r,n,p)?c.set(d,p.subject.subscribe({next:u,error:l(d),complete:l(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of c.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function $ye(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s($ye,"isCandidate");f();f();var JF=class{constructor(e){this.maxSize=e;this.root=new KF;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new KF;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new KF;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},KF=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var lA=class{constructor(){this.cache=new JF(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new JF(100)}};f();f();f();var lT=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return Ed.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=Ile(n,Ed.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{Tle(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var VK=class extends lT{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function $Ge(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=Ile(c,Ed.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,d=!0}finally{Tle(c,u,d)}}s($Ge,"getBlockPositionType");f();f();var tE={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function WGe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let A;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?A=.03507251990078782:t[2]>14.500000000000002?A=.004905698363309292:t[8]>2421.5000000000005?A=-.10306119951984316:A=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?A=-.08503171085833393:A=.015130974593044409:A=-.024425267075198206:A=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?A=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?A=.09908783187786288:A=-.06920877329925636:t[8]>241.50000000000003?A=-.016756131804203496:t[9]>33.50000000000001?A=.04903179955263626:t[217]>1e-35?A=-.047416847619291644:A=-.0017200891991431119:t[39]>1e-35?A=-.10389927604977028:t[134]>1e-35?A=-.050480365434872866:t[178]>1e-35?A=-.05167855791556937:t[8]>2134.5000000000005?A=-.01663197335585307:t[242]>1e-35?A=-.05361323756615453:t[118]>1e-35?A=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?A=-.0016544848369620534:A=.04494144460483587:A=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?A=.051166688553608355:A=-.06623908820705383:t[84]>1e-35?A=-.12990936092409747:t[306]>1e-35?A=-.07020596855118943:t[49]>1e-35?A=.06272964802556856:t[192]>1e-35?A=.06540204627162581:A=.008277910531592885;let y;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?y=.003325460510319164:y=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?y=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?y=.0697359767152808:t[230]>1e-35?y=.06513506845651572:y=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?y=.013616385013146277:y=.04171540100223404:y=-.04360396575094823:t[212]>1e-35?y=.025945477945627522:y=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?y=-.07856453318384411:y=-.014803893522351739:t[39]>1e-35?y=-.09185452630751932:t[149]>1e-35?y=-.07122426086157027:t[134]>1e-35?y=-.04231052091434186:t[227]>1e-35?y=-.029815824273994197:t[50]>1e-35?y=-.15736496271211153:t[222]>1e-35?y=-.02360285356956629:t[128]>1e-35?y=-.03922080193836443:t[136]>1e-35?y=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?y=-.0029736170756835783:y=-.06482902102259112:t[84]>1e-35?y=-.11340924635708383:t[94]>1e-35?y=-.03635703457792193:t[118]>1e-35?y=-.058181913914186034:t[126]>1e-35?y=-.062030576241517366:t[116]>1e-35?y=-.045086301850604006:t[25]>1e-35?y=-.031665223656767286:t[203]>1e-35?y=-.009444685731407691:y=.0112265153772187;let x;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?x=.022717227245241684:x=-.049700413274686266:x=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?x=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?x=-.12263724050601095:x=.0070743478891288035:t[288]>1e-35?x=-.050439138582109:x=.0255701593657891:x=-.005812703740580558:t[6]>49.50000000000001?x=-.008542694147899113:x=.035147383686665:x=-.0960461939274094:t[32]>1e-35?x=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?x=-.01800870272656664:x=-.07817304234604389:t[30]>1e-35?x=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?x=.08778416018479411:x=-.026563982720830256:x=-.05296139548112329:t[50]>1e-35?x=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?x=-.036572140520852024:t[183]>1e-35?x=-.10766853736801459:x=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?x=.09513215942486053:x=-.03641865277445567:t[10]>59.50000000000001?x=.03177172388687933:t[39]>1e-35?x=-.10234241303898953:t[243]>1e-35?x=-.02966738115984321:t[190]>1e-35?x=-.04312785336449181:t[118]>1e-35?x=-.05808521194081524:x=.006720381600740378;let I;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?I=-.046284053681928526:t[210]>1e-35?I=49778070699847876e-21:t[13]>1e-35?I=.03328070054739309:t[128]>1e-35?I=-.054790214922938896:t[126]>1e-35?I=-.08524792218532945:I=.014414055975542446:t[1]>38.50000000000001?I=-.07287851335872973:I=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?I=-.12459748864088374:I=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?I=.13044981041138526:t[9]>71.50000000000001?I=-.056068402282406865:t[9]>12.500000000000002?I=.038957722962512764:I=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?I=-.0852126122372075:t[225]>1e-35?I=.10082066771689505:t[1]>161.50000000000003?I=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?I=-.010835400874777133:I=.004607419973807752:I=-.016989075258564062:I=.009205417251698097:t[23]>1e-35?t[20]>1e-35?I=.10184317139657878:t[0]>5724.500000000001?I=-.1163666496650542:t[1]>106.50000000000001?I=.1303850608190687:t[129]>1e-35?I=.10745031509534769:I=.006166901738036226:t[31]>1e-35?I=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?I=.005004582564506611:I=-.10481581731668346:t[19]>1e-35?I=-.009850706427306281:I=-.02608226348051303;let S;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?S=-.0024117174588695603:S=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?S=.04575380761203418:S=-.10025595041353463:t[15]>1e-35?S=.17705790384964004:S=.0073813837628615014:S=.07676373681392407:S=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?S=.07078572910026419:t[4]>23.500000000000004?S=.005513918674164821:S=.0206586476926392:t[0]>5269.500000000001?S=.07706773525822633:S=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?S=-.03204783603215824:S=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?S=-.0930246911392012:S=.011173087289703683:t[3]>24.500000000000004?S=.03281421918878597:S=.12449335091369843:t[204]>1e-35?S=.06634531187326123:S=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?S=-.041196758517013515:t[4]>7.500000000000001?S=-2942718111029724e-20:t[4]>6.500000000000001?S=.11953909558532852:S=.03188615019450534:t[122]>1e-35?S=-.0616037324662157:t[101]>1e-35?S=.027230889593349412:t[8]>4968.500000000001?S=-.1113986516540856:t[3]>2.5000000000000004?S=-.002045140426885727:t[129]>1e-35?S=.12641163374304432:S=.014909826232873194;let R;t[308]>1e-35?t[0]>7277.500000000001?R=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?R=-.040884836258675006:t[210]>1e-35?R=-.0003719413278428804:t[13]>1e-35?R=.030287610160818174:R=.011174130013595384:t[1]>38.50000000000001?R=-.0662442170185784:R=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?R=-.08092286307197555:R=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?R=-.1155211149523894:R=-.0032903546638958538:t[149]>1e-35?R=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?R=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?R=-.025416927789760076:R=.02777568919793122:R=-.10310351509769732:R=.013549608903688785:t[186]>1e-35?R=.08513865847420551:R=-.009306721292510369:t[31]>1e-35?R=.009780833952582307:t[23]>1e-35?R=.011143773934157629:t[210]>1e-35?R=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?R=-.04846287537743046:R=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?R=-.034224938681445764:t[8]>1641.5000000000002?R=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?R=-.027950103994861836:R=.14575930827829034:R=-.007124740389354946:t[10]>22.500000000000004?R=.013173304107866726:R=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let M;t[13]>1e-35?t[118]>1e-35?M=.07957905150112207:t[1]>125.50000000000001?M=-.0662620579858685:t[145]>1e-35?M=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?M=-.0009597832580977798:M=-.081474760755753:t[212]>1e-35?M=.03637001492325179:M=.006912305498963309:t[32]>1e-35?M=-.03919900630910754:t[134]>1e-35?M=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?M=.06671440854602108:t[136]>1e-35?M=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?M=.026430947016830915:M=-.04075501264495112:t[9]>93.50000000000001?M=-.04353169430417609:t[50]>1e-35?M=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?M=.068392679163672:t[10]>1.5000000000000002?M=-.0209659792007492:M=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?M=.07254524592323175:M=-.0319087835282534:M=.00037444813327793425:M=-.025138768151370408:t[243]>1e-35?M=-.050010891710502096:t[94]>1e-35?M=-.0817513550778599:t[122]>1e-35?M=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?M=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?M=.1454877641381946:M=.053787998331240316:t[9]>33.50000000000001?M=.08602629796680285:M=-.03895127455803038:M=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let K;t[306]>1e-35?t[149]>1e-35?K=-.1389218965136736:K=-.032218642644416894:t[13]>1e-35?K=.006465035217331847:t[50]>1e-35?K=-.1381687930130022:t[179]>1e-35?K=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?K=-.03262719498763048:K=.023342916702125613:t[191]>1e-35?K=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?K=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?K=-.09989343595668776:K=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?K=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?K=-.09165257825246746:t[9]>32.50000000000001?K=.02484870392366004:K=-.008499493096971395:t[8]>24.500000000000004?K=.02459679192828244:K=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?K=.0015644546318714849:K=-.06579524865022705:K=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?K=.03331853632960164:K=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?K=-.019091477207111116:K=.037878468575478504:t[94]>1e-35?K=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?K=.16919658785098224:t[243]>1e-35?K=-.06580584936754524:K=.01567555159935563:t[129]>1e-35?K=.06721746994993226:t[10]>32.50000000000001?K=-.046394462507797975:K=-.006436180519584767;let V;t[131]>1e-35?V=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?V=.019122095523977856:t[298]>1e-35?V=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?V=-.026094309429557913:t[204]>1e-35?V=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?V=.012643810980689466:V=-.07884161741497837:V=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?V=.04493082949897325:V=.18046359750455776:t[7]>18.500000000000004?V=-.018667348656891496:V=.02584325784698236:V=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?V=.04749240016989375:V=-.0333334578246718:t[5]>3276.5000000000005?V=.11330554740098908:t[7]>94.50000000000001?V=.1296600395033268:V=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?V=-.13787130789142835:t[0]>1847.5000000000002?V=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?V=.028856848462727104:V=-.11197632885851168:V=.08169801342016791:t[1]>22.500000000000004?V=-.021052888644970163:V=.019048604298876753:t[7]>4.500000000000001?V=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?V=.03432638833359197:V=-.0036767863082454973:t[1]>48.50000000000001?V=.03087375270128195:t[2]>3.5000000000000004?V=-.04219917149740248:V=.018818493993207935;let z;t[306]>1e-35?z=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?z=-.09091897542577475:z=.04042943082645558:t[218]>1e-35?z=.056254985867151:z=-.053848117950183044:z=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?z=.021581808008986944:z=-.05639286496176611:z=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?z=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?z=.023885302967553288:z=.1617794086125622:t[212]>1e-35?z=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?z=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?z=.01894935813286188:z=-.06449356357429188:z=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?z=-.034718828212885515:z=.0898976288814321:t[1]>17.500000000000004?z=-.15440137451988326:z=-.03864183216821465:z=.009988507307006308:z=-.08540311947043305:t[50]>1e-35?z=-.13323659732101975:t[134]>1e-35?z=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?z=.08082476177379844:z=-.041665761903645876:t[179]>1e-35?z=-.12405023987936657:t[39]>1e-35?z=-.06247416524997478:t[138]>1e-35?z=-.10724031753676487:z=-.0005423122305122404;let Q;t[308]>1e-35?Q=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?Q=.023223358334607133:Q=-.04383410185346742:Q=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?Q=.023406489302867494:Q=-.085521220804058:Q=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?Q=.028120059780969632:Q=-.04211009474298743:t[294]>1e-35?Q=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?Q=-.0993035220737934:Q=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?Q=.029770210551187937:Q=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?Q=.06421359317599738:Q=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?Q=.024368404612215164:Q=-.04045232374803373:t[131]>1e-35?Q=.017372701982485795:t[120]>1e-35?Q=.08812710275150198:t[18]>1e-35?t[90]>1e-35?Q=.18451364351180236:t[7]>33.50000000000001?Q=-.03850813130183531:t[195]>1e-35?Q=.06966114053446336:t[3]>16.500000000000004?Q=-.0012869181693341211:t[0]>4242.500000000001?Q=-.054625548611291035:Q=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?Q=.006302103427145562:Q=.13967622319898698:t[121]>1e-35?Q=-.038798585213145644:t[5]>4544.500000000001?Q=-.08050498033009466:Q=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let Z;t[183]>1e-35?Z=-.05753337139158443:t[308]>1e-35?Z=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?Z=-.10477869875380448:Z=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?Z=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?Z=-.04442302951713574:Z=.00012409888451734224:Z=-.092199119633697:t[225]>1e-35?Z=.13773072450201831:t[0]>2882.5000000000005?Z=.0028540012229920533:t[298]>1e-35?Z=.07134486044361629:Z=.014297412329837425:t[145]>1e-35?Z=.05608385321902638:t[92]>1e-35?Z=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?Z=-.0039957800609801315:Z=.0776927564241081:t[203]>1e-35?Z=-.05502900859432093:t[105]>1e-35?Z=.06062892720841595:Z=-.009574839629252128:t[31]>1e-35?Z=.009488858841144216:t[23]>1e-35?t[20]>1e-35?Z=.08818126313644752:t[8]>161.50000000000003?Z=.014353968957885408:Z=-.022240738532827903:t[210]>1e-35?Z=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?Z=-.043902062079383485:Z=-.014741559220396223:Z=-.00934935734853194:t[6]>32.50000000000001?Z=.1514593126307404:Z=.010771222510801532:t[10]>22.500000000000004?Z=.01412495209334078:Z=-.08576940379502533;let J;t[0]>384.50000000000006?t[84]>1e-35?J=-.06647690967306838:t[2]>101.50000000000001?J=-.024451334501552457:t[306]>1e-35?J=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?J=.0031858381443673127:J=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?J=-.08601340441214533:t[1]>29.500000000000004?J=.10487598629539963:t[8]>597.5000000000001?J=-.0786529133673238:J=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?J=-.04883600353740688:t[126]>1e-35?J=-.03794042763348827:J=-.003358871967539988:t[210]>1e-35?J=.054991356498447566:t[6]>19.500000000000004?J=-.007418396981635549:J=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?J=-.02143003429501711:J=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?J=-.006636355416244082:J=-.06483095743431454:t[4]>21.500000000000004?J=-.028975965946833545:J=.022012264796522657:J=-.06653648243193663:t[5]>4593.500000000001?J=.01753551428088607:t[217]>1e-35?J=-.028864824937700297:t[94]>1e-35?J=-.04885192273020658:t[279]>1e-35?J=.08105715462329498:t[121]>1e-35?J=-.04576676034750651:J=.004795141324949362:t[1]>42.50000000000001?J=-.047446619702809195:t[145]>1e-35?J=.08400495571952321:J=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let $;t[0]>384.50000000000006?t[84]>1e-35?$=-.06088131453064195:t[147]>1e-35?$=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?$=.04219361472548491:$=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?$=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?$=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?$=-.11431764534511478:$=.013549717238356157:$=-.020987333767091276:t[6]>2.5000000000000004?$=-.02914877855133127:$=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?$=-.10087072787978416:t[37]>1e-35?$=-.030467397753331196:t[229]>1e-35?$=-.1017559811057469:t[4]>20.500000000000004?$=-.00413177742240167:t[20]>1e-35?$=.05213315982685969:$=.0037921635866823133:t[8]>51.50000000000001?$=.07327913092421544:t[6]>49.50000000000001?$=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?$=.02744420891894289:$=.11288946357194463:$=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?$=-.012329314369909049:$=.026816658655600168:$=-.0872405354618811:$=.007872673500247845:t[1]>42.50000000000001?$=-.04309044198258254:t[145]>1e-35?$=.07572529147860785:t[7]>5.500000000000001?$=-.013837187093264945:t[1]>17.500000000000004?$=.04208698439539668:$=-.06284346769019863;let X;t[294]>1e-35?X=-.0384794324818203:t[266]>1e-35?X=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?X=.07432960094940501:X=-.035248735855751855:t[134]>1e-35?X=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?X=-.01706896375068821:X=.08212247914968074:t[2]>59.50000000000001?X=-.09546478958824225:t[6]>53.50000000000001?X=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?X=.02816463285971267:X=.15449139016588445:X=-.10199787406123524:X=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?X=-.13924786681478077:X=-.0072772442570213335:t[39]>1e-35?X=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?X=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?X=-.11174465335620831:X=.00013144040097180107:X=-.08493919336681105:t[42]>1e-35?X=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?X=-.015540659878839153:X=-.14442609417300142:t[21]>1e-35?X=-.025251979447574083:X=.0023698372645272847:t[18]>1e-35?X=.07269739695712212:t[8]>2592.5000000000005?X=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?X=-.01835130329646532:t[9]>45.50000000000001?X=.02023047454629885:X=.16469378262221102:X=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ae;t[183]>1e-35?t[17]>1e-35?ae=.030100940443356424:t[10]>1.5000000000000002?ae=-.10861112216742408:ae=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ae=-.032062878390325456:ae=-.10808232631806887:t[8]>1641.5000000000002?ae=-.06147013392655731:t[4]>12.500000000000002?ae=.03324767551088266:t[145]>1e-35?ae=.028851633810612017:ae=-.054871239091792784:t[134]>1e-35?ae=-.023813968121342108:t[266]>1e-35?ae=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ae=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ae=-.025350325484720576:ae=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ae=.056817276537534815:ae=-.07674158463557636:ae=-.06335553143454145:t[1]>56.50000000000001?ae=.16390494217299284:ae=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ae=.041717597065890205:ae=-.10357913492269129:t[10]>29.500000000000004?ae=.1365512866715726:ae=.020600048310575665:ae=.09708785634773187:ae=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ae=-.03146213719547347:ae=.11784024316238083:ae=-.050940520532045355:ae=-.047988344143075616:t[191]>1e-35?ae=.028764654731460032:ae=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let Ae;t[179]>1e-35?Ae=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ae=.026484626664041125:t[10]>1.5000000000000002?Ae=-.10187000872941615:Ae=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ae=.09574540795390041:Ae=-.06454986703691233:Ae=-.11411849349353141:t[266]>1e-35?Ae=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ae=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ae=-.04403391373512386:Ae=.1132928075412222:t[2]>47.50000000000001?Ae=-.09700191391838056:Ae=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ae=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ae=-.001668912999010927:Ae=-.02363511102970245:t[8]>58.50000000000001?Ae=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ae=.0911011436534449:t[1]>28.500000000000004?Ae=-.07192390493729035:Ae=.06913818091291246:Ae=-.012312625373699222:Ae=.06784496312307986:Ae=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ae=.0026564453057705273:Ae=-.025425772389361445:t[122]>1e-35?Ae=-.12046786388602149:t[0]>3183.5000000000005?Ae=.01162092842804907:t[91]>1e-35?Ae=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ae=-.0001647792543020228:Ae=-.023664538532907665:Ae=.01609078206180752;let Oe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Oe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Oe=-.017696526862422682:Oe=.1450050954613223:Oe=-.05406930069823832:Oe=-.08308700260259043:t[120]>1e-35?Oe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Oe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Oe=.038431826961746934:Oe=-.05937462906539856:t[9]>65.50000000000001?Oe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Oe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Oe=-.09579030954062734:Oe=.025064711572811746:Oe=.02579440518821548:Oe=.1044440128091862:Oe=-.058348633139536844:Oe=.07766788227934436:Oe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Oe=.07463684068207214:Oe=.18244269035484484:t[6]>39.50000000000001?Oe=-.06050050067471004:Oe=.05787759066913493:Oe=.010783225857972171:Oe=.1674891243602606:t[4]>9.500000000000002?Oe=-.004814132027475892:Oe=-.14543299413454813:Oe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Oe=-.07634466313617769:Oe=.0287825335169114:Oe=-.06894721943300268:Oe=-.00023988459059521937;let Te;t[131]>1e-35?t[1]>93.50000000000001?Te=-.05706887458825395:t[2]>1.5000000000000002?Te=.011446637886629108:Te=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Te=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Te=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Te=.026278724448495064:Te=.17053138400480508:t[0]>4463.500000000001?Te=-.06482289890096041:Te=.03026516489536295:Te=-.031785170717683144:Te=.1312690622980455:t[13]>1e-35?Te=.14336922540461444:Te=.03523850945454039:Te=-.015407465968975714:t[39]>1e-35?Te=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Te=-.0659975068798723:Te=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Te=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Te=.057409156184759516:Te=.2024322059866388:Te=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Te=.010648654146284154:t[308]>1e-35?Te=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Te=.12364025998551711:Te=-.02247495081065243:t[1]>22.500000000000004?Te=-.0726295464624251:Te=.03481895086048152:t[0]>4331.500000000001?Te=-.04775443357020673:Te=.07172377425057568:t[2]>89.50000000000001?Te=-.11782645274716962:Te=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let lt;t[179]>1e-35?lt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?lt=-.07595415373151816:lt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?lt=.022822510448266862:lt=.17491569312933697:lt=-.058362287133533565:t[2]>2.5000000000000004?lt=-.03633895806364428:lt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?lt=-.07294848747514579:lt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?lt=-.07009535282685533:t[8]>2640.0000000000005?lt=-.051761240111316276:t[131]>1e-35?lt=-.06245774419231631:lt=.03495606662854905:lt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?lt=.0015036626973581122:lt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?lt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?lt=.022343994371919224:lt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?lt=.07724450228328664:t[0]>3853.5000000000005?lt=-.15671707454435677:t[10]>28.500000000000004?lt=-.10179090671841723:lt=.014878216919760927:lt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?lt=.14054154485273487:lt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?lt=-.08632985141410315:lt=.005524157938954954:lt=-.08802502622523681:lt=-.0004649168897260341;let _t;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?_t=-.007458687464321174:_t=-.09444966249102484:t[1]>23.500000000000004?_t=.08564129697360716:_t=-.07105002902845851:_t=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?_t=-.10326216566705966:t[1]>26.500000000000004?_t=.0050539832484585365:_t=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?_t=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?_t=.05783632021087773:t[10]>17.500000000000004?_t=-.06720598671764105:t[1]>47.50000000000001?_t=.097495825172558:_t=-.013372242800584872:_t=-.06463226787713715:t[42]>1e-35?_t=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?_t=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?_t=.11051270080118503:_t=.027719462817590454:t[8]>597.5000000000001?_t=-.08441503592016869:_t=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?_t=-.12190088985091102:_t=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?_t=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?_t=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?_t=.016585157185448045:_t=-.11032043771149425:_t=.01586986028570486:t[8]>388.50000000000006?_t=-.10592413013261853:_t=.04930703248769364:t[13]>1e-35?_t=.003621937787920821:_t=-.0013786331198611841;let Et;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Et=.009769895322846493:Et=-.10620052926943656:t[9]>19.500000000000004?Et=.03781202525403449:t[9]>14.500000000000002?Et=-.11485785321365344:t[9]>6.500000000000001?Et=.07677177833073881:t[0]>4342.500000000001?Et=-.07079285609687631:t[49]>1e-35?Et=.06156814809246001:Et=-.014788509042554625:Et=-.032659201618470655:t[5]>5207.500000000001?Et=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Et=-.03094160322187924:t[1]>29.500000000000004?Et=.09474646043921069:Et=.023445783928231618:Et=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Et=-.07164443768784848:t[1]>29.500000000000004?Et=.089473622509272:t[8]>597.5000000000001?Et=-.08155349903101317:Et=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Et=-.004003900679358653:t[190]>1e-35?Et=-.09236113461485262:t[8]>3198.5000000000005?Et=-.0124130160451179:Et=.018453070064009328:t[15]>1e-35?Et=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Et=-.0009580759587680961:Et=-.03227283036698222:Et=.01369287669536875:t[1]>50.50000000000001?Et=-.04213060332500437:t[35]>1e-35?Et=-.11508095777767471:t[190]>1e-35?Et=-.08611884672400155:t[297]>1e-35?Et=.05723551879433584:Et=-.004829340082311461;let ht;t[183]>1e-35?ht=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?ht=-.11753465135886734:ht=-.007515490299047085:ht=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?ht=-.12371142493530439:t[1]>36.50000000000001?ht=.032189417575190435:ht=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?ht=-.0784518658439288:t[2]>54.50000000000001?ht=.12477882322370665:ht=.000313468482399738:ht=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?ht=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?ht=.0353146070135579:ht=-.06327619611098285:ht=.02813577701641991:ht=-.12354390728506215:t[34]>1e-35?ht=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?ht=-.01245803535276381:ht=-.07169472553475001:t[1]>11.500000000000002?ht=.12989984824561698:ht=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?ht=.010390226893521422:t[10]>14.500000000000002?ht=.16790888126487719:ht=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?ht=-.043398307129729134:ht=.09963544907820426:t[9]>30.500000000000004?ht=-.13540713124984502:t[9]>17.500000000000004?ht=.0509435850590757:ht=-.04761897852404613:t[4]>78.50000000000001?ht=.09197086656470652:ht=.0006771050176682337;let ue;t[122]>1e-35?t[6]>36.50000000000001?ue=.05686884451670743:ue=-.05334759543084309:t[266]>1e-35?ue=-.08603579519816038:t[157]>1e-35?ue=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ue=-.0499592651503952:t[0]>725.5000000000001?ue=.11780353905132664:ue=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ue=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ue=-.03190157229022304:ue=.07985197845805492:ue=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ue=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ue=-.027174047777029083:ue=.057117284879796476:t[3]>43.50000000000001?ue=-.0016147040913107311:ue=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ue=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ue=-.01466076988151239:ue=.13375695925484857:ue=-.04885873081899647:t[0]>5566.500000000001?ue=.11086813028591343:t[8]>992.5000000000001?ue=-.07622304217072383:ue=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ue=.03285858361708423:ue=-.12354858211764992:ue=.0672788301823281:t[15]>1e-35?ue=.08658836986585006:ue=-.02741484278509758:t[290]>1e-35?ue=-.08161310335133287:t[135]>1e-35?ue=-.04824156054814152:ue=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let $e;t[189]>1e-35?t[0]>5269.500000000001?$e=-.103183298350443:t[2]>51.50000000000001?$e=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?$e=-.05186168947388339:$e=.0496996365539082:t[10]>23.500000000000004?$e=.1404445738719:t[93]>1e-35?$e=.0027146310074558505:t[5]>3821.5000000000005?$e=.002153033152069652:t[4]>2.5000000000000004?$e=.007663539551317215:$e=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?$e=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?$e=-.021479467709980358:$e=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?$e=.021660293256233334:$e=-.0927396152303864:$e=.0665074081601698:t[0]>1550.5000000000002?$e=.08972407105958534:$e=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?$e=.06761927942466854:$e=-.015762168112653286:t[17]>1e-35?$e=.10311304131145381:$e=-.017672785252336027:$e=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?$e=-.10638321435298535:$e=.0007073011744385905:t[18]>1e-35?$e=-.027056185501334325:t[145]>1e-35?$e=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?$e=.09762140519655171:t[9]>110.50000000000001?$e=-.06581942957595835:t[6]>54.50000000000001?$e=.04959634035251596:$e=.0022616298654554207:$e=-.007437620924990854;let se;t[179]>1e-35?se=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?se=.1470294450403005:se=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?se=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?se=.07965955447707423:t[10]>10.500000000000002?se=-.09236156404262426:se=.03396273196231458:se=-.13246465021467432:se=.07092822261735353:se=-.08753829085942:se=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?se=.004705878789890202:se=.13775378964952867:se=-.04770928980587811:t[10]>29.500000000000004?se=.011221519891071544:t[0]>3853.5000000000005?se=.06365381191628273:se=.15506252245336827:t[1]>37.50000000000001?se=-.07254777021042061:se=.026514587757252385:t[308]>1e-35?se=.04115804816617256:t[10]>26.500000000000004?se=.02077721353011946:t[5]>3548.5000000000005?se=-.1280907116663952:se=-.021974774274438:t[306]>1e-35?se=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?se=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?se=-.005710865560475598:t[94]>1e-35?se=-.06751507982853555:se=.027250040757588703:t[9]>52.50000000000001?se=.07060357924595577:se=-.030297760713011795:se=-.0006005400085266517;let le;t[113]>1e-35?le=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?le=-.06996356565314456:le=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?le=-.08317707559926495:t[21]>1e-35?le=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?le=-.010538203005984922:le=.08454819465349446:t[9]>124.50000000000001?le=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?le=-.08542251249346582:t[9]>50.50000000000001?le=-.023428882537657472:le=.010042500833979073:le=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?le=.03006025206979096:t[9]>108.50000000000001?le=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?le=.04222035773042132:le=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?le=-.07209095448054853:le=.028065954981903313:le=.08714651929917122:le=-.006678820669279169:t[10]>40.50000000000001?le=.006982396294941626:le=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?le=-.09351114982645548:t[4]>3.5000000000000004?le=-.004837550129223451:le=-.08324141237464677:t[303]>1e-35?le=.10703037493990825:t[9]>156.50000000000003?le=-.10803018621648303:t[116]>1e-35?le=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?le=.10261721665006701:le=.018994509090668264:le=.0011244262442038839;let qe;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?qe=-.08404263465005328:t[0]>3682.5000000000005?qe=.041259223920298876:t[1]>29.500000000000004?qe=-.09541257493441671:qe=.001482192721625409:qe=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?qe=-.08268996098437432:t[230]>1e-35?qe=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?qe=-913218977737457e-19:t[4]>10.500000000000002?qe=-.056334165674005156:t[127]>1e-35?qe=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?qe=-.04231200150318989:t[10]>42.50000000000001?qe=.10182973257894812:qe=.015934763950068445:qe=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?qe=-.041117068322885315:qe=.1167767830037126:qe=.13611206992387337:t[10]>41.50000000000001?qe=-.07120286010564107:qe=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?qe=-.07702290997669524:t[198]>1e-35?qe=.08776558554437136:qe=-.008290740324975692:t[2]>32.50000000000001?qe=.07198457624219955:qe=.005463113714361629:qe=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03295785445437507:qe=.15140250150674536:qe=-.035613213948910254:t[186]>1e-35?qe=.06849425535860769:t[96]>1e-35?qe=.06028225812727254:qe=-.007582543288662308;let Be;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Be=.08396556264106572:Be=-.0562516995099192:Be=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Be=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Be=.0052017514017035915:Be=-.11194119432743639:Be=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Be=-.025692451287403446:Be=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Be=-.11892250746801664:t[10]>22.500000000000004?Be=.07548493166973796:Be=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Be=.13750699058082427:t[18]>1e-35?Be=.06535408879552801:Be=-.054118179035040674:Be=.1344282838979622:t[0]>3982.5000000000005?Be=-.10409582202467015:t[19]>1e-35?Be=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Be=.012705935670766466:Be=.14149359442527545:Be=-.047977876173706004:t[20]>1e-35?Be=.057945228080337946:t[0]>3642.5000000000005?Be=-.008726535792122467:Be=-.08424769891378858:t[34]>1e-35?Be=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Be=.01196849566739346:Be=.1614642278429876:Be=-.043022338150701625:t[3]>5.500000000000001?Be=-.03907848255033881:Be=.018280601026175593:Be=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let je;t[120]>1e-35?je=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?je=-.042799574885345304:je=.07412430171193245:je=-.11248270469336048:t[193]>1e-35?je=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?je=.028911612178122104:je=.12326369727728437:t[0]>4091.5000000000005?je=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?je=.1159839898100149:je=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?je=-.0216343737351583:je=-.1220272260878369:t[2]>18.500000000000004?je=.09152924475072398:t[8]>55.50000000000001?je=.039508716651005665:je=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?je=.06793009902674053:je=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?je=-.04391068849624096:je=.04009967593394672:t[8]>1085.5000000000002?je=-.024773826356034825:je=-.13919707884246582:je=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?je=-.11567917501901476:je=-.006813640337684114:t[3]>7.500000000000001?je=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?je=-.001754586408351048:je=-.055422422450722056:je=-.06090032532532226:t[0]>5269.500000000001?je=.11787981735983527:je=-.00198119768540783:je=.00210412924303036;let tt;t[294]>1e-35?t[10]>50.50000000000001?tt=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?tt=-.06063239096209816:tt=.03317022411417386:tt=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?tt=-.013608609329298802:tt=.09078000157330264:t[99]>1e-35?tt=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?tt=-.07536137260189814:tt=.006253266595455118:t[10]>28.500000000000004?tt=-.006106041147592768:t[9]>156.50000000000003?tt=-.11828932797811101:t[94]>1e-35?tt=-.02566078479505714:t[303]>1e-35?tt=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?tt=-.08401252789168523:t[5]>4244.500000000001?tt=.026372887658499107:t[1]>16.500000000000004?tt=-.027836756345634026:tt=.09205362097909099:tt=.00934612788718244:t[203]>1e-35?tt=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?tt=-.09580979052540028:t[1]>50.50000000000001?tt=-.06402211827281554:tt=.08342858760095972:t[2]>36.50000000000001?tt=.008114897658204584:t[92]>1e-35?tt=.09541587072672864:tt=-.022342147210555434:tt=-.01660492519175128:tt=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?tt=.15846731118501817:tt=.039498507912023195:t[245]>1e-35?tt=.07008718676813333:tt=.0019806389728814727;let pt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?pt=-.01192072916082109:pt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?pt=.06874032717466054:t[4]>40.50000000000001?pt=-.07752510020707537:t[1]>76.50000000000001?pt=-.09944032260703917:t[8]>1381.5000000000002?pt=-.054466635810800745:t[1]>32.50000000000001?pt=.05974084520839573:pt=-.0384718740755954:pt=-.11374190719134032:t[0]>2151.5000000000005?pt=-.13703645155803298:pt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?pt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?pt=.013539805885738608:pt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?pt=.09941880179344399:pt=-.01608127391210995:pt=.08025226531247417:t[9]>67.50000000000001?pt=.13525448212444113:t[6]>61.50000000000001?pt=-.05511099182158894:t[94]>1e-35?pt=-.06821509831783572:t[128]>1e-35?pt=.11361314817714643:pt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?pt=-.09954181329804547:t[197]>1e-35?pt=.10102833149755386:t[188]>1e-35?pt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?pt=-.03781554214742005:pt=.09927933385592314:pt=-.020006000056720083:pt=-.10520473615957895:pt=-.12006990846253787:pt=-.00026111570975317574;let Mt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Mt=-.019188245509744628:Mt=-.13354864350075848:t[0]>2461.5000000000005?Mt=.051885477468354396:Mt=-.0833581968852119:Mt=.08233441701532287:Mt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Mt=.09926337893072812:Mt=-.027753610497327715:t[0]>1972.5000000000002?Mt=-.09780045823152517:Mt=.032380915168504935:Mt=.11502632261226381:t[17]>1e-35?Mt=-.06094965899579662:t[10]>40.50000000000001?Mt=-.07500475582440802:Mt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Mt=-.09584538995220808:Mt=-.00908705814304442:Mt=.03203281520813893:t[10]>49.50000000000001?Mt=-.03146271513986384:t[2]>63.50000000000001?Mt=.13172001315536286:t[224]>1e-35?Mt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Mt=.09521549382082259:Mt=-.04414925613522197:t[0]>1847.5000000000002?Mt=-.09118580379557353:Mt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Mt=.03525144509943896:Mt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Mt=-.04766112322938157:t[2]>10.500000000000002?Mt=.0728516504357201:Mt=-.05049625965272536:Mt=-.10868663055825774:Mt=.0005382613419948969;let Kt;t[147]>1e-35?t[1]>53.50000000000001?Kt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Kt=-.030504020655417463:Kt=.07102458639110094:Kt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Kt=.055304563442710876:t[1]>53.50000000000001?Kt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Kt=-.1568835288372895:Kt=-.0279829124400056:Kt=.04493843959601833:Kt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Kt=-.054133834303687026:t[9]>48.50000000000001?Kt=.11263810289007213:t[9]>9.500000000000002?Kt=-.02202034562838259:t[4]>45.50000000000001?Kt=-.03410927569045158:Kt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Kt=-.029687297407295893:Kt=.10673602850001934:t[4]>42.50000000000001?Kt=.0036275562945108117:Kt=-.0760789221330622:Kt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Kt=.08274426793676076:Kt=-.07076234425516396:Kt=.13890177606150175:Kt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Kt=-.09250637750836187:Kt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Kt=-.01897867921812603:Kt=.04890781705365262:Kt=-.11569892307597907:t[2]>106.50000000000001?Kt=.09032697440623969:Kt=.00047935919155035045;let Ot;t[115]>1e-35?Ot=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ot=-.10131179514695865:t[8]>938.5000000000001?Ot=.10203729808015481:Ot=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ot=.03574015165562999:Ot=-.07763042506449493:Ot=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ot=.0665706259130275:Ot=-.06586817559309924:Ot=.11925564412287476:Ot=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ot=.046017146627455346:Ot=-.08623321630086885:t[8]>1765.5000000000002?Ot=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ot=.11143827902215087:Ot=-.01817808730473413:Ot=.16980985030210127:Ot=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ot=.010168994879727824:Ot=-.09099594488792513:t[9]>1.5000000000000002?Ot=.0533459678147928:Ot=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ot=-.062346959148773695:t[1]>47.50000000000001?Ot=-.0021578343835599316:t[2]>27.500000000000004?Ot=.19567373210166172:Ot=.07851555379116423:t[18]>1e-35?Ot=.03711549097804649:t[8]>359.50000000000006?Ot=.012492346746905587:t[4]>20.500000000000004?Ot=.047511695735697544:Ot=-.07999269063948773:Ot=6802045404471004e-20;let Wr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Wr=.0011484728213539738:Wr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Wr=-.09828874964938798:t[8]>1586.5000000000002?Wr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Wr=.011938269926919522:Wr=.17541983715953954:t[19]>1e-35?Wr=.023002786011088672:Wr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Wr=.06508934844183291:Wr=-.10168553534835639:Wr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Wr=.021140806225203937:Wr=-.1167833342453639:t[2]>33.50000000000001?Wr=.13163585734056618:Wr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Wr=.06314479201263888:Wr=-.09639088327091713:t[10]>29.500000000000004?Wr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Wr=40577156464836036e-21:Wr=.12322387121810757:Wr=-.03697224045046014:t[1]>22.500000000000004?Wr=.016474835887320276:Wr=.16919298733903063:Wr=.07633203630214054:Wr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Wr=.14150493354700563:Wr=-.01831155354975749:t[1]>28.500000000000004?Wr=-.07952557178685365:t[10]>28.500000000000004?Wr=.0665695554984927:Wr=-.053640139319277094:Wr=.0004754840665898665;let Rr;t[76]>1e-35?Rr=-.06814884255939921:t[179]>1e-35?Rr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Rr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Rr=.004193658608848433:Rr=-.1066968975983452:t[8]>302.50000000000006?Rr=.05476730110440451:Rr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Rr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Rr=.013555772109446666:Rr=-.09856116699770784:Rr=.0284329611813383:t[2]>52.50000000000001?Rr=.04008708444763762:t[9]>29.500000000000004?Rr=-.1289599546008197:Rr=-.018566534248335896:t[8]>747.5000000000001?Rr=.02236484980076122:Rr=.1148871655157582:t[8]>3084.0000000000005?Rr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Rr=.03164751204281298:Rr=.11752140436184891:t[9]>42.50000000000001?Rr=-.07180559595410106:t[22]>1e-35?Rr=.09325040416256854:Rr=-.016041122807939914:Rr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Rr=-.010718250133458515:Rr=.09818827994853763:Rr=.010180038981174032:Rr=-.039472162599295535:t[9]>170.50000000000003?Rr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Rr=-.08674788057474031:Rr=.02077653508548371:Rr=-.0003536561382007414;let sn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?sn=.018337297491457794:sn=-.05926206443180149:sn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?sn=.10747078482128616:t[126]>1e-35?sn=-.10550625192391357:t[7]>71.50000000000001?sn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?sn=.1317396472229434:sn=-.025035791351328947:sn=-.0728334305864372:t[8]>963.5000000000001?sn=.023642201723096064:sn=.183010326734258:t[128]>1e-35?sn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?sn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?sn=-.1088876900335281:sn=.02758317023002635:sn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?sn=-.01928020117446408:sn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?sn=.07893723375925096:sn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?sn=-.10301657587280551:sn=.005787463140224318:sn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?sn=-.019296977889522397:sn=-.07274529751752634:t[1]>30.500000000000004?sn=-.050368901143148286:sn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?sn=.0015332402792773946:sn=.09930153676749967:sn=-.06370844564357069:sn=.00042272155209927616;let ve;t[71]>1e-35?t[4]>17.500000000000004?ve=.12586844370423247:ve=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?ve=-.08474891624263797:t[8]>125.50000000000001?ve=.08125086980439704:ve=-.04082085238068532:t[0]>3863.5000000000005?ve=.020481535807469208:ve=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?ve=-.019110200161573936:ve=-.12387719685855114:t[0]>1102.5000000000002?ve=.08376595701957407:ve=-.031821919580524834:t[9]>4.500000000000001?ve=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?ve=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?ve=.1349841206807871:ve=.011864053595560297:t[1]>41.50000000000001?ve=-.08203662486612544:t[2]>18.500000000000004?ve=-.009541865642346947:ve=.08345043168501759:t[2]>10.500000000000002?ve=-.09585031818030947:ve=.019432330487099865:ve=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ve=.11951517733981365:ve=-.016651014735738538:t[1]>28.500000000000004?ve=-.07410922545030711:t[10]>28.500000000000004?ve=.05886430683844788:ve=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?ve=.04802269879144705:ve=-.026208212831796737:t[4]>45.50000000000001?ve=-.03227476944664786:ve=.05124575625622705:ve=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Tt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Tt=-.10504730480402079:t[5]>3341.5000000000005?Tt=.11087894671081754:Tt=-.0406668834674614:Tt=.03308382165616109:t[8]>104.50000000000001?Tt=-.10431436764549162:Tt=.0073928337244891455:t[4]>34.50000000000001?Tt=-.10571751512748416:Tt=-.006081128814142983:t[13]>1e-35?Tt=.1299673566095023:t[4]>60.50000000000001?Tt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Tt=.04857126072645073:Tt=-.03431365358104773:t[4]>16.500000000000004?Tt=.04101865986596709:Tt=.16480274980378218:t[10]>26.500000000000004?Tt=.03673978504199255:t[10]>9.500000000000002?Tt=-.10996402743800027:t[308]>1e-35?Tt=.0553693735082498:Tt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Tt=.010902983761213922:Tt=.1325118659895645:Tt=-.064362945508595:t[1]>66.50000000000001?Tt=.033416767779331176:Tt=-.054080316225040496:t[42]>1e-35?Tt=-.07762364337810815:t[10]>1089.5000000000002?Tt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Tt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Tt=.0220102041325908:Tt=-.06516708740003069:Tt=.012833498905748267:t[224]>1e-35?Tt=-.007038418272997865:Tt=.00037666304316290967;let ir;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ir=.07554189644995735:ir=-.052089349455904946:ir=-.10148206848169845:t[113]>1e-35?ir=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?ir=.07172653627995676:ir=-.07602959317610998:ir=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ir=-.0399322883690891:ir=.06523495517476098:ir=-.10358715295743802:t[193]>1e-35?ir=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?ir=.015928764772252406:ir=.1341513061552287:ir=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?ir=-.033592997607280156:ir=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?ir=-.08402551858097379:ir=.017401984506038796:t[1]>25.500000000000004?ir=.13337205393591278:ir=-.01160208350090984:ir=.06708317942315471:t[8]>227.50000000000003?ir=-.08486943882418681:ir=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?ir=-.10496268177586783:ir=-.020921489532370493:ir=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?ir=.11639296062157028:ir=-.004275784356569115:t[32]>1e-35?ir=-.07297384970166025:ir=.006026841626381599:ir=.002034611134960428;let Xt;t[248]>1e-35?Xt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Xt=-.06455513326540585:t[1]>29.500000000000004?Xt=.07718474591552532:t[4]>7.500000000000001?Xt=.040139336931404826:Xt=-.09685734690563386:Xt=.00015327283570347363:t[9]>88.50000000000001?Xt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Xt=-.04077257804338707:Xt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Xt=.03778141591008941:Xt=-.06459919920634845:Xt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Xt=.14063930759326346:t[0]>179.50000000000003?Xt=.07287482250668585:t[8]>1180.5000000000002?Xt=-.14419393112726253:t[10]>28.500000000000004?Xt=-.07993142770099469:t[17]>1e-35?Xt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Xt=.05527969663610186:Xt=-.10824385941441346:t[3]>11.500000000000002?Xt=.12358502961047915:Xt=-.017509147119622873:t[0]>74.50000000000001?Xt=-.014907705458730486:t[8]>95.50000000000001?Xt=-.02225118168342062:Xt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Xt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Xt=.04962819555610421:Xt=-.07213577821855309:Xt=.09139529824708481:t[19]>1e-35?Xt=.013439401088345224:Xt=-.049274647207292056:Xt=.10531673719686951;let br;t[40]>1e-35?t[0]>1937.5000000000002?br=-.06421671152073961:br=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?br=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?br=-.03520420769287065:t[8]>1085.5000000000002?br=-.019817352506127633:br=.11444439424520964:br=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?br=-.010490117519863269:br=.08104430117757461:t[121]>1e-35?t[243]>1e-35?br=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?br=.06619344145920268:t[0]>4091.5000000000005?br=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?br=.10016091391222309:br=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?br=-.019511460451434884:br=-.11643672465055221:t[2]>18.500000000000004?br=.07848228087333317:t[8]>55.50000000000001?br=.032583027899956235:br=-.11209832692153521:t[11]>1e-35?br=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?br=-.09996887746328006:t[9]>2.5000000000000004?br=.02157682011863397:br=-.05247727848991843:br=.07409150201483244:t[1]>38.50000000000001?br=-.11378466075449625:t[224]>1e-35?br=-.10741749127732923:t[1]>26.500000000000004?br=.07343136534146562:br=-.07013573628594773:t[25]>1e-35?br=-.04626669734164317:br=.05518333197956482:br=.00032434010867555516;let lr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?lr=.026313251010808853:lr=-.08997339150292381:lr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?lr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?lr=.0905155504503746:t[8]>1049.5000000000002?lr=-.062312558183394054:t[8]>719.5000000000001?lr=.09583836191410239:t[0]>3719.5000000000005?lr=-.0778097309430818:lr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?lr=-.12920865648544927:t[0]>2699.5000000000005?lr=-.07086587879041864:lr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?lr=-.11377786322600797:lr=-.009486325820117998:t[1]>55.50000000000001?lr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?lr=-.07938291201004219:t[2]>36.50000000000001?lr=.01520046732530246:lr=.13649854049662832:lr=-.07145015938528873:t[8]>407.50000000000006?lr=-.00350257360822279:lr=.11332047082193297:lr=-.10060624458629897:lr=.05429496612497562:t[8]>1446.5000000000002?lr=.006073419197482838:lr=-.08718676350883998:lr=-.11532497988252638:lr=.10766270463068293:t[34]>1e-35?lr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?lr=-.0004109812623829506:lr=.021601073497455662:lr=-7343540098965853e-20;let tr;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?tr=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?tr=.05995640200798119:t[0]>3443.5000000000005?tr=-.14698883458733583:tr=-.030039164579240187:t[189]>1e-35?tr=-.06086763220538141:t[1]>86.50000000000001?tr=-.05096727866142538:t[4]>64.50000000000001?tr=.11240554253834577:t[4]>45.50000000000001?tr=-.030279760168394117:t[6]>45.50000000000001?tr=.10161088917815142:t[10]>77.50000000000001?tr=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?tr=-.06672020005240323:tr=.08831457502630258:t[8]>2592.5000000000005?tr=-.052617701047376654:t[10]>29.500000000000004?tr=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?tr=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?tr=-.064099222705728:tr=.044332487521538365:t[0]>2882.5000000000005?tr=.031099546885005065:tr=.12938467051623853:t[0]>4221.500000000001?tr=-.0928676413498701:t[9]>30.500000000000004?tr=-.05781824812803708:tr=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?tr=-.06648105454098469:tr=.05985487552383097:tr=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?tr=.05282385499619401:t[1]>66.50000000000001?tr=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?tr=.027885690791379255:tr=-.08407126408362446:tr=.014432924125571093:tr=-9903435845205118e-20;let cr;t[76]>1e-35?cr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?cr=.013633653464240465:cr=-.10164319411983509:cr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?cr=.00632864847804078:cr=-.08393000368134668:cr=.07870508617440916:t[284]>1e-35?cr=.1092302727710421:cr=-.0025505047582483234:t[248]>1e-35?cr=.07101822393621864:t[274]>1e-35?cr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?cr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?cr=.025081789181021243:cr=-.014813325803582618:t[9]>33.50000000000001?cr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?cr=.11926990418060353:cr=.01852125513565268:cr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?cr=-.1178464984373743:t[283]>1e-35?cr=.043370859226927405:t[5]>4320.500000000001?cr=-.01103141226366587:t[8]>1104.5000000000002?cr=-.023053423988095886:cr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?cr=.000579145585864887:cr=.03389152834202143:t[128]>1e-35?cr=-.14527722052568462:t[210]>1e-35?cr=-.08915971541902741:t[7]>9.500000000000002?cr=-.03307314577076116:t[18]>1e-35?cr=-.05521712302023565:cr=.009315605032770029:cr=.0036332551852289933;let rr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?rr=-.07583539600416284:t[188]>1e-35?rr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?rr=-.011038193049597113:rr=.08154028164397753:t[1]>85.50000000000001?rr=.10259361975201933:rr=.011640408330521594:rr=-.00023319159023748508:t[92]>1e-35?rr=.13771692859530546:rr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?rr=.09967230141007705:t[30]>1e-35?rr=-.08888529037551285:rr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?rr=.08284665960761373:rr=-.029292565021289504:t[7]>7.500000000000001?rr=-.09945093355204493:rr=-.008381393701708593:t[20]>1e-35?rr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?rr=.07585582641438211:t[8]>284.50000000000006?rr=-.029387993239886723:rr=.07716738177321587:t[1]>18.500000000000004?rr=.026745348497993746:rr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?rr=.02337306890530338:rr=-.10390355904767366:rr=.07390521199638532:rr=-.06788247515155237:rr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?rr=-.06360325615644084:rr=.04342192339836601:rr=-.10598779152030145:rr=.05253384605768211;let Dr;t[3]>7.500000000000001?t[157]>1e-35?Dr=-.07514182877923786:Dr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Dr=.028692053800951845:Dr=.14081686716133598:Dr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Dr=.0037139292567243084:Dr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Dr=.01202688580305612:Dr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Dr=.043935495082738626:Dr=-.05639305759669704:t[247]>1e-35?Dr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Dr=.10331836202616368:Dr=.0006926658459781341:t[96]>1e-35?Dr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Dr=-.0741403257305367:Dr=.022900127535540854:t[7]>3.5000000000000004?Dr=.038110741403836294:Dr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Dr=-.09552842289807008:t[1]>27.500000000000004?Dr=.012505935885798007:Dr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Dr=-.1046104767723845:Dr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Dr=.023466328488582572:Dr=.11730925774586994:Dr=-.04771965631104874:Dr=.17059689880751394:Dr=-.08181850955999449:t[26]>1e-35?Dr=-.12727482696678769:Dr=-.014343123272734182;let jr;t[147]>1e-35?t[1]>53.50000000000001?jr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?jr=-.02763546051134888:jr=.06423344777499343:jr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?jr=.049825139823021586:t[7]>22.500000000000004?jr=-.01131680751379858:t[0]>2579.5000000000005?jr=-.10673674485369694:jr=-.015387212937189957:jr=.04347325151148724:t[179]>1e-35?jr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?jr=.0650355590939066:jr=-.0473332870892226:jr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?jr=.11139543329789044:t[126]>1e-35?jr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?jr=.06370903833231022:t[10]>29.500000000000004?jr=.03415223859607161:t[10]>3.5000000000000004?jr=-.07415518117873297:jr=-.0014119203473324082:jr=.12617652343819508:t[9]>41.50000000000001?jr=-.10311145857176976:t[8]>2757.5000000000005?jr=-.08106484219011428:t[7]>71.50000000000001?jr=-.09783384432091176:t[1]>88.50000000000001?jr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?jr=-.008884084501608536:jr=.061339437777743616:jr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?jr=.01526664064166223:jr=.13534828515415498:jr=-.06985484465894776:jr=.0005758961943178744;let rn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?rn=-.029152732370514342:rn=.07173628916139178:t[1]>36.50000000000001?rn=-.08859111297255318:rn=.0018030071815630785:rn=.13652461563759322:rn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?rn=-.07145140450454163:t[21]>1e-35?rn=-.07422841663493233:rn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?rn=.11864240653986852:t[3]>33.50000000000001?rn=-.08821209591953476:rn=.05706392280054726:rn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?rn=.01953613016837112:rn=-.059781039130025006:t[148]>1e-35?rn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?rn=.07207826841738371:t[202]>1e-35?rn=.08163917539410503:rn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?rn=-.06858280496900336:rn=-.1781828899516648:rn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?rn=.018232649414147116:rn=-.04419781124222661:rn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?rn=.11452368095776105:rn=-.036496437259924026:rn=-.040445338739465486:rn=.0816572651001145:rn=-.08968914517368663:rn=.0002826343082585516;let An;t[189]>1e-35?t[0]>5269.500000000001?An=-.08839493050459957:t[10]>85.50000000000001?An=.10046908365702462:t[8]>2592.5000000000005?An=-.09632233975926387:t[8]>2000.5000000000002?An=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?An=.035504970430426296:t[1]>31.500000000000004?An=-.1133764813142531:An=-.01138280942244812:t[8]>1125.5000000000002?An=.09800530246229806:An=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?An=.07316772160107896:An=-.059095014819051765:An=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?An=-.09150209066166894:t[8]>3084.0000000000005?An=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?An=-.04449234460408263:An=.05568837973347338:An=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?An=.12741077850267066:An=.007372371864985329:t[2]>39.50000000000001?An=.02295917234617787:An=.14966532083907075:t[1]>39.50000000000001?An=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?An=-.02511861881285652:t[1]>27.500000000000004?An=.08683660011672288:An=.02956214835267301:t[9]>15.500000000000002?An=-.016538805462996232:An=.04352738094981517:An=-.05561856645643868:t[9]>170.50000000000003?An=-.07996752635874248:t[179]>1e-35?An=-.09065975936933919:An=-.00042817975060427177;let Zn;t[39]>1e-35?t[4]>25.500000000000004?Zn=.03443173196222934:Zn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Zn=-.0013415395759330318:Zn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Zn=.002297618040307216:Zn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Zn=-.015297257305397608:Zn=.09651828834062742:Zn=-.06636003334371929:t[10]>11.500000000000002?Zn=.17631616138309397:t[0]>1639.5000000000002?Zn=3804386478092585e-20:Zn=-.09099296398683193:Zn=-.06874415876172972:t[0]>2151.5000000000005?Zn=-.1311264883406766:Zn=.00809052010141122:t[253]>1e-35?Zn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Zn=.045038497754638605:Zn=-.07770167665661752:Zn=-.08596294280650517:Zn=.08538655727027213:Zn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Zn=.054627956617973275:t[1]>61.50000000000001?Zn=-.11994465088415499:t[4]>8.500000000000002?Zn=.06676200239406452:Zn=-.027503148069376867:t[8]>676.5000000000001?Zn=-.10363964928357075:t[4]>8.500000000000002?Zn=-.07589816227175682:Zn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Zn=.009093153189012338:Zn=-.06119765876605404:Zn=.0004668642103528348;let Tn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Tn=-.10100794502567233:Tn=.08000205636470442:Tn=-.11945419826856896:t[113]>1e-35?Tn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Tn=.1224302423880318:Tn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Tn=.0019277012166729114:t[1]>28.500000000000004?Tn=-.054445821715687494:Tn=.045645722976713245:t[30]>1e-35?Tn=.13402660155331655:Tn=.008921176001777645:Tn=-.058547426505451076:Tn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Tn=-.13526418192218206:Tn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Tn=.0007263224246135398:Tn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Tn=-.11575657261278308:Tn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Tn=-.01995960178292952:Tn=.11216586049153021:Tn=-.10050961087149474:Tn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Tn=.10303451081526649:Tn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Tn=-.043799548968209395:Tn=-.12451444314954115:t[4]>12.500000000000002?Tn=-.03838117361958468:Tn=.06504990789767144:t[57]>1e-35?Tn=.06890006938293915:Tn=.0003914274695562949;let Kn;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Kn=.004271749009686975:Kn=-.10523878297127605:Kn=.04633982158107851:Kn=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Kn=-.08655730561951676:t[8]>919.5000000000001?Kn=-.0676453705610183:t[7]>18.500000000000004?Kn=-.027787974193650575:Kn=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Kn=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Kn=-.03473877164537313:t[8]>719.5000000000001?Kn=.10471053866934404:Kn=.008236107678382981:t[4]>57.50000000000001?Kn=.09412219478825269:t[10]>66.50000000000001?Kn=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Kn=-.040681323751002293:Kn=.06374650297561021:Kn=.12884615227401788:t[10]>5.500000000000001?Kn=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Kn=-.05474068967150784:Kn=.03744700650806603:Kn=-.07846396348680855:t[1]>42.50000000000001?Kn=.018972315810821302:Kn=.10953621007604744:t[5]>4439.500000000001?Kn=.010999776705494586:t[1]>40.50000000000001?Kn=-.12394200059775967:t[10]>2.5000000000000004?Kn=.013528093962849453:Kn=-.09222088417048682:Kn=-.12662967149701485:Kn=.09327296405849603:t[3]>99.50000000000001?Kn=-.013581954439986752:Kn=.0005526498251862075;let nn;t[187]>1e-35?t[243]>1e-35?nn=-.08392792551692502:t[10]>68.50000000000001?nn=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?nn=-.0825306209711224:nn=.049559996084532945:nn=-.1064938580886302:nn=.03353240732240275:nn=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?nn=.16966001471529374:t[1]>57.50000000000001?nn=-.005772777673676247:nn=.09383677041525058:t[8]>747.5000000000001?nn=.054068175469351235:nn=-.049968216310277036:t[8]>753.5000000000001?nn=-.0679383555784074:t[4]>8.500000000000002?nn=-.059757341189735386:nn=.05701083682780414:nn=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?nn=.05820296128730006:nn=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?nn=.15340611616954566:nn=.04385036188666874:t[0]>4449.500000000001?nn=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?nn=.004840354641006495:nn=.09967827580276283:nn=.11605363537391578:t[9]>19.500000000000004?nn=-.0735831692725717:nn=.019973331823355176:t[306]>1e-35?t[149]>1e-35?nn=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?nn=-.02442182361342386:nn=.10334853004243093:nn=-.030431948680167104:nn=-956078595250818e-19;let Gn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Gn=-.040232505718244854:t[0]>3030.5000000000005?Gn=.0634109586813073:Gn=-.04043617034245621:Gn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Gn=-.007859096946435131:Gn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Gn=.05515771679628051:Gn=-.04214471312668263:Gn=-.09589322222261765:t[193]>1e-35?Gn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Gn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Gn=-.08152604001147906:t[11]>1e-35?Gn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Gn=.13100930780107503:t[10]>25.500000000000004?Gn=.05921074710011526:Gn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Gn=.0009447118243153454:Gn=-.09820565036865991:Gn=.057146909749745546:t[0]>2115.5000000000005?Gn=-.12331216726611678:Gn=.007281983677694285:t[2]>56.50000000000001?Gn=.012310154675612615:Gn=-.08873665774670461:t[6]>25.500000000000004?Gn=.134708740821879:t[9]>5.500000000000001?Gn=-.0805901581148979:t[224]>1e-35?Gn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Gn=.10842593386554122:t[2]>13.500000000000002?Gn=.06466798320378395:Gn=-.08578130788886655:Gn=-.03590892078300114:Gn=.0003499894043880708;let Pe;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?Pe=.10839808814624702:Pe=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?Pe=-.007478368069393829:Pe=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?Pe=.04035247751736232:t[0]>4255.500000000001?Pe=-.1310865624507367:t[0]>4004.5000000000005?Pe=.06647367311982634:Pe=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?Pe=-.011618902907510411:Pe=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?Pe=.09356028223727986:Pe=-.03811765057032162:Pe=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?Pe=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?Pe=.1146142460964847:t[1]>62.50000000000001?Pe=-.09679869865322362:t[9]>71.50000000000001?Pe=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?Pe=-.039046426387852974:Pe=.04558778688367152:Pe=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?Pe=.03261697816211156:t[15]>1e-35?Pe=.02586252542264368:t[2]>14.500000000000002?Pe=-.016420452667484604:Pe=-.1011799626006976:Pe=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?Pe=.010193588102560583:Pe=.11748729525930773:Pe=-.04468162226743652:Pe=-.028365274393617957:t[71]>1e-35?Pe=.05115139346588793:Pe=-.0001510425316936658;let Y;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?Y=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?Y=.020637047900190317:Y=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?Y=-.04632587527094407:Y=.08603684785510396:Y=-.05101401015448496:Y=.025466432054358498:Y=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?Y=.020385355430046367:Y=.12032592051335252:Y=-.012387370292173013:t[2]>23.500000000000004?Y=-.12568545484492677:Y=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?Y=.043528764484784536:Y=.14352071657196003:Y=-.009332833816977268:Y=.11186782227735846:Y=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.05649104643152564:Y=.03884200719305747:t[42]>1e-35?Y=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Y=-.04103416502526736:Y=.04881823954656287:t[4]>15.500000000000002?Y=.009342724662897898:t[0]>3969.5000000000005?Y=-.025637309961309498:Y=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?Y=-.08185697075265091:t[0]>2215.5000000000005?Y=.030063975892297354:t[0]>807.5000000000001?Y=-.03924325550733229:Y=.0415330999189793:Y=-.00024374664461674863;let Ce;t[3]>7.500000000000001?Ce=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ce=.025798416259686565:Ce=.13251610353146012:Ce=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?Ce=-.11098564237775424:Ce=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?Ce=.15347826616466054:t[3]>4.500000000000001?Ce=.10379320730958941:Ce=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?Ce=.03159791088468647:Ce=-.10612873364104258:Ce=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?Ce=-.02335760775001469:Ce=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?Ce=-.011164334474672973:Ce=-.06594044410501655:t[207]>1e-35?Ce=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?Ce=-.01725821503981916:Ce=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?Ce=-.04226531631656534:Ce=-.14409800530171432:Ce=-.03245576341206398:t[8]>4214.500000000001?Ce=.0895409165534886:t[247]>1e-35?Ce=-.06506383629143335:t[118]>1e-35?Ce=-.07214270121257443:t[8]>546.5000000000001?Ce=-.004385020865473831:Ce=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?Ce=.046278501133958524:Ce=-.030835570926968044:t[0]>493.50000000000006?Ce=-.12794504651610425:Ce=.009415039807550776;let Ie;t[304]>1e-35?Ie=-.04717777269217453:t[76]>1e-35?Ie=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Ie=-.09648224457374217:t[132]>1e-35?Ie=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Ie=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Ie=.10838431695638147:t[230]>1e-35?Ie=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Ie=.050071316251979:Ie=-.006356941111525215:t[6]>8.500000000000002?Ie=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Ie=.10217402850540398:Ie=-.048840949025349197:Ie=-.03668313197909846:t[7]>39.50000000000001?Ie=-.0562642841496003:t[10]>2.5000000000000004?Ie=.09749777369987417:Ie=-.04848223121417616:t[0]>5453.500000000001?Ie=.08316648226133942:Ie=-.0261979698267618:t[212]>1e-35?Ie=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Ie=.04837009746506856:Ie=-.09184360565631328:Ie=.0032411047845613606:t[0]>4733.500000000001?Ie=.0977378556864798:Ie=.010776545559325588:Ie=-.012483310473120218:Ie=-.049284121449103935:Ie=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Ie=-.08380361910948711:Ie=.07375088778585813:Ie=-.1084864186071348:Ie=.0007819503469605476;let F;t[7]>17.500000000000004?t[115]>1e-35?F=.08741852531696623:t[167]>1e-35?F=.10078975495600809:F=-.0018324767784017562:t[290]>1e-35?F=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?F=.1379733311640402:F=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?F=-.09360083033774169:F=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?F=-.015599362579530679:t[0]>4593.500000000001?F=-.12029549262691491:F=-.018917032256501397:F=.04632831686576592:F=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?F=-.05894883236412263:F=.05213944998315824:F=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?F=.07577412405680808:F=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?F=-.0277076900736147:t[1]>65.50000000000001?F=-.023587471585763506:F=.10184896592433082:F=-.057699270527916825:F=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?F=.06566902102799584:t[10]>25.500000000000004?F=-.07033633753181047:F=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?F=-.08108035861059537:F=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?F=-.12431182772561139:F=.01886235886984271:F=.0025579594894418116;let D;t[8]>2915.5000000000005?t[101]>1e-35?D=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?D=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?D=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?D=.0687641681341721:t[10]>102.50000000000001?D=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?D=-.06762578396473291:t[10]>65.50000000000001?D=-.05226727783610509:t[282]>1e-35?D=.09911438410640917:t[19]>1e-35?D=.06915156336429933:D=-.006565637886508241:D=-.08344300251849307:D=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?D=.19428463865406298:D=.016073883020956765:t[13]>1e-35?D=.06864077097923665:D=-.01388867527034731:t[0]>1847.5000000000002?D=.004655280608161356:t[1]>40.50000000000001?D=.031406054057765996:D=.12798062439212832:D=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?D=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?D=-.0706095614785733:D=.04227164041372561:D=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?D=-.07139533369873902:D=.008952586782921625:D=.06086212582180936:D=-.0816938490403437:D=-.051224901945956025:D=-.10525399124186095:D=.000270924147208224;let ee;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ee=.029186512383291244:t[7]>1.5000000000000002?ee=-.14984127276725573:t[1]>40.50000000000001?ee=.032757060730648144:ee=-.07675575422749602:t[6]>8.500000000000002?ee=.10599766037117893:ee=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ee=-.051394622947855385:ee=.03237141302699347:ee=.12526173027943244:ee=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ee=-.07383912482657777:t[0]>5147.500000000001?ee=.07008813937042091:t[10]>38.50000000000001?ee=-.06779203808365307:ee=-.013782769999524498:ee=.0880038869117715:ee=-.12846294176070952:t[281]>1e-35?ee=-.06810806903850834:t[10]>227.50000000000003?ee=-.08937977001661111:t[10]>130.50000000000003?ee=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ee=.011036530162093841:ee=-.11500797478569702:ee=.03702229366129399:ee=.07242026683784307:t[189]>1e-35?ee=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ee=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ee=-.02608892716555304:ee=.09609599320761308:t[9]>105.50000000000001?ee=-.06848127135991534:ee=.0023675721254089715:t[86]>1e-35?ee=-.11049635625500497:ee=-.004847764219432233;let ge;t[125]>1e-35?t[0]>3969.5000000000005?ge=-.09462233499115416:ge=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ge=-.030700661288166148:ge=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ge=.03149547314036763:ge=-.08166208257451366:t[0]>5850.500000000001?ge=-.10228136324773157:t[102]>1e-35?ge=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ge=.01782894842128785:t[13]>1e-35?ge=.002680190260979968:ge=.1773965720476949:t[2]>72.50000000000001?ge=.09090831938627947:t[1]>59.50000000000001?ge=-.12297206702816128:t[0]>4977.500000000001?ge=.09899015653118268:ge=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ge=-.0675900954187773:ge=.012336403425364092:ge=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ge=-.02671721777458802:ge=-.09242452991958029:t[284]>1e-35?ge=-.08585691288582491:ge=.013332890564324447:t[4]>14.500000000000002?ge=-.005245022074799553:t[23]>1e-35?ge=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ge=-.09289852307936758:t[116]>1e-35?ge=-.09686573010015055:t[8]>804.5000000000001?ge=.03812547148215318:ge=.005162744968176633:t[9]>43.50000000000001?ge=-.059246106396159376:ge=.050370113808135275:ge=.000794041852811028;let _e;t[3]>7.500000000000001?_e=.0004981426543104341:t[9]>114.50000000000001?_e=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?_e=-.019061766497948867:_e=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?_e=-.006044199577160493:_e=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?_e=.11486607015912494:t[9]>16.500000000000004?_e=-.08686820858087294:_e=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?_e=-.022230207980026437:_e=.1056683690528792:_e=-.05859530800943035:_e=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?_e=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?_e=-.05177544573528314:_e=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?_e=.15159657923771555:_e=-.0060542654587671055:t[9]>5.500000000000001?_e=-.042808028205051786:t[1]>48.50000000000001?_e=-.010449538258110742:_e=.10026907521968294:_e=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?_e=-.02272452389409874:_e=-.11202691218244319:t[5]>1809.5000000000002?_e=-.04460413584255906:_e=.08196329474205256:t[10]>69.50000000000001?_e=.10221481166238167:_e=.0004063052701699382:t[243]>1e-35?_e=-.07563941678849846:t[18]>1e-35?_e=.02563513231103432:_e=-.004740081147303786;let ut;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ut=.057446442918106:ut=-.04404018270156349:ut=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ut=-.05930486238817954:t[1]>29.500000000000004?ut=.06955866121256543:t[8]>597.5000000000001?ut=-.06538593556505168:ut=.06212512595497445:ut=.00021102929959182257:t[9]>90.50000000000001?ut=.0958061289119631:t[102]>1e-35?ut=.07172059675638813:t[1]>47.50000000000001?ut=-.03879798603977766:t[297]>1e-35?ut=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?ut=.003805910996312012:ut=.09304295674749524:t[11]>1e-35?t[18]>1e-35?ut=.11252376801858695:t[288]>1e-35?ut=-.10293901912180432:ut=.014669268837893872:t[1]>42.50000000000001?ut=-.05988274123836837:t[145]>1e-35?ut=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?ut=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?ut=-.03366718308159971:ut=.11936550608549797:t[1]>31.500000000000004?ut=-.07454716789539667:ut=.027859650621164217:t[10]>10.500000000000002?ut=-.11806374092321247:ut=-.03506042229223101:ut=-.0007080765837654515:t[10]>6.500000000000001?ut=-.028077713664996503:t[2]>7.500000000000001?ut=.15803724124216814:ut=.0351381284833169:ut=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let zt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?zt=-.06563670567578264:zt=.067656954313663:zt=-.10388217548685377:t[8]>2302.5000000000005?zt=.07190621943790435:t[4]>67.50000000000001?zt=.060020507643618604:t[4]>38.50000000000001?zt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?zt=-.06568134366461277:t[8]>1075.5000000000002?zt=-.004768057709758692:zt=.11785959165999467:zt=-.05080221682879267:zt=.14814206127494542:zt=-.07241946332311736:t[253]>1e-35?zt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?zt=-.02471195342450034:zt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?zt=-.10741850739482771:zt=.010051635824944:zt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?zt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?zt=-.08992396138178163:zt=.010944365997007212:zt=.06221307021813793:zt=.1286024087559141:t[127]>1e-35?zt=.06568148624531012:t[10]>40.50000000000001?zt=-.07567979134643352:t[5]>5647.500000000001?zt=.07594672895572069:zt=-.018158016446439187:t[6]>55.50000000000001?zt=.009293422430111872:t[4]>45.50000000000001?zt=-.017749818406964022:t[2]>46.50000000000001?zt=.01714136511113982:zt=-724762291423549e-19;let Zt;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?Zt=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?Zt=.07084726276890757:Zt=-.11232323677722932:Zt=.04812773089510436:Zt=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?Zt=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?Zt=.0879462816013881:Zt=-.002966662093626573:t[306]>1e-35?Zt=-.04588085188342676:Zt=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?Zt=-.006600332774461143:Zt=.1272481351557754:Zt=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?Zt=.011884312066620044:Zt=.11678751052403374:t[4]>8.500000000000002?Zt=.03627129613273813:Zt=-.12132783497902287:Zt=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Zt=-.06830131718398992:t[0]>5147.500000000001?Zt=.062360406249609306:t[4]>4.500000000000001?Zt=-.013162203864592055:Zt=-.07153029184927609:Zt=.07628618062271557:Zt=-.12085065687320373:t[190]>1e-35?Zt=-.045816889524231186:t[137]>1e-35?Zt=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?Zt=.025895337822752502:Zt=-.06503949350616421:t[10]>227.50000000000003?Zt=-.09989456525790491:t[10]>130.50000000000003?Zt=.08616651057030683:Zt=.0001234981796706021;let Yt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Yt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Yt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Yt=-.141732381961068:Yt=-.0317152307496497:Yt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Yt=.12191801556691254:Yt=-.0003444689085397977:Yt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Yt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Yt=-.05676033995381961:Yt=.10933961076803381:t[4]>26.500000000000004?Yt=-.11667582544549814:t[8]>1765.5000000000002?Yt=.032174455312047705:Yt=-.0755016390126608:t[293]>1e-35?Yt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Yt=.026571311956824436:t[15]>1e-35?Yt=.06175459479851121:Yt=-.018778084411148754:t[9]>40.50000000000001?Yt=-.09420232889965811:Yt=-.004578248021263184:t[2]>1.5000000000000002?Yt=.005453714644971445:Yt=-.03907138175699279:Yt=-.055296364182154736:t[23]>1e-35?Yt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Yt=-.09358146510580179:Yt=.060524657996178094:Yt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Yt=-.12698331085931538:Yt=.006059605604079918:t[2]>196.50000000000003?Yt=-.09451315810804783:Yt=.0011390147031687425;let bt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?bt=.05517359070460923:bt=-.04758751221404857:bt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?bt=.1040436595565776:t[9]>21.500000000000004?bt=.04032250517675179:t[107]>1e-35?bt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?bt=.1192453009230486:t[1]>51.50000000000001?bt=.0443376336292195:bt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?bt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?bt=-.08999822408398037:bt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?bt=-.061850439226075:bt=.08849196353361093:bt=.10536348167793089:t[92]>1e-35?bt=.04894947712119185:t[9]>16.500000000000004?bt=.05900227903883853:t[9]>5.500000000000001?bt=-.11946594348916476:bt=-.03652096348071964:t[1]>41.50000000000001?bt=-.07411603110840567:bt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?bt=.08493634342741495:t[11]>1e-35?bt=-.10899097825564363:bt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?bt=.08356655906359918:t[7]>25.500000000000004?bt=-.09475076526194888:t[10]>5.500000000000001?bt=-.01999406228763778:bt=.06696212545889428:t[6]>20.500000000000004?bt=.14713592661393468:bt=.0459917279002218:bt=.00027445928493734093;let yr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?yr=-.06904501553217077:yr=.05696231672035904:yr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?yr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?yr=-.011419256378538392:t[0]>3830.5000000000005?yr=.140315841503076:yr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?yr=-.04027822909411164:yr=.03176085103667189:yr=.06779515865838849:t[4]>15.500000000000002?yr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?yr=.06124039747298539:yr=-.04312732764434027:yr=.09161522761808062:yr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?yr=.11211681010488772:t[13]>1e-35?yr=.06725735814960367:yr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?yr=.11743605068905603:yr=-.011309033539148687:yr=-.07896094707523052:yr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?yr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?yr=.02836295848998302:yr=.12210680366745175:yr=-.058302317470509096:t[5]>4144.500000000001?yr=.06123341960495106:yr=-.03840046906926525:yr=-.05221474543453495:yr=.03988215485860711:yr=-.00033074684693083496;let si=Cqt(e+r+n+i+o+a+c+l+u+d+p+m+h+g+A+y+x+I+S+R+B+M+O+K+V+z+Q+U+Z+J+j+$+X+ie+ae+te+pe+Ae+Oe+Te+Je+Me+lt+_t+Et+ht+ue+Ue+ye+$e+se+le+qe+Be+xe+je+tt+pt+Mt+Kt+Ot+Wr+Rr+sn+ve+Ge+ft+Tt+ir+Xt+br+lr+tr+cr+rr+Dr+jr+rn+An+Zn+Tn+Kn+nn+Gn+Pe+Y+Ce+Ie+F+D+ee+ge+_e+ut+St+zt+Zt+Yt+bt+yr);return[1-si,si]}s(WGe,"multilineModelPredict");function Cqt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(Cqt,"sigmoid");var vqt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},jGe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function GGe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(vqt[r]??[]).some(c=>o.includes(c))}s(GGe,"hasComment");var zK=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=GGe(e,-2,r),this.rstripSecondToLastLineHasComment=GGe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},Wye=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new zK(e,n),this.suffixFeatures=new zK(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(jGe).length+1).fill(0);r[jGe[this.language]??0]=1;let n=new Array(Object.keys(tE).length+1).fill(0);n[tE[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(tE).length+1).fill(0);i[tE[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(tE).length+1).fill(0);o[tE[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(tE).length+1).fill(0);return a[tE[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function Eqt(t,e){return new Wye(t.prefix,t.suffix,e)}s(Eqt,"constructMultilineFeatures");function VGe(t,e){let r=Eqt(t,e).constructFeatures();return WGe(r)[1]}s(VGe,"requestMultilineScore");f();f();f();f();async function*rE(t,e){for await(let r of t)yield e(r)}s(rE,"asyncIterableMap");async function*zGe(t,e){for await(let r of t)await e(r)&&(yield r)}s(zGe,"asyncIterableFilter");async function*XF(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(XF,"asyncIterableMapFilter");async function*YGe(...t){for(let e of t)yield*e}s(YGe,"asyncIterableConcat");f();async function ZF(t,e,r,n){let i=$r.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Nt).updateExPValuesAndAssignments(n,i)}s(ZF,"createTelemetryWithExpWithId");function Rc(t,{turn:e,conversation:r}={},n){return ZF(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(Rc,"createTelemetryWithExpWithTurn");function eO(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},d={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(xqt(c))),a=a.extendedBy(u,d),a}s(eO,"extendUserMessageTelemetryData");function xqt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(xqt,"mapSkillResolutionsForTelemetry");function KGe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),YK(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(KGe,"createUserMessageTelemetryData");function JGe(t,e,r,n,i,o,a){let c=Iqt(r);return YK(t.ctx,o,e,r,{source:"model",turnIndex:(t.conversation.turns.length-1).toString(),headerRequestId:i,uiKind:e,codeBlockLanguages:JSON.stringify(c),mode:(t.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:t.turn.getResolvedModelId()??"unknown"},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:n},a).properties.messageId}s(JGe,"createModelMessageTelemetryData");function XGe(t,e,r,n,i,o,a){YK(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(XGe,"createOffTopicMessageTelemetryData");function ZGe(t,e,r,n,i,o,a,c,l){let u=YK(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return bqt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(ZGe,"createSuggestionMessageTelemetryData");var eVe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function tVe(t,e,r){let n=await Rc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";mf(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(tVe,"telemetryIndexCodesearch");function YK(t,e,r,n,i,o,a){let c=a??$r.createAndMarkAsIssued();if(!("messageId"in i)&&!("messageId"in c.properties)){let m=Ar();i.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let l={messageText:n,...i},u=c.extendedBy(i,o),d=c.extendedBy(l),p=Jl(r);return Dt(t,`${p}.message`,u),Dt(t,`${p}.messageText`,d,1),u}s(YK,"telemetryMessage");function rVe(t,e,r,n){mf(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(rVe,"createSuggestionShownTelemetryData");function bqt(t,e,r,n,i,o,a,c){mf(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(bqt,"createSuggestionSelectedTelemetryData");function mf(t,e,r,n,i,o){let a=o??$r.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Dt(t,i,c),c}s(mf,"telemetryUserAction");function v3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Dt(t,"engine.messages",n,1)}s(v3,"logEngineMessages");function Jl(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(Jl,"telemetryPrefixForUiKind");function Iqt(t){let e=t.split(`
`),r=[],n;for(let i=0;i<e.length;i++){let o=e[i];if(n)new RegExp(`^\\s*${n.delimiter}\\s*$`).test(o)?(r.push({languageId:n.languageId,totalLines:n.totalLines}),n=void 0):n.totalLines++;else{let a=o.match(/^(\s*)(`{3,}|~{3,})([a-zA-Z0-9_+]*)/);a&&(n={delimiter:a[2],languageId:a[3],totalLines:0})}}return r}s(Iqt,"getCodeBlocks");function nVe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(nVe,"uiKindToIntent");function uT(t){return t==="inline"?"conversationInline":"conversationPanel"}s(uT,"conversationSourceToUiKind");function iVe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};sVe(t,"round",i.extendedBy(o,a))}s(iVe,"createAgentRoundTelemetryData");function oVe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};sVe(t,"toolCall",c.extendedBy(l,u))}s(oVe,"createToolInvocationTelemetryData");function sVe(t,e,r){return Dt(t,`${Jl("agentPanel")}.${e}`,r)}s(sVe,"logAgenticEvent");function Tqt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(Tqt,"truncateContentIfNeeded");function aVe(t,e,r,n,i,o,a){let c=`${Jl(e)}.${a}`,l=o.extendedBy(r,n);Dt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=Tqt(i.currentFileContent));let d=o.extendedBy(u,n);Dt(t,`${c}.restricted`,d,1)}s(aVe,"telemetryEditSurvivalTracking");f();f();function nE(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(nE,"toString");var Sp=new vt("streamChoices"),jye=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new zye;this.tool_calls=[];this.function_call=new Vye;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new Gye),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function wqt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(wqt,"splitChunk");var Gye=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},Vye=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},zye=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},dT=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=nR(this.response);this.stats=new Yye;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Sp.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Sp.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Sp.debug(this.ctx,"chunk",a.toString());let[c,l]=wqt(r+a.toString());r=l;for(let u of c){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(d)}catch{Sp.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Sqt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Sp.error(this.ctx,"Error in response:",p.error.message):Sp.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Sp.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new jye);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let A=this.asSolutionDecision(),y=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||y){let I=g.text.join("");if(A=this.asSolutionDecision(await e(I,{text:I,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>tO(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(A.yieldSolution=!0,A.continueStreaming=!1),!A.yieldSolution)continue;let x=h.finish_reason??"client-trimmed";if(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:x,engineName:i??"",engineChoiceSource:WI(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:A.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;A.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Sp.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Sp.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>tO(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Sp.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function KK(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Sp.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Sp.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Sp.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=tO(e.solution);return JK(t,n,o,e.index,e.requestId,i,r)}s(KK,"prepareSolutionForReturn");function tO(t){let e=t.text.join(""),r=_qt(t),n=Rqt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),c=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),l=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(tO,"convertToAPIJsonData");function Sqt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Sqt,"isCopilotConfirmation");function cVe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${nE(n)}. Input: '${t}'`)}}s(cVe,"parseCallArguments");function _qt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=cVe(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(_qt,"extractToolCalls");function Rqt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=cVe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(Rqt,"extractFunctionCall");var Yye=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new Kye,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},Kye=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function XK(t,e){return t!==null&&typeof t=="object"&&e in t}s(XK,"hasKey");function hf(t,e){return XK(t,e)?t[e]:void 0}s(hf,"getKey");var uVe=Fe(ui());var qa=new vt("fetchCompletions");function nR(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(nR,"getRequestId");function E3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(E3,"getProcessingTime");function dVe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(dVe,"uiKindToIntent");var u0=class{static{s(this,"OpenAIFetcher")}};function kqt(t,e,r,n){return km(t,e,"proxy","v1/engines",r,n)}s(kqt,"getProxyEngineUrl");function ZK(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(ZK,"sanitizeRequestOptionTelemetry");async function lVe(t,e,r,n,i,o,a,c,l,u,d){let p=t.get(Io),m=kqt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},k4(e));ZK(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Dt(t,"request.sent",h);let g=Ea(),A=dVe(c);return Gv(t,m,a.token,A,i,o,u,d).then(y=>{let x=nR(y);h.extendWithRequestId(x);let I=Ea()-g;return h.measurements.totalTimeMs=I,qa.info(t,`Request ${i} at <${m}> finished with ${y.status} status after ${I}ms`),h.properties.status=String(y.status),qa.debug(t,"request.response properties",h.properties),qa.debug(t,"request.response measurements",h.measurements),qa.debug(t,"prompt:",e),Dt(t,"request.response",h),y}).catch(y=>{if(hd(y))throw Dt(t,"request.cancel",h),y;p.setWarning(hf(y,"message")??"");let x=h.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",x),h.properties.message=String(hf(y,"name")??""),h.properties.code=String(hf(y,"code")??""),h.properties.errno=String(hf(y,"errno")??""),h.properties.type=String(hf(y,"type")??"");let I=Ea()-g;throw h.measurements.totalTimeMs=I,qa.info(t,`Request ${i} at <${m}> rejected with ${String(y)} after ${I}ms`),qa.debug(t,"request.error properties",h.properties),qa.debug(t,"request.error measurements",h.measurements),Dt(t,"request.error",h),y}).finally(()=>{Y8e(t,e,h)})}s(lVe,"fetchWithInstrumentation");async function Pqt(t,e,r,n,i,o,a,c,l,u){let d=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});ZK(o,d,["messages"]),d.properties.headerRequestId=i,Dt(t,"request.sent",d);let p=Ea(),m=dVe(c),h={...lC(t)};try{let g=await Gv(t,n,a.token,m,i,o,u,h),A=nR(g);d.extendWithRequestId(A);let y=Ea()-p;return d.measurements.totalTimeMs=y,qa.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${y}ms`),qa.debug(t,"request.response properties",d.properties),qa.debug(t,"request.response measurements",d.measurements),qa.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",d),g}catch(g){if(hd(g))throw Dt(t,"request.cancel",d),g;let A=d.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",A),d.properties.message=String(hf(g,"name")??""),d.properties.code=String(hf(g,"code")??""),d.properties.errno=String(hf(g,"errno")??""),d.properties.type=String(hf(g,"type")??"");let y=Ea()-p;throw d.measurements.totalTimeMs=y,qa.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${y}ms`),qa.debug(t,"request.error properties",d.properties),qa.debug(t,"request.error measurements",d.measurements),Dt(t,"request.error",d),g}finally{v3(t,e,d)}}s(Pqt,"fetchChatWithInstrumentation");function Jye(t){return zGe(t,e=>e.completionText.trim().length>0)}s(Jye,"postProcessChoices");var Dqt="github.copilot.completions.quotaExceeded",rO=class extends u0{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Io),c="completions",l=await e.get(qr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){qa.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=dT.create(e,r.count,u,n,[],o).processSSE(i),m=rE(p,h=>KK(e,h,n));return{type:"success",choices:Jye(m),getProcessingTime:s(()=>E3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:d,model:c.name}),h=e.get(Io),g=await e.get(qr).getToken(),A=await Pqt(e,r,c.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let S=A.body();try{S&&"destroy"in S&&typeof S.destroy=="function"?S.destroy():S instanceof ReadableStream&&S.cancel()}catch(R){qa.exception(e,R,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(A.status!==200){let S=$r.createAndMarkAsIssued({endpoint:d,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,S,A,g)}let x=dT.create(e,1,A,m,[],uVe.CancellationToken.None).processSSE(),I=rE(x,S=>KK(e,S,n));return{type:"success",choices:Jye(I),getProcessingTime:s(()=>E3(A),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Io),c="speculation",l=await e.get(qr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:Ar(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},d=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){qa.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,d,l)}let m=dT.create(e,1,d,n,[],o).processSSE(i),h=rE(m,g=>KK(e,g,n));return{type:"success",choices:Jye(h),getProcessingTime:s(()=>E3(d),"getProcessingTime")}}createTelemetryData(e,r,n){return $r.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await vC(0),a?.isCancellationRequested?"not-sent":await lVe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Nt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:tJ(e),temperature:x3(e,n.count),top_p:eJ(e),n:n.count,stop:fVe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=Wv(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await vC(0),a?.isCancellationRequested?"not-sent":await lVe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:Dqt,title:"Learn More"});let l=ws(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),qa.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;qa.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(qa.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Dt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(qr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",qa.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(qa.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(qa.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function JK(t,e,r,n,i,o,a){return z8e(t,e,r,i,n),{completionText:e,meanLogProb:Bqt(t,r),meanAlternativeLogProb:Nqt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:Ar(),finishReason:r.finish_reason}}s(JK,"convertToAPIChoice");function Bqt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){an.exception(t,r,"Error calculating mean prob")}}s(Bqt,"calculateMeanLogProb");function Nqt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){an.exception(t,r,"Error calculating mean prob")}}s(Nqt,"calculateMeanAlternativeLogProb");function x3(t,e){return Tg(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(x3,"getTemperatureForSamples");var Lqt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function fVe(t,e){return Lqt[e??""]??[`


`,"\n```"]}s(fVe,"getStops");function eJ(t){return 1}s(eJ,"getTopP");function tJ(t){return cF}s(tJ,"getMaxSolutionTokens");var Xye=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},rJ=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Xye(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new VK(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=JK(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(c[l]=d)}return Object.keys(c).length>0?c:void 0}};f();f();var dh=class{constructor(){this.cache=new kr(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var nJ=new vt("getCompletions");function iJ(t,e,r){t.get(dh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=b3(r.resultType),Dt(t,`${e}.shown`,r.telemetry)}s(iJ,"telemetryShown");function pVe(t,e,r){let n=e+".accepted";Dt(t,n,r)}s(pVe,"telemetryAccepted");function mVe(t,e,r){let n=e+".rejected";Dt(t,n,r)}s(mVe,"telemetryRejected");function fT(t,e={}){return{...e,telemetryBlob:t}}s(fT,"mkCanceledResultTelemetry");function ec(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(ec,"mkBasicResultTelemetry");function hVe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Ea()-e.telemetryBlob.issuedTime,n=b3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return nJ.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),Tfe(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(nJ.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Dt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Tfe(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(hVe,"handleGhostTextResultTelemetry");function b3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(b3,"resultTypeToString");f();f();f();async function Mqt(t){if(t.isCancellationRequested)return;let e=new uh,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(Mqt,"cancellationTokenToPromise");async function gVe(t,e){if(e){let r=Mqt(e);await Promise.race([t,r])}else await t}s(gVe,"raceCancellation");function Zye(t){return Array.isArray(t)}s(Zye,"isArrayOfT");async function AVe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await yVe(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(AVe,"resolveAll");async function yVe(t,e){let r;return t instanceof Promise?r=await Fqt(t,e):r=await Oqt(t,e),r}s(yVe,"resolve");async function Fqt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Zye(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await gVe(i,e),n.resolutionTime=performance.now()-r,n}s(Fqt,"resolvePromise");async function Oqt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await gVe(i,e),n.resolutionTime=performance.now()-r,n}s(Oqt,"resolveIterable");f();var Qqt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Uqt="ms-vscode.cpptools",qqt="CppCompletionContextProvider";function CVe(t,e,r,n){(e.includes(qqt)||e.length===1&&e[0]==="*")&&EVe(t,r,n)}s(CVe,"fillInCppVSActiveExperiments");function vVe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Uqt))&&EVe(t,r,n)}s(vVe,"fillInCppVSCodeActiveExperiments");function EVe(t,e,r){try{let n=Qqt,i=t.get(Nt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){an.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){an.exception(t,n,"fillInCppActiveExperiments")}}s(EVe,"addActiveExperiments");f();function oJ(t,e,r){try{let n=t.get(Nt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return an.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(oJ,"fillInCSharpActiveExperiments");f();var pT="fallbackContextProvider",sJ={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function xVe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(pT))&&Hqt(t,r,n)}s(xVe,"fillInMultiLanguageActiveExperiments");function Hqt(t,e,r){try{let n=$qt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){an.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(Hqt,"addActiveExperiments");function $qt(t,e){let r=sJ,n=t.get(Nt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){an.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s($qt,"getMultiLanguageContextProviderParamsFromExp");function bVe(t){let e={...sJ};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(bVe,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var Wqt="typescript-ai-context-provider";function IVe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(Wqt)))return!1;try{let i=t.get(Nt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return an.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(IVe,"fillInTsActiveExperiments");f();var TVe=E.Object({importance:E.Optional(E.Integer({minimum:0,maximum:100})),id:E.Optional(E.String()),origin:E.Optional(E.Union([E.Literal("request"),E.Literal("update")]))}),wVe=E.Intersect([E.Object({name:E.String(),value:E.String()}),TVe]),SVe=E.Intersect([E.Object({uri:E.String(),value:E.String(),additionalUris:E.Optional(E.Array(E.String()))}),TVe]),jqt=[wVe,SVe],Gqt=E.Union(jqt),Vqt=new Map([["Trait",Vs.Compile(wVe)],["CodeSnippet",Vs.Compile(SVe)]]),zqt=s(t=>t,"ensureTypesAreEqual");zqt(!0);var Yqt=E.Object({contextItems:E.Array(Gqt)}),Kqt=E.Object({selector:E.Array(E.Union([E.String(),E.Object({language:E.Optional(E.String()),scheme:E.Optional(E.String()),pattern:E.Optional(E.String())})]))}),eCe=E.Object({id:E.String()}),Jqt=E.Intersect([eCe,Kqt]),Xqt=E.Intersect([eCe,Yqt]),_Ve=E.Object({providers:E.Array(Jqt)}),RVe=E.Object({providers:E.Array(eCe)}),tCe=E.Object({providers:E.Array(Xqt),updating:E.Optional(E.Array(E.String()))}),aJ=E.Intersect([oLe,E.Object({contextItems:E.Optional(tCe)})]);function cJ(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(cJ,"filterContextItemsByType");function kVe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of Vqt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(kVe,"filterSupportedContextItems");function Zqt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(Zqt,"validateContextItemId");function PVe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??Ar();if(!Zqt(o)){let a=Ar();an.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=Ar();an.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(PVe,"addOrValidateContextItemsIDs");f();var tl=class{constructor(e=()=>new rCe){this.createStatistics=e;this.statistics=new kr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},rCe=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function lJ(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(lJ,"componentStatisticsToPromptMatcher");var DVe=Fe(ui());var kc=class{static{s(this,"ContextProviderRegistry")}},EC=class{static{s(this,"DefaultContextProviders")}},T3=class extends EC{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},nCe=class extends kc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return an.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;oJ(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let d=await this.matchProviders(i,o),p=d.filter(R=>R[1]>0);if(d.filter(R=>R[1]<=0).forEach(([R,B])=>{let M={providerId:R.id,matchScore:B,resolution:"none",resolutionTimeMs:0,data:[]};u.push(M)}),p.length===0)return u;if(a?.isCancellationRequested)return an.debug(this.ctx,"Resolving context providers cancelled"),[];vVe(this.ctx,p.map(R=>R[0].id),l,o),xVe(this.ctx,p.map(R=>R[0].id),l,o),IVe(this.ctx,p.map(R=>R[0].id),l,o);let h=new DVe.CancellationTokenSource;if(a){let R=a.onCancellationRequested(B=>{h.cancel(),R.dispose()})}let g=vM(this.ctx)&&!U$(this.ctx)?0:eHt(this.ctx,o),A=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,y;g>0&&(y=setTimeout(()=>{h.cancel(),h.dispose()},g));let x=new Map,I={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:A,data:c};for(let[R]of p){let B=this.ctx.get(tl).getPreviousStatisticsForCompletion(r)?.get(R.id);B&&(I.previousUsageStatistics=B);let M=R.resolver.resolve(I,h.token);x.set(R.id,M)}let S=await AVe(x,h.token);y&&clearTimeout(y);for(let[R,B]of p){let M=S.get(R.id);if(M){if(M.status==="error")qz(M.reason)||an.error(this.ctx,`Error resolving context from ${R.id}: `,M.reason),u.push({providerId:R.id,matchScore:B,resolution:M.status,resolutionTimeMs:M.resolutionTime,data:[]});else{let O=[...M.value??[]];if((M.status==="none"||M.status==="partial")&&(an.info(this.ctx,`Context provider ${R.id} exceeded time budget of ${g}ms`),R.resolver.resolveOnTimeout))try{let U=R.resolver.resolveOnTimeout(I);Zye(U)?O.push(...U):U&&O.push(U),O.length>0&&(M.status="partial")}catch(U){an.error(this.ctx,`Error in fallback logic for context provider ${R.id}: `,U)}let[K,V]=kVe(O);V&&an.error(this.ctx,`Dropped ${V} context items from ${R.id} due to invalid schema`);let z=PVe(this.ctx,K),Q={providerId:R.id,matchScore:B,resolution:M.status,resolutionTimeMs:M.resolutionTime,data:z};u.push(Q)}this.ctx.get(tl).getStatisticsForCompletion(r).setLastResolution(R.id,M.status)}else an.error(this.ctx,`Context provider ${R.id} not found in results`)}return u.sort((R,B)=>B.matchScore-R.matchScore)}async matchProviders(r,n){let i=pJ(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},iCe=class extends kc{constructor(r){super();this.delegate=r;this._cachedContextItems=new kr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function uJ(t,e){return new iCe(new nCe(t,e))}s(uJ,"getContextProviderRegistry");function dJ(t,e,r){let n=t.get(tl).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:d}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="full"||y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0,A=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),A!==void 0&&(h.numPartiallyUsedItems=A),h})}s(dJ,"telemetrizeContextItems");function fJ(t){return t.matchScore>0&&t.resolution!=="error"}s(fJ,"matchContextItems");function pJ(t,e){let r=oCe(t,e),n=$i(t,qt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(EC).getIds();return Array.from(new Set([...i,...r,...n]))}s(pJ,"getActiveContextProviders");function oCe(t,e){return vM(t)?["*"]:t.get(Nt).contextProviders(e)}s(oCe,"getExpContextProviders");function w3(t,e){return pJ(t,e).length>0}s(w3,"useContextProviderAPI");function eHt(t,e){let r=$i(t,qt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Nt).contextProviderTimeBudget(e)}s(eHt,"getContextProviderTimeBudget");var d0=class{constructor(e){this.ctx=e;this.scheduledResolutions=new kr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){let c=this.ctx.get(kc),{textDocument:l,originalPosition:u,originalOffset:d,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:d,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var mJ=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await jv(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},hJ=class extends mJ{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=NVe(r,n),this.isBlockStart(tHt(r,n))&&this.isBlockBodyEmpty(r,n)}};function tHt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(tHt,"getLineAtOffset");function NVe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(NVe,"rewindToNearestNonWs");function BVe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(BVe,"indent");function rHt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=BVe(t,r),i=BVe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(rHt,"outdented");var xC=class extends mJ{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&Vqe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=NVe(r,n);let i=await jv(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&rHt(d,p,r)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=n}d=d.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let d=c.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(A=>A.hasError())?.children.find(A=>A.type=="block"));let h,g=0;for(let A of a.children){if(A.type==":"&&g==0){h=A;break}A.type=="("&&(g+=1),A.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let A=h.nextSibling;if(A.type=='"'||A.type=="'"||A.type=="ERROR"&&(A.text=='"""'||A.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(y=>y.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(y=>y.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(A=>A.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(A=>A.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let d=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},nHt={python:new xC("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new xC("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new xC("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new xC("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new hJ("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new hJ("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new xC("csharp",{},new Map([]),[],"block",null,!0),java:new xC("java",{},new Map([]),[],"block",null,!0),php:new xC("php",{},new Map([]),[],"block",null,!0),cpp:new xC("cpp",{},new Map([]),[],"block",null,!0)};function sCe(t){if(!vp(t))throw new Error(`Language ${t} is not supported`);return nHt[Oz(t)]}s(sCe,"getBlockParser");async function LVe(t,e,r){return vp(t)?sCe(t).isEmptyBlockStart(e,r):!1}s(LVe,"isEmptyBlockStart");async function MVe(t,e,r,n){if(vp(t))return sCe(t).isBlockBodyFinished(e,r,n)}s(MVe,"isBlockBodyFinished");async function FVe(t,e,r){if(vp(t))return sCe(t).getNodeStart(e,r)}s(FVe,"getNodeStart");var rHn=new vt("parseBlock");function nO(t,e,r){let n=e.getText(hs.range(hs.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>MVe(o,n,a,i)}s(nO,"parsingBlockFinished");function AJ(t,e){return LVe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(AJ,"isEmptyBlockStartUtil");async function OVe(t,e,r,n){let o=e.getText(hs.range(hs.position(0,0),r))+n,a=await FVe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(OVe,"getNodeStartUtil");var iHt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),oHt=new RegExp(`^(${iHt.join("|")})`);function sHt(t){return oHt.test(t.trimLeft().toLowerCase())}s(sHt,"isContinuationLine");function gJ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(gJ,"indentationOfLine");function yJ(t,e){let r=t.getText(),n=t.offsetAt(e);return aCe(r,n,t.detectedLanguageId)}s(yJ,"contextIndentation");function aCe(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,A;for(;g===void 0&&h>=0&&h<d.length;)g=gJ(d[h]),A=h,h+=m;if(r==="python"&&m===-1){h++;let y=d[h].trim();if(y.endsWith('"""')){if(!(y.startsWith('"""')&&y!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=gJ(d[h]),A=h,h--}}return[g,A]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let d=c-1;d>=0;d--){let p=gJ(n[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(aCe,"contextIndentationFromText");var aHt=!1;function cHt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&aHt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let d=gJ(u);if(d!==void 0&&(d<c||d===c&&!sHt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(cHt,"completionCutOrContinue");function QVe(t,e){return r=>{let n=cHt(r,t,e);return n==="continue"?void 0:n}}s(QVe,"indentationBlockFinished");f();f();f();f();f();f();var lHt={tokenizerName:"o200k_base"};function uHt(t){return{...lHt,...t}}s(uHt,"cursorContextOptions");function iO(t,e={}){let r=uHt(e),n=Wi(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(iO,"getCursorContext");f();f();var dHt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function UVe(t){let e=dHt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(UVe,"announceSnippet");var cCe=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var lCe=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=hHt.get(e.languageId)??mHt}tokenize(e){return new Set(fHt(e).filter(r=>!this.stopsForLanguage.has(r)))}},qVe=new cCe(20),S3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new lCe(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=qVe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(d,p).forEach(A=>A.forEach(y=>g.add(y),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:d,endLine:p})}return c&&qVe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function fHt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(fHt,"splitIntoWords");var pHt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),mHt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...pHt]),hHt=new Map([]);f();function CJ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(CJ,"getBasicWindowDelineations");var vJ=class t extends S3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return CJ(this.windowLength,e)}_getCursorContextInfo(e){return iO(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return gHt(e,r)}};function gHt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(gHt,"computeScore");f();var EJ=class t extends S3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return CJ(this.windowLength,e)}_getCursorContextInfo(e){return iO(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):iO(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return AHt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await jv(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function AHt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(AHt,"computeScore");var yHt=0,CHt=60,vHt=4,EHt=1,xHt=20,bHt=1e4,HVe={snippetLength:CHt,threshold:yHt,maxTopSnippets:vHt,maxCharPerFile:bHt,maxNumberOfFiles:xHt,maxSnippetsPerFile:EHt,useSubsetMatching:!1};var uCe={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function IHt(t,e){return(e.useSubsetMatching?EJ.FACTORY(e.snippetLength):vJ.FACTORY(e.snippetLength)).to(t)}s(IHt,"getMatcher");async function $Ve(t,e,r){let n=IHt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s($Ve,"getSimilarSnippets");function WVe(t,e){return{...uCe,useSubsetMatching:dCe(t,e)}}s(WVe,"getCppSimilarFilesOptions");function jVe(t){return uCe.maxTopSnippets}s(jVe,"getCppNumberOfSnippets");var THt=new Map([["cpp",WVe]]);function xJ(t,e,r){let n=THt.get(r);return n?n(t,e):{...HVe,useSubsetMatching:dCe(t,e)}}s(xJ,"getSimilarFilesOptions");var wHt=new Map([["cpp",jVe]]);function GVe(t,e){let r=wHt.get(e);return r?r(t):$qe}s(GVe,"getNumberOfSnippets");function dCe(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||$i(t,qt.UseSubsetMatching))??!1}s(dCe,"useSubsetMatching");f();f();f();f();var SHt="content_excluded";async function bJ(t,e,r,n){let i=cJ(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),c=t.get(Cr),l=new Map;await Promise.all(Array.from(o).map(async d=>{l.set(d,await c.getTextDocumentValidation({uri:d}))}));let u=t.get(tl).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,SHt]]),m}).map(d=>d.data)}s(bJ,"getCodeSnippetsFromContextItems");function VVe(t,e){let r=t.get(Cr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(VVe,"addRelativePathToCodeSnippets");f();function tc(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(tc,"Text");function mT(t){return t.children}s(mT,"Chunk");f();function Yr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Yr,"functionComponentFunction");function uA(t){return{type:"f",children:t}}s(uA,"fragmentFunction");uA.isFragmentFunction=!0;var IJ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(f0,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=VVe(t.ctx,r),c=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=c.get(d);p===void 0&&(p=[],c.set(d,p)),p.push(u)}let l=[];for(let[u,d]of c.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,d)=>d.importance-u.importance),l.reverse(),l.map(u=>{let d=[];return d.push(Yr(tc,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Yr(tc,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Yr(tc,{children:"---"}))}),Yr(mT,{children:d})})},"CodeSnippets");f();function fCe(t){return t.children}s(fCe,"CompletionsContext");function pCe(t){return t.children}s(pCe,"StableCompletionsContext");function mCe(t){return t.children}s(mCe,"AdditionalCompletionsContext");function TJ(t){return t.name===fCe.name||t.name===pCe.name||t.name===mCe.name}s(TJ,"isContextNode");f();f();f();function wJ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(wJ,"findEditDistanceScore");var oO=50;function hCe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(hCe,"approximateMaxCharacters");function sO(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,p]=e.useState();e.useData(f0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=hCe(a);return Yr(uA,{children:[Yr(iR,{document:r,position:i,maxCharacters:m}),Yr(SJ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:d})]})}s(sO,"CurrentFile");function iR(t){if(t.document===void 0||t.position===void 0)return Yr(tc,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Yr(tc,{children:e})}s(iR,"BeforeCursor");function SJ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Yr(tc,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Yr(tc,{});if(r===o)return Yr(tc,{children:r});let a=o;if(r!==""){let c=Wi(t.tokenizer),l=c.takeFirstTokens(o,oO);l.tokens.length>0&&100*wJ(l.tokens,c.takeFirstTokens(r,oO).tokens)?.score<(t.suffixMatchThreshold??Lz)*l.tokens.length&&(a=r)}return a!==r&&n(a),Yr(tc,{children:a})}s(SJ,"AfterCursor");function zVe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(f0,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=hCe(a);return Yr(iR,{document:r,position:i,maxCharacters:l})}s(zVe,"DocumentPrefix");function YVe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,p]=e.useState();e.useData(f0,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=hCe(a);return Yr(SJ,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:d})}s(YVe,"DocumentSuffix");f();var _J=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),d=this.elidePrefix(a,u,c,o);return{blocks:[l,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:d}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function KVe(t){return t.map(e=>e.elidedValue).join("")}s(KVe,"makePrompt");function JVe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(JVe,"makePrefixPrompt");function XVe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(XVe,"makeContextPrompt");f();var _3=class{constructor(e,r=gCe()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function gCe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===mT.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(gCe,"defaultTransformers");f();var aO={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},ACe={};for(let[t,e]of Object.entries(aO))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)ACe[r]=t;else ACe[t]=t;function eze(t){return ACe[t]}s(eze,"mdCodeBlockLangToLanguageId");var _Ht={start:"//",end:""},RHt=["php","plaintext"],yCe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function tze(t){return Object.values(yCe).includes(t.trim())}s(tze,"isShebangLine");function kHt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(kHt,"hasLanguageMarker");function PHt(t,e){let r=aO[e]?aO[e].lineComment:_Ht;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(PHt,"comment");function bC(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>PHt(o,e)).join(`
`);return r?i+`
`:i}s(bC,"commentBlockAsSingles");function RJ(t){let{languageId:e}=t;return RHt.indexOf(e)===-1&&!kHt(t)?e in yCe?yCe[e]:`Language: ${e}`:""}s(RJ,"getLanguageMarker");function kJ(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(kJ,"getPathMarker");function cO(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(cO,"newLineEnded");function rze(t){return ZVe(typeof t=="string"?t:"plaintext")}s(rze,"getLanguage");function ZVe(t){return aO[t]!==void 0?{languageId:t,...aO[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(ZVe,"_getLanguage");var DHt=5,R3=class{constructor(){this.renderId=0;this.formatPrefix=KVe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new _J,{blocks:[A,...y]}=g.elide(l,p,u,m,Wi(c)),x=performance.now(),I=this.formatPrefix(y),S=this.formatContext?this.formatContext(y):void 0,R=A.elidedValue,B=y.reduce((M,O)=>M+O.elidedTokens,0);return d.push(...BHt([...y,A])),{prefix:I,prefixTokens:B,suffix:R,suffixTokens:A.elidedTokens,context:S,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:x-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((M,O)=>M+(O.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-DHt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new _3(e,CCe).walkSnapshot((d,p,m)=>{if(d===e||(d.name===sO.name&&(c=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:lO(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let g=d.value.endsWith(r)?d.value:d.value+r,A=g;m.type==="prefix"?A=d.value:tze(d.value)?A=g:A=bC(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:lO(A),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${sO.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},CCe=[...gCe(),(t,e,r)=>TJ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===iR.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===SJ.name?{...r,type:"suffix"}:r];function BHt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(BHt,"computeComponentStatistics");function lO(t){return t.replace(/\r\n?/g,`
`)}s(lO,"normalizeLineEndings");f();var PJ=s((t,e)=>{let[r,n]=e.useState();if(e.useData(f0,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Cr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Yr(NHt,{docInfo:a}):Yr(LHt,{docInfo:a})}},"DocumentMarker"),NHt=s(t=>Yr(tc,{children:kJ(t.docInfo)}),"PathMarker"),LHt=s(t=>Yr(tc,{children:RJ(t.docInfo)}),"LanguageMarker");f();f();f();f();function uO(t,e="Unreachable"){throw new Error(e)}s(uO,"assertNever");function Tl(t,e="unexpected state"){if(!t)throw new Cn(`Assertion Failed: ${e}`)}s(Tl,"assert");function dA(t){if(!t()){debugger;t(),a3(new Cn("Assertion Failed"))}}s(dA,"assertFn");function iE(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(iE,"checkAdjacentItems");f();f();f();f();f();var oE=s((t,e)=>t===e,"strictEquals");f();f();var ta=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},dO=class{constructor(){this._first=ta.Undefined;this._last=ta.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===ta.Undefined}clear(){let e=this._first;for(;e!==ta.Undefined;){let r=e.next;e.prev=ta.Undefined,e.next=ta.Undefined,e=r}this._first=ta.Undefined,this._last=ta.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new ta(e);if(this._first===ta.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==ta.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ta.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ta.Undefined&&e.next!==ta.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===ta.Undefined&&e.next===ta.Undefined?(this._first=ta.Undefined,this._last=ta.Undefined):e.next===ta.Undefined?(this._last=this._last.prev,this._last.next=ta.Undefined):e.prev===ta.Undefined&&(this._first=this._first.next,this._first.prev=ta.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ta.Undefined;)yield e.element,e=e.next}};f();var MHt=globalThis.performance&&typeof globalThis.performance.now=="function",k3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=MHt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var nze=!1,FHt=!1,oR;(J=>{J.None=s(()=>xs.None,"None");function e(j){if(FHt){let{onDidAddListener:$}=j,X=fO.create(),ie=0;j.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),X.print()),$?.()}}}s(e,"_addLeakageTraceLogic");function r(j,$){return h(j,()=>{},0,void 0,!0,void 0,$)}J.defer=r,s(r,"defer");function n(j){return($,X=null,ie)=>{let ae=!1,te;return te=j(pe=>{if(!ae)return te?te.dispose():ae=!0,$.call(X,pe)},null,ie),ae&&te.dispose(),te}}J.once=n,s(n,"once");function i(j,$){return J.once(J.filter(j,$))}J.onceIf=i,s(i,"onceIf");function o(j,$,X){return p((ie,ae=null,te)=>j(pe=>ie.call(ae,$(pe)),null,te),X)}J.map=o,s(o,"map");function a(j,$,X){return p((ie,ae=null,te)=>j(pe=>{$(pe),ie.call(ae,pe)},null,te),X)}J.forEach=a,s(a,"forEach");function c(j,$,X){return p((ie,ae=null,te)=>j(pe=>$(pe)&&ie.call(ae,pe),null,te),X)}J.filter=c,s(c,"filter");function l(j){return j}J.signal=l,s(l,"signal");function u(...j){return($,X=null,ie)=>{let ae=oje(...j.map(te=>te(pe=>$.call(X,pe))));return m(ae,ie)}}J.any=u,s(u,"any");function d(j,$,X,ie){let ae=X;return o(j,te=>(ae=$(ae,te),ae),ie)}J.reduce=d,s(d,"reduce");function p(j,$){let X,ie={onWillAddFirstListener(){X=j(ae.fire,ae)},onDidRemoveLastListener(){X?.dispose()}};$||e(ie);let ae=new _p(ie);return $?.add(ae),ae.event}s(p,"snapshot");function m(j,$){return $ instanceof Array?$.push(j):$&&$.add(j),j}s(m,"addAndReturnDisposable");function h(j,$,X=100,ie=!1,ae=!1,te,pe){let Ae,Oe,Te,Je=0,Me,lt={leakWarningThreshold:te,onWillAddFirstListener(){Ae=j(Et=>{Je++,Oe=$(Oe,Et),ie&&!Te&&(_t.fire(Oe),Oe=void 0),Me=s(()=>{let ht=Oe;Oe=void 0,Te=void 0,(!ie||Je>1)&&_t.fire(ht),Je=0},"doFire"),typeof X=="number"?(clearTimeout(Te),Te=setTimeout(Me,X)):Te===void 0&&(Te=0,queueMicrotask(Me))})},onWillRemoveListener(){ae&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,Ae.dispose()}};pe||e(lt);let _t=new _p(lt);return pe?.add(_t),_t.event}J.debounce=h,s(h,"debounce");function g(j,$=0,X){return J.debounce(j,(ie,ae)=>ie?(ie.push(ae),ie):[ae],$,void 0,!0,void 0,X)}J.accumulate=g,s(g,"accumulate");function A(j,$=(ie,ae)=>ie===ae,X){let ie=!0,ae;return c(j,te=>{let pe=ie||!$(te,ae);return ie=!1,ae=te,pe},X)}J.latch=A,s(A,"latch");function y(j,$,X){return[J.filter(j,$,X),J.filter(j,ie=>!$(ie),X)]}J.split=y,s(y,"split");function x(j,$=!1,X=[],ie){let ae=X.slice(),te=j(Oe=>{ae?ae.push(Oe):Ae.fire(Oe)});ie&&ie.add(te);let pe=s(()=>{ae?.forEach(Oe=>Ae.fire(Oe)),ae=null},"flush"),Ae=new _p({onWillAddFirstListener(){te||(te=j(Oe=>Ae.fire(Oe)),ie&&ie.add(te))},onDidAddFirstListener(){ae&&($?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ie&&ie.add(Ae),Ae.event}J.buffer=x,s(x,"buffer");function I(j,$){return s((ie,ae,te)=>{let pe=$(new R);return j(function(Ae){let Oe=pe.evaluate(Ae);Oe!==S&&ie.call(ae,Oe)},void 0,te)},"fn")}J.chain=I,s(I,"chain");let S=Symbol("HaltChainable");class R{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map($){return this.steps.push($),this}forEach($){return this.steps.push(X=>($(X),X)),this}filter($){return this.steps.push(X=>$(X)?X:S),this}reduce($,X){let ie=X;return this.steps.push(ae=>(ie=$(ie,ae),ie)),this}latch($=(X,ie)=>X===ie){let X=!0,ie;return this.steps.push(ae=>{let te=X||!$(ae,ie);return X=!1,ie=ae,te?ae:S}),this}evaluate($){for(let X of this.steps)if($=X($),$===S)break;return $}}function B(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.on($,ie),"onFirstListenerAdd"),te=s(()=>j.removeListener($,ie),"onLastListenerRemove"),pe=new _p({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function M(j,$,X=ie=>ie){let ie=s((...Ae)=>pe.fire(X(...Ae)),"fn"),ae=s(()=>j.addEventListener($,ie),"onFirstListenerAdd"),te=s(()=>j.removeEventListener($,ie),"onLastListenerRemove"),pe=new _p({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}J.fromDOMEventEmitter=M,s(M,"fromDOMEventEmitter");function O(j,$){return new Promise(X=>n(j)(X,null,$))}J.toPromise=O,s(O,"toPromise");function K(j){let $=new _p;return j.then(X=>{$.fire(X)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}J.fromPromise=K,s(K,"fromPromise");function V(j,$){return j(X=>$.fire(X))}J.forward=V,s(V,"forward");function z(j,$,X){return $(X),j(ie=>$(ie))}J.runAndSubscribe=z,s(z,"runAndSubscribe");class Q{constructor($,X){this._observable=$;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:s(()=>{$.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{$.removeObserver(this)},"onDidRemoveLastListener")};X||e(ie),this.emitter=new _p(ie),X&&X.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,X){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(j,$){return new Q(j,$).emitter.event}J.fromObservable=U,s(U,"fromObservable");function Z(j){return($,X,ie)=>{let ae=0,te=!1,pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(j.reportChanges(),te&&(te=!1,$.call(X)))},handlePossibleChange(){},handleChange(){te=!0}};j.addObserver(pe),j.reportChanges();let Ae={dispose(){j.removeObserver(pe)}};return ie instanceof Fu?ie.add(Ae):Array.isArray(ie)&&ie.push(Ae),Ae}}J.fromObservableLight=Z,s(Z,"fromObservableLight")})(oR||={});var vCe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new k3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},ize=-1;var ECe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new xCe(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},fO=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},xCe=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},bCe=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},OHt=0,P3=class{constructor(e){this.value=e;this.id=OHt++}static{s(this,"UniqueContainer")}},QHt=2,UHt=s((t,e)=>{if(t instanceof P3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),_p=class{constructor(e){this._size=0;this._options=e,this._leakageMon=ize>0||this._options?.leakWarningThreshold?new ECe(e?.onListenerError??a3,this._options?.leakWarningThreshold??ize):void 0,this._perfMon=this._options?._profName?new vCe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(nze){let e=this._listeners;queueMicrotask(()=>{UHt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new bCe(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||a3)(d),xs.None}if(this._disposed)return xs.None;r&&(e=e.bind(r));let i=new P3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=fO.create(),o=this._leakageMon.check(i.stack,this._size+1)),nze&&(i.stack=a??fO.create()),this._listeners?this._listeners instanceof P3?(this._deliveryQueue??=new ICe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=Sc(()=>{o?.(),this._removeListener(i)});return n instanceof Fu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*QHt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||a3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof P3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var ICe=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var gf=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return cze(e,this)}},oze=new Map,TCe=new WeakMap;function cze(t,e){let r=TCe.get(t);if(r)return r;let n=qHt(t,e);if(n){let i=oze.get(n)??0;i++,oze.set(n,i);let o=i===1?n:`${n}#${i}`;return TCe.set(t,o),o}}s(cze,"getDebugName");function qHt(t,e){let r=TCe.get(t);if(r)return r;let n=e.owner?$Ht(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=DJ(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=HHt(e.owner,t);if(c!==void 0)return n+c}}s(qHt,"computeDebugName");function HHt(t,e){for(let r in t)if(t[r]===e)return r}s(HHt,"findKey");var sze=new Map,aze=new WeakMap;function $Ht(t){let e=aze.get(t);if(e)return e;let r=WHt(t),n=sze.get(r)??0;n++,sze.set(r,n);let i=n===1?r:`${r}#${n}`;return aze.set(t,i),i}s($Ht,"formatOwner");function WHt(t){let e=t.constructor;return e?e.name:"Object"}s(WHt,"getClassName");function DJ(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(DJ,"getFunctionName");f();var sR;function NJ(t){sR?sR instanceof BJ?sR.loggers.push(t):sR=new BJ([sR,t]):sR=t}s(NJ,"addLogger");function ba(){return sR}s(ba,"getLogger");var wCe;function lze(t){wCe=t}s(lze,"setLogObservableFn");function uze(t){wCe&&wCe(t)}s(uze,"logObservable");var BJ=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var dze;function fze(t){dze=t}s(fze,"_setRecomputeInitiallyAndOnChange");var pze;function mze(t){pze=t}s(mze,"_setKeepObserved");var SCe;function hze(t){SCe=t}s(hze,"_setDerivedOpts");var LJ=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return SCe({owner:n,debugName:s(()=>{let o=DJ(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return SCe({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(dze(this,r)),this}keepObserved(e){return e.add(pze(this)),this}get debugValue(){return this.get()}},hT=class extends LJ{constructor(){super();this.observers=new Set;ba()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&ba()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&ba()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!ba();return uze(this),r||ba()?.handleObservableCreated(this),this}};function FJ(t,e){let r=new D3(t,e);try{t(r)}finally{r.finish()}}s(FJ,"transaction");function _Ce(t,e,r){t?e(t):FJ(e,r)}s(_Ce,"subtransaction");var D3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];ba()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():DJ(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,ba()?.handleEndTransaction(this)}};function fA(t,e){let r;return typeof t=="string"?r=new gf(void 0,t,void 0):r=new gf(t,void 0,void 0),new MJ(r,e,oE)}s(fA,"observableValue");var MJ=class extends hT{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,ba()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new D3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),ba()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function aR(t){return new B3(new gf(void 0,void 0,t),t,void 0,void 0)}s(aR,"autorun");function RCe(t,e){return new B3(new gf(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(RCe,"autorunOpts");function OJ(t,e){return new B3(new gf(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(OJ,"autorunHandleChanges");function kCe(t,e){let r=new Fu,n=OJ({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return Sc(()=>{n.dispose(),r.dispose()})}s(kCe,"autorunWithStoreHandleChanges");function PCe(t){let e=new Fu,r=RCe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Sc(()=>{r.dispose(),e.dispose()})}s(PCe,"autorunWithStore");var B3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),ba()?.handleAutorunCreated(this),this._runIfNeeded(),d3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),ba()?.handleAutorunDisposed(this),f3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){ba()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){X2(n)}finally{this._isRunning=!1}}}finally{this.disposed||ba()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}dA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){ba()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){X2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new Cn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=B3)(aR||={});f();function QJ(t,e){return new cR(new gf(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??oE)}s(QJ,"derivedOpts");hze(QJ);var cR=class extends hT{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,ba()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),ba()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){X2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new Cn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}dA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){ba()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){X2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new Cn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function DCe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new gT(new gf(e,void 0,n),r,n,()=>gT.globalTransaction,oE)}s(DCe,"observableFromEvent");var gT=class extends hT{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,_Ce(this._getTransaction(),c=>{ba()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||ba()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=gT;function e(n,i){let o=!1;gT.globalTransaction===void 0&&(gT.globalTransaction=n,o=!0);try{i()}finally{o&&(gT.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(DCe||={});function Aze(t){let e=new UJ(!1,void 0);return t.addObserver(e),Sc(()=>{t.removeObserver(e)})}s(Aze,"keepObserved");mze(Aze);function yze(t,e){let r=new UJ(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Sc(()=>{t.removeObserver(r)})}s(yze,"recomputeInitiallyAndOnChange");fze(yze);var UJ=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function fh(t,e,r,n){let i=new qJ(r,n);return QJ({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new qJ(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(fh,"mapObservableArrayCached");var qJ=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new Fu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function BCe(t,e){let r;return kCe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(BCe,"runOnChange");f();f();f();var Cze=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),HJ;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof N3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:oR.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Cze})})(HJ||={});var N3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Cze:(this._emitter||(this._emitter=new _p),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},sE=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new N3),this._token}cancel(){this._token?this._token instanceof N3&&this._token.cancel():this._token=HJ.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof N3&&this._token.dispose():this._token=HJ.None}};f();var $J;function vze(t){$J||($J=new mO,NJ($J)),$J.addFilteredObj(t)}s(vze,"logObservableToConsole");var mO=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return jHt([L3(zHt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[L3(" "),ph(pO(e.oldValue,70),{color:"red",strikeThrough:!0}),L3(" "),ph(pO(e.newValue,60),{color:"green"})]:[L3(" (unchanged)")]:[L3(" "),ph(pO(e.newValue,60),{color:"green"}),L3(" (initial)")]}handleObservableCreated(e){if(e instanceof cR){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof cR){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([M3("observable value changed"),ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return ph(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([M3("derived recomputed"),ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([M3("derived cleared"),ph(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([M3("observable from event triggered"),ph(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([M3("autorun"),ph(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([M3("transaction"),ph(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function jHt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(jHt,"consoleTextToArgs");function L3(t){return ph(t,{color:"black"})}s(L3,"normalText");function M3(t){return ph(YHt(`${t}: `,10),{color:"black",bold:!0})}s(M3,"formatKind");function ph(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(ph,"styled");function pO(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?GHt(t,e):VHt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(pO,"formatValue");function GHt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${pO(i,e-r.length)}`}return r+=" ]",r}s(GHt,"formatArray");function VHt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${pO(o,e-r.length)}`}return r+=" }",r}s(VHt,"formatObject");function zHt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(zHt,"repeat");function YHt(t,e){for(;t.length<e;)t+=" ";return t}s(YHt,"padStr");lze(vze);var KHt=!1;KHt&&NJ(new mO);f();var lR;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(lR||={});f();f();f();function Eze(t){return t}s(Eze,"identity");var WJ=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=Eze):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},aE=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=Eze):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var mh=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function uR(t){return t<0?0:t>4294967295?4294967295:t|0}s(uR,"toUint32");function O3(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(O3,"escapeRegExpCharacters");function wze(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}s(wze,"ltrim");function hh(t){return t.split(/\r\n|\r|\n/)}s(hh,"splitLines");function XHt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(XHt,"compareSubstring");function ZHt(t,e,r=0,n=t.length,i=0,o=e.length){for(;r<n&&i<o;r++,i++){let l=t.charCodeAt(r),u=e.charCodeAt(i);if(l===u)continue;if(l>=128||u>=128)return XHt(t.toLowerCase(),e.toLowerCase(),r,n,i,o);xze(l)&&(l-=32),xze(u)&&(u-=32);let d=l-u;if(d!==0)return d}let a=n-r,c=o-i;return a<c?-1:a>c?1:0}s(ZHt,"compareSubstringIgnoreCase");function xze(t){return t>=97&&t<=122}s(xze,"isLowerAsciiLetter");function Sze(t,e){let r=e.length;return e.length>t.length?!1:ZHt(t,e,0,r)===0}s(Sze,"startsWithIgnoreCase");function AT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(AT,"commonPrefixLength");function cE(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(cE,"commonSuffixLength");var e$t=/^[\t\n\r\x20-\x7E]*$/;function NCe(t){return e$t.test(t)}s(NCe,"isBasicASCII");var Ezn=String.fromCharCode(65279);var bze=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=t$t()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function t$t(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(t$t,"getGraphemeBreakRawData");var Ize=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new mh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new WJ({getCacheKey:JSON.stringify},e=>{function r(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(r,"arrayToMap");function n(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let c;for(let d of a){let p=r(o[d]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new mh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Tze=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();var Gt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new Cn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Cn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Cn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new Cn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var Qr=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var nr=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new Qr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new Qr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-d}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Ur=class t{static{s(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=oh(e=>e.startLineNumber,sh)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new jJ(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new jJ(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new Cn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new Cn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new nr(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new nr(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new Gt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},jJ=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=s3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=aA(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=cye(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=cye(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Ur(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=s3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=aA(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new Ur(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Ur(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Xl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new nr(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new nr(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new nr(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Ur.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new Qr(e.lineNumber,e.column+this.columnCount):new Qr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return nr.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Zl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new LCe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return hh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},LCe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=aA(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Qr(n,i)}getRange(e){return nr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Xl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Xl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var pA=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var GJ=class extends xs{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=fA(this,n),this.selection=fA(this,i),this.languageId=fA(this,o),this._register(Sc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};f();f();function lE(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return OJ({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(lE,"autorunWithChanges");f();var IC=class extends xs{static{s(this,"RecentEditsProvider")}};function r$t(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(r$t,"editIsTooCloseToCursor");var VJ=s((t,e)=>{let[r,n]=e.useState();return e.useData(f0,async i=>{if(!i.document)return;let o=t.ctx.get(IC);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(Cr),d=[];for(let m=c.length-1;m>=0&&!(d.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let y=h.file===i.document?.uri,x=y?i.position.line:void 0;if(r$t(h,y,x,a.activeDocDistanceLimitFromCursor))continue;let S=o.getEditSummary(h);if(S){l.add(h.file);let R=u.getRelativePath({uri:h.file});d.unshift(cO(`File: ${R}`)+cO(S))}}if(d.length===0){n(void 0);return}let p=cO("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+cO("End of recent edits");n(p)}),r?Yr(mT,{children:Yr(tc,{children:r})}):void 0},"RecentEdits");f();f();f();f();var MCe=new kr;function _ze(t){return[...t].sort((e,r)=>{let n=MCe.get(e.uri)??0;return(MCe.get(r.uri)??0)-n})}s(_ze,"sortByAccessTimes");var Rze=s(t=>t.get(Cr).onDidFocusTextDocument(e=>{e.document&&MCe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var zJ=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>dR.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&YJ(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=this.truncateDocs(_ze(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function kze(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(kze,"shortCircuit");f();function i$t(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(i$t,"defaultHash");function FCe(t,e={}){let{hash:r=i$t,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(FCe,"memoize");var Pze={entries:[],traits:[]},KJ={entries:new Map,traits:[]},OCe=class extends kr{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},wl=new vt("relatedFiles"),o$t=1e3,JJ=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},fR=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{wl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){wl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){wl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){wl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(Ni).readFileString(e)}catch(r){wl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(el).evaluate(e,r)).isBlocked}catch(n){wl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},s$t=3,Dze=new OCe(o$t);async function Bze(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){wl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(Dze.bumpRetryCount(e.uri)>=s$t?a=KJ:a=void 0);let c=performance.now()-o;if(wl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new JJ;return a}s(Bze,"getRelatedFiles");var QCe=FCe(Bze,{cache:Dze,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});QCe=kze(QCe,200,KJ);async function XJ(t,e,r,n,i,o=!1){let a=t.get(fR),c=KJ;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await Bze(t,l,r,n,a):await QCe(t,l,r,n,a)}catch(l){c=KJ,l instanceof JJ&&Dt(t,"getRelatedFilesList",r)}return wl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(XJ,"getRelatedFilesAndTraits");function YJ(t,e){return lF(t)===lF(e)}s(YJ,"considerNeighborFile");var dR=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(Cr);t.instance===void 0&&(t.instance=new zJ(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(a$t(e,i))return u;let d=await l.getTextDocument({uri:r});if(!d)return wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(d);if(!p)return wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await XJ(e,d,i,o,a,c);return m.entries.size===0?(wl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let A=[];h.forEach((y,x)=>{let I=t.getRelativePath(x,p.uri);if(!I||u.docs.has(x))return;let S={relativePath:I,uri:x,source:y};A.unshift(S),u.docs.set(x,S)}),A.length>0&&u.neighborSource.set(g,A.map(y=>y.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function a$t(t,e){return t.get(Nt).excludeRelatedFiles(e)||$i(t,qt.ExcludeRelatedFiles)}s(a$t,"isExcludeRelatedFilesActive");function Nze(t,e){return t.get(Nt).includeNeighboringFiles(e)||$i(t,qt.IncludeNeighboringFiles)}s(Nze,"isIncludeNeighborFilesActive");var ZJ=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(f0,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=dR.defaultEmptyResult();l.turnOffSimilarFiles||(u=await dR.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let d=await a(l.telemetryData,l.document,l,u);o(d)});async function a(l,u,d,p){let m=Q3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,d,p)).filter(g=>g.snippet.length>0).sort((g,A)=>g.score-A.score).map(g=>({...UVe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,d,p,m){let h=l.similarFilesOptions||xJ(t.ctx,u,d.detectedLanguageId),A=t.ctx.get(Cr).getRelativePath(d),y={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:A,languageId:d.detectedLanguageId};return await $Ve(y,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Yr(uA,{children:[...i.map((l,u)=>Yr(c$t,{snippet:l}))]})},"SimilarFiles"),c$t=s((t,e)=>Yr(mT,{children:[Yr(tc,{children:t.snippet.headline}),Yr(tc,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var eX=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(f0,a=>{a.traits!==r&&n(a.traits);let c=lF(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Yr(uA,{children:[Yr(tc,{children:`Consider this related information:
`}),...r.map(a=>Yr(tc,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function Lze(t,e){return $i(t,qt.UseSplitContextPrompt)??t.get(Nt).enablePromptContextProxyField(e)}s(Lze,"shouldUseSplitContextPrompt");function Mze(t){return Yr(uA,{children:[Yr(pCe,{children:[Yr(PJ,{ctx:t,weight:.7}),Yr(eX,{weight:.6}),Yr(IJ,{ctx:t,weight:.9}),Yr(ZJ,{ctx:t,weight:.8})]}),Yr(YVe,{weight:1}),Yr(mCe,{children:Yr(VJ,{ctx:t,weight:.99})}),Yr(zVe,{weight:1})]})}s(Mze,"splitContextCompletionsPrompt");f();var Fze=0;function l$t(){Fze=0}s(l$t,"resetContextIndex");function u$t(){return Fze++}s(u$t,"getNextContextIndex");var tX=class extends R3{constructor(){super(...arguments);this.formatPrefix=JVe;this.formatContext=XVe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(l$t(),new _3(r,d$t).walkSnapshot((d,p,m)=>{if(d===r||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===iR.name&&(c=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:lO(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let A=g==="prefix",y=A||d.value.endsWith(n)?d.value:d.value+n;i.push({type:A?"prefix":"context",value:lO(y),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,index:A?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${iR.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},d$t=[...CCe,(t,e,r)=>TJ(t)?{...r,index:u$t()}:r];f();function rX(t,e,r){let n=cJ(r,"Trait");for(let o of n)f$t(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(rX,"getTraitsFromContextItems");function f$t(t,e,r,n){let i=t.get(tl).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(f$t,"setupExpectationsForTraits");var p$t=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function nX(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=p$t.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Dt(e,t,c)}}s(nX,"ReportTraitsTelemetry");f();f();f();var iX=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},oX=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var sX=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let d=this.reconcileNode(u,e.path,l,i);d!==void 0&&c.push(d)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(m$t(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new qCe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new UCe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},UCe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},qCe=class{constructor(e){this.lifecycleData=e;this.stateHook=new iX(e.state),this.dataHook=new oX(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function m$t(t){return typeof t=="function"&&"isFragmentFunction"in t}s(m$t,"isFragmentFunction");var hO=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new sX(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function f0(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(f0,"isCompletionRequestData");var HCe={default:{promptFunction:Oze,renderer:R3},splitContext:{promptFunction:Mze,renderer:tX}};function Oze(t){return Yr(uA,{children:[Yr(fCe,{children:[Yr(PJ,{ctx:t,weight:.7}),Yr(eX,{weight:.6}),Yr(IJ,{ctx:t,weight:.9}),Yr(ZJ,{ctx:t,weight:.8}),Yr(VJ,{ctx:t,weight:.99})]}),Yr(sO,{weight:1})]})}s(Oze,"defaultCompletionsPrompt");var aX=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new hO(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=Q3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let d=i?.separateContext?"splitContext":"default";this.setPromptOrdering(d);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:A}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return uE;let y=this.virtualPrompt.snapshot(o),x=y.status;if(x==="cancelled")return uE;if(x==="error")return this.errorPrompt(y.error);let I=this.renderer.render(y.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(I.status==="cancelled")return uE;if(I.status==="error")return this.errorPrompt(I.error);let[S,R]=yT(I.prefix),B={...I,prefix:S},M;if(w3(this.ctx,n)){let K=lJ(I.metadata.componentStatistics);this.ctx.get(tl).getStatisticsForCompletion(e).computeMatch(K),M=dJ(this.ctx,e,A),an.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(M)}'`)}let O=performance.now();return this.resetIfEmpty(I),this.successPrompt(B,O,p,R,M)}async updateComponentData(e,r,n,i,o,a,c,l,u={},d,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,d,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(w3(this.ctx,n)){a=await this.ctx.get(d0).resolution(e);let{textDocument:d}=r,p=a.filter(fJ);g$t(this.ctx,d.detectedLanguageId,p,n)||(u=!0),c=rX(this.ctx,e,p),nX("contextProvider.traits",this.ctx,c,d.detectedLanguageId,d.detectedLanguageId,n),l=await bJ(this.ctx,e,p,d.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return uE;if((await this.ctx.get(el).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return uX;if((n>0?e.getText().length:e.offsetAt(r))<cX)return lX}createRequestData(e,r,n,i,o,a,c,l,u,d,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:d,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return Ma(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),U3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new hO(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(HCe[this.promptOrdering]?.promptFunction??Oze)(this.ctx)}getRenderer(){let e=HCe[this.promptOrdering]??HCe.default;return new e.renderer}};function g$t(t,e,r,n){let i=["cpp","c"];return Nze(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(g$t,"similarFilesEnabled");f();f();f();f();f();var dX="[...]",A$t=0,TC=-1;function rc(){return A$t++}s(rc,"getAvailableNodeId");function y$t(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(y$t,"elideChildren");function $Ce(t,e=dX){return r=>t.tokenLength(y$t(r,e))}s($Ce,"getTokenizerCostFunction");f();var q3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,i=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),i<this.size&&this.heap[i].priority>this.heap[r].priority&&(r=i),r===e)break;let o=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=o,e=r}}};var p0=class{constructor(e,r,n,i,o=0,a=!1,c=dX,l=!1){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=l;this.weightFromChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/Math.max(this.cost,1)}get isRenderedChildRequired(){return this.requireRenderedChild||this.weightFromChild}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new q3([]);let i=new q3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.weightFromChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.weightFromChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function Qze(t,e={}){let{budget:r,mask:n,costFunction:i}=e,o=n??[],a=new Set(Array.isArray(o)?o:[o]);if((r??t.cost)<t.cost||a.has(t.id))return{text:t.elisionMarker,cost:i?i(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let p=s(y=>a.has(y.id),"elider"),m=[],h=new Map;if(jCe(t,m,p,h),m.length===0)return WCe(t,i);let g=m.join(""),A=i?i(g):[...h.values()].reduce((y,x)=>y+x.cost,0);return{text:g,cost:A,renderedNodes:h}}let c=new Map,l=[],u=new q3([{item:t,priority:t.value}]),d=r;for(;d>0&&u.size>0;){let{item:p}=u.pop();if(!a.has(p.id)&&p.cost<=d){d-=p.cost,c.set(p.id,p),l.push(p);for(let m of p.children)u.insert(m,m.value)}}for(;c.size>0;){let p=[],m=s(y=>!c.has(y.id),"elider"),h=new Map;if(jCe(t,p,m,h),p.length===0)return WCe(t,i);let g=p.join("");if(i===void 0){let y=[...h.values()].reduce((x,I)=>x+I.cost,0);return{text:g,cost:y,renderedNodes:h}}let A=i(g);if(A<=r)return{text:g,cost:A,renderedNodes:h};for(c=h;l.length>0&&A>r;){let y=l.pop();c.has(y.id)&&(A-=y.cost,c.delete(y.id))}if(l.length===0)break}return WCe(t,i)}s(Qze,"render");function WCe(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}s(WCe,"renderEmpty");function jCe(t,e,r,n,i=!1){let o=e.length;if(r(t))return o>=2&&(i||e[o-2]===t.elisionMarker&&e[o-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let a=t.isRenderedChildRequired,c=!0;for(let[l,u]of t.children.entries())e.push(t.text[l]??""),c=jCe(u,e,r,n,u.canMerge&&!c),a&&=!c;if(a){for(;e.length>o;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}s(jCe,"recursivelyRender");function gO(t,e,r=dX){let n=t.children.map(a=>gO(a,e,r));r=t.elisionMarker??r;let i=e(t);return new p0(t.id,t.text,n,i,0,t.canMerge,r)}s(gO,"snapshot");var CT=new p0(rc(),[""],[],0);f();function gh(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(gh,"setDefault");var $ze=2e4,Uze=0,qze=new kr;function Wze(t,e,r,n){Uze++;let i=r.promptOpts?.tokenizer??"o200k_base",o=performance.now(),{root:a,mask:c,statistics:l}=t.snapshot(r,n),u=performance.now(),d=new Set(c),p=qze?.get(a.id),m;if(p&&p.budget>=e&&p.render.cost<=e&&p.tokenizer===i&&d.size===p.mask.size&&[...d].every(I=>p.mask.has(I)))m=p.render;else{let I=Wi(i);m=Qze(a,{budget:e,mask:c,costFunction:s(R=>I.tokenLength(R),"costFunction")}),qze.set(a.id,{budget:e,mask:d,tokenizer:i,render:m})}let{text:h,cost:g,renderedNodes:A}=m,y=performance.now();for(let[I,S]of l?.entries()??[])S.actualTokens=A.get(I)?.cost??0;let x={renderId:Uze,rendererName:"renderNode",tokenizer:i,elisionTimeMs:y-u,renderTimeMs:u-o,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:g}]};return{root:a,renderedNodes:A,text:h,cost:g,metadata:x}}s(Wze,"renderWithMetadata");function jze(t,e){return r=>{let n=r.text.join("")+`
`;return gh(e,n,()=>t.tokenLength(n)+1)}}s(jze,"cachedLineCostFunction");function Gze(t,e,r){let i=t.split(`
`).map(d=>({id:rc(),text:[d],children:[],canMerge:!0})),o=[""];i.length>=1&&o.push(...Array(i.length-1).fill(`
`),"");let a={id:rc(),text:o,children:i,canMerge:!0},l=gO(a,s(d=>d.id===a.id?0:e(d),"nodeCostFunction")),u=r?i.length:1;for(let d of l.children)d.weight=u*Math.max(1,d.cost),u+=r?-1:1;return l}s(Gze,"getLinewiseNode");var fX=class{constructor(){this.name="basicPrefix";this.costCache=new kr($ze)}static{s(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r,promptOpts:n}=e,i=r.textDocument.getText({start:{line:0,character:0},end:r.position}),o=Wi(n?.tokenizer),a=jze(o,this.costCache);return{root:Gze(i,a,!1)}}},Hze={root:CT,text:"",cost:0},pX=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new kr(5);this.costCache=new kr($ze)}static{s(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:i}=e,a=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(a==="")return Hze;let c=this.cache.get(r.textDocument.uri)||Hze;if(c.text===a)return c;let l=this.ctx.get(Nt).suffixMatchThreshold(n);if(c.text!==""){let h=new HI,g=h.takeFirstTokens(a,oO);if(g.tokens.length>0&&100*wJ(g.tokens,h.takeFirstTokens(c.text,oO).tokens)?.score<l*g.tokens.length)return c}let u=Wi(i?.tokenizer),d=jze(u,this.costCache),p=Gze(a,d,!0),m=p.children.reduce((h,g)=>h+g.cost+1,0);return{root:p,cost:m,text:a}}},mX=class{constructor(){this.name="traitProvider"}static{s(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Wi(n?.tokenizer);if(!r||r.traits.length===0)return{root:CT};let o=new Map,a=0,c=[],l=new Map;for(let m of r.traits){let h=rc(),g=`${m.name}: ${m.value}`,A=new p0(h,[g],[],i.tokenLength(g));c.push(A),l.set(h,{componentPath:m.id,source:m,expectedTokens:A.cost}),o.set(h,m.importance??0),a+=m.importance??0}let d=[`Related context:
`,...new Array(c.length).fill(`
`)],p=new p0(rc(),d,c,0,0,!0,"");return p.updateWeights(m=>(o.get(m.id)??0)/(a||1)),{root:p,statistics:l}}},hX=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{s(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,i=Wi(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:CT};let o=new Map;for(let h of r.codeSnippets){let g=h.uri;gh(o,g,()=>[]).push(h)}let a=new Map,c=[],l=new Map,u=0,d=this.ctx.get(Cr);for(let[h,g]of o.entries()){let A=d.getRelativePath({uri:h})??h,x=[`Compare ${g.length>1?"these snippets":"this snippet"} from ${A}:
`,...new Array(g.length).fill(`
`)],I=[];for(let S of g){let R=rc();l.set(R,S.importance??0);let B=new p0(R,[S.value],[],i.tokenLength(S.value));I.push(B),u+=S.importance??0,a.set(R,{componentPath:S.id,source:S,expectedTokens:B.cost})}c.push(new p0(rc(),x,I,i.tokenLength(x.join("")),0,!0,""))}let p=new Array(c.length+1).fill(""),m=new p0(rc(),p,c,0,0,!0,"");return m.updateWeights(h=>(l.get(h.id)??0)/(u||1)),{root:m,statistics:a}}},gX=class{constructor(e,r){this.name=e;this.components=r}static{s(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(u=>u.snapshot(e,r)),i=n.map(u=>u.root).filter(u=>u.id!==CT.id);if(i.length===0)return{root:CT};let o=["",...Array(i.length-1).fill(`
`),""],a=new p0(rc(),o,i,0,0,!0,"",!0),c=[],l=new Map;for(let u of n){for(let[d,p]of u.statistics?.entries()??[])l.set(d,p);u.mask&&c.push(...u.mask)}return{root:a,mask:c,statistics:l}}};var C$t=.8,AX=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{s(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Nt).suffixPercent(e),n=this.ctx.get(Nt).stableContextPercent(e),i=this.ctx.get(Nt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(i<0||i>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${i}`);let o=100-r-n-i;if(o<=1||o>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${o}`);return{prefix:o/100,suffix:r/100,stableContext:n/100,volatileContext:i/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:i,telemetryData:o,promptOpts:a}=e,c=await this.failFastPrompt(i.textDocument,r);if(c)return c;let l=performance.now(),u;w3(this.ctx,o)&&(u=await this.resolveContext(n,i,o,r));let d=performance.now()-l,p={},m={renderId:this.renderId,rendererName:"w",tokenizer:a?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:d,componentStatistics:[]},h=i.textDocument.detectedLanguageId,{maxPromptLength:g}=Q3(this.ctx,o,h),A=this.getComponentAllocation(o),y=A.suffix*g,x=this.components.suffix.estimatedCost?.(e,u),I=["stableContext","volatileContext","prefix","suffix"];y>C$t*(x??0)&&(I=["stableContext","volatileContext","suffix","prefix"]);let S=0;for(let z of I){let Q=S+g*A[z],U=Wze(this.components[z],Q,e,u);S=Q-U.cost,p[z]=U,v$t(m,U.metadata)}let[R,B]=yT(p.prefix.text),M=performance.now(),O=w3(this.ctx,o)?this.telemetrizeContext(n,m.componentStatistics,u?.resolvedContextItems??[]):[],K=[p.stableContext.text.trim(),p.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:a?.separateContext?R:bC(K.join(`
`),h)+`

`+R,prefixTokens:p.prefix.cost+p.stableContext.cost+p.volatileContext.cost,suffix:p.suffix.text,suffixTokens:p.suffix.cost,context:a?.separateContext?K:void 0,isFimEnabled:p.suffix.text.length>0},computeTimeMs:M-l,trailingWs:B,neighborSource:new Map,metadata:m,contextProvidersTelemetry:O}}async resolveContext(e,r,n,i){let o=await this.ctx.get(d0).resolution(e),{textDocument:a}=r,c=o.filter(fJ),l=rX(this.ctx,e,c);nX("contextProvider.traits",this.ctx,l,a.detectedLanguageId,a.detectedLanguageId,n);let u=await bJ(this.ctx,e,c,a.detectedLanguageId);return{traits:l,codeSnippets:u,resolvedContextItems:o}}telemetrizeContext(e,r,n){let i=lJ(r);this.ctx.get(tl).getStatisticsForCompletion(e).computeMatch(i);let o=dJ(this.ctx,e,n);return an.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(o)}'`),o}async failFastPrompt(e,r){if(r?.isCancellationRequested)return uE;if((await this.ctx.get(el).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return uX;if(e.getText().length<cX)return lX}errorPrompt(e){return Ma(this.ctx,e,"WorkspaceContextPromptFactory"),U3}};function v$t(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}s(v$t,"aggregateMetadata");f();f();function E$t(t){return t.id!==void 0}s(E$t,"isNodeItem");function x$t(t){return!("uri"in t)&&!("id"in t)}s(x$t,"isNullItem");var b$t={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},vT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",H3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==TC),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},yX=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=b$t;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new H3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new H3(r.items):new H3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(TC);if(c!==void 0&&c>0){o.delete(TC);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),d=c/Math.max(u.length,1);for(let p of u)o.set(p,d)}else for(let[u,d]of[...o.entries()])o.set(u,d+c*(d/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new H3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(x$t(r))return{weight:r.weight,uri:vT,id:TC};let n=E$t(r)?r.id:TC,i=r.uri??this.activeContext.getUri(n)??vT;return i===vT&&(n=TC),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0||isNaN(c))continue;let l=gh(r,o,()=>new Map),u=TC;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let d=l!==vT?this.activeContext.normalizeUri(l)??vT:vT;for(let[p,m]of u.entries())l===vT||p===TC?n.set(d,(n.get(d)??0)+m):r.push({uri:d,id:p,weight:m}),i+=m}if(i<=0)return[];n.delete(vT),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:TC,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};f();f();f();var Rp=class{static{s(this,"FileSearch")}};f();f();var CX=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*zze(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},I$t=6,vX=class{constructor(e,r,n,i){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=rc();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(i??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,i=n;for(;i;)n=i,i=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=rc()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:d}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:d})}let o=i[0].root.parent,a=e.parts[0].root.parent;if((o&&this.canMergeChildren(o))!==(a&&this.canMergeChildren(a)))return this.invalidateNode(e),!1;let c=Vze(i,this.document);for(let[u,d]of c.entries())if(e.text[u]!==d)return this.invalidateNode(e),!1;let l=new CX(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=Vze(e,this.document),i=new CX(rc(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);this.canBeNode(o)&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let A=g.endOffset-g.startOffset;h-=A,r-=A}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let d=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);d.push(this.createNode(h,p)),p=!0}return d}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>I$t}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function Vze(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(Vze,"buildText");function*zze(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*zze(r,e))}s(zze,"walk");f();f();f();var EX=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.range={start:m,end:m};return}let d=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+d+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)}}static{s(this,"IndentationNode")}get type(){return this.raw.type}};function GCe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:GCe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:d}=n[l];if(d.range.end.line>=o){let p=GCe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(d),o=Math.min(d.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new EX(rc(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(GCe,"recursivelyBuildNode");function Yze(t){let e=B2(t.getText(),t.detectedLanguageId);return GCe(e,t.lineCount,t)??new EX(rc(),e,[],0,t.lineCount-1,t)}s(Yze,"parse");var Kze={source:"indentation",parse:Yze,update(t,e){return{root:Yze(e),remapper:s(()=>{},"remapper")}},dispose:s(()=>{},"dispose"),labeler:{isIdentifier:s(t=>!1,"isIdentifier"),isText:s(t=>!0,"isText")}};async function Jze(t){return Promise.resolve(Kze)}s(Jze,"getParser");var T$t=new vt("WorkspaceContextManager"),xX=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},bX=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},Xze=5e3,IX=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new kr(Xze);this.allowedExtensions=new Set(S2);this.invalidDocumentCache=new ZS(Xze,this.config.InvalidCacheTime),this.cachedDocuments=new Q$(this.config.MaxActiveFiles)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(Cr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>zv[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if(hj(e),r=Cl(e),!(this.ctx.get(Cr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(SLe(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new xX(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new bX(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new uh;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new bX(n,i=>this.disposeDocument(i))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let a=new Set(r.getAllIds());r.update(n);let c=new Set(r.getAllIds()),l=[...c].filter(d=>!a.has(d)),u=[...a].filter(d=>!c.has(d));return this.recordDocumentChanges(e,{created:l,invalidated:u}),r}let o=new vX(n,i,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:o.getAllIds(),invalidated:[]}),o}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=gh(this.createdNodes,e,()=>new Set),i=gh(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await Jze(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(Cr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(Rp).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){T$t.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,3600*1e3);return}let o=await this.ctx.get(vn).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};var Zze=Fe(require("events"));var w$t={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},mA=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new uh;this.config=w$t;this.emitter=new Zze.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new IX(e,this.config),this.coordinator=new yX(this.contextManager,this.config),this.tokenEventDisposable=ws(e,r=>{this.maybeStart(r)})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(e){if(this.didStart||this.didDispose)return;let r=$i(this.ctx,qt.UseWorkspaceContextCoordinator);if(r===void 0)try{let n=await this.ctx.get(Nt).updateExPValuesAndAssignments(void 0,void 0,e);r=this.isEnabled(n)}catch{}r&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return $i(this.ctx,qt.UseWorkspaceContextCoordinator)??this.ctx.get(Nt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),In.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),In.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights(),r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await vC(n)}}}catch(e){Vv(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function VCe(t,e){let r=Wl(t,e,"event.WorkspaceContextUpdate");return t.get(mA).onUpdate(r)}s(VCe,"onWorkspaceContextUpdate");f();var S$t=2e4,TX=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=CT;this.costFunction=$Ce(new HI);this.disposables=[];this.costCache=new kr(S$t);this.rootWithPathCache=new kr;this.disposables.push(VCe(e,r=>{(this.nextUpdateTime===void 0||performance.now()>=this.nextUpdateTime)&&setTimeout(()=>{this.update(r.weights,r.context)},0)}))}static{s(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;this.nextUpdateTime=this.lastUpdateTime!==void 0?this.lastUpdateTime+this.ctx.get(Nt).workspaceContextCacheTime(n):performance.now();let i=gh(this.rootWithPathCache,r.textDocument.uri,()=>{let a=$Ce(Wi(e.promptOpts?.tokenizer));this.costFunction=l=>gh(this.costCache,l.id,()=>a(l));let c=this.getPathMarker(r);return new p0(rc(),[`${c}
`,""],[this.root],1,0,!0,"")}),o=this.getMask(r.textDocument.uri);return{root:i,mask:o}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(Cr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?bC(kJ(o),o.languageId):bC(RJ(o),o.languageId)}update(e,r){this.rootWithPathCache.clear(),this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=gO(o,this.costFunction);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode(),this.lastUpdateTime=performance.now()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new p0(rc(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:rc(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(Cr).getRelativePath({uri:e});return bC(`Related portions of ${i??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};f();f();var wX=class extends AX{static{s(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new TX(e),prefix:new fX,suffix:new pX(e),volatileContext:new gX("volatileContext",[new mX,new hX(e)])};super(e,r)}};var eYe=Fe(ui());var dE=class{static{s(this,"CompletionsPromptFactory")}};function SX(t,e,r){return new zCe(new YCe(new KCe(t,new aX(t,e,r),new wX(t),R$t)))}s(SX,"createCompletionsPromptFactory");var zCe=class extends dE{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return uE;try{return await this.delegate.prompt(r,n)}catch{return U3}}},_$t=1200,YCe=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new eYe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(tYe)},_$t)})])}},KCe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function R$t(t,e){let r=t.get(mA);return r.isEnabled(e)&&r.isActive()}s(R$t,"workspaceContextEnabledAndActive");var cX=10,lX={type:"contextTooShort"},uX={type:"copilotContentExclusion"},U3={type:"promptError"},uE={type:"promptCancelled"},tYe={type:"promptTimeout"};function yT(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(yT,"trimLastLine");function $3(t,e,r,n,i,o={}){let c=t.get(Cr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=P$t(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=Lze(t,n);return t.get(dE).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s($3,"extractPrompt");function k$t(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:bC(n,e)}s(k$t,"addNeighboringCellsToPrompt");function P$t(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&YJ(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>k$t(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(P$t,"applyEditsForNotebook");function Q3(t,e,r){let i=t.get(Nt).maxPromptCompletionTokens(e)-tJ(t),o=GVe(e,r),a=xJ(t,e,r),c=t.get(Nt).suffixPercent(e),l=t.get(Nt).suffixMatchThreshold(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l}}s(Q3,"getPromptOptions");f();f();var rYe=2.98410452738298,nYe=-.838732736843507,iYe=1.50314646255716,oYe=-.237798634012662,_X={python:.314368072478742},sYe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var D$t={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function B$t(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(B$t,"linearInterpolation");var W3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},JCe=class{constructor(e,r,n){this.link=D$t;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return B$t(n,this.logitsToQuantiles)}},aYe=new JCe(rYe,[new W3("compCharLen",nYe,t=>Math.log(1+t)),new W3("meanLogProb",iYe),new W3("meanAlternativeLogProb",oYe)].concat(Object.entries(_X).map(t=>new W3(t[0],t[1]))),sYe);function cYe(t,e){let r={...e.measurements};return Object.keys(_X).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),aYe.predict(t,r)}s(cYe,"ghostTextScoreConfidence");function lYe(t,e){let r={...e.measurements};return Object.keys(_X).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),aYe.quantile(t,r)}s(lYe,"ghostTextScoreQuantile");f();f();var N$t=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function RX(t){let e=t.slice();return e.reverse(),uYe(e)||uYe(e.filter(r=>r.trim().length>0))}s(RX,"isRepetitive");function uYe(t){let e=L$t(t);for(let r of N$t){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(uYe,"isRepeatedPattern");function L$t(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(L$t,"kmp_prefix_function");function M$t(t,e,r,n){let i="}";try{i=Gqe(e.detectedLanguageId)??"}"}catch{}return F$t({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(M$t,"maybeSnipCompletion");function F$t(t,e,r,n){let i=O$t(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let A=e.line+1+d+l;if(p=A>=t.getLineCount()?void 0:t.getLineText(A),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(F$t,"maybeSnipCompletionImpl");function O$t(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(O$t,"splitByNewLine");function Q$t(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(Q$t,"matchesNextLine");function AO(t,e,r,n,i,o){if(RX(n.tokens)){let c=$r.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Dt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(Q$t(e,r,a.completionText,!i)){let c=$r.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Dt(t,"completion.alreadyInDocument",c),Dt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=M$t(t,e,r,a.completionText),a.completionText?a:void 0}s(AO,"postProcessChoiceInContext");function dYe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(dYe,"checkSuffix");var hYe=Fe(Ub());var ss=new vt("ghostText");var q$t=200,fYe=20;async function gYe(t,e,r,n,i,o,a){ss.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=x3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:Xqe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:c,temperature:l,code_annotations:!1},p=$i(t,qt.ModelAlwaysTerminatesSingleline)??t.get(Nt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&lT.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let A={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},y=await t.get(u0).fetchAndStreamCompletions(t,A,r,i,n);return y.type==="failed"?{type:"failed",reason:y.reason,telemetryData:ec(r)}:y.type==="canceled"?(ss.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:y.reason,telemetryData:fT(r)}):a(h,y.getProcessingTime(),y.choices)}catch(A){if(hd(A))return{type:"canceled",reason:"network request aborted",telemetryData:fT(r,{cancelledNetworkRequest:!0})};if(ss.exception(t,A,"Error on ghost text request"),t.get(Yd).notifyUser(t,A),MP(t))throw A;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:ec(r)}}}s(gYe,"genericGetCompletionsFromNetwork");function XCe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(XCe,"postProcessChoices");async function H$t(t,e,r,n,i){return gYe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return ss.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:ec(r)};if(n?.isCancellationRequested)return ss.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:fT(r)};let d=u.value;if(d===void 0)return ss.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:ec(r)};yYe(t,"performance",d,o,a),ss.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=XCe(d,e);p&&(kX(t,e,p),ss.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;ss.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let A=XCe(g,e,h);A&&(h.push(A),kX(t,e,A))}})();return Tg(t)&&await m,p?{type:"success",value:[ZCe(p,{forceSingleLine:!1}),m],telemetryData:ec(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:ec(r)}})}s(H$t,"getCompletionsFromNetwork");async function $$t(t,e,r,n,i){return gYe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return ss.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:fT(r)};let d=XCe(u,e,l);d&&l.push(d)}if(l.length>0){for(let u of l)kX(t,e,u);yYe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:ec(r),telemetryBlob:r,resultType:3}})}s($$t,"getAllCompletionsFromNetwork");function ZCe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(ZCe,"makeGhostAPIChoice");function pYe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(pYe,"takeNLines");async function W$t(t,e,r,n,i,o,a,c){let l=t.get(Nt).multilineAfterAcceptLines(c),u=t.get(tA).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:pYe(l),stop:[`

`],maxTokens:fYe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(d=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let d;try{d=await Z$t(t,u,e.textDocument,e.position,o,a,n)}catch{d={requestMultiline:!1}}if(!a&&d.requestMultiline&&t.get(Nt).singleLineUnlessAccepted(c)&&(d.requestMultiline=!1),d.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=hs.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...mYe(t,u,e.textDocument,p,d.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:pYe(l),stop:[`

`],maxTokens:fYe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...mYe(t,u,e.textDocument,e.position,d.blockPosition,r,!1,n.prompt,c)}}}}s(W$t,"getGhostTextStrategy");function mYe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&lT.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Nt).longLookaheadSize(l):t.get(Nt).shortLookaheadSize(l);return{finishedCb:new rJ(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};kX(t,h,m)}).getFinishedCallback(),maxTokens:q$t}}return{finishedCb:a?nO(t,r,n):u=>{}}}s(mYe,"buildFinishedCallback");var j$t={isCycling:!1,promptOnly:!1,isSpeculative:!1};function G$t(t,e,r){let n=$i(t,qt.CompletionsDebounce)??t.get(Nt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=Ea()-r.issuedTime;return Math.max(0,n-i)}s(G$t,"getRemainingDebounceMs");function yO(t,e,r){return r?.isCancellationRequested||e!==t.get(m0).currentRequestId}s(yO,"inlineCompletionRequestCancelled");async function V$t(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(y){let x=Ea();c.push([y,x-a]),a=x}s(l,"recordPerformance"),l("telemetry");let u=t.get(Nt);if(yO(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:ec(n)};let d=Y$t(e.textDocument,e.position);if(d===void 0)return ss.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:ec(n)};let p=WI(t,n),m={...j$t,...o,tokenizer:p.tokenizer},h=await $3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return ss.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:ec(n)};if(h.type==="contextTooShort")return ss.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:ec(n)};if(h.type==="promptError")return ss.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:ec(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return ss.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:ec(n)};if(h.type==="promptTimeout")return ss.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:ec(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return ss.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:ec(n)};let g=G$t(t,m,n);return g>0&&(ss.debug(t,`Debouncing ghost text request for ${g}ms`),await vC(g),yO(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:ec(n)}:t.get(Io).withProgress(async()=>{let[y]=yT(e.textDocument.getText(hs.range(hs.position(0,0),e.position))),x=t.get(m0).hasAcceptedCurrentCompletion(y,h.prompt.suffix),I=h.prompt,S=await W$t(t,e,y,h,m.isCycling,d,x,n);l("strategy");let R=z$t(t,y,I,S.requestMultiline);l("cache");let B=jI(t,e.textDocument.uri),M={blockMode:S.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:B,engineModelId:p.modelId,ourRequestId:r,prefix:y,prompt:h.prompt,multiline:S.requestMultiline,indentation:yJ(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:S.stop,maxTokens:S.maxTokens,afterAccept:x};M.headers={...M.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let O=iWt(t,e.textDocument,M,e.position,h,n,p,m);if(R===void 0&&!m.isCycling&&t.get(l0).shouldWaitForAsyncCompletions(y,h.prompt)){let $=await t.get(l0).getFirstMatchingRequestWithTimeout(r,y,h.prompt,m.isSpeculative,O);if(l("asyncWait"),$){let X=!S.requestMultiline;R=[[ZCe($[0],{forceSingleLine:X})],4]}if(yO(t,r,i))return ss.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:ec(O)}}let K=S.blockMode==="moremultiline"&&lT.isSupported(e.textDocument.detectedLanguageId);if(R!==void 0&&(R[0]=R[0].map($=>AO(t,e.textDocument,e.position,$,K,ss)).filter($=>$!==void 0)),R!==void 0&&R[0].length===0)return ss.debug(t,`Found empty inline suggestions locally via ${b3(R[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:ec(O)};if(R!==void 0&&R[0].length>0&&(!m.isCycling||R[0].length>1))ss.debug(t,`Found inline suggestions locally via ${b3(R[1])}`);else{if(m.isCycling){let $=await $$t(t,M,O,i,S.finishedCb);if($.type==="success"){let X=R?.[0]??[];$.value[0].forEach(ie=>{X.findIndex(ae=>ae.completionText.trim()===ie.completionText.trim())===-1&&X.push(ie)}),R=[X,3]}else if(R===void 0)return $}else{let $=s((te,pe)=>(t.get(l0).updateCompletion(r,te),S.finishedCb(te,pe)),"finishedCb"),X=new In.CancellationTokenSource,ie=H$t(t,M,O,X.token,$);t.get(l0).queueCompletionRequest(r,y,h.prompt,X,ie);let ae=await t.get(l0).getFirstMatchingRequest(r,y,h.prompt,m.isSpeculative);if(ae===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:ec(O)};R=[[ae[0]],4]}l("network")}if(R===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:ec(O)};let[V,z]=R,Q=V.map($=>AO(t,e.textDocument,e.position,$,K,ss)).filter($=>$!==void 0),U=$i(t,qt.CompletionsDelay)??u.completionsDelay(n),Z=Ea()-n.issuedTime,J=Math.max(U-Z,0);if(z!==2&&!m.isCycling&&J>0&&(ss.debug(t,`Waiting ${J}ms before returning completion`),await vC(J),yO(t,r,i)))return ss.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:fT(O)};let j=[];for(let $ of Q){let X=nWt(t,e.textDocument,M,$,O),ie=d?dYe(e.textDocument,e.position,$):0,te={completion:eWt($.choiceIndex,$.completionText,h.trailingWs),telemetry:X,isMiddleOfTheLine:d,suffixCoverage:ie,copilotAnnotations:$.copilotAnnotations,clientCompletionId:$.clientCompletionId};j.push(te)}return O.properties.clientCompletionId=j[0]?.clientCompletionId,O.measurements.foundOffset=j?.[0]?.telemetry?.measurements?.foundOffset??-1,ss.debug(t,`Produced ${j.length} results from ${b3(z)} at ${O.measurements.foundOffset} offset`),yO(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:fT(O)}:(m.isSpeculative||t.get(m0).setGhostText(y,h.prompt.suffix,Q,z),l("complete"),{type:"success",value:[j,z],telemetryData:ec(O),telemetryBlob:O,resultType:z,performanceMetrics:c})})}s(V$t,"getGhostTextWithoutAbortHandling");async function e1e(t,e,r,n){let i=Ar();t.get(m0).currentRequestId=i;let o=await rWt(t,e.textDocument,i,n);await I2.catch(()=>{});try{return t.get(d0).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(CC).notifyRequest(e,i,o,r,n),await V$t(t,e,i,o,r,n)}catch(a){if(hd(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:fT(o,{cancelledNetworkRequest:!0})};throw a}}s(e1e,"getGhostText");function z$t(t,e,r,n){let i=t.get(m0).getCompletionsForUserTyping(e,r.suffix),o=tWt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(z$t,"getLocalInlineSuggestion");function Y$t(t,e){let r=K$t(e,t),n=J$t(e,t);return r&&!n?void 0:r&&n}s(Y$t,"isInlineSuggestion");function K$t(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(K$t,"isMiddleOfTheLine");function J$t(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(J$t,"isValidMiddleOfTheLinePosition");function X$t(t,e){return e.lineAt(t).text.trim().length===0}s(X$t,"isNewLine");var fE=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function Z$t(t,e,r,n,i,o,a){if(t.get(fE).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Dt(t,"ghostText.longFileMultilineSkip",$r.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&lT.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await $Ge(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&X$t(n,r))return{requestMultiline:!0};let l=!1;return!i&&vp(r.detectedLanguageId)?l=await AJ(r,n):i&&vp(r.detectedLanguageId)&&(l=await AJ(r,n)||await AJ(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=VGe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(Z$t,"shouldRequestMultiline");function kX(t,e,r){t.get(lA).append(e.prefix,e.prompt.suffix,r)}s(kX,"appendToCache");function eWt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(eWt,"adjustLeadingWhitespace");function tWt(t,e,r,n){let i=t.get(lA).findAll(e,r);return i.length===0?(ss.debug(t,"Found no completions in cache"),[]):(ss.debug(t,`Found ${i.length} completions in cache`),i.map(o=>ZCe(o,{forceSingleLine:!n})))}s(tWt,"getCompletionsFromCache");async function rWt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=$r.createAndMarkAsIssued(i);return await t.get(Nt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(rWt,"createTelemetryWithExp");function nWt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,AYe(l,e),l.extendWithRequestId(o),l.measurements.confidence=cYe(t,l),l.measurements.quantile=lYe(t,l),ss.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(nWt,"telemetryWithAddData");function iWt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);AYe(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(hs.range(p.range.start,n)),h=e.getText(hs.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(I=>[I[0],I[1].map(S=>(0,hYe.SHA256)(S).toString())]),A={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},y={...k4(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(A.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(A.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let x=u.extendedBy(A,y);return Dt(t,"ghostText.issued",x),u}s(iWt,"telemetryIssued");function AYe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(AYe,"addDocumentTelemetry");function yYe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Dt(t,`ghostText.${e}`,c)}s(yYe,"telemetryPerformance");var m0=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&CYe(this.choices[0].completionText,n))return oWt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function oWt(t,e){return t.filter(r=>CYe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(oWt,"adjustChoicesStart");function CYe(t,e){return t.startsWith(e)&&t.length>e.length}s(CYe,"startsWithAndExceeds");f();f();f();var pR=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Cr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var t1e=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??In.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),d=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function wC(t,e){return new t1e(t,e)}s(wC,"createCompletionState");f();f();f();f();f();f();var vYe="code-referencing";var h0=new vt(vYe);var sWt=3e3,r1e=2,EYe=256,xYe=Math.log(EYe)/Math.log(r1e)/r1e,hA={connection:"disabled",maxAttempts:xYe,retryAttempts:0,initialWait:!1},PX,DX=[];function aWt(){if(PX)return PX;function t(x){return DX.push(x),()=>{let I=DX.indexOf(x);I!==-1&&DX.splice(I,1)}}s(t,"subscribe");function e(){for(let x of DX)x()}s(e,"afterUpdateConnection");function r(x){hA.connection!==x&&(hA.connection=x,e())}s(r,"updateConnection");function n(){return hA.connection==="connected"}s(n,"isConnected");function i(){return hA.connection==="disconnected"}s(i,"isDisconnected");function o(){return hA.connection==="retry"}s(o,"isRetrying");function a(){return hA.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function d(){r("disabled")}s(d,"setDisabled");function p(x){hA.initialWait!==x&&(hA.initialWait=x)}s(p,"setInitialWait");function m(x,I=sWt){o()||(u(),p(!0),g(x,I))}s(m,"enableRetry");function h(){return hA.initialWait}s(h,"isInitialWait");async function g(x,I){h0.info(x,`Attempting to reconnect in ${I}ms.`),await A(I),p(!1);let S=x.get(ln);function R(B,M){if(B>EYe){h0.info(M,"Max retry time reached, disabling."),d();return}let O=s(async()=>{hA.retryAttempts=Math.min(hA.retryAttempts+1,xYe);try{h0.info(M,`Pinging service after ${B} second(s)`);let K=await S.fetch(new URL("_ping",B4(M)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(K.status!==200||!K.ok)R(B**2,M);else{h0.info(M,"Successfully reconnected."),c();return}}catch{R(B**2,M)}},"tryAgain");setTimeout(()=>void O(),B*1e3)}s(R,"succeedOrRetry"),h0.info(x,"Attempting to reconnect."),R(r1e,x)}s(g,"attemptToPing");let A=s(x=>new Promise(I=>setTimeout(I,x)),"timeout");function y(x){return{dispose:t(x)}}return s(y,"listen"),PX={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:d,enableRetry:m,listen:y,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},PX}s(aWt,"registerConnectionState");var mR=aWt();f();var eu={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},CO={[eu.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[eu.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[eu.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function n1e(t){return t===401?eu.Unauthorized:t===400?eu.BadArguments:t===404?eu.NotFound:t===429?eu.RateLimit:t>=500&&t<600?eu.InternalError:t>=600?eu.ConnectionError:eu.Unknown}s(n1e,"getErrorType");function SC(t,e,r={}){return{kind:"failure",reason:n1e(Number(t)),code:Number(t),msg:e,meta:r}}s(SC,"createErrorResponse");f();var cWt=/^[1-6][0-9][0-9]$/,lWt=/([A-Z][a-z]+)/,uWt="code_referencing",vO=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[uWt,this.baseKey,...e].join(".")}},i1e=class extends vO{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=$r.createAndMarkAsIssued();Dt(e,r,n)}handleFocus({context:e}){let r=$r.createAndMarkAsIssued(),n=this.buildKey("focus","count");Dt(e,n,r)}handleWrite({context:e}){let r=$r.createAndMarkAsIssued(),n=this.buildKey("write","count");Dt(e,n,r)}},Hni=new i1e,o1e=class extends vO{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=$r.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Dt(e,i,n)}handleDismiss({context:e,actor:r}){let n=$r.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Dt(e,i,n)}},$ni=new o1e,s1e=class extends vO{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=$r.createAndMarkAsIssued({origin:r,reason:n});qg(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=$r.createAndMarkAsIssued({origin:r,reason:n});qg(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(cWt)){h0.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(lWt).filter(c=>!!c).join("_").toLowerCase(),a=$r.createAndMarkAsIssued({message:i});qg(e,this.buildKey(o,r),a)}},BX=new s1e;var dWt="twirp/github.snippy.v1.SnippyAPI";async function a1e(t,e,r,n){let i;try{i=await t.get(qr).getToken()}catch{return mR.setDisconnected(),SC(401,CO[eu.Unauthorized])}if(h0.info(t,`Calling ${e}`),mR.isRetrying())return SC(600,"Attempting to reconnect to the public code matching service.");if(mR.isDisconnected())return SC(601,"The public code matching service is offline.");let o;try{o=await t.get(ln).fetch(km(t,i,"origin-tracker",`${dWt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...ip(t)},signal:n})}catch{return mR.enableRetry(t),SC(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let A=g.message;throw BX.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:A}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:d}=c,p=Number(l),m=n1e(p),h=u||"unknown error";switch(m){case eu.Unauthorized:return SC(l,CO[eu.Unauthorized],d);case eu.BadArguments:return SC(l,h,d);case eu.RateLimit:return mR.enableRetry(t,60*1e3),SC(l,CO.RateLimitError,d);case eu.InternalError:return mR.enableRetry(t),SC(l,CO[eu.InternalError],d);default:return SC(l,h,d)}}s(a1e,"call");f();var NX=E.Object({kind:E.Literal("failure"),reason:E.String(),code:E.Number(),msg:E.String(),meta:E.Optional(E.Any())}),pWt=E.Object({matched_source:E.String(),occurrences:E.String(),capped:E.Boolean(),cursor:E.String(),github_url:E.String()}),bYe=E.Object({source:E.String()}),mWt=E.Object({snippets:E.Array(pWt)}),IYe=E.Union([mWt,NX]),TYe=E.Object({cursor:E.String()}),hWt=E.Object({commit_id:E.String(),license:E.String(),nwo:E.String(),path:E.String(),url:E.String()}),gWt=E.Object({has_next_page:E.Boolean(),cursor:E.String()}),AWt=E.Object({count:E.Record(E.String(),E.String())}),yWt=E.Object({file_matches:E.Array(hWt),page_info:gWt,license_stats:AWt}),wYe=E.Union([yWt,NX]);async function SYe(t,e,r){let n=await a1e(t,"Match",{method:"POST",body:rR(bYe,{source:e})},r);return rR(IYe,n)}s(SYe,"Match");async function _Ye(t,{cursor:e},r){let n=await a1e(t,"FilesForMatch",{method:"POST",body:rR(TYe,{cursor:e})},r);return rR(wYe,n)}s(_Ye,"FilesForMatch");f();var EO=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),LX=65;function EWt(t){let e=0,r;EO.lastIndex=0;do if(r=EO.exec(t),r&&(e+=1),e>=LX)break;while(r);return e}s(EWt,"lexemeLength");function xWt(t,e){let r=0,n;EO.lastIndex=0;do if(n=EO.exec(t),n&&(r+=1,r>=e))return EO.lastIndex;while(n);return t.length}s(xWt,"offsetFirstLexemes");function RYe(t,e){let r=t.split("").reverse().join(""),n=xWt(r,e);return r.length-n}s(RYe,"offsetLastLexemes");function xO(t){return EWt(t)>=LX}s(xO,"hasMinLexemeLength");function IWt(t){return fC.Check(NX,t)}s(IWt,"isError");async function kYe(t,e){let r=await e();if(IWt(r)){BX.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(kYe,"snippyRequest");function PYe(t){return"kind"in t&&t.kind==="failure"}s(PYe,"isMatchError");async function DYe(t,e,r,n){let o=await t.get(Cr).getTextDocument({uri:e});if(!o){h0.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!xO(a)||!xO(a))return;let c=r;if(!xO(r)){let h=a.slice(0,n),g=RYe(h,LX);c=a.slice(g,n+r.length)}if(!xO(c))return;let l=await kYe(t,()=>SYe(t,c));if(!l||PYe(l)||!l.snippets.length){h0.info(t,"No match found");return}h0.info(t,"Match found");let{snippets:u}=l,d=u.map(async h=>{let g=await kYe(t,()=>_Ye(t,{cursor:h.cursor}));if(!g||PYe(g))return;let A=g.file_matches,y=g.license_stats;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(d)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let A=Array.from(g).sort(),y=n,x=n+h.match.matched_source.length,I=o.positionAt(y),S=o.positionAt(x);await t.get(pf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:y,offsetEnd:x,version:o.version,location:{start:I,end:S},matchingText:c,details:A.map(R=>({license:R,url:h.match.github_url}))})}}s(DYe,"fetchCitations");f();function c1e(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=n,n=d,d=a,a=i,i=d,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(c1e,"editDistance");function TWt(){return new Map}s(TWt,"emptyLexDictionary");function wWt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(wWt,"reverseLexDictionary");function*SWt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(SWt,"lexGeneratorWords");function BYe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(BYe,"lexicalAnalyzer");function NYe(t){return t!==" "}s(NYe,"notSingleSpace");function LYe(t,e,r=SWt){let[n,i]=BYe(t,TWt(),r,NYe),[o,a]=BYe(e,i,r,NYe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=wWt(a),l=o.length,u=c[o[0][0]],d=c[o[l-1][0]];function p(A,y,x,I){if(I===0||I===l-1){let S=c[n[x][0]];return I==0&&S.endsWith(u)||I==l-1&&S.startsWith(d)?0:1}else return A===y?0:1}s(p,"compare");let m=c1e(n.map(A=>A[0]),o.map(A=>A[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(LYe,"lexEditDistance");f();function hR(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}s(hR,"countLines");function MYe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(MYe,"computeCompletionText");var ET=new vt("postInsertion"),FYe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],OYe=50,_Wt=1500,RWt=.5,kWt=500,l1e={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function QYe(t,e,r,n,i){let o=await t.get(vn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return ET.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),d=await $3(t,r.properties.headerRequestId,wC(a,u),r),p=d.type==="prompt"?d.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=aCe(l,n,a.detectedLanguageId),A=QVe(h,void 0)(m),y=Math.min(c.length,n+(A?A*2:kWt)),x=c.substring(n,y);return{prompt:p,capturedCode:x,terminationOffset:A??-1}}}s(QYe,"captureCode");function MX(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{ET.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),mVe(t,e,u)});let o=new pR(t,n,r-1),a=new pR(t,n,r),c=s(async l=>{ET.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await QYe(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:d.prefix,context:d.context}),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});ET.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Dt(t,e+".capturedAfterRejected",g,1)},"checkInCode");FYe.filter(l=>l.captureRejection).map(l=>o.push(Wl(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(MX,"postRejectionTasks");function bO(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});ET.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),pVe(t,e,l);let u=r;r=MYe(r,a);let d=r.trim(),p=new pR(t,i,n),m=new pR(t,i,n+r.length),h=s(async g=>{await NWt(t,e,d,n,i,g,l,p,m)},"stillInCodeCheck");if(l1e.triggerPostInsertionSynchroneously&&Tg(t)){let g=h({seconds:0,captureCode:l1e.captureCode,captureRejection:l1e.captureRejection});t.get(Hc).register(g)}else FYe.map(g=>p.push(Wl(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Wl(t,PWt,"post insertion citation check")(t,i,u,r,n,c)}s(bO,"postInsertionTasks");async function PWt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(dj(t)?.getTokenValue("sn")==="1")return;await DYe(t,e,n,i);return}let a=await t.get(Cr).getTextDocument({uri:e});if(a){let c=u1e(a.getText(),n,OYe,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=DWt(r.length,n.length,c.start_offset);if(l===void 0){ET.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,d=a?.positionAt(u),p=i+BWt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(pf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(PWt,"citationCheck");function DWt(t,e,r){if(!(e<t&&r>e))return r}s(DWt,"computeCitationStart");function BWt(t,e,r){return e<t?Math.min(r,e):r}s(BWt,"computeCitationEnd");function u1e(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=LYe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=c1e(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=RWt?1:0}}s(u1e,"find");async function NWt(t,e,r,n,i,o,a,c,l){let u=await t.get(vn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=u1e(p,r,OYe,c.offset);m.stillInCodeHeuristic||(m=u1e(p,r,_Wt,c.offset)),ET.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Dt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:A,terminationOffset:y}=await QYe(t,i,h,c.offset,l.offset),x={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},I=a.extendedBy({...x,capturedCodeJson:JSON.stringify(A)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});ET.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Dt(t,e+".capturedAfterAccepted",I,1)}}}s(NWt,"checkStillInCode");var MWt=new vt("ghostText"),Qu=class{constructor(){this.#i=[];this.linesAccepted=0}static{s(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function FWt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(FWt,"computeRejectedCompletions");function d1e(t,e){let r=t.get(Qu);if(!r.position||!r.uri)return;let n=FWt(r);n.length>0&&MX(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(d1e,"rejectLastShown");function UYe(t,e,r,n){let i=t.get(Qu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&d1e(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(UYe,"setLastShown");function qYe(t,e){let r=t.get(Qu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;MWt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,iJ(t,"ghostText",e)}}s(qYe,"handleGhostTextShown");function OWt(t,e,r){let n=t.get(Qu);n.linesLeft===void 0&&(n.linesLeft=hR(e.displayText));let i=hR(e.displayText);n.linesLeft.length>i.length&&(n.linesAccepted+=n.linesLeft.length-i.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=i),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}s(OWt,"handleLineAcceptance");function j3(t,e,r="ghostText"){let n=t.get(Qu),i;return n.partiallyAcceptedLength?i={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:i={compType:"full",acceptedLength:e.displayText.length,acceptedLines:hR(e.displayText).length},n.resetState(),bO(t,r,e.displayText,e.offset,e.uri,e.telemetry,i,e.copilotAnnotations)}s(j3,"handleGhostTextPostInsert");function FX(t,e,r,n=0,i="ghostText",o="line"){let a=t.get(Qu),c;return o==="cumulative"?(QWt(t,e,r),c={compType:a.totalLength!=null?"full":"partial",acceptedLength:a.totalLength??(a.partiallyAcceptedLength||0),acceptedLines:a.linesAccepted},c.compType==="full"&&a.resetState()):(OWt(t,e,r),c={compType:"partial",acceptedLength:a.partiallyAcceptedLength||0,acceptedLines:a.linesAccepted}),bO(t,i,e.displayText,e.offset,e.uri,e.telemetry,c,e.copilotAnnotations)}s(FX,"handlePartialGhostTextPostInsert");function QWt(t,e,r){let n=t.get(Qu);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=hR(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}s(QWt,"handleCumulativeAcceptance");function HYe(t){let e=new p3;return e.set(xc,t),e.set(Gy,new Gy),e.set(Eo,new Eo),e.set(lA,new lA),e.set(Hg,new Hg),e.set(Nt,new Nt(e)),e.set(By,new By),e.set(Eu,new Eu(e)),e.set(Su,new Su),e.set(Yd,new Yd),e.set(u0,new rO),e.set(tA,new OD),e.set(jg,new i9),e.set(Hc,new Hc),e.set(CC,new CC(e)),e.set(vn,new vn(e)),e.set(mA,new mA(e)),e.set(dE,SX(e)),e.set(Qu,new Qu),e.set(m0,new m0),e.set(fE,fE.default),e.set(Zv,new Zv(e)),e.set(jm,new jm(e)),e.set(Gl,new Gl),e.set(l0,new l0(e)),e.set(ms,new ms),e.set(ah,new ah(e)),e.set(dh,new dh),e}s(HYe,"createCommonContext");f();f();var OX=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var G3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Joi=E.Object({prompt:E.String(),speculation:E.String(),languageId:E.String(),stops:E.Array(E.String())}),IO=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Nt).updateExPValuesAndAssignments(),a=await this.ctx.get(u0).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new OX(a.reason);case"failed":throw new G3(a.reason)}}};f();f();var $Ye=Fe(require("node:util"));function WYe(t,...e){return`[${t}] ${UWt(e)}`}s(WYe,"formatLogMessage");function UWt(t){return $Ye.default.formatWithOptions({maxStringLength:1/0},...t)}s(UWt,"format");function QX(t){return UPe(t)}s(QX,"verboseLogging");var UX=class extends qc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||QX(r))&&this.console.warn(`[${i}]`,...o)}};f();var jYe=require("node:util");var V3=class extends Py{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){qg(e,"log",$r.createAndMarkAsIssued({context:r,level:JS[1],message:qWt(...n)}),1)}sendException(e,r,n){Ma(e,r,n)}};function qWt(...t){return t.map(e=>(0,jYe.inspect)(e)).join(" ")}s(qWt,"telemetryMessage");f();var ast=Fe(require("crypto")),cst=Fe(require("fs")),yte=Fe(ost()),lst=require("tls"),ust=Fe(sst());var rN=new vt("certificates"),ol=class{static{s(this,"RootCertificateReader")}};function Cte(t,e=process.platform){return new Mbe(t,[new Fbe,new Obe,jar(t,e)])}s(Cte,"getRootCertificateReader");function jar(t,e){switch(e){case"linux":return new Qbe(t);case"darwin":return new Ube(t);case"win32":return new qbe(t);default:return new Hbe}}s(jar,"createPlatformReader");var Lbe=class extends ol{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return rN.warn(this.ctx,"Failed to read root certificates:",r),[]}}},Mbe=class extends ol{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new Lbe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new ast.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return rN.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&rN.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},Fbe=class extends ol{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return lst.rootCertificates}},Obe=class extends ol{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await dst(e):[]}},Qbe=class extends ol{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await dst(n);rN.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},Ube=class extends ol{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=yte.get({excludeBundled:!1,format:yte.Format.pem});return rN.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},qbe=class extends ol{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=ust.all();return rN.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},Hbe=class extends ol{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function dst(t){let e;try{e=await cst.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(dst,"readCertsFromFile");f();var bst=Fe(require("http"));var gcr=407,Wu=new vt("proxySocketFactory"),YC=class{static{s(this,"ProxySocketFactory")}},zR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function vte(t){return new jbe(t,new Gbe(t))}s(vte,"getProxySocketFactory");var jbe=class extends YC{constructor(r,n,i=new $7,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new kr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(Wu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof zR&&i.code===`ProxyStatusCode${gcr}`){Wu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return Wu.debug(this.ctx,"Proxy authorization successful, caching result"),Dt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(Wu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(Wu.debug(this.ctx,"Proxy authorization successful, received token"),i)return Wu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){Wu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);Wu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);Wu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Wu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return Wu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return Wu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},Gbe=class extends YC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(Eo).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{Wu.debug(this.ctx,"Attempting to establish connection to proxy");let c=bst.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,d)=>{Wu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new zR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):d.length>0?(u.destroy(),a(new zR(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Wu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{Wu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new zR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{Wu.debug(this.ctx,"Proxy socket connection timeout"),a(new zR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},$7=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Fe(xst()))}};f();var Sst=require("node:os");var Acr=new vt("repository"),YR="\\\\",_st="(?:[#;].*)",oN=`(?:[^"${YR}]|${YR}.)`,ycr="[0-9A-Za-z-]",Ist=`[A-Za-z]${ycr}*`,Rst=`\\s*${_st}?$`,kst=`(?:[^"${YR};#]|${YR}.)`,Ccr=`(?:"${oN}*"|"${oN}*(?<strCont>${YR})$)`,vcr=`(?:${kst}|${Ccr})+`,Ecr=`(?:(?<cont>${YR})$)`,Pst=`(?<value>${vcr})${Ecr}?${Rst}`,Tst=new RegExp(`^${Pst}`),xcr=new RegExp(`^(?<value>${oN}*(?:(?<strCont>${YR})$|(?<quote>")))`),bcr=new RegExp(`^\\s*(?:(?<key>${Ist})\\s*=\\s*${Pst}|(?<soloKey>${Ist})${Rst})`),Icr=new RegExp(`(?<value>${kst}+)|"(?<string>${oN}*)"`,"g"),wst="[-.0-9A-Za-z]+",Tcr=`\\s+"(?<ext>${oN}*)"`,wcr=`\\s+"(?<extOnly>${oN}*)"`,Scr=new RegExp(`^\\s*\\[(?:(?<simple>${wst})${Tcr}|${wcr}|(?<simpleOnly>${wst}))\\]`),_cr=new RegExp(`^\\s*${_st}$`),Vbe=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(Scr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(bcr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(xcr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Tst),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Tst),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Icr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){_cr.test(this.line)&&(this.line="")}},Ete=class extends cA{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await Zv.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new tR)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new Vbe(i),a=new tR;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(Ni).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&Acr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=no(this.xdgConfigUri(),"git","config"),o=no(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Hi(r).toLowerCase()!=="config.worktree")return;let n=gd(r),i=no(n,"commondir");try{let o=(await e.get(Ni).readFileString(i)).trimEnd();return no(y_(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?yl(process.env.XDG_CONFIG_HOME):no(this.homeUri(),".config")}homeUri(){return yl((0,Sst.homedir)())}};f();var Dst=require("child_process");var xte=class extends cA{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Dst.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){fGe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=Ko(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new tR;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};f();var Nst=Fe(require("node:events"));var Bst="onWorkspaceChanged",Up=class{constructor(){this.emitter=new Nst.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(Bst,e)}emit(e){this.emitter.emit(Bst,e)}};function Lst(t){let e=HYe(t);return Rcr(e),e.set(ol,Cte(e)),e.set(YC,vte(e)),e.set(cA,new OK([new xte,new Ete])),e.set(Up,new Up),e.set(IO,new IO(e)),e}s(Lst,"createProductionContext");function Rcr(t){t.set(ym,ym.fromEnvironment(!1)),t.set(Py,new V3),t.set(qc,new UX(console))}s(Rcr,"setupRudimentaryLogging");var Mpi=new vt("context");f();f();var Xr=new vt("chat");f();f();var sl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(sl||{});function dn(t){return t?(t=qp(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(dn,"getTextPart");var Mst=s((t,e)=>E.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),Fst=E.Optional(E.Object({agentSlug:E.String(),state:E.Union([E.Literal("accepted"),E.Literal("dismissed")]),confirmation:E.Any()}));function ZT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(ZT,"parseToolCallArguments");function Ost(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(Ost,"toOpenAIToolCall");function Qst(t,e,r,n,i,o,a,c,l){let u=JSON.parse(JSON.stringify(e));return r.tool_calls&&(u.tool_calls=r.tool_calls),v3(t,[u],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c,copilotEditsSessionHeader:l}}s(Qst,"convertToChatCompletion");function W7(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(W7,"isChatCompletionContentPartArray");function bte(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(bte,"isChatMessageArray");function qp(t){if(typeof t=="string")return t;if(W7(t))return t;if(bte(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(qp,"resolveAsChatMessageContent");function j7(t,e){return(typeof t=="string"||W7(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(j7,"appendChatMessageContent");function zbe(t,e){if(t){if(typeof t=="string"||W7(t))return[{role:"assistant",content:t}];if(bte(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(zbe,"resolveResponseAsChatMessages");f();var Ybe=new vt("streamMessages");function Ust(t,e,r,n){let i=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(Ybe.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),i=i.substring(0,e.finishOffset),o=!0),Ybe.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Ybe.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let a=tO(e.solution),c={role:"assistant",content:i};return Qst(t,c,a,e.index,e.requestId,o,e.reason??"",r,n)}s(Ust,"prepareChatCompletionForReturn");var Ph=new vt("fetchChat"),Ite=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(u){Ph.exception(e,u,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}e.get(ah).processQuotaHeaders(a.headers);let c=a.headers.get("copilot-edits-session")||void 0;if(r.postOptions?.stream===!1){let l=await a.text(),u=JSON.parse(l),d=u.choices!=null?u.choices[0].message:{role:"assistant",content:""},p=a.headers.get("X-Request-ID")??Ar(),m={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:d,tokens:dn(d.content).split(" "),requestId:{headerRequestId:p,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0,copilotEditsSessionHeader:c},h=dn(d.content);return await i(h,{text:h,copilotReferences:u.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(m)}(),getProcessingTime:s(()=>E3(a),"getProcessingTime")}}else{let u=dT.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:rE(u,p=>Ust(e,p,n,c)),getProcessingTime:s(()=>E3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return $r.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:x3(e,n.count),top_p:eJ(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=Wv(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await kcr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,n.apiKey,n.modelProviderName,n.copilotEditsSessionHeader,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Ph.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Dt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(qr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Ph.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Ph.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(qr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Ph.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function kcr(t,e,r,n,i,o,a,c,l,u,d,p,m,h,g){let A=n===""&&i===""?r:no(r,n,i);if(!c)throw new Error(`Failed to send request to ${A} due to missing key`);let y=u.extendedBy({endpoint:i,engineName:n,uiKind:l});ZK(a,y,["messages"]),y.properties.headerRequestId=o,Dt(t,"request.sent",y);let x=Ea(),I=nVe(l),S={...lC(t),...d.toCapiHeaders()};return a.messages?.some(R=>Array.isArray(R.content)?R.content.some(B=>"image_url"in B):!1)&&(S["Copilot-Vision-Request"]="true"),p&&(S["api-key"]=p),h&&(S["copilot-edits-session"]=h),a.messages&&a.messages.forEach(R=>{Pcr(R)&&R.tool_calls&&(R.tool_calls=R.tool_calls.map(B=>Ost(B)))}),Gv(t,A,c,I,o,a,g,S,void 0,m).then(R=>{let B=nR(R);y.extendWithRequestId(B);let M=Ea()-x;return y.measurements.totalTimeMs=M,Ph.info(t,`Request ${o} at <${A}> finished with ${R.status} status after ${M}ms`),Ph.debug(t,"request.response properties",y.properties),Ph.debug(t,"request.response measurements",y.measurements),Ph.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",y),R}).catch(R=>{if(hd(R))throw R;let B=y.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",B),y.properties.message=String(hf(R,"name")??""),y.properties.code=String(hf(R,"code")??""),y.properties.errno=String(hf(R,"errno")??""),y.properties.type=String(hf(R,"type")??"");let M=Ea()-x;throw y.measurements.totalTimeMs=M,Ph.info(t,`Request ${o} at <${A}> rejected with ${String(R)} after ${M}ms`),Ph.debug(t,"request.error properties",y.properties),Ph.debug(t,"request.error measurements",y.measurements),Dt(t,"request.error",y),R}).finally(()=>{v3(t,e,y)})}s(kcr,"fetchWithInstrumentation");function Pcr(t){return"tool_calls"in t}s(Pcr,"isChatMessageWithToolCalls");var Wa=class{constructor(e){this.ctx=e;this.fetcher=new Ite}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=Ar(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&c.maxResponseTokens!==void 0&&(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(qr).getToken(),u,d,p,m;if(e.modelConfiguration?.providerName)if(p=await qWe(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),m=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===ih.Azure)if(e.modelConfiguration.deploymentUrl)u=HWe(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),d="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(e.modelConfiguration?.providerName===ih.OpenAI)u=aye[ih.OpenAI],d=e.endpoint??"completions",e.authToken=p;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else u=km(this.ctx,l,e.copilotApiProvider??"api"),d=e.endpoint??"completions";let h=e.authToken??l.token,g={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:h,apiKey:p,modelProviderName:m,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction,copilotEditsSessionHeader:e.copilotEditsSessionHeader};return c&&(g.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(g.tools=e.tools,g.tool_choice=e.tool_choice??"auto"),await this.fetch(g,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=XF(r.chatCompletions,l=>this.postProcess(l,i));Xr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Xr.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:dn(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n,copilotEditsSessionHeader:l.copilotEditsSessionHeader};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:dn(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>dn(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n,copilotEditsSessionHeader:l[0].copilotEditsSessionHeader}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return RX(e.tokens)?(r.extendWithRequestId(e.requestId),Dt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Xr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return hd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Xr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var KC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var ew=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var Dcr=".github/copilot-instructions.md",Bcr=".github/git-commit-instructions.md",Ncr="global-copilot-instructions",Lcr="global-git-commit-instructions",JC=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Ncr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:Lcr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=no(r.uri,n),l=(await e.get(Ni).readFileString(c)).trim();if(!l)return;(await eE(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,Dcr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,Bcr,void 0,i,0)),c});return await Promise.all(o),i}};f();f();f();f();f();f();f();var Mcr=Symbol("MicrotaskDelay");function wte(t){return!!t&&typeof t.then=="function"}s(wte,"isThenable");function Fcr(t){let e=new sE,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new yC)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(Fcr,"createCancelablePromise");function PE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new yC)})}):Fcr(r=>PE(t,r))}s(PE,"timeout");var sN=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new Cn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new Cn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var G7=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new yC)}},Ocr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Ocr||={});var V7=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new _p,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await oR.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var Tte=class{constructor(e){this._deferred=new G7;this._asyncIterable=new V7(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();var Ste=!1,_te=!1,z7=!1,Qcr=!1,Ucr=!1,qst=!1,qcr=!1,Hcr=!1,$cr=!1,Wcr=!1;var DE,BE=globalThis,Dh;typeof BE.vscode<"u"&&typeof BE.vscode.process<"u"?Dh=BE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Dh=process);var Hst=typeof Dh?.versions?.electron=="string",jcr=Hst&&Dh?.type==="renderer";typeof Dh=="object"?(Ste=Dh.platform==="win32",_te=Dh.platform==="darwin",z7=Dh.platform==="linux",Qcr=z7&&!!Dh.env.SNAP&&!!Dh.env.SNAP_REVISION,qcr=Hst,$cr=!!Dh.env.CI||!!Dh.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Ucr=!0):typeof navigator=="object"&&!jcr?(DE=navigator.userAgent,Ste=DE.indexOf("Windows")>=0,_te=DE.indexOf("Macintosh")>=0,Hcr=(DE.indexOf("Macintosh")>=0||DE.indexOf("iPad")>=0||DE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,z7=DE.indexOf("Linux")>=0,Wcr=DE?.indexOf("Mobi")>=0,qst=!0):console.error("Unable to resolve platform.");var Kbe=0;_te?Kbe=1:Ste?Kbe=3:z7&&(Kbe=2);var tw=Ste,$st=_te,Wst=z7;var Gcr=qst&&typeof BE.importScripts=="function",Ohi=Gcr?BE.origin:void 0;var XC=DE;var Vcr=typeof BE.postMessage=="function"&&!BE.importScripts,Qhi=(()=>{if(Vcr){let t=[];BE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),BE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var zcr=!!(XC&&XC.indexOf("Chrome")>=0),Uhi=!!(XC&&XC.indexOf("Firefox")>=0),qhi=!!(!zcr&&XC&&XC.indexOf("Safari")>=0),Hhi=!!(XC&&XC.indexOf("Edg/")>=0),$hi=!!(XC&&XC.indexOf("Android")>=0);var KR,Jbe=globalThis.vscode;if(typeof Jbe<"u"&&typeof Jbe.process<"u"){let t=Jbe.process;KR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?KR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:KR={get platform(){return tw?"win32":$st?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Y7=KR.cwd,jst=KR.env,Gst=KR.platform,Yhi=KR.arch;var Kcr=65,Jcr=97,Xcr=90,Zcr=122,iw=46,au=47,T0=92,rw=58,elr=63,Rte=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function tlr(t,e){if(t===null||typeof t!="object")throw new Rte(e,"Object",t)}s(tlr,"validateObject");function sc(t,e){if(typeof t!="string")throw new Rte(e,"string",t)}s(sc,"validateString");var w0=Gst==="win32";function Ci(t){return t===au||t===T0}s(Ci,"isPathSeparator");function Xbe(t){return t===au}s(Xbe,"isPosixPathSeparator");function nw(t){return t>=Kcr&&t<=Xcr||t>=Jcr&&t<=Zcr}s(nw,"isWindowsDeviceRoot");function kte(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=au}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==iw||i.charCodeAt(i.length-2)!==iw){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===iw&&c!==-1?++c:c=-1}return i}s(kte,"normalizeString");function rlr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(rlr,"formatExt");function Vst(t,e){tlr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${rlr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Vst,"_format");var ac={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],sc(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=Y7():(o=jst[`=${e}`]||Y7(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===T0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,d=o.charCodeAt(0);if(a===1)Ci(d)&&(c=1,u=!0);else if(Ci(d))if(u=!0,Ci(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ci(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ci(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ci(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else nw(d)&&o.charCodeAt(1)===rw&&(l=o.slice(0,2),c=2,a>2&&Ci(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=kte(r,!n,"\\",Ci),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){sc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Xbe(o)?"\\":t;if(Ci(o))if(i=!0,Ci(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ci(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ci(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ci(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else nw(o)&&t.charCodeAt(1)===rw&&(n=t.slice(0,2),r=2,e>2&&Ci(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?kte(t.slice(r),!i,"\\",Ci):"";return a.length===0&&!i&&(a="."),a.length>0&&Ci(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){sc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ci(r)||e>2&&nw(r)&&t.charCodeAt(1)===rw&&Ci(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];sc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ci(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ci(r.charCodeAt(1))&&(++i,o>2&&(Ci(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ci(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ac.normalize(e)},relative(t,e){if(sc(t,"from"),sc(e,"to"),t===e)return"";let r=ac.resolve(t),n=ac.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===T0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===T0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===T0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===T0;)l--;let u=l-c,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===T0&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(c+m)===T0)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>d&&(t.charCodeAt(i+m)===T0?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===T0)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===T0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ac.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===T0){if(e.charCodeAt(1)===T0){let r=e.charCodeAt(2);if(r!==elr&&r!==iw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(nw(e.charCodeAt(0))&&e.charCodeAt(1)===rw&&e.charCodeAt(2)===T0)return`\\\\?\\${e}`;return t},dirname(t){sc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ci(i)?t:".";if(Ci(i)){if(r=n=1,Ci(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ci(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ci(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ci(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else nw(i)&&t.charCodeAt(1)===rw&&(r=e>2&&Ci(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ci(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&sc(e,"suffix"),sc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&nw(t.charCodeAt(0))&&t.charCodeAt(1)===rw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ci(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ci(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){sc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===rw&&nw(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ci(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===iw?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Vst.bind(null,"\\"),parse(t){sc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ci(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ci(i)){if(n=1,Ci(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ci(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ci(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ci(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(nw(i)&&t.charCodeAt(1)===rw){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ci(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ci(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===iw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return c!==-1&&(o===-1||d===0||d===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},nlr=(()=>{if(w0){let t=/\\/g;return()=>{let e=Y7().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>Y7()})(),oa={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:nlr();sc(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===au)}return e=kte(e,!r,"/",Xbe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(sc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===au,r=t.charCodeAt(t.length-1)===au;return t=kte(t,!e,"/",Xbe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return sc(t,"path"),t.length>0&&t.charCodeAt(0)===au},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];sc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":oa.normalize(e)},relative(t,e){if(sc(t,"from"),sc(e,"to"),t===e||(t=oa.resolve(t),e=oa.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===au&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===au)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===au?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===au)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(sc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===au,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===au){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&sc(e,"ext"),sc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===au){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===au){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){sc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===au){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===iw?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Vst.bind(null,"/"),parse(t){sc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===au,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===au){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===iw?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};oa.win32=ac.win32=ac;oa.posix=ac.posix=oa;var ilr=w0?ac.normalize:oa.normalize,olr=w0?ac.isAbsolute:oa.isAbsolute,Pte=w0?ac.join:oa.join,Jhi=w0?ac.resolve:oa.resolve,Xhi=w0?ac.relative:oa.relative,Zhi=w0?ac.dirname:oa.dirname,Dte=w0?ac.basename:oa.basename,Bte=w0?ac.extname:oa.extname,egi=w0?ac.format:oa.format,tgi=w0?ac.parse:oa.parse,rgi=w0?ac.toNamespacedPath:oa.toNamespacedPath,JR=w0?ac.sep:oa.sep,ngi=w0?ac.delimiter:oa.delimiter;f();function Yst(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(Yst,"isObject");function Nte(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(Nte,"assertType");function Kst(t,e,r,n=JR){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!Sze(t,e))return!1;if(e.length===t.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,t.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}s(Kst,"isEqualOrParent");var Lte="**",Jst="/",Mte="[/\\\\]",Fte="[^/\\\\]",slr=/\//g;function Xst(t,e){switch(t){case 0:return"";case 1:return`${Fte}*?`;default:return`(?:${Mte}|${Fte}+${Mte}${e?`|${Mte}${Fte}+`:""})*?`}}s(Xst,"starsToRegExp");function K7(t,e){if(!t)return[];let r=[],n=!1,i=!1,o="";for(let a of t){switch(a){case e:if(!n&&!i){r.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=a}return o&&r.push(o),r}s(K7,"splitGlobAware");function rat(t){if(!t)return"";let e="",r=K7(t,Jst);if(r.every(n=>n===Lte))e=".*";else{let n=!1;r.forEach((i,o)=>{if(i===Lte){if(n)return;e+=Xst(2,o===r.length-1)}else{let a=!1,c="",l=!1,u="";for(let d of i){if(d!=="}"&&a){c+=d;continue}if(l&&(d!=="]"||!u)){let p;d==="-"?p=d:(d==="^"||d==="!")&&!u?p="^":d===Jst?p="":p=O3(d),u+=p;continue}switch(d){case"{":a=!0;continue;case"[":l=!0;continue;case"}":{let m=`(?:${K7(c,",").map(h=>rat(h)).join("|")})`;e+=m,a=!1,c="";break}case"]":{e+="["+u+"]",l=!1,u="";break}case"?":e+=Fte;continue;case"*":e+=Xst(1);continue;default:e+=O3(d)}}o<r.length-1&&(r[o+1]!==Lte||o+2<r.length)&&(e+=Mte)}n=i===Lte})}return e}s(rat,"parseRegExp");var alr=/^\*\*\/\*\.[\w\.-]+$/,clr=/^\*\*\/([\w\.-]+)\/?$/,llr=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,ulr=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,dlr=/^\*\*((\/[\w\.-]+)+)\/?$/,flr=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Zst=new l3(1e4),eIe=s(function(){return!1},"FALSE"),RA=s(function(){return null},"NULL");function nat(t){return t===eIe||t===RA}s(nat,"isEmptyPattern");function tIe(t,e){if(!t)return RA;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,i=Zst.get(n);if(i)return eat(i,t);let o;return alr.test(r)?i=plr(r.substr(4),r):(o=clr.exec(Zbe(r,e)))?i=mlr(o[1],r):(e.trimForExclusions?ulr:llr).test(r)?i=hlr(r,e):(o=dlr.exec(Zbe(r,e)))?i=tat(o[1].substr(1),r,!0):(o=flr.exec(Zbe(r,e)))?i=tat(o[1],r,!1):i=glr(r),Zst.set(n,i),eat(i,t)}s(tIe,"parsePattern");function eat(t,e){if(typeof e=="string")return t;let r=s(function(n,i){return Kst(n,e.base,!Wst)?t(wze(n.substr(e.base.length),JR),i):null},"wrappedPattern");return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}s(eat,"wrapRelativePattern");function Zbe(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}s(Zbe,"trimForExclusions");function plr(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}s(plr,"trivia1");function mlr(t,e){let r=`/${t}`,n=`\\${t}`,i=s(function(a,c){return typeof a!="string"?null:c?c===t?e:null:a===t||a.endsWith(r)||a.endsWith(n)?e:null},"parsedPattern"),o=[t];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}s(mlr,"trivia2");function hlr(t,e){let r=oat(t.slice(1,-1).split(",").map(c=>tIe(c,e)).filter(c=>c!==RA),t),n=r.length;if(!n)return RA;if(n===1)return r[0];let i=s(function(c,l){for(let u=0,d=r.length;u<d;u++)if(r[u](c,l))return t;return null},"parsedPattern"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(hlr,"trivia3");function tat(t,e,r){let n=JR===oa.sep,i=n?t:t.replace(slr,JR),o=JR+i,a=oa.sep+t,c;return r?c=s(function(l,u){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===t||l.endsWith(a)))?e:null},"parsedPattern"):c=s(function(l,u){return typeof l=="string"&&(l===i||!n&&l===t)?e:null},"parsedPattern"),c.allPaths=[(r?"*/":"./")+t],c}s(tat,"trivia4and5");function glr(t){try{let e=new RegExp(`^${rat(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return RA}}s(glr,"toRegExp");function iat(t,e,r){return!t||typeof e!="string"?!1:rIe(t)(e,void 0,r)}s(iat,"match");function rIe(t,e={}){if(!t)return eIe;if(typeof t=="string"||Alr(t)){let r=tIe(t,e);if(r===RA)return eIe;let n=s(function(i,o){return!!r(i,o)},"resultPattern");return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return ylr(t,e)}s(rIe,"parse");function Alr(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}s(Alr,"isRelativePattern");function ylr(t,e){let r=oat(Object.getOwnPropertyNames(t).map(c=>Clr(c,t[c],e)).filter(c=>c!==RA)),n=r.length;if(!n)return RA;if(!r.some(c=>!!c.requiresSiblings)){if(n===1)return r[0];let c=s(function(d,p){let m;for(let h=0,g=r.length;h<g;h++){let A=r[h](d,p);if(typeof A=="string")return A;wte(A)&&(m||(m=[]),m.push(A))}return m?(async()=>{for(let h of m){let g=await h;if(typeof g=="string")return g}return null})():null},"resultExpression"),l=r.find(d=>!!d.allBasenames);l&&(c.allBasenames=l.allBasenames);let u=r.reduce((d,p)=>p.allPaths?d.concat(p.allPaths):d,[]);return u.length&&(c.allPaths=u),c}let i=s(function(c,l,u){let d,p;for(let m=0,h=r.length;m<h;m++){let g=r[m];g.requiresSiblings&&u&&(l||(l=Dte(c)),d||(d=l.substr(0,l.length-Bte(c).length)));let A=g(c,l,d,u);if(typeof A=="string")return A;wte(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(let m of p){let h=await m;if(typeof h=="string")return h}return null})():null},"resultExpression"),o=r.find(c=>!!c.allBasenames);o&&(i.allBasenames=o.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(i.allPaths=a),i}s(ylr,"parsedExpression");function Clr(t,e,r){if(e===!1)return RA;let n=tIe(t,r);if(n===RA)return RA;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=s((a,c,l,u)=>{if(!u||!n(a,c))return null;let d=i.replace("$(basename)",()=>l),p=u(d);return wte(p)?p.then(m=>m?t:null):p?t:null},"result");return o.requiresSiblings=!0,o}}return n}s(Clr,"parseExpressionPattern");function oat(t,e){let r=t.filter(c=>!!c.basenames);if(r.length<2)return t;let n=r.reduce((c,l)=>{let u=l.basenames;return u?c.concat(u):c},[]),i;if(e){i=[];for(let c=0,l=n.length;c<l;c++)i.push(e)}else i=r.reduce((c,l)=>{let u=l.patterns;return u?c.concat(u):c},[]);let o=s(function(c,l){if(typeof c!="string")return null;if(!l){let d;for(d=c.length;d>0;d--){let p=c.charCodeAt(d-1);if(p===47||p===92)break}l=c.substr(d)}let u=n.indexOf(l);return u!==-1?i[u]:null},"aggregate");o.basenames=n,o.patterns=i,o.allBasenames=n;let a=t.filter(c=>!c.basenames);return a.push(o),a}s(oat,"aggregateBasenameMatches");function sat(t){let e=t.match(/^---\s*\n([\s\S]*?)\n---\s*\n/);if(!e)return{};let r=e[1],n=r.match(/^applyTo:\s*["']?(.*?)["']?\s*$/m),i=r.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{applyTo:n?n[1].trim():void 0,description:i?i[1].trim():void 0}}s(sat,"extractMetadataFromContent");function aat(t){if(!t||t.trim()==="")return{pattern:t,isValid:!1,error:"Pattern cannot be empty"};let e=t.trim();return vlr(e)?{pattern:e,isValid:!0}:{pattern:e,isValid:!1,error:"Invalid glob pattern"}}s(aat,"validate");function cat(t,e){let r=K7(e,","),n=s(i=>{if(i=i.trim(),i.length!==0){if(i==="**"||i==="**/*"||i==="*")return{pattern:i};!i.startsWith("/")&&!i.startsWith("**/")&&(i="**/"+i);for(let o of t)if(iat(i,o))return{pattern:i,file:o}}},"patternMatches");for(let i of r){let o=n(i);if(o)return o}}s(cat,"matches");function vlr(t){try{let e=K7(t,",");if(e.length===0)return!1;for(let r of e){let n=rIe(r);if(nat(n))return!1}return!0}catch{return!1}}s(vlr,"isValidGlob");f();f();var Elr=".prompt.md",xlr=".instructions.md",blr=".chatmode.md";function lat(t){if(t.endsWith(Elr))return"prompt";if(t.endsWith(xlr))return"instructions";if(t.endsWith(blr))return"mode"}s(lat,"getPromptFileType");var Tlr=".github/instructions",XR=class{static{s(this,"PromptFilesLocator")}async listFiles(e,r,n){if(!r.length)return[];let i=r.map(a=>{let c="";return n==="instructions"&&(c=no(a.uri,Tlr)),this.getFilesByUri(e,c,n)});return(await Promise.all(i)).flat()}async getFilesByUri(e,r,n){let i,o=[];try{i=await e.get(Ni).readDirectory(r)}catch{return[]}for(let[a,c]of i)c===1&&lat(a)===n&&o.push(no(r,a));return o}};var ZR=class{constructor(){this.logger=new vt("PromptService");this.fileLocator=new XR}static{s(this,"PromptService")}async collect(e,r,n){let i=await this.fileLocator.listFiles(e,r,"instructions").then(wlr("instructions")),o=[];for(let a of i)try{let c=await this.parseInstructionFile(e,a.uri);c&&cat(n,c.applyTo)&&o.push(c)}catch(c){this.logger.warn(e,`Failed to parse instruction file ${a.uri}:`,c)}return o}async parseInstructionFile(e,r){try{let n=await e.get(Ni).readFileString(r),i=sat(n);if(!i.applyTo)return null;let o=aat(i.applyTo);return o.isValid?{uri:r,applyTo:o.pattern,description:i.description,content:n}:(this.logger.warn(e,`Invalid applyTo pattern in ${r}: ${o.error}`),null)}catch{return null}}};function wlr(t){return e=>e.map(r=>({uri:r,type:t}))}s(wlr,"withType");var kA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={},i){try{let o=e.get(JC),a=o.getGlobalInstructions(n),c=await o.readFromWorkspaces(e,r,n),u=await e.get(ZR).collect(e,r,i||[]),d=u.map(h=>({content:[{instruction:h.content}],kind:2,reference:h.uri})),p=n;if(!n.customIntroduction&&u.length>0){let g=["Here is a list of instruction files that contain rules for modifying or creating new code.","These files are important for ensuring that the code is modified or created correctly.","Please make sure to follow the rules specified in these files when working with the codebase.","If the file is not already available as attachment, use the `read_file` tool to acquire it.","Make sure to acquire the instructions before making any changes to the code.","| Pattern | File Path | Description |","| ------- | --------- | ----------- |"],A=u.map(y=>{let x=y.applyTo||"*",I=y.uri,S=y.description||"";return`| \`${x}\` | \`${I}\` | ${S} |`});p={...n,customIntroduction:g.concat(A).join(`
`)}}let m=[...a,...c,...d];return this.processInstructions(m,p)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>
${n.join(`

`)}
</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let o of e.content)o.languageId?r.languageId&&o.languageId===r.languageId&&n.push(`For ${o.languageId} code: ${o.instruction}`):n.push(o.instruction);if(n.length===0)return;let i=n.join(`
`);return`<attachment filePath="${e.reference}">
${i}
</attachment>`}static async appendToUserMessage(e,r,n="",i={},o){if(!r||r.length===0)return n;let a=await t.getInstructions(e,r,i,o);return a?a+`

`+n:n}};f();var Slr="X-Initiator",_lr="X-Interaction-ID",Rlr="X-Interaction-Type";var Ote=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},nIe=class extends Ote{static{s(this,"User")}static id(){return"user"}},iIe=class extends Ote{static{s(this,"Agent")}static id(){return"agent"}},oIe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[Slr]:this.initiator,[_lr]:this.interactionId,[Rlr]:this.interactionType.toString()}}},S0=class t extends oIe{static{s(this,"LlmInteraction")}static user(e,r){return new t(nIe,e,r)}static agent(e,r){return new t(iIe,e,r)}};f();f();var ja=class{static{s(this,"ModelConfigurationProvider")}},Qte=class extends ja{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Xr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(af).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(af).getMetadata(),i=Plr(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===Jr.Gpt35turbo||r===Jr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:aIe(6144,i),maxResponseTokens:sIe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Jr.Gpt4||r===Jr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:aIe(10240,i),maxResponseTokens:sIe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===Jr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await klr(this.ctx,i),maxResponseTokens:sIe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case dz.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function klr(t,e){let r=t.get(Nt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),aIe(i,e)}s(klr,"getExpRequestTokens");function aIe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(aIe,"getRequestTokens");function sIe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(sIe,"getResponseTokens");function Plr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(Plr,"filterModelsByCapabilities");var Go=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(ja).getBestChatModelConfig([n]);if(e.get(ah).quotaExhausted&&!(await e.get(qr).getToken()).userInfo?.isFreeUser){let o=await e.get(af).getFallbackModel();if(o)return e.get(ja).getBestChatModelConfig([o?.id])}return e.get(ja).getBestChatModelConfig($m(r),i)}static transformMessages(e,r){return r===Jr.O1Ga||r===Jr.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var ek=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{s(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(i=>`- ${i}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(i=>`- ${i}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,i){let o=new Wa(e),a=await Go.getModelConfiguration(e,"gitCommit"),c=[{uri:n.workspaceFolder?n.workspaceFolder:yl(process.cwd())}],l=await kA.getInstructions(e,c,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),u=[{role:"system",content:this.buildSystemMessage(n.userLanguage,i)},{role:"user",content:this.buildUserMessage(n,l)}];this.updateAttemptCount(n.changes);let d=await e.get(Nt).updateExPValuesAndAssignments(),p=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),m=await o.fetchResponse({modelConfiguration:a,messages:u,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:S0.user("git-commit",Ar()),temperature:p},r,d);if(this.lastChanges=n.changes,m.type!=="success")return;let h=m.value.match(/```text\n([\s\S]*?)\n```/);return h?h[1].trim():m.value.trim()}};f();var ju=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},qte=class extends ju{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};f();f();f();function ow(){return Ar()}s(ow,"uuidV4");f();var sw=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var ZC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var J7="filepath:",_l="...existing code...",cIe="copilot-edited-file";f();function aN(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(aN,"getFenceForCodeBlock");var Hp=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=aN(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${J7} ${Ya(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var lIe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},X7=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=dn(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=dn(a.content).endsWith(`
`)?dn(a.content):`${dn(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${cIe}>.
</SYSTEM>


`}return o+dn(a.content)},"")+`


The resulting document:
<${cIe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${_l}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new Hp({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new lIe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new Hp({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var NE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(vn).getOrReadTextDocument({uri:e})}};f();f();f();f();f();f();var Bh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Cn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(al.fromJson))}static from(e){let r=e.map(i=>new al(Gt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new al(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new al(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return Dlr(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new al(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new al(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new al(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},al=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=AT(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,cE(r,this.newText)),o=new Gt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Dlr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new al(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(c.replaceRange.start+a);d>0&&(u=c.newText.slice(0,d));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new al(Gt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Gt(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new al(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Bh(n).normalize()}s(Dlr,"joinEdits");f();f();var uat=-1;function cN(){return uat!==-1?uat:Date.now()}s(cN,"now");function dat(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(dat,"lineRangeDistance");f();var lN=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new LE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>wa.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return sa.create(r)}mapEdits(e){return new t(this.edits.map(e))}},LE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new Cn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=nr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(nr.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(nr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(nr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new nr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return wa.replace(n,this.newText)}};var cs=class t{constructor(e){this.edits=e;Tl(iE(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>PA.deserialize(r)))}static fromEdit(e){let r=lN.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=LE.joinEdits(o,r);o.length=0;let d=PA.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(oh(n=>n.lineRange.startLineNumber,sh)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return sa.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Ur.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Ur(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new PA(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of Z2(this.edits,(l,u)=>dat(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}l=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new PA(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},PA=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Ur.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=hh(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(nr.fromPositions(new Qr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(nr.fromPositions(e.range.getEndPosition(),new Qr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Ur(i,a),n)}toLineEdit(){return new cs([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Qr(o,a)}else n=new Qr(1,1);let i=r.addToPosition(new Qr(1,1));return new LE(nr.fromPositions(n,i),"")}else return new LE(new nr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new LE(nr.fromPositions(new Qr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new nr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new LE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return wa.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Ur(r,n),this.newLines.slice(i,this.newLines.length-o))}},Blr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Blr||={});var e1=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=cs.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Rd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new cs(r))}};var sa=class t{constructor(e){this.edits=e;Tl(iE(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>wa.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([wa.replace(e,r)])}static insert(e,r){return new t([wa.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>wa.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Bh(this.edits.map(e=>new al(e.range,e.newText)))}compose(e){return Nlr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=wa.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=wa.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(wa.replaceWithData(Gt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new Hte(i)}if(this.edits.length!==e.arrayLength)throw HF(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=wa.replaceWithData(Gt.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new Hte(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Gt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(wa.replace(Gt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(wa.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(wa.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function Nlr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(wa.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(wa.replaceWithData(Gt.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let d=l.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=wa.replaceWithData(Gt.emptyAt(l.range.endExclusive),l.newText.slice(-d),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Gt(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(wa.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return sa.create(n).normalize()}s(Nlr,"joinEdits");var wa=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Gt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Gt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Gt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return sa.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=Llr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Mlr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function Llr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(Llr,"commonPrefixLength");function Mlr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(Mlr,"commonSuffixLength");var Rd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return dA(()=>null.base.equals(this.base.apply(e))),dA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return e1.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},Hte=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return sa.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new t1(this.edits.map(e=>e.toEdit()))}},t1=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return sa.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=sa.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>sa.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=cs.fromEdit(new Rd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};f();f();f();var tk=0;function $te(t){return t===0}s($te,"lengthIsZero");var $p=2**26;function uN(t,e){return t*$p+e}s(uN,"toLength");function ME(t){let e=t,r=Math.floor(e/$p),n=e-r*$p;return new Xl(r,n)}s(ME,"lengthToObj");function Z7(t,e){let r=t+e;return e>=$p&&(r=r-t%$p),r}s(Z7,"lengthAdd");function fat(t,e){return t.reduce((r,n)=>Z7(r,e(n)),tk)}s(fat,"sumLengths");function uIe(t,e){return t===e}s(uIe,"lengthEquals");function eQ(t,e){let r=t,n=e;if(n-r<=0)return tk;let o=Math.floor(r/$p),a=Math.floor(n/$p),c=n-a*$p;if(o===a){let l=r-o*$p;return uN(0,c-l)}else return uN(a-o,c)}s(eQ,"lengthDiffNonNegative");function pat(t,e){let r=t,n=Math.floor(r/$p),i=r-n*$p,o=e,a=Math.floor(o/$p),c=o-a*$p;return new nr(n+1,i+1,a+1,c+1)}s(pat,"lengthsToRange");f();var dN=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${ME(this.startOffset)}...${ME(this.endOffset)}) -> ${ME(this.newLength)}`}};function hat(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new TK(mat(t)),n=mat(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!$te(u);){let[p,m]=i.splitAt(u);d.push(p),u=eQ(p.lengthAfter,u),i=m??r.dequeue()}return $te(u)||d.push(new tQ(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,d,p){if(a.length>0&&uIe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new dN(m.startOffset,d,Z7(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(c,"pushEdit");let l=tk;for(let u of n){let d=o(u.lengthBefore);if(u.modified){let p=fat(d,h=>h.lengthBefore),m=Z7(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of d){let m=l;l=Z7(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(hat,"combineTextEditInfos");var tQ=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=eQ(e,this.lengthAfter);return uIe(r,tk)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,tk,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${ME(this.lengthBefore)} -> ${ME(this.lengthAfter)}`}};function mat(t){let e=[],r=tk;for(let n of t){let i=eQ(r,n.startOffset);$te(i)||e.push(new tQ(!1,i,i));let o=eQ(n.startOffset,n.endOffset);e.push(new tQ(!0,o,n.newLength)),r=n.endOffset}return e}s(mat,"toLengthMapping");var rQ=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Wte(n.range,Xl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=ME(n.newLength);return new Wte(pat(n.startOffset,n.endOffset),new Xl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new dN(uN(e.range.startLineNumber-1,e.range.startColumn-1),uN(e.range.endLineNumber-1,e.range.endColumn-1),uN(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=hat(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return nr.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Wte=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var jte=class{constructor(e){this.documents=e;Tl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Gte=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Rd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var Vte=class extends xs{constructor(){super();this.branch=fA("branchName",void 0);this._register(PCe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var zte=class extends xs{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new fIe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Vte;this._register(aR(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=cN(),this._documentState.forEach(o=>o.applyAllEdits()))})),fh(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new dIe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(lE(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Sc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new jte(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=cN()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},dIe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Zl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=lN.fromEdit(e,this._currentValue),i=rQ.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return rk(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&Flr(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=cN(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:cN()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new t1(this._edits.map(o=>o.edit));return{history:new Gte(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=sa.empty,o=rQ.empty,a,c=0,l=sa.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(cN()-u.instant>600*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();Nte(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=rk(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||rk(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||rk(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let B=sa.trySwap(u.edit,l);if(B)l=B.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let y=u.edit.inverseOnString(n.value);n=n.apply(y);let x=u.edit.compose(i),I=cs.fromEdit(new Rd(n,x)),R=new e1(n,I).removeCommonSuffixPrefixLines().edit.edits.length;if(R>e)break;c=R,i=x,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new t1(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function rk(t,e){let r=0;for(let n of t)r+=e(n);return r}s(rk,"sum");function Flr(t,e){let r=e.getNewRanges();return t.edits.every(n=>Olr(n.range,r))}s(Flr,"editExtends");function Olr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(Olr,"doesTouch");var fIe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};f();f();var nk=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=aA(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new Qr(n,i)}getRange(e){return nr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Xl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Xl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var pIe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new Qr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new nr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new nk(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new nr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return hh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var FE=class extends pIe{constructor(r){super();this.value=r;this._t=new nk(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();f();f();var nQ=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new Cn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,d;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),d=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let y=u.slice(Gt.emptyAt(p),new Gt(0,m));o.push(y)}if(!d)throw new Cn("Invariant violation: lastIntersecting is undefined");let h=d.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let y=d.slice(Gt.ofStartAndLength(d.replaceRange.endExclusive,0),new Gt(d.getNewLength()-h,d.getNewLength()));i.unshift(y),a-=y.getNewLength()-y.replaceRange.length}let g=new Gt(p,c.replaceRange.endExclusive-a),A=c.slice(g,new Gt(0,c.getNewLength()));o.push(A)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Gt(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return $F(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}},Yte=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Gt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Gt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},gat=class t extends nQ{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var Kte=class extends nQ{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(Gu.replace(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new bf(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new Gu(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new Gu(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new bf(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new bf(r)}normalizeEOL(e){return new bf(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=Gu.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?bf.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new FE(this.apply(e.value))}mapData(e){return new mIe(this.replacements.map(r=>new fN(r.replaceRange,r.newText,e(r))))}},Jte=class extends Yte{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=AT(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,cE(n,this.newText)),a=new Gt(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new Gu(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new Gu(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=AT(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Gt(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=cE(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Gt(0,this.newText.length-i))}toEdit(){return new bf([this])}},bf=class t extends Kte{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new Gu(e,r)])}static insert(e,r){return new t([new Gu(Gt.emptyAt(e),r)])}static delete(e){return new t([new Gu(e,"")])}static fromJson(e){return new t(e.map(Gu.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},Gu=class t extends Jte{static{s(this,"StringReplacement")}static insert(e,r){return new t(Gt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var mIe=class t extends Kte{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new fN(e,r,n)])}static insert(e,r,n){return new t([new fN(Gt.emptyAt(e),r,n)])}static delete(e,r){return new t([new fN(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new bf(this.replacements.map(e=>new Gu(e.replaceRange,e.newText)))}},fN=class t extends Jte{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Gt.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};f();var iQ=class t{constructor(e){this.replacements=e;dA(()=>iE(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(i=>kd.fromStringReplacement(i,r));return new t(n)}static replace(e,r){return new t([new kd(e,r)])}static insert(e,r){return new t([new kd(nr.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new kd(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.replacements){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Xl.ofText(o.text);if(e.isBefore(c)){let u=new Qr(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),d=l.addToPosition(u);return Xte(u,d)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new Qr(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof Qr?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof Qr?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return Xte(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new Qr(1,1);for(let o of this.replacements){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=Xte(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=Xte(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new FE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,i)=>new kd(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.replacements){let a=Xl.ofText(o.text),c=Qr.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new Cn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),i="";for(let o=0;o<this.replacements.length;o++){let a=this.replacements[o];if(i+=a.text,o<this.replacements.length-1){let c=this.replacements[o+1],l=nr.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new kd(nr.fromPositions(r,n),i)}equals(e){return c3(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new FE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let i=e.getValueOfRange(r.range),o=nr.fromPositions(new Qr(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),a=e.getValueOfRange(o);a.length>10&&(a="..."+a.substring(a.length-10));let c=nr.fromPositions(r.range.getEndPosition(),new Qr(r.range.endLineNumber+1,1)),l=e.getValueOfRange(c);l.length>10&&(l=l.substring(0,10)+"...");let u=i;if(u.length>10){let p=Math.floor(5);u=u.substring(0,p)+"..."+u.substring(u.length-p)}let d=r.text;if(d.length>10){let p=Math.floor(5);d=d.substring(0,p)+"..."+d.substring(d.length-p)}return u.length===0?`${a}\u2770${d}\u2771${l}`:`${a}\u2770${u}\u21A6${d}\u2771${l}`}).join(`
`)}},kd=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new Cn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=nr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(nr.fromPositions(n,i),o)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new iQ([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(nr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(nr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new nr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=AT(r,n),o=Xl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=nr.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=AT(r,n);r=r.substring(i),n=n.substring(i);let o=cE(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function Xte(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return nr.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new Cn("start must be before end");return new nr(t.lineNumber,t.column,e.lineNumber,e.column)}s(Xte,"rangeFromPositions");var oQ=class t{constructor(e){this.replacements=e;Tl(iE(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>pN.deserialize(r)))}static fromEdit(e,r){let n=iQ.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=kd.joinReplacements(o,r);o.length=0;let d=pN.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(oh(n=>n.lineRange.startLineNumber,sh)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let i=n.toSingleEdit(e);r.push(i)}return new bf(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Ur.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Ur(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new pN(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of Z2(this.replacements,(l,u)=>l.lineRange.distanceToRange(u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}l=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.replacements){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,i)=>new pN(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},pN=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"LineReplacement")}static deserialize(e){return new t(Ur.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=hh(e.text),i=e.range.startLineNumber,o=r.getValueOfRange(nr.fromPositions(new Qr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(nr.fromPositions(e.range.getEndPosition(),new Qr(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new Ur(i,a),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new Qr(o,a)}else n=new Qr(1,1);let i=r.addToPosition(new Qr(1,1));return new kd(nr.fromPositions(n,i),"")}else return new kd(new nr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new kd(nr.fromPositions(new Qr(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new nr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new kd(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new Gu(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Ur(r,n),this.newLines.slice(i,this.newLines.length-o))}toLineEdit(){return new oQ([this])}},Qlr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Qlr||={});var mN=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Zte(!0))}static{s(this,"ArcTracker")}handleEdits(e){let r=e.mapData(o=>new Zte(!1)),i=this._updatedTrackedEdit.compose(r).decomposeSplit(o=>!o.data.isTrackedEdit).e2;this._updatedTrackedEdit=i}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return rk(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return rk(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=oQ.fromEdit(e,new FE(this.originalText)),n=$F(r.replacements,o=>o.lineRange.length),i=$F(r.getNewLineRanges(),o=>o.length);return{deletedLineCounts:n,insertedLineCounts:i}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Zte=class{constructor(e){this.isTrackedEdit=e}static{s(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};f();var hN=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=bf.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=Ulr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let d=this._originalEdits.replacements[u],p=this.originalText.substring(d.replaceRange.start,d.replaceRange.endExclusive),m=d.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),A=hIe(g,m),y=hIe(m,p),x=hIe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${A.toFixed(2)} noRevert:(${y.toFixed(2)},${x.toFixed(2)})`),y!==1){let I=1-Math.max(x-y,0)/(1-y);n+=d.replaceRange.length*I,i+=d.replaceRange.length}e+=d.newText.length*A,r+=d.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function hIe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(hIe,"compute4GramTextSimilarity");function Ulr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(Ulr,"applyEditsToRanges");f();f();var sQ=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new Qr(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function ere(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new sQ(t),a=new sQ(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let d=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(d,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),A=new Gt(h,g);c.push(new Gu(A,m))}return new bf(c)}s(ere,"stringEditFromDiff");f();f();var Aat=require("worker_threads");var gIe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function qlr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(qlr,"createRpcProxy");var tre=class{constructor(e,r,n){this.responseHandler=new gIe;this.worker=new Aat.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=qlr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};f();var rre=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var aQ=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new Ur(o,l.original.startLineNumber),new Ur(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new Ur(o,r+1),new Ur(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new r1(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Cn("not a valid diff");return new r1(new nr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new nr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new r1(new nr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new nr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(yat(this.original.endLineNumberExclusive,e)&&yat(this.modified.endLineNumberExclusive,r))return new r1(new nr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new nr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new r1(nr.fromPositions(new Qr(this.original.startLineNumber,1),gN(new Qr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),nr.fromPositions(new Qr(this.modified.startLineNumber,1),gN(new Qr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new r1(nr.fromPositions(gN(new Qr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),gN(new Qr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),nr.fromPositions(gN(new Qr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),gN(new Qr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new Cn}};function gN(t,e){if(t.lineNumber<1)return new Qr(1,1);if(t.lineNumber>e.length)return new Qr(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new Qr(t.lineNumber,r.length+1):t}s(gN,"normalizePosition");function yat(t,e){return t>=1&&t<=e.length}s(yat,"isValidLineNumber");var nre=class t extends aQ{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Ur.join(e.map(i=>Ur.fromRangeInclusive(i.originalRange))),n=Ur.join(e.map(i=>Ur.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},r1=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new Cn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new Cn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new kd(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var vat=require("fs");var _0=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new mh(()=>{let e=Hlr([Pte(__dirname,"diffWorker.js"),Pte(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new tre(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:Cat(i.changes),moves:i.moves.map(a=>new rre(new aQ(new Ur(a[0],a[1]),new Ur(a[2],a[3])),Cat(a[4])))}}};function Cat(t){return t.map(e=>new nre(new Ur(e[0],e[1]),new Ur(e[2],e[3]),e[4]?.map(r=>new r1(new nr(r[0],r[1],r[2],r[3]),new nr(r[4],r[5],r[6],r[7])))))}s(Cat,"toLineRangeMappings");function Hlr(t){for(let e of t)if((0,vat.existsSync)(e))return e}s(Hlr,"firstExistingPath");f();var ore=new vt("repository"),OE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},Nh=class{static{s(this,"GitBranchLoader")}},ire=class extends Nh{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var sre=new vt("editSurvivalReporter"),AIe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new Fu;this._editSurvivalTracker=new hN(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=gd(this._document.uri),r=this.ctx.get(Nh);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){sre.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=gd(this._document.uri),n=await this.ctx.get(Nh).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return sre.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i,o){let a=e.computeTrackedEditsSurvivalScore(),c=await this.checkBranchChange(),l=this._getLineCountInfo(),u={fourGram:a.fourGram,noRevert:a.noRevert,timeDelayMs:r,didBranchChange:c,arc:o?.getAcceptedRetainedCharactersCount(),originalCharCount:o?.getOriginalCharacterCount(),currentLineCount:l?.insertedLineCounts,currentDeletedLineCount:l?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i};return{...u,currentLineCount:u.currentLineCount&&u.originalLineCount&&u.currentLineCount>u.originalLineCount?u.originalLineCount:u.currentLineCount,currentDeletedLineCount:u.currentDeletedLineCount&&u.originalDeletedLineCount&&u.currentDeletedLineCount>u.originalDeletedLineCount?u.originalDeletedLineCount:u.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(vn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new Cn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await ere(r,n,e.get(_0)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var are=class extends AIe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c),this._arcTracker=new mN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new sN(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{sre.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new hN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new mN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new hN(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new mN(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw sre.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Eat=new vt("editSurvivalTrackerService"),n1=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){Eat.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await ere(r,n,this.ctx.get(_0));i=new are(this.ctx,e,r,n,a,o,[0,30*1e3,120*1e3,300*1e3,600*1e3])}catch(a){Eat.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${nE(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};f();var Bc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var $lr=1e3,Wlr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:Jr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},AN=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new vt("codeMapper")}async mapCode(e,r,n,i,o,a=!1,c){if(!e.resource)throw new ZC("No uri found in code block");if(i.isCancellationRequested)throw new sw;e.code.includes(_l)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let l=await this.ctx.get(vn).getOrReadTextDocument({uri:e.resource});if(l.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(l.status==="invalid"){let S=`Failed to find file ${e.resource} with status ${l.status} and reason ${l.reason}`,R=new ZC(S);throw this.logger.error(this.ctx,S,R),R}let u=l.document.getText();if(u.length===0&&!e.code.includes(_l))return o&&await this.reportCodeBlock(e,o),{code:e.code};let d=new X7({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new NE(this.ctx)}),p=this.ctx.get(n1),m=await d.render();m=d.transformToFastApplyMessage(m),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Hi(e.resource),editDescription:e.markdownBeforeBlock});let h=await this.ctx.get(Nt).updateExPValuesAndAssignments(),g=ow(),A=[],y=0,x=0,I=u.length+e.code.length+$lr;for(;;){let S={copilotApiProvider:"proxy",modelConfiguration:Wlr,messages:m,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:u},copilotEditsSessionHeader:c};this.logger.debug(this.ctx,`Send map code request ${g} in iteration ${x} with params: ${JSON.stringify(S,null,2)}`);let B=await this.ctx.get(Wa).fetchResponse(S,i,h);if(this.logger.debug(this.ctx,`Received map code response ${g} in iteration ${x} with result: ${JSON.stringify(B,null,2)}`),y=this.calculateResponseLength(B,A,y),B.type==="length"){if(y>I)throw new ZC(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${u.length}, Code block length ${e.code.length}`);m=await new X7({documentContext:{document:l},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new NE(this.ctx),inProgressRewriteContent:B.truncatedValue}).render()}else if(B.type==="success"){let M=A.join("");if(M){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Hi(e.resource),partialText:M,languageId:l.document.detectedLanguageId,markdownCodeFence:aN(M)});let O=p.initialize(l.document,u,M);return{code:M,editSurvivalTrackingSession:O,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:B.requestId}}}else{let O=`No valid completion found for uri ${e.resource}`;throw new ZC(O)}}else{if(B.type==="canceled")throw new Bc;{let M=`Failed to map code for uri ${e.resource} with result type ${B.type}`;throw this.logger.error(this.ctx,M,B),new ZC(M)}}x+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Hi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Hi(e.resource)})}};f();var Pd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var aw=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var cre=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var cw=class{constructor(e,r){this.request=e;this.id=Ar();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},yIe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},lre=class{constructor(e=[],r="panel",n="en"){this._id=Ar();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new yIe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new cre(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var ure=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Pd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:sI,type:"user"},new Pd({message:sI});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Pd({message:aw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Pd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Pd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Pd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Pd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Pd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Pd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Pd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Pd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*bat(t){yield Promise.resolve(t)}s(bat,"stringToAsyncIterable");f();f();var QE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||yl(r)}static uriToPath(e){let r=Ko(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var dre=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await kA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},[]);return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(QE.posixFilePathToUri(e))}getFilePath(e){return QE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${J7} ${this.exampleFilePath}`,`// ${_l}`,"{ changed code }",`// ${_l}`,"{ changed code }",`// ${_l}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${J7} ${this.tsExampleFilePath}`,"class Person {",`   // ${_l}`,"   age: number;",`   // ${_l}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new Hp({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${_l}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var fre=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var CIe="<file>",cQ="```",uQ="###",Glr=/^(`+)([^ \n]*)/,lQ="filepath:";async function*Tat(t,e){let r=new fre(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let A=await r.peek(Math.max(cQ.length,CIe.length,uQ.length));if(A.startsWith(CIe)||A.startsWith(cQ))break;if(A.startsWith(uQ)){let y=await r.readLineIncludingLF(),x=y.substring(uQ.length).trim();e(x)?n.length=0:n.push(y)}else await Iat(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(CIe);for(;!r.endOfStream&&!i.startsWith(cQ);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Glr),c=a?a[2]:void 0,l=rze(c?eze(c):void 0),u=[`${l.lineComment.start} ${lQ}`,`:: ${lQ}`,`<!-- ${lQ}`,`// ${lQ}`,`# ${lQ}`],d=Math.max(...u.map(A=>A.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let A=await r.peek(Math.max(cQ.length,d));if(A.startsWith(cQ)){let y=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(y);continue}}if(!h&&u.some(y=>A.startsWith(y))){let y=await r.readLineIncludingLF(),x=u.reduce((I,S)=>A.startsWith(S)?y.substring(S.length):I,y);x=x.split("-->")[0].trim(),x.endsWith(p)&&(x=x.substring(0,x.length-p.length)),x=x.trim(),h=e(x);continue}await Iat(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Tat,"getCodeBlocksFromResponse");async function Iat(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Iat,"pipeOneLine");function wat(t){if(t.startsWith(`${uQ} `))return"";let e=t.indexOf(`
${uQ} `);return e===-1?"":t.substring(0,e)+`
`}s(wat,"parseOverallDescription");f();f();var pre=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Vlr=new vt("CopilotEditsConversations"),cl=class{constructor(e){this.editConversations=new kr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new lre([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Vlr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new pre(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var UE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Wa(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=ure.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof sw)await this.reportEnd(e,{message:sI});else if(n instanceof Pd)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Nt).updateExPValuesAndAssignments();this.abortIfCancelled(e,r);let o=e.userSelectedModelProviderName&&e.userSelectedModel?await o3(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Go.transformMessages(n,o.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new dre({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new NE(this.ctx),modelName:n,history:o,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:sI,type:"user"},new sw;this.ctx.get(cl).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=bat(r),o=new AN(this.ctx),a=s(u=>QE.pathToUri(e,u),"createUri"),c=[],l=wat(r);l&&await this.ctx.get(ju).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),this.abortIfCancelled(e,n);for await(let u of Tat(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async d=>{await this.ctx.get(ju).reportTurn(e,d)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof ZC||i instanceof G3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof sw)e.currentTurn.status="cancelled",e.currentTurn.response={message:sI,type:"user"},await this.reportEnd(e,{message:sI});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(ju).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(ju).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(ju).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};f();var yN=class extends Kd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(qr).resetToken(),r.get(Ad).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Yf({serverUrl:gj(r,n.serverUrl),apiUrl:gj(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var Zbi=new vt("exp");function Sat(t){let e=t.get(Nt);e.registerStaticFilters(Klr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>$i(t,qt.DebugOverrideEngine)||$i(t,qt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>pj()?"copilot-web":t.get(pn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>vIe(!t.get(Eo).isProduction()&&t.get(pn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(pn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>zlr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(pn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>vIe(t.get(pn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Ylr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(pn).getRelatedPluginInfo()){let i=Am+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(AM).includes(i)){JH(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=vIe(n.version)}return r})}s(Sat,"setupExperimentationService");function zlr(t){let e=t.get(pn).getEditorPluginInfo();return e.name==="copilot"&&Wy(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(zlr,"getPluginRelease");function Ylr(t){let e=t.get(pn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Ylr,"getTargetPopulation");function Klr(t){return Jlr(t)}s(Klr,"createAllFilters");function Jlr(t){let e=t.get(Ss);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(Eo).isProduction()?h_(t):"1.999.0"}}s(Jlr,"createDefaultFilters");function vIe(t){return t.split("-")[0]}s(vIe,"trimVersionSuffix");f();var dQ=(r=>(r.enabled="enabled",r.disabled="disabled",r))(dQ||{}),qE=Symbol("onMCPToolsListChanged"),Lh=class{static{s(this,"McpManager")}};f();var DA=class{static{s(this,"McpRuntimeNotifier")}},mre=class extends DA{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var CN=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var EIe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},hre=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new EIe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let d of this._recentUserActions){let p=c-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var ls;(n=>{function t(i){return new xIe(i)}n.ok=t,s(t,"ok");function e(i){return new bIe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(ls||={});var xIe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},bIe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var gre=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw HF(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw HF(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var wQ=Fe(MA());function $ct(t){return t.map(edr).join(`
`)}s($ct,"stringifyChatMessages");function edr({role:t,content:e}){if(t!==wQ.Raw.ChatRole.User&&t!==wQ.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===wQ.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==wQ.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(edr,"stringifyMessage");f();f();var tdr=/^\w[\w\d+.-]*$/,rdr=/^\//,ndr=/^\/\//;function idr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!tdr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!rdr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ndr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(idr,"_validateUri");function odr(t,e){return!t&&!e?"file":t}s(odr,"_schemeFix");function sdr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==OA&&(e=OA+e):e=OA;break}return e}s(sdr,"_referenceResolution");var Ts="",OA="/",adr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Cw=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Ts,this.authority=e.authority||Ts,this.path=e.path||Ts,this.query=e.query||Ts,this.fragment=e.fragment||Ts):(this.scheme=odr(e,a),this.authority=r||Ts,this.path=sdr(this.scheme,n||Ts),this.query=i||Ts,this.fragment=o||Ts,idr(this,a))}get fsPath(){return gTe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Ts),n===void 0?n=this.authority:n===null&&(n=Ts),i===void 0?i=this.path:i===null&&(i=Ts),o===void 0?o=this.query:o===null&&(o=Ts),a===void 0?a=this.fragment:a===null&&(a=Ts),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new yw(r,n,i,o,a)}static parse(e,r=!1){let n=adr.exec(e);return n?new yw(n[2]||Ts,Wre(n[4]||Ts),Wre(n[5]||Ts),Wre(n[7]||Ts),Wre(n[9]||Ts),r):new yw(Ts,Ts,Ts,Ts,Ts)}static file(e){let r=Ts;if(tw&&(e=e.replace(/\\/g,OA)),e[0]===OA&&e[1]===OA){let n=e.indexOf(OA,2);n===-1?(r=e.substring(2),e=OA):(r=e.substring(2,n),e=e.substring(n)||OA)}return new yw("file",r,e,Ts,Ts)}static from(e,r){return new yw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return tw&&e.scheme==="file"?n=t.file(ac.join(gTe(e,!0),...r)).path:n=oa.join(e.path,...r),e.with({path:n})}toString(e=!1){return ATe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new yw(e);return r._formatted=e.external??null,r._fsPath=e._sep===Gct?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var Gct=tw?1:void 0,yw=class extends Cw{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=gTe(this,!1)),this._fsPath}toString(r=!1){return r?ATe(this,!0):(this._formatted||(this._formatted=ATe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=Gct),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Vct={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Wct(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Vct[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Wct,"encodeURIComponentFast");function cdr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Vct[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(cdr,"encodeURIComponentMinimal");function gTe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,tw&&(r=r.replace(/\//g,"\\")),r}s(gTe,"uriToFsPath");function ATe(t,e){let r=e?cdr:Wct,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=OA,n+=OA),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Wct(l,!1,!1)),n}s(ATe,"_asFormatted");function zct(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+zct(t.substr(3)):t}}s(zct,"decodeURIComponentGraceful");var jct=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Wre(t){return t.match(jct)?t.replace(jct,e=>zct(e)):t}s(Wre,"percentDecode");f();var QA=class t{constructor(e){this.uri=e;this._uri=Cw.parse(Cl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new aE({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return Dte(this.uri)}get extension(){return Bte(this.uri)}toUri(){return this._uri}};var SQ=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},jre=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new sE;this.liveDependentants=0;this.fetchIssued=!1;this._result=new G7;Tl(r.length>0),Tl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>_Q.deserialize(r)),e.activeDocumentIdx,[],SQ.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},_Q=class t{constructor(e,r,n,i,o,a,c,l,u,d,p,m,h=i.length,g=new Ur(1,i.length+1),A=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=A;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Ur.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Zl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(QA.create(e.id),e.workspaceRoot?Cw.parse(e.workspaceRoot):void 0,lR.create(e.languageId),e.documentLinesBeforeEdit,cs.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?nr.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Zl(e.documentBeforeEdits),t1.deserialize(e.recentEdits),new Zl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Ur.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var zi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=ls.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=ls.ok(e),i=r.build(n);return new t(n,i)}},vw=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?$ct(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:uO(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Tl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function ldr(t,...e){let r=t;for(let n of e)r=n(r);return r}s(ldr,"chainStatelessNextEditProviders");var wN=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=ldr(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},SN=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new zi(ls.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=gre.createSortPermutation(a,oh(u=>u.lineRange.startLineNumber,sh)),l=new cs(c.apply(a));return new zi(ls.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},_N=class extends SN{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},RN=class extends SN{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var udr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),ddr=new Map(Object.entries(udr).map(([t,e])=>[t,{languageId:t,...e}]));function Kct(t){return yTe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(Kct,"getLanguage");function yTe(t){return ddr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(yTe,"_getLanguage");f();var kN=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?P0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new P0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new P0(new es(0,0),new es(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!P0.isRange(e))throw Ew("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Ew("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Ew("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var es=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw Ew("line must be non-negative");if(r<0)throw Ew("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw Ew();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw Ew();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},P0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?es.isPosition(e.start)&&es.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new es(e,r),a=new es(n,i)):es.isPosition(e)&&es.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):es.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=es.Max(e.start,this._start),n=es.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=es.Min(e.start,this._start),n=es.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw Ew();let n;return e?es.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return fdr(this)}};function Ew(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(Ew,"illegalArgument");function fdr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(fdr,"getDebugDescriptionOfRange");f();function Jct(t){let r=t.split(/\r?\n/).map(pdr),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(Jct,"looksLikeCode");function pdr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),NCe(t)||(e+=1);{NCe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(pdr,"guessLineType");var PN;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(PN||={});function mdr(t){return t.replace(/^\s+/g,"")}s(mdr,"trimLeadingWhitespace");function CTe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(CTe,"isImportStatement");var hdr=new aE(t=>{let e=Kct(t),{start:r,end:n}=e.lineComment,i=`(?:${O3(r)})`,o=n?`(?:${O3(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function vTe(t,e){let r=t.match(hdr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=mdr(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(vTe,"extractEndLineComment");function Vre(t,e){let r=vTe(t,e);if(!(r&&r.content.trim().length>0&&Jct(r.commentWithoutTokens)))return r}s(Vre,"extractExplicativeEndLineComment");var DN=class t extends SN{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>CTe(i,r))||gdr(e,n).some(i=>CTe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function gdr(t,e){return VWe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(gdr,"getOldLines");f();var xTe=Fe(MA());f();f();f();var UA;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(UA||={});var a1=D0("instantiationService");function Adr(t,e,r){e[UA.DI_TARGET]===e?e[UA.DI_DEPENDENCIES].push({id:t,index:r}):(e[UA.DI_DEPENDENCIES]=[{id:t,index:r}],e[UA.DI_TARGET]=e)}s(Adr,"storeServiceDependency");function D0(t){if(UA.serviceIds.has(t))return UA.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Adr(e,r,i)},"id");return e.toString=()=>t,UA.serviceIds.set(t,e),e}s(D0,"createDecorator");f();f();var Gp=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var ETe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},RQ=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new ETe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};f();var dk=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var ydr=!1,zre=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Yre=class t{constructor(e=new dk,r=!1,n,i=ydr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(a1,this),this._globalGraph=i?n?._globalGraph??new RQ(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,_K(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)ije(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=kQ.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw jWe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof Gp?(n=kQ.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=kQ.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=UA.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof Gp)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Gp?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new RQ(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new zre(i);for(let u of UA.getServiceDependencies(l.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),d instanceof Gp){let p={id:u.id,desc:d,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new zre(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Gp){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Gp)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var kQ=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Kre=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new dk(...e):e??new dk}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Yre(this._collection,!0)}};var Xre=D0("ITelemetrySender"),qA=D0("IChatMLFetcher");var Jre=class{constructor(){this._stream=new Tte;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Zre=D0("IEndpointProvider");f();var VE=D0("IParserService");f();var BN=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},PQ=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},DQ=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},xw=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},bw=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var ene=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new BN(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},BQ=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let d;return n<=i?(xw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),d=[new BN(e,0,n,i-n+1)]):e<=r?(xw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new BN(e,r-e+1,n,0)]):(xw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),xw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let d=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,d,p,m,h,g,A,y,x){let I=null,S=null,R=new ene,B=r,M=n,O=h[0]-y[0]-i,K=-1073741824,V=this.m_forwardHistory.length-1;do{let z=O+e;z===B||z<M&&u[z-1]<u[z+1]?(p=u[z+1],g=p-O-i,p<K&&R.MarkNextChange(),K=p,R.AddModifiedElement(p+1,g),O=z+1-e):(p=u[z-1]+1,g=p-O-i,p<K&&R.MarkNextChange(),K=p-1,R.AddOriginalElement(p,g+1),O=z-1-e),V>=0&&(u=this.m_forwardHistory[V],e=u[0],B=1,M=u.length-1)}while(--V>=-1);I=R.getReverseChanges(),R=new ene,B=a,M=c,O=h[0]-y[0]-l,K=1073741824,V=x?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let z=O+o;z===B||z<M&&d[z-1]>=d[z+1]?(p=d[z+1]-1,g=p-O-l,p>K&&R.MarkNextChange(),K=p+1,R.AddOriginalElement(p+1,g+1),O=z+1-o):(p=d[z-1],g=p-O-l,p>K&&R.MarkNextChange(),K=p,R.AddModifiedElement(p+1,g+1),O=z-1-o),V>=0&&(d=this.m_reverseHistory[V],o=d[0],B=1,M=d.length-1)}while(--V>=-1);return S=R.getChanges(),this.ConcatenateChanges(I,S)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,d=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,A=new Int32Array(g),y=new Int32Array(g),x=i-n,I=r-e,S=e-n,R=r-i,M=(I-x)%2===0;A[x]=e,y[I]=r;for(let O=1;O<=h/2+1;O++){let K=0,V=0;u=this.ClipDiagonalBound(x-O,O,x,g),d=this.ClipDiagonalBound(x+O,O,x,g);for(let z=u;z<=d;z+=2){z===u||z<d&&A[z-1]<A[z+1]?c=A[z+1]:c=A[z-1]+1,l=c-(z-x)-S;let Q=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(A[z]=c,c+l>K+V&&(K=c,V=l),!M&&Math.abs(z-I)<=O-1&&c>=y[z])return o[0]=c,a[0]=l,Q<=y[z]&&O<=1448?this.WALKTRACE(x,u,d,S,I,p,m,R,A,y,c,r,o,l,i,a,M):null}p=this.ClipDiagonalBound(I-O,O,I,g),m=this.ClipDiagonalBound(I+O,O,I,g);for(let z=p;z<=m;z+=2){z===p||z<m&&y[z-1]>=y[z+1]?c=y[z+1]-1:c=y[z-1],l=c-(z-I)-R;let Q=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(y[z]=c,M&&Math.abs(z-x)<=O&&c<=A[z])return o[0]=c,a[0]=l,Q>=A[z]&&O<=1448?this.WALKTRACE(x,u,d,S,I,p,m,R,A,y,c,r,o,l,i,a,M):null}if(O<=1447){let z=new Int32Array(d-u+2);z[0]=x-u+1,bw.Copy2(A,u,z,1,d-u+1),this.m_forwardHistory.push(z),z=new Int32Array(m-p+2),z[0]=I-p+1,bw.Copy2(y,p,z,1,m-p+1),this.m_reverseHistory.push(z)}}return this.WALKTRACE(x,u,d,S,I,p,m,R,A,y,c,r,o,l,i,a,M)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return bw.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],bw.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return bw.Copy(e,0,i,0,e.length),bw.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(xw.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),xw.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new BN(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};f();function Xct(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(Yst(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(Xct,"safeStringify");var tne=!1,TTe=!0,Cdr=200,NQ=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new vw(e),i=e.getActiveDocument(),o=fk(i);if(!o||!o.isEmpty())return zi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let S of e.documents)S.id!==i.id&&(l.push(`RELATED DOC: ${S.getDisplayPath()}`),l.push("```patch"),l.push(...Idr(S)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",d=new Ur(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let S=p<c.length;l.push(`IN PROGRESS VERSION ${S?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),S&&(l.push(u),m={editRange:new Ur(d.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,d.endLineNumberExclusive-1)),l.push("");let h=c.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):zi.noEdit({kind:"fetchFailure",error:new Error(Xct(g.err))},n);let{result:A,ttft:y}=g.val;if(y!==void 0&&n.setTtft(y),A.trim().length===0)return zi.noEdit({kind:"noSuggestions"},n);let x=rne(i.languageId,c,d,void 0,A,m),I=await _Te(this._parserService,x,i,{requireEditWithinNLines:5});if(I){let S=new cs([I]);return zi.edit({edit:S},n)}else return zi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};NQ=jd([ha(1,VE)],NQ);var NN=class extends NQ{constructor(r,n){super(NN.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return ls.error({kind:"cancel"});let o=await wTe(this.ID,this._chatMLFetcher,[{role:xTe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:xTe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),ls.ok({ignored:a,result:c,ttft:l})}};NN=jd([ha(0,VE),ha(1,qA)],NN);async function wTe(t,e,r,n,i){let o=new Jre,a=!1,c,l=o.stream.map(A=>({choices:[{index:0,finish_reason:null,logprobs:null,text:A.delta.text}]})),u=Edr(l,n),d=e.fetchOne(r,async(A,y,x)=>(typeof c>"u"&&(c=Date.now()),o.update(A,x),a?A.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?ls.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):ls.ok({ttft:c,ignored:p,result:m})}s(wTe,"fetchUntilConvergence");function fk(t){let e=new Gt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:vdr(t)}s(fk,"getOrDeduceSelectionFromLastEdit");function vdr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new nr(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=cE(a,o),l=o.length-c+1;return new nr(i,l,i,l)}s(vdr,"deduceSelectionFromLastEdit");async function Edr(t,e){let r=xdr(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],d=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let A=g.split(`
`).slice(-4,-1);if(A.length<3||n.indexOf(A.join(`
`)+`
`)<=0)continue;let x=d[m.index].substring(d[m.index].length-o);if(a.indexOf(x)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(Edr,"fetchCompletionUntilConvergence");function xdr(t,e){let r=[],n=[];return new V7(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(xdr,"getTextAfterFirstPattern");function bdr(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new PA(new Ur(n,i),o)}s(bdr,"createReducedLineEdit");var LN=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=bdr(r,n,i);let o=new cs([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let A=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),y=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),x=A.join(`
`),I=y.join(`
`),{editDistance:S}=d(x,I);return new bTe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,S)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new PQ(this.oldLines,n),o=new PQ(this.newLines,n),a=new BQ(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(c3(this.newLines,u))return new ITe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return elt(this.languageId,this.oldLines,u);function d(p,m){let h=new DQ(p),g=new DQ(m),y=new BQ(h,g).ComputeDiff(),x=0,I=0;for(let M of y)x+=M.originalLength,I+=M.modifiedLength;let S=p.length,R=m.length,B=x+I;return{aChanged:x,bChanged:I,aLength:S,bLength:R,editDistance:B}}}},bTe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},ITe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new cs([this.edit]);{let r=this.groupInHunks();return new cs(r.map(n=>{let i=n[0],o=n[n.length-1];return new PA(new Ur(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!TTe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>Cdr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!STe(new Ur(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new cs([this.edit]),i=r(n);this.parseErrorCount=await LQ(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,1),e(d)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=Vre(d,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>Vre(l,this.languageId)),i=r.map(l=>Vre(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],d=i[l];if(!d)continue;let{content:p}=d;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return elt(this.languageId,this.oldLines,e)}};function STe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(STe,"editIsInsideEditWindow");function elt(t,e,r){let i=e.length+1,o=r.slice(0);return new LN(t,e,new Ur(1,i),o).resolveDiff()}s(elt,"createPossibleEditFromLines");function rne(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=PN.fromString(i.trimEnd()),c=o?a.some(y=>y.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((y,x)=>{l.push(new LN(t,e,y,x))},"generateEdit");function d(){n&&u(n,a)}s(d,"generateEditCompletionRange");function p(){if(c)return;let x=new Ur(r.endLineNumberExclusive,e.length+1);x.length>a.length+5||u(x,a)}s(p,"generateEditAllDoc");function m(){for(let y=1;y<a.length;y++){let I=a.slice(a.length-y).join(`
`);for(let S=r.endLineNumberExclusive-1;S<e.length;S++){let B=e.slice(S,S+y).join(`
`);I===B&&u(new Ur(r.endLineNumberExclusive,S+1),a.slice(0,a.length-y))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let y=[];for(let x of a){if(x.indexOf(o.omittedMessage)>=0){u(o.editRange,y.map(I=>I));return}y.push(x)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let y=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...rne(t,e,r,n,y,o))}return g(l);function g(y){return A(y,s(I=>I.edit.lineRange.startLineNumber+","+I.edit.lineRange.endLineNumberExclusive+","+I.edit.newLines.join("|"),"keyfn"))}function A(y,x){let I=new Set,S=[];for(let R of y){let B=x(R);I.has(B)||(I.add(B),S.push(R))}return S}}s(rne,"generatePossibleEdits");async function _Te(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=tne?await LQ(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(tne){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(_Te,"selectBestEdit");function Idr(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(Idr,"summariseDocDiff");function tlt(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(tlt,"summarizeEditsAsUnifiedDiff");async function LQ(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(LQ,"getParseErrorCount");f();var zE=Fe(MA());f();var MQ=D0("ITokenizerProvider");var Iw=class extends zE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(MQ);return new Iw(n,i,o,c,r,a.get(qA))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],d=o.messages[l-1];if(u.role===zE.Raw.ChatRole.System&&d.role===zE.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===zE.Raw.ChatCompletionContentPartKind.Text&&m.type===zE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:zE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==zE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};Iw=jd([ha(3,MQ),ha(4,a1),ha(5,qA)],Iw);f();var rlt=Fe(MA());var nne=class extends rlt.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();var RTe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Gt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new P0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},HA=class extends RTe{constructor(r){super();this.value=r;this._transformer=new nk(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new Qr(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Tdr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(wdr(r))}_validatePosition(r){if(r.line<0)return new es(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new es(n-1,o)}if(r.character<0)return new es(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new es(r.line,i):r}};function Tdr(t){return new es(t.lineNumber-1,t.column-1)}s(Tdr,"corePositionToVSCodePosition");function wdr(t){return new Qr(t.line+1,t.character+1)}s(wdr,"vsCodePositionToCorePosition");f();f();function nlt(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(nlt,"min");f();function kTe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>kTe(n,e))}}s(kTe,"toAstNode");function ilt(t,e){let r=s3(e,a=>a.endExclusive>=t.start),n=aA(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Gt(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Gt(o,t.endExclusive)),i}s(ilt,"subtractRange");f();f();f();var ine=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=uR(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=uR(e),r=uR(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=uR(e),r=uR(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=uR(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new PTe(i,e-a)}};var PTe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var FQ=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=hh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new ine(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=hh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new es(r.index,Math.min(r.remainder,n))}toRange(e){return new P0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Gt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new kN(this.validateRange(n.range),n.newText));return new Bh(r.map(n=>new al(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new kN(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof es))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new es(r,n):e}validateRange(e){return new P0(this.validatePosition(e.start),this.validatePosition(e.end))}};var one=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new mh(()=>new FQ(this.text));this._originalPositionOffsetTransformer=new mh(()=>new FQ(this.originalText));this._text=new mh(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var DTe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},mk=class extends one{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function ane(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:d}=r[c],p=l.getText(),m=d?l.rangeToOffsetRange(d):void 0,h=olt(u,l),g=BTe.fromRootNode(h,p),A=NTe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&A.visitAll(O=>O.node.range.intersectsOrTouches(m)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(A),i.push(A.getTextFragment());let y=s(O=>m?O.range.endExclusive<m.start?m.start-O.range.endExclusive:O.range.start>m.endExclusive?3*(O.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),x=new aE(O=>m?O.children.length===0?O.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:nlt(O.children.map(K=>x.get(K)))+1:0),I=new aE(O=>{let K=O.parent?I.get(O.parent):Number.MAX_SAFE_INTEGER,V=x.get(O);return Math.min(K,V)}),S=!!e.tryPreserveTypeChecking,R=s(O=>S&&O.node?.kind==="import_statement"?0:100*I.get(O)+O.depth+10*(y(O)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(B!==void 0){let O=R;R=s(K=>{let V=O(K);return V===!1?!1:K.node?B(K.node,V,l):V},"costFn")}let M=A.getDescendantsAndSelf();for(let O of M){if(!O.node.node)continue;let K=R(O.node);K!==!1&&o.push({idx:c,node:O,cost:K})}}o.sort(oh(c=>c.cost,sh));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],d=new mk(u,l.toTextEditFromOriginal(u.getText().length)),p=d,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:ilt(Gt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:kTe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(ane,"summarizeDocumentsSyncImpl");function olt(t,e,r=void 0){let n=new Gt(t.startIndex,t.endIndex),i=[],o=new DTe(r,t,n,i,e);for(let a of t.children)i.push(olt(a,e,o));return o}s(olt,"createRemovableNodeFromOverlayNode");var BTe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Gt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Gt(0,e.range.start),o=new Gt(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let d=new Gt(c,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Gt(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return Sdr(this.document,this.range)}getTrailingWs(){return _dr(this.document,this.range)}};function Sdr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(Sdr,"getLeadingWs");function _dr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(_dr,"getTrailingWs");var NTe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Tw(this.node.range,this.node.document);if(!this._surviving)return new pk("");let e=Array.from(Z2(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof Tw&&c.fragment instanceof Tw){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new pk(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new pk(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)Rdr(r,i.fragment);return sne.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},OQ=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new al(new Gt(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof sne)for(let l of c.fragments)a(l);else c instanceof pk?i+=c.text:c instanceof Tw&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new Bh(r)}},pk=class extends OQ{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Tw=class t extends OQ{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Gt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Gt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Gt(this.range.start,r.range.endExclusive),this.originalText):null}},sne=class t extends OQ{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new pk(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Rdr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof Tw&&e instanceof Tw){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(Rdr,"pushFragment");f();var cne=Fe(MA());function QQ(t){if(Array.isArray(t))return t.map(r=>QQ(r));let e=(0,cne.toMode)(cne.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(QQ,"rawMessageToCAPI");f();f();var lne=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new Cn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new Cn("Invalid child startIndex");if(a.endIndex>r)throw new Cn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function alt(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=kdr(o,e),[c]=clt(t,a,void 0);return c.adjust(t,llt(e)),c.toOverlayNode(t,!0)}catch{return new une(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(alt,"getStructureUsingIndentation");function clt(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=clt(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new Cn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new Cn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new une(n,i,o),r]}s(clt,"createFoldingRangeTree");var une=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new Cn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=LTe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=LTe(e,o,o,"LINE",[]);a&&n.push(a)}return LTe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function LTe(t,e,r,n,i){let o=t.getOffsetAtPosition(new es(e-1,0)),a=r<t.getLineCount()?new es(r,0):new es(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new lne(o,c,n,i)}s(LTe,"createOverlayNode");function kdr(t,e){return Pdr(t,llt(e))}s(kdr,"generateFoldingRegions");function llt(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(llt,"isOffSide");function Pdr(t,e){let r=t.getOptions().tabSize,n=new MTe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Bdr(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let d=u.endAbove-1;d-a>=1&&n.insertFirst(a,d,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(Pdr,"_computeRanges");var Ddr=65535,hk=16777215,slt=4278190080,MTe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>hk||r>hk)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new FTe(e,r)}};function Bdr(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Bdr,"computeIndentLevel");var FTe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>hk||a>hk)throw new Error("startLineNumber or endLineNumber must not exceed "+hk);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&hk}getEndLineNumber(e){return this._endIndexes[e]&hk}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&slt)>>>24)+((this._endIndexes[e]&slt)>>>16);return r===Ddr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function gk(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(gk,"fromUnknown");var Rl=Fe(MA());var dne="current-version",Ak="next-version",dlt=2,flt=10,plt=.7,Ndr=/```[^\n]*\n/,ww=class extends wN{constructor(r,n,i){super(ww.ID,[o=>new DN(o),o=>new _N(o),o=>new RN(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new hre}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=fk(a),u=l?OTe(a,l):null,d=fk(c),p=d?OTe(c,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(dlt,flt)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new vw(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return zi.noEdit({kind:"unexpected",error:gk(l)},i)}let c=o.getArtificalDelay();return c>0&&await PE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):zi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return zi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return zi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let R={kind:"gotCancelled",message:"afterDebounce"};return zi.noEdit(R,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:A,activeDocumentLines:y}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let x=await wTe(this.ID,this.fetcher,QQ(p),{convergence:g,ignoreReplyTextBefore:Ndr,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(x.isOk()?"success":x.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),x.isOk()&&typeof x.val.ttft=="number"&&o.setTtft(x.val.ttft),i.isCancellationRequested)return zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(x.isError())return x.err.kind==="cancel"?zi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):zi.noEdit({kind:"fetchFailure",error:gk(x.err.err)},o);let I=x.val.result;if(I.length===0){let R=`<${Ak}>
`,B=x.val.ignored.indexOf(R);B>=0&&(I=x.val.ignored.substring(B+R.length))}if(I=Ldr(I),I.trim().length===0)return zi.noEdit({kind:"noSuggestions"},o);let S;if(c&&l&&u){let R=Mdr(A,c,l,I);if(!R||R.edits.length===0)return zi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=Fdr(c,R);if(B.edits.length===0)return zi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(tne){let K=await LQ(this._parserService,A.languageId,A.documentAfterEditsNoShortening.value),V=B.apply(A.documentAfterEditsNoShortening.value);if(await LQ(this._parserService,A.languageId,V)>K)return zi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}S=Odr(A,B);let M=S.edits[0].lineRange.startLineNumber,O=S.edits[S.edits.length-1].lineRange.endLineNumberExclusive;if(!STe(new Ur(M,O),u))return zi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let R=rne(A.languageId,y,m,h,I,void 0),B=await _Te(this._parserService,R,A,{requireEditWithinNLines:100});if(!B)return zi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);S=new cs([B])}return Qdr(A,S)?zi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Udr(A,S)?zi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):qdr(A,S)?zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Hdr(A,S)?zi.noEdit({kind:"filteredOut",message:"uncategorized"},o):zi.edit({edit:S},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await PE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=fk(i);if(l===null)return;let u=OTe(i,l),d=new HA(i.documentAfterEditsNoShortening.value),p=await jdr(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let V=$dr(i.documentAfterEditsLines,l.startLineNumber),z=Math.max(1,Math.min(V,l.startLineNumber-dlt)),Q=l.startLineNumber-z,U=Math.min(c.length,l.endLineNumber+flt),Z=U-l.endLineNumber,J=u.line-Q,j=u.line+Z,$=new P0(J,0,j,d.getLineLength(j));return{firstEditableLineInShortenedDocument:z,lastEditableLineInShortenedDocument:U,editWindow:$}}(),A=ane(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],y=new Ur(1,m),x=new Ur(m,h+1),I=A.text,{messages:S,prediction:R,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:I,languageId:i.languageId},n),M=I.split(/\r\n|\r|\n/).length,O=A.projectRange(g),K=A.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:A,editWindowAllowedEditLineRange:new Ur(O.start.line+1,O.end.line+2),allowedEditLineRange:new Ur(m,h+1),messages:S,prediction:R,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:c,completionPrefixRange:y,completionRange:x,convergence:I,expectedConvergencePrefix:K.start,maxCompletionLineCount:M+20}}async _renderPrompt(r,n){let o=await Iw.create(this._instantiationService,UTe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(gne)?.prediction,c=!!o.metadata.get(pne);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};ww=jd([ha(0,qA),ha(1,VE),ha(2,a1)],ww);function Ldr(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${Ak}>`,`
`),t=e(t,`\`\`\`
</${Ak}>`,`
`),t=e(t,`</${Ak}>`,`
`),t}s(Ldr,"removeSuffixFromReply");function OTe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new HA(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(OTe,"getCursorPositionInOuterDocument");function Mdr(t,e,r,n){let i=PN.fromString(e.text),o=PN.fromString(n.trimEnd()),c=new LN(t.languageId,i,new Ur(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=TTe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Mdr,"generateSummarizedEditWindowEdit");function Fdr(t,e){let r=e.toEdit(new Zl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Fdr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Odr(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return wa.replace(new Gt(a,a+i.replaceRange.length),i.newText)}),n=new Rd(t.documentAfterEdits,sa.create(r));return cs.fromEdit(n)}s(Odr,"convertOuterDocumentEditToProjectedEdit");function Qdr(t,e){let r=e.toEdit(t.documentAfterEdits),n=mlt(t.documentAfterEdits.value,r),i=new fne,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(mlt(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Qdr,"editWouldUndo");function Udr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Clt(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Udr,"editWouldDeleteWhatWasJustInserted");function qdr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Clt(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(vTe(i,t.languageId))return!0}return!1}s(qdr,"editWouldDeleteAComment");function Hdr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return QTe(o,i)/i.size>.8}s(Hdr,"editWouldDuplicateExistingLines");function Clt(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(Clt,"editIsDeletion");function $dr(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s($dr,"findLineNumberAboveWithContent");var fne=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(glt(this.inserted,e.inserted),glt(this.deleted,e.deleted))}isUndoneBy(e){let r=Alt(e.inserted,e.deleted),n=Alt(e.deleted,e.inserted),i=QTe(n,this.inserted),o=QTe(r,this.deleted);return n.size>6&&i/n.size>plt||r.size>6&&o/r.size>plt}};function mlt(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of hlt(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of hlt(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Wdr(c.newText,l.newText)))}return new fne(r,n)}s(mlt,"getInformationDelta");function Wdr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Wdr,"trimOverlap");function hlt(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(hlt,"to4grams");function glt(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(glt,"setUnion");function Alt(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(Alt,"setMinus");function QTe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(QTe,"setIntersectionCount");async function jdr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||alt(new HA(e.getText()),e.languageId,void 0)}s(jdr,"getStructure");var UTe=class extends Rl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${Ak}>`,`\`\`\`${o}`,`${i}`,"```",`</${Ak}>`].join(`
`),c=(0,Rl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new gne(a)}),vscpp(Rl.SystemMessage,{priority:1e3},vscpp(nne,null),this._getInstructions()),vscpp(Rl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Rl.Chunk,{priority:300},vscpp(mne,{doc:l}))):vscpp(Rl.Chunk,{priority:100+u},vscpp(mne,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(Rl.Chunk,{priority:300},vscpp(hne,{doc:l}))):vscpp(Rl.Chunk,{priority:200+u},vscpp(hne,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(Rl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new pne}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",dne,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",dne,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",dne,"> and </",dne,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",Ak,">.")}},pne=class extends Rl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},mne=class extends Rl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},hne=class extends Rl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...tlt(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},gne=class extends Rl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};f();f();function vlt(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(vlt,"findIndexes");function Gdr(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=vlt(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],A=r[p];if(g===A)h--,p--;else if(A.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],d=vlt(t,e[c]).slice(-n).reverse();for(let p of d){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],A=t[p];if(g===A)h++,p++;else if(A.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(Gdr,"deduplicateEditRegion");function Elt(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:Gdr(i,r.split(/\r?\n/),o).join(`
`)}}s(Elt,"postProcessUpdatedEditWindow");f();var Ane=Fe(MA());function xlt(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Ane.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Ane.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(xlt,"getTextPart");function Vdr(t){return{type:Ane.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Vdr,"toTextPart");function qTe(t){return[Vdr(t)]}s(qTe,"toTextParts");f();var yne=D0("IDiffService");var GTe=Fe(MA());f();var Cne="<|cursor|>",yk="<|code_to_edit|>",MN="<|/code_to_edit|>",Ilt="<|area_around_code_to_edit|>",Tlt="<|/area_around_code_to_edit|>",zdr="<|current_file_content|>",Ydr="<|/current_file_content|>",Kdr="<|edit_diff_history|>",Jdr="<|/edit_diff_history|>",Xdr="<|recently_viewed_code_snippets|>",Zdr="<|/recently_viewed_code_snippets|>",efr="<|recently_viewed_code_snippet|>",tfr="<|/recently_viewed_code_snippet|>",wlt=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${yk} and ${MN} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Cne}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${yk} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${yk} and ${MN} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${yk} or ${MN} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Slt(t,e,r,n){let i=t.getActiveDocument(),o=ifr(t,n),a=rfr(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${Xdr}
${o}
${Zdr}

${zdr}
current_file_path: ${c}
${e}
${Ydr}

${Kdr}
${a}
${Jdr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Cne}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${yk}\` and \`${MN}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Slt,"getUserPrompt");function rfr(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=nfr(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(rfr,"getEditDiffHistory");function nfr(t){let e=[],r=cs.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(nfr,"generateDocDiff");function blt(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[efr,n,e,tfr].join(`
`)}s(blt,"formatCodeSnippet");function ifr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);n&&(p=p.map((y,x)=>`${x+1}|${y}`));let m=p.map(y=>e(y)+1),h=e(blt(d.path,"",!0)),g=m.reduce((y,x)=>y+x,0)+h,A=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,A=!0;p.length>0&&(l+=g,c.push(blt(d.path,p.join(`
`),A)))}return c.join(`

`)}s(ifr,"getRecentCodeSnippets");function HTe(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(HTe,"truncateCode");var _lt=2,Rlt=10,$Te=15,WTe=1e3,jTe=2e3;var Fh=class extends wN{constructor(r,n,i){super(Fh.ID,[o=>new DN(o),o=>new _N(o),o=>new RN(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new vw(r);try{if(r.xtabEditHistory.length===0)return zi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new zi(o,i.build(o))}catch(o){return zi.noEdit({kind:"unexpected",error:gk(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=fk(o);if(a===null)return ls.error({kind:"uncategorized",error:gk(new Error("NoSelection"))});let c=s(ae=>Math.floor(ae.length/4),"computeTokens"),l=new Qr(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),d=o.documentAfterEdits.value,p=d.substring(0,u)+Cne+d.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-$Te),A=Math.min(h.length,m+$Te+1),y=_lt,x=Rlt,I=Math.max(0,m-y),S=Math.min(h.length,m+x+1),R=o.documentAfterEdits.getTransformer().getOffsetRange(new nr(I,0,S,0)),B;B=d.split(/\r?\n/).slice(I,S);let M=[I,S],O=h.slice(I,S),K=[Ilt,...h.slice(g,I),yk,...O,MN,...h.slice(S,A),Tlt].join(`
`),V=K,z;{let ae=c(K),te=0;if(ae>=jTe)z=K,te=g;else{let pe=Math.floor((jTe-ae)/2),[Ae]=HTe(h.slice(0,g),!0,pe),[,Oe]=HTe(h.slice(A),!1,pe);te=Math.max(Ae,m-WTe);let Te=Math.min(Oe+A,m+WTe+1);z=[...h.slice(te,g),K,...h.slice(A,Te)].join(`
`)}}let Q=Slt(r,z,V,c),U=[{role:GTe.Raw.ChatRole.System,content:qTe(wlt)},{role:GTe.Raw.ChatRole.User,content:qTe(Q)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return ls.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let Z=new k3;i.setFetchStartedAt();let J,j=await this._endpointProvider.getEndpointInfo(this.ID),$=await this._chatMLFetcher.fetchOne(QQ(U),async(ae,te,pe)=>{J===void 0&&(J=Z.elapsed())},{id:j.id,name:j.name},{temperature:0},n);if($.type==="canceled")return i.setFetchResultIfNotSet("cancelled"),ls.error({kind:"gotCancelled",message:"afterFetchCall"});if($.type==="quotaExceeded")return i.setFetchResultIfNotSet("failure"),ls.error({kind:"quotaExceeded"});if($.type!=="success")return i.setFetchResultIfNotSet("failure"),ls.error({kind:"fetchFailure",error:gk($)});i.setFetchResultIfNotSet("success"),J&&i.setTtft(J),i.setResponse($.value);let X=Fh.getBacktickSection($.value);return await this.generateReturnEditFormat(o,R,B.join(`
`),X,M,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Elt(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=l.split(/\r?\n/),p=u.changes.map(m=>new PA(new Ur(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?ls.error({kind:"noSuggestions"}):ls.ok({editWindow:n,edit:new cs(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,Fh.DEBOUNCE_MS-n);r.setDebounceTime(i),await PE(i)}};Fh=jd([ha(0,yne),ha(1,qA),ha(2,Zre)],Fh);f();var vne=class t extends xs{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new dO,fh(this,r.openDocuments,(i,o)=>{o.add(lE(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Tl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new Rd(u,c);if(l===void 0){this.pushToHistory(i.id,d);return}let p=l.entry.edit,m=cs.fromEdit(p),h=cs.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),A=new Rd(p.base,g);this.pushToHistory(i.id,A)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};f();f();var VTe=Fe(require("crypto"));var UQ=VTe.randomUUID.bind(VTe);var Olt=Fe(MA()),XTe=Fe(fQ());f();var Ene=D0("ISnippyService");f();f();var qQ=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),xne=65;function sfr(t){let e=0,r;qQ.lastIndex=0;do if(r=qQ.exec(t),r&&(e+=1),e>=xne)break;while(r);return e}s(sfr,"lexemeLength");function afr(t,e){let r=0,n;qQ.lastIndex=0;do if(n=qQ.exec(t),n&&(r+=1,r>=e))return qQ.lastIndex;while(n);return t.length}s(afr,"offsetFirstLexemes");function klt(t,e){let r=t.split("").reverse().join(""),n=afr(r,e);return r.length-n}s(klt,"offsetLastLexemes");function zTe(t){return sfr(t)>=xne}s(zTe,"hasMinLexemeLength");f();f();var Plt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Plt||={});var YTe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(YTe||={});var Dlt;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Plt.is)}e.is=t,s(t,"is")})(Dlt||={});var KTe;(e=>{function t(r){if(YTe.is(r))return ls.error(r);if(Dlt.is(r))return ls.ok(r)}e.to=t,s(t,"to")})(KTe||={});var Blt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Blt||={});var Nlt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Nlt||={});var Llt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Llt||={});var Mlt;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Blt.is)&&"page_info"in r&&Nlt.is(r.page_info)&&"license_stats"in r&&Llt.is(r.license_stats)}e.is=t,s(t,"is")})(Mlt||={});var JTe;(e=>{function t(r){if(YTe.is(r))return ls.error(r);if(Mlt.is(r))return ls.ok(r)}e.to=t,s(t,"to")})(JTe||={});var bne=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,KTe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,JTe.to)}async fetch(e,r,n){let i=this.ctx.get(ln),o=await this.ctx.get(qr).getToken(),a=km(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...ip(this.ctx),"X-GitHub-Api-Version":lI},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return n(d)}};var Flt=new vt("[CODE REFERENCING]"),FN=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(bne,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Cr).getTextDocument({uri:e.toString()});if(!a){Flt.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:A,license_stats:y}=g.val;return{match:h,files:A,licenseStats:y}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){Flt.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let A=Array.from(g).sort(),y=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,x={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:y,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:A.map(I=>({license:I,url:`${h.match.github_url}`}))};await this.ctx.get(pf).handleIPCodeCitation(this.ctx,x)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=sa.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!zTe(l)){let m=a.value.slice(0,o.start),h=klt(m,xne);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!zTe(l))return;let u=a.getTransformer(),d=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};FN=jd([ha(1,a1)],FN);async function Qlt(t){let e=new Kre;return e.define(Xre,new ZTe(t)),e.define(yne,new _0),e.define(VE,new Gp(ewe,[!0])),e.define(Ene,new Gp(FN,[t])),e.define(qA,await rwe.Create(t)),e.define(MQ,new Gp(nwe)),e.define(Zre,new twe(t)),e.seal()}s(Qlt,"createInstantiationService");var ZTe=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=$r.createAndMarkAsIssued(i,o);Dt(this.ctx,e,a)}},ewe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},twe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==Fh.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Nt).updateExPValuesAndAssignments();return{id:this.ctx.get(Nt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},rwe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Go.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=UQ(),l=await this.ctx.get(u0).fetchAndStreamChat(this.ctx,a,$y.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,d)=>{if(r)return await r(u,0,{text:d.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:xlt(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},nwe=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Ine("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Ine(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Ine=class{constructor(e){this.mode=Olt.OutputMode.Raw;this.tokenizer=Wi(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===XTe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===XTe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var Tne=class extends xs{constructor(r){super();this.workspace=r;this._garbageCollector=new swe(20);this._documentCaches=new Map;fh(this,r.openDocuments,(n,i)=>{let o=new iwe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(lE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Sc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},iwe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new owe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},owe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},swe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var HQ=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},wne=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new HQ("",null),this._tail=new HQ("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new HQ(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var Sne=class extends xs{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new wne(50);fh(this,r.openDocuments,(n,i)=>{let o=new awe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(lE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(Sc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},awe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var _ne=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},ON=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:y,isShown:x,acceptance:I,logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:M,promptLineCount:O,promptCharCount:K,isDefaultEndpoint:V,hadLowLogProbSuggestion:z,nonTerminatingError:Q,nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,hasNextEdit:$,nextEditLogprob:X,maxLinesPerEdit:ie,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchTime:Oe,fetchResult:Te,fetchError:Je,fetchStartedAfterMs:Me}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:I,nonTerminatingError:Q,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchResult:Te,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(V),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:this._boolToNum(y),isShown:this._boolToNum(x),logProbThreshold:S,documentsCount:R,editsCount:B,activeDocumentEditsCount:M,promptLineCount:O,promptCharCount:K,hadLowLogProbSuggestion:this._boolToNum(z),nEditsSuggested:U,kthEditPicked:Z,lineDistanceToMostRecentEdit:J,debounceTime:j,fetchStartedAfterMs:Me,fetchTime:Oe,hasNextEdit:this._boolToNum($),nextEditLogprob:X,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};ON=jd([ha(0,Xre)],ON);f();var QN=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var Ck=!1,Ult=300,UN=class extends xs{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new Tne(this._workspace);this._nextEditCache=new Sne(this._workspace);this._recentlyShownCache=new uwe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;fh(this,this._workspace.openDocuments,(u,d)=>{d.add(BCe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(ON)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new _ne(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??UQ());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),d,p,m,h;if(l)d=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await PE(Ult);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await PE(Ult);else{h=new lwe,c.setHeaderRequestId(h.headerRequestId);let y=o.value.get();p=y;let x=await this.fetchNextEdit(h,r,c,i),I=y.value!==o.value.get().value;if(x.isError())switch(x.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=x.err.error;break;default:uO(x.err)}else if(!I){let S=x.val;S.isEmpty()||(d=S.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||S.edits.length>1)&&this._nextEditCache.setNextEdits(r,S,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!d)return this._telemetrySender.sendTelemetry(c),new QN(void 0);if(this._rejectionCollector.isRejected(r,d))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new QN(void 0);Tl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",A=new QN({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(A,c),d.isNeutral()||this._recentlyShownCache.add(r,a,[d,h]),A}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=sa.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=cwe(r.lastEdits.swap(c)),d=l.compose(),p=new mk(new HA(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new Zl(o.text),g=e1.fromEdit(new Rd(m,d)).removeCommonSuffixPrefixLines(),A=l.edits.at(-1)?.getNewRanges().at(0),y;A&&(y=new Zl(p.text).getTransformer().getRange(A));let x=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,I=this._workspace.getWorkspaceRoot(r.docId),S=s(O=>{let V=new e1(new Zl(p.text),O).toEdit();return qlt(V,p)},"toEditOnDocumentAfterEditsNoShortening"),R=s(O=>p.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(O=>p.project(O),"toProjectedOffset"),M=new _Q(r.docId,I,r.languageId,g.base.getLines(),g.edit,y,m,l,i,S,R,B,r.lastEdit.base.getTextLength().lineCount,a,x);return{recentEdit:r.lastEdit,nextEditDoc:M,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return ls.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=cwe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(O=>this._shortenDocument(O,l))),d=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new jre(r.headerRequestId,u.map(O=>O.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,A;if(h){g=h,Ck&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let O=this._hookupCancellation(g,o);try{A=await g.result}finally{O.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let O=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let K=this._hookupCancellation(g,o);try{A=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(A)}catch(V){throw g.setResultError(V),V}finally{K.dispose(),O()}}i.setStatelessNextEditTelemetry(A.telemetry);let y=A.nextEdit;if(y.isError())return y;let x=y.val.edit;if(x.edits.length===0)return ls.error({kind:"noSuggestions"});let S=new e1(new Zl(d.projectedDocument.text),x).toEdit(),R=qlt(S,d.projectedDocument),B=S.edits.length===R.edits.length?y.val.permutation:void 0,M=R.decompose(B);return ls.ok(M)}_hookupCancellation(r,n){let i=new Fu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new sN);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){Ck&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){Ck&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){Ck&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}Ck&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(Sc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){Nte(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new mk(new HA(r.base.value),new Bh([])),clippedRange:new Ur(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Gt(0,0)),o=Ur.fromRange(i);function a(p,m){return new Ur(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new Ur(1,n.textLength.lineCount+1),l=cwe(c.intersect(a(o,100))),u=Ur.subtract(c,l);return{document:new mk(new HA(r.base.value),new Bh(u.map(p=>al.delete(n.getOffsetRange(new nr(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new SQ("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await dfr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new HA(n.base.value),a=n.edit.edits.at(0)?.range??new Gt(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Gt(h.range.start,g.range.endExclusive))}let l=Hlt(o.offsetRangeToRange(a)),u=ane(1e4,{costFnOverride:s((h,g,A)=>{let y=Hlt(A.offsetRangeToRange(h.range)),x=ufr(l,y);return x>100?!1:x},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],d=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(d).lineNumber,m=new Ur(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};UN=jd([ha(4,VE),ha(5,a1),ha(6,Ene)],UN);function qlt(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return sa.fromOffsetEdit(r)}s(qlt,"projectBackEdit");function Hlt(t){return new Ur(t.start.line+1,t.end.line+1)}s(Hlt,"lineRangeFromVSCodeRange");function ufr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(ufr,"lineRangeDist");async function dfr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(dfr,"getStructure");function cwe(t){if(!t)throw new Cn("expected value to be defined, but it was not");return t}s(cwe,"assertDefined");var lwe=class{constructor(){this.headerRequestId=UQ()}static{s(this,"NextEditFetchRequest")}},uwe=class{constructor(){this._cache=new l3(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var $lt=10,$A=class{constructor(e){this.lastResultsById=new kr($lt);this.lastResultsByUri=new kr($lt);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=QA.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(Cr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),d=l.positionAt(c.result.edit.range.endExclusive),p=Ar(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Qlt(this.ctx),r=!1;try{let a=await this.ctx.get(Nt).updateExPValuesAndAssignments();r=ffr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?Fh:ww),i=this.ctx.get(pA),o=new zte(i);return await I2.catch(()=>{}),e.createInstance(UN,i,n,o,new vne(i))}};function ffr(t,e){let r=$i(t,qt.NESXTab);return r!==void 0?r:t.get(Nt).enableNESXTab(e)}s(ffr,"shouldUseXTab");f();var Wlt=Fe(ui());var Rne=class extends pA{constructor(r){super();this._openDocuments=fA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Cr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=QA.create(r);return this.addDocument({id:o,initialValue:i,languageId:lR.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=QA.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=QA.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=QA.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new dwe(r.id,new Zl(r.initialValue??""),[],r.languageId??lR.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Cr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},dwe=class extends GJ{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new Qr(e.lineNumber+1,e.column+1));this.updateSelection([new Gt(r,r)])}editFromLspContentChanges(e){return new t1(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(Wlt.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new Qr(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new Qr(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new Cn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return sa.replace(new Gt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};f();var WA=class{static{s(this,"AuthenticationService")}};f();var jlt=require("crypto"),c1=Fe(require("fs/promises")),Glt=require("os"),YE=Fe(require("path"));var KE=class{constructor(e){this.ctx=e;this.logger=new vt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=YE.extname(__filename)===".ts"?YE.resolve(__dirname,"../../../packages/ripgrep/bin"):YE.resolve(__dirname,"./bin"),o=YE.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await c1.readFile(o),c=(0,jlt.createHash)("sha256").update(a).digest("hex"),l=YE.join((0,Glt.homedir)(),".cache/pkg",c);await c1.mkdir(l,{recursive:!0});let u=Hi(yl(o)),d=YE.join(l,u);try{await c1.stat(d)}catch{await c1.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await c1.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var Vlt=require("child_process"),fwe=require("perf_hooks");var JE=new vt("ripgrepProcessManager"),jA=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,JE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){JE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){JE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){JE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){JE.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}JE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:ow(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);JE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=fwe.performance.now();JE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,Vlt.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let d=fwe.performance.now()-r;JE.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var qN=class extends IC{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var zlt=100,Ylt=1e3*60*5;function Klt(t){let e=new pwe(t);t.get(kc).registerContextProvider(e),t.get(EC).add(e.id)}s(Klt,"registerRelatedFilesShim");var pwe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new ZS(zlt,Ylt);this.relatedFilesCache=new ZS(zlt,Ylt);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Nt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await XJ(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of c.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){Vv(this.ctx,o,"relatedFilesShim")}}};f();f();f();var kne=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new Ua;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var Bd=class{constructor(e){this.ctx=e;this.watchers=new kr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Xr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,i){return this.getWatcher(e)?.onFileChange(Wl(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,i)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var HN=class{static{s(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},pfr="workspaceLifecycleManager",Nd=new vt(pfr),l1=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ws(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?Nd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(Nd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):Nd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);Nd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(Up).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Cr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){Nd.debug(r,"No workspaces to add.");return}Nd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];Nd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(d=>d.uri===c.uri)===l&&!u.some(d=>t.isSubfolder(c,d)));Nd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));Nd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));Nd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){Nd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(Bd).terminateWatching(c);for(let u of this.activeListeners)Nd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.didRemoveWorkspace(c)}for(let c of o){if(!c.uri)continue;Nd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(Bd);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){Nd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.didTerminateWorkspaceSubfolders(c,u)}for(let d of this.activeListeners)Nd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,d.didChangeFiles.bind(d))}}for(let c of this.activeListeners)for(let l of o)Nd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.didAddWorkspace(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(Bd).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function Pne(t){t.set(l1,new l1(t))}s(Pne,"setupWorkspaceLifecycleListener");f();var Xlt=require("child_process");var Dne=class extends Nh{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Xlt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){ore.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=Ko(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?OE.branch(o):OE.detachedHead()}}extraArgs(){return[]}};f();var Bne=class extends Nh{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(Ni),i=no(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;ore.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return OE.branch(r)}else return this.isCommitSha(e)?OE.detachedHead():OE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};f();f();var Nne=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var mfr=64;var _w={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},u1={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},mwe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,mfr)}},Sw=class extends mwe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},_i=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},vk=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},Ek=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var po=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},Zlt=E.Object({content:E.Array(E.Union([E.Object({value:E.String()}),E.Object({value:E.Unknown()})])),status:E.Optional(E.Union([E.Literal("success"),E.Literal("error"),E.Literal("cancelled")]))}),Lne=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(Lne||{}),eut=E.Object({result:E.Enum(Lne)});var Oh=class extends Sw{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:_w,type:"shared"})}};f();var hfr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),gfr=new Map;for(let[t,e]of hfr)gfr.set(e,t);f();function $N(t){return`[${Hi(t)}](${t})`}s($N,"formatUriForFileWidget");function d1(t){let e=Afr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(d1,"resolvePathInput");function Afr(t){if(t.startsWith("/")||rut()&&Cfr(t)||rut()&&t.startsWith("\\\\"))return yl(t)}s(Afr,"resolveFsUri");function rut(){return process.platform==="win32"}s(rut,"isWindows");function yfr(t){return t>=65&&t<=90||t>=97&&t<=122}s(yfr,"isWindowsDriveLetter");function Cfr(t){return yfr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(Cfr,"hasDriveLetter");function $Q(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof _i?r.value:r instanceof Ek?"":r instanceof vk?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s($Q,"parseToolResultToString");function Mne(t){let{content:e}=t;return{message:$Q(e)}}s(Mne,"formatToolErrorResult");function nut(t){let{content:e}=t;return{data:e.map(r=>r instanceof _i?{type:"text",value:r.value}:r instanceof Ek?{type:"text",value:"<unsupported>"}:r instanceof vk?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(nut,"formatToolSuccessResult");var Fne=class extends Oh{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to edit."}),code:E.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:E.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new po([new _i(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=d1(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new AN(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0,r.copilotEditsSessionHeader)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(Ld).getToolByNameAndProvider("insert_edit_into_file",u1);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(Ld).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;let a=$D({uri:d1(r.input.filePath),languageId:"UNKNOWN"});if(i){let d=await Rc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,d,a,o)})}let c=$Q(n.content),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new Hp({code:c,languageId:a,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new po([new _i(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i,o){aVe(e.ctx,"agentPanel",{requestSource:o?.requestSource??"",chatRequestModel:o?.chatRequestModel??"",mapper:o?.mapper??"",headerRequestId:o?.headerRequestId??"",mode:(e.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:e.turn.getResolvedModelId()??"unknown",languageId:i},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=d1(n.filePath);return{progressMessage:`Editing ${$N(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var iut=new vt("findFilesTool"),One=class t extends Oh{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:E.Object({query:E.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:E.Optional(E.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new po([new _i("Cancelled")],"cancelled");i=await e.ctx.get(KE).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new po([new _i("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(jA),u={},d=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{iut.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let A=await l.execute(i,["--files","-g",o],n,{cwd:Ya(g.uri)},t.timeOutInSeconds*1e3);iut.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${A}`),u[g.uri.toString()]=A.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>`${Ya(no(g.uri,y))}`)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${y}`)}});try{await Promise.all(d)}catch(g){let A=g instanceof Error?g.message:"An unknown error occurred";return new po([new _i(A)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let A in u)u[A].length>0&&m>0&&(p.push(u[A].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new po([new _i(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new po([new _i(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var sut=new vt("findTextInFilesTool"),Qne=class t extends Oh{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:E.Object({query:E.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:E.Optional(E.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:E.Optional(E.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new po([new _i("Cancelled")],"cancelled");i=await e.ctx.get(KE).resolvePath()}catch(y){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(y)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new po([new _i("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(jA),p={},m=u.map(async y=>{if(n.isCancellationRequested)throw new Error("Canceled");try{sut.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${y.uri.toString()}`);let x=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",Ya(y.uri)],I=await d.execute(i,x,n,{cwd:Ya(y.uri)},t.timeOutInSeconds*1e3);sut.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${y.uri.toString()} with results: ${I}`),p[y.uri.toString()]=I.split(`
`).map(S=>S.trim()).filter(S=>S.length>0)}catch(x){let I=x instanceof Error?x.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${y.uri.toString()}: ${I}`)}});try{await Promise.all(m)}catch(y){let x=y instanceof Error?y.message:"An unknown error occurred";return new po([new _i(x)],"error")}let h=[],g=l;for(;g>0;){let y=!1;for(let x in p)p[x].length>0&&g>0&&(h.push(p[x].shift()),g--,y=!0);if(!y)break}let A=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new po([new _i(A)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new po([new _i(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var qne=Fe(require("path"));var Une=class extends Oh{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:E.Object({path:E.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=e.turn.workspaceFolders,a=e.turn.workspaceFolder,c=d1(i);if(!this.isPathWithinWorkspace(c,o,a))return new po([new _i("Error: Path is outside of workspace folders")],"error");let u=await e.ctx.get(Ni).readDirectory(c.toString());return u.length===0?new po([new _i("Folder is empty")],"success"):new po([new _i(u.map(([d,p])=>`${d}${p&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=d1(e.input.path);return{progressMessage:`Reading directory ${$N(n)}`}}isPathWithinWorkspace(e,r,n){return!r&&!n?!0:r&&r.length>0?r.some(i=>this.isUriWithinDirectory(e,i.uri)):n?this.isUriWithinDirectory(e,n.uri):!1}isUriWithinDirectory(e,r){let n=Ko(e),i=Ko(r);if(!n||!i)return!1;let o=qne.relative(i,n);return o===""?!0:!o.startsWith("..")&&!qne.isAbsolute(o)}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var Hne=class extends Oh{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:E.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:E.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=d1(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(vn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let d=new Hp({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new po([new _i(d.renderAsString(`
`))],"success")}else return new po([new _i(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new po([new _i(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=d1(n.filePath);return{progressMessage:`Reading file ${$N(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function aut(){return[new Une,new Hne,new Fne,new One,new Qne]}s(aut,"getAllClsTools");var Ld=class{constructor(e){this.ctx=e;this._toolRegistry=new Nne;for(let r of aut())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new Bc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new po([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new Bc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(_w.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(_w.id)?.splice(e.get(_w.id)?.indexOf(r)??0,1);let n=e.get(u1.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(u1.id)?.splice(e.get(u1.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(u1.id)??[],a=e.get(_w.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==_w.id&&l!==u1.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};f();f();var xk=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var uut=require("crypto"),hwe=require("fs"),gwe=Fe(require("path"));var cut="symbolDatabaseLookup",lut="multiLanguageContextProviderDocumentSymbols",bk=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(cut,e);return r||(r=await this.createDBFile(e)),gwe.default.join(this.persistenceManager.directory,lut,r)}async init(){let e=gwe.default.join(this.persistenceManager.directory,lut);await this.createIfNotExists(e)}async dirExists(e){try{return await hwe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await hwe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,uut.randomUUID)()}.db`;return await this.persistenceManager.update(cut,e,r),r}async deleteDBFile(e){}};f();f();var WQ=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};f();f();f();var $ne=Fe(require("path")),dut=require("worker_threads");function fut(t,e){return new dut.Worker($ne.default.resolve($ne.default.extname(__filename)!==".ts"?__dirname:$ne.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(fut,"createWorker");f();var Wne=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var put=Fe(ui());var jne="main.js",Gne=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=fut(jne,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new Wne(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new xY(this.id++),put.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new CY(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new vY(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new EY(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new AY(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new yY(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new gY(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(jne+"'")&&(r=new Error(`Failed to load ${jne}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${jne} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var jQ=Fe(ui());var Vp=new vt(pT),Ik=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){Vp.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,jQ.CancellationToken.None);return}Vp.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new Gne(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{Vp.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await Efr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,jQ.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Vp.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Vp.debug(this.ctx,`indexing workspace ${e}`);let r=Wge.map(d=>`*${d}`);if(r.length===0)return;let i=`**/${Wge.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(Rp),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,jQ.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));Vp.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),Vp.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Vp.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,jQ.CancellationToken.None)}catch(n){Vp.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return uHe(e)}};async function Efr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(Efr,"createIndexableWorkspaceFolder");f();f();var mut=100,xfr=5e3,Vne=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),d=this.get(n,i,r,u);if(d)return this.incrementRefCount(d),l.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(r,n,i,o,c,l);let p=new In.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return d=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(d),l.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>mut)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>xfr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>mut&&(u=r);let d={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:Ar(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var zne=class{constructor(e){this.id=pT;this.selector=Array.from(rY.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Cr),this.resolver=new Awe(this.documentManager,e)}catch(r){throw Vp.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},Awe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new Vne}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(xk).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=wC(o,a);l=l.applyEdits(c);let u=bVe(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return Vp.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(qz(o))return[];throw Vp.error(this.ctx,"Failed to get context",o),o}}};var GQ=class extends HN{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(l1).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(kc).providers.some(r=>r.id===pT)){let r=this.ctx.get(bk);this.fileWatcher=new ywe([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new Ik(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new Cwe(this.ctx),this.ctx.set(WQ,this.fileWatcher),this.ctx.set(Rp,this.fileSearch),this.ctx.set(Ik,this.multiLanguageContextIndexWatcher),this.ctx.get(kc).registerContextProvider(new zne(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Nt).updateExPValuesAndAssignments(),n=pJ(this.ctx,r);return n.includes(pT)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},ywe=class extends WQ{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},Cwe=class extends Rp{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(Bd).getWatchedFiles(n)).map(a=>this.ctx.get(Cr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var vwe=class extends xk{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new GQ(e),e.set(GQ,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function hut(t){let e=t.get(Li),r=new bk(e);t.set(bk,r),t.set(xk,new vwe(t))}s(hut,"setupMultiLanguageContextProviderFeature");f();f();f();var f1=new Map;f1.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});f1.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});f1.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});f1.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});f1.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});f1.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var Ifr=new vt("sdk");function Yne(t,e){f1.has(t.get(pn).getEditorPluginInfo().name)||Ifr.warn(t,...e)}s(Yne,"deprecationWarning");var vht=Fe(uD()),Jp=Fe(iA());f();f();f();var er={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Vu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(gut(e))}};function et(t,e){let r=Vs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=gut(r.Errors(o));return[null,{code:er.InvalidParams,message:a}]}return e(n,i,o)}}s(et,"addMethodHandlerValidation");function gut(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(gut,"createErrorMessage");f();var Ewe=Fe(ui());f();var p1=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Kne="github.copilot.finishDeviceFlow",xwe=class extends p1{constructor(){super(...arguments);this.name=Kne;this.arguments=E.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(ff),o=i.pendingSignIn;if(!o)throw new Ewe.ResponseError(er.InvalidRequest,"No pending sign in");try{await this.ctx.get(_u).open(o.verificationUri)}catch(a){op.warn(this.ctx,"Failed to open",o.verificationUri),op.exception(this.ctx,a,Kne)}try{return await o.status}catch(a){throw new Ewe.ResponseError(er.DeviceFlowFailed,String(a))}finally{i.pendingSignIn=void 0}}},Aut=[xwe];f();f();var Os=class extends kr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var VQ="github.copilot.didAcceptCompletionItem",bwe=class extends p1{constructor(){super(...arguments);this.name=VQ;this.arguments=E.Tuple([E.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(Os).get(n);return o?(j3(this.ctx,o),!0):!1}},yut=[bwe];f();var Tfr="github.copilot.didAcceptNextEditSuggestionItem",Iwe=class extends p1{constructor(){super(...arguments);this.name=Tfr;this.arguments=E.Tuple([E.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get($A).handleAcceptance(n),!0}},Cut=[Iwe];f();var wwe="github.copilot.didAcceptPanelCompletionItem",Twe=class extends p1{constructor(){super(...arguments);this.name=wwe;this.arguments=E.Tuple([E.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(Os).get(i);return a?(bO(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full",acceptedLength:a.displayText.length,acceptedLines:hR(a.displayText).length},a.copilotAnnotations),!0):!1}},vut=[Twe];var wfr=[...Aut,...yut,...Cut,...vut];function Eut(t,e){let r=new Map;for(let n of wfr){let i=new n(t),o=Vs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=ZE(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new Vu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(Eut,"registerCommands");f();var Qh=class extends w2{constructor(r){super(new QD,new Map);this.envSettings=new Map;this.env={...r};let n;this.#e=new Promise(o=>{n=o}),this.markReady=n,["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(o=>{for(let a of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let c=`${a}${Sfr(o.replace(/^Debug/,""))}`;c in this.env&&this.envSettings.set(qt[o],this.env[c])}})}static{s(this,"AgentConfigProvider")}#e;async requireReady(){await this.#e}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function Sfr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(Sfr,"camelCaseToSnakeCaseAllCaps");var _fr="unknown-editor",xut="unknown-editor-plugin",Jne=class extends pn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:_fr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:xut,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function but(t){return t.getEditorPluginInfo().name!==xut}s(but,"hasValidInfo");f();var ex=Fe(iA());var Rfr=new Map([[4,ex.MessageType.Log],[3,ex.MessageType.Info],[2,ex.MessageType.Warning],[1,ex.MessageType.Error]]),Xne=class extends qc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!QX(e)&&n!=="console")return;let o={type:Rfr.get(r),message:WYe(n,...i)},a=e.get(Pr).connection;try{a.sendNotification(new ex.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof ex.ConnectionError)return;throw c}}};f();var Iut=Fe(Zc());var Zne=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(Pr).connection.sendNotification(new Iut.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function Tut(t){t.get(Ad).setCustomReporters(new Zne(t),new Zne(t,!0))}s(Tut,"setupRedirectingTelemetryReporters");f();f();var eie=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Dt(e,"installed.reinstall"):Dt(e,"installed.new")}handleUpgrade(e){Dt(e,"installed.upgrade")}handleUninstall(e){Dt(e,"uninstalled")}};var zQ=Fe(uD());var jN=class extends eie{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(pn).getEditorPluginInfo();return await e.get(Li).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Li).listSettings()).length>0}async markInstalled(e){let r=e.get(pn).getEditorPluginInfo();await e.get(Li).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(pn).getEditorPluginInfo(),n=await e.get(Li).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,zQ.gt)((0,zQ.coerce)(r.version),(0,zQ.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(pn).getEditorPluginInfo();await e.get(Li).delete("versions",r.name),(await e.get(Li).listKeys("versions")).length===0&&await e.get(Li).deleteSetting("versions")}};f();var Swe=Fe(require("path")),tie=Fe(Zc());var kfr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},m1=class t{constructor(e){this.ctx=e;this.#e=new Ua;this.onDidChangeWatchedFiles=this.#e.event}static{s(this,"LspFileWatcher")}#e;static{this.requestType=new tie.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Pr).connection}init(){this.ctx.get(ms).getCapabilities().watchedFiles&&this.connection.onNotification(tie.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(ms).getCapabilities().watchedFiles)return kfr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=Swe.extname(l).toLowerCase();if(!S2.includes(u)){c.push({uri:l});continue}let d=await this.getValidDocument(l);if(d===void 0){a.push({uri:l});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=Swe.extname(o.uri).toLowerCase();if(!S2.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(vn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var Pfr=E.Object({providerName:E.String()});async function Dfr(t,e,r){try{let{providerName:n}=r,i=oT(n);if(i!==0)return[null,{code:er.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${i}`}];let o=new Il(t.get(Li));return await o.removeAllModelConfigs(n),await o.deleteAPIKey(n,i),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Dfr,"handleByokDeleteApiKeyChecked");var wut=et(Pfr,Dfr);f();var Bfr=E.Object({providerName:E.String(),modelId:E.String()});async function Nfr(t,e,r){try{let n=new Il(t.get(Li)),{providerName:i,modelId:o}=r,a=oT(i);return await n.removeModelConfig(i,o),a===1&&await n.deleteAPIKey(i,a,o),[{success:!0,message:`Model ${o} deleted successfully for provider ${i}`},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}s(Nfr,"handleByokDeleteModelChecked");var Sut=et(Bfr,Nfr);f();var Lfr=E.Object({providerName:E.Optional(E.String()),modelId:E.Optional(E.String())});async function Mfr(t,e,r){try{let n=new Il(t.get(Li)),{providerName:i,modelId:o}=r;if(!i){let c=t.get(Li),l=await c.listKeys("byok"),u=[];for(let d of l)if(d.endsWith("-api-key")){let p=await c.read("byok",d);if(p){let h=d.replace("-api-key","").split("-");if(h.length===1)u.push({providerName:h[0],apiKey:p});else if(h.length>=2){let g=h[0],A=h.slice(1).join("-");u.push({providerName:g,modelId:A,apiKey:p})}}}return[{apiKeys:u},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(i,o)||void 0,providerName:i,modelId:o}]},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Mfr,"handleByokListApiKeysChecked");var _ut=et(Lfr,Mfr);f();var Ffr=E.Object({providerName:E.Optional(E.String()),enableFetchUrl:E.Optional(E.Boolean())});async function Ofr(t,e,r){try{let{providerName:n,enableFetchUrl:i}=r;if(i===!0&&n!==ih.OpenAI)return[null,{code:er.InvalidParams,message:"enableFetchUrl cannot be true for provider name "+n}];let o=new Il(t.get(Li)),a=[];if(n)if(i){let l=await t.get(J2).getAllModels(),u=new Map;l.forEach(m=>{let h=`${m.providerName}_${m.modelId}`;u.set(h,m)});let d=await o.getStoredModelConfigs(n),p=[];Object.entries(d).forEach(([m,h])=>{p.push({providerName:n,modelId:m,deploymentUrl:h.deploymentUrl,isRegistered:h.isRegistered,isCustomModel:h.isCustomModel,modelCapabilities:h.modelCapabilities})}),p.forEach(m=>{let h=`${m.providerName}_${m.modelId}`;u.set(h,m)}),a.push(...u.values())}else{let c=await o.getStoredModelConfigs(n);Object.entries(c).forEach(([l,u])=>{a.push({providerName:n,modelId:l,deploymentUrl:u.deploymentUrl,isRegistered:u.isRegistered,isCustomModel:u.isCustomModel,modelCapabilities:u.modelCapabilities})})}else{let c=Object.values(ih);for(let l of c){let u=await o.getStoredModelConfigs(l);Object.entries(u).forEach(([d,p])=>{a.push({providerName:l,modelId:d,deploymentUrl:p.deploymentUrl,isRegistered:p.isRegistered,isCustomModel:p.isCustomModel,modelCapabilities:p.modelCapabilities})})}}return[{models:a},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}s(Ofr,"handleByokListModelsChecked");var Rut=et(Ffr,Ofr);f();var Qfr=E.Object({providerName:E.String(),apiKey:E.String(),modelId:E.Optional(E.String())});async function Ufr(t,e,r){try{let n=new Il(t.get(Li)),{providerName:i,apiKey:o,modelId:a}=r,c=oT(i);if(c===1&&!a)return[null,{code:er.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(i,o,c,a);let l=`API key saved successfully for provider ${i}`;return[{success:!0,message:a?`${l} and model ${a}`:l},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}s(Ufr,"handleByokSaveApiKeyChecked");var kut=et(Qfr,Ufr);f();var qfr=E.Object({providerName:E.String(),modelId:E.String(),isRegistered:E.Boolean(),isCustomModel:E.Boolean(),deploymentUrl:E.Optional(E.String()),apiKey:E.Optional(E.String()),modelCapabilities:E.Optional(E.Object({name:E.String(),maxInputTokens:E.Optional(E.Number()),maxOutputTokens:E.Optional(E.Number()),toolCalling:E.Boolean(),vision:E.Boolean()}))});async function Hfr(t,e,r){try{let{providerName:n,modelId:i,isRegistered:o,isCustomModel:a,deploymentUrl:c,apiKey:l,modelCapabilities:u}=r,d=new Il(t.get(Li)),p=oT(n);if(p===1&&!c)return[null,{code:er.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(c||u){let m={deploymentUrl:c,isRegistered:o,isCustomModel:a,modelCapabilities:u};await d.saveModelConfig(n,i,m,l,p)}else l!==void 0&&await d.storeAPIKey(n,l,p,i);return[{success:!0,message:`Model ${i} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:er.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}s(Hfr,"handleByokSaveModelChecked");var Put=et(qfr,Hfr);f();var $fr=E.Object({uri:E.String({minLength:1})});async function Wfr(t,e,r){let n=await t.get(vn).getOrReadTextDocument(r);return[{status:ea(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Wfr,"handleCheckFileStatusChecked");var Dut=et($fr,Wfr);f();var jfr=E.Object({});function But(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(But,"calculatePercentRemaining");async function Gfr(t,e,r){let n=await t.get(io).getSession();if(n){let i=await Hfe(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:But(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:But(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:er.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:er.InternalError,message:"Not signed in"}]}s(Gfr,"handleCheckQuotaChecked");var Nut=et(jfr,Gfr);f();var Vfr=E.Object({options:E.Optional(E.Object({localChecksOnly:E.Optional(E.Boolean()),forceRefresh:E.Optional(E.Boolean())}))});async function zfr(t,e,r){return[await t.get(io).checkAndUpdateStatus(r.options),null]}s(zfr,"handleCheckStatusChecked");var Lut=et(Vfr,zfr);f();f();f();f();f();f();function Mut(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Mut,"filterUnsupportedReferences");function Fut(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(Fut,"convertToCopilotReferences");var Out=E.Object({type:E.Literal("github.web-search"),id:E.String(),data:E.Object({query:E.String(),type:E.String(),results:E.Optional(E.Array(E.Object({title:E.String(),excerpt:E.String(),url:E.String()})))}),metadata:E.Optional(E.Object({display_name:E.Optional(E.String()),display_icon:E.Optional(E.String())}))});var Rw=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Mut(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};f();var ll=class{static{s(this,"ConversationInspector")}};f();var _we={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ca=class{constructor(e){this.ctx=e;this.progressEntries=new kr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Xr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();var h1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(io).getSession(),o;if(i&&new URL(i.serverUrl).hostname===n)o=i;else{let l=await this.ctx.get($g).getAuthRecord({authAuthority:n});l&&(o={accessToken:l.oauth_token,apiUrl:`https://api.${n}/`})}if(!o&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let a={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};o&&(a.Authorization=`Bearer ${o.accessToken}`);let c=new URL(`repos/${e}/${r}`,o?.apiUrl||`https://api.${n}`).href;return this.ctx.get(ln).fetch(c,{method:"GET",headers:a})}};f();f();f();var Uut=Fe(zp());var g1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Qt([(0,Uut.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],d=new Qt(u.filter(([p,m])=>!GN(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Ep(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||GN(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Qt([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function GN(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(GN,"isEmptyRange");var qut=Fe(require("path"));var Hut=E.Object({uri:E.String(),visibleRange:E.Optional(bc),selection:E.Optional(bc)}),Rwe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e),i=ea(n);if(await this.turnContext.collectFile(Md,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new g1(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Qt([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(GN(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Qt([...l,...u])}else if(n.status==="invalid")return new Qt([`The currently open file \`${qut.basename(e.uri)}\` is content excluded.`])}},Md="current-editor",rie=class{constructor(e){this._resolver=e;this.id=Md;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new Rwe(e)}};f();f();var kl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},kwe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},Pwe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},lu=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new kwe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new Pwe(this._processor(e),this.id)}};var $ut=E.Object({name:E.String(),url:E.String()}),Wut=E.Object({path:E.String(),head:E.Optional(E.Object({name:E.String(),upstream:E.Optional($ut)})),remotes:E.Optional(E.Array($ut))}),Dwe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(A1,"git repository information");let r=[];return r.push([new Qt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Qt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Qt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Qt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Qt([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Qt(r)}},A1="git-metadata",nie=class extends lu{static{s(this,"GitMetadataSkill")}constructor(e){super(A1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new Dwe(r))}};async function jut(t){let e=await t.skillResolver.resolve(Md);if(e){let a=e.uri,c=jI(t.ctx,a);if(Uqe(c))return{repoInfo:c,skillUsed:Md}}let r=await t.skillResolver.resolve(A1);if(!r||!r.remotes||r.remotes.length===0){Xr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=vge(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:A1}}s(jut,"extractRepoInfo");async function Gut(t){let e=[];return await Yfr(t,e),await Kfr(t,e),await Jfr(t,e),e}s(Gut,"skillsToReference");async function Yfr(t,e){let r=await Xfr(t);r&&e.push(r)}s(Yfr,"addRepositoryReference");async function Kfr(t,e){let r=await Zfr(t);r&&e.push(r)}s(Kfr,"addSelectionReference");async function Jfr(t,e){let r=[],n=await t0r(t);n&&r.push(n),r.push(...await r0r(t)),r.length>0&&e.push(...r)}s(Jfr,"addFileReferences");async function Xfr(t){let e=await jut(t);if(e){let r=t.ctx.get(h1),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Xfr,"gitMetadataToReference");async function Zfr(t){let e=await t.skillResolver.resolve(Md);if(e&&e.selection){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ea(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return e0r(e,n.document)}}s(Zfr,"currentEditorToSelectionReference");function e0r(t,e){if(t.selection&&!GN(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(e0r,"extractSelection");async function t0r(t){let e=await t.skillResolver.resolve(Md);if(e){let n=await t.ctx.get(vn).getOrReadTextDocument(e),i=ea(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(t0r,"currentEditorToFileReference");async function r0r(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(vn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=ea(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(r0r,"fileReferenceToPlatformFileReference");f();f();f();f();var edt=Fe(sie()),Mwe=Fe(require("path"));var tdt=500,f0r=Math.floor(.25*tdt),aie=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=Mwe.default.extname(__filename)===".ts"?Mwe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await edt.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:d})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,A=[],y=0;for(;y<g;){let x=y+u>=g,I=x?g:y+u,S=h.slice(y,I),R=m.detokenize(S),B=o.indexOf(R);A.push({id:`${a.toString()}#${y}`,chunk:R,tokenCount:S.length,range:{start:B,end:B+R.length}}),y=x?I:I-d}return A},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:tdt,overlap:f0r}}),n}};var p0r="fixedSize",m0r=new Map([["fixedSize",aie]]);function rdt(t){let e=t==="default"?p0r:t,r=m0r.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(rdt,"getChunkingAlgorithm");f();f();var cie=Fe(Ub()),y1=Fe(require("fs")),ndt=require("os"),Uh=Fe(require("path")),VN=require("process");var Fwe=5e4,h0r=new vt("workspaceChunks"),lie=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Hi(r.uri),i=(0,cie.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Uh.join(g0r(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,cie.SHA256)(e).toString().substring(0,this.pathHashLength),n=Uh.basename(e);return Uh.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await y1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await y1.promises.mkdir(Uh.dirname(n),{recursive:!0}),await y1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){h0r.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await y1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await y1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=Uh.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(Uh.join(this.cacheRootPath,n))}}async getFileHash(e){let r=Ko(e),n="";return r&&(n=await y1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,cie.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=Ko(e);if(!i)return;async function o(p){try{return(await y1.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let r=yl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=Ko(e);if(!r)return[];let n;try{n=await y1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=yl(Uh.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await y1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function g0r(){return VN.env.XDG_CACHE_HOME&&Uh.isAbsolute(VN.env.XDG_CACHE_HOME)?VN.env.XDG_CACHE_HOME+"/github-copilot":(0,ndt.platform)()==="win32"?VN.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":VN.env.HOME+"/.cache/github-copilot"}s(g0r,"getXdgCachePath");var Owe=1e4;var uie=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new Uwe;this.status="notStarted",this.workspaceChunks=new lie(e,r),this.cancellationToken=new Qwe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(Bd).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>Owe&&(this._fileCountExceeded=!0,n=n.slice(0,Owe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ma(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>Fwe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ma(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>Fwe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>Owe&&(this._fileCountExceeded=!0),YGe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Go.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},Qwe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},Uwe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var lc=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=rdt(r),i=new n;return new uie(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=$r.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Dt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=$r.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Dt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};f();f();f();f();f();function fie(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(fie,"toChatModeEnum");var kw=class{constructor(e,r){this.request=e;this.telemetryId=Ar();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}extractContextFilesUri(){let e=[...(this.request.references??[]).filter(r=>r.type==="file").map(r=>r.uri).filter(Boolean),...this.request.activeEditor?.uri?[this.request.activeEditor.uri]:[]];return Array.from(new Set(e))}},die=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=Ar();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();f();f();var idt={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},odt="Alright, This response contains a code citation.";f();var sdt=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var adt=Fe(require("fs")),If=Fe(require("path"));var qwe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],Hwe="test_",JQ={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},XQ=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Hi(e),n=If.extname(r).replace(".",""),i=JQ[n]??{location:"sameFolder",prefix:Hwe,suffix:qwe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let d=r.replace(`.${n}`,u+"."+n);o.push(d)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=Ko(gd(e)),c===void 0)return}else{let u=Ko(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let d=If.join(c,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let l=yl(c);if(await this.fileExists(l))return no(l,o[0])}parseTestFilePath(e){try{return yl(e)}catch(r){an.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Hi(e),n=If.extname(r).replace(".",""),i=JQ[n]??{location:"sameFolder",prefix:Hwe,suffix:qwe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let d=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(d)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=gd(e):c=this.determineImplFolder(e);for(let l of o){let u=no(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=Ko(e);if(r===void 0)return;let n=If.extname(Hi(e)).replace(".",""),i,o=JQ[n]?.location??"sameFolder";o==="sameFolder"?i=If.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,JQ[n]);if(a.length>0)return yl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${If.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return adt.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&Ko(this.baseUri))??"",i=If.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(If.sep)}getRelativeTestFolder(e,r,n,i){let o=If.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=If.extname(Hi(e)).replace(".",""),n=gd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function ZQ(t){let e=Hi(t),r=If.extname(e),n=JQ[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(qwe.some(o=>e.endsWith(o+r))||e.startsWith(Hwe))}s(ZQ,"isTestFile");f();var cdt=["indexed","indexing","not_indexed"],Pw=class{constructor(){this._cache=new kr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Rm(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,i=!1){let o=Wv(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};f();f();f();async function ldt(t,e,r,n){let i=Wi(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(qr).getToken(),l=cz(t,c,"embeddings"),u=c.token,d=0;for(;d<o.length&&!n.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await A0r(t,l,u,e.modelId,p,n);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(ldt,"fetchEmbeddings");async function A0r(t,e,r,n,i,o){let a=Ar(),c=i.map(u=>u.text),l=await Gv(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,lC(t));if(l.status!==200||o.isCancellationRequested){Ma(t,new tx(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(A0r,"sendEmbeddingsRequest");f();f();var pie=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var y0r="cosine",C0r=new Map([["cosine",pie]]);function udt(t){let e=t==="default"?y0r:t,r=C0r.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(udt,"getScoringAlgorithm");f();var Yp=class{constructor(){this.workspaceScoringProviders=new kr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=udt(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var ddt={modelFamily:dz.textEmbedding3Small,scoringType:"default",dimensions:null};async function fdt(t,e,r,n,i,o,a,c=ddt){let l={...ddt,...c},u=E0r(t,e,r,n);Xr.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(ja).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await ldt(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let A=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let y=performance.now(),x=x0r(t,e,m,A,l.scoringType),I=performance.now();a.rerankingTimeMs=Math.floor(I-y);let S=x.slice(0,i);return Xr.debug(t,`EmbeddingsReranker: Returning ${S.length} snippets`),S.map(B=>u.find(M=>M.id===B.id).id)}s(fdt,"rerankSnippets");function E0r(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(E0r,"formatEmbeddingsInput");function x0r(t,e,r,n,i){let o=t.get(Yp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(x0r,"scoreEmbeddings");f();f();f();var Wwe=Fe(sie());var b0r=.75,I0r=1.2,T0r=47,mie=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await hie();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,T0r),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(lc).getChunks(this.workspaceFolder),n=rE(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=rE(n,o=>o.chunk);return await w0r(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(lc).getChunks(this.workspaceFolder),a=new $we(i);for await(let c of o){let l=await S0r({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function w0r(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=Wwe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(w0r,"calculateIDFValues");async function S0r(t,e,r,n){return{score:await Wwe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],A=(a.match(new RegExp(h,"g"))||[]).length,y=g*(A*(d+1)),x=A+d*(1-p+p*c/l);m+=y/x}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:I0r,b:b0r}}),...t}}s(S0r,"calculateBM25Score");var $we=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var R0r="bm25",k0r=new Map([["bm25",mie]]);function pdt(t){let e=t==="default"?R0r:t,r=k0r.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(pdt,"getRankingAlgorithm");var zu=class{constructor(){this.workspaceRankingProviders=new kr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=pdt(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};f();async function mdt(t,e){let r=t.ctx,n=await Go.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(Yu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new Wa(r),l=await Rc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Xr.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";Ma(r,new tx(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(mdt,"parseUserQuery");var hdt=Fe(zp());var tx=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},gie=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(lc),o=i.status(e.turn.workspaceFolder),a=n.get(zu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(lc).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await mdt(e,e.cancelationToken)}catch(g){let A=new tx(g);Ma(i,A,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let d=i.get(zu),p=[],m=performance.now();try{let g=await d.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let A=new tx(g);Ma(i,A,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=dn(e.turn.request.message),c=[];try{c=await fdt(o,i,a,r,5,e.cancelationToken,n)}catch(d){let p=new tx(d);Ma(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(vn);for(let d of c){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),A=m.document.positionAt(h.range.end),y=hs.range(g,A);l.push({uri:m.document.uri,range:y,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...eVe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Xr.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(lc).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return hdt.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var Adt=Fe(gdt()),Cie=Fe(sie()),ydt=Fe(require("os")),Cdt=Fe(zp());var B0r=Math.min(Math.max(Math.ceil(ydt.cpus().length/2),1),10),eU=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new Adt.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await Cie.start({maxWorkers:B0r})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await Cie.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},hie=eU.startWorkerPool.bind(eU);var dQi=E.Object({uri:E.String(),snippet:E.String(),range:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})}),Vwe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(zN);return}let r=[],n=this.turnContext.ctx.get(vn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let d=new g1(u.document,l,l),p=new Qt([c]),h=ZQ(a)?.5:.8;r.push([`Code excerpt from file \`${Ko(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(YN,a,ea(u),l)}}if(r.length>0)return r.unshift([new Qt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Qt(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},zN="collect-project-context",Aie=class extends HN{constructor(r,n=[new gie]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(l1).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await hie(),!r.uri))return;let n=this.ctx.get(lc),i=this.ctx.get(Bd),o=this.ctx.get(zu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(lc);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(zu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(zu).terminateRanking(this.ctx,r),this.ctx.get(Yp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await eU.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let i=this.ctx.get(lc),o=this.ctx.get(zu),a=this.ctx.get(Yp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await hie();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(lc),c=this.ctx.get(zu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(zN,"Collecting relevant project context"),await r.info(Cdt.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of cdt){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await tVe(r,a.providerType,l),c.length===0){await r.steps.error(zN,"No project context found");return}return await r.steps.finish(zN),c}case"indexing":{await r.steps.error(zN,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(zN,"No project context available");return}}}},YN="project-context",yie=class extends lu{static{s(this,"ProjectContextSkill")}constructor(e){super(YN,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new Vwe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var vdt=E.Object({labels:E.Array(E.String())}),zwe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Qt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Qt([`- ${n}`]),.9]),this.turnContext.collectLabel(GA,n)}),new Qt(r)}},GA="project-labels",vie=class{constructor(e){this._resolver=e;this.id=GA;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new zwe(e)}};f();var Eie=Fe(zp());var xdt={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},bdt=Eie.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Idt=Eie.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,N0r=Eie.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,Ywe=`

`,Edt=bdt+Ywe+Idt;function Tdt(t){let e=1;if(t.length===0)return{reply:Edt,vulnerabilities:e};if(t==="0")return{reply:Edt,vulnerabilities:0};if(t==="help")return{reply:N0r,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=bdt+Ywe:i==="c"&&(n+=Idt+Ywe);return{reply:n.trimEnd(),vulnerabilities:e}}s(Tdt,"parseVulnerabilitiesInstructions");var wdt=Fe(zp());var L0r="Oops, your response got filtered. Vote down if you think this shouldn't have happened",M0r="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Kwe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},F0r=new Kwe,Jwe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new uu(M0r,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},O0r=new Jwe,Xwe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new uu("Alright, I'm producing a notification",void 0,[],o)}},Q0r=new Xwe,Zwe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new uu(L0r,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},U0r=new Zwe,eSe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new uu(await _dt(e))}},q0r=new eSe,tSe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[GA,Md]}instructions(e,r){return"Create a function that prints a christmas tree"}},H0r=new tSe,rSe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new uu(dn(e.turn.request.message))}},$0r=new rSe,nSe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(du).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=wdt.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new uu(i)}return new uu("No prompt available")}},W0r=new nSe,iSe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new uu(await Rdt(e,n,i))}},j0r=new iSe,oSe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=Tdt(r);for(let o=0;o<i;o++)e.turn.annotations.push(xdt);return new uu(n,void 0,e.turn.annotations)}},G0r=new oSe,sSe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(idt),new uu(odt,void 0,e.turn.annotations)}},V0r=new sSe,aSe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new uu(sdt)}},z0r=new aSe,cSe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Y0r=new cSe,lSe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[YN]}},K0r=new lSe,uSe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new uu("Alright, I'm producing a notification",void 0,[],[],[],e)}},J0r=new uSe;function Sdt(){return[F0r,O0r,Q0r,U0r,H0r,q0r,$0r,W0r,j0r,G0r,V0r,J0r,z0r,Y0r,K0r]}s(Sdt,"getDebugTemplates");f();f();function Bw(t,e){if(t.length==0)return new Qt([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Qt(r)}s(Bw,"weighElidableList");var kdt=E.Object({uri:E.String(),problems:E.Array(E.Object({message:E.String(),range:bc}))}),dSe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Nw,e.uri,ea(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(Nw,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Nw,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Qt([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),Bw(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Qt([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Qt([["```"+c,1],[Ep(a),.8],["```",1]]))}return new Qt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Qt([n])}},Nw="problems-in-active-document",xie=class extends lu{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Nw,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new dSe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var bie=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new XQ(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=ZQ(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!ZQ(e))return;let n=this.turnContext.ctx.get(Cr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new XQ(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${X0r} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${Z0r} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Qt([[`${epr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Qt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(vn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(VA,e,ea(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Ep(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Ni).stat(e),!0}catch{return!1}}}},X0r="Code excerpt from the implementation source file",Z0r="Code excerpt from the test file",epr="Code excerpt from an example test file";var Pdt=E.Object({currentFileUri:E.String(),sourceFileUri:E.Optional(E.String()),testFileUri:E.Optional(E.String())}),pSe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=new bie(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(VA,e.testFileUri,ea(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(VA,e.sourceFileUri,ea(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(VA,e.sourceFileUri,ea(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(VA,e.testFileUri,ea(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},VA="test-context",Iie=class extends lu{static{s(this,"TestContextSkill")}constructor(e){super(VA,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new pSe(r))}};f();var Ddt=Fe(zp());var Bdt=E.Object({failures:E.Array(E.Object({testName:E.String(),testSuite:E.Optional(E.String()),testFileUri:E.String(),failureReason:E.Optional(E.String()),testLocation:bc}))}),mSe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(Sk,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Qt(["The latest test run produced the following failures and errors:"]);return new Qt([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(Sk,o,ea(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),d=this.appendCode(u,l,c.document);n.push([d,1])}}if(n.length>0)return new Qt(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Qt([Ddt.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Qt(n)}appendCode(e,r,n){let i=[new Qt([`
The code of file \`${r}\` is:
`]),.6],o=[new Qt([["```"+n.detectedLanguageId,1],[Ep(n.getText()),.9],["```",1]]),.7];return new Qt([[e,1],i,o])}},Sk="test-failures",Tie=class extends lu{static{s(this,"TestFailuresSkill")}constructor(e){super(Sk,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new mSe(r))}};var qh=Fe(zp());var uu=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},_k=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},tpr=new _k("tests","Generate unit tests","Generate Tests",qh.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[VA,Sk],["chat-panel","agent-panel","editor"]),rpr=new _k("simplify","Simplify the code","Simplify This",qh.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","agent-panel","inline"],qh.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),npr=new _k("fix","Fix problems and compile errors","Fix This",qh.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Nw],["editor","chat-panel","agent-panel","inline"],qh.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),ipr=new _k("explain","Explain how the code works","Explain This",qh.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","agent-panel","inline"],qh.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),opr=new _k("doc","Document the current selection of code","Generate Docs",qh.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","agent-panel","inline"],qh.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),hSe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel","agent-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=ySe(e.conversation),n=qh.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://aka.ms/copilot-jetbrains-feedback) to share your feedback.
            `;return r?new uu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new uu(n)}},spr=new hSe,gSe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel","agent-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=ASe(e.ctx).filter(i=>i!=this),n=qh.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new uu(n)}},apr=new gSe;function Rk(){return[tpr,rpr,npr,ipr,opr,spr,apr,...Sdt()]}s(Rk,"getPromptTemplates");function ASe(t){let e=Rk();return!vM(t)&&!Tg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(ASe,"getUserFacingPromptTemplates");var CSe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Yi=class{constructor(e){this.ctx=e;this.conversations=new kr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new die([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(kl).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new CSe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(d=>({skillId:d}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&dn(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(dn(r.request.message),"@");(await v1(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(dn(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(dn(r.request.message),"/"),o=Rk().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(kl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function Ydt(t){return typeof t>"u"||t===null}s(Ydt,"isNothing");function cpr(t){return typeof t=="object"&&t!==null}s(cpr,"isObject");function lpr(t){return Array.isArray(t)?t:Ydt(t)?[]:[t]}s(lpr,"toArray");function upr(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(upr,"extend");function dpr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(dpr,"repeat");function fpr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(fpr,"isNegativeZero");var ppr=Ydt,mpr=cpr,hpr=lpr,gpr=dpr,Apr=fpr,ypr=upr,Pl={isNothing:ppr,isObject:mpr,toArray:hpr,repeat:gpr,isNegativeZero:Apr,extend:ypr};function Kdt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(Kdt,"formatError");function rU(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Kdt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(rU,"YAMLException$1");rU.prototype=Object.create(Error.prototype);rU.prototype.constructor=rU;rU.prototype.toString=s(function(e){return this.name+": "+Kdt(this,e)},"toString");var B0=rU;function vSe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(vSe,"getLine");function ESe(t,e){return Pl.repeat(" ",e-t.length)+t}s(ESe,"padStart");function Cpr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=vSe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=Pl.repeat(" ",e.indent)+ESe((t.line-l+1).toString(),d)+" | "+u.str+`
`+c;for(u=vSe(t.buffer,n[a],i[a],t.position,p),c+=Pl.repeat(" ",e.indent)+ESe((t.line+1).toString(),d)+" | "+u.str+`
`,c+=Pl.repeat("-",e.indent+d+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=vSe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=Pl.repeat(" ",e.indent)+ESe((t.line+l+1).toString(),d)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(Cpr,"makeSnippet");var vpr=Cpr,Epr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],xpr=["scalar","sequence","mapping"];function bpr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(bpr,"compileStyleAliases");function Ipr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Epr.indexOf(r)===-1)throw new B0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=bpr(e.styleAliases||null),xpr.indexOf(this.kind)===-1)throw new B0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(Ipr,"Type$1");var Fd=Ipr;function Ndt(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(Ndt,"compileList");function Tpr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(Tpr,"compileMap");function bSe(t){return this.extend(t)}s(bSe,"Schema$1");bSe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof Fd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new B0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Fd))throw new B0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new B0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new B0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Fd))throw new B0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(bSe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Ndt(i,"implicit"),i.compiledExplicit=Ndt(i,"explicit"),i.compiledTypeMap=Tpr(i.compiledImplicit,i.compiledExplicit),i},"extend");var wpr=bSe,Spr=new Fd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),_pr=new Fd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),Rpr=new Fd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),kpr=new wpr({explicit:[Spr,_pr,Rpr]});function Ppr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(Ppr,"resolveYamlNull");function Dpr(){return null}s(Dpr,"constructYamlNull");function Bpr(t){return t===null}s(Bpr,"isNull");var Npr=new Fd("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ppr,construct:Dpr,predicate:Bpr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function Lpr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(Lpr,"resolveYamlBoolean");function Mpr(t){return t==="true"||t==="True"||t==="TRUE"}s(Mpr,"constructYamlBoolean");function Fpr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(Fpr,"isBoolean");var Opr=new Fd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Lpr,construct:Mpr,predicate:Fpr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Qpr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(Qpr,"isHexCode");function Upr(t){return 48<=t&&t<=55}s(Upr,"isOctCode");function qpr(t){return 48<=t&&t<=57}s(qpr,"isDecCode");function Hpr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Qpr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Upr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!qpr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(Hpr,"resolveYamlInteger");function $pr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s($pr,"constructYamlInteger");function Wpr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Pl.isNegativeZero(t)}s(Wpr,"isInteger");var jpr=new Fd("tag:yaml.org,2002:int",{kind:"scalar",resolve:Hpr,construct:$pr,predicate:Wpr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Gpr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Vpr(t){return!(t===null||!Gpr.test(t)||t[t.length-1]==="_")}s(Vpr,"resolveYamlFloat");function zpr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(zpr,"constructYamlFloat");var Ypr=/^[-+]?[0-9]+e/;function Kpr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pl.isNegativeZero(t))return"-0.0";return r=t.toString(10),Ypr.test(r)?r.replace("e",".e"):r}s(Kpr,"representYamlFloat");function Jpr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Pl.isNegativeZero(t))}s(Jpr,"isFloat");var Xpr=new Fd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Vpr,construct:zpr,predicate:Jpr,represent:Kpr,defaultStyle:"lowercase"}),Zpr=kpr.extend({implicit:[Npr,Opr,jpr,Xpr]}),emr=Zpr,Jdt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Xdt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function tmr(t){return t===null?!1:Jdt.exec(t)!==null||Xdt.exec(t)!==null}s(tmr,"resolveYamlTimestamp");function rmr(t){var e,r,n,i,o,a,c,l=0,u=null,d,p,m;if(e=Jdt.exec(t),e===null&&(e=Xdt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(rmr,"constructYamlTimestamp");function nmr(t){return t.toISOString()}s(nmr,"representYamlTimestamp");var imr=new Fd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:tmr,construct:rmr,instanceOf:Date,represent:nmr});function omr(t){return t==="<<"||t===null}s(omr,"resolveYamlMerge");var smr=new Fd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:omr}),_Se=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function amr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=_Se;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(amr,"resolveYamlBinary");function cmr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=_Se,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(cmr,"constructYamlBinary");function lmr(t){var e="",r=0,n,i,o=t.length,a=_Se;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(lmr,"representYamlBinary");function umr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(umr,"isBinary");var dmr=new Fd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:amr,construct:cmr,predicate:umr,represent:lmr}),fmr=Object.prototype.hasOwnProperty,pmr=Object.prototype.toString;function mmr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,pmr.call(i)!=="[object Object]")return!1;for(o in i)if(fmr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(mmr,"resolveYamlOmap");function hmr(t){return t!==null?t:[]}s(hmr,"constructYamlOmap");var gmr=new Fd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:mmr,construct:hmr}),Amr=Object.prototype.toString;function ymr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],Amr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(ymr,"resolveYamlPairs");function Cmr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(Cmr,"constructYamlPairs");var vmr=new Fd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ymr,construct:Cmr}),Emr=Object.prototype.hasOwnProperty;function xmr(t){if(t===null)return!0;var e,r=t;for(e in r)if(Emr.call(r,e)&&r[e]!==null)return!1;return!0}s(xmr,"resolveYamlSet");function bmr(t){return t!==null?t:{}}s(bmr,"constructYamlSet");var Imr=new Fd("tag:yaml.org,2002:set",{kind:"mapping",resolve:xmr,construct:bmr}),Zdt=emr.extend({implicit:[imr,smr],explicit:[dmr,gmr,vmr,Imr]}),Mw=Object.prototype.hasOwnProperty,wie=1,eft=2,tft=3,Sie=4,xSe=1,Tmr=2,Ldt=3,wmr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Smr=/[\x85\u2028\u2029]/,_mr=/[,\[\]\{\}]/,rft=/^(?:!|!!|![a-z\-]+!)$/i,nft=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Mdt(t){return Object.prototype.toString.call(t)}s(Mdt,"_class");function E1(t){return t===10||t===13}s(E1,"is_EOL");function Pk(t){return t===9||t===32}s(Pk,"is_WHITE_SPACE");function N0(t){return t===9||t===32||t===10||t===13}s(N0,"is_WS_OR_EOL");function JN(t){return t===44||t===91||t===93||t===123||t===125}s(JN,"is_FLOW_INDICATOR");function Rmr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(Rmr,"fromHexCode");function kmr(t){return t===120?2:t===117?4:t===85?8:0}s(kmr,"escapedHexLen");function Pmr(t){return 48<=t&&t<=57?t-48:-1}s(Pmr,"fromDecimalCode");function Fdt(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(Fdt,"simpleEscapeSequence");function Dmr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(Dmr,"charFromCodepoint");var ift=new Array(256),oft=new Array(256);for(kk=0;kk<256;kk++)ift[kk]=Fdt(kk)?1:0,oft[kk]=Fdt(kk);var kk;function Bmr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Zdt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(Bmr,"State$1");function sft(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=vpr(r),new B0(e,r)}s(sft,"generateError");function fn(t,e){throw sft(t,e)}s(fn,"throwError");function _ie(t,e){t.onWarning&&t.onWarning.call(null,sft(t,e))}s(_ie,"throwWarning");var Odt={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&fn(e,"duplication of %YAML directive"),n.length!==1&&fn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&fn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&fn(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&_ie(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&fn(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],rft.test(i)||fn(e,"ill-formed tag handle (first argument) of the TAG directive"),Mw.call(e.tagMap,i)&&fn(e,'there is a previously declared suffix for "'+i+'" tag handle'),nft.test(o)||fn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{fn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Lw(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||fn(t,"expected valid JSON character");else wmr.test(c)&&fn(t,"the stream contains non-printable characters");t.result+=c}}s(Lw,"captureSegment");function Qdt(t,e,r,n){var i,o,a,c;for(Pl.isObject(r)||fn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],Mw.call(e,o)||(e[o]=r[o],n[o]=!0)}s(Qdt,"mergeMappings");function XN(t,e,r,n,i,o,a,c,l){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&fn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Mdt(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Mdt(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)Qdt(t,e,o[u],r);else Qdt(t,e,o,r);else!t.json&&!Mw.call(r,i)&&Mw.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,fn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(XN,"storeMappingPair");function RSe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):fn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(RSe,"readLineBreak");function ul(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Pk(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(E1(i))for(RSe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&_ie(t,"deficient indentation"),n}s(ul,"skipSeparationSpace");function Pie(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||N0(r)))}s(Pie,"testDocumentSeparator");function kSe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pl.repeat(`
`,e-1))}s(kSe,"writeFoldedLines");function Nmr(t,e,r){var n,i,o,a,c,l,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),N0(h)||JN(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),N0(i)||r&&JN(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),N0(i)||r&&JN(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),N0(n))break}else{if(t.position===t.lineStart&&Pie(t)||r&&JN(h))break;if(E1(h))if(l=t.line,u=t.lineStart,d=t.lineIndent,ul(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=d;break}}c&&(Lw(t,o,a,!1),kSe(t,t.line-l),o=a=t.position,c=!1),Pk(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Lw(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(Nmr,"readPlainScalar");function Lmr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Lw(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else E1(r)?(Lw(t,n,i,!0),kSe(t,ul(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Pie(t)?fn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);fn(t,"unexpected end of the stream within a single quoted scalar")}s(Lmr,"readSingleQuotedScalar");function Mmr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return Lw(t,r,t.position,!0),t.position++,!0;if(c===92){if(Lw(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),E1(c))ul(t,!1,e);else if(c<256&&ift[c])t.result+=oft[c],t.position++;else if((a=kmr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=Rmr(c))>=0?o=(o<<4)+a:fn(t,"expected hexadecimal character");t.result+=Dmr(o),t.position++}else fn(t,"unknown escape sequence");r=n=t.position}else E1(c)?(Lw(t,r,n,!0),kSe(t,ul(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Pie(t)?fn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}fn(t,"unexpected end of the stream within a double quoted scalar")}s(Mmr,"readDoubleQuotedScalar");function Fmr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,d,p,m,h,g=Object.create(null),A,y,x,I;if(I=t.input.charCodeAt(t.position),I===91)d=93,h=!1,c=[];else if(I===123)d=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),I=t.input.charCodeAt(++t.position);I!==0;){if(ul(t,!0,e),I=t.input.charCodeAt(t.position),I===d)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?I===44&&fn(t,"expected the node content, but found ','"):fn(t,"missed comma between flow collection entries"),y=A=x=null,p=m=!1,I===63&&(u=t.input.charCodeAt(t.position+1),N0(u)&&(p=m=!0,t.position++,ul(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ZN(t,e,wie,!1,!0),y=t.tag,A=t.result,ul(t,!0,e),I=t.input.charCodeAt(t.position),(m||t.line===n)&&I===58&&(p=!0,I=t.input.charCodeAt(++t.position),ul(t,!0,e),ZN(t,e,wie,!1,!0),x=t.result),h?XN(t,c,g,y,A,x,n,i,o):p?c.push(XN(t,null,g,y,A,x,n,i,o)):c.push(A),ul(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(r=!0,I=t.input.charCodeAt(++t.position)):r=!1}fn(t,"unexpected end of the stream within a flow collection")}s(Fmr,"readFlowCollection");function Omr(t,e){var r,n,i=xSe,o=!1,a=!1,c=e,l=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)xSe===i?i=p===43?Ldt:Tmr:fn(t,"repeat of a chomping mode identifier");else if((d=Pmr(p))>=0)d===0?fn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?fn(t,"repeat of an indentation width identifier"):(c=e+d-1,a=!0);else break;if(Pk(p)){do p=t.input.charCodeAt(++t.position);while(Pk(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!E1(p)&&p!==0)}for(;p!==0;){for(RSe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),E1(p)){l++;continue}if(t.lineIndent<c){i===Ldt?t.result+=Pl.repeat(`
`,o?1+l:l):i===xSe&&o&&(t.result+=`
`);break}for(n?Pk(p)?(u=!0,t.result+=Pl.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=Pl.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Pl.repeat(`
`,l):t.result+=Pl.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!E1(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Lw(t,r,t.position,!1)}return!0}s(Omr,"readBlockScalar");function Udt(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,fn(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!N0(a))));){if(c=!0,t.position++,ul(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,ZN(t,e,tft,!1,!0),o.push(t.result),ul(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)fn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(Udt,"readBlockSequence");function Qmr(t,e,r){var n,i,o,a,c,l,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,A=null,y=!1,x=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),I=t.input.charCodeAt(t.position);I!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,fn(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(I===63||I===58)&&N0(n))I===63?(y&&(XN(t,p,m,h,g,null,a,c,l),h=g=A=null),x=!0,y=!0,i=!0):y?(y=!1,i=!0):fn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=n;else{if(a=t.line,c=t.lineStart,l=t.position,!ZN(t,r,eft,!1,!0))break;if(t.line===o){for(I=t.input.charCodeAt(t.position);Pk(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),N0(I)||fn(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(XN(t,p,m,h,g,null,a,c,l),h=g=A=null),x=!0,y=!1,i=!1,h=t.tag,g=t.result;else if(x)fn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(x)fn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,l=t.position),ZN(t,e,Sie,!0,i)&&(y?g=t.result:A=t.result),y||(XN(t,p,m,h,g,A,a,c,l),h=g=A=null),ul(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&I!==0)fn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&XN(t,p,m,h,g,null,a,c,l),x&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),x}s(Qmr,"readBlockMapping");function Umr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&fn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):fn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!N0(a);)a===33&&(n?fn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),rft.test(i)||fn(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),_mr.test(o)&&fn(t,"tag suffix cannot contain flow indicator characters")}o&&!nft.test(o)&&fn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{fn(t,"tag name is malformed: "+o)}return r?t.tag=o:Mw.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:fn(t,'undeclared tag handle "'+i+'"'),!0}s(Umr,"readTagProperty");function qmr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&fn(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!N0(r)&&!JN(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&fn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(qmr,"readAnchorProperty");function Hmr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!N0(n)&&!JN(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&fn(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Mw.call(t.anchorMap,r)||fn(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ul(t,!0,-1),!0}s(Hmr,"readAlias");function ZN(t,e,r,n,i){var o,a,c,l=1,u=!1,d=!1,p,m,h,g,A,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=Sie===r||tft===r,n&&ul(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Umr(t)||qmr(t);)ul(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||Sie===r)&&(wie===r||eft===r?A=e:A=e+1,y=t.position-t.lineStart,l===1?c&&(Udt(t,y)||Qmr(t,y,A))||Fmr(t,A)?d=!0:(a&&Omr(t,A)||Lmr(t,A)||Mmr(t,A)?d=!0:Hmr(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&fn(t,"alias node should not have any properties")):Nmr(t,A,wie===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(d=c&&Udt(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&fn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Mw.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||fn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&fn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):fn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(ZN,"composeNode");function $mr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ul(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!N0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&fn(t,"directive name must not be less than one character in length");a!==0;){for(;Pk(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!E1(a));break}if(E1(a))break;for(r=t.position;a!==0&&!N0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&RSe(t),Mw.call(Odt,n)?Odt[n](t,n,i):_ie(t,'unknown document directive "'+n+'"')}if(ul(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ul(t,!0,-1)):o&&fn(t,"directives end mark is expected"),ZN(t,t.lineIndent-1,Sie,!1,!0),ul(t,!0,-1),t.checkLineBreaks&&Smr.test(t.input.slice(e,t.position))&&_ie(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Pie(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ul(t,!0,-1));return}if(t.position<t.length-1)fn(t,"end of the stream or a document separator is expected");else return}s($mr,"readDocument");function aft(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Bmr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,fn(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)$mr(r);return r.documents}s(aft,"loadDocuments");function Wmr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=aft(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(Wmr,"loadAll$1");function jmr(t,e){var r=aft(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new B0("expected a single document in the stream, but found more")}}s(jmr,"load$1");var Gmr=Wmr,Vmr=jmr,cft={loadAll:Gmr,load:Vmr},lft=Object.prototype.toString,uft=Object.prototype.hasOwnProperty,PSe=65279,zmr=9,nU=10,Ymr=13,Kmr=32,Jmr=33,Xmr=34,ISe=35,Zmr=37,ehr=38,thr=39,rhr=42,dft=44,nhr=45,Rie=58,ihr=61,ohr=62,shr=63,ahr=64,fft=91,pft=93,chr=96,mft=123,lhr=124,hft=125,Od={};Od[0]="\\0";Od[7]="\\a";Od[8]="\\b";Od[9]="\\t";Od[10]="\\n";Od[11]="\\v";Od[12]="\\f";Od[13]="\\r";Od[27]="\\e";Od[34]='\\"';Od[92]="\\\\";Od[133]="\\N";Od[160]="\\_";Od[8232]="\\L";Od[8233]="\\P";var uhr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],dhr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function fhr(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&uft.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(fhr,"compileStyleMap");function phr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new B0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Pl.repeat("0",n-e.length)+e}s(phr,"encodeHex");var mhr=1,iU=2;function hhr(t){this.schema=t.schema||Zdt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Pl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=fhr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?iU:mhr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(hhr,"State");function qdt(t,e){for(var r=Pl.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(qdt,"indentString");function TSe(t,e){return`
`+Pl.repeat(" ",t.indent*e)}s(TSe,"generateNextLine");function ghr(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(ghr,"testImplicitResolving");function kie(t){return t===Kmr||t===zmr}s(kie,"isWhitespace");function oU(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==PSe||65536<=t&&t<=1114111}s(oU,"isPrintable");function Hdt(t){return oU(t)&&t!==PSe&&t!==Ymr&&t!==nU}s(Hdt,"isNsCharOrWhitespace");function $dt(t,e,r){var n=Hdt(t),i=n&&!kie(t);return(r?n:n&&t!==dft&&t!==fft&&t!==pft&&t!==mft&&t!==hft)&&t!==ISe&&!(e===Rie&&!i)||Hdt(e)&&!kie(e)&&t===ISe||e===Rie&&i}s($dt,"isPlainSafe");function Ahr(t){return oU(t)&&t!==PSe&&!kie(t)&&t!==nhr&&t!==shr&&t!==Rie&&t!==dft&&t!==fft&&t!==pft&&t!==mft&&t!==hft&&t!==ISe&&t!==ehr&&t!==rhr&&t!==Jmr&&t!==lhr&&t!==ihr&&t!==ohr&&t!==thr&&t!==Xmr&&t!==Zmr&&t!==ahr&&t!==chr}s(Ahr,"isPlainSafeFirst");function yhr(t){return!kie(t)&&t!==Rie}s(yhr,"isPlainSafeLast");function tU(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(tU,"codePointAt");function gft(t){var e=/^\n* /;return e.test(t)}s(gft,"needIndentIndicator");var Aft=1,wSe=2,yft=3,Cft=4,KN=5;function Chr(t,e,r,n,i,o,a,c){var l,u=0,d=null,p=!1,m=!1,h=n!==-1,g=-1,A=Ahr(tU(t,0))&&yhr(tU(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=tU(t,l),!oU(u))return KN;A=A&&$dt(u,d,c),d=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=tU(t,l),u===nU)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!oU(u))return KN;A=A&&$dt(u,d,c),d=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?A&&!a&&!i(t)?Aft:o===iU?KN:wSe:r>9&&gft(t)?KN:a?o===iU?KN:wSe:m?Cft:yft}s(Chr,"chooseScalarStyle");function vhr(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===iU?'""':"''";if(!t.noCompatMode&&(uhr.indexOf(e)!==-1||dhr.test(e)))return t.quotingType===iU?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return ghr(t,u)}switch(s(l,"testAmbiguity"),Chr(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case Aft:return e;case wSe:return"'"+e.replace(/'/g,"''")+"'";case yft:return"|"+Wdt(e,t.indent)+jdt(qdt(e,o));case Cft:return">"+Wdt(e,t.indent)+jdt(qdt(Ehr(e,a),o));case KN:return'"'+xhr(e)+'"';default:throw new B0("impossible error: invalid scalar style")}}()}s(vhr,"writeScalar");function Wdt(t,e){var r=gft(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(Wdt,"blockHeader");function jdt(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(jdt,"dropEndingNewline");function Ehr(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Gdt(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+Gdt(l,e),i=o}return n}s(Ehr,"foldString");function Gdt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(Gdt,"foldLine");function xhr(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=tU(t,i),n=Od[r],!n&&oU(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||phr(r);return e}s(xhr,"escapeString");function bhr(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(nx(t,e,c,!1,!1)||typeof c>"u"&&nx(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(bhr,"writeFlowSequence");function Vdt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(nx(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&nx(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=TSe(t,e)),t.dump&&nU===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(Vdt,"writeBlockSequence");function Ihr(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,d;for(a=0,c=o.length;a<c;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),nx(t,e,l,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),nx(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}s(Ihr,"writeFlowMapping");function Thr(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new B0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=TSe(t,e)),u=a[c],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),nx(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&nU===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=TSe(t,e)),nx(t,e+1,d,!0,p)&&(t.dump&&nU===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(Thr,"writeBlockMapping");function zdt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,lft.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(uft.call(c.represent,l))n=c.represent[l](e,l);else throw new B0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(zdt,"detectType");function nx(t,e,r,n,i,o,a){t.tag=null,t.dump=r,zdt(t,r,!1)||zdt(t,r,!0);var c=lft.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=c==="[object Object]"||c==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(Thr(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(Ihr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Vdt(t,e-1,t.dump,i):Vdt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(bhr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&vhr(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new B0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(nx,"writeNode");function whr(t,e){var r=[],n=[],i,o;for(SSe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(whr,"getDuplicateReferences");function SSe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)SSe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)SSe(t[n[i]],e,r)}s(SSe,"inspectNode");function Shr(t,e){e=e||{};var r=new hhr(e);r.noRefs||whr(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),nx(r,0,n,!0,!0)?r.dump+`
`:""}s(Shr,"dump$1");var _hr=Shr,Rhr={dump:_hr};function DSe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(DSe,"renamed");var iqi=cft.load,oqi=cft.loadAll,BSe=Rhr.dump;var sqi=DSe("safeLoad","load"),aqi=DSe("safeLoadAll","loadAll"),cqi=DSe("safeDump","dump");var Dk=Fe(zp());var NSe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},du=class{constructor(){this.dump=new kr(25);this.promptsDump=new kr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new NSe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function vft(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(vft,"filterConversationTurns");function ySe(t){return vft(t).getLastTurn()?.id}s(ySe,"getLastTurnId");async function _dt(t){let e=vft(t.conversation),r=ySe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(du).getDump(r),o=Dhr(i,e.turns);an.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await Bhr(i,t.ctx);return Dk.default`
        ${Phr(t.conversation,r)}
        ${khr(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(_dt,"getConversationDump");function khr(t){let e=t.get(pn);return Dk.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(khr,"getEditorInfoDumpMessage");function Phr(t,e){return Dk.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(Phr,"getInfoDumpMessage");async function Rdt(t,e,r){let n=t.ctx.get(kl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Yi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&dn(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${dn(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=Dk.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=Dk.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${BSe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=Dk.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Rdt,"getSkillsDump");function Dhr(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:dn(n.request.message)};return n.response&&(o.response=dn(n.response.message)),o})};return BSe(r)}s(Dhr,"toSimulationFormat");async function Bhr(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(vn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();an.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(Bhr,"fileDump");f();function LSe(t,e){let r=Wi(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(dn(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(LSe,"countMessagesTokens");f();function Eft(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,d,c,a].filter(p=>p&&p!="").join(`
`)}s(Eft,"chatBasePrompt");f();f();f();f();f();function xft(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Ep(i.join(`
`)),1]),i=[],r.push([new Qt([o]),1])):r.push([new Qt([o]),1]),n=!n):n?i.push(o):r.push([new Qt([o]),.8]);return n&&(r.push([Ep(i.join(`
`)),1]),r.push([new Qt(["```"]),1])),new Qt(r)}s(xft,"fromMessage");function e8(t){let e=MSe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=bft(i.request,n+1),a=i.response&&i.response?.type!=="meta"?bft(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(xft(c))}return r.length>0?new Qt([[new Qt(["Consider the following conversation history:"]),1],[Bw(r,"inverseLinear"),1]]):null}s(e8,"fromHistory");var Nhr=5;function MSe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&dn(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,Nhr).reverse()}s(MSe,"filterTurns");function bft(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=dn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${dn(t.message)}`}s(bft,"formatTurnMessage");f();f();f();var Lhr=4,FSe={skillIds:[]},Die=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Go.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(Yu).toPrompt(e,l),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,d);return m.type!=="success"&&(Xr.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,d)),await e.ctx.get(ll).inspectFetchResult(m),this.handleResult(m,d,dn(a),o,u.toolConfig)}else return FSe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),FSe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,Lhr);else return Xr.error(this.ctx,"Missing tool call in meta prompt response"),FSe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Dt(this.ctx,`${Jl(i)}.metaPrompt`,l,0),Dt(this.ctx,`${Jl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Dt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var Bie=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return me(e,r,"org.springframework.boot","Spring Boot"),me(e,r,"jakarta.jakartaee-api","Jakarta EE"),me(e,r,"javax:javaee-api","Java EE"),me(e,r,"org.apache.struts:struts2-core","Apache Struts"),me(e,r,"org.hibernate:hibernate-core","Hibernate"),me(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),me(e,r,"javax.faces:jsf-api","JSF"),me(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return me(e,r,"com.google.guava","Google Guava"),me(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),me(e,r,"org.apache.commons:commons-io","Apache Commons IO"),me(e,r,"joda-time:joda-time","Joda-Time"),me(e,r,"com.google.code.gson:gson","Google Gson"),me(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),me(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),me(e,r,"org.apache.commons:commons-net","Apache Commons Net"),me(e,r,"org.apache.poi:poi","Apache POI"),me(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),me(e,r,"junit:junit","JUnit"),me(e,r,"org.testng:testng","TestNG"),me(e,r,"org.spockframework:spock-core","Spock"),me(e,r,"io.cucumber:cucumber-java","Cucumber"),me(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return me(e,r,"org.mockito","Mockito"),me(e,r,"org.assertj","AssertJ"),me(e,r,"org.hamcrest","Hamcrest"),me(e,r,"org.powermock","PowerMock"),me(e,r,"org.jmock","JMock"),me(e,r,"org.easymock","EasyMock"),me(e,r,"org.jmockit:jmockit","JMockit"),me(e,r,"com.github.tomakehurst:wiremock","WireMock"),me(e,r,"org.dbunit:dbunit","DBUnit"),me(e,r,"com.icegreen:greenmail","GreenMail"),me(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),me(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),me(e,r,"io.rest-assured:rest-assured","Rest-Assured"),me(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),me(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},Nie=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"@types/node","Node.js"),me(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||me(e,r,"react","React"),me(e,r,"angular","Angular"),me(e,r,"vue","Vue.js"),me(e,r,"ember","Ember.js"),me(e,r,"backbone","Backbone.js"),me(e,r,"meteor","Meteor"),me(e,r,"polymer","Polymer"),me(e,r,"aurelia","Aurelia"),me(e,r,"knockout","Knockout.js"),me(e,r,"dojo","Dojo Toolkit"),me(e,r,"mithril","Mithril.js"),me(e,r,"marionette","Marionette.js"),me(e,r,"marko","Marko.js"),me(e,r,"svelte","Svelte"),me(e,r,"hyperapp","Hyperapp"),me(e,r,"inferno","Inferno.js"),me(e,r,"preact","Preact"),me(e,r,"riot","Riot.js"),me(e,r,"moon","Moon.js"),me(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return me(e,r,"lodash","Lodash"),me(e,r,"moment","Moment.js"),me(e,r,"axios","Axios"),me(e,r,"redux","Redux"),me(e,r,"recoil","Recoil"),me(e,r,"jquery","jQuery"),me(e,r,"d3","D3.js"),me(e,r,"underscore","Underscore.js"),me(e,r,"ramda","Ramda"),me(e,r,"immutable","Immutable.js"),me(e,r,"rxjs","RxJS"),me(e,r,"three","Three.js"),me(e,r,"socket.io","Socket.IO"),me(e,r,"express","Express.js"),me(e,r,"next","Next.js"),me(e,r,"puppeteer","Puppeteer"),me(e,r,"cheerio","Cheerio"),me(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"jest","Jest"),me(e,r,"mocha","Mocha"),me(e,r,"jasmine","Jasmine"),me(e,r,"ava","AVA"),me(e,r,"qunit","QUnit"),me(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return me(e,r,"chai","Chai"),me(e,r,"sinon","Sinon"),me(e,r,"enzyme","Enzyme"),me(e,r,"protractor","Protractor"),me(e,r,"supertest","Supertest"),me(e,r,"nock","Nock"),me(e,r,"cypress","Cypress"),me(e,r,"@testing-library/react","React Testing Library"),r}},Lie=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"github.com/gorilla/mux","Gorilla Mux"),me(e,r,"github.com/go-chi/chi","Chi"),me(e,r,"github.com/gin-gonic/gin","Gin"),me(e,r,"github.com/labstack/echo","Echo"),me(e,r,"github.com/revel/revel","Revel"),me(e,r,"github.com/astaxie/beego","Beego"),me(e,r,"github.com/go-martini/martini","Martini"),me(e,r,"github.com/gobuffalo/buffalo","Buffalo"),me(e,r,"github.com/goji/goji","Goji"),me(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return me(e,r,"net/http","net/http"),me(e,r,"fmt","fmt"),me(e,r,"io","io"),me(e,r,"time","time"),me(e,r,"math","math"),me(e,r,"strconv","strconv"),me(e,r,"strings","strings"),me(e,r,"sort","sort"),me(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"github.com/onsi/ginkgo","ginkgo"),me(e,r,"github.com/onsi/gomega","gomega"),me(e,r,"github.com/stretchr/testify","testify"),me(e,r,"gopkg.in/check.v1","gocheck"),me(e,r,"github.com/franela/goblin","goblin"),me(e,r,"github.com/DATA-DOG/godog","godog"),me(e,r,"github.com/stesla/gospec","gospec"),me(e,r,"github.com/rjeczalik/gotest","gotest"),me(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return me(e,r,"github.com/stretchr/testify","Testify"),me(e,r,"github.com/smartystreets/goconvey","GoConvey"),me(e,r,"github.com/onsi/ginkgo","Ginkgo"),me(e,r,"github.com/golang/mock","GoMock"),me(e,r,"gopkg.in/check.v1","GoCheck"),me(e,r,"github.com/franela/goblin","Goblin"),me(e,r,"github.com/DATA-DOG/godog","GoDog"),me(e,r,"github.com/onsi/gomega","Gomega"),me(e,r,"github.com/stesla/gospec","GoSpec"),me(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},Mie=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flask","Flask"),me(e,r,"django","Django"),me(e,r,"pyramid","Pyramid"),me(e,r,"tornado","Tornado"),me(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return me(e,r,"requests","requests"),me(e,r,"numpy","numpy"),me(e,r,"pandas","pandas"),me(e,r,"scipy","scipy"),me(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"pytest","Pytest"),me(e,r,"unittest","Unittest"),me(e,r,"doctest","Doctest"),me(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mock","Mock"),me(e,r,"hypothesis","Hypothesis"),me(e,r,"behave","Behave"),me(e,r,"lettuce","Lettuce"),me(e,r,"testify","Testify"),me(e,r,"pyhamcrest","PyHamcrest"),r}},Fie=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"laravel/framework","Laravel"),me(e,r,"symfony/symfony","Symfony"),me(e,r,"slim/slim","Slim"),me(e,r,"cakephp/cakephp","CakePHP"),me(e,r,"yiisoft/yii2","Yii"),me(e,r,"zendframework/zendframework","Zend Framework"),me(e,r,"phalcon/cphalcon","Phalcon"),me(e,r,"bcosca/fatfree","Fat-Free"),me(e,r,"fuel/fuel","FuelPHP"),me(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return me(e,r,"monolog/monolog","Monolog"),me(e,r,"vlucas/phpdotenv","PHP dotenv"),me(e,r,"symfony/console","Symfony Console"),me(e,r,"guzzlehttp/guzzle","GuzzleHttp"),me(e,r,"ramsey/uuid","Ramsey UUID"),me(e,r,"doctrine/orm","Doctrine ORM"),me(e,r,"php-di/php-di","PHP-DI"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"symfony/finder","Symfony Finder"),me(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"phpunit/phpunit","PHPUnit"),me(e,r,"behat/behat","Behat"),me(e,r,"phpspec/phpspec","PHPSpec"),me(e,r,"codeception/codeception","Codeception"),me(e,r,"atoum/atoum","Atoum"),me(e,r,"pestphp/pest","PestPHP"),me(e,r,"kahlan/kahlan","Kahlan"),me(e,r,"peridot-php/peridot","Peridot"),me(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockery/mockery","Mockery"),me(e,r,"php-mock/php-mock","PHP-Mock"),me(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),me(e,r,"padraic/mockery","Padraic Mockery"),me(e,r,"phpspec/prophecy","PHPSpec Prophecy"),me(e,r,"phpunit/php-invoker","PHPUnit Invoker"),me(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),me(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),me(e,r,"phpunit/php-timer","PHPUnit Timer"),me(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},Oie=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"Microsoft.NETCore.App",".NET Core"),me(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return me(e,r,"EntityFramework","Entity Framework"),me(e,r,"Newtonsoft.Json","Newtonsoft.Json"),me(e,r,"AutoMapper","AutoMapper"),me(e,r,"Serilog","Serilog"),me(e,r,"Dapper","Dapper"),me(e,r,"Polly","Polly"),me(e,r,"FluentValidation","FluentValidation"),me(e,r,"MediatR","MediatR"),me(e,r,"Hangfire","Hangfire"),me(e,r,"RabbitMQ.Client","RabbitMQ.Client"),me(e,r,"MassTransit","MassTransit"),me(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),me(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),me(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),me(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"xunit","xUnit"),me(e,r,"NUnit","NUnit"),me(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return me(e,r,"Moq","Moq"),me(e,r,"FluentAssertions","FluentAssertions"),me(e,r,"Bogus","Bogus"),me(e,r,"RestSharp","RestSharp"),me(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},Qie=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"flutter","Flutter"),me(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return me(e,r,"dartx","dartx"),me(e,r,"provider","Provider"),me(e,r,"rxdart","RxDart"),me(e,r,"dio","Dio"),me(e,r,"json_serializable","json_serializable"),me(e,r,"freezed","Freezed"),me(e,r,"moor","Moor"),me(e,r,"hive","Hive"),me(e,r,"http","http"),me(e,r,"path","path"),me(e,r,"intl","intl"),me(e,r,"equatable","equatable"),me(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test","test"),me(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockito","mockito"),me(e,r,"bloc_test","bloc_test"),r}},Uie=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"rails","Rails"),me(e,r,"sinatra","Sinatra"),me(e,r,"hanami","Hanami"),me(e,r,"grape","Grape"),me(e,r,"roda","Roda"),me(e,r,"padrino","Padrino"),me(e,r,"cuba","Cuba"),me(e,r,"ramaze","Ramaze"),me(e,r,"nyara","Nyara"),me(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return me(e,r,"active_record","ActiveRecord"),me(e,r,"sequel","Sequel"),me(e,r,"rom","ROM"),me(e,r,"datamapper","DataMapper"),me(e,r,"mongoid","Mongoid"),me(e,r,"neo4j","Neo4j"),me(e,r,"redis","Redis"),me(e,r,"cassandra","Cassandra"),me(e,r,"couchrest","CouchRest"),me(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"rspec","RSpec"),me(e,r,"minitest","Minitest"),me(e,r,"cucumber","Cucumber"),me(e,r,"spinach","Spinach"),me(e,r,"turnip","Turnip"),me(e,r,"bacon","Bacon"),me(e,r,"shoulda","Shoulda"),me(e,r,"test-unit","Test::Unit"),me(e,r,"wrong","Wrong"),me(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return me(e,r,"factory_bot","FactoryBot"),me(e,r,"faker","Faker"),me(e,r,"ffaker","FFaker"),me(e,r,"fabrication","Fabrication"),me(e,r,"machinist","Machinist"),me(e,r,"mocha","Mocha"),me(e,r,"flexmock","FlexMock"),me(e,r,"rr","RR"),me(e,r,"bourne","Bourne"),me(e,r,"not_a_mock","NotAMock"),r}},qie=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return me(e,r,"tokio","tokio"),me(e,r,"async-std","async-std"),me(e,r,"hyper","hyper"),me(e,r,"actix-web","actix-web"),me(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return me(e,r,"serde","serde"),me(e,r,"regex","regex"),me(e,r,"rand","rand"),me(e,r,"log","log"),me(e,r,"lazy_static","lazy_static"),me(e,r,"libc","libc"),me(e,r,"futures","futures"),me(e,r,"rayon","rayon"),me(e,r,"reqwest","reqwest"),me(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return me(e,r,"test-case","test-case"),me(e,r,"proptest","proptest"),me(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return me(e,r,"mockall","mockall"),me(e,r,"double","double"),me(e,r,"rstest","rstest"),me(e,r,"mockiato","mockiato"),me(e,r,"mock_derive","mock_derive"),me(e,r,"mocktopus","mocktopus"),me(e,r,"mockers","mockers"),me(e,r,"mock_it","mock_it"),r}},Hie=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function me(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(me,"addFromLibraries");var $ie=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Tft(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(Tft,"determineProgrammingLanguage");var Ift=[new Bie,new Nie,new Lie,new Mie,new Fie,new Oie,new Qie,new Uie,new qie,new Hie];function wft(t){let e=Ift.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new $ie(t,Ift);return new OSe(e)}s(wft,"getMetadataLookup");var OSe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Sft=E.Object({name:E.String(),version:E.Optional(E.String())}),_ft=E.Object({language:E.Object({id:E.String(),name:E.String(),version:E.Optional(E.String())}),libraries:E.Array(Sft),buildTools:E.Array(Sft)}),QSe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Qt([`The user is working on a project with the following characteristics:
`]),1]);let n=wft(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Qt(r)}addProgrammingLanguage(e,r){let n=Tft(e);this.turnContext.collectLabel(x1,n),r.push([new Qt([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(x1,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Qt([`${r}
${i}`]),1])}}},x1="project-metadata",Wie=class{constructor(e){this._resolver=e;this.id=x1;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new QSe(e)}};f();var Rft=Fe(require("path"));var USe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(vn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Qt(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Qt(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=ea(n);if(await this.turnContext.collectFile(Gie,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new g1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Qt([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Qt([`The referenced file \`${Rft.basename(r.uri)}\` is content excluded.`]),1]]}},qSe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Gie="references",jie=class{constructor(){this.id=Gie;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new qSe}processor(e){return new USe(e)}};var Bk=s(()=>[x1,GA,Gie,Md],"mandatorySkills"),Vie=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new Die(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!Bk().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!Bk().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!Bk().includes(u)))}return c.push(...Bk()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(Yi).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Yi).getSupportedSkills(r.id),a=e.get(kl).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await v1(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...Bk(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var zie=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Xr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Xr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var Yie=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Xr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var Fw=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new HSe(this),this.steps=new Yie(e,r,n,e.get(ca)),this.collector=new $Se(r,n,e.get(ca)),this.agentToolCalls=new zie(e,r,n,e.get(ca))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return S0.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?S0.agent(e,this.turn.telemetryId):S0.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ca).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}clearCopilotEditsSessionHeader(){this.copilotEditsSessionHeader=void 0}setCopilotEditsSessionHeader(e){this.copilotEditsSessionHeader=e}},Kie=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},sU=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},HSe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Yi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(du).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Kie(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(kl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(du).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof Kie||i instanceof sU)throw i;Xr.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},$Se=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function kft(t,e){let[r,n,i]=await Fhr(t,e);return i.push(...Uhr(t)),r.length>0||n.length>0?[new Qt([[new Qt(["Consider the additional context:"]),1],[Bw(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(kft,"fromSkills");async function Fhr(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await qhr(t,a.skillId,e?.languageId??""))continue;let[c,l]=await Ohr(t,a.skillId);c&&(Bk().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(Fhr,"handleSkillsInReverse");async function Ohr(t,e){let n=t.ctx.get(kl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),d=Date.now()-l;return u?await Qhr(t,n,c,u,a,d):[void 0,await Jie(t,n,"unprocessable",void 0,a,d)]}else return[void 0,await Jie(t,n,"unresolvable",void 0,a)]}catch(i){if(Xr.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof sU)throw i;return[void 0,await Jie(t,n,"failed")]}}s(Ohr,"safelyProcessSkill");async function Qhr(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Qt([[n,1]]):a=n,[[a,r?.value()||0],await Jie(t,e,"resolved",a,i,o)]}s(Qhr,"handleProcessedSkill");async function Jie(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(ja).getBestChatModelConfig($m("user")),d=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=Wi(u.tokenizer).tokenLength(d)}return t.ctx.get(du).addResolution(t.turn.id,l),l}s(Jie,"determineResolution");function Uhr(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(Uhr,"handleIgnoredSkills");async function qhr(t,e,r){if(e!==x1&&e!==GA)return!0;let n=t.ctx.get(Nt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===x1:e===GA}s(qhr,"includeSkill");var Pft=Fe(zp());var Nk=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=e8(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Qt(n),a]}async elidableSkills(e,r){return await kft(e,r)}async promptContent(e,r,n){let i,o={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},a=e.turn.extractContextFilesUri();e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?i=await kA.getInstructions(e.ctx,e.turn.workspaceFolders,o,a):e.turn.workspaceFolder&&(i=await kA.getInstructions(e.ctx,[e.turn.workspaceFolder],o,a));let c=qp(e.conversation.getLastTurn().request.message),l;i?typeof c=="string"?l=i+`

`+c:l=[{type:"text",text:i},...c]:l=c;let[u,d]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:u},{role:"system",content:this.suffix(e)},{role:"user",content:l}],d]}},Xie=class extends Nk{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Pft.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var Dft=Fe(zp());var Zie=class extends Nk{static{s(this,"InlineUserPromptStrategy")}suffix(e){return Dft.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var WSe=Fe(zp());var eoe=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=e8(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Qt(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return WSe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=Mst(e.map(n=>n.id));return E.Object({skillIds:E.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:ZT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:WSe.default`
                    This is the user's question: 
                    ${dn(i).trim()} 
                `.trim()}],[]]}};f();var Bft=Fe(zp());var toe=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:E.Object({suggestedTitle:E.String({description:"The suggested title for the conversation"}),followUp:E.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=ZT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Bft.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=e8(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Qt(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var Hhr=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:E.Object({keywords:E.Array(E.Object({keyword:E.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:E.Array(E.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],roe=class extends Nk{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=qp(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:Hhr,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=ZT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!XK(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!XK(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var jSe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function aU(t,e,r){return new jSe(t,e,r)}s(aU,"descriptor");var Nft=[aU("user",$m("user"),()=>new Xie),aU("inline",$m("inline"),()=>new Zie),aU("meta",$m("meta"),()=>new eoe),aU("suggestions",$m("suggestions"),()=>new toe),aU("synonyms",$m("synonyms"),()=>new roe)],noe=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=Nft.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return Nft}};var Mft=require("console");var Yu=class{constructor(e,r=new noe){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(io).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(ll).inspectPrompt({type:r.promptType,prompt:Lft(c),tokens:l}),this.ctx.get(du).addPrompt(e.turn.id,Lft(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,Mft.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:$hr(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,LSe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),LSe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(pn).getEditorInfo().readableName??this.ctx.get(pn).getEditorInfo().name,i=Whr(process.platform);return Eft(this.ctx,n,r?.login,i,e)}};function $hr(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s($hr,"processResultOfElidableText");function Lft(t){return t.map(e=>dn(e.content)).join(`

`)}s(Lft,"debugChatMessages");function Whr(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(Whr,"mapPlatformToOs");var t8=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Go.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(Yu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,r,l);if(d.type!=="success"&&(Xr.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,r,l)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Xr.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){Xr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Xr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Xr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Xr.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var r8=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(KGe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(lc).workspaceCount})),await this.turnContext.ctx.get(ll).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:dn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:aw.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},JGe(this.turnContext,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:dn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new t8(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Xr.debug(this.turnContext.ctx,"Computed followup",c),Xr.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:Ar(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return rVe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",XGe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};f();var ioe=E.Union([E.String(),E.Number()]),Lk=E.Union([E.String(),E.Number()]),jhr=E.Union([E.Literal("included"),E.Literal("blocked"),E.Literal("notfound"),E.Literal("empty")]),ooe=E.Object({uri:E.String(),position:E.Optional(jl)}),cU=E.Object({type:E.Literal("file"),uri:E.String(),visibleRange:E.Optional(bc),selection:E.Optional(bc),status:E.Optional(jhr),range:E.Optional(bc)}),Ghr=E.Object({type:E.Literal("directory"),uri:E.String()}),n8=E.Union([cU,Ghr,Out]),Hh=E.Union([E.Literal("panel"),E.Literal("inline")]),Vhr=E.Union([E.Object({type:E.Literal("text"),text:E.String()}),E.Object({type:E.Literal("image_url"),imageUrl:E.Object({url:E.String(),detail:E.Optional(E.Union([E.Literal("low"),E.Literal("high")]))})})]),GSe=E.Union([E.String(),E.Array(Vhr)]),Fft=E.Object({request:GSe,response:E.Optional(E.String()),agentSlug:E.Optional(E.String()),turnId:E.Optional(Lk),model:E.Optional(E.String())});function soe(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(soe,"convertToMessageContent");function aoe(t,e){if(t=qp(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(aoe,"appendToMessage");var coe=E.Union([E.Literal("Ask"),E.Literal("Agent")]),zhr=E.Object({type:E.String(),description:E.String()}),Oft=E.Object({name:E.String(),description:E.String(),inputSchema:E.Optional(E.Object({type:E.String(),properties:E.Record(E.String(),zhr),required:E.Array(E.String())})),confirmationMessages:E.Optional(E.Object({title:E.String(),message:E.String()}))}),loe=E.Object({uri:E.String(),name:E.String()});var VSe="generate-response",uoe=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},lU=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Wa(r.ctx),this.postProcessor=new r8(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Xr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof uoe?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await Rc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(ll).inspectPrompt(c),await n.steps.start(VSe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:qp(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return Ar()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return MSe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:qp(r.request.message)}),r.response&&r.response.type==="model"){let i=Fut(r.response.references);n.push({role:"assistant",content:qp(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Gut(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new Rw((p,m,h,g,A)=>{let y=A?{...A,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(x=>({message:x.message,severity:"warning"})),confirmationRequest:y}),this.turn.response?(this.turn.response.message=aoe(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),y&&(this.turn.confirmationRequest=y)}),l=await this.turnContext.ctx.get(qr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:dn(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),dn(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new uoe("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return eO(this.conversation,"conversationPanel",dn(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(VSe,e.error.message):await r.steps.finish(VSe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var uU=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new lU(this,e)}},doe=class extends uU{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new lU(this,e)}};f();var Yhr="github",zA=class{static{s(this,"RemoteAgentRegistry")}},foe=class extends zA{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await b2(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(an.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||an.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||an.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Yhr).map(i=>new uU(i.id,i.slug,i.name,i.description,i.avatar_url))}};var zSe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[YN]}};async function v1(t){let e=[];return e.push(new doe),e.push(...await t.get(zA).agents()),e.push(new zSe),e}s(v1,"getAgents");var Khr=E.Object({});async function Jhr(t,e,r){return[(await v1(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(Jhr,"handleConversationAgentsChecked");var Qft=et(Khr,Jhr);f();f();var dU=Fe(Zc());function Xhr(t,e,r){let n=$r.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Dt(t,"getCompletions.docVersionMismatch",n)}s(Xhr,"telemetryVersionMismatch");async function YA(t,e,r){let i=t.get(Cr).getTextDocumentUnsafe(e);if(!i)throw new dU.ResponseError(er.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await eE(t,e,i.getText());if(o.status==="invalid")throw t.get(Io).setInactive(o.reason),new dU.ResponseError(er.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(Xhr(t,i,e.version),Ku.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new dU.ResponseError(er.ContentModified,"Document Version Mismatch");return i}s(YA,"getTextDocument");async function b1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await YA(t,n,r)}catch(i){if(i instanceof dU.ResponseError&&i.code===er.CopilotNotAvailable)return;throw i}}s(b1,"getTextDocumentIfAvailable");var Zhr=E.Union([E.Literal("keyboard"),E.Literal("toolbar")]),egr=E.Object({turnId:Lk,codeBlockIndex:E.Number(),source:Zhr,copiedCharacters:E.Number(),totalCharacters:E.Number(),copiedText:E.String(),doc:E.Optional(ooe),textDocument:E.Optional(zf),position:E.Optional(jl),conversationSource:E.Optional(Hh)});async function tgr(t,e,r){let n=await b1(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=uT(r.conversationSource),c=t.get(Yi).findByTurnId(r.turnId),l=await Rc(t,c,{languageId:n?.detectedLanguageId??""});return mf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Jl(a)}.acceptedCopy`,l),["OK",null]}s(tgr,"handleConversationCodeCopyChecked");var Uft=et(egr,tgr);f();var rgr=E.Union([E.Literal("keyboard"),E.Literal("toolbar"),E.Literal("diff")]),ngr=E.Object({turnId:Lk,source:rgr,codeBlockIndex:E.Number(),acceptedLength:E.Optional(E.Number()),totalCharacters:E.Number(),newFile:E.Optional(E.Boolean()),doc:E.Optional(ooe),textDocument:E.Optional(zf),position:E.Optional(jl),conversationSource:E.Optional(Hh)});async function igr(t,e,r){let n=await b1(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=uT(r.conversationSource),c=t.get(Yi).findByTurnId(r.turnId),l=await Rc(t,c,{languageId:n?.detectedLanguageId??""});return mf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Jl(a)}.acceptedInsert`,l),["OK",null]}s(igr,"handleConversationCodeInsertChecked");var qft=et(ngr,igr);f();f();var poe=E.Array(bc);function moe(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(moe,"resolveAsActiveEditor");f();var Hft=Fe(Zc());var hoe=new Hft.ProgressType,YSe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(Pr).connection.sendProgress(hoe,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(Pr).connection.sendProgress(hoe,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(Pr).connection.sendProgress(hoe,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(Pr).connection.sendProgress(hoe,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function i8(t){return new YSe(t.workDoneToken)}s(i8,"createProgressHandler");f();f();f();var Ju=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var ix=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var o8=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var $ft="```",fU=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,ogr=String.raw`${$ft}[\w]*?\n(?<codeblock>[\s\S]*?)\n${$ft}`,sgr=new RegExp(fU+`
`+ogr,"gs"),KSe=["replace","delete"];function JSe(t,e){let r=t.matchAll(sgr),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!KSe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((A,y)=>{d[y]=A.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:c,end:l},h=XSe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(JSe,"extractEditsFromTaggedCodeblocks");function XSe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,d)=>{c[d]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(XSe,"applyEditsToDocument");f();f();f();f();var ox=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new Hp({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var agr=new vt("activeEditorPrompt");async function Wft(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new Bc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&cgr(n.selection)){let o=new ox(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Hi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new ox(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new ox(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Hi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new ox(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else agr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Wft,"processActiveEditor");function cgr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(cgr,"notEmptySelection");f();f();function jft(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(jft,"partsLength");async function Vft(t,e=1/0,r){let n=Gft(0,t,e),i=e-jft(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return lgr();let u=Gft(c.level+1,l,i-1);u.length&&(o=!0,i-=jft(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(Vft,"visualFileTree");function Gft(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Gft,"toParts");var lgr=s(()=>({tree:"",files:[]}),"emptyTree");var ugr=new vt("fileReferencesPrompt");async function zft(t,e,r,n){let i=await Yft(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=aN(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(zft,"generateWorkspaceStructurePrompt");async function Yft(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await Vft(await Kft(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(Yft,"generateWorkspaceStructure");async function Kft(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(Ni).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=no(e,o);return r.excludeDotFiles&&o.startsWith(".")||pgr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>Kft(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(Kft,"buildFileList");var dgr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],fgr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function pgr(t){return!!(fgr.includes(Hi(t).toLowerCase())||Ko(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>dgr.includes(r)))}s(pgr,"shouldAlwaysIgnoreFile");async function goe(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Hi(a.uri)})),i=await Yft(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${Ya(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return ugr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(goe,"processDirectoryReferences");var mgr=new vt("fileReferencesPrompt");async function Jft(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Bc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new ox(h,void 0,[]);g&&m.push(...g.render())}else mgr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),Wft(t,e),goe(t.context,e,n)]),u=a.flat(),d=l||[];return u.length>0||c.length>0||d.length>0?["<attachments>",...u,...c,...d,"</attachments>"]:[]}s(Jft,"processFileReferences");var Xft=new vt("editAgentPrompt"),Aoe=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn,this.isGpt5=this.props.modelConfiguration.modelFamily===Jr.Gpt5}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=zbe(this.currentTurn.response?.message,!0),o=this.currentTurn.extractContextFilesUri(),a=await kA.appendToUserMessage(this.ctx,this.props.workspaceFolders,dn(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},o),c=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return W7(this.props.userRawMessage)?c.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(a,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):c.push({role:"user",content:(await this.buildUserPrompt(a,e)).join(`
`)}),c.push(...i),i.length&&c.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),c}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:qp(n.request.message)}),n.response){let i=zbe(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):Xft.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=j7(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+$Q(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(bte(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){Xft.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=j7(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("read_file")!==void 0,n=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,i=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,o=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,a=[];return a.push("<instructions>"),a.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),a.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),a.push(...this.keepGoingReminder()),this.isGpt5&&a.push(`Communication style: Use a friendly, confident, and conversational tone. Prefer short sentences, contractions, and concrete language. Keep it skimmable and encouraging, not formal or robotic. A tiny touch of personality is okay; avoid overusing exclamations or emoji. Avoid empty filler like "Sounds good!", "Great!", "Okay, I will\u2026", or apologies when not needed\u2014open with a purposeful preamble about what you're doing next.`),a.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),a.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),a.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),this.isGpt5&&(a.push("Mission and stop criteria: You are responsible for completing the user's task end-to-end. Continue working until the goal is satisfied or you are truly blocked by missing information. Do not defer actions back to the user if you can execute them yourself with available tools. Only ask a clarifying question when essential to proceed."),a.push("Preamble and progress: Start with a brief, friendly preamble that explicitly acknowledges the user's task and states what you're about to do next. Make it engaging and tailored to the repo/task; keep it to a single sentence. If the user has not asked for anything actionable and it's only a greeting or small talk, respond warmly and invite them to share what they'd like to do\u2014do not create a checklist or run tools yet. Use the preamble only once per task; if the previous assistant message already included a preamble for this task, skip it this turn. Do not re-introduce your plan after tool calls or after creating files\u2014give a concise status and continue with the next concrete action. For multi-step tasks, keep a lightweight checklist and weave progress updates into your narration. Batch independent, read-only operations together; after a batch, share a concise progress note and what's next. If you say you will do something, execute it in the same turn using tools."),a.push("<requirementsUnderstanding>"),a.push("Always read the user's request in full before acting. Extract the explicit requirements and any reasonable implicit requirements."),a.push("If a requirement cannot be completed with available tools, state why briefly and propose a viable alternative or follow-up."),a.push("</requirementsUnderstanding>")),a.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),a.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),this.isGpt5&&(a.push("Under-specification policy: If details are missing, infer 1-2 reasonable assumptions from the repository conventions and proceed. Note assumptions briefly and continue; ask only when truly blocked."),a.push("Proactive extras: After satisfying the explicit ask, implement small, low-risk adjacent improvements that clearly add value (tests, types, docs, wiring). If a follow-up is larger or risky, list it as next steps."),a.push("Anti-laziness: Avoid generic restatements and high-level advice. Prefer concrete edits, running tools, and verifying outcomes over suggesting what the user should do."),a.push("<engineeringMindsetHints>"),a.push("Think like a software engineer\u2014when relevant, prefer to:"),a.push('- Outline a tiny "contract" in 2-4 bullets (inputs/outputs, data shapes, error modes, success criteria).'),a.push("- List 3-5 likely edge cases (empty/null, large/slow, auth/permission, concurrency/timeouts) and ensure the plan covers them."),a.push("- Write or update minimal reusable tests first (happy path + 1-2 edge/boundary) in the project's framework; then implement until green."),a.push("</engineeringMindsetHints>"),a.push("<qualityGatesHints>"),a.push('Before wrapping up, prefer a quick "quality gates" triage: Build, Lint/Typecheck, Unit tests, and a small smoke test. Ensure there are no syntax/type errors across the project; fix them or clearly call out any intentionally deferred ones. Report deltas only (PASS/FAIL). Include a brief "requirements coverage" line mapping each requirement to its status (Done/Deferred + reason).'),a.push("</qualityGatesHints>"),a.push("<responseModeHints>"),a.push("Choose response mode based on task complexity. Prefer a lightweight answer when it's a greeting, small talk, or a trivial/direct Q&A that doesn't require tools or edits: keep it short, skip todo lists and progress checkpoints, and avoid tool calls unless necessary. Use the full engineering workflow (checklist, phases, checkpoints) when the task is multi-step, requires edits/builds/tests, or has ambiguity/unknowns. Escalate from light to full only when needed; if you escalate, say so briefly and continue."),a.push("</responseModeHints>"),a.push("Validation and green-before-done: After any substantive change, run the relevant build/tests/linters automatically. For runnable code that you created or edited, immediately run a test to validate the code works (fast, minimal input) yourself using terminal tools. Prefer automated code-based tests where possible. Then provide optional fenced code blocks with commands for larger or platform-specific runs. Don't end a turn with a broken build if you can fix it. If failures occur, iterate up to three targeted fixes; if still failing, summarize the root cause, options, and exact failing output. For non-critical checks (e.g., a flaky health check), retry briefly (2-3 attempts with short backoff) and then proceed with the next step, noting the flake."),a.push("Never invent file paths, APIs, or commands. Verify with tools (search/read/list) before acting when uncertain."),a.push("Security and side-effects: Do not exfiltrate secrets or make network calls unless explicitly required by the task. Prefer local actions first."),a.push("Reproducibility and dependencies: Follow the project's package manager and configuration; prefer minimal, pinned, widely-used libraries and update manifests or lockfiles appropriately. Prefer adding or updating tests when you change public behavior."),a.push('Build characterization: Before stating that a project "has no build" or requires a specific build step, verify by checking the provided context or quickly looking for common build config files (for example: `package.json`, `pnpm-lock.yaml`, `requirements.txt`, `pyproject.toml`, `setup.py`, `Makefile`, `Dockerfile`, `build.gradle`, `pom.xml`). If uncertain, say what you know based on the available evidence and proceed with minimal setup instructions; note that you can adapt if additional build configs exist.'),a.push("Deliverables for non-trivial code generation: Produce a complete, runnable solution, not just a snippet. Create the necessary source files plus a small runner or test/benchmark harness when relevant, a minimal `README.md` with usage and troubleshooting, and a dependency manifest (for example, `package.json`, `requirements.txt`, `pyproject.toml`) updated or added as appropriate. If you intentionally choose not to create one of these artifacts, briefly say why.")),a.push("Think creatively and explore the workspace in order to make a complete fix."),a.push("Don't repeat yourself after a tool call, pick up where you left off."),a.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${i?"or replace_string_in_file":""} tool instead.`),n&&a.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),a.push("You don't need to read a file if it's already provided in context."),a.push("</instructions>"),a.push("<toolUseInstructions>"),a.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),a.push("Always output valid JSON when using a tool."),a.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),a.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),a.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),a.push("Never say the name of a tool to a user."),a.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),a.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),this.isGpt5&&(a.push("Before notable tool batches, briefly tell the user what you're about to do and why. After the results return, briefly interpret them and state what you'll do next. Don't narrate every trivial call."),a.push(`You MUST preface each tool call batch with a one-sentence "why/what/outcome" preamble (why you're doing it, what you'll run, expected outcome). If you make many tool calls in a row, you MUST checkpoint progress after roughly every 3-5 calls: what you ran, key results, and what you'll do next. If you create or edit more than ~3 files in a burst, checkpoint immediately with a compact bullet summary.`),a.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel. Parallelize read-only, independent operations only; do not parallelize edits or dependent steps."),a.push("Context acquisition: Trace key symbols to their definitions and usages. Read sufficiently large, meaningful chunks to avoid missing context. Prefer semantic or codebase search when you don't know the exact string; prefer exact search or direct reads when you do. Avoid redundant reads when the content is already attached and sufficient."),a.push("Verification preference: For service or API checks, prefer a tiny code-based test (unit/integration or a short script) over shell probes. Use shell probes (e.g., curl) only as optional documentation or quick one-off sanity checks, and mark them as optional.")),r&&a.push("When using the read_file tool, prefer reading a large section over calling the read_file tool many times in sequence. You can also think of all the pieces you may be interested in and read them in parallel. Read large enough context to ensure you get what you need."),a.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),n&&a.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),o&&a.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),a.push("</toolUseInstructions>"),a.push("<editFileInstructions>"),i?(a.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),a.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),a.push("Use the insert_edit_into_file tool to insert code into a file."),a.push("When editing files, group your changes by file."),this.isGpt5&&a.push("Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical."),a.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),a.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),a.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(a.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),a.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),this.isGpt5&&a.push("Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical."),a.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),a.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${i?"or replace_string_in_file":""} instead.`),a.push(`For each file, give a short description of what needs to be changed, then use the ${i?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),a.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${n?'with "npm install" or ':""}creating a "requirements.txt".`),e&&a.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),a.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),a.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),a.push(`// ${_l}`),a.push("changed code"),a.push(`// ${_l}`),a.push("changed code"),a.push(`// ${_l}`),a.push(""),a.push("Here is an example of how you should format an edit to an existing Person class:"),a.push("class Person {"),a.push(`	// ${_l}`),a.push("	age: number;"),a.push(`	// ${_l}`),a.push("	getAge() {"),a.push("		return this.age;"),a.push("	}"),a.push("}"),a.push("</editFileInstructions>"),a}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await Jft({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminderInstructions>"),i.push(...this.keepGoingReminder()),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${_l}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push(...this.explanationReminder()),i.push("</reminderInstructions>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}keepGoingReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Jr.Gpt41||this.props.modelConfiguration.modelFamily===Jr.Gpt5?e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.","Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.","You MUST iterate and keep going until the problem is solved.","You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.","Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.","Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.","You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.","You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input."):(e.push("You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue."),e.push("You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.")),e}explanationReminder(){let e=[];return this.props.modelConfiguration.modelFamily===Jr.Gpt5&&(e.push("Skip filler acknowledgements like \u201CSounds good\u201D or \u201COkay, I will\u2026\u201D. Open with a purposeful one-liner about what you're doing next."),e.push("When sharing setup or run steps, present terminal commands in fenced code blocks with the correct language tag. Keep commands copyable and on separate lines."),e.push("Avoid definitive claims about the build or runtime setup unless verified from the provided context (or quick tool checks). If uncertain, state what's known from attachments and proceed with minimal steps you can adapt later."),e.push("When you create or edit runnable code, run a test yourself to confirm it works; then share optional fenced commands for more advanced runs."),e.push("Do not state your identity or model name unless the user explicitly asks you to."),e.push('For non-trivial code generation, produce a complete, runnable solution: necessary source files, a tiny runner or test/benchmark harness, a minimal `README.md`, and updated dependency manifests (e.g., `package.json`, `requirements.txt`, `pyproject.toml`). Offer quick "try it" commands and optional platform-specific speed-ups when relevant.'),e.push("Your goal is to act like a pair programmer: be friendly and helpful. If you can do more, do more. Be proactive with your solutions, think about what the user needs and what they want, and implement it proactively."),e.push("<importantReminders>"),e.push("ALWAYS start your response with a brief task receipt and a concise high-level plan for how you will proceed."),e.push("Every so often, explain the notable action you are about to take next, especially before multi-step or impactful tool calls."),e.push("</importantReminders>")),e}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${Ko(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await zft(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var Zft=128,hgr=100,s8=new vt("toolCallingLoop"),yoe=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ca),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(Ld),this.prompt=new Aoe(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new NE(this.turnContext.ctx),modelConfiguration:this.modelConfiguration}),this.requestId=Ar(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId}),this.maxToolCallingLoop=Math.min(hgr,$i(e.ctx,qt.MaxToolCallingLoop))}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n),this.turnContext.clearCopilotEditsSessionHeader();let i=performance.now(),o=await this.runOne(r,e);if(iVe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new Rw((u,d,p,m)=>{let h=u.trim().match(fU)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),s8.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),s8.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Ju({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Bc;case"failed":throw this.turn.status="error",new Ju({message:aw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new Ju({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Ju({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Ju({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Ju({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Ju({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Ju({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Ju({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Ju({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");this.turnContext.setCopilotEditsSessionHeader(e.copilotEditsSessionHeader);let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=ZT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),d=this.shouldRequireToolConfirmation();await this.requestToolInvocationApproval(u,d,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=nut(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=Mne(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof ix||l instanceof Bc)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new po([new _i("")],"cancelled"),e.id),new ix(l.message);{s8.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${nE(l)}`,l),c="error";let u=new po([new _i(nE(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=Mne(u);await this.turnContext.agentToolCalls.error(n,e.id,d.message)}}finally{let l=performance.now()-a;oVe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;s8.error(this.turnContext.ctx,a);let c=new po([new _i(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=Mne(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(){return $i(this.turnContext.ctx,qt.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Bc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new ix("Cancelled by user");case"accept":return Promise.resolve();default:throw new ix(`Invalid confirmation result ${u.result}`)}}else s8.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw s8.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new o8}checkChatPayload(e){if(e.messages.length===0)throw new Ju({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>Zft)throw new Ju({message:`You may not include more than ${Zft} tools in your request.`,responseIsFiltered:!1})}};var Coe=new vt("agenticTurnProcessor"),voe=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Wa(e.ctx),this.turnSuggestions=new t8(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o,a)}catch(c){Xr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:_we.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a,c){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Rc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Coe.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});let u=Rk().find(d=>d.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}try{let d=c&&a?await o3(this.turnContext.ctx,c,a):await Go.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(d),await new yoe(this.turnContext,this.chatFetcher,d,l).run(r);let m={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let h=await this.fetchSuggestedTitle(r,l.extendedBy({messageSource:"chat.user"},{}));typeof h=="string"&&h!==""&&(m.suggestedTitle=h)}await this.endProgress(m)}catch(d){if(d instanceof ix)Coe.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,d),this.turn.status="cancelled",await this.cancelProgress();else if(d instanceof Bc)Coe.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,d),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(d instanceof o8)this.turn.status="error",this.updateTurnResponseWithError(d.message),await this.endProgress({error:{message:d.message,code:_we.ToolRoundExceedError,responseIsIncomplete:!0}});else if(d instanceof Ju)this.turn.status="error",this.updateTurnResponseWithError(d.message),await this.endProgress({error:d.conversationError});else throw Coe.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,d),d}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Xr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=j7(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}};f();var ZSe="collect-context",e_e="generate-response",Eoe=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ca),this.chatFetcher=this.chatFetcher??new Wa(e.ctx),this.postProcessor=new r8(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o,a){try{await this.processWithModel(e,r,this.turnContext,n,i,o,a)}catch(c){Xr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,c);let l=c instanceof Error?c.message:String(c);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a,c){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await Rc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(l=l.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=Rk().find(h=>h.id===this.turn.template?.templateId);if(u?.response){await this.handleTemplateResponse(u,this.turn.template.userQuestion,r);return}let d=(await v1(this.turnContext.ctx)).find(h=>h.slug===this.turn.agent?.agentSlug);if(d){let h=await this.checkAgentPreconditions(d);if(h){await this.endProgress(h);return}}await n.steps.start(ZSe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,u,d);let p;c?p="customized":a?p=(await this.turnContext.ctx.get(ja).getBestChatModelConfig([a])).uiName:p=void 0;let m=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,p);if(!m)await n.steps.error(ZSe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(ZSe),await n.steps.start(e_e,"Generating response");let h=this.augmentTelemetry(m,l,u,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let g=await this.fetchConversationResponse(m.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:m.tokens}),h,o,a,c),A=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(g,n),await this.endProgress({error:g.error,followUp:g.followup,suggestedTitle:g.suggestedTitle,skillResolutions:m.skillResolutions,updatedDocuments:A}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Xr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new Vie(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a,c){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",u=0,d=new Rw((A,y,x,I)=>{let S=A.trim().match(fU)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:A,annotations:y,references:x,hideText:S,notifications:I.map(R=>({severity:"warning",message:R.message}))}),this.turn.response?this.turn.response.message=aoe(this.turn.response.message,A):this.turn.response={message:A,type:"model"},this.turn.annotations.push(...y??[]),l+=A,this.strategy.currentDocument){let R=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);R&&R.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:R}),u+=R.length)}}),p=c&&a?await o3(this.turnContext.ctx,c,a):await Go.getModelConfiguration(this.turnContext.ctx,"user",a);e=Go.transformMessages(e,p.modelFamily),this.turnContext.setResolvedModelConfiguration(p);let m=this.turn.getResolvedModelId();m&&(i=i.extendedBy({modelId:m}));let h={modelConfiguration:p,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:dn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},g=await this.chatFetcher.fetchResponse(h,r,n,(A,y)=>d.isFinishedAfter(A,y));return i=i.extendedBy(void 0,{numCodeEdits:u}),await this.postProcessor.postProcess(g,r,d.appliedText,n,i,dn(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",ZGe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,dn(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=eO(this.conversation,this.strategy.uiKind,dn(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=eO(this.conversation,this.strategy.uiKind,dn(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(e_e,e.error.message):await r.steps.finish(e_e)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var xoe=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Go.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(Yu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},boe=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(ja).getBestChatModelConfig($m(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(Yu).toPrompt(e,l)}async processResponse(e){let r=[],n=dn(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(Md);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(vn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=JSe(e,r).filter(a=>KSe.includes(a.mode)),o=XSe(i,r);if(o)return await this.ctx.get(ll).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return JSe(e,r)}};f();f();var e0t=Fe(Zc()),t0t=Fe(iA());var Tf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new e0t.ProtocolRequestType("conversation/context");this.typeCheck=Vs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(Pr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new t0t.ResponseError(c.code,c.message,c.data);Xr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Xr.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Vu(this.typeCheck.Errors(i));return i}}};var t_e=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},sx=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new t_e(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},Ioe=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ca)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Xr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Yi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Tf(this.turnContext.ctx,o,E.Object({value:E.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await vC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:Ar()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var ax=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(sx).get(r);if(i)return new Ioe(e,i);let a=(await v1(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new boe(e.ctx):c=new xoe(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new voe(e,c):new Eoe(e,c)}};f();var r0t=Fe(Zc());var a8=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new r0t.ResponseError(er.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function Toe(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Hi(t.uri)}]}s(Toe,"resolveAsWorkspaceFolders");f();f();var ggr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),Qd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?ggr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var wf=class{constructor(){this.tokens=new kr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new In.CancellationTokenSource,i=new Qd([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var Agr=E.Object({conversationId:E.Optional(ioe),workDoneToken:E.Union([E.String(),E.Number()]),turns:E.Array(Fft,{minItems:1}),capabilities:E.Optional(E.Object({allSkills:E.Optional(E.Boolean()),skills:E.Optional(E.Array(E.String()))})),doc:E.Optional(zf),textDocument:E.Optional(zf),selection:E.Optional(bc),visibleRanges:E.Optional(poe),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(n8)),source:E.Optional(Hh),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(loe)),ignoredSkills:E.Optional(E.Array(E.String())),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(coe),needToolCallConfirmation:E.Optional(E.Boolean())});async function ygr(t,e,r){a8.validate(r.workspaceFolders);let n=await b1(t,r,e),i=t.get(Yi).create(r);await Cgr(t,i,r,n);let o=i.turns[i.turns.length-1],a=i8(r),c=t.get(wf).add(a.progressToken,e),l=new Fw(t,i,o,c);return await(await t.get(ax).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model,r.modelProviderName),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(ygr,"handleConversationCreateChecked");async function Cgr(t,e,r,n){for(let i of r.turns){let o=soe(i.request),a=new kw({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=fie(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Toe(c),u=moe({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Yi).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(Cgr,"addTurns");var n0t=et(Agr,ygr);f();var vgr=E.Object({conversationId:E.String()});function Egr(t,e,r){return t.get(Yi).destroy(r.conversationId),["OK",null]}s(Egr,"handleConversationDestroyChecked");var i0t=et(vgr,Egr);f();var xgr=E.Object({turnId:E.String(),acceptedFileCount:E.Number({minimum:0}),totalFileCount:E.Number({minimum:1})}),bgr=new vt("conversationNotifyCodeAcceptance");async function Igr(t,e,r){let n=t.get(Yi).findByTurnId(r.turnId);if(!n)return bgr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await Rc(t,n,{languageId:""});return mf(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Jl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(Igr,"handleConversationNotifyCodeAcceptanceChecked");var o0t=et(xgr,Igr);f();var Tgr=E.Object({});function wgr(t,e,r){return[{path:t.get(Li).directory},null]}s(wgr,"handleConversationPersistenceChecked");var s0t=et(Tgr,wgr);f();f();var r_e=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(io).getSession(),n=e.get(Gl);return r&&r.githubAppId&&r.githubAppId!==sp?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},n_e=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(qr).getToken()).envelope.chat_enabled?"ok":"failed"}}},Sgr=[new r_e,new n_e],$h=class{constructor(e,r=Sgr){this.ctx=e;this.checks=r;this.emitter=new Ua;this.onChange=this.emitter.event;ws(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var _gr=E.Object({forceCheck:E.Optional(E.Boolean())});async function Rgr(t,e,r){let n=r.forceCheck??!1;return[await t.get($h).check(n),null]}s(Rgr,"handleConversationPreconditionsChecked");var a0t=et(_gr,Rgr);f();var kgr=E.Object({turnId:E.String(),rating:E.Number(),doc:E.Optional(zf),textDocument:E.Optional(zf),source:E.Optional(Hh)});async function Pgr(t,e,r){let n=await b1(t,r,e),i=uT(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await Rc(t,t.get(Yi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return mf(t,n,{rating:o,uiKind:i},{},`${Jl(i)}.messageRating`,a),["OK",null]}s(Pgr,"handleConversationRatingChecked");var c0t=et(kgr,Pgr);f();f();var woe=class extends Sw{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:u1,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(ew).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Bc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(KC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Dgr=E.Object({tools:E.Array(Oft)});function Bgr(t,e,r){return r.tools.forEach(n=>{t.get(Ld).registerTool(new woe({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(Bgr,"conversationRegisterToolsChecked");var l0t=et(Dgr,Bgr);f();var Ngr=E.Object({});function Lgr(t,e,r){return[ASe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(Lgr,"handleConversationTemplatesChecked");var u0t=et(Ngr,Lgr);f();var Mgr=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),conversationId:ioe,turnId:E.Optional(Lk),message:GSe,followUp:E.Optional(E.Object({id:E.String(),type:E.String()})),doc:E.Optional(zf),textDocument:E.Optional(zf),selection:E.Optional(bc),visibleRanges:E.Optional(poe),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(n8)),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(loe)),ignoredSkills:E.Optional(E.Array(E.String())),confirmationResponse:Fst,model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(coe),needToolCallConfirmation:E.Optional(E.Boolean())});async function Fgr(t,e,r){a8.validate(r.workspaceFolders);let n=await b1(t,r,e),i=t.get(Yi),o=i.get(r.conversationId),a=soe(r.message),c=new kw({message:a,type:"user"},r.turnId);c.chatMode=fie(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Toe(l),d=moe({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,d,l,u,r.ignoredSkills,r.confirmationResponse);let p=i8(r),m=t.get(wf).add(p.progressToken,e),h=new Fw(t,o,c,m);return await(await t.get(ax).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}s(Fgr,"handleConversationTurnChecked");var d0t=et(Mgr,Fgr);f();var Ogr=E.Object({conversationId:E.String(),turnId:E.String(),source:E.Optional(Hh)});async function Qgr(t,e,r){t.get(Yi).deleteTurn(r.conversationId,r.turnId);let i=uT(r.source),o=await Rc(t,t.get(Yi).findByTurnId(r.turnId),{languageId:""});return mf(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Jl(i)}.messageDelete`,o),["OK",null]}s(Qgr,"handleConversationTurnDeleteChecked");var f0t=et(Ogr,Qgr);f();var Ugr=E.Object({document:E.Object({uri:E.String(),text:E.String(),languageId:E.String(),version:E.Number()}),selection:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})});function qgr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(qgr,"buildSystemMessage");function Hgr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Hgr,"buildUserMessage");function $gr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],A=Math.max(g.search(/\S/),0),y=g.trimEnd().length,x={uri:t.uri,range:{start:{line:h,character:A},end:{line:h,character:y}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};r.push(x)}return r}s($gr,"parseReviewComments");async function Wgr(t,e,r){if(!r.document.text)return[null,{code:er.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:er.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:er.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:er.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:er.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(Wa),o=await Go.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:qgr()},{role:"user",content:Hgr(r)}],c=await t.get(Nt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:S0.user("code-review",Ar())},e,c);if(l.type!=="success")return[null,{code:er.InternalError,message:"Failed to generate code review"}];let u=$gr(r.document,l.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(Wgr,"handleCopilotCodeReviewChecked");var p0t=et(Ugr,Wgr);f();f();var pU=class t{constructor(e){this.ctx=e;this.name="ReviewChangesProvider"}static{s(this,"ReviewChangesProvider")}static{this.DEFAULT_TIMEOUT=120*1e3}async fetchCodeReview(e,r){let n=await this.ctx.get(qr).getToken(),i=km(this.ctx,n,"api","agents/github-code-review"),a=lC(this.ctx)["Copilot-Integration-Id"];return Gv(this.ctx,i,n.token,void 0,ow(),e,r,{"X-Copilot-Code-Review-Mode":"ide","Copilot-Integration-Id":a},t.DEFAULT_TIMEOUT)}static changesToReference(e){return{type:"github.pull_request",id:"1",data:{type:"pull-request",headFileContents:e.map(r=>({path:r.path,content:r.headContent})),baseFileContents:e.map(r=>({path:r.path,content:r.baseContent}))}}}static createReviewRequest(e){return{messages:[{role:"user",copilot_references:[t.changesToReference(e)]}]}}};f();f();var Soe=/```suggestion(\u0020*(\r\n|\n))((?<suggestion>[\s\S]*?)(\r\n|\n))?```/g;var _oe=class t{static{s(this,"ReviewChangesResponseParser")}static findFirstNonWhitespaceCharacterIndex(e){let r=e.match(/\S/);return r?r.index:e.length}static removeSuggestion(e){return e.replaceAll(Soe,"")}static extractSuggestionAndText(e){Soe.lastIndex=0;let n=Soe.exec(e)?.groups?.suggestion||null,i=t.removeSuggestion(e);return{suggestion:n,textWithoutSuggestion:i}}static ghCommentToReviewComment(e,r){let n=r.headContent.split(`
`)[e.data.line-1],i=n.trimEnd().length,o={start:{line:e.data.start_line?e.data.start_line-1:e.data.line-1,character:t.findFirstNonWhitespaceCharacterIndex(n)},end:{line:e.data.line-1,character:i}},a=e.data.body,{suggestion:c,textWithoutSuggestion:l}=t.extractSuggestionAndText(a);return{uri:r.uri,range:o,message:l,kind:e.data.problem_type,severity:"medium",suggestion:c}}static parseLine(e){if(e==="data: [DONE]")return[];if(e==="")return[];let r=JSON.parse(e.replace("data: ",""));return Array.isArray(r.copilot_references)&&r.copilot_references.length>0?r.copilot_references.filter(n=>n.type):[]}static parseReviewResponse(e,r){let n=e.split(`
`),i=[];for(let o of n){let a=t.parseLine(o);for(let c of a.filter(l=>l.type==="github.generated-pull-request-comment")){if(c.data.side!=="RIGHT")continue;let l=r.find(d=>d.path===c.data.path);if(!l)continue;let u=t.ghCommentToReviewComment(c,l);i.push(u)}}return i}};var jgr=E.Object({uri:E.String(),path:E.String(),baseContent:E.String(),headContent:E.String()}),Ggr=E.Object({changes:E.Array(jgr)}),mU;async function Vgr(t,e,r){mU&&(mU.cancel(),mU.dispose()),mU=new In.CancellationTokenSource;let n=new Qd([e,mU.token]),i=new pU(t);if(!(await t.get(qr).getToken()).isCopilotCodeReviewEnabled)return[null,{code:er.InternalError,message:"GitHub Copilot Code Review is not enabled."}];let a=pU.createReviewRequest(r.changes),c=await i.fetchCodeReview(a,n);if(!c.ok)return c.status===402?[null,{code:c.status,message:"You have reached your GitHub Copilot Code Review quota limit."}]:[null,{code:er.InternalError,message:"Failed to generate code review."}];let l=await c.text();return[{comments:_oe.parseReviewResponse(l,r.changes)},null]}s(Vgr,"handleCopilotCodeReviewReviewChangesChecked");var m0t=et(Ggr,Vgr);f();f();var Ow=class{constructor(e,r,n,i,o,a){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.userSelectedModelProviderName=a;this.workingSetUriToPathMap=new Map;for(let c of n.workingSet)this.workingSetUriToPathMap.set(c.uri,QE.uriToPath(c.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return S0.user("conversation-edits",this.editTurnId)}};f();async function Roe(t,e,r,n){let o=t.get(cl).create("panel","en"),a=new cw({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new Ow(t,o,a,n,Jr.Gpt4o),u=t.get(ju);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Roe,"streamMockedResult");f();var zgr=E.Object({enableMock:E.Boolean()}),I1=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Ygr(t,e,r){return t.get(I1).setMockEnabled(r.enableMock),["OK",null]}s(Ygr,"handleTestingSetCopilotEditsResponseChecked");var h0t=et(zgr,Ygr);var Kgr=E.Object({request:E.String(),response:E.Optional(E.String())}),Jgr=E.Union([E.Literal("panel")]),Xgr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),turns:E.Array(Kgr,{minItems:1}),workingSet:E.Optional(E.Array(cU)),source:E.Optional(Jgr),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String())});function Zgr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new cw({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(Zgr,"buildEditConversation");async function eAr(t,e,r){if(t.get(I1).isMockEnabled())return await Roe(t,Ar(),Ar(),r.partialResultToken),[[],null];let n=Zgr(t.get(cl),r),i=n.getLastTurn(),o=new Ow(t,n,i,r.partialResultToken,r.model,r.modelProviderName),a=t.get(wf).add(r.partialResultToken,e);return[await t.get(UE).createOrContinueEditConversation(o,a),null]}s(eAr,"handleEditConversationCreateChecked");var g0t=et(Xgr,eAr);f();var tAr=E.Object({editConversationId:E.String()});function rAr(t,e,r){return t.get(cl).destroy(r.editConversationId),["OK",null]}s(rAr,"handleEditConversationDestroyChecked");var A0t=et(tAr,rAr);f();var nAr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),editConversationId:E.String(),message:E.String(),workingSet:E.Optional(E.Array(cU)),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String())});function iAr(t,e,r){let n=t.get(e),i=new cw({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(iAr,"buildEditConversation");async function oAr(t,e,r){if(t.get(I1).isMockEnabled())return await Roe(t,r.editConversationId,Ar(),r.partialResultToken),[[],null];let n=t.get(cl),i=iAr(n,r.editConversationId,r),o=i.getLastTurn(),a=new Ow(t,i,o,r.partialResultToken,r.model),c=t.get(wf).add(r.partialResultToken,e);return[await t.get(UE).createOrContinueEditConversation(a,c),null]}s(oAr,"handleEditConversationTurnChecked");var y0t=et(nAr,oAr);f();var sAr=E.Object({editConversationId:E.String(),editTurnId:E.String(),source:E.Optional(Hh)});async function aAr(t,e,r){t.get(cl).deleteTurn(r.editConversationId,r.editTurnId);let i=await ZF(t,r.editTurnId,r.editConversationId,{languageId:""});return mf(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Jl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(aAr,"handleEditConversationTurnDeleteChecked");var C0t=et(sAr,aAr);f();var cAr=E.Object({}),lAr=E.Object({servers:E.Array(E.Object({name:E.String(),tools:E.Array(E.Object({name:E.String(),status:E.Enum(dQ)}))}))});function uAr(t,e,r){return[t.get(Lh).getAllTools(),null]}s(uAr,"handleGetMCPToolsChecked");function dAr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(Lh).updateMCPToolStatus(i,a,c);return[t.get(Lh).getAllTools(),null]}s(dAr,"handleUpdateMCPToolsStatusChecked");var v0t=et(cAr,uAr),E0t=et(lAr,dAr);f();var fAr=E.Object({});async function pAr(t,e,r){let n=await t.get(qr).getToken();return[mAr(await t.get(af).getMetadata(),n),null]}s(pAr,"handleCopilotModelsChecked");function mAr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=jm.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!MUe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(mAr,"filterModels");var x0t=et(fAr,pAr);f();var hAr=E.Object({model:E.Optional(E.String()),status:E.Optional(E.String())});async function gAr(t,e,r){return r.model&&r.status==="enabled"?await t.get(af).acceptModelPolicy(r.model)?["OK",null]:[null,{code:er.InternalError,message:"Failed to accept model policy"}]:[null,{code:er.InvalidRequest,message:"Invalid model or status"}]}s(gAr,"handleCopilotModelsPolicyChecked");var b0t=et(hAr,gAr);f();f();f();f();function AAr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(AAr,"panelPositionForDocument");async function*I0t(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(I0t,"trimChoices");var c8=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=AAr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function i_e(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await i_e(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(i_e,"reportSolutions");async function o_e(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:o_e(t,e)}}s(o_e,"generateSolutionsStream");function koe(t){return t.replace(/\s+/g,"")}s(koe,"normalizeCompletionText");async function T0t(t,e,r,n,i){let o=e.targetPosition,a=e.textDocument,c=jI(t,a.uri),l=Ar(),u=$r.createAndMarkAsIssued({headerRequestId:l,languageId:a.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Nt).updateExPValuesAndAssignments({uri:a.uri,languageId:a.detectedLanguageId},u),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i}));let d=await $3(t,l,wC(a,o),e.savedTelemetryData);if(d.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(d.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(d.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(d.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(d.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let p=d.prompt,m=d.trailingWs;return m.length>0&&(e.startPosition=hs.position(e.startPosition.line,e.startPosition.character-m.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...k4(p),solutionCount:e.solutionCountTarget,promptEndPos:a.offsetAt(o)}),n.debug(t,"prompt:",p),Dt(t,"solution.requested",e.savedTelemetryData),{prompt:p,trailingWs:m,telemetryData:e.savedTelemetryData,repoInfo:c,ourRequestId:l}}s(T0t,"setupPromptAndTelemetry");function w0t(t,e,r,n,i,o){let a=t.get(tA).forLanguage(t,e.detectedLanguageId,o),c=vp(e.detectedLanguageId),l=yJ(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},d={};a==="parsing"&&!c&&(d.stop=[`

`,`\r
\r
`]);let p=WI(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?nO(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?nO(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:d,finishedCb:m,engineInfo:p}}s(w0t,"setupCompletionParams");var s_e=new vt("solutions");async function yAr(t,e){let r=e.targetPosition,n=e.textDocument,i=await T0t(t,e,"open copilot",s_e);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:d,postOptions:p,finishedCb:m,engineInfo:h}=w0t(t,n,r,o,e,c),g=e.cancellationToken,A={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:d},y=await t.get(u0).fetchAndStreamCompletions(t,A,c.extendedBy(),m,g);if(y.type==="failed"||y.type==="canceled")return{status:"FinishedWithError",error:`${y.type}: ${y.reason}`};let x=y.choices;x=I0t(x),x=XF(x,R=>AO(t,n,r,R,!1,s_e));let I=XF(x,async R=>{let B=R.completionText;s_e.info(t,`Open Copilot completion: [${R.completionText}]`);let M=await OVe(t,n,r,R.completionText)??hs.position(r.line,0),[O]=yT(n.getText(hs.range(M,r)));B=O+B;let K=R.completionText;a.length>0&&K.startsWith(a)&&(K=K.substring(a.length));let V=R.meanLogProb,z=V!==void 0?Math.exp(V):0,Q=c.extendedBy({choiceIndex:R.choiceIndex.toString()});return{completionText:K,insertText:B,range:hs.range(M,r),meanProb:z,meanLogProb:V||0,requestId:R.requestId,choiceIndex:R.choiceIndex,telemetryData:Q,copilotAnnotations:R.copilotAnnotations}});return o_e(g,I[Symbol.asyncIterator]())}s(yAr,"launchSolutions");async function Poe(t,e,r){return t.get(Io).withProgress(async()=>{let i=yAr(t,e);return await i_e(i,r)})}s(Poe,"runSolutions");var _0t=Fe(Ub()),gU=Fe(Zc());f();f();function Doe(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Doe,"parseChallengeDoc");var CAr=E.Object({text:E.String(),score:E.Number()}),vAr=E.Object({documents:E.Array(CAr),options:E.Optional(E.Object({}))});async function Boe(t,e,r){let n=Ar();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=Doe(o,t),d=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:$y.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(Boe,"runTestSolutions");var KA=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function EAr(t,e,r){return t.forceSet(KA,new KA(r.documents)),["OK",null]}s(EAr,"handleTestingSetPanelCompletionDocumentsChecked");var S0t=et(vAr,EAr);var R0t=uj.type;function xAr(t,e,r,n,i){let o=koe(n.completionText),a=(0,_0t.SHA256)(o).toString();return t.get(Os).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:wwe,title:`Accept completion ${i}`,arguments:[a]}}}s(xAr,"makeCompletion");function c_e(t,e){return`${t}/${e}`}s(c_e,"progressMessage");var a_e=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Pr)}async onSolution(e){this.count+=1;let r=xAr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(gU.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:c_e(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return bAr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(gU.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function bAr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(gU.WorkDoneProgress.type,t,{kind:"end",message:c_e(r,10)})}s(bAr,"reportDone");var hU;async function IAr(t,e,r){let n=await YA(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(Pr).connection.sendProgress(gU.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:c_e(0,10),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async d=>{await t.get(Pr).connection.sendProgress(uj.partialResult,c,{items:[d]})},"onCompletion"));let l=new a_e(t,r,a),u=t.get(KA);if(u.documents){let d=u.documents;await Boe(i,d,l)}else{l.offset=n.offsetAt(i);let d=new c8(n,i,e,10);await Poe(t,d,l)}return l.error!==void 0?[null,{code:er.InternalError,message:l.error}]:[{items:o},null]}s(IAr,"handleChecked");async function TAr(t,e,r){hU&&(hU.cancel(),hU.dispose()),hU=new In.CancellationTokenSource;let n=hU.token,i=new Qd([e,n]);try{return await IAr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:er.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(TAr,"handleCheckedWithAbort");var k0t=et(pLe,TAr);f();f();f();function SAr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(Kd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(d){return new URL(d).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(SAr,"urlsToCheck");async function P0t(t,e,r=B4(t),n,i){let o=SAr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:d}=await _Ar(e,c,l,i);return{label:a,url:c,message:u,status:d}});return await Promise.all(o)}s(P0t,"checkReachability");async function _Ar(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(_Ar,"determineReachability");var Kp=Fe(require("os")),l8=Fe(require("tls"));async function B0t(t,e){let r=await t.get(ln).getImplementation(),n=await t.get(qr).getGitHubSession(),i=await t.get(qr).getToken().catch(()=>{});return{sections:[kAr(t),RAr(t,n),PAr(t,r),await DAr(t,r,i?.endpoints,n,e)]}}s(B0t,"collectDiagnostics");function N0t(t){return t.sections.map(BAr).join(Kp.EOL+Kp.EOL)+Kp.EOL}s(N0t,"formatDiagnosticsAsMarkdown");function RAr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:h_(t),"GitHub Account":n,"Session ID":t.get(Ss).sessionId,"Send Restricted Telemetry":P4(t)?"enabled":"disabled","Content Exclusion":t.get(el).enabled?"enabled":"unavailable"}}}s(RAr,"collectCopilotSection");function kAr(t){let e={Plugin:LAr(t),Editor:NAr(t),"Operating System":`${Kp.type()} ${Kp.release()} (${Kp.arch()})`};return T1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(kAr,"collectEnvironmentSection");function PAr(t,e){let r=t.get(xc).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":l8.rootCertificates.length,"TLS Default Min Version":l8.DEFAULT_MIN_VERSION,"TLS Default Max Version":l8.DEFAULT_MAX_VERSION};return T1(n,"http_proxy"),T1(n,"https_proxy"),T1(n,"no_proxy"),T1(n,"SSL_CERT_FILE"),T1(n,"SSL_CERT_DIR"),T1(n,"OPENSSL_CONF"),T1(n,"NODE_EXTRA_CA_CERTS"),T1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(PAr,"collectNetworkConfigSection");async function DAr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await P0t(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(DAr,"collectReachabilitySection");function D0t(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(D0t,"quoteCode");function T1(t,e){let r=process.env[e];r&&(t[D0t(e)]=D0t(r)),r!==process.env[e.toUpperCase()]&&T1(t,e.toUpperCase())}s(T1,"addEnvironmentVariable");function BAr(t){return`## ${t.name}`+Kp.EOL+Kp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Kp.EOL)}s(BAr,"formatSectionAsMarkdown");function NAr(t){let e=t.get(pn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(NAr,"getEditorDisplayVersion");function LAr(t){let e=t.get(pn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(LAr,"getPluginDisplayVersion");var MAr=E.Object({});async function FAr(t,e){return[{report:N0t(await B0t(t,e))},null]}s(FAr,"handleDiagnosticsChecked");var L0t=et(MAr,FAr);f();f();f();f();function M0t(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(l,""),p=u.length-d.length;return c(p)+d}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(M0t,"normalizeIndentCharacter");function F0t(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let d=hs.range(hs.position(i.line,0),hs.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=M0t(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=hs.range(d.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:Ar(),insertText:p,range:d,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(d=>d.index===a);if(u){let d=l.filter(p=>p.index!==a);l=[u,...d]}}return l}s(F0t,"completionsFromGhostTextResults");async function l_e(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await e1e(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=UYe(t,e.textDocument,e.position,c),u=F0t(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};if(c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let p={isSpeculative:!0,opportunityId:n.opportunityId},m=s(()=>e1e(t,e,void 0,p),"fn");t.get(dh).set(u[0].clientCompletionId,m)}let d=u.map(p=>{let{start:m,end:h}=p.range,g=In.Range.create(m,In.Position.create(h.line,h.character-i));return{...p,range:g}});return{...o,value:d}}s(l_e,"getInlineCompletionsResult");async function Noe(t,e,r,n,i={}){OAr(t,e,r);let o=await l_e(t,wC(e,r),n,i);return hVe(t,o)}s(Noe,"getInlineCompletions");function OAr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});nJ.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(OAr,"logCompletionLocation");var $0t=Fe(Zc());f();var O0t=require("crypto");var u8=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new d_e(e,this.id)}},d_e=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(Pr),o=(0,O0t.randomUUID)(),a=i.connection.onProgress(aj.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(aj.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function d8(t,e,r){try{let n=t.get(kc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof u8&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof u8&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){an.error(t,"Failed to set context items on context providers",n)}}s(d8,"setContextItems");var u_e={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function Q0t(t,e,r){return e.map(i=>{try{if(typeof i=="string")return _c(r.uri,i,u_e);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=_c(r.uri,i.scheme||"",u_e)),"pattern"in i&&(o&&=_c(r.uri,i.pattern||"",u_e)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Q0t,"match");f();var QAr=E.Object({documents:E.Array(E.String()),basename:E.Optional(E.String()),options:E.Optional(E.Object({}))}),Uw=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function UAr(t,e,r){return t.forceSet(Uw,new Uw(r.documents,r.basename||"")),["OK",null]}s(UAr,"handleTestingSetCompletionDocumentsChecked");var U0t=new vt("setCompletionDocuments"),H0t=et(QAr,UAr);function Loe(t,e,r,n){let i=t.get(Uw);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){U0t.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=qAr(i,r);return a&&a.length>0?q0t(a,o,e):void 0}else return U0t.debug(t,"Returning completions for all pre-set documents"),q0t(i.documents,o,e)}}s(Loe,"getTestCompletions");function q0t(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=Doe(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(q0t,"sliceAndMapCompletions");function qAr(t,e){return t.basename===Hi(e)?t.documents||[]:[]}s(qAr,"getFilteredDocs");var W0t=E.Object({doc:E.Object({position:jl,insertSpaces:E.Optional(E.Boolean()),tabSize:E.Optional(E.Number()),uri:KM,version:E.Number()}),contextItems:E.Optional(tCe)}),AU;async function j0t(t,e,r,n){AU&&(AU.cancel(),AU.dispose()),AU=new In.CancellationTokenSource;let i=new Qd([e,AU.token]);r.contextItems&&d8(t,r.contextItems);let o=Loe(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:Ar(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await YA(t,r.doc,i)}catch(p){if(!(p instanceof $0t.ResponseError))throw p;switch(p.code){case er.CopilotNotAvailable:case er.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await Noe(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(Os);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(j0t,"handleGetCompletionsHelper");var G0t=et(W0t,(t,e,r)=>j0t(t,e,r,!1)),V0t=et(W0t,(t,e,r)=>j0t(t,e,r,!0));f();var z0t=Fe(Ub()),f8=Fe(Zc());var HAr=E.Object({doc:E.Object({position:jl,uri:KM,version:E.Number()}),panelId:E.String()});function $Ar(t,e,r,n,i){let o=koe(i.completionText),a=(0,z0t.SHA256)(o).toString();return t.get(Os).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s($Ar,"makeSolution");var f_e=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Pr)}onSolution(e){return this.service.connection.sendNotification(new f8.NotificationType("PanelSolution"),$Ar(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Y0t(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new f8.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Y0t(t,e){return e.connection.sendNotification(new f8.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Y0t,"reportDone");var yU;async function WAr(t,e,r){yU&&(yU.cancel(),yU.dispose()),yU=new In.CancellationTokenSource;let n=new Qd([e,yU.token]),i=r.doc.position,o=hs.range(i,i),a=new f_e(t,r,o),c=t.get(KA);if(c.documents){let l=c.documents;Boe(i,l,a)}else{let l;try{l=await YA(t,r.doc,n)}catch(d){if(!(d instanceof f8.ResponseError))throw d;switch(d.code){case er.CopilotNotAvailable:case er.ContentModified:return jAr(t,r)}throw d}a.offset=l.offsetAt(i);let u=new c8(l,i,n,10);Poe(t,u,a)}return[{solutionCountTarget:10},null]}s(WAr,"handleGetPanelCompletionsChecked");async function jAr(t,e){return await Y0t(e.panelId,t.get(Pr)),[{solutionCountTarget:0},null]}s(jAr,"produceEmptySolutions");var K0t=et(HAr,WAr);f();var GAr=E.Object({});function VAr(t,e,r){return[{version:t.get(Eo).getDisplayVersion(),buildType:Wy(t),runtimeVersion:`node/${process.versions.node}`},null]}s(VAr,"handleGetVersionChecked");var J0t=et(GAr,VAr);f();var zAr=E.Object({changes:E.Array(E.String()),userCommits:E.Array(E.String()),recentCommits:E.Array(E.String()),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String())});async function YAr(t,e,r){if(r.changes.length===0)return[null,{code:er.InvalidRequest,message:"No changes provided"}];let n=t.get(Yi),i=n.create({capabilities:{skills:[A1]}}),o=new kw({message:"",type:"user"});await n.addTurn(i.id,o);let a=i8({workDoneToken:Ar()});await t.get(ca).begin(i,o,a);let u=(await new Fw(t,i,o,e).skillResolver.resolve(A1))?.head?.name,p=await t.get(ek).generateCommitMessage(t,e,r,u);return p==null?[null,{code:er.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:p},null]}s(YAr,"handleGitCommitGenerateChecked");var X0t=et(zAr,YAr);f();var ept=kfe.type,CU;function Z0t(t){return{title:"Completion Accepted",command:VQ,arguments:[t]}}s(Z0t,"makeCommand");async function KAr(t,e,r){CU&&(CU.cancel(),CU.dispose());let n=r.context.triggerKind===1;CU=new In.CancellationTokenSource;let i=CU.token,o=new Qd([e,i]);r.contextItems&&d8(t,r.contextItems,r.data);let a=Loe(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:Z0t(Ar()),...h}))},null];let c=await YA(t,r.textDocument,o),l=r.position,u=await Noe(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:er.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:er.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(Os);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Z0t(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(KAr,"handleChecked");var tpt=et(aJ,(t,e,r)=>KAr(t,e,r));f();var rpt=Bfe.type,vU;async function XAr(t,e,r){vU&&(vU.cancel(),vU.dispose());let n=r.context.triggerKind===1;vU=new In.CancellationTokenSource;let i=vU.token,o=new Qd([e,i]);r.contextItems&&d8(t,r.contextItems);let a=await YA(t,r.textDocument,o),c=await l_e(t,wC(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(XAr,"handleChecked");var npt=et(aJ,(t,e,r)=>XAr(t,e,r));f();f();function p_e(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return p8(i)}s(p_e,"asReadableCert");function p8(t){return t.replace(/\s/g,"")}s(p8,"normalizeNewlines");var eyr=E.Object({});async function tyr(t){return[{certificates:(await t.get(ol).getAllRootCAs()).map(p8)},null]}s(tyr,"handleListCertificatesChecked");var ipt=et(eyr,tyr);f();f();var spt=E.Object({url:E.String(),source:E.String(),id:E.String()}),apt=E.Object({version:E.String(),release_date:E.String(),is_latest:E.Boolean()}),ryr=E.Object({id:E.String(),name:E.String(),description:E.String(),status:E.Optional(E.Union([E.Literal("active"),E.Literal("deprecated")])),repository:E.Optional(spt),version_detail:apt}),Joo=E.Object({servers:E.Array(ryr),next:E.Optional(E.String()),total_count:E.Number()}),opt=E.Union([E.Object({type:E.Literal("positional"),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String())),value_hint:E.Optional(E.String()),is_repeated:E.Optional(E.Boolean())}),E.Object({type:E.Literal("named"),name:E.String(),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String())),is_repeated:E.Optional(E.Boolean())})]),cpt=E.Object({name:E.String(),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String()))}),nyr=E.Object({registry_name:E.String(),name:E.String(),version:E.String(),runtime_hint:E.Optional(E.String()),runtime_arguments:E.Optional(E.Array(opt)),package_arguments:E.Optional(E.Array(opt)),environment_variables:E.Optional(E.Array(cpt))}),iyr=E.Object({transport_type:E.Union([E.Literal("streamable"),E.Literal("sse")]),url:E.String(),headers:E.Optional(E.Array(cpt))}),Xoo=E.Object({id:E.String(),name:E.String(),description:E.String(),status:E.Optional(E.Union([E.Literal("active"),E.Literal("deprecated")])),repository:E.Optional(spt),version_detail:apt,packages:E.Optional(E.Array(nyr)),remotes:E.Optional(E.Array(iyr))}),lpt=E.Object({baseUrl:E.String(),limit:E.Optional(E.Number({minimum:1})),offset:E.Optional(E.Number({minimum:0,default:0}))}),upt=E.Object({baseUrl:E.String(),id:E.String(),version:E.Optional(E.String())});async function oyr(t,e,r){if(!r.baseUrl)return[null,{code:er.InvalidParams,message:"Base URL is required"}];let n=t.get(ln),i=new URLSearchParams;r.limit!==void 0&&i.append("limit",r.limit.toString()),r.offset!==void 0&&i.append("offset",r.offset.toString());let o=`${r.baseUrl}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!a.ok)return[null,{code:er.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:er.InternalError,message:`Failed to fetch servers from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(oyr,"handleListServersChecked");async function syr(t,e,r){if(!r.baseUrl)return[null,{code:er.InvalidParams,message:"Base URL is required"}];if(!r.id)return[null,{code:er.InvalidParams,message:"Server ID is required"}];let n=t.get(ln),i=new URLSearchParams;r.version!==void 0&&i.append("version",r.version);let o=`${r.baseUrl}/${r.id}${i.toString()?`?${i.toString()}`:""}`;try{let a=await n.fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.status===404)return[null,{code:er.InternalError,message:"Server not found"}];if(!a.ok)return[null,{code:er.InternalError,message:`MCP Registry API error: HTTP ${a.status}`}];let c=await a.text();return[JSON.parse(c),null]}catch(a){return[null,{code:er.InternalError,message:`Failed to fetch server from MCP Registry: ${a instanceof Error?a.message:String(a)}`}]}}s(syr,"handleGetServerChecked");var dpt=et(lpt,oyr),fpt=et(upt,syr);f();async function ayr(t,e,r){let n=t.get($A);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Cl(r.textDocument.uri);t.get(pA).onUserPositionChange(i,new Qr(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:VQ,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(ayr,"handleChecked");var ppt=et(dLe,ayr);f();var lyr=E.Object({uuid:E.String({minLength:1}),acceptedLength:E.Optional(E.Number({minimum:1}))});function uyr(t,e,r){let n=t.get(Os),i=n.get(r.uuid);return i&&(dyr(r,i)==="full"?(n.delete(r.uuid),j3(t,i,i.triggerCategory)):FX(t,i,r.acceptedLength,0,i.triggerCategory,"cumulative")),["OK",null]}s(uyr,"notifyAcceptedChecked");function dyr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}s(dyr,"getCompletionType");var mpt=et(lyr,uyr);f();var fyr=E.Object({uuids:E.Array(E.String())});function pyr(t,e,r){let n=t.get(Os),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));MX(t,"ghostText",o.offset,o.uri,a),t.get(Qu).resetState()}return["OK",null]}s(pyr,"notifyRejectedChecked");var hpt=et(fyr,pyr);f();var myr=E.Object({uuid:E.String({minLength:1})});function hyr(t,e,r){let i=t.get(Os).get(r.uuid);return i&&iJ(t,i.triggerCategory,i),["OK",null]}s(hyr,"notifyShownChecked");var gpt=et(myr,hyr);f();var gyr=_Ve;function Ayr(t,e,r){let n=t.get(kc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new u8(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(Ayr,"registerContextProviders");var Apt=et(gyr,Ayr);f();f();var yyr=E.Object({uri:E.Optional(E.String())}),Cyr=E.Object({showEditorCompletions:E.Optional(E.Boolean()),enableAutoCompletions:E.Optional(E.Boolean()),delayCompletions:E.Optional(E.Boolean()),filterCompletions:E.Optional(E.Boolean())}),Cpt=E.Object({github:E.Optional(E.Object({copilot:E.Optional(E.Object({}))})),[_5e]:E.Optional(yyr),http:E.Optional(zqe),telemetry:E.Optional(E.Object({telemetryLevel:E.Optional(E.String())}))}),EU=Object.keys(Cpt.properties).filter(t=>t!=="github"),vyr=E.Intersect([Cpt,Cyr]),Eyr=E.Object({settings:E.Optional(E.Union([E.Object({}),E.Array(E.Unknown(),{maxItems:0})])),authProvider:E.Optional(E.Never())}),ypt=Vs.Compile(Eyr),m_e=Vs.Compile(vyr);async function Foe(t,e){if(!ypt.Check(e))throw Moe(t),new Vu(ypt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;return r&&xyr(t,r),Moe(t,r),Promise.resolve()}s(Foe,"notifyChangeConfiguration");function xyr(t,e){for(let n of m_e.Errors(e)){let i=n.path.split("/")?.[1];Ku.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[i]}if(!m_e.Check(e))throw new Vu(m_e.Errors(e));e.http&&h_e(t,e.http);let r=e["github-enterprise"];r&&_Le(t,r.uri),e.github?.copilot&&byr(t,e.github.copilot)}s(xyr,"applySettingsToConfiguration");function byr(t,e){let r=t.get(Qh),n={};for(let i of Object.values(qt)){let o=Zqe(e,i);n[i]=o}r.setCopilotSettings(n),typeof e.mcp=="string"&&wyr(t,e.mcp),Iyr(t,e.globalCopilotInstructions||""),Tyr(t,e.globalGitCommitInstructions||"")}s(byr,"applyCopilotConfiguration");function Iyr(t,e){try{t.get(JC).setGlobalCopilotInstructions(e)}catch(r){Ku.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(Iyr,"applyGlobalCopilotInstructionsConfiguration");function Tyr(t,e){try{t.get(JC).setGlobalGitCommitInstructions(e)}catch(r){Ku.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(Tyr,"applyGlobalGitCommitInstructionsConfiguration");function h_e(t,e){let r=t.get(Qh);e.proxy===void 0&&(e=Yqe(r.env));try{r.setHttpSettings(yF(e))}catch(n){if(!(n instanceof TypeError))throw n;Ku.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(h_e,"applyHttpConfiguration");async function wyr(t,e){try{let r=JSON.parse(e||"{}");await t.get(Lh).updateMCPServers(r)}catch(r){Ku.error(t,"Failed to apply MCP configuration",r)}}s(wyr,"applyMCPConfiguration");function Moe(t,e){if(t.get(Qh).markReady(),!t.get(ms).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Ad).initialize(r)}}s(Moe,"initializePostConfigurationDependencies");var vpt=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),Syr=E.Object({editorInfo:vpt,editorPluginInfo:vpt,editorConfiguration:E.Optional(E.Object({}))});async function _yr(t,e,r){t.get(pn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Yne(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),await Foe(t,{settings:r.editorConfiguration}),Dt(t,"setEditorInfo");for(let n of["github",...EU])r.editorConfiguration&&n in r.editorConfiguration&&Dt(t,`setEditorInfo.editorConfiguration.${n}`);return["OK",null]}s(_yr,"handleSetEditorInfoChecked");var Ept=et(Syr,_yr);f();var Ryr=E.Object({options:E.Optional(E.Object({}))});async function kyr(t,e,r){let n=t.get(ff),i=n.pendingSignIn?.status;if(i===void 0)return[null,{code:er.InvalidRequest,message:"No pending sign in"}];let o;try{return o=await i,[o,null]}catch(a){return[null,{code:er.DeviceFlowFailed,message:String(a)}]}finally{n.pendingSignIn=void 0}}s(kyr,"handleSignInConfirmChecked");var xpt=et(Ryr,kyr);f();var Pyr=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function Dyr(t,e,r){try{let i=await t.get(io).checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let a=await t.get(ff).initiate(r);return[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Kne,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ga))throw n;return[null,{code:er.DeviceFlowFailed,message:n.message}]}}s(Dyr,"handleSignInInitiateChecked");var g_e=et(Pyr,Dyr);f();var Byr=E.Object({githubToken:E.String({minLength:1}),user:E.String({minLength:1}),githubAppId:E.Optional(E.String({minLength:1}))});async function Nyr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId,a=t.get(io);return[await t.get(ff).save({...a.getConfiguredUrls(),accessToken:n,login:i,githubAppId:o}),null]}s(Nyr,"handleSignInWithGithubTokenChecked");var bpt=et(Byr,Nyr);f();var Lyr=E.Object({options:E.Optional(E.Object({}))});async function Myr(t,e,r){return[await t.get(ff).abandon(),null]}s(Myr,"handleSignOutChecked");var Ipt=et(Lyr,Myr);f();var Fyr=E.Object({transaction:E.Optional(E.String()),stacktrace:E.Optional(E.String()),properties:E.Optional(E.Record(E.String(),E.String())),platform:E.Optional(E.String()),exception_detail:E.Optional(E.Array(E.Object({type:E.Optional(E.String()),value:E.Optional(E.String()),stacktrace:E.Optional(E.Array(E.Object({filename:E.Optional(E.String()),lineno:E.Optional(E.Union([E.String(),E.Integer()])),colno:E.Optional(E.Union([E.String(),E.Integer()])),function:E.Optional(E.String()),in_app:E.Optional(E.Boolean())})))})))}),A_e=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function Oyr(t,e,r){let n=t.get(Eo),i=t.get(pn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&f1.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:Kle(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},f1.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new A_e(r.stacktrace??"N/A",i.name);return c.stack=void 0,Ma(t,c,void 0,o,a),["OK",null]}s(Oyr,"handleTelemetryExceptionChecked");var Tpt=et(Fyr,Oyr);f();f();function wpt(t={}){return{accessToken:Ar(),login:"test login",...t,...Yf(t)}}s(wpt,"testGitHubSession");var Ooe=class extends io{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}},m8=class extends io{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};f();function Qyr(t){let e=Date.now()+((t?.refresh_in??0)+Aj)*1e3;return new v_({token:`test token ${Ar()}`,refresh_in:0,expires_at:e,...t},void 0)}s(Qyr,"createTestCopilotToken");var y_e=class extends qr{constructor(r,n){super(r);this.session=n;this.primed=!0}static{s(this,"CopilotTokenManagerFromStaticGitHubSession")}getGitHubSession(){return Promise.resolve(this.session)}};var qw=class extends y_e{constructor(r,n,i=Promise.resolve(wpt())){super(r,i);this.envelopeFn=n}static{s(this,"FakeCopilotTokenManager")}async fetchCopilotToken(){return Qyr(await this.envelopeFn())}};var Uyr=E.Object({options:E.Optional(E.Object({}))});async function qyr(t,e,r){let n=new qw(t,()=>Promise.resolve({token:"tid=valid-copilot-token"}));return t.forceSet(io,new m8(t,"",n)),t.get(qr).resetToken(),t.get(Io).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(qyr,"handleTestingAlwaysAuthChecked");var Spt=et(Uyr,qyr);f();var Hyr=E.Object({messages:E.Array(E.Object({role:E.Enum(sl),content:E.String(),name:E.Optional(E.String())})),modelFamily:E.Optional(E.Enum(Jr)),stop:E.Optional(E.Array(E.String())),conversationOptions:E.Optional(E.Object({maxResponseTokens:E.Optional(E.Number()),temperature:E.Optional(E.Number())}))});async function $yr(t,e,r){let n=new Wa(t),i=await t.get(ja).getBestChatModelConfig([r.modelFamily??Jr.CopilotBase]),o=await ZF(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:S0.user("test",Ar())},e,o),null]}s($yr,"handleChatMLChecked");var _pt=et(Hyr,$yr);f();f();f();var C8=Fe(Dmt(),1),yuo={ALPN_HTTP2:C8.default.ALPN_HTTP2,ALPN_HTTP2C:C8.default.ALPN_HTTP2C,ALPN_HTTP1_1:C8.default.ALPN_HTTP1_1,ALPN_HTTP1_0:C8.default.ALPN_HTTP1_0},{fetch:Cuo,context:Bmt,reset:vuo,noCache:Euo,h1:xuo,keepAlive:buo,h1NoCache:Iuo,keepAliveNoCache:Tuo,cacheStats:wuo,clearCache:Suo,offPush:_uo,onPush:Ruo,createUrl:kuo,timeoutSignal:Puo,Body:Duo,Headers:Nmt,Request:Buo,Response:Nuo,AbortController:Luo,AbortError:tse,AbortSignal:Muo,FetchBaseError:Fuo,FetchError:Ouo,ALPN_HTTP2:Quo,ALPN_HTTP2C:Uuo,ALPN_HTTP1_1:quo,ALPN_HTTP1_0:Huo}=C8.default;var Mmt=require("crypto"),Fmt=require("http"),Omt=require("stream"),Qmt=require("util"),E8=Fe(iA());var dvr=9e4,fvr=new E8.ProtocolRequestType("copilot/fetch"),pvr=new E8.ProtocolRequestType("copilot/fetchCancel"),mvr=new E8.ProgressType,hvr=new E8.ProtocolRequestType("copilot/fetchDisconnectAll"),w1=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},v8=class extends ln{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(Eo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Pr).connection.sendRequest(hvr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(Pr).connection,a=(0,Mmt.randomUUID)(),c=new In.CancellationTokenSource,l=new Omt.PassThrough,u=s(()=>{o.sendRequest(pvr,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{l.emit("error",new tse("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new w1("EditorFetcher received unexpected abort signal");if(i.aborted)throw new tse("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(mvr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&l.emit("error",new w1(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new w1("Request timed out from lsp server"))},n.timeout??dvr),A=s(()=>{h(new tse("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",A),o.sendRequest(fvr,Avr(r,a,n),c.token).then(m).catch(y=>{let x="EditorFetcher request failed";y&&typeof y=="object"&&"message"in y&&(x+=`: ${String(y.message)}`),y&&typeof y=="object"&&"data"in y&&(x+=`: ${(0,Qmt.inspect)(y.data)}`),h(new w1(x))}).finally(()=>{i?.removeEventListener("abort",A),clearTimeout(g)})});if(!p.status)throw new w1("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new aI(p.status,Fmt.STATUS_CODES[p.status]??"",new Nmt(p.headers),()=>gvr(l),()=>l)}};function gvr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(gvr,"consumeStream");function Avr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(Avr,"convertOptionsToParams");var yvr=E.Object({url:E.String(),headers:E.Optional(E.Record(E.String(),E.String())),body:E.Optional(E.String()),timeout:E.Optional(E.Number()),method:E.Optional(E.Union([E.Literal("GET"),E.Literal("POST"),E.Literal("DELETE")])),cancelBeforeRequest:E.Optional(E.Boolean()),cancelAfterRequest:E.Optional(E.Boolean()),cancelAfterFirstChunk:E.Optional(E.Boolean())});async function Cvr(t,e,r){let n=new v8(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...d}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...d});l&&i.abort();let m;try{m=await p}catch(A){return[{error:`Fetch stream error: ${A instanceof w1?A.message:String(A)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let y=m.body();for await(let x of y){let I=x.toString();return i.abort(),[{status:h,headers:g,body:I},null]}}let A=await m.text();return[{status:h,headers:g,body:A},null]}catch(A){return[{error:`Fetch stream error: ${A instanceof w1?A.message:String(A)}`},null]}}s(Cvr,"handleTestingFetchChecked");var Umt=et(yvr,Cvr);f();var vvr=E.Object({});async function Evr(t,e,r){return await t.get(Hc).flush(),["OK",null]}s(Evr,"handleTestingFlushPromiseQueueChecked");var qmt=et(vvr,Evr);f();var xvr=E.Object({filePath:E.String(),code:E.String(),offset:E.Number(),languageId:E.String(),timeout:E.Optional(E.Number()),waitForContext:E.Optional(E.Boolean())});async function bvr(t,e,r){try{await t.get(l1).start();let n=t.get(Ik),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,sJ,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(bvr,"handleTestingGetContextChecked");var Hmt=et(xvr,bvr);f();var Ivr=E.Object({uri:E.String()});async function Tvr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(Tvr,"handleGetDocumentChecked");var $mt=et(Ivr,Tvr);f();var wvr=E.Object({options:E.Optional(E.Object({}))});async function Svr(t,e,r){t.forceSet(io,new Ooe(t)),t.get(qr).resetToken();try{await t.get(qr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(Svr,"handleTestingNeverAuthChecked");var Wmt=et(wvr,Svr);f();f();f();var V_e=class extends ol{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},jmt=s(t=>new V_e(t),"createTestCertificateReader");function Y_e(t,e,r){let n=new z_e;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new aI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Y_e,"createFakeResponse");function Gmt(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Y_e(t,n,Object.assign({"content-type":"application/json"},r))}s(Gmt,"createFakeJsonResponse");var RU=class extends ln{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var rse=class extends RU{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var z_e=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var K_e=class extends RU{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Gmt(200,this.fullConfig)):Promise.resolve(Y_e(404,""))}},nse=class extends K_e{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var _vr=E.Object({expFlags:E.Record(E.String(),E.Union([E.String(),E.Number(),E.Boolean()]))});function Rvr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(ln,new nse(n,t.get(ln)))}return["OK",null]}s(Rvr,"handleTestingOverrideExpFlagsChecked");var Vmt=et(_vr,Rvr);f();var kvr=E.Object({rules:qye});function Pvr(t,e,r){return t.get(el).setTestingRules(r.rules),["OK",null]}s(Pvr,"handleTestingSetContentExclusionRulesChecked");var zmt=et(kvr,Pvr);f();var Dvr=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),chunks:E.Array(E.String()),followUp:E.Optional(E.String()),suggestedTitle:E.Optional(E.String()),skills:E.Optional(E.Array(E.String())),references:E.Optional(E.Array(n8)),options:E.Optional(E.Object({}))});function Bvr(t,e,r){return t.get(sx).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(Bvr,"handleTestingSetSyntheticTurnsChecked");var Ymt=et(Dvr,Bvr);f();var Nvr=E.Object({});async function Lvr(t,e,r){let n=t.get(za),i=t.get(qc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(Lvr,"handleTriggerShowMessageChecked");var Kmt=et(Nvr,Lvr);f();f();f();f();var Jmt=Fe(require("tls"));var ise=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(ol)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=Jmt.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var x8=class extends ln{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new ise(r),this.proxySocketFactory=r.get(YC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(xc).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(xc).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(Eo),o=this.proxySocketTimeoutForTesting;return Bmt({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new ZM(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new aI(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var kU=require("fs"),Xmt=require("path");var b8=class extends Ni{static{s(this,"LocalFileSystem")}async readFileString(e){return(await kU.promises.readFile(Ya(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(Ya(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=Ya(e),n=await kU.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,Xmt.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await kU.promises.lstat(e);if(r.isSymbolicLink())try{let n=await kU.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};f();var ose=class extends zA{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var sse=class extends ll{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();var ase=class extends Rp{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};f();function Mvr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(Mvr,"fakeChatModelConfiguration");function Fvr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(Fvr,"fakeEmbeddingModelConfiguration");var cse=class extends ja{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(Mvr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(Fvr(e))}};f();var lse=class extends _u{constructor(){super(...arguments);this.openedUrls=[];this.opened=new uh}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},use=class extends za{constructor(){super();this.sentMessages=[];this.warningPromises=[];this.informationPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}showInformationMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.informationPromises.push(i),i}async waitForMessages(){await Promise.all(this.warningPromises),await Promise.all(this.informationPromises)}};f();function Zmt(t,e,r,n){return Xv.create(hj(t),e,r,n,e)}s(Zmt,"createTextDocument");var J_e=class extends Cr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new Ua;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new Ua;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new Ua;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new Ua;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Hi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=Zmt(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=Zmt(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},dse=class extends J_e{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var X_e=class extends qc{static{s(this,"NullLog")}logIt(...e){}};function Ovr(t){let e=new p3;return e.set(xc,t),e.set(w2,t),e.set(Eo,new Eo),e.set(ym,new ym({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(ol,jmt([])),e.set(YC,vte(e)),e.set(Gy,new Gy),e.set(jg,new xj),e.set(Hg,new Hg),e.set(By,new By),e.set(Eu,new Eu(e,"tid=test",!0)),e.set(Su,new Su),e.set(za,new use),e.set(_u,new lse),e.set(Py,new V3),e.set(qc,new X_e),e.set(Yd,new Yd),e.set(Ss,new Ss("test-session","test-machine")),e.set(Kd,new yN(e)),e.set(Ad,new Ad(e,"copilot-test")),e.set(Nt,new Nt(e)),e.set(lA,new lA),e.set(tA,new OD),e.set(qr,new qw(e,()=>Promise.resolve({token:"tid=test"}))),e.set(Io,new Ej),e.set(Hc,new Hc),e.set(CC,new CC(e)),e.set(Rp,new ase),e.set(mA,new mA(e)),e.set(dE,SX(e)),e.set(Qu,new Qu),e.set(m0,new m0),e.set(fE,fE.default),e.set(Up,new Up),e.set(jm,new jm(e,!1)),e.set(Gl,new Gl),e.set(vn,new vn(e)),e.set(pf,new bK),e.set(tl,new tl),e.set(kc,uJ(e,(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(d0,new d0(e)),Qvr(e),e.set(l0,new l0(e)),e.set(ms,new ms),e.set(IC,new qN),e.set(dh,new dh),e.set(_0,new _0),e.set(n1,new n1(e)),e}s(Ovr,"_createBaselineContext");function Qvr(t){t.set(Yi,new Yi(t)),t.set(ca,new ca(t)),t.set(Yu,new Yu(t)),t.set(kl,new kl),t.set(du,new du),t.set(ll,new sse),t.set($h,new $h(t,[])),t.set(ja,new cse),t.set(zA,new ose),t.set(h1,new h1(t)),t.set(Pw,new Pw),t.set(lc,new lc(t)),t.set(zu,new zu),t.set(Yp,new Yp)}s(Qvr,"registerConversation");function eht(){let t=Ovr(new w2(new QD,new Map));return t.set(ln,new rse),t.set(pn,new Z_e),t.set(Cr,new dse(t)),t.set(Ni,new b8),t.set(el,new el(t)),t.set(cl,new cl(t)),t.set(ju,new qte(t)),t.set(ah,new ah(t)),t.set(EC,new T3),t.set(DA,new mre),Pne(t),t}s(eht,"createLibTestingContext");var Z_e=class extends pn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var rht=Fe(require("fs"));var tht=`${process.env.HOME}/.copilot-testing-gh-token`,fse,pse;function nht(t){let e=iht(),r=new qw(t,Uvr,e);return t.forceSet(qr,r),r}s(nht,"setIntegrationTokenManager");var Uvr=s(async()=>{if(pse)return pse;let t=await iht(),e=eht(),r=new x8(e);return e.forceSet(ln,r),pse=yj(e,t).then(n=>{if(n.kind==="success")return{token:n.copilotToken.token,refresh_in:n.copilotToken.envelope.refresh_in};throw new ga('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),pse},"getEnvelope");async function iht(){let t=Wfe(process.env);if(t)return t;try{fse??=(await rht.promises.readFile(tht)).toString().trim()}catch{fse??=process.env.GITHUB_TOKEN??""}if(!fse)throw new Error(`Tests: either GH_COPILOT_TOKEN, GITHUB_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${tht}. Run "npm run get_token" to get one.`);return{...Yf({}),accessToken:fse,login:"copilot-client tests"}}s(iht,"getTestingGitHubSession");var qvr=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function Hvr(t,e,r){return nht(t),t.forceSet(io,new m8(t,r.githubAppId)),await t.get(qr).primeToken(),["OK",null]}s(Hvr,"handleTestingUseTestingTokenChecked");var oht=et(qvr,Hvr);f();var $vr=E.Object({});async function Wvr(t,e,r){return await new jN().uninstall(t),["OK",null]}s(Wvr,"handleUninstallChecked");var sht=et($vr,Wvr);f();var jvr=RVe;function Gvr(t,e,r){let n=t.get(kc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(Gvr,"unregisterContextProviders");var aht=et(jvr,Gvr);f();var e2e=Fe(require("os"));var Vvr=E.Object({expectedCertificate:E.String()});async function zvr(t,e,r){let i=(await Cte(t).getAllRootCAs()).map(p8),o=p8(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${p_e(o)}. Only found those installed on the system:${e2e.EOL}${i.map(a=>"- "+p_e(a)).join(e2e.EOL)}`},null]}s(zvr,"handleVerifyCertificateChecked");var cht=et(Vvr,zvr);f();var Yvr=E.Object({});async function Kvr(){return[{status:!!await new $7().load()},null]}s(Kvr,"handleVerifyKerberosChecked");var lht=et(Yvr,Kvr);f();var Jvr=E.Object({source:E.String(),version:E.Number(),uri:E.String()});async function Xvr(t,e,r){let i=await t.get(Cr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(Xvr,"handleVerifyStateChecked");var uht=et(Jvr,Xvr);f();var Zvr=E.Object({});function eEr(t,e,r){return[t.get(Cr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(eEr,"handleVerifyWorkspaceStateChecked");var dht=et(Zvr,eEr);var Uk=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function fht(){let t=new Map;return t.set(ept.method,tpt),t.set(rpt.method,npt),t.set("getCompletions",G0t),t.set("getCompletionsCycling",V0t),t.set("getPanelCompletions",K0t),t.set(R0t.method,k0t),t.set("getVersion",J0t),t.set("setEditorInfo",Ept),t.set("checkStatus",Lut),t.set("checkQuota",Nut),t.set("checkFileStatus",Dut),t.set("signInInitiate",g_e),t.set("signIn",g_e),t.set("signInConfirm",xpt),t.set("signInWithGithubToken",bpt),t.set("signOut",Ipt),t.set("notifyShown",gpt),t.set("notifyAccepted",mpt),t.set("notifyRejected",hpt),t.set("telemetry/exception",Tpt),t.set("textDocument/copilotInlineEdit",ppt),t.set("testing/overrideExpFlags",Vmt),t.set("testing/alwaysAuth",Spt),t.set("testing/neverAuth",Wmt),t.set("testing/useTestingToken",oht),t.set("testing/setCompletionDocuments",H0t),t.set("testing/setPanelCompletionDocuments",S0t),t.set("testing/triggerShowMessageRequest",Kmt),t.set("testing/flushPromiseQueue",qmt),t.set("testing/getDocument",$mt),t.set("testing/chatml",_pt),t.set("testing/setSyntheticTurns",Ymt),t.set("testing/fetch",Umt),t.set("testing/setContentExclusionRules",zmt),t.set("testing/setCopilotEditsResponse",h0t),t.set("testing/getContext",Hmt),t.set("uninstall",sht),t.set("debug/diagnostics",L0t),t.set("debug/listCertificates",ipt),t.set("debug/verifyState",uht),t.set("debug/verifyCertificate",cht),t.set("debug/verifyKerberos",lht),t.set("debug/verifyWorkspaceState",dht),t.set("context/registerProviders",Apt),t.set("context/unregisterProviders",aht),t.set("conversation/preconditions",a0t),t.set("conversation/persistence",s0t),t.set("conversation/create",n0t),t.set("conversation/turn",d0t),t.set("conversation/turnDelete",f0t),t.set("conversation/destroy",i0t),t.set("conversation/rating",c0t),t.set("conversation/copyCode",Uft),t.set("conversation/insertCode",qft),t.set("conversation/templates",u0t),t.set("conversation/agents",Qft),t.set("conversation/registerTools",l0t),t.set("conversation/notifyCodeAcceptance",o0t),t.set("copilot/models",x0t),t.set("copilot/byok/saveModel",Put),t.set("copilot/byok/deleteModel",Sut),t.set("copilot/byok/listModels",Rut),t.set("copilot/byok/saveApiKey",kut),t.set("copilot/byok/deleteApiKey",wut),t.set("copilot/byok/listApiKeys",_ut),t.set("copilot/setModelPolicy",b0t),t.set("copilot/codeReview",p0t),t.set("copilot/codeReview/reviewChanges",m0t),t.set("git/commitGenerate",X0t),t.set("editConversation/create",g0t),t.set("editConversation/turn",y0t),t.set("editConversation/turnDelete",C0t),t.set("editConversation/destroy",A0t),t.set("mcp/getTools",v0t),t.set("mcp/updateToolsStatus",E0t),t.set("mcp/registry/listServers",dpt),t.set("mcp/registry/getServer",fpt),new Uk(t)}s(fht,"getAllMethods");f();f();f();var pht=Fe(iA());var S1=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new pht.NotificationType(this.name)}};var tEr=new vt("agentCopilotTokenManager");function r2e(t){try{let e=new URL(t||"https://api.github.com");if(e.protocol==="https:"&&e.hostname.startsWith("api."))return`${e.origin}/`}catch{}}s(r2e,"tokenEndpointToApiUrl");function rEr(t,e){if(!e.tokenEndpoint)return Yf(e);let r=r2e(e.tokenEndpoint);return r||tEr.warn(t,`Invalid token endpoint URL <${e.tokenEndpoint}>`),Yf({apiUrl:r})}s(rEr,"getUrlsFromParams");var t2e=class extends S1{constructor(){super(...arguments);this.name=wfe.method;this.params=Z8e}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(io),i=rEr(this.ctx,r);this.ctx.get(Kd).setConfiguredUrls(this.ctx,i);let o=r.handle||r.login;o&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:o,githubAppId:r.githubAppId,...i}):n.setTransientSession({githubAppId:r.githubAppId,...i})}},mht=[t2e];f();var n2e=class extends S1{constructor(){super(...arguments);this.name=Pfe.method;this.params=aLe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(Os).get(n);o&&qYe(this.ctx,o)}},i2e=class extends S1{constructor(){super(...arguments);this.name=Nfe.method;this.params=fLe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get($A).handleShown(n)}},o2e=class extends S1{constructor(){super(...arguments);this.name=Dfe.method;this.params=cLe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(Os),a=o.get(n);a&&(i>=a.insertText.length?(o.delete(n),j3(this.ctx,a)):FX(this.ctx,a,i,void 0,void 0,"cumulative"))}},hht=[n2e,i2e,o2e];f();var mse=class extends S1{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=E.Object({token:E.Union([E.String(),E.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(wf).cancel(r.token)}};var nEr=[...mht,...hht,mse];function ght(t,e){for(let r of nEr){let n=new r(t),i=Vs.Compile(n.params);e.onNotification(n.type,Wl(t,async o=>{ZE(o),i.Check(o)?await n.handle(o):Ku.error(t,`Notification ${n.name}:`,new Vu(i.Errors(o)))},`Notification ${n.name}`))}}s(ght,"registerNotifications");f();var hse=Fe(Zc());var Aht=new vt("AgentTextDocumentConfiguration"),s2e=class{constructor(e){this.ctx=e;this.#e=new Ua;this.onDidChange=this.#e.event}static{s(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,i){try{return Xv.create(e,r,n,i)}catch(o){throw Aht.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(hse.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.#e.fire(o),Xv.withChanges(e,r,n)}catch(i){throw Aht.exception(this.ctx,i,".update"),i}}},Ww=class extends Cr{constructor(){super(...arguments);this.#e=new Ua;this.onDidOpenTextDocument=this.#e.event;this.#t=new Ua;this.onDidCloseTextDocument=this.#t.event;this.#i=new Ua;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new s2e(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new hse.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[]}static{s(this,"AgentTextDocumentManager")}#e;#t;#i;get connection(){return this.ctx.get(Pr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Cl(i.uri),o),this.#e.fire({document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=Cl(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=Cl(n.textDocument.uri);this._documents.delete(i),this.#t.fire({document:{uri:i}})}),this.connection.onNotification(Rfe.type,n=>{let i=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in i?{document:i}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Cl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var yht=Vs.Compile(iLe);function ZE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=ZE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=ZE(e[r])}return t}}s(ZE,"purgeNulls");var Cht=["github.copilot",...EU],Pr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.deactivated=!1;this.handleDidChangeConfiguration=s(async e=>{try{if(this.#t?.workspace?.configuration&&e&&typeof e=="object"&&!("settings"in e)){let n=await this.connection.workspace.getConfiguration(Cht.map(o=>({section:o}))),i={github:{copilot:n.shift()}};for(let o of EU)i[o]=n.shift();e.settings=i}return Foe(this.ctx,ZE(e))}catch(r){Ku.exception(this.ctx,r,"didChangeConfiguration")}},"handleDidChangeConfiguration");this.#i=this.ctx.get(qc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),ght(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(Eo).getDisplayVersion(),nodeVersion:process.versions.node};function i(a){try{e.get(Ww).didChangeWorkspaceFolders(a),e.get(Up).emit(a)}catch(c){Ku.exception(e,c,"didChangeWorkspaceFolders")}}s(i,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:a,uri:c})=>i({added:[{uri:c,name:a??c}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:a,uri:c})=>i({added:[],removed:[{uri:c,name:a??c}]})),r.onInitialize(a=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=a.capabilities;let c=a.capabilities.copilot,l=ZE(a.initializationOptions);if(l){if(!yht.Check(l))throw new Vu(yht.Errors(l));let m=l,h=e.get(pn);m.editorPluginInfo?h.setEditorAndPluginInfo({version:"unknown",...m.editorPluginInfo},m.editorInfo&&{version:"unknown",...m.editorInfo},m.relatedPluginInfo??[]):Ku.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),m.copilotIntegrationId&&h.setCopilotIntegrationId(m.copilotIntegrationId),m.githubAppId&&(e.get(Gl).githubAppId=m.githubAppId),m.copilotCapabilities&&(c=m.copilotCapabilities)}let u=a.capabilities.workspace?.workspaceFolders??!1;e.get(Ww).init(a.workspaceFolders??[]),Rze(this.ctx),e.get(Up).emit({added:a.workspaceFolders??[],removed:[]}),c&&(e.get(ms).setCapabilities(c),"openURL"in c&&Yne(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let p=s(async()=>{this.initialized||(this.initialized=!0,Ku.info(e,`${n.name} ${n.version} initialized`),e.get(qr).primeToken(),u&&r.workspace.onDidChangeWorkspaceFolders(i),a.capabilities.workspace?.didChangeConfiguration?.dynamicRegistration&&await r.client.register(Jp.DidChangeConfigurationNotification.type,{section:Cht}),a.capabilities.workspace?.configuration?await this.handleDidChangeConfiguration({}):await Promise.race([this.ctx.get(Qh).requireReady().then(()=>!0),new Promise(g=>setTimeout(()=>g(!1),200))])||Moe(e),!this.deactivated&&new jN().startup(e).catch(()=>{}))},"onInitialized");return r.onInitialized(Wl(e,p,"onInitialized")),e.get(m1).init(),c?.token&&e.get(io).setTransientSession({}),c?.redirectedTelemetry&&Tut(e),vht.lt(process.versions.node,"20.8.0")&&Ku.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Jp.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:u,changeNotifications:u}},executeCommandProvider:{commands:Eut(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(a=>void this.handleDidChangeConfiguration(a)),r.listen();let o=new Xne;this.ctx.forceSet(qc,o)}async messageHandler(e,r,n){let i=this.ctx.get(Uk).handlers.get(e);if(!i)return new Jp.ResponseError(er.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Jp.ResponseError(er.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Jp.ResponseError(er.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!but(this.ctx.get(pn)))throw new Jp.ResponseError(er.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),ZE(r);try{let[o,a]=await i(this.ctx,n,r);return a?new Jp.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new Jp.ResponseError(er.RequestCancelled,"Request was canceled");if(o instanceof ga)return new Jp.ResponseError(er.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof Jp.ResponseError||Ku.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(jA).dispose()}catch(e){Ku.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(qc,this.#i),await(this.#e??=this.deactivate())}markDeactivated(){this.deactivated=!0,this.ctx.get(Qh).markReady()}async deactivate(){let e=this.ctx;this.markDeactivated(),d1e(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Hc).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Su).deactivate()])}dispose(){this.markDeactivated(),this.connection.dispose()}},Ku=new vt("lsp");var gse=class t extends fR{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Pr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),wl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){wl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(ms).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return wl.debug(this.context,"`copilot/related` not supported"),Pze;try{let a=await this.service.connection.sendRequest(Lfe.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){wl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Dt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){wl.exception(r,o,"copilotRelated")}}};f();f();f();var Ase=new vt("OAuth Code Flow");function a2e(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(a2e,"arrayEquals");function Eht(t){return t===qk.providerId?{client_id:sp,client_secret:eHe}:null}s(Eht,"getClientInfoFromAuthServer");var c2e=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var qk=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{s(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,i=e?.sort()||[];return i.length?n.filter(a=>a2e([...a.scopes].sort(),i)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(Li).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),i=await this._sessionsPromise,o=await this.tokenToSession(r,e);this.afterSessionLoad(o);let a=i.findIndex(l=>l.account.id===o.account.id&&a2e([...l.scopes].sort(),n)),c=new Array;return a>-1?c.push(...i.splice(a,1,o)):i.push(o),await this.storeSessions(i),o}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(Li).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((i,o)=>i+=o.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get(ln).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(i){return Ase.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}if(n.ok)try{let i=await n.json();return{id:`${i.id}`,accountName:i.login}}catch(i){return Ase.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}else{let i=n.statusText;try{let o=await n.json();o.message&&(i=o.message)}catch{}return Ase.error(this.ctx,"Failed to fetch user info: ",i),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(i=>i.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:i}=await this.getUserInfo(r);return!n||!i}};var yse=class extends WA{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{s(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(i=>i===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===qk.providerId){let n=new qk(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,i,o=!1){let a=this._authenticationProviders.get(r);if(a){if(i?.authorizationServer){let c=i.authorizationServer;if(!a.authorizationServers?.some(l=>l===c))throw new Error(`The authorization server '${c}' is not supported by the authentication provider '${r}'.`)}return await a.getSessions(n,{...i})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};f();var xht=Fe(Zc());var l2e=new vt("agentCopilotTokenManager"),iEr={type:new xht.ProtocolRequestType("copilot/token")},PU=class extends n9{static{s(this,"AgentCopilotTokenManager")}async fetchCopilotToken(e){let r=this.ctx;if(!r.get(ms).getCapabilities().token)return super.fetchCopilotToken(e);let n=r.get(Pr).connection;try{this.didChangeToken??=n.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let i=await n.sendRequest(iEr.type,{force:!1,session:e});if(!i?.envelope)throw l2e.debug(r,"Envelope missing from copilot/token response"),new Wg({reason:"NotSignedIn",message:"Editor did not return a token"});let{envelope:o,tokenEndpoint:a}=i;if(l2e.debug(r,"Retrieved envelope from copilot/token"),o.expires_at*1e3<Date.now())throw new ga("Expired token in copilot/token response");a!==void 0&&r2e(a)!==e.apiUrl&&l2e.exception(r,new Error(`Token endpoint ${a} does not match API URL ${e.apiUrl}`),".fetchCopilotToken");let c=new v_(o,void 0);return XM(r,c),c}catch(i){throw i instanceof Error?new ga(i.message,i):i}}};f();var oEr=new vt("Public Code References"),Cse=class extends pf{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");oEr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(ms).getCapabilities().ipCodeCitation===!0&&await e.get(Pr).connection.sendNotification(Sfe.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function bht(t){sEr(t)}s(bht,"activateExtensibilityPlatformFeature");function sEr(t){t.set(zA,new foe(t)),t.set(h1,new h1(t))}s(sEr,"registerContextDependencies");f();var Iht=E.String(),u2e=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Ese,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Ese="build-logs",vse=class extends lu{static{s(this,"BuildLogsSkill")}constructor(e){super(Ese,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new u2e(r))}};f();var d2e=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await goe(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Qt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Qt([o]),1]);return new Qt(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},f2e=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},aEr="directory-references",xse=class{constructor(){this.id=aEr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new f2e}processor(e){return new d2e(e)}};f();var cEr=E.Object({uri:E.String(),visibleRange:E.Optional(bc),openedAt:E.Optional(E.String()),activeAt:E.Optional(E.String())}),Tht=E.Object({files:E.Array(cEr)}),lEr=3,p2e=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=Bw(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(vn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=ea(a);if(await this.turnContext.collectFile(Ise,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===lEr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(vn).getRelativePath(n),a=new g1(n,void 0,i.visibleRange);return new Qt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Qt([n])}},Ise="recent-files",bse=class extends lu{static{s(this,"RecentFilesSkill")}constructor(e){super(Ise,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new p2e(r))}};f();var wht=E.String(),m2e=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(wse,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},wse="runtime-logs",Tse=class extends lu{static{s(this,"RuntimeLogsSkill")}constructor(e){super(wse,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new m2e(r))}};f();var Sse=Fe(iA());var _se=class extends ll{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return U$(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Pr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new Sse.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new Sse.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new Sse.NotificationType("conversation/documentDiff"),r)}};f();var Sht=Fe(Zc());var DU=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get($h).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Pr).connection.sendNotification(new Sht.NotificationType(this.notificationEndpoint),e)}};function _ht(t){uEr(t),dEr(t),bht(t)}s(_ht,"activateConversationFeature");function uEr(t){t.set(Yi,new Yi(t)),t.set(du,new du),t.set(Yu,new Yu(t)),t.set(ja,new Qte(t)),t.set(sx,new sx),t.set(ca,new ca(t)),t.set($h,new $h(t)),t.set(DU,new DU(t)),t.set(af,new uz(t,new lz(t))),t.set(ax,new ax),t.set(Pw,new Pw),t.set(ll,new _se(t)),t.set(lc,new lc(t)),t.set(zu,new zu),t.set(Yp,new Yp)}s(uEr,"registerContextDependencies");function dEr(t){let e=new kl;e.registerSkill(new yie(new Aie(t))),e.registerSkill(new Wie(new Tf(t,x1,_ft))),e.registerSkill(new vie(new Tf(t,GA,vdt))),e.registerSkill(new rie(new Tf(t,Md,Hut))),e.registerSkill(new jie),e.registerSkill(new xse),e.registerSkill(new bse(new Tf(t,Ise,Tht))),e.registerSkill(new nie(new Tf(t,A1,Wut))),e.registerSkill(new xie(new Tf(t,Nw,kdt))),e.registerSkill(new Tse(new Tf(t,wse,wht))),e.registerSkill(new vse(new Tf(t,Ese,Iht))),e.registerSkill(new Iie(new Tf(t,VA,Pdt))),e.registerSkill(new Tie(new Tf(t,Sk,Bdt))),t.set(kl,e)}s(dEr,"registerSkills");f();var Rht=Fe(ui());var Rse=class extends ju{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(Pr).connection.sendProgress(new Rht.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var kht=Fe(Zc()),Pht=Fe(iA());var kse=class extends KC{constructor(){super(...arguments);this.requestType=new kht.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Vs.Compile(eut)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(Pr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Pht.ResponseError(l.code,l.message,l.data);throw Xr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Vu(this.typeCheck.Errors(o));return o}};f();var Dht=Fe(Zc()),Bht=Fe(iA());var Pse=class extends ew{constructor(){super(...arguments);this.requestType=new Dht.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Vs.Compile(Zlt)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(Pr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Bht.ResponseError(l.code,l.message,l.data);throw Xr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Vu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new _i(i.value):new Ek(i.value));return new po(n,r.status??"success")}};f();f();function Nht(t,e,r){try{let n=t.get(Nt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return an.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(Nht,"fillInJavaActiveExperiments");var h2e=Fe(iA());var fEr={type:new h2e.NotificationType("featureFlagsNotification")},pEr={type:new h2e.NotificationType("copilot/didChangeFeatureFlags")},BU=class{constructor(e){this.ctx=e;ws(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Nt).updateExPValuesAndAssignments(),o={};r.get(Nt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=oCe(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;CVe(r,a,c,i),oJ(r,c,i),Nht(r,c,i);for(let[d,p]of c.entries())o[d]=p;let l=r.get(ms),u=r.get(Pr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(pEr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let d={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(d.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(d.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(d.xc=!0),await u.sendNotification(fEr.type,d)}}};f();var Dse=class extends Io{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(Pr).connection.sendNotification(Mfe.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(Pr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var Lht=new b8;f();f();f();var Ri=new vt("CopilotMCP");async function g2e(t,e){await t.get(DA).notifyLog(e)}s(g2e,"notifyMCPRuntimeLog");async function _1(t,e){await g2e(t,{...e,level:"error"})}s(_1,"notifyMCPRuntimeError");async function Hk(t,e){await g2e(t,{...e,level:"warning"})}s(Hk,"notifyMCPRuntimeWarning");async function fu(t,e){await g2e(t,{...e,level:"info"})}s(fu,"notifyMCPRuntimeInfo");f();f();var Po;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Po||(Po={}));var y2e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(y2e||(y2e={}));var Tr=Po.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),px=s(t=>{switch(typeof t){case"undefined":return Tr.undefined;case"string":return Tr.string;case"number":return isNaN(t)?Tr.nan:Tr.number;case"boolean":return Tr.boolean;case"function":return Tr.function;case"bigint":return Tr.bigint;case"symbol":return Tr.symbol;case"object":return Array.isArray(t)?Tr.array:t===null?Tr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Tr.promise:typeof Map<"u"&&t instanceof Map?Tr.map:typeof Set<"u"&&t instanceof Set?Tr.set:typeof Date<"u"&&t instanceof Date?Tr.date:Tr.object;default:return Tr.unknown}},"getParsedType"),Ft=Po.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),mEr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),Xp=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Po.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Xp.create=t=>new Xp(t);var w8=s((t,e)=>{let r;switch(t.code){case Ft.invalid_type:t.received===Tr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ft.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Po.jsonStringifyReplacer)}`;break;case Ft.unrecognized_keys:r=`Unrecognized key(s) in object: ${Po.joinValues(t.keys,", ")}`;break;case Ft.invalid_union:r="Invalid input";break;case Ft.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Po.joinValues(t.options)}`;break;case Ft.invalid_enum_value:r=`Invalid enum value. Expected ${Po.joinValues(t.options)}, received '${t.received}'`;break;case Ft.invalid_arguments:r="Invalid function arguments";break;case Ft.invalid_return_type:r="Invalid function return type";break;case Ft.invalid_date:r="Invalid date";break;case Ft.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Po.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ft.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ft.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ft.custom:r="Invalid input";break;case Ft.invalid_intersection_types:r="Intersection results could not be merged";break;case Ft.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ft.not_finite:r="Number must be finite";break;default:r=e.defaultError,Po.assertNever(t)}return{message:r}},"errorMap"),Qht=w8;function hEr(t){Qht=t}s(hEr,"setErrorMap");function Bse(){return Qht}s(Bse,"getErrorMap");var Nse=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),gEr=[];function pr(t,e){let r=Bse(),n=Nse({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===w8?void 0:w8].filter(i=>!!i)});t.common.issues.push(n)}s(pr,"addIssueToContext");var Ud=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return jn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return jn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},jn=Object.freeze({status:"aborted"}),T8=s(t=>({status:"dirty",value:t}),"DIRTY"),Sf=s(t=>({status:"valid",value:t}),"OK"),C2e=s(t=>t.status==="aborted","isAborted"),v2e=s(t=>t.status==="dirty","isDirty"),$k=s(t=>t.status==="valid","isValid"),MU=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Lse(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Lse,"__classPrivateFieldGet");function Uht(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Uht,"__classPrivateFieldSet");var Kr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Kr||(Kr={}));var NU,LU,Gh=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Mht=s((t,e)=>{if($k(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Xp(t.common.issues);return this._error=r,this._error}}},"handleResult");function pi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(pi,"processCreateParams");var mi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return px(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:px(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ud,ctx:{common:e.parent.common,data:e.data,parsedType:px(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(MU(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:px(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Mht(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:px(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return $k(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>$k(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:px(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(MU(i)?i:Promise.resolve(i));return Mht(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Ft.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Zp({schema:this,typeName:Un.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return jh.create(this,this._def)}nullable(){return k1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hx.create(this)}promise(){return Vw.create(this,this._def)}or(e){return Kk.create([this,e],this._def)}and(e){return Jk.create(this,e,this._def)}transform(e){return new Zp({...pi(this._def),schema:this,typeName:Un.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new r5({...pi(this._def),innerType:this,defaultValue:r,typeName:Un.ZodDefault})}brand(){return new FU({typeName:Un.ZodBranded,type:this,...pi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new n5({...pi(this._def),innerType:this,catchValue:r,typeName:Un.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return OU.create(this,e)}readonly(){return i5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},AEr=/^c[^\s-]{8,}$/i,yEr=/^[0-9a-z]+$/,CEr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vEr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,EEr=/^[a-z0-9_-]{21}$/i,xEr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bEr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IEr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TEr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",A2e,wEr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SEr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_Er=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,REr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kEr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,PEr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qht="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",DEr=new RegExp(`^${qht}$`);function Hht(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Hht,"timeRegexSource");function BEr(t){return new RegExp(`^${Hht(t)}$`)}s(BEr,"timeRegex");function $ht(t){let e=`${qht}T${Hht(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s($ht,"datetimeRegex");function NEr(t,e){return!!((e==="v4"||!e)&&wEr.test(t)||(e==="v6"||!e)&&_Er.test(t))}s(NEr,"isValidIP");function LEr(t,e){if(!xEr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(LEr,"isValidJWT");function MEr(t,e){return!!((e==="v4"||!e)&&SEr.test(t)||(e==="v6"||!e)&&REr.test(t))}s(MEr,"isValidCidr");var jw=class t extends mi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Tr.string){let o=this._getOrReturnCtx(e);return pr(o,{code:Ft.invalid_type,expected:Tr.string,received:o.parsedType}),jn}let n=new Ud,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?pr(i,{code:Ft.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&pr(i,{code:Ft.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")IEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"email",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")A2e||(A2e=new RegExp(TEr,"u")),A2e.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"emoji",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")vEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"uuid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")EEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"nanoid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")AEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"cuid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")yEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"cuid2",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")CEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"ulid",code:Ft.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),pr(i,{validation:"url",code:Ft.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"regex",code:Ft.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?$ht(o).test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?DEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?BEr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?bEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"duration",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?NEr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"ip",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?LEr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"jwt",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?MEr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"cidr",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?kEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"base64",code:Ft.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?PEr.test(e.data)||(i=this._getOrReturnCtx(e,i),pr(i,{validation:"base64url",code:Ft.invalid_string,message:o.message}),n.dirty()):Po.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Ft.invalid_string,...Kr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Kr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Kr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Kr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Kr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Kr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Kr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Kr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Kr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Kr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Kr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Kr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Kr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Kr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Kr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Kr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Kr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Kr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Kr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Kr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Kr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Kr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Kr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Kr.errToObj(r)})}nonempty(e){return this.min(1,Kr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};jw.create=t=>{var e;return new jw({checks:[],typeName:Un.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...pi(t)})};function FEr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(FEr,"floatSafeRemainder");var Wk=class t extends mi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Tr.number){let o=this._getOrReturnCtx(e);return pr(o,{code:Ft.invalid_type,expected:Tr.number,received:o.parsedType}),jn}let n,i=new Ud;for(let o of this._def.checks)o.kind==="int"?Po.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?FEr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.not_finite,message:o.message}),i.dirty()):Po.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Kr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Kr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Kr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Kr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Kr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Kr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Kr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Kr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Kr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Kr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Kr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Kr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Kr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Kr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Po.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Wk.create=t=>new Wk({checks:[],typeName:Un.ZodNumber,coerce:t?.coerce||!1,...pi(t)});var jk=class t extends mi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Tr.bigint)return this._getInvalidInput(e);let n,i=new Ud;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),pr(n,{code:Ft.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Po.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return pr(r,{code:Ft.invalid_type,expected:Tr.bigint,received:r.parsedType}),jn}gte(e,r){return this.setLimit("min",e,!0,Kr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Kr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Kr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Kr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Kr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Kr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Kr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Kr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Kr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Kr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};jk.create=t=>{var e;return new jk({checks:[],typeName:Un.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...pi(t)})};var Gk=class extends mi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Tr.boolean){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.boolean,received:n.parsedType}),jn}return Sf(e.data)}};Gk.create=t=>new Gk({typeName:Un.ZodBoolean,coerce:t?.coerce||!1,...pi(t)});var Vk=class t extends mi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Tr.date){let o=this._getOrReturnCtx(e);return pr(o,{code:Ft.invalid_type,expected:Tr.date,received:o.parsedType}),jn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return pr(o,{code:Ft.invalid_date}),jn}let n=new Ud,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),pr(i,{code:Ft.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Po.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Kr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Kr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Vk.create=t=>new Vk({checks:[],coerce:t?.coerce||!1,typeName:Un.ZodDate,...pi(t)});var S8=class extends mi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Tr.symbol){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.symbol,received:n.parsedType}),jn}return Sf(e.data)}};S8.create=t=>new S8({typeName:Un.ZodSymbol,...pi(t)});var zk=class extends mi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Tr.undefined){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.undefined,received:n.parsedType}),jn}return Sf(e.data)}};zk.create=t=>new zk({typeName:Un.ZodUndefined,...pi(t)});var Yk=class extends mi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Tr.null){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.null,received:n.parsedType}),jn}return Sf(e.data)}};Yk.create=t=>new Yk({typeName:Un.ZodNull,...pi(t)});var Gw=class extends mi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Sf(e.data)}};Gw.create=t=>new Gw({typeName:Un.ZodAny,...pi(t)});var mx=class extends mi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Sf(e.data)}};mx.create=t=>new mx({typeName:Un.ZodUnknown,...pi(t)});var ZA=class extends mi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return pr(r,{code:Ft.invalid_type,expected:Tr.never,received:r.parsedType}),jn}};ZA.create=t=>new ZA({typeName:Un.ZodNever,...pi(t)});var _8=class extends mi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Tr.undefined){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.void,received:n.parsedType}),jn}return Sf(e.data)}};_8.create=t=>new _8({typeName:Un.ZodVoid,...pi(t)});var hx=class t extends mi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Tr.array)return pr(r,{code:Ft.invalid_type,expected:Tr.array,received:r.parsedType}),jn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(pr(r,{code:a?Ft.too_big:Ft.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(pr(r,{code:Ft.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(pr(r,{code:Ft.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new Gh(r,a,r.path,c)))).then(a=>Ud.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new Gh(r,a,r.path,c)));return Ud.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Kr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Kr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Kr.toString(r)}})}nonempty(e){return this.min(1,e)}};hx.create=(t,e)=>new hx({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Un.ZodArray,...pi(e)});function I8(t){if(t instanceof L0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=jh.create(I8(n))}return new L0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof hx?new hx({...t._def,type:I8(t.element)}):t instanceof jh?jh.create(I8(t.unwrap())):t instanceof k1?k1.create(I8(t.unwrap())):t instanceof R1?R1.create(t.items.map(e=>I8(e))):t}s(I8,"deepPartialify");var L0=class t extends mi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Po.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Tr.object){let u=this._getOrReturnCtx(e);return pr(u,{code:Ft.invalid_type,expected:Tr.object,received:u.parsedType}),jn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof ZA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let d=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Gh(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ZA){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of c)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")c.length>0&&(pr(i,{code:Ft.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of c){let p=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Gh(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of l){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Ud.mergeObjectSync(n,u)):Ud.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Kr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Kr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Un.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Po.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return Po.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return I8(this)}partial(e){let r={};return Po.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return Po.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof jh;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Wht(Po.objectKeys(this.shape))}};L0.create=(t,e)=>new L0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:ZA.create(),typeName:Un.ZodObject,...pi(e)});L0.strictCreate=(t,e)=>new L0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:ZA.create(),typeName:Un.ZodObject,...pi(e)});L0.lazycreate=(t,e)=>new L0({shape:t,unknownKeys:"strip",catchall:ZA.create(),typeName:Un.ZodObject,...pi(e)});var Kk=class extends mi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new Xp(c.ctx.common.issues));return pr(r,{code:Ft.invalid_union,unionErrors:a}),jn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new Xp(l));return pr(r,{code:Ft.invalid_union,unionErrors:c}),jn}}get options(){return this._def.options}};Kk.create=(t,e)=>new Kk({options:t,typeName:Un.ZodUnion,...pi(e)});var fx=s(t=>t instanceof Xk?fx(t.schema):t instanceof Zp?fx(t.innerType()):t instanceof Zk?[t.value]:t instanceof e5?t.options:t instanceof t5?Po.objectValues(t.enum):t instanceof r5?fx(t._def.innerType):t instanceof zk?[void 0]:t instanceof Yk?[null]:t instanceof jh?[void 0,...fx(t.unwrap())]:t instanceof k1?[null,...fx(t.unwrap())]:t instanceof FU||t instanceof i5?fx(t.unwrap()):t instanceof n5?fx(t._def.innerType):[],"getDiscriminator"),Mse=class t extends mi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.object)return pr(r,{code:Ft.invalid_type,expected:Tr.object,received:r.parsedType}),jn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(pr(r,{code:Ft.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),jn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=fx(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:Un.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...pi(n)})}};function E2e(t,e){let r=px(t),n=px(e);if(t===e)return{valid:!0,data:t};if(r===Tr.object&&n===Tr.object){let i=Po.objectKeys(e),o=Po.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=E2e(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Tr.array&&n===Tr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=E2e(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Tr.date&&n===Tr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(E2e,"mergeValues");var Jk=class extends mi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(C2e(o)||C2e(a))return jn;let c=E2e(o.value,a.value);return c.valid?((v2e(o)||v2e(a))&&r.dirty(),{status:r.value,value:c.data}):(pr(n,{code:Ft.invalid_intersection_types}),jn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Jk.create=(t,e,r)=>new Jk({left:t,right:e,typeName:Un.ZodIntersection,...pi(r)});var R1=class t extends mi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.array)return pr(n,{code:Ft.invalid_type,expected:Tr.array,received:n.parsedType}),jn;if(n.data.length<this._def.items.length)return pr(n,{code:Ft.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jn;!this._def.rest&&n.data.length>this._def.items.length&&(pr(n,{code:Ft.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Gh(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Ud.mergeArray(r,a)):Ud.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};R1.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new R1({items:t,typeName:Un.ZodTuple,rest:null,...pi(e)})};var Fse=class t extends mi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.object)return pr(n,{code:Ft.invalid_type,expected:Tr.object,received:n.parsedType}),jn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new Gh(n,c,n.path,c)),value:a._parse(new Gh(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Ud.mergeObjectAsync(r,i):Ud.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof mi?new t({keyType:e,valueType:r,typeName:Un.ZodRecord,...pi(n)}):new t({keyType:jw.create(),valueType:e,typeName:Un.ZodRecord,...pi(r)})}},R8=class extends mi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.map)return pr(n,{code:Ft.invalid_type,expected:Tr.map,received:n.parsedType}),jn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new Gh(n,c,n.path,[u,"key"])),value:o._parse(new Gh(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return jn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),c.set(u.value,d.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return jn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),c.set(u.value,d.value)}return{status:r.value,value:c}}}};R8.create=(t,e,r)=>new R8({valueType:e,keyType:t,typeName:Un.ZodMap,...pi(r)});var k8=class t extends mi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Tr.set)return pr(n,{code:Ft.invalid_type,expected:Tr.set,received:n.parsedType}),jn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(pr(n,{code:Ft.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(pr(n,{code:Ft.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let d of l){if(d.status==="aborted")return jn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new Gh(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Kr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Kr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};k8.create=(t,e)=>new k8({valueType:t,minSize:null,maxSize:null,typeName:Un.ZodSet,...pi(e)});var Ose=class t extends mi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.function)return pr(r,{code:Ft.invalid_type,expected:Tr.function,received:r.parsedType}),jn;function n(c,l){return Nse({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bse(),w8].filter(u=>!!u),issueData:{code:Ft.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return Nse({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bse(),w8].filter(u=>!!u),issueData:{code:Ft.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Vw){let c=this;return Sf(async function(...l){let u=new Xp([]),d=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,d);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return Sf(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new Xp([n(l,u.error)]);let d=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(d,o);if(!p.success)throw new Xp([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:R1.create(e).rest(mx.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||R1.create([]).rest(mx.create()),returns:r||mx.create(),typeName:Un.ZodFunction,...pi(n)})}},Xk=class extends mi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Xk.create=(t,e)=>new Xk({getter:t,typeName:Un.ZodLazy,...pi(e)});var Zk=class extends mi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return pr(r,{received:r.data,code:Ft.invalid_literal,expected:this._def.value}),jn}return{status:"valid",value:e.data}}get value(){return this._def.value}};Zk.create=(t,e)=>new Zk({value:t,typeName:Un.ZodLiteral,...pi(e)});function Wht(t,e){return new e5({values:t,typeName:Un.ZodEnum,...pi(e)})}s(Wht,"createZodEnum");var e5=class t extends mi{static{s(this,"ZodEnum")}constructor(){super(...arguments),NU.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return pr(r,{expected:Po.joinValues(n),received:r.parsedType,code:Ft.invalid_type}),jn}if(Lse(this,NU,"f")||Uht(this,NU,new Set(this._def.values),"f"),!Lse(this,NU,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return pr(r,{received:r.data,code:Ft.invalid_enum_value,options:n}),jn}return Sf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};NU=new WeakMap;e5.create=Wht;var t5=class extends mi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),LU.set(this,void 0)}_parse(e){let r=Po.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Tr.string&&n.parsedType!==Tr.number){let i=Po.objectValues(r);return pr(n,{expected:Po.joinValues(i),received:n.parsedType,code:Ft.invalid_type}),jn}if(Lse(this,LU,"f")||Uht(this,LU,new Set(Po.getValidEnumValues(this._def.values)),"f"),!Lse(this,LU,"f").has(e.data)){let i=Po.objectValues(r);return pr(n,{received:n.data,code:Ft.invalid_enum_value,options:i}),jn}return Sf(e.data)}get enum(){return this._def.values}};LU=new WeakMap;t5.create=(t,e)=>new t5({values:t,typeName:Un.ZodNativeEnum,...pi(e)});var Vw=class extends mi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Tr.promise&&r.common.async===!1)return pr(r,{code:Ft.invalid_type,expected:Tr.promise,received:r.parsedType}),jn;let n=r.parsedType===Tr.promise?r.data:Promise.resolve(r.data);return Sf(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Vw.create=(t,e)=>new Vw({type:t,typeName:Un.ZodPromise,...pi(e)});var Zp=class extends mi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Un.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{pr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return jn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?jn:l.status==="dirty"||r.value==="dirty"?T8(l.value):l});{if(r.value==="aborted")return jn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?jn:c.status==="dirty"||r.value==="dirty"?T8(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?jn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?jn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$k(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>$k(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);Po.assertNever(i)}};Zp.create=(t,e,r)=>new Zp({schema:t,typeName:Un.ZodEffects,effect:e,...pi(r)});Zp.createWithPreprocess=(t,e,r)=>new Zp({schema:e,effect:{type:"preprocess",transform:t},typeName:Un.ZodEffects,...pi(r)});var jh=class extends mi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Tr.undefined?Sf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};jh.create=(t,e)=>new jh({innerType:t,typeName:Un.ZodOptional,...pi(e)});var k1=class extends mi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Tr.null?Sf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};k1.create=(t,e)=>new k1({innerType:t,typeName:Un.ZodNullable,...pi(e)});var r5=class extends mi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Tr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};r5.create=(t,e)=>new r5({innerType:t,typeName:Un.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...pi(e)});var n5=class extends mi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return MU(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xp(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Xp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};n5.create=(t,e)=>new n5({innerType:t,typeName:Un.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...pi(e)});var P8=class extends mi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Tr.nan){let n=this._getOrReturnCtx(e);return pr(n,{code:Ft.invalid_type,expected:Tr.nan,received:n.parsedType}),jn}return{status:"valid",value:e.data}}};P8.create=t=>new P8({typeName:Un.ZodNaN,...pi(t)});var OEr=Symbol("zod_brand"),FU=class extends mi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},OU=class t extends mi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?jn:o.status==="dirty"?(r.dirty(),T8(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?jn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Un.ZodPipeline})}},i5=class extends mi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>($k(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return MU(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};i5.create=(t,e)=>new i5({innerType:t,typeName:Un.ZodReadonly,...pi(e)});function Fht(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Fht,"cleanParams");function jht(t,e={},r){return t?Gw.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,d;if(!l){let p=Fht(e,n),m=(d=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=Fht(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):Gw.create()}s(jht,"custom");var QEr={object:L0.lazycreate},Un;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Un||(Un={}));var UEr=s((t,e={message:`Input not instance of ${t.name}`})=>jht(r=>r instanceof t,e),"instanceOfType"),Ght=jw.create,Vht=Wk.create,qEr=P8.create,HEr=jk.create,zht=Gk.create,$Er=Vk.create,WEr=S8.create,jEr=zk.create,GEr=Yk.create,VEr=Gw.create,zEr=mx.create,YEr=ZA.create,KEr=_8.create,JEr=hx.create,XEr=L0.create,ZEr=L0.strictCreate,exr=Kk.create,txr=Mse.create,rxr=Jk.create,nxr=R1.create,ixr=Fse.create,oxr=R8.create,sxr=k8.create,axr=Ose.create,cxr=Xk.create,lxr=Zk.create,uxr=e5.create,dxr=t5.create,fxr=Vw.create,Oht=Zp.create,pxr=jh.create,mxr=k1.create,hxr=Zp.createWithPreprocess,gxr=OU.create,Axr=s(()=>Ght().optional(),"ostring"),yxr=s(()=>Vht().optional(),"onumber"),Cxr=s(()=>zht().optional(),"oboolean"),vxr={string:s(t=>jw.create({...t,coerce:!0}),"string"),number:s(t=>Wk.create({...t,coerce:!0}),"number"),boolean:s(t=>Gk.create({...t,coerce:!0}),"boolean"),bigint:s(t=>jk.create({...t,coerce:!0}),"bigint"),date:s(t=>Vk.create({...t,coerce:!0}),"date")},Exr=jn,_=Object.freeze({__proto__:null,defaultErrorMap:w8,setErrorMap:hEr,getErrorMap:Bse,makeIssue:Nse,EMPTY_PATH:gEr,addIssueToContext:pr,ParseStatus:Ud,INVALID:jn,DIRTY:T8,OK:Sf,isAborted:C2e,isDirty:v2e,isValid:$k,isAsync:MU,get util(){return Po},get objectUtil(){return y2e},ZodParsedType:Tr,getParsedType:px,ZodType:mi,datetimeRegex:$ht,ZodString:jw,ZodNumber:Wk,ZodBigInt:jk,ZodBoolean:Gk,ZodDate:Vk,ZodSymbol:S8,ZodUndefined:zk,ZodNull:Yk,ZodAny:Gw,ZodUnknown:mx,ZodNever:ZA,ZodVoid:_8,ZodArray:hx,ZodObject:L0,ZodUnion:Kk,ZodDiscriminatedUnion:Mse,ZodIntersection:Jk,ZodTuple:R1,ZodRecord:Fse,ZodMap:R8,ZodSet:k8,ZodFunction:Ose,ZodLazy:Xk,ZodLiteral:Zk,ZodEnum:e5,ZodNativeEnum:t5,ZodPromise:Vw,ZodEffects:Zp,ZodTransformer:Zp,ZodOptional:jh,ZodNullable:k1,ZodDefault:r5,ZodCatch:n5,ZodNaN:P8,BRAND:OEr,ZodBranded:FU,ZodPipeline:OU,ZodReadonly:i5,custom:jht,Schema:mi,ZodSchema:mi,late:QEr,get ZodFirstPartyTypeKind(){return Un},coerce:vxr,any:VEr,array:JEr,bigint:HEr,boolean:zht,date:$Er,discriminatedUnion:txr,effect:Oht,enum:uxr,function:axr,instanceof:UEr,intersection:rxr,lazy:cxr,literal:lxr,map:oxr,nan:qEr,nativeEnum:dxr,never:YEr,null:GEr,nullable:mxr,number:Vht,object:XEr,oboolean:Cxr,onumber:yxr,optional:pxr,ostring:Axr,pipeline:gxr,preprocess:hxr,promise:fxr,record:ixr,set:sxr,strictObject:ZEr,string:Ght,symbol:WEr,transformer:Oht,tuple:nxr,undefined:jEr,union:exr,unknown:zEr,void:KEr,NEVER:Exr,ZodIssueCode:Ft,quotelessJson:mEr,ZodError:Xp});var Qse="2025-06-18";var Use="2.0",Yht=_.union([_.string(),_.number().int()]),Kht=_.string(),xxr=_.object({progressToken:_.optional(Yht)}).passthrough(),Vh=_.object({_meta:_.optional(xxr)}).passthrough(),M0=_.object({method:_.string(),params:_.optional(Vh)}),QU=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),P1=_.object({method:_.string(),params:_.optional(QU)}),zh=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),qse=_.union([_.string(),_.number().int()]),bxr=_.object({jsonrpc:_.literal(Use),id:qse}).merge(M0).strict();var Ixr=_.object({jsonrpc:_.literal(Use)}).merge(P1).strict();var Txr=_.object({jsonrpc:_.literal(Use),id:qse,result:zh}).strict();var wxr=_.object({jsonrpc:_.literal(Use),id:qse,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict();var _Eo=_.union([bxr,Ixr,Txr,wxr]),Jht=zh.strict(),Xht=P1.extend({method:_.literal("notifications/cancelled"),params:QU.extend({requestId:qse,reason:_.string().optional()})}),UU=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),Zht=UU.extend({version:_.string()}),Sxr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),_xr=M0.extend({method:_.literal("initialize"),params:Vh.extend({protocolVersion:_.string(),capabilities:Sxr,clientInfo:Zht})});var Rxr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),kxr=zh.extend({protocolVersion:_.string(),capabilities:Rxr,serverInfo:Zht,instructions:_.optional(_.string())}),Pxr=P1.extend({method:_.literal("notifications/initialized")});var egt=M0.extend({method:_.literal("ping")}),Dxr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),tgt=P1.extend({method:_.literal("notifications/progress"),params:QU.merge(Dxr).extend({progressToken:Yht})}),Hse=M0.extend({params:Vh.extend({cursor:_.optional(Kht)}).optional()}),$se=zh.extend({nextCursor:_.optional(Kht)}),rgt=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),ngt=rgt.extend({text:_.string()}),igt=rgt.extend({blob:_.string().base64()}),ogt=UU.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),Bxr=UU.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),Nxr=Hse.extend({method:_.literal("resources/list")}),Lxr=$se.extend({resources:_.array(ogt)}),Mxr=Hse.extend({method:_.literal("resources/templates/list")}),Fxr=$se.extend({resourceTemplates:_.array(Bxr)}),Oxr=M0.extend({method:_.literal("resources/read"),params:Vh.extend({uri:_.string()})}),Qxr=zh.extend({contents:_.array(_.union([ngt,igt]))}),Uxr=P1.extend({method:_.literal("notifications/resources/list_changed")}),qxr=M0.extend({method:_.literal("resources/subscribe"),params:Vh.extend({uri:_.string()})}),Hxr=M0.extend({method:_.literal("resources/unsubscribe"),params:Vh.extend({uri:_.string()})}),$xr=P1.extend({method:_.literal("notifications/resources/updated"),params:QU.extend({uri:_.string()})}),Wxr=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),jxr=UU.extend({description:_.optional(_.string()),arguments:_.optional(_.array(Wxr)),_meta:_.optional(_.object({}).passthrough())}),Gxr=Hse.extend({method:_.literal("prompts/list")}),Vxr=$se.extend({prompts:_.array(jxr)}),zxr=M0.extend({method:_.literal("prompts/get"),params:Vh.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),x2e=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),b2e=_.object({type:_.literal("image"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),I2e=_.object({type:_.literal("audio"),data:_.string().base64(),mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Yxr=_.object({type:_.literal("resource"),resource:_.union([ngt,igt]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Kxr=ogt.extend({type:_.literal("resource_link")}),sgt=_.union([x2e,b2e,I2e,Kxr,Yxr]),Jxr=_.object({role:_.enum(["user","assistant"]),content:sgt}).passthrough(),Xxr=zh.extend({description:_.optional(_.string()),messages:_.array(Jxr)}),Zxr=P1.extend({method:_.literal("notifications/prompts/list_changed")}),ebr=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),tbr=UU.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(ebr),_meta:_.optional(_.object({}).passthrough())}),rbr=Hse.extend({method:_.literal("tools/list")}),nbr=$se.extend({tools:_.array(tbr)}),agt=zh.extend({content:_.array(sgt).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),REo=agt.or(zh.extend({toolResult:_.unknown()})),ibr=M0.extend({method:_.literal("tools/call"),params:Vh.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),obr=P1.extend({method:_.literal("notifications/tools/list_changed")}),cgt=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),sbr=M0.extend({method:_.literal("logging/setLevel"),params:Vh.extend({level:cgt})}),abr=P1.extend({method:_.literal("notifications/message"),params:QU.extend({level:cgt,logger:_.optional(_.string()),data:_.unknown()})}),cbr=_.object({name:_.string().optional()}).passthrough(),lbr=_.object({hints:_.optional(_.array(cbr)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),ubr=_.object({role:_.enum(["user","assistant"]),content:_.union([x2e,b2e,I2e])}).passthrough(),dbr=M0.extend({method:_.literal("sampling/createMessage"),params:Vh.extend({messages:_.array(ubr),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(lbr)})}),fbr=zh.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[x2e,b2e,I2e])}),pbr=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),mbr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),hbr=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),gbr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),Abr=_.union([pbr,mbr,hbr,gbr]),ybr=M0.extend({method:_.literal("elicitation/create"),params:Vh.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),Abr),required:_.optional(_.array(_.string()))}).passthrough()})}),Cbr=zh.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),vbr=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var Ebr=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),xbr=M0.extend({method:_.literal("completion/complete"),params:Vh.extend({ref:_.union([Ebr,vbr]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),bbr=zh.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),Ibr=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Tbr=M0.extend({method:_.literal("roots/list")}),wbr=zh.extend({roots:_.array(Ibr)}),Sbr=P1.extend({method:_.literal("notifications/roots/list_changed")}),kEo=_.union([egt,_xr,xbr,sbr,zxr,Gxr,Nxr,Mxr,Oxr,qxr,Hxr,ibr,rbr]),PEo=_.union([Xht,tgt,Pxr,Sbr]),DEo=_.union([Jht,fbr,Cbr,wbr]),BEo=_.union([egt,dbr,ybr,Tbr]),NEo=_.union([Xht,tgt,abr,$xr,Uxr,obr,Zxr]),LEo=_.union([Jht,kxr,bbr,Xxr,Vxr,Lxr,Fxr,Qxr,agt,nbr]);f();async function o5(t,e,r,n,i){return await t.get(ln).fetch(new URL(e).href,{method:r,headers:n,body:i})}s(o5,"fetchOauthServer");async function T2e(t){try{return await t.text()}catch{return t.statusText}}s(T2e,"getErrText");f();var lgt="/.well-known",w2e=`${lgt}/oauth-protected-resource`,ugt=`${lgt}/oauth-authorization-server`;function dgt(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}s(dgt,"isAuthorizationProtectedResourceMetadata");function fgt(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}s(fgt,"isAuthorizationServerMetadata");function pgt(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(o=>{let[a,c]=o.split("=").map(l=>l.trim().replace(/"/g,""));n[a]=c}),{scheme:r,params:n}}s(pgt,"parseWWWAuthenticateHeader");function mgt(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}s(mgt,"getMetadataWithDefaultValues");function hgt(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}s(hgt,"getDefaultMetadataForUrl");function ggt(t){let e=new URL(t);if(!e.pathname.startsWith(w2e))throw new Error(`Invalid discovery URL: expected path to start with ${w2e}`);let r=e.pathname.substring(w2e.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}s(ggt,"getResourceServerBaseUrlFromDiscoveryUrl");var S2e=class{static{s(this,"AuthMetadata")}},Wse=class extends S2e{static{s(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),i,o,a,c=await this.getResourceMetadata(n,{url:e,headers:r??{}});c.resource&&(i=c.authorization_servers?.[0],o=c.scopes_supported,a=c);let l=new URL(e).origin,u={};i||(i=l,u=r??{});let d;try{let m=await this.getAuthorizationServerMetadata(i,u),h=mgt(m);return d={authorizationServer:i,serverMetadata:h,resourceMetadata:a},Ri.info(this.ctx,"authMetadata",d),d}catch(m){Ri.warn(this.ctx,`Error populating auth metadata: ${String(m)}`)}let p=hgt(new URL(l));return p.scopes_supported=o??p.scopes_supported??[],d={authorizationServer:i,serverMetadata:p,resourceMetadata:a},d}async getResourceMetadataChallenge(e){let r=await o5(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let i=r.headers.get("WWW-Authenticate"),{scheme:o,params:a}=pgt(i);o==="Bearer"&&a.resource_metadata&&(n=a.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),i=new URL(r.url),o={};n.origin===i.origin&&(o=r.headers);let a=await o5(this.ctx,e,"GET",{...o,Accept:"application/json","MCP-Protocol-Version":Qse});if(a.status!==200)throw new Error(`Failed to fetch resource metadata: ${a.status} ${await T2e(a)}`);let c=await a.json();if(dgt(c)){let l=ggt(e);if(c.resource!==l)throw new Error(`Protected Resource Metadata resource "${c.resource}" does not match MCP server resolved resource "${l}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return c}else throw new Error(`Invalid resource metadata: ${JSON.stringify(c)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),i=n.pathname==="/"?"":n.pathname,o=new URL(ugt,e).toString()+i,a=await o5(this.ctx,o,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":Qse});if(a.status!==200&&(a=await o5(this.ctx,no(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":Qse}),a.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${a.status} ${await T2e(a)}`);let c=await a.json();if(fgt(c))return c;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(c)}`)}};f();f();f();var _2e=/[^a-z0-9_-]/gi;var _br=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Agt(){let t={};for(let e of _br){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Agt,"getDefaultEnvironment");async function ygt(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Ri.warn(t,n),await Hk(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(_2e.lastIndex=0,_2e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Ri.warn(t,n),await Hk(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(_2e,"_")}else e._nameForModel=e.name;return e}s(ygt,"normalizeTool");var jse=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};f();f();f();var D8="2025-06-18";var Cgt=[D8,"2025-03-26","2024-11-05","2024-10-07"],Gse="2.0",vgt=_.union([_.string(),_.number().int()]),Egt=_.string(),Rbr=_.object({progressToken:_.optional(vgt)}).passthrough(),Jh=_.object({_meta:_.optional(Rbr)}).passthrough(),F0=_.object({method:_.string(),params:_.optional(Jh)}),qU=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),D1=_.object({method:_.string(),params:_.optional(qU)}),Xh=_.object({_meta:_.optional(_.object({}).passthrough())}).passthrough(),Vse=_.union([_.string(),_.number().int()]),xgt=_.object({jsonrpc:_.literal(Gse),id:Vse}).merge(F0).strict(),zse=s(t=>xgt.safeParse(t).success,"isJSONRPCRequest"),bgt=_.object({jsonrpc:_.literal(Gse)}).merge(D1).strict(),Igt=s(t=>bgt.safeParse(t).success,"isJSONRPCNotification"),Tgt=_.object({jsonrpc:_.literal(Gse),id:Vse,result:Xh}).strict(),HU=s(t=>Tgt.safeParse(t).success,"isJSONRPCResponse"),Yh;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Yh||(Yh={}));var wgt=_.object({jsonrpc:_.literal(Gse),id:Vse,error:_.object({code:_.number().int(),message:_.string(),data:_.optional(_.unknown())})}).strict(),Sgt=s(t=>wgt.safeParse(t).success,"isJSONRPCError"),zw=_.union([xgt,bgt,Tgt,wgt]),s5=Xh.strict(),Yse=D1.extend({method:_.literal("notifications/cancelled"),params:qU.extend({requestId:Vse,reason:_.string().optional()})}),$U=_.object({name:_.string(),title:_.optional(_.string())}).passthrough(),_gt=$U.extend({version:_.string()}),kbr=_.object({experimental:_.optional(_.object({}).passthrough()),sampling:_.optional(_.object({}).passthrough()),elicitation:_.optional(_.object({}).passthrough()),roots:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),Pbr=F0.extend({method:_.literal("initialize"),params:Jh.extend({protocolVersion:_.string(),capabilities:kbr,clientInfo:_gt})});var Dbr=_.object({experimental:_.optional(_.object({}).passthrough()),logging:_.optional(_.object({}).passthrough()),completions:_.optional(_.object({}).passthrough()),prompts:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough()),resources:_.optional(_.object({subscribe:_.optional(_.boolean()),listChanged:_.optional(_.boolean())}).passthrough()),tools:_.optional(_.object({listChanged:_.optional(_.boolean())}).passthrough())}).passthrough(),R2e=Xh.extend({protocolVersion:_.string(),capabilities:Dbr,serverInfo:_gt,instructions:_.optional(_.string())}),Rgt=D1.extend({method:_.literal("notifications/initialized")}),kgt=s(t=>Rgt.safeParse(t).success,"isInitializedNotification"),Kse=F0.extend({method:_.literal("ping")}),Bbr=_.object({progress:_.number(),total:_.optional(_.number()),message:_.optional(_.string())}).passthrough(),Jse=D1.extend({method:_.literal("notifications/progress"),params:qU.merge(Bbr).extend({progressToken:vgt})}),Xse=F0.extend({params:Jh.extend({cursor:_.optional(Egt)}).optional()}),Zse=Xh.extend({nextCursor:_.optional(Egt)}),Pgt=_.object({uri:_.string(),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Dgt=Pgt.extend({text:_.string()}),k2e=_.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),Bgt=Pgt.extend({blob:k2e}),Ngt=$U.extend({uri:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),Nbr=$U.extend({uriTemplate:_.string(),description:_.optional(_.string()),mimeType:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}),Lbr=Xse.extend({method:_.literal("resources/list")}),P2e=Zse.extend({resources:_.array(Ngt)}),Mbr=Xse.extend({method:_.literal("resources/templates/list")}),D2e=Zse.extend({resourceTemplates:_.array(Nbr)}),Fbr=F0.extend({method:_.literal("resources/read"),params:Jh.extend({uri:_.string()})}),B2e=Xh.extend({contents:_.array(_.union([Dgt,Bgt]))}),Obr=D1.extend({method:_.literal("notifications/resources/list_changed")}),Qbr=F0.extend({method:_.literal("resources/subscribe"),params:Jh.extend({uri:_.string()})}),Ubr=F0.extend({method:_.literal("resources/unsubscribe"),params:Jh.extend({uri:_.string()})}),qbr=D1.extend({method:_.literal("notifications/resources/updated"),params:qU.extend({uri:_.string()})}),Hbr=_.object({name:_.string(),description:_.optional(_.string()),required:_.optional(_.boolean())}).passthrough(),$br=$U.extend({description:_.optional(_.string()),arguments:_.optional(_.array(Hbr)),_meta:_.optional(_.object({}).passthrough())}),Wbr=Xse.extend({method:_.literal("prompts/list")}),N2e=Zse.extend({prompts:_.array($br)}),jbr=F0.extend({method:_.literal("prompts/get"),params:Jh.extend({name:_.string(),arguments:_.optional(_.record(_.string()))})}),L2e=_.object({type:_.literal("text"),text:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),M2e=_.object({type:_.literal("image"),data:k2e,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),F2e=_.object({type:_.literal("audio"),data:k2e,mimeType:_.string(),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Gbr=_.object({type:_.literal("resource"),resource:_.union([Dgt,Bgt]),_meta:_.optional(_.object({}).passthrough())}).passthrough(),Vbr=Ngt.extend({type:_.literal("resource_link")}),Lgt=_.union([L2e,M2e,F2e,Vbr,Gbr]),zbr=_.object({role:_.enum(["user","assistant"]),content:Lgt}).passthrough(),O2e=Xh.extend({description:_.optional(_.string()),messages:_.array(zbr)}),WU=D1.extend({method:_.literal("notifications/prompts/list_changed")}),Ybr=_.object({title:_.optional(_.string()),readOnlyHint:_.optional(_.boolean()),destructiveHint:_.optional(_.boolean()),idempotentHint:_.optional(_.boolean()),openWorldHint:_.optional(_.boolean())}).passthrough(),Kbr=$U.extend({description:_.optional(_.string()),inputSchema:_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough(),outputSchema:_.optional(_.object({type:_.literal("object"),properties:_.optional(_.object({}).passthrough()),required:_.optional(_.array(_.string()))}).passthrough()),annotations:_.optional(Ybr),_meta:_.optional(_.object({}).passthrough())}),Jbr=Xse.extend({method:_.literal("tools/list")}),Q2e=Zse.extend({tools:_.array(Kbr)}),B8=Xh.extend({content:_.array(Lgt).default([]),structuredContent:_.object({}).passthrough().optional(),isError:_.optional(_.boolean())}),cxo=B8.or(Xh.extend({toolResult:_.unknown()})),Xbr=F0.extend({method:_.literal("tools/call"),params:Jh.extend({name:_.string(),arguments:_.optional(_.record(_.unknown()))})}),jU=D1.extend({method:_.literal("notifications/tools/list_changed")}),Mgt=_.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Zbr=F0.extend({method:_.literal("logging/setLevel"),params:Jh.extend({level:Mgt})}),U2e=D1.extend({method:_.literal("notifications/message"),params:qU.extend({level:Mgt,logger:_.optional(_.string()),data:_.unknown()})}),eIr=_.object({name:_.string().optional()}).passthrough(),tIr=_.object({hints:_.optional(_.array(eIr)),costPriority:_.optional(_.number().min(0).max(1)),speedPriority:_.optional(_.number().min(0).max(1)),intelligencePriority:_.optional(_.number().min(0).max(1))}).passthrough(),rIr=_.object({role:_.enum(["user","assistant"]),content:_.union([L2e,M2e,F2e])}).passthrough(),nIr=F0.extend({method:_.literal("sampling/createMessage"),params:Jh.extend({messages:_.array(rIr),systemPrompt:_.optional(_.string()),includeContext:_.optional(_.enum(["none","thisServer","allServers"])),temperature:_.optional(_.number()),maxTokens:_.number().int(),stopSequences:_.optional(_.array(_.string())),metadata:_.optional(_.object({}).passthrough()),modelPreferences:_.optional(tIr)})}),iIr=Xh.extend({model:_.string(),stopReason:_.optional(_.enum(["endTurn","stopSequence","maxTokens"]).or(_.string())),role:_.enum(["user","assistant"]),content:_.discriminatedUnion("type",[L2e,M2e,F2e])}),oIr=_.object({type:_.literal("boolean"),title:_.optional(_.string()),description:_.optional(_.string()),default:_.optional(_.boolean())}).passthrough(),sIr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),minLength:_.optional(_.number()),maxLength:_.optional(_.number()),format:_.optional(_.enum(["email","uri","date","date-time"]))}).passthrough(),aIr=_.object({type:_.enum(["number","integer"]),title:_.optional(_.string()),description:_.optional(_.string()),minimum:_.optional(_.number()),maximum:_.optional(_.number())}).passthrough(),cIr=_.object({type:_.literal("string"),title:_.optional(_.string()),description:_.optional(_.string()),enum:_.array(_.string()),enumNames:_.optional(_.array(_.string()))}).passthrough(),lIr=_.union([oIr,sIr,aIr,cIr]),uIr=F0.extend({method:_.literal("elicitation/create"),params:Jh.extend({message:_.string(),requestedSchema:_.object({type:_.literal("object"),properties:_.record(_.string(),lIr),required:_.optional(_.array(_.string()))}).passthrough()})}),dIr=Xh.extend({action:_.enum(["accept","decline","cancel"]),content:_.optional(_.record(_.string(),_.unknown()))}),fIr=_.object({type:_.literal("ref/resource"),uri:_.string()}).passthrough();var pIr=_.object({type:_.literal("ref/prompt"),name:_.string()}).passthrough(),mIr=F0.extend({method:_.literal("completion/complete"),params:Jh.extend({ref:_.union([pIr,fIr]),argument:_.object({name:_.string(),value:_.string()}).passthrough(),context:_.optional(_.object({arguments:_.optional(_.record(_.string(),_.string()))}))})}),q2e=Xh.extend({completion:_.object({values:_.array(_.string()).max(100),total:_.optional(_.number().int()),hasMore:_.optional(_.boolean())}).passthrough()}),hIr=_.object({uri:_.string().startsWith("file://"),name:_.optional(_.string()),_meta:_.optional(_.object({}).passthrough())}).passthrough(),gIr=F0.extend({method:_.literal("roots/list")}),AIr=Xh.extend({roots:_.array(hIr)}),yIr=D1.extend({method:_.literal("notifications/roots/list_changed")}),lxo=_.union([Kse,Pbr,mIr,Zbr,jbr,Wbr,Lbr,Mbr,Fbr,Qbr,Ubr,Xbr,Jbr]),uxo=_.union([Yse,Jse,Rgt,yIr]),dxo=_.union([s5,iIr,dIr,AIr]),fxo=_.union([Kse,nIr,uIr,gIr]),pxo=_.union([Yse,Jse,U2e,qbr,Obr,jU,WU]),mxo=_.union([s5,R2e,q2e,O2e,N2e,P2e,D2e,B2e,B8,Q2e]),Kh=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var CIr=6e4,eae=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Yse,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(Jse,r=>{this._onprogress(r)}),this.setRequestHandler(Kse,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Kh(Yh.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,i;this._transport=e;let o=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let a=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=l=>{a?.(l),this._onerror(l)};let c=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,u)=>{c?.(l,u),HU(l)||Sgt(l)?this._onresponse(l):zse(l)?this._onrequest(l,u):Igt(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new Kh(Yh.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Yh.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>c(e,u)).then(d=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Yh.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),HU(e))n(e);else{let i=new Kh(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,d,p,m,h,g;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=n?.signal)===null||d===void 0||d.throwIfAborted();let A=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:A};n?.onprogress&&(this._progressHandlers.set(A,n.onprogress),y.params={...e.params,_meta:{...((p=e.params)===null||p===void 0?void 0:p._meta)||{},progressToken:A}});let x=s(R=>{var B;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(B=this._transport)===null||B===void 0||B.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(R)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(M=>this._onerror(new Error(`Failed to send cancellation: ${M}`))),l(R)},"cancel");this._responseHandlers.set(A,R=>{var B;if(!(!((B=n?.signal)===null||B===void 0)&&B.aborted)){if(R instanceof Error)return l(R);try{let M=r.parse(R.result);c(M)}catch(M){l(M)}}}),(m=n?.signal)===null||m===void 0||m.addEventListener("abort",()=>{var R;x((R=n?.signal)===null||R===void 0?void 0:R.reason)});let I=(h=n?.timeout)!==null&&h!==void 0?h:CIr,S=s(()=>x(new Kh(Yh.RequestTimeout,"Request timed out",{timeout:I})),"timeoutHandler");this._setupTimeout(A,I,n?.maxTotalTimeout,S,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(R=>{this._cleanupTimeout(A),l(R)})})}async notification(e,r){var n,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((i=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(d=>this._onerror(d))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Fgt(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(Fgt,"mergeCapabilities");var Qyt=Fe(Oyt(),1);var Cae=class extends eae{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new Qyt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Fgt(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:D8,capabilities:this._capabilities,clientInfo:this._clientInfo}},R2e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!Cgt.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},s5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},q2e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},s5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},O2e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},N2e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},P2e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},D2e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},B2e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},s5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},s5,r)}async callTool(e,r=B8,n){let i=await this.request({method:"tools/call",params:e},r,n),o=this.getToolOutputValidator(e.name);if(o){if(!i.structuredContent&&!i.isError)throw new Kh(Yh.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(i.structuredContent)try{if(!o(i.structuredContent))throw new Kh(Yh.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(o.errors)}`)}catch(a){throw a instanceof Kh?a:new Kh(Yh.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return i}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},Q2e,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var Uyt=Fe(require("events"));var Xw=class{constructor(e,r,n){this.transport=null;this.emitter=new Uyt.default;this.ctx=e,this.mcp=new Cae({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Ri.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Ri.error(this.ctx,"Connection failed:",r),await _1(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await ygt(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;fu(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new po([],"error"),i=ow();try{let o=await this.mcp.callTool({name:e,arguments:r,_meta:{progressToken:i}},B8,{onprogress:s(a=>{Ri.info(this.ctx,`${e} calling progress`,a),fu(this.ctx,{message:`${e} calling progress:`+JSON.stringify(a),server:this.name})},"onprogress"),resetTimeoutOnProgress:!0});if(o&&typeof o=="object"){if(o.content)return this.formatToolResult(o);{let a=`Error calling tool ${e}: `+JSON.stringify(o);Ri.error(this.ctx,a),await _1(this.ctx,{message:a,server:this.name,tool:e}),n.content.push(new _i(a))}}else{let a=`Error calling tool ${e}: `+JSON.stringify(o);Ri.error(this.ctx,a),await _1(this.ctx,{message:a,server:this.name,tool:e}),n.content.push(new _i(a))}}catch(o){let a=`Error calling tool ${e}: `+(o instanceof Error?o.message:String(o));Ri.error(this.ctx,a),await _1(this.ctx,{message:a,server:this.name,tool:e}),n.content.push(new _i(a))}return n}addListeners(){this.mcp.onclose=()=>{Ri.info(this.ctx,`MCP server ${this.name} connection closed.`),fu(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Ri.error(this.ctx,`MCP server ${this.name} error:`,e),_1(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(U2e,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Ri.info(this.ctx,`MCP server ${this.name} log:`,r),fu(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":Ri.warn(this.ctx,`MCP server ${this.name} log:`,r),Hk(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Ri.error(this.ctx,`MCP server ${this.name} log:`,r),_1(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:Ri.info(this.ctx,`MCP server ${this.name} log:`,r),fu(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new po([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new _i(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new vk({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();function XTr(t){return s(async(r,n)=>{let i=r instanceof URL?r.toString():r,o;if(n?.headers)if(n.headers instanceof Headers){o={};for(let[d,p]of n.headers.entries())o[d]=p}else if(Array.isArray(n.headers)){o={};for(let[d,p]of n.headers)o[d]=p}else o=n.headers;let a={method:n?.method||"GET",headers:o,body:n?.body,signal:n?.signal||void 0},c=await t.fetch(i,a),l=c.body(),u=null;if(l)u=new ReadableStream({start(d){let p=s(A=>{d.enqueue(new Uint8Array(A))},"onData"),m=s(()=>{d.close(),g()},"onEnd"),h=s(A=>{d.error(A),g()},"onError"),g=s(()=>{l.off("data",p),l.off("end",m),l.off("error",h)},"cleanup");l.on("data",p),l.on("end",m),l.on("error",h)},cancel(){l&&"destroy"in l&&typeof l.destroy=="function"&&l.destroy()}});else{let d=await c.text();u=new ReadableStream({start(p){p.enqueue(new TextEncoder().encode(d)),p.close()}})}return new globalThis.Response(u,{status:c.status,statusText:c.statusText,headers:new Headers(c.headers)})},"fetchLike")}s(XTr,"createFetchAdapter");function vae(t,e){let r=t.get(ln),n=XTr(r);return{...e,fetch:n}}s(vae,"createConfigWithFetch");f();f();f();var Eae=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function fRe(t){}s(fRe,"noop");function xae(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=fRe,onError:r=fRe,onRetry:n=fRe,onComment:i}=t,o="",a=!0,c,l="",u="";function d(A){let y=a?A.replace(/^\xEF\xBB\xBF/,""):A,[x,I]=ZTr(`${o}${y}`);for(let S of x)p(S);o=I,a=!1}s(d,"feed");function p(A){if(A===""){h();return}if(A.startsWith(":")){i&&i(A.slice(A.startsWith(": ")?2:1));return}let y=A.indexOf(":");if(y!==-1){let x=A.slice(0,y),I=A[y+1]===" "?2:1,S=A.slice(y+I);m(x,S,A);return}m(A,"",A)}s(p,"parseLine");function m(A,y,x){switch(A){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":c=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new Eae(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:x}));break;default:r(new Eae(`Unknown field "${A.length>20?`${A.slice(0,20)}\u2026`:A}"`,{type:"unknown-field",field:A,value:y,line:x}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(A={}){o&&A.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(xae,"createParser");function ZTr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(ZTr,"splitLines");var Iae=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(qyt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(qyt(this),r)}};function ewr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(ewr,"syntaxError");function pRe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(pRe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${pRe(t.cause)}`:t.message:`${t}`}s(pRe,"flattenError");function qyt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(qyt,"inspectableError");var $yt=s(t=>{throw TypeError(t)},"__typeError"),ERe=s((t,e,r)=>e.has(t)||$yt("Cannot "+r),"__accessCheck"),Ki=s((t,e,r)=>(ERe(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Dl=s((t,e,r)=>e.has(t)?$yt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Sa=s((t,e,r,n)=>(ERe(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),gx=s((t,e,r)=>(ERe(t,e,"access private method"),r),"__privateMethod"),O0,l5,N8,bae,Tae,YU,F8,KU,Zw,L8,O8,M8,VU,ey,mRe,hRe,gRe,Hyt,ARe,yRe,zU,CRe,vRe,u5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),Dl(this,ey),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Dl(this,O0),Dl(this,l5),Dl(this,N8),Dl(this,bae),Dl(this,Tae),Dl(this,YU),Dl(this,F8),Dl(this,KU,null),Dl(this,Zw),Dl(this,L8),Dl(this,O8,null),Dl(this,M8,null),Dl(this,VU,null),Dl(this,hRe,async o=>{var a;Ki(this,L8).reset();let{body:c,redirected:l,status:u,headers:d}=o;if(u===204){gx(this,ey,zU).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?Sa(this,N8,new URL(o.url)):Sa(this,N8,void 0),u!==200){gx(this,ey,zU).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){gx(this,ey,zU).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Ki(this,O0)===this.CLOSED)return;Sa(this,O0,this.OPEN);let p=new Event("open");if((a=Ki(this,VU))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){gx(this,ey,zU).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:A,value:y}=await h.read();y&&Ki(this,L8).feed(m.decode(y,{stream:!A})),A&&(g=!1,Ki(this,L8).reset(),gx(this,ey,CRe).call(this))}while(g)}),Dl(this,gRe,o=>{Sa(this,Zw,void 0),!(o.name==="AbortError"||o.type==="aborted")&&gx(this,ey,CRe).call(this,pRe(o))}),Dl(this,ARe,o=>{typeof o.id=="string"&&Sa(this,KU,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Ki(this,N8)?Ki(this,N8).origin:Ki(this,l5).origin,lastEventId:o.id||""});Ki(this,M8)&&(!o.event||o.event==="message")&&Ki(this,M8).call(this,a),this.dispatchEvent(a)}),Dl(this,yRe,o=>{Sa(this,YU,o)}),Dl(this,vRe,()=>{Sa(this,F8,void 0),Ki(this,O0)===this.CONNECTING&&gx(this,ey,mRe).call(this)});try{if(e instanceof URL)Sa(this,l5,e);else if(typeof e=="string")Sa(this,l5,new URL(e,twr()));else throw new Error("Invalid URL")}catch{throw ewr("An invalid or illegal string was specified")}Sa(this,L8,xae({onEvent:Ki(this,ARe),onRetry:Ki(this,yRe)})),Sa(this,O0,this.CONNECTING),Sa(this,YU,3e3),Sa(this,Tae,(n=r?.fetch)!=null?n:globalThis.fetch),Sa(this,bae,(i=r?.withCredentials)!=null?i:!1),gx(this,ey,mRe).call(this)}get readyState(){return Ki(this,O0)}get url(){return Ki(this,l5).href}get withCredentials(){return Ki(this,bae)}get onerror(){return Ki(this,O8)}set onerror(e){Sa(this,O8,e)}get onmessage(){return Ki(this,M8)}set onmessage(e){Sa(this,M8,e)}get onopen(){return Ki(this,VU)}set onopen(e){Sa(this,VU,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Ki(this,F8)&&clearTimeout(Ki(this,F8)),Ki(this,O0)!==this.CLOSED&&(Ki(this,Zw)&&Ki(this,Zw).abort(),Sa(this,O0,this.CLOSED),Sa(this,Zw,void 0))}};O0=new WeakMap,l5=new WeakMap,N8=new WeakMap,bae=new WeakMap,Tae=new WeakMap,YU=new WeakMap,F8=new WeakMap,KU=new WeakMap,Zw=new WeakMap,L8=new WeakMap,O8=new WeakMap,M8=new WeakMap,VU=new WeakMap,ey=new WeakSet,mRe=s(function(){Sa(this,O0,this.CONNECTING),Sa(this,Zw,new AbortController),Ki(this,Tae)(Ki(this,l5),gx(this,ey,Hyt).call(this)).then(Ki(this,hRe)).catch(Ki(this,gRe))},"connect_fn"),hRe=new WeakMap,gRe=new WeakMap,Hyt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Ki(this,KU)?{"Last-Event-ID":Ki(this,KU)}:void 0},cache:"no-store",signal:(t=Ki(this,Zw))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),ARe=new WeakMap,yRe=new WeakMap,zU=s(function(t,e){var r;Ki(this,O0)!==this.CLOSED&&Sa(this,O0,this.CLOSED);let n=new Iae("error",{code:e,message:t});(r=Ki(this,O8))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),CRe=s(function(t,e){var r;if(Ki(this,O0)===this.CLOSED)return;Sa(this,O0,this.CONNECTING);let n=new Iae("error",{code:e,message:t});(r=Ki(this,O8))==null||r.call(this,n),this.dispatchEvent(n),Sa(this,F8,setTimeout(Ki(this,vRe),Ki(this,YU)))},"scheduleReconnect_fn"),vRe=new WeakMap,u5.CONNECTING=0,u5.OPEN=1,u5.CLOSED=2;function twr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(twr,"getBaseURL");f();f();var xRe;xRe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function rwr(t){return(await xRe).getRandomValues(new Uint8Array(t))}s(rwr,"getRandomValues");async function nwr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await rwr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(nwr,"random");async function iwr(t){return await nwr(t)}s(iwr,"generateVerifier");async function owr(t){let e=await(await xRe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(owr,"generateChallenge");async function bRe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await iwr(t),r=await owr(e);return{code_verifier:e,code_challenge:r}}s(bRe,"pkceChallenge");f();var Wyt=_.object({resource:_.string().url(),authorization_servers:_.array(_.string().url()).optional(),jwks_uri:_.string().url().optional(),scopes_supported:_.array(_.string()).optional(),bearer_methods_supported:_.array(_.string()).optional(),resource_signing_alg_values_supported:_.array(_.string()).optional(),resource_name:_.string().optional(),resource_documentation:_.string().optional(),resource_policy_uri:_.string().url().optional(),resource_tos_uri:_.string().url().optional(),tls_client_certificate_bound_access_tokens:_.boolean().optional(),authorization_details_types_supported:_.array(_.string()).optional(),dpop_signing_alg_values_supported:_.array(_.string()).optional(),dpop_bound_access_tokens_required:_.boolean().optional()}).passthrough(),IRe=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),revocation_endpoint:_.string().optional(),revocation_endpoint_auth_methods_supported:_.array(_.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),introspection_endpoint:_.string().optional(),introspection_endpoint_auth_methods_supported:_.array(_.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),code_challenge_methods_supported:_.array(_.string()).optional()}).passthrough(),swr=_.object({issuer:_.string(),authorization_endpoint:_.string(),token_endpoint:_.string(),userinfo_endpoint:_.string().optional(),jwks_uri:_.string(),registration_endpoint:_.string().optional(),scopes_supported:_.array(_.string()).optional(),response_types_supported:_.array(_.string()),response_modes_supported:_.array(_.string()).optional(),grant_types_supported:_.array(_.string()).optional(),acr_values_supported:_.array(_.string()).optional(),subject_types_supported:_.array(_.string()),id_token_signing_alg_values_supported:_.array(_.string()),id_token_encryption_alg_values_supported:_.array(_.string()).optional(),id_token_encryption_enc_values_supported:_.array(_.string()).optional(),userinfo_signing_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_alg_values_supported:_.array(_.string()).optional(),userinfo_encryption_enc_values_supported:_.array(_.string()).optional(),request_object_signing_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_alg_values_supported:_.array(_.string()).optional(),request_object_encryption_enc_values_supported:_.array(_.string()).optional(),token_endpoint_auth_methods_supported:_.array(_.string()).optional(),token_endpoint_auth_signing_alg_values_supported:_.array(_.string()).optional(),display_values_supported:_.array(_.string()).optional(),claim_types_supported:_.array(_.string()).optional(),claims_supported:_.array(_.string()).optional(),service_documentation:_.string().optional(),claims_locales_supported:_.array(_.string()).optional(),ui_locales_supported:_.array(_.string()).optional(),claims_parameter_supported:_.boolean().optional(),request_parameter_supported:_.boolean().optional(),request_uri_parameter_supported:_.boolean().optional(),require_request_uri_registration:_.boolean().optional(),op_policy_uri:_.string().optional(),op_tos_uri:_.string().optional()}).passthrough(),jyt=swr.merge(IRe.pick({code_challenge_methods_supported:!0})),TRe=_.object({access_token:_.string(),id_token:_.string().optional(),token_type:_.string(),expires_in:_.number().optional(),scope:_.string().optional(),refresh_token:_.string().optional()}).strip(),Gyt=_.object({error:_.string(),error_description:_.string().optional(),error_uri:_.string().optional()}),awr=_.object({redirect_uris:_.array(_.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:_.string().optional(),grant_types:_.array(_.string()).optional(),response_types:_.array(_.string()).optional(),client_name:_.string().optional(),client_uri:_.string().optional(),logo_uri:_.string().optional(),scope:_.string().optional(),contacts:_.array(_.string()).optional(),tos_uri:_.string().optional(),policy_uri:_.string().optional(),jwks_uri:_.string().optional(),jwks:_.any().optional(),software_id:_.string().optional(),software_version:_.string().optional(),software_statement:_.string().optional()}).strip(),cwr=_.object({client_id:_.string(),client_secret:_.string().optional(),client_id_issued_at:_.number().optional(),client_secret_expires_at:_.number().optional()}).strip(),Vyt=awr.merge(cwr),wTo=_.object({error:_.string(),error_description:_.string().optional()}).strip(),STo=_.object({token:_.string(),token_type_hint:_.string().optional()}).strip();f();function zyt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}s(zyt,"resourceUrlFromServerUrl");function Yyt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return i.startsWith(o)}s(Yyt,"checkResourceAllowed");f();var dl=class extends Error{static{s(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},JU=class extends dl{static{s(this,"InvalidRequestError")}};JU.errorCode="invalid_request";var d5=class extends dl{static{s(this,"InvalidClientError")}};d5.errorCode="invalid_client";var f5=class extends dl{static{s(this,"InvalidGrantError")}};f5.errorCode="invalid_grant";var p5=class extends dl{static{s(this,"UnauthorizedClientError")}};p5.errorCode="unauthorized_client";var XU=class extends dl{static{s(this,"UnsupportedGrantTypeError")}};XU.errorCode="unsupported_grant_type";var ZU=class extends dl{static{s(this,"InvalidScopeError")}};ZU.errorCode="invalid_scope";var eq=class extends dl{static{s(this,"AccessDeniedError")}};eq.errorCode="access_denied";var Ax=class extends dl{static{s(this,"ServerError")}};Ax.errorCode="server_error";var tq=class extends dl{static{s(this,"TemporarilyUnavailableError")}};tq.errorCode="temporarily_unavailable";var rq=class extends dl{static{s(this,"UnsupportedResponseTypeError")}};rq.errorCode="unsupported_response_type";var nq=class extends dl{static{s(this,"UnsupportedTokenTypeError")}};nq.errorCode="unsupported_token_type";var iq=class extends dl{static{s(this,"InvalidTokenError")}};iq.errorCode="invalid_token";var oq=class extends dl{static{s(this,"MethodNotAllowedError")}};oq.errorCode="method_not_allowed";var sq=class extends dl{static{s(this,"TooManyRequestsError")}};sq.errorCode="too_many_requests";var aq=class extends dl{static{s(this,"InvalidClientMetadataError")}};aq.errorCode="invalid_client_metadata";var cq=class extends dl{static{s(this,"InsufficientScopeError")}};cq.errorCode="insufficient_scope";var Kyt={[JU.errorCode]:JU,[d5.errorCode]:d5,[f5.errorCode]:f5,[p5.errorCode]:p5,[XU.errorCode]:XU,[ZU.errorCode]:ZU,[eq.errorCode]:eq,[Ax.errorCode]:Ax,[tq.errorCode]:tq,[rq.errorCode]:rq,[nq.errorCode]:nq,[iq.errorCode]:iq,[oq.errorCode]:oq,[sq.errorCode]:sq,[aq.errorCode]:aq,[cq.errorCode]:cq};var Q0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function Xyt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}s(Xyt,"selectClientAuthMethod");function Zyt(t,e,r,n){let{client_id:i,client_secret:o}=e;switch(t){case"client_secret_basic":lwr(i,o,r);return;case"client_secret_post":uwr(i,o,n);return;case"none":dwr(i,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}s(Zyt,"applyClientAuthentication");function lwr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}s(lwr,"applyBasicAuth");function uwr(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}s(uwr,"applyPostAuth");function dwr(t,e){e.set("client_id",t)}s(dwr,"applyPublicAuth");async function SRe(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=Gyt.parse(JSON.parse(r)),{error:i,error_description:o,error_uri:a}=n,c=Kyt[i]||Ax;return new c(o||"",a)}catch(n){let i=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new Ax(i)}}s(SRe,"parseErrorResponse");async function eS(t,e){var r,n;try{return await wRe(t,e)}catch(i){if(i instanceof d5||i instanceof p5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await wRe(t,e);if(i instanceof f5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await wRe(t,e);throw i}}s(eS,"auth");async function wRe(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:i,fetchFn:o}){let a,c;try{a=await pwr(e,{resourceMetadataUrl:i},o),a.authorization_servers&&a.authorization_servers.length>0&&(c=a.authorization_servers[0])}catch{}c||(c=e);let l=await fwr(e,t,a),u=await ywr(c,{fetchFn:o}),d=await Promise.resolve(t.clientInformation());if(!d){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let A=await xwr(c,{metadata:u,clientMetadata:t.clientMetadata});await t.saveClientInformation(A),d=A}if(r!==void 0){let A=await t.codeVerifier(),y=await vwr(c,{metadata:u,clientInformation:d,authorizationCode:r,codeVerifier:A,redirectUri:t.redirectUrl,resource:l,addClientAuthentication:t.addClientAuthentication,fetchFn:o});return await t.saveTokens(y),"AUTHORIZED"}let p=await t.tokens();if(p?.refresh_token)try{let A=await Ewr(c,{metadata:u,clientInformation:d,refreshToken:p.refresh_token,resource:l,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof dl)||A instanceof Ax))throw A}let m=t.state?await t.state():void 0,{authorizationUrl:h,codeVerifier:g}=await Cwr(c,{metadata:u,clientInformation:d,state:m,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:l});return await t.saveCodeVerifier(g),await t.redirectToAuthorization(h),"REDIRECT"}s(wRe,"authInternal");async function fwr(t,e,r){let n=zyt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!Yyt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}s(fwr,"selectResourceURL");function lq(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}s(lq,"extractResourceMetadataUrl");async function pwr(t,e,r=fetch){let n=await gwr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return Wyt.parse(await n.json())}s(pwr,"discoverOAuthProtectedResourceMetadata");async function _Re(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?_Re(t,void 0,r):void 0;throw n}}s(_Re,"fetchWithCorsRetry");function mwr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}s(mwr,"buildWellKnownPath");async function Jyt(t,e,r=fetch){return await _Re(t,{"MCP-Protocol-Version":e},r)}s(Jyt,"tryMetadataDiscovery");function hwr(t,e){return!t||t.status===404&&e!=="/"}s(hwr,"shouldAttemptFallback");async function gwr(t,e,r,n){var i,o;let a=new URL(t),c=(i=n?.protocolVersion)!==null&&i!==void 0?i:D8,l;if(n?.metadataUrl)l=new URL(n.metadataUrl);else{let d=mwr(e,a.pathname);l=new URL(d,(o=n?.metadataServerUrl)!==null&&o!==void 0?o:a),l.search=a.search}let u=await Jyt(l,c,r);if(!n?.metadataUrl&&hwr(u,a.pathname)){let d=new URL(`/.well-known/${e}`,a);u=await Jyt(d,c,r)}return u}s(gwr,"discoverMetadataWithFallback");function Awr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let i=e.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${i}`,e.origin),type:"oidc"}),n.push({url:new URL(`${i}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}s(Awr,"buildDiscoveryUrls");async function ywr(t,{fetchFn:e=fetch,protocolVersion:r=D8}={}){var n;let i={"MCP-Protocol-Version":r},o=Awr(t);for(let{url:a,type:c}of o){let l=await _Re(a,i,e);if(!l)throw new Error(`CORS error trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`);if(!l.ok){if(l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`)}if(c==="oauth")return IRe.parse(await l.json());{let u=jyt.parse(await l.json());if(!(!((n=u.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${a}: does not support S256 code challenge method required by MCP specification`);return u}}}s(ywr,"discoverAuthorizationServerMetadata");async function Cwr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:i,state:o,resource:a}){let c="code",l="S256",u;if(e){if(u=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else u=new URL("/authorize",t);let d=await bRe(),p=d.code_verifier,m=d.code_challenge;return u.searchParams.set("response_type",c),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",m),u.searchParams.set("code_challenge_method",l),u.searchParams.set("redirect_uri",String(n)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),a&&u.searchParams.set("resource",a.href),{authorizationUrl:u,codeVerifier:p}}s(Cwr,"startAuthorization");async function vwr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o,resource:a,addClientAuthentication:c,fetchFn:l}){var u;let d="authorization_code",p=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support grant type ${d}`);let m=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),h=new URLSearchParams({grant_type:d,code:n,code_verifier:i,redirect_uri:String(o)});if(c)c(m,h,t,e);else{let A=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=Xyt(r,A);Zyt(y,r,m,h)}a&&h.set("resource",a.href);let g=await(l??fetch)(p,{method:"POST",headers:m,body:h});if(!g.ok)throw await SRe(g);return TRe.parse(await g.json())}s(vwr,"exchangeAuthorization");async function Ewr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:i,addClientAuthentication:o,fetchFn:a}){var c;let l="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support grant type ${l}`)}else u=new URL("/token",t);let d=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:l,refresh_token:n});if(o)o(d,p,t,e);else{let h=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],g=Xyt(r,h);Zyt(g,r,d,p)}i&&p.set("resource",i.href);let m=await(a??fetch)(u,{method:"POST",headers:d,body:p});if(!m.ok)throw await SRe(m);return TRe.parse({refresh_token:n,...await m.json()})}s(Ewr,"refreshAuthorization");async function xwr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let i;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");i=new URL(e.registration_endpoint)}else i=new URL("/register",t);let o=await(n??fetch)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw await SRe(o);return Vyt.parse(await o.json())}s(xwr,"registerClient");var RRe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},wae=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new Q0("No auth provider");let r;try{r=await eS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new Q0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let i=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((o,a)=>{this._eventSource=new u5(this._url.href,{...this._eventSourceInit,fetch:s(async(c,l)=>{let u=await this._commonHeaders();u.set("Accept","text/event-stream");let d=await i(c,{...l,headers:u});return d.status===401&&d.headers.has("www-authenticate")&&(this._resourceMetadataUrl=lq(d)),d},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=c=>{var l;if(c.code===401&&this._authProvider){this._authThenStart().then(o,a);return}let u=new RRe(c.code,c.message,c);a(u),(l=this.onerror)===null||l===void 0||l.call(this,u)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",c=>{var l;let u=c;try{if(this._endpoint=new URL(u.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(d){a(d),(l=this.onerror)===null||l===void 0||l.call(this,d),this.close();return}o()}),this._eventSource.onmessage=c=>{var l,u;let d=c,p;try{p=zw.parse(JSON.parse(d.data))}catch(m){(l=this.onerror)===null||l===void 0||l.call(this,m);return}(u=this.onmessage)===null||u===void 0||u.call(this,p)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new Q0("No auth provider");if(await eS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new Q0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders();o.set("content-type","application/json");let a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,a);if(!c.ok){if(c.status===401&&this._authProvider){if(this._resourceMetadataUrl=lq(c),await eS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new Q0;return this.send(e)}let l=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${l}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}};var Sae=class extends Xw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){let n=vae(this.ctx,r);return new wae(new URL(r.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(jU,r=>{Ri.info(this.ctx,"Tool list changed, refreshing tools..."),fu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(qE)}),this.mcp.setNotificationHandler(WU,r=>{Ri.info(this.ctx,"Prompts list changed, refreshing tools..."),fu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(qE)})}};f();f();var $Ct=Fe(qCt(),1),uq=Fe(require("node:process"),1),WCt=require("node:stream");f();var Rae=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Ywr(r)}clear(){this._buffer=void 0}};function Ywr(t){return zw.parse(JSON.parse(t))}s(Ywr,"deserializeMessage");function HCt(t){return JSON.stringify(t)+`
`}s(HCt,"serializeMessage");var Kwr=uq.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Jwr(){let t={};for(let e of Kwr){let r=uq.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Jwr,"getDefaultEnvironment");var kae=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Rae,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new WCt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c;this._process=(0,$Ct.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...Jwr(),...this._serverParams.env},stdio:["pipe","pipe",(i=this._serverParams.stderr)!==null&&i!==void 0?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:uq.default.platform==="win32"&&Xwr(),cwd:this._serverParams.cwd}),this._process.on("error",l=>{var u,d;if(l.name==="AbortError"){(u=this.onclose)===null||u===void 0||u.call(this);return}r(l),(d=this.onerror)===null||d===void 0||d.call(this,l)}),this._process.on("spawn",()=>{e()}),this._process.on("close",l=>{var u;this._process=void 0,(u=this.onclose)===null||u===void 0||u.call(this)}),(o=this._process.stdin)===null||o===void 0||o.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),(a=this._process.stdout)===null||a===void 0||a.on("data",l=>{this._readBuffer.append(l),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=HCt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function Xwr(){return"type"in uq.default}s(Xwr,"isElectron");var Pae=class extends Xw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Agt(),...r.env||{}},r.stderr="pipe",new kae(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{Hk(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};f();f();f();var Dae=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=xae({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var Zwr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},dq=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Bae=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:Zwr}async _authThenStart(){var e;if(!this._authProvider)throw new Q0("No auth provider");let r;try{r=await eS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new Q0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let i=await this._authProvider.tokens();i&&(r.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,i;let{resumptionToken:o}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),o&&a.set("last-event-id",o);let c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:a,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!c.ok){if(c.status===401&&this._authProvider)return await this._authThenStart();if(c.status===405)return;throw new dq(c.status,`Failed to open SSE stream: ${c.statusText}`)}this._handleSseStream(c.body,e,!0)}catch(a){throw(i=this.onerror)===null||i===void 0||i.call(this,a),a}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:i,replayMessageId:o}=r,a;s(async()=>{var l,u,d,p;try{let m=e.pipeThrough(new TextDecoderStream).pipeThrough(new Dae).getReader();for(;;){let{value:h,done:g}=await m.read();if(g)break;if(h.id&&(a=h.id,i?.(h.id)),!h.event||h.event==="message")try{let A=zw.parse(JSON.parse(h.data));o!==void 0&&HU(A)&&(A.id=o),(l=this.onmessage)===null||l===void 0||l.call(this,A)}catch(A){(u=this.onerror)===null||u===void 0||u.call(this,A)}}}catch(m){if((d=this.onerror)===null||d===void 0||d.call(this,new Error(`SSE stream disconnected: ${m}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:i,replayMessageId:o},0)}catch(h){(p=this.onerror)===null||p===void 0||p.call(this,new Error(`Failed to reconnect: ${h instanceof Error?h.message:String(h)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new Q0("No auth provider");if(await eS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new Q0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o,a;try{let{resumptionToken:c,onresumptiontoken:l}=r||{};if(c){this._startOrAuthSse({resumptionToken:c,replayMessageId:zse(e)?e.id:void 0}).catch(y=>{var x;return(x=this.onerror)===null||x===void 0?void 0:x.call(this,y)});return}let u=await this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let d={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},p=await((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,d),m=p.headers.get("mcp-session-id");if(m&&(this._sessionId=m),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=lq(p),await eS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new Q0;return this.send(e)}let y=await p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${y}`)}if(p.status===202){kgt(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var x;return(x=this.onerror)===null||x===void 0?void 0:x.call(this,y)});return}let g=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,A=p.headers.get("content-type");if(g)if(A?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:l},!1);else if(A?.includes("application/json")){let y=await p.json(),x=Array.isArray(y)?y.map(I=>zw.parse(I)):[zw.parse(y)];for(let I of x)(o=this.onmessage)===null||o===void 0||o.call(this,I)}else throw new dq(-1,`Unexpected content type: ${A}`)}catch(c){throw(a=this.onerror)===null||a===void 0||a.call(this,c),c}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let i=await this._commonHeaders(),o={...this._requestInit,method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},a=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,o);if(!a.ok&&a.status!==405)throw new dq(a.status,`Failed to terminate session: ${a.statusText}`);this._sessionId=void 0}catch(i){throw(n=this.onerror)===null||n===void 0||n.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var Nae=class extends Xw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){let n=vae(this.ctx,r);return new Bae(new URL(r.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(jU,r=>{Ri.info(this.ctx,"Tool list changed, refreshing tools..."),fu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(qE)}),this.mcp.setNotificationHandler(WU,r=>{Ri.info(this.ctx,"Prompts list changed, refreshing tools..."),fu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(qE)})}};f();var Lae=class extends Sw{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Bc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(KC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Qae=Fe(Zc());f();f();nz();var q8=class extends _u{constructor(r,n=new QRe){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(Pr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},QRe=class extends _u{static{s(this,"SpawnUrlOpener")}async open(e){await j6(e)}};f();var jCt=require("crypto"),GCt=Fe(require("http"));var Mae=class{constructor(e){this.nonce=(0,jCt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((i,o)=>r={resolve:i,reject:o});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=GCt.createServer((i,o)=>{let a=new URL(i.url,`http://${i.headers.host}`);switch(a.pathname){case"/signin":{(a.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),o.writeHead(302,{location:this._startingRedirect.toString()}),o.end();break}case"/callback":{let c=a.searchParams.get("code")??void 0,l=a.searchParams.get("state")??void 0,u=new URL(l||"").searchParams.get("nonce")??void 0;if(!c||!l||!u){o.writeHead(400),o.end();return}if(this.state!==l)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),o.end(),new Error("State does not match.");if(this.nonce!==u)throw o.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),o.end(),new Error("Nonce does not match.");r.resolve({code:c,state:l}),o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(c2e);break}default:o.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),o.end(c2e)}})}static{s(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let i=this._server.address();if(typeof i=="string")this.port=parseInt(i);else if(i instanceof Object)this.port=i.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",i=>{r(new Error(`Error listening to server: ${i}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var eSr="Timed out",URe=class{static{s(this,"CodeFlow")}},Fae=class extends URe{static{s(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let i=Eht(e);if(!i)return"";let{client_id:o,client_secret:a}=i,c=new URLSearchParams([["client_id",o],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),l=r.authorization_endpoint+"?"+c.toString(),u=new Mae(l),d=await u.start(),p=`http://127.0.0.1:${d}/signin?nonce=${encodeURIComponent(u.nonce)}`;an.info(this.ctx,"auth url: ",p),await new q8(this.ctx).open(p);let m;try{m=(await Promise.race([u.waitForOAuthResponse(),new Promise((A,y)=>setTimeout(()=>y(new Error(eSr)),3e5))])).code}finally{setTimeout(()=>{u.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${d}/callback`,code:m,client_id:o,client_secret:a})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:i,client_secret:o}){let a=new URLSearchParams([["code",n],["client_id",i],["redirect_uri",r],["client_secret",o]]),c=await o5(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},a.toString());if(c.ok)return(await c.json()).access_token;{let l=await c.text(),u=new Error(l);throw u.name="GitHubTokenExchangeError",u}}};var Oae=class t extends Lh{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new jse;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,ws(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(Ri.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{s(this,"CLSMCPManager")}static{this.toolsNotificationType=new Qae.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new Qae.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return Ri.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,i){if(!this.isMcpEnabled){Ri.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){Ri.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(Ld).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Ri.error(this.ctx,a),await _1(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await fu(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new Sae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Nae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Pae(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(qE,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await fu(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Ri.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Ri.info(this.ctx,c),fu(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}else if(a&&"url"in r&&r.type!=="sse"&&a[1]==="401"){let c=await this.getAuthMetadata(r),l=await this.getToken(r.url,c.authorizationServer,c.serverMetadata,c.resourceMetadata);if(!l){Ri.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let u={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${l}`}}};return await this.addServer(u)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await _1(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(za).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(Pr).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:d}=i;Ri.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(Ld).registerTool(new Lae({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:d},p=>(Ri.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(Ld).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await fu(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(qE),await i.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new Wse(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,i,o){let a=await this.ctx.get(WA).getOrActivateProviderIdForServer(n);if(!a){let d=this.ctx.get(WA).createAuthenticationProvider(n);if(!d){Ri.error(this.ctx,`No authentication provider found for server: ${n}`),await fu(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}a=d.id}let c=o?.scopes_supported||i.scopes_supported||[],l=await this.ctx.get(WA).getSessions(a,c,{authorizationServer:n},!0);if(l.length)return l[0].accessToken;let u=this.ctx.get(WA).getProvider(a);try{let{confirm:d}=await this.ctx.get(Pr).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:u.label});if(!d){Ri.warn(this.ctx,"no confirmation for OAuth request");return}}catch(d){Ri.warn(this.ctx,"no confirmation for OAuth request",d);return}try{let d=await new Fae(this.ctx).auth(n,i,o),p=await u.createSession(c,d);return this.ctx.get(za).showInformationMessageOnlyOnce("Authentication successful",`You have already authenticated with ${u.label}.`,{title:"OK"}),p.accessToken}catch(d){this.ctx.get(za).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${d instanceof Error?d.message:String(d)}`);return}}};f();var VCt=Fe(Zc());var Uae=class t extends DA{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new VCt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Pr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var Hae=Fe(Zc());var tSr=new Hae.ProtocolRequestType("copilot/showPanelMessageRequest"),rSr=new Hae.ProtocolNotificationType("copilot/showPanelMessage"),qae=class extends CN{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(Pr).connection.sendNotification(rSr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(Pr).connection,i;try{i=await n.sendRequest(tSr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${nE(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var nSr=new vt("fetcher"),iSr="https://default.exp-tas.com/",$ae=class extends ln{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(hd(i)||`${r}/`.startsWith(iSr))throw i;nSr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var zCt=new vt("fetcher"),Wae=class extends ln{constructor(r,n=new x8(r),i=new v8(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.updateFetcher=s(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=$i(this.ctx,qt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(zCt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new $ae(r,n,i,()=>{zCt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(ms).onDidSetCapabilities(this.updateFetcher),r.get(xc).onDidChangeCopilotSettings(this.updateFetcher)}static{s(this,"AgentDelegatingFetcher")}get fetchStrategy(){return $i(this.ctx,qt.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(ms).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var jae=class extends za{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Pr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}showInformationMessage(r,...n){return this.connection.window.showInformationMessage(r,...n)}};f();f();var YCt=Fe(require("crypto")),KCt=require("os");var oSr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function sSr(t){let e=t.replace(/-/g,":").toLowerCase();return!oSr.has(e)}s(sSr,"validateMacAddress");function aSr(){let t=(0,KCt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(sSr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(aSr,"getMac");var qRe;function cSr(){try{let t=aSr();return YCt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(cSr,"getMacMachineId");function JCt(){return qRe||(qRe=cSr()||Ar()),qRe}s(JCt,"getMachineId");var lSr=Ar()+Date.now(),XCt=new Ss(lSr,JCt());f();f();var Gae=class extends kne{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(m1).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(m1);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.emitFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.emitFilesDeleted(o.map(a=>({uri:a.uri})))}};var Vae=class extends Bd{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new Gae(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(ms).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function ZCt(t){let e=new Qh(process.env),r=Lst(e);r.set(Qh,e),r.set(ln,new Wae(r)),r.set(Wa,new Wa(r)),h_e(r,{});let n=oHe();r.set(Li,n);let i=new PU(r);r.set(qr,i),r.set(PU,i);let o=new $g(r,n);r.set($g,o),r.set(io,new io(r,process.env)),r.set(ff,new ff(r)),r.set(Ad,new Ad(r,"agent")),r.set(Ss,XCt),r.set(pn,new Jne),r.set(Uk,fht()),r.set(Os,new Os),r.set(Ni,Lht),r.set(fR,new gse(r)),r.set(Bd,new Vae(r)),r.set(m1,new m1(r)),r.set(tl,new tl),r.set(kc,uJ(r,Q0t)),r.set(d0,new d0(r)),r.set(EC,new T3),Klt(r),Pne(r),hut(r),tHe(r),r.set(Pr,new Pr(r,t)),r.set(za,new jae(r)),r.set(CN,new qae(r)),r.set(_u,new q8(r)),r.set(Io,new Dse(r)),r.set(BU,new BU(r));let a=new Ww(r);return r.set(Cr,a),r.set(Ww,a),r.set(Kd,new yN(r,process.env)),r.set(el,new el(r)),_ht(r),Sat(r),r.set(wf,new wf),r.set(Uw,new Uw),r.set(KA,new KA),r.set(pf,new Cse),r.set(I1,new I1),r.set(pA,new Rne(r)),r.set(IC,new qN),r.set($A,new $A(r)),r.set(UE,new UE(r)),r.set(cl,new cl(r)),r.set(ju,new Rse(r)),r.set(ew,new Pse(r)),r.set(KC,new kse(r)),r.set(Ld,new Ld(r)),r.set(KE,new KE(r)),r.set(jA,new jA(r)),r.set(Lh,new Oae(r)),r.set(DA,new Uae(r)),r.set(ek,new ek),r.set(WA,new yse(r)),r.set(JC,new JC),r.set(XR,new XR),r.set(ZR,new ZR),r.set(_0,new _0),r.set(n1,new n1(r)),r.set(Nh,new ire([new Dne,new Bne])),r.set(J2,new J2(r)),r}s(ZCt,"createLanguageServerContext");f();var HRe=require("events"),fq=Fe(require("fs"));nz();var Yae=Fe(Zc());f();var t1t=Fe(require("fs")),r1t=Fe(require("http")),H8=Fe(require("path"));var zae=class{constructor(e,r){this.port=e;let n;this.server=r1t.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{e1t(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{e1t(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;H8.basename(__dirname)!=="debug"&&(a=H8.dirname(__dirname)),n??=t1t.readFileSync(H8.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function e1t(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(e1t,"writeData");var $Re=class extends Yae.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},WRe=class extends Yae.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function n1t(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new HRe.EventEmitter;let c=new zae(i,n).listen();i===0&&await j6(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=fq.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=fq.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&fq.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new HRe.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new WRe(e,n),r=new $Re(r,n)),[e,r]}s(n1t,"wrapTransports");async function s1t(){let t=FWe(process.argv.slice(2)).version(new Eo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Zh.IPCMessageReader(process),n=new Zh.IPCMessageWriter(process)):e.stdio?(r=new Zh.StreamMessageReader(process.stdin),n=new Zh.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await yx.mkdtemp(i1t.default.tmpdir()+"/github-copilot-"));try{let c=Fge(),l=JSON.parse(await yx.readFile(pq.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await yx.readFile(pq.join(c,"apps.json"),"utf8"))}catch{}let d=!1;for(let p of Object.keys(l)){let m=`${p}:${sp}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:sp},d=!0)}d&&await yx.writeFile(pq.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await yx.rm(pq.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,Zh.createConnection)(Zh.ProposedFeatures.all,...await n1t(process.env,r,n)),o=ZCt(i);console=QHe(o);let a=o.get(Pr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),rHe(o),a.listen()}s(s1t,"main");o1t.isMainThread?require.main===module&&s1t():FHe()&&OHe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
