"use strict";var $ht=Object.create;var Ok=Object.defineProperty;var u2e=Object.getOwnPropertyDescriptor;var zht=Object.getOwnPropertyNames;var Yht=Object.getPrototypeOf,Kht=Object.prototype.hasOwnProperty;var c2e=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),l2e=t=>{throw TypeError(t)};var s=(t,e)=>Ok(t,"name",{value:e,configurable:!0});var Dh=(t,e)=>()=>(t&&(e=t(t=0)),e);var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ra=(t,e)=>{for(var r in e)Ok(t,r,{get:e[r],enumerable:!0})},d2e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zht(e))!Kht.call(t,i)&&i!==r&&Ok(t,i,{get:()=>e[i],enumerable:!(n=u2e(e,i))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?$ht(Yht(t)):{},d2e(e||!t||!t.__esModule?Ok(r,"default",{value:t,enumerable:!0}):r,t)),Jht=t=>d2e(Ok({},"__esModule",{value:!0}),t),yd=(t,e,r,n)=>{for(var i=n>1?void 0:n?u2e(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Ok(e,r,i),i},na=(t,e)=>(r,n)=>e(r,n,t);var Rae=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&l2e("Object expected");var n,i;r&&(n=e[c2e("asyncDispose")]),n===void 0&&(n=e[c2e("dispose")],r&&(i=n)),typeof n!="function"&&l2e("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},kae=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=Dh(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var p2e=U(Pae=>{d();var f2e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Pae.encode=function(t){if(0<=t&&t<f2e.length)return f2e[t];throw new TypeError("Must be between 0 and 63: "+t)};Pae.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var Nae=U(Dae=>{d();var m2e=p2e(),Bae=5,h2e=1<<Bae,g2e=h2e-1,A2e=h2e;function Xht(t){return t<0?(-t<<1)+1:(t<<1)+0}s(Xht,"toVLQSigned");function Zht(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(Zht,"fromVLQSigned");Dae.encode=s(function(e){var r="",n,i=Xht(e);do n=i&g2e,i>>>=Bae,i>0&&(n|=A2e),r+=m2e.encode(n);while(i>0);return r},"base64VLQ_encode");Dae.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=m2e.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&A2e),l&=g2e,o=o+(l<<a),a+=Bae}while(c);n.value=Zht(o),n.rest=r},"base64VLQ_decode")});var qk=U(Du=>{d();function egt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(egt,"getArg");Du.getArg=egt;var y2e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,tgt=/^data:.+\,.+$/;function f6(t){var e=t.match(y2e);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(f6,"urlParse");Du.urlParse=f6;function Qk(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(Qk,"urlGenerate");Du.urlGenerate=Qk;function Lae(t){var e=t,r=f6(t);if(r){if(!r.path)return t;e=r.path}for(var n=Du.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Qk(r)):e}s(Lae,"normalize");Du.normalize=Lae;function C2e(t,e){t===""&&(t="."),e===""&&(e=".");var r=f6(e),n=f6(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Qk(r);if(r||e.match(tgt))return e;if(n&&!n.host&&!n.path)return n.host=e,Qk(n);var i=e.charAt(0)==="/"?e:Lae(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,Qk(n)):i}s(C2e,"join");Du.join=C2e;Du.isAbsolute=function(t){return t.charAt(0)==="/"||y2e.test(t)};function rgt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(rgt,"relative");Du.relative=rgt;var E2e=function(){var t=Object.create(null);return!("__proto__"in t)}();function v2e(t){return t}s(v2e,"identity");function ngt(t){return x2e(t)?"$"+t:t}s(ngt,"toSetString");Du.toSetString=E2e?v2e:ngt;function igt(t){return x2e(t)?t.slice(1):t}s(igt,"fromSetString");Du.fromSetString=E2e?v2e:igt;function x2e(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(x2e,"isProtoString");function ogt(t,e,r){var n=Uk(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Uk(t.name,e.name)}s(ogt,"compareByOriginalPositions");Du.compareByOriginalPositions=ogt;function sgt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Uk(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Uk(t.name,e.name)}s(sgt,"compareByGeneratedPositionsDeflated");Du.compareByGeneratedPositionsDeflated=sgt;function Uk(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(Uk,"strcmp");function agt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Uk(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Uk(t.name,e.name)}s(agt,"compareByGeneratedPositionsInflated");Du.compareByGeneratedPositionsInflated=agt;function cgt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(cgt,"parseSourceMapInput");Du.parseSourceMapInput=cgt;function lgt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=f6(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=C2e(Qk(n),e)}return Lae(e)}s(lgt,"computeSourceURL");Du.computeSourceURL=lgt});var Oae=U(b2e=>{d();var Mae=qk(),Fae=Object.prototype.hasOwnProperty,f_=typeof Map<"u";function I1(){this._array=[],this._set=f_?new Map:Object.create(null)}s(I1,"ArraySet");I1.fromArray=s(function(e,r){for(var n=new I1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");I1.prototype.size=s(function(){return f_?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");I1.prototype.add=s(function(e,r){var n=f_?e:Mae.toSetString(e),i=f_?this.has(e):Fae.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(f_?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");I1.prototype.has=s(function(e){if(f_)return this._set.has(e);var r=Mae.toSetString(e);return Fae.call(this._set,r)},"ArraySet_has");I1.prototype.indexOf=s(function(e){if(f_){var r=this._set.get(e);if(r>=0)return r}else{var n=Mae.toSetString(e);if(Fae.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");I1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");I1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");b2e.ArraySet=I1});var w2e=U(T2e=>{d();var I2e=qk();function ugt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||I2e.compareByGeneratedPositionsInflated(t,e)<=0}s(ugt,"generatedPositionAfter");function Pq(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(Pq,"MappingList");Pq.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");Pq.prototype.add=s(function(e){ugt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");Pq.prototype.toArray=s(function(){return this._sorted||(this._array.sort(I2e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");T2e.MappingList=Pq});var Qae=U(_2e=>{d();var p6=Nae(),vc=qk(),Bq=Oae().ArraySet,dgt=w2e().MappingList;function Qp(t){t||(t={}),this._file=vc.getArg(t,"file",null),this._sourceRoot=vc.getArg(t,"sourceRoot",null),this._skipValidation=vc.getArg(t,"skipValidation",!1),this._sources=new Bq,this._names=new Bq,this._mappings=new dgt,this._sourcesContents=null}s(Qp,"SourceMapGenerator");Qp.prototype._version=3;Qp.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Qp({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=vc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=vc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Qp.prototype.addMapping=s(function(e){var r=vc.getArg(e,"generated"),n=vc.getArg(e,"original",null),i=vc.getArg(e,"source",null),o=vc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Qp.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=vc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[vc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[vc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Qp.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=vc.relative(o,i));var a=new Bq,c=new Bq;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=vc.join(n,l.source)),o!=null&&(l.source=vc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=vc.join(n,l)),o!=null&&(l=vc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");Qp.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Qp.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!vc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=p6.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=p6.encode(p-a),a=p,l+=p6.encode(u.originalLine-1-i),i=u.originalLine-1,l+=p6.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=p6.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");Qp.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=vc.relative(r,n));var i=vc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Qp.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Qp.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");_2e.SourceMapGenerator=Qp});var S2e=U(p_=>{d();p_.GREATEST_LOWER_BOUND=1;p_.LEAST_UPPER_BOUND=2;function Uae(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Uae(a,e,r,n,i,o):o==p_.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Uae(t,a,r,n,i,o):o==p_.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Uae,"recursiveSearch");p_.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Uae(-1,r.length,e,r,n,i||p_.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var k2e=U(R2e=>{d();function qae(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(qae,"swap");function fgt(t,e){return Math.round(t+Math.random()*(e-t))}s(fgt,"randomIntInRange");function Hae(t,e,r,n){if(r<n){var i=fgt(r,n),o=r-1;qae(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,qae(t,o,c));qae(t,o+1,c);var l=o+1;Hae(t,e,r,l-1),Hae(t,e,l+1,n)}}s(Hae,"doQuickSort");R2e.quickSort=function(t,e){Hae(t,e,0,t.length-1)}});var B2e=U(Dq=>{d();var kr=qk(),Wae=S2e(),Hk=Oae().ArraySet,pgt=Nae(),m6=k2e().quickSort;function Ps(t,e){var r=t;return typeof t=="string"&&(r=kr.parseSourceMapInput(t)),r.sections!=null?new Nh(r,e):new Kl(r,e)}s(Ps,"SourceMapConsumer");Ps.fromSourceMap=function(t,e){return Kl.fromSourceMap(t,e)};Ps.prototype._version=3;Ps.prototype.__generatedMappings=null;Object.defineProperty(Ps.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Ps.prototype.__originalMappings=null;Object.defineProperty(Ps.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Ps.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Ps.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Ps.GENERATED_ORDER=1;Ps.ORIGINAL_ORDER=2;Ps.GREATEST_LOWER_BOUND=1;Ps.LEAST_UPPER_BOUND=2;Ps.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Ps.GENERATED_ORDER,a;switch(o){case Ps.GENERATED_ORDER:a=this._generatedMappings;break;case Ps.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=kr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Ps.prototype.allGeneratedPositionsFor=s(function(e){var r=kr.getArg(e,"line"),n={source:kr.getArg(e,"source"),originalLine:r,originalColumn:kr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,Wae.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");Dq.SourceMapConsumer=Ps;function Kl(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sources"),o=kr.getArg(r,"names",[]),a=kr.getArg(r,"sourceRoot",null),c=kr.getArg(r,"sourcesContent",null),l=kr.getArg(r,"mappings"),u=kr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=kr.normalize(a)),i=i.map(String).map(kr.normalize).map(function(f){return a&&kr.isAbsolute(a)&&kr.isAbsolute(f)?kr.relative(a,f):f}),this._names=Hk.fromArray(o.map(String),!0),this._sources=Hk.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return kr.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(Kl,"BasicSourceMapConsumer");Kl.prototype=Object.create(Ps.prototype);Kl.prototype.consumer=Ps;Kl.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=kr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Kl.fromSourceMap=s(function(e,r){var n=Object.create(Kl.prototype),i=n._names=Hk.fromArray(e._names.toArray(),!0),o=n._sources=Hk.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return kr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],m=new P2e;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return m6(n.__originalMappings,kr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Kl.prototype._version=3;Object.defineProperty(Kl.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function P2e(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(P2e,"Mapping");Kl.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},m={},h=[],g=[],y,E,x,b,_;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(y=new P2e,y.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(E=e.slice(f,b),x=p[E],x)f+=E.length;else{for(x=[];f<b;)pgt.decode(e,f,m),_=m.value,f=m.rest,x.push(_);if(x.length===2)throw new Error("Found a source, but no line and column");if(x.length===3)throw new Error("Found a source and line, but no column");p[E]=x}y.generatedColumn=i+x[0],i=y.generatedColumn,x.length>1&&(y.source=c+x[1],c+=x[1],y.originalLine=o+x[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+x[3],a=y.originalColumn,x.length>4&&(y.name=l+x[4],l+=x[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}m6(g,kr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,m6(h,kr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");Kl.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return Wae.search(e,r,o,a)},"SourceMapConsumer_findMapping");Kl.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Kl.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",kr.compareByGeneratedPositionsDeflated,kr.getArg(e,"bias",Ps.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=kr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=kr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=kr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:kr.getArg(i,"originalLine",null),column:kr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Kl.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Kl.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=kr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=kr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Kl.prototype.generatedPositionFor=s(function(e){var r=kr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:kr.getArg(e,"line"),originalColumn:kr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,kr.getArg(e,"bias",Ps.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:kr.getArg(o,"generatedLine",null),column:kr.getArg(o,"generatedColumn",null),lastColumn:kr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Dq.BasicSourceMapConsumer=Kl;function Nh(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Hk,this._names=new Hk;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=kr.getArg(a,"offset"),l=kr.getArg(c,"line"),u=kr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Ps(kr.getArg(a,"map"),e)}})}s(Nh,"IndexedSourceMapConsumer");Nh.prototype=Object.create(Ps.prototype);Nh.prototype.constructor=Ps;Nh.prototype._version=3;Object.defineProperty(Nh.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Nh.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=Wae.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Nh.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Nh.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Nh.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(kr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Nh.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=kr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}m6(this.__generatedMappings,kr.compareByGeneratedPositionsDeflated),m6(this.__originalMappings,kr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Dq.IndexedSourceMapConsumer=Nh});var N2e=U(D2e=>{d();var mgt=Qae().SourceMapGenerator,Nq=qk(),hgt=/(\r?\n)/,ggt=10,Wk="$$$isSourceNode$$$";function g0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Wk]=!0,n!=null&&this.add(n)}s(g0,"SourceNode");g0.fromStringWithSourceMap=s(function(e,r,n){var i=new g0,o=e.split(hgt),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(m){if(f!==null)if(l<m.generatedLine)p(f,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(f,g),f=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}f=m},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=Nq.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?Nq.join(n,m.source):m.source;i.add(new g0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");g0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Wk]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");g0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Wk]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");g0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Wk]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");g0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");g0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[Wk]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");g0.prototype.setSourceContent=s(function(e,r){this.sourceContents[Nq.toSetString(e)]=r},"SourceNode_setSourceContent");g0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Wk]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(Nq.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");g0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");g0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new mgt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===ggt?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");D2e.SourceNode=g0});var L2e=U(Lq=>{d();Lq.SourceMapGenerator=Qae().SourceMapGenerator;Lq.SourceMapConsumer=B2e().SourceMapConsumer;Lq.SourceNode=N2e().SourceNode});var F2e=U((ECr,M2e)=>{d();var Agt=Object.prototype.toString,Gae=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function ygt(t){return Agt.call(t).slice(8,-1)==="ArrayBuffer"}s(ygt,"isArrayBuffer");function Cgt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Gae?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(Cgt,"fromArrayBuffer");function Egt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Gae?Buffer.from(t,e):new Buffer(t,e)}s(Egt,"fromString");function vgt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return ygt(t)?Cgt(t,e,r):typeof t=="string"?Egt(t,e):Gae?Buffer.from(t):new Buffer(t)}s(vgt,"bufferFrom");M2e.exports=vgt});var j2e=U((h_,zae)=>{d();var xgt=L2e().SourceMapConsumer,jae=require("path"),jA;try{jA=require("fs"),(!jA.existsSync||!jA.readFileSync)&&(jA=null)}catch{}var bgt=F2e();function O2e(t,e){return t.require(e)}s(O2e,"dynamicRequire");var Q2e=!1,U2e=!1,Vae=!1,h6="auto",m_={},g6={},Igt=/^data:application\/json[^,]+base64,/,Xx=[],Zx=[];function Yae(){return h6==="browser"?!0:h6==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(Yae,"isInBrowser");function Tgt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(Tgt,"hasGlobalProcessEventEmitter");function wgt(){return typeof process=="object"&&process!==null?process.version:""}s(wgt,"globalProcessVersion");function _gt(){if(typeof process=="object"&&process!==null)return process.stderr}s(_gt,"globalProcessStderr");function Sgt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(Sgt,"globalProcessExit");function Mq(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(Mq,"handlerExec");var Kae=Mq(Xx);Xx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in m_)return m_[t];var e="";try{if(jA)jA.existsSync(t)&&(e=jA.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return m_[t]=e});function $ae(t,e){if(!t)return e;var r=jae.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+jae.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+jae.resolve(r.slice(i.length),e)}s($ae,"supportRelativeURL");function Rgt(t){var e;if(Yae())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Kae(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(Rgt,"retrieveSourceMapURL");var Jae=Mq(Zx);Zx.push(function(t){var e=Rgt(t);if(!e)return null;var r;if(Igt.test(e)){var n=e.slice(e.indexOf(",")+1);r=bgt(n,"base64").toString(),e=t}else e=$ae(t,e),r=Kae(e);return r?{url:e,map:r}:null});function Xae(t){var e=g6[t.source];if(!e){var r=Jae(t.source);r?(e=g6[t.source]={url:r.url,map:new xgt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=$ae(e.url,i);m_[c]=a}})):e=g6[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=$ae(e.url,n.source),n}return t}s(Xae,"mapSourcePosition");function H2e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Xae({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+H2e(e[2])+")":t}s(H2e,"mapEvalOrigin");function kgt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(kgt,"CallSiteToString");function q2e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=kgt,e}s(q2e,"cloneCallSite");function W2e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(wgt())?0:62;n===1&&i>a&&!Yae()&&!t.isEval()&&(i-=a);var c=Xae({source:r,line:n,column:i});e.curPosition=c,t=q2e(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=H2e(u),t=q2e(t),t.getEvalOrigin=function(){return u}),t}s(W2e,"wrapCallSite");function Pgt(t,e){Vae&&(m_={},g6={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+W2e(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(Pgt,"prepareStackTrace");function G2e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=m_[r];if(!o&&jA&&jA.existsSync(r))try{o=jA.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(G2e,"getErrorSource");function Bgt(t){var e=G2e(t),r=_gt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Sgt(1)}s(Bgt,"printErrorAndExit");function Dgt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return Bgt(arguments[1])}return t.apply(this,arguments)}}s(Dgt,"shimEmitUncaughtException");var Ngt=Xx.slice(0),Lgt=Zx.slice(0);h_.wrapCallSite=W2e;h_.getErrorSource=G2e;h_.mapSourcePosition=Xae;h_.retrieveSourceMap=Jae;h_.install=function(t){if(t=t||{},t.environment&&(h6=t.environment,["node","browser","auto"].indexOf(h6)===-1))throw new Error("environment "+h6+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Xx.length=0),Xx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Zx.length=0),Zx.unshift(t.retrieveSourceMap)),t.hookRequire&&!Yae()){var e=O2e(zae,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return m_[a]=o,g6[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(Vae||(Vae="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),Q2e||(Q2e=!0,Error.prepareStackTrace=Pgt),!U2e){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=O2e(zae,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&Tgt()&&(U2e=!0,Dgt())}};h_.resetRetrieveHandlers=function(){Xx.length=0,Zx.length=0,Xx=Ngt.slice(0),Zx=Lgt.slice(0),Jae=Mq(Zx),Kae=Mq(Xx)}});var Vi=U((Oq,z2e)=>{d();(function(t,e){typeof Oq=="object"?z2e.exports=Oq=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Oq,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function x(){}return s(x,"F"),function(b){var _;return x.prototype=b,_=new x,x.prototype=null,_}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(x){var b=o(this);return x&&b.mixIn(x),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var x=this.extend();return x.init.apply(x,arguments),x},"create"),init:s(function(){},"init"),mixIn:s(function(x){for(var b in x)x.hasOwnProperty(b)&&(this[b]=x[b]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(x,b){x=this.words=x||[],b!=r?this.sigBytes=b:this.sigBytes=x.length*4},"init"),toString:s(function(x){return(x||p).stringify(this)},"toString"),concat:s(function(x){var b=this.words,_=x.words,k=this.sigBytes,P=x.sigBytes;if(this.clamp(),k%4)for(var N=0;N<P;N++){var M=_[N>>>2]>>>24-N%4*8&255;b[k+N>>>2]|=M<<24-(k+N)%4*8}else for(var J=0;J<P;J+=4)b[k+J>>>2]=_[J>>>2];return this.sigBytes+=P,this},"concat"),clamp:s(function(){var x=this.words,b=this.sigBytes;x[b>>>2]&=4294967295<<32-b%4*8,x.length=e.ceil(b/4)},"clamp"),clone:s(function(){var x=l.clone.call(this);return x.words=this.words.slice(0),x},"clone"),random:s(function(x){for(var b=[],_=0;_<x;_+=4)b.push(i());return new u.init(b,x)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k+=2)_[k>>>3]|=parseInt(x.substr(k,2),16)<<24-k%8*4;return new u.init(_,b/2)},"parse")},m=f.Latin1={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k++)_[k>>>2]|=(x.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,b)},"parse")},h=f.Utf8={stringify:s(function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(x){return m.parse(unescape(encodeURIComponent(x)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(x){typeof x=="string"&&(x=h.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},"_append"),_process:s(function(x){var b,_=this._data,k=_.words,P=_.sigBytes,N=this.blockSize,M=N*4,J=P/M;x?J=e.ceil(J):J=e.max((J|0)-this._minBufferSize,0);var pe=J*N,Y=e.min(pe*4,P);if(pe){for(var G=0;G<pe;G+=N)this._doProcessBlock(k,G);b=k.splice(0,pe),_.sigBytes-=Y}return new u.init(b,Y)},"_process"),clone:s(function(){var x=l.clone.call(this);return x._data=this._data.clone(),x},"clone"),_minBufferSize:0}),y=c.Hasher=g.extend({cfg:l.extend(),init:s(function(x){this.cfg=this.cfg.extend(x),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(x){return this._append(x),this._process(),this},"update"),finalize:s(function(x){x&&this._append(x);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(x){return function(b,_){return new x.init(_).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(x){return function(b,_){return new E.HMAC.init(x,_).finalize(b)}},"_createHmacHelper")}),E=a.algo={};return a}(Math);return t})});var v6=U((Qq,Y2e)=>{d();(function(t,e){typeof Qq=="object"?Y2e.exports=Qq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Qq,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],m=0;m<f;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,m=0;m<p;m++)f[m]=f[m].clone();return u},"clone")})}(),t})});var J2e=U((Uq,K2e)=>{d();(function(t,e){typeof Uq=="object"?K2e.exports=Uq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Uq,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var Z2e=U((qq,X2e)=>{d();(function(t,e){typeof qq=="object"?X2e.exports=qq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(qq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var tb=U((Hq,eRe)=>{d();(function(t,e){typeof Hq=="object"?eRe.exports=Hq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Hq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,y=l[m+2>>>2]>>>24-(m+2)%4*8&255,E=h<<16|g<<8|y,x=0;x<4&&m+x*.75<u;x++)p.push(f.charAt(E>>>6*(3-x)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var rRe=U((Wq,tRe)=>{d();(function(t,e){typeof Wq=="object"?tRe.exports=Wq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Wq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<f;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,E=u[h+2>>>2]>>>24-(h+2)%4*8&255,x=g<<16|y<<8|E,b=0;b<4&&h+b*.75<f;b++)m.push(p.charAt(x>>>6*(3-b)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<f.length;m++)p[f.charCodeAt(m)]=m}var h=f.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var rb=U((Gq,nRe)=>{d();(function(t,e){typeof Gq=="object"?nRe.exports=Gq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Gq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var E=g+y,x=h[E];h[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,_=h[g+0],k=h[g+1],P=h[g+2],N=h[g+3],M=h[g+4],J=h[g+5],pe=h[g+6],Y=h[g+7],G=h[g+8],H=h[g+9],ce=h[g+10],ie=h[g+11],V=h[g+12],Q=h[g+13],z=h[g+14],re=h[g+15],fe=b[0],ne=b[1],me=b[2],he=b[3];fe=u(fe,ne,me,he,_,7,c[0]),he=u(he,fe,ne,me,k,12,c[1]),me=u(me,he,fe,ne,P,17,c[2]),ne=u(ne,me,he,fe,N,22,c[3]),fe=u(fe,ne,me,he,M,7,c[4]),he=u(he,fe,ne,me,J,12,c[5]),me=u(me,he,fe,ne,pe,17,c[6]),ne=u(ne,me,he,fe,Y,22,c[7]),fe=u(fe,ne,me,he,G,7,c[8]),he=u(he,fe,ne,me,H,12,c[9]),me=u(me,he,fe,ne,ce,17,c[10]),ne=u(ne,me,he,fe,ie,22,c[11]),fe=u(fe,ne,me,he,V,7,c[12]),he=u(he,fe,ne,me,Q,12,c[13]),me=u(me,he,fe,ne,z,17,c[14]),ne=u(ne,me,he,fe,re,22,c[15]),fe=f(fe,ne,me,he,k,5,c[16]),he=f(he,fe,ne,me,pe,9,c[17]),me=f(me,he,fe,ne,ie,14,c[18]),ne=f(ne,me,he,fe,_,20,c[19]),fe=f(fe,ne,me,he,J,5,c[20]),he=f(he,fe,ne,me,ce,9,c[21]),me=f(me,he,fe,ne,re,14,c[22]),ne=f(ne,me,he,fe,M,20,c[23]),fe=f(fe,ne,me,he,H,5,c[24]),he=f(he,fe,ne,me,z,9,c[25]),me=f(me,he,fe,ne,N,14,c[26]),ne=f(ne,me,he,fe,G,20,c[27]),fe=f(fe,ne,me,he,Q,5,c[28]),he=f(he,fe,ne,me,P,9,c[29]),me=f(me,he,fe,ne,Y,14,c[30]),ne=f(ne,me,he,fe,V,20,c[31]),fe=p(fe,ne,me,he,J,4,c[32]),he=p(he,fe,ne,me,G,11,c[33]),me=p(me,he,fe,ne,ie,16,c[34]),ne=p(ne,me,he,fe,z,23,c[35]),fe=p(fe,ne,me,he,k,4,c[36]),he=p(he,fe,ne,me,M,11,c[37]),me=p(me,he,fe,ne,Y,16,c[38]),ne=p(ne,me,he,fe,ce,23,c[39]),fe=p(fe,ne,me,he,Q,4,c[40]),he=p(he,fe,ne,me,_,11,c[41]),me=p(me,he,fe,ne,N,16,c[42]),ne=p(ne,me,he,fe,pe,23,c[43]),fe=p(fe,ne,me,he,H,4,c[44]),he=p(he,fe,ne,me,V,11,c[45]),me=p(me,he,fe,ne,re,16,c[46]),ne=p(ne,me,he,fe,P,23,c[47]),fe=m(fe,ne,me,he,_,6,c[48]),he=m(he,fe,ne,me,Y,10,c[49]),me=m(me,he,fe,ne,z,15,c[50]),ne=m(ne,me,he,fe,J,21,c[51]),fe=m(fe,ne,me,he,V,6,c[52]),he=m(he,fe,ne,me,N,10,c[53]),me=m(me,he,fe,ne,ce,15,c[54]),ne=m(ne,me,he,fe,k,21,c[55]),fe=m(fe,ne,me,he,G,6,c[56]),he=m(he,fe,ne,me,re,10,c[57]),me=m(me,he,fe,ne,pe,15,c[58]),ne=m(ne,me,he,fe,Q,21,c[59]),fe=m(fe,ne,me,he,M,6,c[60]),he=m(he,fe,ne,me,ie,10,c[61]),me=m(me,he,fe,ne,P,15,c[62]),ne=m(ne,me,he,fe,H,21,c[63]),b[0]=b[0]+fe|0,b[1]=b[1]+ne|0,b[2]=b[2]+me|0,b[3]=b[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,E=h.sigBytes*8;g[E>>>5]|=128<<24-E%32;var x=e.floor(y/4294967296),b=y;g[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(E+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,P=0;P<4;P++){var N=k[P];k[P]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,E,x,b,_){var k=h+(g&y|~g&E)+x+_;return(k<<b|k>>>32-b)+g}s(u,"FF");function f(h,g,y,E,x,b,_){var k=h+(g&E|y&~E)+x+_;return(k<<b|k>>>32-b)+g}s(f,"GG");function p(h,g,y,E,x,b,_){var k=h+(g^y^E)+x+_;return(k<<b|k>>>32-b)+g}s(p,"HH");function m(h,g,y,E,x,b,_){var k=h+(y^(g|~E))+x+_;return(k<<b|k>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var Zae=U((jq,iRe)=>{d();(function(t,e){typeof jq=="object"?iRe.exports=jq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(jq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],m=f[1],h=f[2],g=f[3],y=f[4],E=0;E<80;E++){if(E<16)a[E]=l[u+E]|0;else{var x=a[E-3]^a[E-8]^a[E-14]^a[E-16];a[E]=x<<1|x>>>31}var b=(p<<5|p>>>27)+y+a[E];E<20?b+=(m&h|~m&g)+1518500249:E<40?b+=(m^h^g)+1859775393:E<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+h|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var $q=U((Vq,oRe)=>{d();(function(t,e){typeof Vq=="object"?oRe.exports=Vq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Vq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(y){for(var E=e.sqrt(y),x=2;x<=E;x++)if(!(y%x))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],E=h[2],x=h[3],b=h[4],_=h[5],k=h[6],P=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var M=u[N-15],J=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,pe=u[N-2],Y=(pe<<15|pe>>>17)^(pe<<13|pe>>>19)^pe>>>10;u[N]=J+u[N-7]+Y+u[N-16]}var G=b&_^~b&k,H=g&y^g&E^y&E,ce=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=P+ie+G+l[N]+u[N],Q=ce+H;P=k,k=_,_=b,b=x+V|0,x=E,E=y,y=g,g=V+Q|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+E|0,h[3]=h[3]+x|0,h[4]=h[4]+b|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+P|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var aRe=U((zq,sRe)=>{d();(function(t,e,r){typeof zq=="object"?sRe.exports=zq=e(Vi(),$q()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(zq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var ece=U((Yq,cRe)=>{d();(function(t,e,r){typeof Yq=="object"?cRe.exports=Yq=e(Vi(),v6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Yq,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],E=g[1],x=g[2],b=g[3],_=g[4],k=g[5],P=g[6],N=g[7],M=y.high,J=y.low,pe=E.high,Y=E.low,G=x.high,H=x.low,ce=b.high,ie=b.low,V=_.high,Q=_.low,z=k.high,re=k.low,fe=P.high,ne=P.low,me=N.high,he=N.low,Qe=M,ke=J,tt=pe,Fe=Y,ht=G,St=H,xt=ce,Tt=ie,le=V,Ue=Q,ye=z,nt=re,ee=fe,oe=ne,We=me,De=he,xe=0;xe<80;xe++){var Ye,st,yt=f[xe];if(xe<16)st=yt.high=m[h+xe*2]|0,Ye=yt.low=m[h+xe*2+1]|0;else{var qt=f[xe-15],dr=qt.high,Ft=qt.low,Yr=(dr>>>1|Ft<<31)^(dr>>>8|Ft<<24)^dr>>>7,en=(Ft>>>1|dr<<31)^(Ft>>>8|dr<<24)^(Ft>>>7|dr<<25),yn=f[xe-2],Ae=yn.high,Ge=yn.low,ft=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,Et=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Zt=f[xe-7],Vt=Zt.high,vr=Zt.low,Ir=f[xe-16],zt=Ir.high,ir=Ir.low;Ye=en+vr,st=Yr+Vt+(Ye>>>0<en>>>0?1:0),Ye=Ye+Et,st=st+ft+(Ye>>>0<Et>>>0?1:0),Ye=Ye+ir,st=st+zt+(Ye>>>0<ir>>>0?1:0),yt.high=st,yt.low=Ye}var Xt=le&ye^~le&ee,Sr=Ue&nt^~Ue&oe,qr=Qe&tt^Qe&ht^tt&ht,tn=ke&Fe^ke&St^Fe&St,zn=(Qe>>>28|ke<<4)^(Qe<<30|ke>>>2)^(Qe<<25|ke>>>7),ai=(ke>>>28|Qe<<4)^(ke<<30|Qe>>>2)^(ke<<25|Qe>>>7),Hn=(le>>>14|Ue<<18)^(le>>>18|Ue<<14)^(le<<23|Ue>>>9),ri=(Ue>>>14|le<<18)^(Ue>>>18|le<<14)^(Ue<<23|le>>>9),ln=u[xe],ni=ln.high,_e=ln.low,W=De+ri,ge=We+Hn+(W>>>0<De>>>0?1:0),W=W+Sr,ge=ge+Xt+(W>>>0<Sr>>>0?1:0),W=W+_e,ge=ge+ni+(W>>>0<_e>>>0?1:0),W=W+Ye,ge=ge+st+(W>>>0<Ye>>>0?1:0),ve=ai+tn,te=zn+qr+(ve>>>0<ai>>>0?1:0);We=ee,De=oe,ee=ye,oe=nt,ye=le,nt=Ue,Ue=Tt+W|0,le=xt+ge+(Ue>>>0<Tt>>>0?1:0)|0,xt=ht,Tt=St,ht=tt,St=Fe,tt=Qe,Fe=ke,ke=W+ve|0,Qe=ge+te+(ke>>>0<W>>>0?1:0)|0}J=y.low=J+ke,y.high=M+Qe+(J>>>0<ke>>>0?1:0),Y=E.low=Y+Fe,E.high=pe+tt+(Y>>>0<Fe>>>0?1:0),H=x.low=H+St,x.high=G+ht+(H>>>0<St>>>0?1:0),ie=b.low=ie+Tt,b.high=ce+xt+(ie>>>0<Tt>>>0?1:0),Q=_.low=Q+Ue,_.high=V+le+(Q>>>0<Ue>>>0?1:0),re=k.low=re+nt,k.high=z+ye+(re>>>0<nt>>>0?1:0),ne=P.low=ne+oe,P.high=fe+ee+(ne>>>0<oe>>>0?1:0),he=N.low=he+De,N.high=me+We+(he>>>0<De>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var E=this._hash.toX32();return E},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var uRe=U((Kq,lRe)=>{d();(function(t,e,r){typeof Kq=="object"?lRe.exports=Kq=e(Vi(),v6(),ece()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(Kq,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var fRe=U((Jq,dRe)=>{d();(function(t,e,r){typeof Jq=="object"?dRe.exports=Jq=e(Vi(),v6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Jq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,y=0,E=0;E<24;E++){u[g+5*y]=(E+1)*(E+2)/2%64;var x=y%5,b=(2*g+3*y)%5;g=x,y=b}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var P=0,N=0,M=0;M<7;M++){if(_&1){var J=(1<<M)-1;J<32?N^=1<<J:P^=1<<J-32}_&128?_=_<<1^113:_<<=1}p[k]=c.create(P,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var E=this._state,x=this.blockSize/2,b=0;b<x;b++){var _=g[y+2*b],k=g[y+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var P=E[b];P.high^=k,P.low^=_}for(var N=0;N<24;N++){for(var M=0;M<5;M++){for(var J=0,pe=0,Y=0;Y<5;Y++){var P=E[M+5*Y];J^=P.high,pe^=P.low}var G=m[M];G.high=J,G.low=pe}for(var M=0;M<5;M++)for(var H=m[(M+4)%5],ce=m[(M+1)%5],ie=ce.high,V=ce.low,J=H.high^(ie<<1|V>>>31),pe=H.low^(V<<1|ie>>>31),Y=0;Y<5;Y++){var P=E[M+5*Y];P.high^=J,P.low^=pe}for(var Q=1;Q<25;Q++){var J,pe,P=E[Q],z=P.high,re=P.low,fe=u[Q];fe<32?(J=z<<fe|re>>>32-fe,pe=re<<fe|z>>>32-fe):(J=re<<fe-32|z>>>64-fe,pe=z<<fe-32|re>>>64-fe);var ne=m[f[Q]];ne.high=J,ne.low=pe}var me=m[0],he=E[0];me.high=he.high,me.low=he.low;for(var M=0;M<5;M++)for(var Y=0;Y<5;Y++){var Q=M+5*Y,P=E[Q],Qe=m[Q],ke=m[(M+1)%5+5*Y],tt=m[(M+2)%5+5*Y];P.high=Qe.high^~ke.high&tt.high,P.low=Qe.low^~ke.low&tt.low}var P=E[0],Fe=p[N];P.high^=Fe.high,P.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,E=this._nDataBytes*8,x=g.sigBytes*8,b=this.blockSize*32;y[x>>>5]|=1<<24-x%32,y[(e.ceil((x+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],M=0;M<P;M++){var J=_[M],pe=J.high,Y=J.low;pe=(pe<<8|pe>>>24)&16711935|(pe<<24|pe>>>8)&4278255360,Y=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,N.push(Y),N.push(pe)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),E=0;E<25;E++)y[E]=y[E].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var mRe=U((Xq,pRe)=>{d();(function(t,e){typeof Xq=="object"?pRe.exports=Xq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Xq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,P){for(var N=0;N<16;N++){var M=P+N,J=k[M];k[M]=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360}var pe=this._hash.words,Y=p.words,G=m.words,H=c.words,ce=l.words,ie=u.words,V=f.words,Q,z,re,fe,ne,me,he,Qe,ke,tt;me=Q=pe[0],he=z=pe[1],Qe=re=pe[2],ke=fe=pe[3],tt=ne=pe[4];for(var Fe,N=0;N<80;N+=1)Fe=Q+k[P+H[N]]|0,N<16?Fe+=g(z,re,fe)+Y[0]:N<32?Fe+=y(z,re,fe)+Y[1]:N<48?Fe+=E(z,re,fe)+Y[2]:N<64?Fe+=x(z,re,fe)+Y[3]:Fe+=b(z,re,fe)+Y[4],Fe=Fe|0,Fe=_(Fe,ie[N]),Fe=Fe+ne|0,Q=ne,ne=fe,fe=_(re,10),re=z,z=Fe,Fe=me+k[P+ce[N]]|0,N<16?Fe+=b(he,Qe,ke)+G[0]:N<32?Fe+=x(he,Qe,ke)+G[1]:N<48?Fe+=E(he,Qe,ke)+G[2]:N<64?Fe+=y(he,Qe,ke)+G[3]:Fe+=g(he,Qe,ke)+G[4],Fe=Fe|0,Fe=_(Fe,V[N]),Fe=Fe+tt|0,me=tt,tt=ke,ke=_(Qe,10),Qe=he,he=Fe;Fe=pe[1]+re+ke|0,pe[1]=pe[2]+fe+tt|0,pe[2]=pe[3]+ne+me|0,pe[3]=pe[4]+Q+he|0,pe[4]=pe[0]+z+Qe|0,pe[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,P=k.words,N=this._nDataBytes*8,M=k.sigBytes*8;P[M>>>5]|=128<<24-M%32,P[(M+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(P.length+1)*4,this._process();for(var J=this._hash,pe=J.words,Y=0;Y<5;Y++){var G=pe[Y];pe[Y]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return J},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,P,N){return k^P^N}s(g,"f1");function y(k,P,N){return k&P|~k&N}s(y,"f2");function E(k,P,N){return(k|~P)^N}s(E,"f3");function x(k,P,N){return k&N|P&~N}s(x,"f4");function b(k,P,N){return k^(P|~N)}s(b,"f5");function _(k,P){return k<<P|k>>>32-P}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var eH=U((Zq,hRe)=>{d();(function(t,e){typeof Zq=="object"?hRe.exports=Zq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Zq,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,E=0;E<f;E++)g[E]^=1549556828,y[E]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var ARe=U((tH,gRe)=>{d();(function(t,e,r){typeof tH=="object"?gRe.exports=tH=e(Vi(),$q(),eH()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(tH,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,E=g.words,x=p.keySize,b=p.iterations;y.length<x;){var _=m.update(f).finalize(g);m.reset();for(var k=_.words,P=k.length,N=_,M=1;M<b;M++){N=m.finalize(N),m.reset();for(var J=N.words,pe=0;pe<P;pe++)k[pe]^=J[pe]}h.concat(_),E[0]++}return h.sigBytes=x*4,h},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var T1=U((rH,yRe)=>{d();(function(t,e,r){typeof rH=="object"?yRe.exports=rH=e(Vi(),Zae(),eH()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(rH,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,E=p.iterations;g.length<y;){f&&m.update(f),f=m.update(l).finalize(u),m.reset();for(var x=1;x<E;x++)f=m.finalize(f),m.reset();h.concat(f)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var zc=U((nH,CRe)=>{d();(function(t,e,r){typeof nH=="object"?CRe.exports=nH=e(Vi(),T1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(nH,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(G,H){return this.create(this._ENC_XFORM_MODE,G,H)},"createEncryptor"),createDecryptor:s(function(G,H){return this.create(this._DEC_XFORM_MODE,G,H)},"createDecryptor"),init:s(function(G,H,ce){this.cfg=this.cfg.extend(ce),this._xformMode=G,this._key=H,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(G){return this._append(G),this._process()},"process"),finalize:s(function(G){G&&this._append(G);var H=this._doFinalize();return H},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function G(H){return typeof H=="string"?Y:M}return s(G,"selectCipherStrategy"),function(H){return{encrypt:s(function(ce,ie,V){return G(ie).encrypt(H,ce,ie,V)},"encrypt"),decrypt:s(function(ce,ie,V){return G(ie).decrypt(H,ce,ie,V)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var G=this._process(!0);return G},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(G,H){return this.Encryptor.create(G,H)},"createEncryptor"),createDecryptor:s(function(G,H){return this.Decryptor.create(G,H)},"createDecryptor"),init:s(function(G,H){this._cipher=G,this._iv=H},"init")}),E=g.CBC=function(){var G=y.extend();G.Encryptor=G.extend({processBlock:s(function(ce,ie){var V=this._cipher,Q=V.blockSize;H.call(this,ce,ie,Q),V.encryptBlock(ce,ie),this._prevBlock=ce.slice(ie,ie+Q)},"processBlock")}),G.Decryptor=G.extend({processBlock:s(function(ce,ie){var V=this._cipher,Q=V.blockSize,z=ce.slice(ie,ie+Q);V.decryptBlock(ce,ie),H.call(this,ce,ie,Q),this._prevBlock=z},"processBlock")});function H(ce,ie,V){var Q,z=this._iv;z?(Q=z,this._iv=e):Q=this._prevBlock;for(var re=0;re<V;re++)ce[ie+re]^=Q[re]}return s(H,"xorBlock"),G}(),x=r.pad={},b=x.Pkcs7={pad:s(function(G,H){for(var ce=H*4,ie=ce-G.sigBytes%ce,V=ie<<24|ie<<16|ie<<8|ie,Q=[],z=0;z<ie;z+=4)Q.push(V);var re=o.create(Q,ie);G.concat(re)},"pad"),unpad:s(function(G){var H=G.words[G.sigBytes-1>>>2]&255;G.sigBytes-=H},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:b}),reset:s(function(){var G;m.reset.call(this);var H=this.cfg,ce=H.iv,ie=H.mode;this._xformMode==this._ENC_XFORM_MODE?G=ie.createEncryptor:(G=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==G?this._mode.init(this,ce&&ce.words):(this._mode=G.call(ie,this,ce&&ce.words),this._mode.__creator=G)},"reset"),_doProcessBlock:s(function(G,H){this._mode.processBlock(G,H)},"_doProcessBlock"),_doFinalize:s(function(){var G,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),G=this._process(!0)):(G=this._process(!0),H.unpad(G)),G},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(G){this.mixIn(G)},"init"),toString:s(function(G){return(G||this.formatter).stringify(this)},"toString")}),P=r.format={},N=P.OpenSSL={stringify:s(function(G){var H,ce=G.ciphertext,ie=G.salt;return ie?H=o.create([1398893684,1701076831]).concat(ie).concat(ce):H=ce,H.toString(u)},"stringify"),parse:s(function(G){var H,ce=u.parse(G),ie=ce.words;return ie[0]==1398893684&&ie[1]==1701076831&&(H=o.create(ie.slice(2,4)),ie.splice(0,4),ce.sigBytes-=16),k.create({ciphertext:ce,salt:H})},"parse")},M=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie);var V=G.createEncryptor(ce,ie),Q=V.finalize(H),z=V.cfg;return k.create({ciphertext:Q,key:ce,iv:z.iv,algorithm:G,mode:z.mode,padding:z.padding,blockSize:G.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie),H=this._parse(H,ie.format);var V=G.createDecryptor(ce,ie).finalize(H.ciphertext);return V},"decrypt"),_parse:s(function(G,H){return typeof G=="string"?H.parse(G,this):G},"_parse")}),J=r.kdf={},pe=J.OpenSSL={execute:s(function(G,H,ce,ie,V){if(ie||(ie=o.random(64/8)),V)var Q=p.create({keySize:H+ce,hasher:V}).compute(G,ie);else var Q=p.create({keySize:H+ce}).compute(G,ie);var z=o.create(Q.words.slice(H),ce*4);return Q.sigBytes=H*4,k.create({key:Q,iv:z,salt:ie})},"execute")},Y=n.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:pe}),encrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie);var V=ie.kdf.execute(ce,G.keySize,G.ivSize,ie.salt,ie.hasher);ie.iv=V.iv;var Q=M.encrypt.call(this,G,H,V.key,ie);return Q.mixIn(V),Q},"encrypt"),decrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie),H=this._parse(H,ie.format);var V=ie.kdf.execute(ce,G.keySize,G.ivSize,H.salt,ie.hasher);ie.iv=V.iv;var Q=M.decrypt.call(this,G,H,V.key,ie);return Q},"decrypt")})}()})});var vRe=U((iH,ERe)=>{d();(function(t,e,r){typeof iH=="object"?ERe.exports=iH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(iH,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var bRe=U((oH,xRe)=>{d();(function(t,e,r){typeof oH=="object"?xRe.exports=oH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(oH,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var TRe=U((sH,IRe)=>{d();(function(t,e,r){typeof sH=="object"?IRe.exports=sH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(sH,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var _Re=U((aH,wRe)=>{d();(function(t,e,r){typeof aH=="object"?wRe.exports=aH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(aH,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var RRe=U((cH,SRe)=>{d();(function(t,e,r){typeof cH=="object"?SRe.exports=cH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(cH,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var PRe=U((lH,kRe)=>{d();(function(t,e,r){typeof lH=="object"?kRe.exports=lH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(lH,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var DRe=U((uH,BRe)=>{d();(function(t,e,r){typeof uH=="object"?BRe.exports=uH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(uH,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var LRe=U((dH,NRe)=>{d();(function(t,e,r){typeof dH=="object"?NRe.exports=dH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(dH,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var FRe=U((fH,MRe)=>{d();(function(t,e,r){typeof fH=="object"?MRe.exports=fH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(fH,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var QRe=U((pH,ORe)=>{d();(function(t,e,r){typeof pH=="object"?ORe.exports=pH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pH,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var qRe=U((mH,URe)=>{d();(function(t,e,r){typeof mH=="object"?URe.exports=mH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mH,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var WRe=U((hH,HRe)=>{d();(function(t,e,r){typeof hH=="object"?HRe.exports=hH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(hH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],m=[],h=[],g=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var _=0,k=0,b=0;b<256;b++){var P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^P&255^99,o[_]=P,a[P]=_;var N=x[_],M=x[N],J=x[M],pe=x[P]*257^P*16843008;c[_]=pe<<24|pe>>>8,l[_]=pe<<16|pe>>>16,u[_]=pe<<8|pe>>>24,f[_]=pe;var pe=J*16843009^M*65537^N*257^_*16843008;p[P]=pe<<24|pe>>>8,m[P]=pe<<16|pe>>>16,h[P]=pe<<8|pe>>>24,g[P]=pe,_?(_=N^x[x[x[J^N]]],k^=x[x[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],E=i.AES=n.extend({_doReset:s(function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,k=b.sigBytes/4,P=this._nRounds=k+6,N=(P+1)*4,M=this._keySchedule=[],J=0;J<N;J++)J<k?M[J]=_[J]:(x=M[J-1],J%k?k>6&&J%k==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=y[J/k|0]<<24),M[J]=M[J-k]^x);for(var pe=this._invKeySchedule=[],Y=0;Y<N;Y++){var J=N-Y;if(Y%4)var x=M[J];else var x=M[J-4];Y<4||J<=4?pe[Y]=x:pe[Y]=p[o[x>>>24]]^m[o[x>>>16&255]]^h[o[x>>>8&255]]^g[o[x&255]]}}},"_doReset"),encryptBlock:s(function(x,b){this._doCryptBlock(x,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(x,b){var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_,this._doCryptBlock(x,b,this._invKeySchedule,p,m,h,g,a);var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_},"decryptBlock"),_doCryptBlock:s(function(x,b,_,k,P,N,M,J){for(var pe=this._nRounds,Y=x[b]^_[0],G=x[b+1]^_[1],H=x[b+2]^_[2],ce=x[b+3]^_[3],ie=4,V=1;V<pe;V++){var Q=k[Y>>>24]^P[G>>>16&255]^N[H>>>8&255]^M[ce&255]^_[ie++],z=k[G>>>24]^P[H>>>16&255]^N[ce>>>8&255]^M[Y&255]^_[ie++],re=k[H>>>24]^P[ce>>>16&255]^N[Y>>>8&255]^M[G&255]^_[ie++],fe=k[ce>>>24]^P[Y>>>16&255]^N[G>>>8&255]^M[H&255]^_[ie++];Y=Q,G=z,H=re,ce=fe}var Q=(J[Y>>>24]<<24|J[G>>>16&255]<<16|J[H>>>8&255]<<8|J[ce&255])^_[ie++],z=(J[G>>>24]<<24|J[H>>>16&255]<<16|J[ce>>>8&255]<<8|J[Y&255])^_[ie++],re=(J[H>>>24]<<24|J[ce>>>16&255]<<16|J[Y>>>8&255]<<8|J[G&255])^_[ie++],fe=(J[ce>>>24]<<24|J[Y>>>16&255]<<16|J[G>>>8&255]<<8|J[H&255])^_[ie++];x[b]=Q,x[b+1]=z,x[b+2]=re,x[b+3]=fe},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(E)}(),t.AES})});var jRe=U((gH,GRe)=>{d();(function(t,e,r){typeof gH=="object"?GRe.exports=gH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(gH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,E=y.words,x=[],b=0;b<56;b++){var _=a[b]-1;x[b]=E[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],P=0;P<16;P++){for(var N=k[P]=[],M=l[P],b=0;b<24;b++)N[b/6|0]|=x[(c[b]-1+M)%28]<<31-b%6,N[4+(b/6|0)]|=x[28+(c[b+24]-1+M)%28]<<31-b%6;N[0]=N[0]<<1|N[0]>>>31;for(var b=1;b<7;b++)N[b]=N[b]>>>(b-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var J=this._invSubKeys=[],b=0;b<16;b++)J[b]=k[15-b]},"_doReset"),encryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,E,x){this._lBlock=y[E],this._rBlock=y[E+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=x[b],k=this._lBlock,P=this._rBlock,N=0,M=0;M<8;M++)N|=u[M][((P^_[M])&f[M])>>>0];this._lBlock=P,this._rBlock=k^N}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[E]=this._lBlock,y[E+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,E){var x=(this._lBlock>>>y^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<y}s(m,"exchangeLR");function h(y,E){var x=(this._rBlock>>>y^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,E=y.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),b=E.length<4?E.slice(0,2):E.slice(2,4),_=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=p.createEncryptor(n.create(x)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,E){this._des1.encryptBlock(y,E),this._des2.decryptBlock(y,E),this._des3.encryptBlock(y,E)},"encryptBlock"),decryptBlock:s(function(y,E){this._des3.decryptBlock(y,E),this._des2.encryptBlock(y,E),this._des1.decryptBlock(y,E)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var $Re=U((AH,VRe)=>{d();(function(t,e,r){typeof AH=="object"?VRe.exports=AH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(AH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%f,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var E=p[m];p[m]=p[h],p[h]=E}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,f=(f+l[u])%256;var h=l[u];l[u]=l[f],l[f]=h,p|=l[(l[u]+l[f])%256]<<24-m*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var YRe=U((yH,zRe)=>{d();(function(t,e,r){typeof yH=="object"?zRe.exports=yH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(yH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;g[0]^=b,g[1]^=k,g[2]^=_,g[3]^=P,g[4]^=b,g[5]^=k,g[6]^=_,g[7]^=P;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var JRe=U((CH,KRe)=>{d();(function(t,e,r){typeof CH=="object"?KRe.exports=CH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(CH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],h=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;h[0]^=b,h[1]^=k,h[2]^=_,h[3]^=P,h[4]^=b,h[5]^=k,h[6]^=_,h[7]^=P;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var ZRe=U((EH,XRe)=>{d();(function(t,e,r){typeof EH=="object"?XRe.exports=EH=e(Vi(),tb(),rb(),T1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(EH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,y){let E=y>>24&255,x=y>>16&255,b=y>>8&255,_=y&255,k=g.sbox[0][E]+g.sbox[1][x];return k=k^g.sbox[2][b],k=k+g.sbox[3][_],k}s(u,"F");function f(g,y,E){let x=y,b=E,_;for(let k=0;k<o;++k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[o],x=x^g.pbox[o+1],{left:x,right:b}}s(f,"BlowFish_Encrypt");function p(g,y,E){let x=y,b=E,_;for(let k=o+1;k>1;--k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[1],x=x^g.pbox[0],{left:x,right:b}}s(p,"BlowFish_Decrypt");function m(g,y,E){for(let P=0;P<4;P++){g.sbox[P]=[];for(let N=0;N<256;N++)g.sbox[P][N]=c[P][N]}let x=0;for(let P=0;P<o+2;P++)g.pbox[P]=a[P]^y[x],x++,x>=E&&(x=0);let b=0,_=0,k=0;for(let P=0;P<o+2;P+=2)k=f(g,b,_),b=k.left,_=k.right,g.pbox[P]=b,g.pbox[P+1]=_;for(let P=0;P<4;P++)for(let N=0;N<256;N+=2)k=f(g,b,_),b=k.left,_=k.right,g.sbox[P][N]=b,g.sbox[P][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,E=g.sigBytes/4;m(l,y,E)}},"_doReset"),encryptBlock:s(function(g,y){var E=f(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"encryptBlock"),decryptBlock:s(function(g,y){var E=p(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var nb=U((vH,e5e)=>{d();(function(t,e,r){typeof vH=="object"?e5e.exports=vH=e(Vi(),v6(),J2e(),Z2e(),tb(),rRe(),rb(),Zae(),$q(),aRe(),ece(),uRe(),fRe(),mRe(),eH(),ARe(),T1(),zc(),vRe(),bRe(),TRe(),_Re(),RRe(),PRe(),DRe(),LRe(),FRe(),QRe(),qRe(),WRe(),jRe(),$Re(),YRe(),JRe(),ZRe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(vH,function(t){return t})});var C4=U(Uu=>{"use strict";d();Object.defineProperty(Uu,"__esModule",{value:!0});Uu.stringArray=Uu.array=Uu.func=Uu.error=Uu.number=Uu.string=Uu.boolean=void 0;function Kxt(t){return t===!0||t===!1}s(Kxt,"boolean");Uu.boolean=Kxt;function N4e(t){return typeof t=="string"||t instanceof String}s(N4e,"string");Uu.string=N4e;function Jxt(t){return typeof t=="number"||t instanceof Number}s(Jxt,"number");Uu.number=Jxt;function Xxt(t){return t instanceof Error}s(Xxt,"error");Uu.error=Xxt;function Zxt(t){return typeof t=="function"}s(Zxt,"func");Uu.func=Zxt;function L4e(t){return Array.isArray(t)}s(L4e,"array");Uu.array=L4e;function ebt(t){return L4e(t)&&t.every(e=>N4e(e))}s(ebt,"stringArray");Uu.stringArray=ebt});var wle=U(Kr=>{"use strict";d();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.Message=Kr.NotificationType9=Kr.NotificationType8=Kr.NotificationType7=Kr.NotificationType6=Kr.NotificationType5=Kr.NotificationType4=Kr.NotificationType3=Kr.NotificationType2=Kr.NotificationType1=Kr.NotificationType0=Kr.NotificationType=Kr.RequestType9=Kr.RequestType8=Kr.RequestType7=Kr.RequestType6=Kr.RequestType5=Kr.RequestType4=Kr.RequestType3=Kr.RequestType2=Kr.RequestType1=Kr.RequestType=Kr.RequestType0=Kr.AbstractMessageSignature=Kr.ParameterStructures=Kr.ResponseError=Kr.ErrorCodes=void 0;var R_=C4(),rle;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(rle||(Kr.ErrorCodes=rle={}));var nle=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=R_.number(e)?e:rle.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Kr.ResponseError=nle;var hf=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Kr.ParameterStructures=hf;hf.auto=new hf("auto");hf.byPosition=new hf("byPosition");hf.byName=new hf("byName");var Os=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return hf.auto}};Kr.AbstractMessageSignature=Os;var ile=class extends Os{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Kr.RequestType0=ile;var ole=class extends Os{static{s(this,"RequestType")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.RequestType=ole;var sle=class extends Os{static{s(this,"RequestType1")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.RequestType1=sle;var ale=class extends Os{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Kr.RequestType2=ale;var cle=class extends Os{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Kr.RequestType3=cle;var lle=class extends Os{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Kr.RequestType4=lle;var ule=class extends Os{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Kr.RequestType5=ule;var dle=class extends Os{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Kr.RequestType6=dle;var fle=class extends Os{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Kr.RequestType7=fle;var ple=class extends Os{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Kr.RequestType8=ple;var mle=class extends Os{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Kr.RequestType9=mle;var hle=class extends Os{static{s(this,"NotificationType")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.NotificationType=hle;var gle=class extends Os{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Kr.NotificationType0=gle;var Ale=class extends Os{static{s(this,"NotificationType1")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.NotificationType1=Ale;var yle=class extends Os{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Kr.NotificationType2=yle;var Cle=class extends Os{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Kr.NotificationType3=Cle;var Ele=class extends Os{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Kr.NotificationType4=Ele;var vle=class extends Os{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Kr.NotificationType5=vle;var xle=class extends Os{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Kr.NotificationType6=xle;var ble=class extends Os{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Kr.NotificationType7=ble;var Ile=class extends Os{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Kr.NotificationType8=Ile;var Tle=class extends Os{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Kr.NotificationType9=Tle;var M4e;(function(t){function e(i){let o=i;return o&&R_.string(o.method)&&(R_.string(o.id)||R_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&R_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(R_.string(o.id)||R_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(M4e||(Kr.Message=M4e={}))});var Sle=U(mb=>{"use strict";d();var F4e;Object.defineProperty(mb,"__esModule",{value:!0});mb.LRUCache=mb.LinkedMap=mb.Touch=void 0;var qu;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(qu||(mb.Touch=qu={}));var oW=class{static{s(this,"LinkedMap")}constructor(){this[F4e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=qu.None){let n=this._map.get(e);if(n)return r!==qu.None&&this.touch(n,r),n.value}set(e,r,n=qu.None){let i=this._map.get(e);if(i)i.value=r,n!==qu.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case qu.None:this.addItemLast(i);break;case qu.First:this.addItemFirst(i);break;case qu.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(F4e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==qu.First&&r!==qu.Last)){if(r===qu.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===qu.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};mb.LinkedMap=oW;var _le=class extends oW{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=qu.AsNew){return super.get(e,r)}peek(e){return super.get(e,qu.None)}set(e,r){return super.set(e,r,qu.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};mb.LRUCache=_le});var Q4e=U(sW=>{"use strict";d();Object.defineProperty(sW,"__esModule",{value:!0});sW.Disposable=void 0;var O4e;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(O4e||(sW.Disposable=O4e={}))});var hb=U(Ple=>{"use strict";d();Object.defineProperty(Ple,"__esModule",{value:!0});var Rle;function kle(){if(Rle===void 0)throw new Error("No runtime abstraction layer installed");return Rle}s(kle,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Rle=r}s(e,"install"),t.install=e})(kle||(kle={}));Ple.default=kle});var v4=U(E4=>{"use strict";d();Object.defineProperty(E4,"__esModule",{value:!0});E4.Emitter=E4.Event=void 0;var tbt=hb(),U4e;(function(t){let e={dispose(){}};t.None=function(){return e}})(U4e||(E4.Event=U4e={}));var Ble=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,tbt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},aW=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Ble),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};E4.Emitter=aW;aW._noop=function(){}});var uW=U(x4=>{"use strict";d();Object.defineProperty(x4,"__esModule",{value:!0});x4.CancellationTokenSource=x4.CancellationToken=void 0;var rbt=hb(),nbt=C4(),Dle=v4(),cW;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Dle.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Dle.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||nbt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(cW||(x4.CancellationToken=cW={}));var ibt=Object.freeze(function(t,e){let r=(0,rbt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),lW=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ibt:(this._emitter||(this._emitter=new Dle.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Nle=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new lW),this._token}cancel(){this._token?this._token.cancel():this._token=cW.Cancelled}dispose(){this._token?this._token instanceof lW&&this._token.dispose():this._token=cW.None}};x4.CancellationTokenSource=Nle});var q4e=U(b4=>{"use strict";d();Object.defineProperty(b4,"__esModule",{value:!0});b4.SharedArrayReceiverStrategy=b4.SharedArraySenderStrategy=void 0;var obt=uW(),q6;(function(t){t.Continue=0,t.Cancelled=1})(q6||(q6={}));var Lle=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=q6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,q6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};b4.SharedArraySenderStrategy=Lle;var Mle=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===q6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Fle=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Mle(e)}cancel(){}dispose(){}},Ole=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new obt.CancellationTokenSource:new Fle(r)}};b4.SharedArrayReceiverStrategy=Ole});var Ule=U(dW=>{"use strict";d();Object.defineProperty(dW,"__esModule",{value:!0});dW.Semaphore=void 0;var sbt=hb(),Qle=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,sbt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};dW.Semaphore=Qle});var W4e=U(gb=>{"use strict";d();Object.defineProperty(gb,"__esModule",{value:!0});gb.ReadableStreamMessageReader=gb.AbstractMessageReader=gb.MessageReader=void 0;var Hle=hb(),I4=C4(),qle=v4(),abt=Ule(),H4e;(function(t){function e(r){let n=r;return n&&I4.func(n.listen)&&I4.func(n.dispose)&&I4.func(n.onError)&&I4.func(n.onClose)&&I4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(H4e||(gb.MessageReader=H4e={}));var fW=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new qle.Emitter,this.closeEmitter=new qle.Emitter,this.partialMessageEmitter=new qle.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${I4.string(e.message)?e.message:"unknown"}`)}};gb.AbstractMessageReader=fW;var Wle;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Hle.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(Wle||(Wle={}));var Gle=class extends fW{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=Wle.fromOptions(r),this.buffer=(0,Hle.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new abt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Hle.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};gb.ReadableStreamMessageReader=Gle});var z4e=U(Ab=>{"use strict";d();Object.defineProperty(Ab,"__esModule",{value:!0});Ab.WriteableStreamMessageWriter=Ab.AbstractMessageWriter=Ab.MessageWriter=void 0;var G4e=hb(),H6=C4(),cbt=Ule(),j4e=v4(),lbt="Content-Length: ",V4e=`\r
`,$4e;(function(t){function e(r){let n=r;return n&&H6.func(n.dispose)&&H6.func(n.onClose)&&H6.func(n.onError)&&H6.func(n.write)}s(e,"is"),t.is=e})($4e||(Ab.MessageWriter=$4e={}));var pW=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new j4e.Emitter,this.closeEmitter=new j4e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${H6.string(e.message)?e.message:"unknown"}`)}};Ab.AbstractMessageWriter=pW;var jle;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,G4e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,G4e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(jle||(jle={}));var Vle=class extends pW{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=jle.fromOptions(r),this.errorCount=0,this.writeSemaphore=new cbt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(lbt,n.byteLength.toString(),V4e),i.push(V4e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Ab.WriteableStreamMessageWriter=Vle});var Y4e=U(mW=>{"use strict";d();Object.defineProperty(mW,"__esModule",{value:!0});mW.AbstractMessageBuffer=void 0;var ubt=13,dbt=10,fbt=`\r
`,$le=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case ubt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case dbt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(fbt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let m=f.substr(0,p),h=f.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};mW.AbstractMessageBuffer=$le});var ePe=U(ci=>{"use strict";d();Object.defineProperty(ci,"__esModule",{value:!0});ci.createMessageConnection=ci.ConnectionOptions=ci.MessageStrategy=ci.CancellationStrategy=ci.CancellationSenderStrategy=ci.CancellationReceiverStrategy=ci.RequestCancellationReceiverStrategy=ci.IdCancellationReceiverStrategy=ci.ConnectionStrategy=ci.ConnectionError=ci.ConnectionErrors=ci.LogTraceNotification=ci.SetTraceNotification=ci.TraceFormat=ci.TraceValues=ci.Trace=ci.NullLogger=ci.ProgressType=ci.ProgressToken=void 0;var K4e=hb(),ba=C4(),Bn=wle(),J4e=Sle(),W6=v4(),zle=uW(),V6;(function(t){t.type=new Bn.NotificationType("$/cancelRequest")})(V6||(V6={}));var Yle;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(Yle||(ci.ProgressToken=Yle={}));var G6;(function(t){t.type=new Bn.NotificationType("$/progress")})(G6||(G6={}));var Kle=class{static{s(this,"ProgressType")}constructor(){}};ci.ProgressType=Kle;var Jle;(function(t){function e(r){return ba.func(r)}s(e,"is"),t.is=e})(Jle||(Jle={}));ci.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var No;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(No||(ci.Trace=No={}));var X4e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(X4e||(ci.TraceValues=X4e={}));(function(t){function e(n){if(!ba.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(No||(ci.Trace=No={}));var w0;(function(t){t.Text="text",t.JSON="json"})(w0||(ci.TraceFormat=w0={}));(function(t){function e(r){return ba.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(w0||(ci.TraceFormat=w0={}));var Xle;(function(t){t.type=new Bn.NotificationType("$/setTrace")})(Xle||(ci.SetTraceNotification=Xle={}));var hW;(function(t){t.type=new Bn.NotificationType("$/logTrace")})(hW||(ci.LogTraceNotification=hW={}));var j6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(j6||(ci.ConnectionErrors=j6={}));var T4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ci.ConnectionError=T4;var Zle;(function(t){function e(r){let n=r;return n&&ba.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(Zle||(ci.ConnectionStrategy=Zle={}));var gW;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||ba.func(n.dispose))}s(e,"is"),t.is=e})(gW||(ci.IdCancellationReceiverStrategy=gW={}));var eue;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||ba.func(n.dispose))}s(e,"is"),t.is=e})(eue||(ci.RequestCancellationReceiverStrategy=eue={}));var AW;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new zle.CancellationTokenSource}});function e(r){return gW.is(r)||eue.is(r)}s(e,"is"),t.is=e})(AW||(ci.CancellationReceiverStrategy=AW={}));var yW;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(V6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&ba.func(n.sendCancellation)&&ba.func(n.cleanup)}s(e,"is"),t.is=e})(yW||(ci.CancellationSenderStrategy=yW={}));var CW;(function(t){t.Message=Object.freeze({receiver:AW.Message,sender:yW.Message});function e(r){let n=r;return n&&AW.is(n.receiver)&&yW.is(n.sender)}s(e,"is"),t.is=e})(CW||(ci.CancellationStrategy=CW={}));var EW;(function(t){function e(r){let n=r;return n&&ba.func(n.handleMessage)}s(e,"is"),t.is=e})(EW||(ci.MessageStrategy=EW={}));var Z4e;(function(t){function e(r){let n=r;return n&&(CW.is(n.cancellationStrategy)||Zle.is(n.connectionStrategy)||EW.is(n.messageStrategy))}s(e,"is"),t.is=e})(Z4e||(ci.ConnectionOptions=Z4e={}));var Yh;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Yh||(Yh={}));function pbt(t,e,r,n){let i=r!==void 0?r:ci.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,m=new Map,h=new Map,g,y=new J4e.LinkedMap,E=new Map,x=new Set,b=new Map,_=No.Off,k=w0.Text,P,N=Yh.New,M=new W6.Emitter,J=new W6.Emitter,pe=new W6.Emitter,Y=new W6.Emitter,G=new W6.Emitter,H=n&&n.cancellationStrategy?n.cancellationStrategy:CW.Message;function ce(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(ce,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++c).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function Q(Ae,Ge){Bn.Message.isRequest(Ge)?Ae.set(ce(Ge.id),Ge):Bn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(V(),Ge)}s(Q,"addMessageToQueue");function z(Ae){}s(z,"cancelUndispatched");function re(){return N===Yh.Listening}s(re,"isListening");function fe(){return N===Yh.Closed}s(fe,"isClosed");function ne(){return N===Yh.Disposed}s(ne,"isDisposed");function me(){(N===Yh.New||N===Yh.Listening)&&(N=Yh.Closed,J.fire(void 0))}s(me,"closeHandler");function he(Ae){M.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Qe(Ae){M.fire(Ae)}s(Qe,"writeErrorHandler"),t.onClose(me),t.onError(he),e.onClose(me),e.onError(Qe);function ke(){g||y.size===0||(g=(0,K4e.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(ke,"triggerMessageQueue");function tt(Ae){Bn.Message.isRequest(Ae)?St(Ae):Bn.Message.isNotification(Ae)?Tt(Ae):Bn.Message.isResponse(Ae)?xt(Ae):le(Ae)}s(tt,"handleMessage");function Fe(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;EW.is(Ge)?Ge.handleMessage(Ae,tt):tt(Ae)}finally{ke()}}s(Fe,"processMessageQueue");let ht=s(Ae=>{try{if(Bn.Message.isNotification(Ae)&&Ae.method===V6.type.method){let Ge=Ae.params.id,ft=ce(Ge),Et=y.get(ft);if(Bn.Message.isRequest(Et)){let Vt=n?.connectionStrategy,vr=Vt&&Vt.cancelUndispatched?Vt.cancelUndispatched(Et,z):void 0;if(vr&&(vr.error!==void 0||vr.result!==void 0)){y.delete(ft),b.delete(Ge),vr.id=Et.id,ee(vr,Ae.method,Date.now()),e.write(vr).catch(()=>i.error("Sending response for canceled message failed."));return}}let Zt=b.get(Ge);if(Zt!==void 0){Zt.cancel(),We(Ae);return}else x.add(Ge)}Q(y,Ae)}finally{ke()}},"callback");function St(Ae){if(ne())return;function Ge(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id};zt instanceof Bn.ResponseError?Sr.error=zt.toJson():Sr.result=zt===void 0?null:zt,ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id,error:zt.toJson()};ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Et(zt,ir,Xt){zt===void 0&&(zt=null);let Sr={jsonrpc:l,id:Ae.id,result:zt};ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Et,"replySuccess"),oe(Ae);let Zt=f.get(Ae.method),Vt,vr;Zt&&(Vt=Zt.type,vr=Zt.handler);let Ir=Date.now();if(vr||u){let zt=Ae.id??String(Date.now()),ir=gW.is(H.receiver)?H.receiver.createCancellationTokenSource(zt):H.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&x.has(Ae.id)&&ir.cancel(),Ae.id!==null&&b.set(zt,ir);try{let Xt;if(vr)if(Ae.params===void 0){if(Vt!==void 0&&Vt.numberOfParams!==0){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Vt.numberOfParams} params but received none.`),Ae.method,Ir);return}Xt=vr(ir.token)}else if(Array.isArray(Ae.params)){if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byName){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,Ir);return}Xt=vr(...Ae.params,ir.token)}else{if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byPosition){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,Ir);return}Xt=vr(Ae.params,ir.token)}else u&&(Xt=u(Ae.method,Ae.params,ir.token));let Sr=Xt;Xt?Sr.then?Sr.then(qr=>{b.delete(zt),Ge(qr,Ae.method,Ir)},qr=>{b.delete(zt),qr instanceof Bn.ResponseError?ft(qr,Ae.method,Ir):qr&&ba.string(qr.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${qr.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}):(b.delete(zt),Ge(Xt,Ae.method,Ir)):(b.delete(zt),Et(Xt,Ae.method,Ir))}catch(Xt){b.delete(zt),Xt instanceof Bn.ResponseError?Ge(Xt,Ae.method,Ir):Xt&&ba.string(Xt.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Xt.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}}else ft(new Bn.ResponseError(Bn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,Ir)}s(St,"handleRequest");function xt(Ae){if(!ne())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ft=E.get(Ge);if(De(Ae,ft),ft!==void 0){E.delete(Ge);try{if(Ae.error){let Et=Ae.error;ft.reject(new Bn.ResponseError(Et.code,Et.message,Et.data))}else if(Ae.result!==void 0)ft.resolve(Ae.result);else throw new Error("Should never happen.")}catch(Et){Et.message?i.error(`Response handler '${ft.method}' failed with message: ${Et.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(xt,"handleResponse");function Tt(Ae){if(ne())return;let Ge,ft;if(Ae.method===V6.type.method){let Et=Ae.params.id;x.delete(Et),We(Ae);return}else{let Et=m.get(Ae.method);Et&&(ft=Et.handler,Ge=Et.type)}if(ft||p)try{if(We(Ae),ft)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(Ae.params)){let Et=Ae.params;Ae.method===G6.type.method&&Et.length===2&&Yle.is(Et[0])?ft({token:Et[0],value:Et[1]}):(Ge!==void 0&&(Ge.parameterStructures===Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${Et.length} arguments`)),ft(...Et))}else Ge!==void 0&&Ge.parameterStructures===Bn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ft(Ae.params);else p&&p(Ae.method,Ae.params)}catch(Et){Et.message?i.error(`Notification handler '${Ae.method}' failed with message: ${Et.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else pe.fire(Ae)}s(Tt,"handleNotification");function le(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(ba.string(Ge.id)||ba.number(Ge.id)){let ft=Ge.id,Et=E.get(ft);Et&&Et.reject(new Error("The received response has neither a result nor an error property."))}}s(le,"handleInvalidMessage");function Ue(Ae){if(Ae!=null)switch(_){case No.Verbose:return JSON.stringify(Ae,null,4);case No.Compact:return JSON.stringify(Ae);default:return}}s(Ue,"stringifyTrace");function ye(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("send-request",Ae)}s(ye,"traceSendingRequest");function nt(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Sending notification '${Ae.method}'.`,Ge)}else xe("send-notification",Ae)}s(nt,"traceSendingNotification");function ee(Ae,Ge,ft){if(!(_===No.Off||!P))if(k===w0.Text){let Et;(_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?Et=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?Et=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(Et=`No result returned.

`)),P.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ft}ms`,Et)}else xe("send-response",Ae)}s(ee,"traceSendingResponse");function oe(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("receive-request",Ae)}s(oe,"traceReceivedRequest");function We(Ae){if(!(_===No.Off||!P||Ae.method===hW.type.method))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Received notification '${Ae.method}'.`,Ge)}else xe("receive-notification",Ae)}s(We,"traceReceivedNotification");function De(Ae,Ge){if(!(_===No.Off||!P))if(k===w0.Text){let ft;if((_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?ft=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?ft=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(ft=`No result returned.

`)),Ge){let Et=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";P.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${Et}`,ft)}else P.log(`Received response ${Ae.id} without active response promise.`,ft)}else xe("receive-response",Ae)}s(De,"traceReceivedResponse");function xe(Ae,Ge){if(!P||_===No.Off)return;let ft={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};P.log(ft)}s(xe,"logLSPMessage");function Ye(){if(fe())throw new T4(j6.Closed,"Connection is closed.");if(ne())throw new T4(j6.Disposed,"Connection is disposed.")}s(Ye,"throwIfClosedOrDisposed");function st(){if(re())throw new T4(j6.AlreadyListening,"Connection is already listening")}s(st,"throwIfListening");function yt(){if(!re())throw new Error("Call listen() first.")}s(yt,"throwIfNotListening");function qt(Ae){return Ae===void 0?null:Ae}s(qt,"undefinedToNull");function dr(Ae){if(Ae!==null)return Ae}s(dr,"nullToUndefined");function Ft(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Ft,"isNamedParam");function Yr(Ae,Ge){switch(Ae){case Bn.ParameterStructures.auto:return Ft(Ge)?dr(Ge):[qt(Ge)];case Bn.ParameterStructures.byName:if(!Ft(Ge))throw new Error("Received parameters by name but param is not an object literal.");return dr(Ge);case Bn.ParameterStructures.byPosition:return[qt(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Yr,"computeSingleParam");function en(Ae,Ge){let ft,Et=Ae.numberOfParams;switch(Et){case 0:ft=void 0;break;case 1:ft=Yr(Ae.parameterStructures,Ge[0]);break;default:ft=[];for(let Zt=0;Zt<Ge.length&&Zt<Et;Zt++)ft.push(qt(Ge[Zt]));if(Ge.length<Et)for(let Zt=Ge.length;Zt<Et;Zt++)ft.push(null);break}return ft}s(en,"computeMessageParams");let yn={sendNotification:s((Ae,...Ge)=>{Ye();let ft,Et;if(ba.string(Ae)){ft=Ae;let Vt=Ge[0],vr=0,Ir=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(Vt)&&(vr=1,Ir=Vt);let zt=Ge.length,ir=zt-vr;switch(ir){case 0:Et=void 0;break;case 1:Et=Yr(Ir,Ge[vr]);break;default:if(Ir===Bn.ParameterStructures.byName)throw new Error(`Received ${ir} parameters for 'by Name' notification parameter structure.`);Et=Ge.slice(vr,zt).map(Xt=>qt(Xt));break}}else{let Vt=Ge;ft=Ae.method,Et=en(Ae,Vt)}let Zt={jsonrpc:l,method:ft,params:Et};return nt(Zt),e.write(Zt).catch(Vt=>{throw i.error("Sending notification failed."),Vt})},"sendNotification"),onNotification:s((Ae,Ge)=>{Ye();let ft;return ba.func(Ae)?p=Ae:Ge&&(ba.string(Ae)?(ft=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ft=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ft)=>yn.sendNotification(G6.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:Y.event,sendRequest:s((Ae,...Ge)=>{Ye(),yt();let ft,Et,Zt;if(ba.string(Ae)){ft=Ae;let zt=Ge[0],ir=Ge[Ge.length-1],Xt=0,Sr=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(zt)&&(Xt=1,Sr=zt);let qr=Ge.length;zle.CancellationToken.is(ir)&&(qr=qr-1,Zt=ir);let tn=qr-Xt;switch(tn){case 0:Et=void 0;break;case 1:Et=Yr(Sr,Ge[Xt]);break;default:if(Sr===Bn.ParameterStructures.byName)throw new Error(`Received ${tn} parameters for 'by Name' request parameter structure.`);Et=Ge.slice(Xt,qr).map(zn=>qt(zn));break}}else{let zt=Ge;ft=Ae.method,Et=en(Ae,zt);let ir=Ae.numberOfParams;Zt=zle.CancellationToken.is(zt[ir])?zt[ir]:void 0}let Vt=o++,vr;Zt&&(vr=Zt.onCancellationRequested(()=>{let zt=H.sender.sendCancellation(yn,Vt);return zt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Vt}`),Promise.resolve()):zt.catch(()=>{i.log(`Sending cancellation messages for id ${Vt} failed`)})}));let Ir={jsonrpc:l,id:Vt,method:ft,params:Et};return ye(Ir),typeof H.sender.enableCancellation=="function"&&H.sender.enableCancellation(Ir),new Promise(async(zt,ir)=>{let Xt=s(tn=>{zt(tn),H.sender.cleanup(Vt),vr?.dispose()},"resolveWithCleanup"),Sr=s(tn=>{ir(tn),H.sender.cleanup(Vt),vr?.dispose()},"rejectWithCleanup"),qr={method:ft,timerStart:Date.now(),resolve:Xt,reject:Sr};try{await e.write(Ir),E.set(Vt,qr)}catch(tn){throw i.error("Sending request failed."),qr.reject(new Bn.ResponseError(Bn.ErrorCodes.MessageWriteError,tn.message?tn.message:"Unknown reason")),tn}})},"sendRequest"),onRequest:s((Ae,Ge)=>{Ye();let ft=null;return Jle.is(Ae)?(ft=void 0,u=Ae):ba.string(Ae)?(ft=null,Ge!==void 0&&(ft=Ae,f.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=Ae.method,f.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>E.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ft)=>{let Et=!1,Zt=w0.Text;ft!==void 0&&(ba.boolean(ft)?Et=ft:(Et=ft.sendNotification||!1,Zt=ft.traceFormat||w0.Text)),_=Ae,k=Zt,_===No.Off?P=void 0:P=Ge,Et&&!fe()&&!ne()&&await yn.sendNotification(Xle.type,{value:No.toString(Ae)})},"trace"),onError:M.event,onClose:J.event,onUnhandledNotification:pe.event,onDispose:G.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ne())return;N=Yh.Disposed,G.fire(void 0);let Ae=new Bn.ResponseError(Bn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of E.values())Ge.reject(Ae);E=new Map,b=new Map,x=new Set,y=new J4e.LinkedMap,ba.func(e.dispose)&&e.dispose(),ba.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{Ye(),st(),N=Yh.Listening,t.listen(ht)},"listen"),inspect:s(()=>{(0,K4e.default)().console.log("inspect")},"inspect")};return yn.onNotification(hW.type,Ae=>{if(_===No.Off||!P)return;let Ge=_===No.Verbose||_===No.Compact;P.log(Ae.message,Ge?Ae.verbose:void 0)}),yn.onNotification(G6.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):Y.fire(Ae)}),yn}s(pbt,"createMessageConnection");ci.createMessageConnection=pbt});var vW=U(dt=>{"use strict";d();Object.defineProperty(dt,"__esModule",{value:!0});dt.ProgressType=dt.ProgressToken=dt.createMessageConnection=dt.NullLogger=dt.ConnectionOptions=dt.ConnectionStrategy=dt.AbstractMessageBuffer=dt.WriteableStreamMessageWriter=dt.AbstractMessageWriter=dt.MessageWriter=dt.ReadableStreamMessageReader=dt.AbstractMessageReader=dt.MessageReader=dt.SharedArrayReceiverStrategy=dt.SharedArraySenderStrategy=dt.CancellationToken=dt.CancellationTokenSource=dt.Emitter=dt.Event=dt.Disposable=dt.LRUCache=dt.Touch=dt.LinkedMap=dt.ParameterStructures=dt.NotificationType9=dt.NotificationType8=dt.NotificationType7=dt.NotificationType6=dt.NotificationType5=dt.NotificationType4=dt.NotificationType3=dt.NotificationType2=dt.NotificationType1=dt.NotificationType0=dt.NotificationType=dt.ErrorCodes=dt.ResponseError=dt.RequestType9=dt.RequestType8=dt.RequestType7=dt.RequestType6=dt.RequestType5=dt.RequestType4=dt.RequestType3=dt.RequestType2=dt.RequestType1=dt.RequestType0=dt.RequestType=dt.Message=dt.RAL=void 0;dt.MessageStrategy=dt.CancellationStrategy=dt.CancellationSenderStrategy=dt.CancellationReceiverStrategy=dt.ConnectionError=dt.ConnectionErrors=dt.LogTraceNotification=dt.SetTraceNotification=dt.TraceFormat=dt.TraceValues=dt.Trace=void 0;var Es=wle();Object.defineProperty(dt,"Message",{enumerable:!0,get:s(function(){return Es.Message},"get")});Object.defineProperty(dt,"RequestType",{enumerable:!0,get:s(function(){return Es.RequestType},"get")});Object.defineProperty(dt,"RequestType0",{enumerable:!0,get:s(function(){return Es.RequestType0},"get")});Object.defineProperty(dt,"RequestType1",{enumerable:!0,get:s(function(){return Es.RequestType1},"get")});Object.defineProperty(dt,"RequestType2",{enumerable:!0,get:s(function(){return Es.RequestType2},"get")});Object.defineProperty(dt,"RequestType3",{enumerable:!0,get:s(function(){return Es.RequestType3},"get")});Object.defineProperty(dt,"RequestType4",{enumerable:!0,get:s(function(){return Es.RequestType4},"get")});Object.defineProperty(dt,"RequestType5",{enumerable:!0,get:s(function(){return Es.RequestType5},"get")});Object.defineProperty(dt,"RequestType6",{enumerable:!0,get:s(function(){return Es.RequestType6},"get")});Object.defineProperty(dt,"RequestType7",{enumerable:!0,get:s(function(){return Es.RequestType7},"get")});Object.defineProperty(dt,"RequestType8",{enumerable:!0,get:s(function(){return Es.RequestType8},"get")});Object.defineProperty(dt,"RequestType9",{enumerable:!0,get:s(function(){return Es.RequestType9},"get")});Object.defineProperty(dt,"ResponseError",{enumerable:!0,get:s(function(){return Es.ResponseError},"get")});Object.defineProperty(dt,"ErrorCodes",{enumerable:!0,get:s(function(){return Es.ErrorCodes},"get")});Object.defineProperty(dt,"NotificationType",{enumerable:!0,get:s(function(){return Es.NotificationType},"get")});Object.defineProperty(dt,"NotificationType0",{enumerable:!0,get:s(function(){return Es.NotificationType0},"get")});Object.defineProperty(dt,"NotificationType1",{enumerable:!0,get:s(function(){return Es.NotificationType1},"get")});Object.defineProperty(dt,"NotificationType2",{enumerable:!0,get:s(function(){return Es.NotificationType2},"get")});Object.defineProperty(dt,"NotificationType3",{enumerable:!0,get:s(function(){return Es.NotificationType3},"get")});Object.defineProperty(dt,"NotificationType4",{enumerable:!0,get:s(function(){return Es.NotificationType4},"get")});Object.defineProperty(dt,"NotificationType5",{enumerable:!0,get:s(function(){return Es.NotificationType5},"get")});Object.defineProperty(dt,"NotificationType6",{enumerable:!0,get:s(function(){return Es.NotificationType6},"get")});Object.defineProperty(dt,"NotificationType7",{enumerable:!0,get:s(function(){return Es.NotificationType7},"get")});Object.defineProperty(dt,"NotificationType8",{enumerable:!0,get:s(function(){return Es.NotificationType8},"get")});Object.defineProperty(dt,"NotificationType9",{enumerable:!0,get:s(function(){return Es.NotificationType9},"get")});Object.defineProperty(dt,"ParameterStructures",{enumerable:!0,get:s(function(){return Es.ParameterStructures},"get")});var tue=Sle();Object.defineProperty(dt,"LinkedMap",{enumerable:!0,get:s(function(){return tue.LinkedMap},"get")});Object.defineProperty(dt,"LRUCache",{enumerable:!0,get:s(function(){return tue.LRUCache},"get")});Object.defineProperty(dt,"Touch",{enumerable:!0,get:s(function(){return tue.Touch},"get")});var mbt=Q4e();Object.defineProperty(dt,"Disposable",{enumerable:!0,get:s(function(){return mbt.Disposable},"get")});var tPe=v4();Object.defineProperty(dt,"Event",{enumerable:!0,get:s(function(){return tPe.Event},"get")});Object.defineProperty(dt,"Emitter",{enumerable:!0,get:s(function(){return tPe.Emitter},"get")});var rPe=uW();Object.defineProperty(dt,"CancellationTokenSource",{enumerable:!0,get:s(function(){return rPe.CancellationTokenSource},"get")});Object.defineProperty(dt,"CancellationToken",{enumerable:!0,get:s(function(){return rPe.CancellationToken},"get")});var nPe=q4e();Object.defineProperty(dt,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return nPe.SharedArraySenderStrategy},"get")});Object.defineProperty(dt,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return nPe.SharedArrayReceiverStrategy},"get")});var rue=W4e();Object.defineProperty(dt,"MessageReader",{enumerable:!0,get:s(function(){return rue.MessageReader},"get")});Object.defineProperty(dt,"AbstractMessageReader",{enumerable:!0,get:s(function(){return rue.AbstractMessageReader},"get")});Object.defineProperty(dt,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return rue.ReadableStreamMessageReader},"get")});var nue=z4e();Object.defineProperty(dt,"MessageWriter",{enumerable:!0,get:s(function(){return nue.MessageWriter},"get")});Object.defineProperty(dt,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return nue.AbstractMessageWriter},"get")});Object.defineProperty(dt,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return nue.WriteableStreamMessageWriter},"get")});var hbt=Y4e();Object.defineProperty(dt,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return hbt.AbstractMessageBuffer},"get")});var ru=ePe();Object.defineProperty(dt,"ConnectionStrategy",{enumerable:!0,get:s(function(){return ru.ConnectionStrategy},"get")});Object.defineProperty(dt,"ConnectionOptions",{enumerable:!0,get:s(function(){return ru.ConnectionOptions},"get")});Object.defineProperty(dt,"NullLogger",{enumerable:!0,get:s(function(){return ru.NullLogger},"get")});Object.defineProperty(dt,"createMessageConnection",{enumerable:!0,get:s(function(){return ru.createMessageConnection},"get")});Object.defineProperty(dt,"ProgressToken",{enumerable:!0,get:s(function(){return ru.ProgressToken},"get")});Object.defineProperty(dt,"ProgressType",{enumerable:!0,get:s(function(){return ru.ProgressType},"get")});Object.defineProperty(dt,"Trace",{enumerable:!0,get:s(function(){return ru.Trace},"get")});Object.defineProperty(dt,"TraceValues",{enumerable:!0,get:s(function(){return ru.TraceValues},"get")});Object.defineProperty(dt,"TraceFormat",{enumerable:!0,get:s(function(){return ru.TraceFormat},"get")});Object.defineProperty(dt,"SetTraceNotification",{enumerable:!0,get:s(function(){return ru.SetTraceNotification},"get")});Object.defineProperty(dt,"LogTraceNotification",{enumerable:!0,get:s(function(){return ru.LogTraceNotification},"get")});Object.defineProperty(dt,"ConnectionErrors",{enumerable:!0,get:s(function(){return ru.ConnectionErrors},"get")});Object.defineProperty(dt,"ConnectionError",{enumerable:!0,get:s(function(){return ru.ConnectionError},"get")});Object.defineProperty(dt,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return ru.CancellationReceiverStrategy},"get")});Object.defineProperty(dt,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return ru.CancellationSenderStrategy},"get")});Object.defineProperty(dt,"CancellationStrategy",{enumerable:!0,get:s(function(){return ru.CancellationStrategy},"get")});Object.defineProperty(dt,"MessageStrategy",{enumerable:!0,get:s(function(){return ru.MessageStrategy},"get")});var gbt=hb();dt.RAL=gbt.default});var sPe=U(aue=>{"use strict";d();Object.defineProperty(aue,"__esModule",{value:!0});var iPe=require("util"),U1=vW(),xW=class t extends U1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new iPe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};xW.emptyBuffer=Buffer.allocUnsafe(0);var iue=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),U1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),U1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),U1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),U1.Disposable.create(()=>this.stream.off("data",e))}},oue=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),U1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),U1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),U1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},oPe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new xW(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new iPe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new iue(t),"asReadableStream"),asWritableStream:s(t=>new oue(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function sue(){return oPe}s(sue,"RIL");(function(t){function e(){U1.RAL.install(oPe)}s(e,"install"),t.install=e})(sue||(sue={}));aue.default=sue});var B_=U(io=>{"use strict";d();var Abt=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ybt=io&&io.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Abt(e,t,r)};Object.defineProperty(io,"__esModule",{value:!0});io.createMessageConnection=io.createServerSocketTransport=io.createClientSocketTransport=io.createServerPipeTransport=io.createClientPipeTransport=io.generateRandomPipeName=io.StreamMessageWriter=io.StreamMessageReader=io.SocketMessageWriter=io.SocketMessageReader=io.PortMessageWriter=io.PortMessageReader=io.IPCMessageWriter=io.IPCMessageReader=void 0;var w4=sPe();w4.default.install();var aPe=require("path"),Cbt=require("os"),Ebt=require("crypto"),TW=require("net"),_0=vW();ybt(vW(),io);var cue=class extends _0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),_0.Disposable.create(()=>this.process.off("message",e))}};io.IPCMessageReader=cue;var lue=class extends _0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.IPCMessageWriter=lue;var uue=class extends _0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new _0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};io.PortMessageReader=uue;var due=class extends _0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.PortMessageWriter=due;var k_=class extends _0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,w4.default)().stream.asReadableStream(e),r)}};io.SocketMessageReader=k_;var P_=class extends _0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,w4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};io.SocketMessageWriter=P_;var bW=class extends _0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,w4.default)().stream.asReadableStream(e),r)}};io.StreamMessageReader=bW;var IW=class extends _0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,w4.default)().stream.asWritableStream(e),r)}};io.StreamMessageWriter=IW;var cPe=process.env.XDG_RUNTIME_DIR,vbt=new Map([["linux",107],["darwin",103]]);function xbt(){let t=(0,Ebt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;cPe?e=aPe.join(cPe,`vscode-ipc-${t}.sock`):e=aPe.join(Cbt.tmpdir(),`vscode-${t}.sock`);let r=vbt.get(process.platform);return r!==void 0&&e.length>r&&(0,w4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(xbt,"generateRandomPipeName");io.generateRandomPipeName=xbt;function bbt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,TW.createServer)(c=>{a.close(),r([new k_(c,e),new P_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(bbt,"createClientPipeTransport");io.createClientPipeTransport=bbt;function Ibt(t,e="utf-8"){let r=(0,TW.createConnection)(t);return[new k_(r,e),new P_(r,e)]}s(Ibt,"createServerPipeTransport");io.createServerPipeTransport=Ibt;function Tbt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,TW.createServer)(c=>{a.close(),r([new k_(c,e),new P_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Tbt,"createClientSocketTransport");io.createClientSocketTransport=Tbt;function wbt(t,e="utf-8"){let r=(0,TW.createConnection)(t,"127.0.0.1");return[new k_(r,e),new P_(r,e)]}s(wbt,"createServerSocketTransport");io.createServerSocketTransport=wbt;function _bt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(_bt,"isReadableStream");function Sbt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Sbt,"isWritableStream");function Rbt(t,e,r,n){r||(r=_0.NullLogger);let i=_bt(t)?new bW(t):t,o=Sbt(e)?new IW(e):e;return _0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,_0.createMessageConnection)(i,o,r,n)}s(Rbt,"createMessageConnection");io.createMessageConnection=Rbt});var fue=U((SNr,lPe)=>{"use strict";d();lPe.exports=B_()});var _W=U((uPe,wW)=>{d();(function(t){if(typeof wW=="object"&&typeof wW.exports=="object"){var e=t(require,uPe);e!==void 0&&(wW.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(r||(e.DocumentUri=r={}));var n;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(n||(e.URI=n={}));var i;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(i||(e.integer=i={}));var o;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(o||(e.uinteger=o={}));var a;(function(W){function ge(te,O){return te===Number.MAX_VALUE&&(te=o.MAX_VALUE),O===Number.MAX_VALUE&&(O=o.MAX_VALUE),{line:te,character:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.uinteger(O.line)&&_e.uinteger(O.character)}s(ve,"is"),W.is=ve})(a||(e.Position=a={}));var c;(function(W){function ge(te,O,Re,ze){if(_e.uinteger(te)&&_e.uinteger(O)&&_e.uinteger(Re)&&_e.uinteger(ze))return{start:a.create(te,O),end:a.create(Re,ze)};if(a.is(te)&&a.is(O))return{start:te,end:O};throw new Error("Range#create called with invalid arguments[".concat(te,", ").concat(O,", ").concat(Re,", ").concat(ze,"]"))}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&a.is(O.start)&&a.is(O.end)}s(ve,"is"),W.is=ve})(c||(e.Range=c={}));var l;(function(W){function ge(te,O){return{uri:te,range:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&(_e.string(O.uri)||_e.undefined(O.uri))}s(ve,"is"),W.is=ve})(l||(e.Location=l={}));var u;(function(W){function ge(te,O,Re,ze){return{targetUri:te,targetRange:O,targetSelectionRange:Re,originSelectionRange:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.targetRange)&&_e.string(O.targetUri)&&c.is(O.targetSelectionRange)&&(c.is(O.originSelectionRange)||_e.undefined(O.originSelectionRange))}s(ve,"is"),W.is=ve})(u||(e.LocationLink=u={}));var f;(function(W){function ge(te,O,Re,ze){return{red:te,green:O,blue:Re,alpha:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.numberRange(O.red,0,1)&&_e.numberRange(O.green,0,1)&&_e.numberRange(O.blue,0,1)&&_e.numberRange(O.alpha,0,1)}s(ve,"is"),W.is=ve})(f||(e.Color=f={}));var p;(function(W){function ge(te,O){return{range:te,color:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&f.is(O.color)}s(ve,"is"),W.is=ve})(p||(e.ColorInformation=p={}));var m;(function(W){function ge(te,O,Re){return{label:te,textEdit:O,additionalTextEdits:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.undefined(O.textEdit)||P.is(O))&&(_e.undefined(O.additionalTextEdits)||_e.typedArray(O.additionalTextEdits,P.is))}s(ve,"is"),W.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={startLine:te,endLine:O};return _e.defined(Re)&&(Ar.startCharacter=Re),_e.defined(ze)&&(Ar.endCharacter=ze),_e.defined(Gt)&&(Ar.kind=Gt),_e.defined(Pr)&&(Ar.collapsedText=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.uinteger(O.startLine)&&_e.uinteger(O.startLine)&&(_e.undefined(O.startCharacter)||_e.uinteger(O.startCharacter))&&(_e.undefined(O.endCharacter)||_e.uinteger(O.endCharacter))&&(_e.undefined(O.kind)||_e.string(O.kind))}s(ve,"is"),W.is=ve})(g||(e.FoldingRange=g={}));var y;(function(W){function ge(te,O){return{location:te,message:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&l.is(O.location)&&_e.string(O.message)}s(ve,"is"),W.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var E;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(E||(e.DiagnosticSeverity=E={}));var x;(function(W){W.Unnecessary=1,W.Deprecated=2})(x||(e.DiagnosticTag=x={}));var b;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&_e.string(te.href)}s(ge,"is"),W.is=ge})(b||(e.CodeDescription=b={}));var _;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={range:te,message:O};return _e.defined(Re)&&(Ar.severity=Re),_e.defined(ze)&&(Ar.code=ze),_e.defined(Gt)&&(Ar.source=Gt),_e.defined(Pr)&&(Ar.relatedInformation=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O,Re=te;return _e.defined(Re)&&c.is(Re.range)&&_e.string(Re.message)&&(_e.number(Re.severity)||_e.undefined(Re.severity))&&(_e.integer(Re.code)||_e.string(Re.code)||_e.undefined(Re.code))&&(_e.undefined(Re.codeDescription)||_e.string((O=Re.codeDescription)===null||O===void 0?void 0:O.href))&&(_e.string(Re.source)||_e.undefined(Re.source))&&(_e.undefined(Re.relatedInformation)||_e.typedArray(Re.relatedInformation,y.is))}s(ve,"is"),W.is=ve})(_||(e.Diagnostic=_={}));var k;(function(W){function ge(te,O){for(var Re=[],ze=2;ze<arguments.length;ze++)Re[ze-2]=arguments[ze];var Gt={title:te,command:O};return _e.defined(Re)&&Re.length>0&&(Gt.arguments=Re),Gt}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.title)&&_e.string(O.command)}s(ve,"is"),W.is=ve})(k||(e.Command=k={}));var P;(function(W){function ge(Re,ze){return{range:Re,newText:ze}}s(ge,"replace"),W.replace=ge;function ve(Re,ze){return{range:{start:Re,end:Re},newText:ze}}s(ve,"insert"),W.insert=ve;function te(Re){return{range:Re,newText:""}}s(te,"del"),W.del=te;function O(Re){var ze=Re;return _e.objectLiteral(ze)&&_e.string(ze.newText)&&c.is(ze.range)}s(O,"is"),W.is=O})(P||(e.TextEdit=P={}));var N;(function(W){function ge(te,O,Re){var ze={label:te};return O!==void 0&&(ze.needsConfirmation=O),Re!==void 0&&(ze.description=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.boolean(O.needsConfirmation)||O.needsConfirmation===void 0)&&(_e.string(O.description)||O.description===void 0)}s(ve,"is"),W.is=ve})(N||(e.ChangeAnnotation=N={}));var M;(function(W){function ge(ve){var te=ve;return _e.string(te)}s(ge,"is"),W.is=ge})(M||(e.ChangeAnnotationIdentifier=M={}));var J;(function(W){function ge(Re,ze,Gt){return{range:Re,newText:ze,annotationId:Gt}}s(ge,"replace"),W.replace=ge;function ve(Re,ze,Gt){return{range:{start:Re,end:Re},newText:ze,annotationId:Gt}}s(ve,"insert"),W.insert=ve;function te(Re,ze){return{range:Re,newText:"",annotationId:ze}}s(te,"del"),W.del=te;function O(Re){var ze=Re;return P.is(ze)&&(N.is(ze.annotationId)||M.is(ze.annotationId))}s(O,"is"),W.is=O})(J||(e.AnnotatedTextEdit=J={}));var pe;(function(W){function ge(te,O){return{textDocument:te,edits:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&fe.is(O.textDocument)&&Array.isArray(O.edits)}s(ve,"is"),W.is=ve})(pe||(e.TextDocumentEdit=pe={}));var Y;(function(W){function ge(te,O,Re){var ze={kind:"create",uri:te};return O!==void 0&&(O.overwrite!==void 0||O.ignoreIfExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="create"&&_e.string(O.uri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(Y||(e.CreateFile=Y={}));var G;(function(W){function ge(te,O,Re,ze){var Gt={kind:"rename",oldUri:te,newUri:O};return Re!==void 0&&(Re.overwrite!==void 0||Re.ignoreIfExists!==void 0)&&(Gt.options=Re),ze!==void 0&&(Gt.annotationId=ze),Gt}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="rename"&&_e.string(O.oldUri)&&_e.string(O.newUri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(G||(e.RenameFile=G={}));var H;(function(W){function ge(te,O,Re){var ze={kind:"delete",uri:te};return O!==void 0&&(O.recursive!==void 0||O.ignoreIfNotExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="delete"&&_e.string(O.uri)&&(O.options===void 0||(O.options.recursive===void 0||_e.boolean(O.options.recursive))&&(O.options.ignoreIfNotExists===void 0||_e.boolean(O.options.ignoreIfNotExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(H||(e.DeleteFile=H={}));var ce;(function(W){function ge(ve){var te=ve;return te&&(te.changes!==void 0||te.documentChanges!==void 0)&&(te.documentChanges===void 0||te.documentChanges.every(function(O){return _e.string(O.kind)?Y.is(O)||G.is(O)||H.is(O):pe.is(O)}))}s(ge,"is"),W.is=ge})(ce||(e.WorkspaceEdit=ce={}));var ie=function(){function W(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(W,"TextEditChangeImpl"),W.prototype.insert=function(ge,ve,te){var O,Re;if(te===void 0?O=P.insert(ge,ve):M.is(te)?(Re=te,O=J.insert(ge,ve,te)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(te),O=J.insert(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.replace=function(ge,ve,te){var O,Re;if(te===void 0?O=P.replace(ge,ve):M.is(te)?(Re=te,O=J.replace(ge,ve,te)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(te),O=J.replace(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.delete=function(ge,ve){var te,O;if(ve===void 0?te=P.del(ge):M.is(ve)?(O=ve,te=J.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),O=this.changeAnnotations.manage(ve),te=J.del(ge,O)),this.edits.push(te),O!==void 0)return O},W.prototype.add=function(ge){this.edits.push(ge)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},W}(),V=function(){function W(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(W,"ChangeAnnotations"),W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),W.prototype.manage=function(ge,ve){var te;if(M.is(ge)?te=ge:(te=this.nextId(),ve=ge),this._annotations[te]!==void 0)throw new Error("Id ".concat(te," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(te));return this._annotations[te]=ve,this._size++,te},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),Q=function(){function W(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new V(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(te){if(pe.is(te)){var O=new ie(te.edits,ve._changeAnnotations);ve._textEditChanges[te.textDocument.uri]=O}})):ge.changes&&Object.keys(ge.changes).forEach(function(te){var O=new ie(ge.changes[te]);ve._textEditChanges[te]=O})):this._workspaceEdit={}}return s(W,"WorkspaceChange"),Object.defineProperty(W.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(ge){if(fe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},te=this._textEditChanges[ve.uri];if(!te){var O=[],Re={textDocument:ve,edits:O};this._workspaceEdit.documentChanges.push(Re),te=new ie(O,this._changeAnnotations),this._textEditChanges[ve.uri]=te}return te}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var te=this._textEditChanges[ge];if(!te){var O=[];this._workspaceEdit.changes[ge]=O,te=new ie(O),this._textEditChanges[ge]=te}return te}},W.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},W.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},W.prototype.createFile=function(ge,ve,te){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:te=ve;var Re,ze;if(O===void 0?Re=Y.create(ge,te):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=Y.create(ge,te,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W.prototype.renameFile=function(ge,ve,te,O){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Re;N.is(te)||M.is(te)?Re=te:O=te;var ze,Gt;if(Re===void 0?ze=G.create(ge,ve,O):(Gt=M.is(Re)?Re:this._changeAnnotations.manage(Re),ze=G.create(ge,ve,O,Gt)),this._workspaceEdit.documentChanges.push(ze),Gt!==void 0)return Gt},W.prototype.deleteFile=function(ge,ve,te){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:te=ve;var Re,ze;if(O===void 0?Re=H.create(ge,te):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=H.create(ge,te,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W}();e.WorkspaceChange=Q;var z;(function(W){function ge(te){return{uri:te}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)}s(ve,"is"),W.is=ve})(z||(e.TextDocumentIdentifier=z={}));var re;(function(W){function ge(te,O){return{uri:te,version:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&_e.integer(O.version)}s(ve,"is"),W.is=ve})(re||(e.VersionedTextDocumentIdentifier=re={}));var fe;(function(W){function ge(te,O){return{uri:te,version:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&(O.version===null||_e.integer(O.version))}s(ve,"is"),W.is=ve})(fe||(e.OptionalVersionedTextDocumentIdentifier=fe={}));var ne;(function(W){function ge(te,O,Re,ze){return{uri:te,languageId:O,version:Re,text:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&_e.string(O.languageId)&&_e.integer(O.version)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(ne||(e.TextDocumentItem=ne={}));var me;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function ge(ve){var te=ve;return te===W.PlainText||te===W.Markdown}s(ge,"is"),W.is=ge})(me||(e.MarkupKind=me={}));var he;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(ve)&&me.is(te.kind)&&_e.string(te.value)}s(ge,"is"),W.is=ge})(he||(e.MarkupContent=he={}));var Qe;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var ke;(function(W){W.PlainText=1,W.Snippet=2})(ke||(e.InsertTextFormat=ke={}));var tt;(function(W){W.Deprecated=1})(tt||(e.CompletionItemTag=tt={}));var Fe;(function(W){function ge(te,O,Re){return{newText:te,insert:O,replace:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.newText)&&c.is(O.insert)&&c.is(O.replace)}s(ve,"is"),W.is=ve})(Fe||(e.InsertReplaceEdit=Fe={}));var ht;(function(W){W.asIs=1,W.adjustIndentation=2})(ht||(e.InsertTextMode=ht={}));var St;(function(W){function ge(ve){var te=ve;return te&&(_e.string(te.detail)||te.detail===void 0)&&(_e.string(te.description)||te.description===void 0)}s(ge,"is"),W.is=ge})(St||(e.CompletionItemLabelDetails=St={}));var xt;(function(W){function ge(ve){return{label:ve}}s(ge,"create"),W.create=ge})(xt||(e.CompletionItem=xt={}));var Tt;(function(W){function ge(ve,te){return{items:ve||[],isIncomplete:!!te}}s(ge,"create"),W.create=ge})(Tt||(e.CompletionList=Tt={}));var le;(function(W){function ge(te){return te.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),W.fromPlainText=ge;function ve(te){var O=te;return _e.string(O)||_e.objectLiteral(O)&&_e.string(O.language)&&_e.string(O.value)}s(ve,"is"),W.is=ve})(le||(e.MarkedString=le={}));var Ue;(function(W){function ge(ve){var te=ve;return!!te&&_e.objectLiteral(te)&&(he.is(te.contents)||le.is(te.contents)||_e.typedArray(te.contents,le.is))&&(ve.range===void 0||c.is(ve.range))}s(ge,"is"),W.is=ge})(Ue||(e.Hover=Ue={}));var ye;(function(W){function ge(ve,te){return te?{label:ve,documentation:te}:{label:ve}}s(ge,"create"),W.create=ge})(ye||(e.ParameterInformation=ye={}));var nt;(function(W){function ge(ve,te){for(var O=[],Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];var ze={label:ve};return _e.defined(te)&&(ze.documentation=te),_e.defined(O)?ze.parameters=O:ze.parameters=[],ze}s(ge,"create"),W.create=ge})(nt||(e.SignatureInformation=nt={}));var ee;(function(W){W.Text=1,W.Read=2,W.Write=3})(ee||(e.DocumentHighlightKind=ee={}));var oe;(function(W){function ge(ve,te){var O={range:ve};return _e.number(te)&&(O.kind=te),O}s(ge,"create"),W.create=ge})(oe||(e.DocumentHighlight=oe={}));var We;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(We||(e.SymbolKind=We={}));var De;(function(W){W.Deprecated=1})(De||(e.SymbolTag=De={}));var xe;(function(W){function ge(ve,te,O,Re,ze){var Gt={name:ve,kind:te,location:{uri:Re,range:O}};return ze&&(Gt.containerName=ze),Gt}s(ge,"create"),W.create=ge})(xe||(e.SymbolInformation=xe={}));var Ye;(function(W){function ge(ve,te,O,Re){return Re!==void 0?{name:ve,kind:te,location:{uri:O,range:Re}}:{name:ve,kind:te,location:{uri:O}}}s(ge,"create"),W.create=ge})(Ye||(e.WorkspaceSymbol=Ye={}));var st;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={name:te,detail:O,kind:Re,range:ze,selectionRange:Gt};return Pr!==void 0&&(Ar.children=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.name)&&_e.number(O.kind)&&c.is(O.range)&&c.is(O.selectionRange)&&(O.detail===void 0||_e.string(O.detail))&&(O.deprecated===void 0||_e.boolean(O.deprecated))&&(O.children===void 0||Array.isArray(O.children))&&(O.tags===void 0||Array.isArray(O.tags))}s(ve,"is"),W.is=ve})(st||(e.DocumentSymbol=st={}));var yt;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(yt||(e.CodeActionKind=yt={}));var qt;(function(W){W.Invoked=1,W.Automatic=2})(qt||(e.CodeActionTriggerKind=qt={}));var dr;(function(W){function ge(te,O,Re){var ze={diagnostics:te};return O!=null&&(ze.only=O),Re!=null&&(ze.triggerKind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.typedArray(O.diagnostics,_.is)&&(O.only===void 0||_e.typedArray(O.only,_e.string))&&(O.triggerKind===void 0||O.triggerKind===qt.Invoked||O.triggerKind===qt.Automatic)}s(ve,"is"),W.is=ve})(dr||(e.CodeActionContext=dr={}));var Ft;(function(W){function ge(te,O,Re){var ze={title:te},Gt=!0;return typeof O=="string"?(Gt=!1,ze.kind=O):k.is(O)?ze.command=O:ze.edit=O,Gt&&Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.title)&&(O.diagnostics===void 0||_e.typedArray(O.diagnostics,_.is))&&(O.kind===void 0||_e.string(O.kind))&&(O.edit!==void 0||O.command!==void 0)&&(O.command===void 0||k.is(O.command))&&(O.isPreferred===void 0||_e.boolean(O.isPreferred))&&(O.edit===void 0||ce.is(O.edit))}s(ve,"is"),W.is=ve})(Ft||(e.CodeAction=Ft={}));var Yr;(function(W){function ge(te,O){var Re={range:te};return _e.defined(O)&&(Re.data=O),Re}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.command)||k.is(O.command))}s(ve,"is"),W.is=ve})(Yr||(e.CodeLens=Yr={}));var en;(function(W){function ge(te,O){return{tabSize:te,insertSpaces:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.uinteger(O.tabSize)&&_e.boolean(O.insertSpaces)}s(ve,"is"),W.is=ve})(en||(e.FormattingOptions=en={}));var yn;(function(W){function ge(te,O,Re){return{range:te,target:O,data:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.target)||_e.string(O.target))}s(ve,"is"),W.is=ve})(yn||(e.DocumentLink=yn={}));var Ae;(function(W){function ge(te,O){return{range:te,parent:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&(O.parent===void 0||W.is(O.parent))}s(ve,"is"),W.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Et;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&(te.resultId===void 0||typeof te.resultId=="string")&&Array.isArray(te.data)&&(te.data.length===0||typeof te.data[0]=="number")}s(ge,"is"),W.is=ge})(Et||(e.SemanticTokens=Et={}));var Zt;(function(W){function ge(te,O){return{range:te,text:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(Zt||(e.InlineValueText=Zt={}));var Vt;(function(W){function ge(te,O,Re){return{range:te,variableName:O,caseSensitiveLookup:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&_e.boolean(O.caseSensitiveLookup)&&(_e.string(O.variableName)||O.variableName===void 0)}s(ve,"is"),W.is=ve})(Vt||(e.InlineValueVariableLookup=Vt={}));var vr;(function(W){function ge(te,O){return{range:te,expression:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&(_e.string(O.expression)||O.expression===void 0)}s(ve,"is"),W.is=ve})(vr||(e.InlineValueEvaluatableExpression=vr={}));var Ir;(function(W){function ge(te,O){return{frameId:te,stoppedLocation:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(te.stoppedLocation)}s(ve,"is"),W.is=ve})(Ir||(e.InlineValueContext=Ir={}));var zt;(function(W){W.Type=1,W.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),W.is=ge})(zt||(e.InlayHintKind=zt={}));var ir;(function(W){function ge(te){return{value:te}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.location===void 0||l.is(O.location))&&(O.command===void 0||k.is(O.command))}s(ve,"is"),W.is=ve})(ir||(e.InlayHintLabelPart=ir={}));var Xt;(function(W){function ge(te,O,Re){var ze={position:te,label:O};return Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&a.is(O.position)&&(_e.string(O.label)||_e.typedArray(O.label,ir.is))&&(O.kind===void 0||zt.is(O.kind))&&O.textEdits===void 0||_e.typedArray(O.textEdits,P.is)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.paddingLeft===void 0||_e.boolean(O.paddingLeft))&&(O.paddingRight===void 0||_e.boolean(O.paddingRight))}s(ve,"is"),W.is=ve})(Xt||(e.InlayHint=Xt={}));var Sr;(function(W){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),W.createSnippet=ge})(Sr||(e.StringValue=Sr={}));var qr;(function(W){function ge(ve,te,O,Re){return{insertText:ve,filterText:te,range:O,command:Re}}s(ge,"create"),W.create=ge})(qr||(e.InlineCompletionItem=qr={}));var tn;(function(W){function ge(ve){return{items:ve}}s(ge,"create"),W.create=ge})(tn||(e.InlineCompletionList=tn={}));var zn;(function(W){W.Invoked=0,W.Automatic=1})(zn||(e.InlineCompletionTriggerKind=zn={}));var ai;(function(W){function ge(ve,te){return{range:ve,text:te}}s(ge,"create"),W.create=ge})(ai||(e.SelectedCompletionInfo=ai={}));var Hn;(function(W){function ge(ve,te){return{triggerKind:ve,selectedCompletionInfo:te}}s(ge,"create"),W.create=ge})(Hn||(e.InlineCompletionContext=Hn={}));var ri;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&n.is(te.uri)&&_e.string(te.name)}s(ge,"is"),W.is=ge})(ri||(e.WorkspaceFolder=ri={})),e.EOL=[`
`,`\r
`,"\r"];var ln;(function(W){function ge(Re,ze,Gt,Pr){return new ni(Re,ze,Gt,Pr)}s(ge,"create"),W.create=ge;function ve(Re){var ze=Re;return!!(_e.defined(ze)&&_e.string(ze.uri)&&(_e.undefined(ze.languageId)||_e.string(ze.languageId))&&_e.uinteger(ze.lineCount)&&_e.func(ze.getText)&&_e.func(ze.positionAt)&&_e.func(ze.offsetAt))}s(ve,"is"),W.is=ve;function te(Re,ze){for(var Gt=Re.getText(),Pr=O(ze,function(Wn,ga){var mh=Wn.range.start.line-ga.range.start.line;return mh===0?Wn.range.start.character-ga.range.start.character:mh}),Ar=Gt.length,gn=Pr.length-1;gn>=0;gn--){var Cn=Pr[gn],Tr=Re.offsetAt(Cn.range.start),$t=Re.offsetAt(Cn.range.end);if($t<=Ar)Gt=Gt.substring(0,Tr)+Cn.newText+Gt.substring($t,Gt.length);else throw new Error("Overlapping edit");Ar=Tr}return Gt}s(te,"applyEdits"),W.applyEdits=te;function O(Re,ze){if(Re.length<=1)return Re;var Gt=Re.length/2|0,Pr=Re.slice(0,Gt),Ar=Re.slice(Gt);O(Pr,ze),O(Ar,ze);for(var gn=0,Cn=0,Tr=0;gn<Pr.length&&Cn<Ar.length;){var $t=ze(Pr[gn],Ar[Cn]);$t<=0?Re[Tr++]=Pr[gn++]:Re[Tr++]=Ar[Cn++]}for(;gn<Pr.length;)Re[Tr++]=Pr[gn++];for(;Cn<Ar.length;)Re[Tr++]=Ar[Cn++];return Re}s(O,"mergeSort")})(ln||(e.TextDocument=ln={}));var ni=function(){function W(ge,ve,te,O){this._uri=ge,this._languageId=ve,this._version=te,this._content=O,this._lineOffsets=void 0}return s(W,"FullTextDocument"),Object.defineProperty(W.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),W.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),te=this.offsetAt(ge.end);return this._content.substring(ve,te)}return this._content},W.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,te=!0,O=0;O<ve.length;O++){te&&(ge.push(O),te=!1);var Re=ve.charAt(O);te=Re==="\r"||Re===`
`,Re==="\r"&&O+1<ve.length&&ve.charAt(O+1)===`
`&&O++}te&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},W.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),te=0,O=ve.length;if(O===0)return a.create(0,ge);for(;te<O;){var Re=Math.floor((te+O)/2);ve[Re]>ge?O=Re:te=Re+1}var ze=te-1;return a.create(ze,ge-ve[ze])},W.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var te=ve[ge.line],O=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(te+ge.character,O),te)},Object.defineProperty(W.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),W}(),_e;(function(W){var ge=Object.prototype.toString;function ve($t){return typeof $t<"u"}s(ve,"defined"),W.defined=ve;function te($t){return typeof $t>"u"}s(te,"undefined"),W.undefined=te;function O($t){return $t===!0||$t===!1}s(O,"boolean"),W.boolean=O;function Re($t){return ge.call($t)==="[object String]"}s(Re,"string"),W.string=Re;function ze($t){return ge.call($t)==="[object Number]"}s(ze,"number"),W.number=ze;function Gt($t,Wn,ga){return ge.call($t)==="[object Number]"&&Wn<=$t&&$t<=ga}s(Gt,"numberRange"),W.numberRange=Gt;function Pr($t){return ge.call($t)==="[object Number]"&&-2147483648<=$t&&$t<=2147483647}s(Pr,"integer"),W.integer=Pr;function Ar($t){return ge.call($t)==="[object Number]"&&0<=$t&&$t<=2147483647}s(Ar,"uinteger"),W.uinteger=Ar;function gn($t){return ge.call($t)==="[object Function]"}s(gn,"func"),W.func=gn;function Cn($t){return $t!==null&&typeof $t=="object"}s(Cn,"objectLiteral"),W.objectLiteral=Cn;function Tr($t,Wn){return Array.isArray($t)&&$t.every(Wn)}s(Tr,"typedArray"),W.typedArray=Tr})(_e||(_e={}))})});var ca=U(gf=>{"use strict";d();Object.defineProperty(gf,"__esModule",{value:!0});gf.ProtocolNotificationType=gf.ProtocolNotificationType0=gf.ProtocolRequestType=gf.ProtocolRequestType0=gf.RegistrationType=gf.MessageDirection=void 0;var _4=B_(),dPe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(dPe||(gf.MessageDirection=dPe={}));var pue=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};gf.RegistrationType=pue;var mue=class extends _4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};gf.ProtocolRequestType0=mue;var hue=class extends _4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,_4.ParameterStructures.byName)}};gf.ProtocolRequestType=hue;var gue=class extends _4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};gf.ProtocolNotificationType0=gue;var Aue=class extends _4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,_4.ParameterStructures.byName)}};gf.ProtocolNotificationType=Aue});var SW=U(Ic=>{"use strict";d();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.objectLiteral=Ic.typedArray=Ic.stringArray=Ic.array=Ic.func=Ic.error=Ic.number=Ic.string=Ic.boolean=void 0;function kbt(t){return t===!0||t===!1}s(kbt,"boolean");Ic.boolean=kbt;function fPe(t){return typeof t=="string"||t instanceof String}s(fPe,"string");Ic.string=fPe;function Pbt(t){return typeof t=="number"||t instanceof Number}s(Pbt,"number");Ic.number=Pbt;function Bbt(t){return t instanceof Error}s(Bbt,"error");Ic.error=Bbt;function Dbt(t){return typeof t=="function"}s(Dbt,"func");Ic.func=Dbt;function pPe(t){return Array.isArray(t)}s(pPe,"array");Ic.array=pPe;function Nbt(t){return pPe(t)&&t.every(e=>fPe(e))}s(Nbt,"stringArray");Ic.stringArray=Nbt;function Lbt(t,e){return Array.isArray(t)&&t.every(e)}s(Lbt,"typedArray");Ic.typedArray=Lbt;function Mbt(t){return t!==null&&typeof t=="object"}s(Mbt,"objectLiteral");Ic.objectLiteral=Mbt});var gPe=U(RW=>{"use strict";d();Object.defineProperty(RW,"__esModule",{value:!0});RW.ImplementationRequest=void 0;var mPe=ca(),hPe;(function(t){t.method="textDocument/implementation",t.messageDirection=mPe.MessageDirection.clientToServer,t.type=new mPe.ProtocolRequestType(t.method)})(hPe||(RW.ImplementationRequest=hPe={}))});var CPe=U(kW=>{"use strict";d();Object.defineProperty(kW,"__esModule",{value:!0});kW.TypeDefinitionRequest=void 0;var APe=ca(),yPe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=APe.MessageDirection.clientToServer,t.type=new APe.ProtocolRequestType(t.method)})(yPe||(kW.TypeDefinitionRequest=yPe={}))});var xPe=U(S4=>{"use strict";d();Object.defineProperty(S4,"__esModule",{value:!0});S4.DidChangeWorkspaceFoldersNotification=S4.WorkspaceFoldersRequest=void 0;var PW=ca(),EPe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=PW.MessageDirection.serverToClient,t.type=new PW.ProtocolRequestType0(t.method)})(EPe||(S4.WorkspaceFoldersRequest=EPe={}));var vPe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=PW.MessageDirection.clientToServer,t.type=new PW.ProtocolNotificationType(t.method)})(vPe||(S4.DidChangeWorkspaceFoldersNotification=vPe={}))});var TPe=U(BW=>{"use strict";d();Object.defineProperty(BW,"__esModule",{value:!0});BW.ConfigurationRequest=void 0;var bPe=ca(),IPe;(function(t){t.method="workspace/configuration",t.messageDirection=bPe.MessageDirection.serverToClient,t.type=new bPe.ProtocolRequestType(t.method)})(IPe||(BW.ConfigurationRequest=IPe={}))});var SPe=U(R4=>{"use strict";d();Object.defineProperty(R4,"__esModule",{value:!0});R4.ColorPresentationRequest=R4.DocumentColorRequest=void 0;var DW=ca(),wPe;(function(t){t.method="textDocument/documentColor",t.messageDirection=DW.MessageDirection.clientToServer,t.type=new DW.ProtocolRequestType(t.method)})(wPe||(R4.DocumentColorRequest=wPe={}));var _Pe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=DW.MessageDirection.clientToServer,t.type=new DW.ProtocolRequestType(t.method)})(_Pe||(R4.ColorPresentationRequest=_Pe={}))});var PPe=U(k4=>{"use strict";d();Object.defineProperty(k4,"__esModule",{value:!0});k4.FoldingRangeRefreshRequest=k4.FoldingRangeRequest=void 0;var NW=ca(),RPe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=NW.MessageDirection.clientToServer,t.type=new NW.ProtocolRequestType(t.method)})(RPe||(k4.FoldingRangeRequest=RPe={}));var kPe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=NW.MessageDirection.serverToClient,t.type=new NW.ProtocolRequestType0(t.method)})(kPe||(k4.FoldingRangeRefreshRequest=kPe={}))});var NPe=U(LW=>{"use strict";d();Object.defineProperty(LW,"__esModule",{value:!0});LW.DeclarationRequest=void 0;var BPe=ca(),DPe;(function(t){t.method="textDocument/declaration",t.messageDirection=BPe.MessageDirection.clientToServer,t.type=new BPe.ProtocolRequestType(t.method)})(DPe||(LW.DeclarationRequest=DPe={}))});var FPe=U(MW=>{"use strict";d();Object.defineProperty(MW,"__esModule",{value:!0});MW.SelectionRangeRequest=void 0;var LPe=ca(),MPe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=LPe.MessageDirection.clientToServer,t.type=new LPe.ProtocolRequestType(t.method)})(MPe||(MW.SelectionRangeRequest=MPe={}))});var qPe=U(yb=>{"use strict";d();Object.defineProperty(yb,"__esModule",{value:!0});yb.WorkDoneProgressCancelNotification=yb.WorkDoneProgressCreateRequest=yb.WorkDoneProgress=void 0;var Fbt=B_(),FW=ca(),OPe;(function(t){t.type=new Fbt.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(OPe||(yb.WorkDoneProgress=OPe={}));var QPe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=FW.MessageDirection.serverToClient,t.type=new FW.ProtocolRequestType(t.method)})(QPe||(yb.WorkDoneProgressCreateRequest=QPe={}));var UPe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=FW.MessageDirection.clientToServer,t.type=new FW.ProtocolNotificationType(t.method)})(UPe||(yb.WorkDoneProgressCancelNotification=UPe={}))});var jPe=U(Cb=>{"use strict";d();Object.defineProperty(Cb,"__esModule",{value:!0});Cb.CallHierarchyOutgoingCallsRequest=Cb.CallHierarchyIncomingCallsRequest=Cb.CallHierarchyPrepareRequest=void 0;var P4=ca(),HPe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(HPe||(Cb.CallHierarchyPrepareRequest=HPe={}));var WPe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(WPe||(Cb.CallHierarchyIncomingCallsRequest=WPe={}));var GPe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(GPe||(Cb.CallHierarchyOutgoingCallsRequest=GPe={}))});var JPe=U(Af=>{"use strict";d();Object.defineProperty(Af,"__esModule",{value:!0});Af.SemanticTokensRefreshRequest=Af.SemanticTokensRangeRequest=Af.SemanticTokensDeltaRequest=Af.SemanticTokensRequest=Af.SemanticTokensRegistrationType=Af.TokenFormat=void 0;var q1=ca(),VPe;(function(t){t.Relative="relative"})(VPe||(Af.TokenFormat=VPe={}));var $6;(function(t){t.method="textDocument/semanticTokens",t.type=new q1.RegistrationType(t.method)})($6||(Af.SemanticTokensRegistrationType=$6={}));var $Pe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=q1.MessageDirection.clientToServer,t.type=new q1.ProtocolRequestType(t.method),t.registrationMethod=$6.method})($Pe||(Af.SemanticTokensRequest=$Pe={}));var zPe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=q1.MessageDirection.clientToServer,t.type=new q1.ProtocolRequestType(t.method),t.registrationMethod=$6.method})(zPe||(Af.SemanticTokensDeltaRequest=zPe={}));var YPe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=q1.MessageDirection.clientToServer,t.type=new q1.ProtocolRequestType(t.method),t.registrationMethod=$6.method})(YPe||(Af.SemanticTokensRangeRequest=YPe={}));var KPe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=q1.MessageDirection.serverToClient,t.type=new q1.ProtocolRequestType0(t.method)})(KPe||(Af.SemanticTokensRefreshRequest=KPe={}))});var e3e=U(OW=>{"use strict";d();Object.defineProperty(OW,"__esModule",{value:!0});OW.ShowDocumentRequest=void 0;var XPe=ca(),ZPe;(function(t){t.method="window/showDocument",t.messageDirection=XPe.MessageDirection.serverToClient,t.type=new XPe.ProtocolRequestType(t.method)})(ZPe||(OW.ShowDocumentRequest=ZPe={}))});var n3e=U(QW=>{"use strict";d();Object.defineProperty(QW,"__esModule",{value:!0});QW.LinkedEditingRangeRequest=void 0;var t3e=ca(),r3e;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=t3e.MessageDirection.clientToServer,t.type=new t3e.ProtocolRequestType(t.method)})(r3e||(QW.LinkedEditingRangeRequest=r3e={}))});var d3e=U(Hu=>{"use strict";d();Object.defineProperty(Hu,"__esModule",{value:!0});Hu.WillDeleteFilesRequest=Hu.DidDeleteFilesNotification=Hu.DidRenameFilesNotification=Hu.WillRenameFilesRequest=Hu.DidCreateFilesNotification=Hu.WillCreateFilesRequest=Hu.FileOperationPatternKind=void 0;var Jp=ca(),i3e;(function(t){t.file="file",t.folder="folder"})(i3e||(Hu.FileOperationPatternKind=i3e={}));var o3e;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(o3e||(Hu.WillCreateFilesRequest=o3e={}));var s3e;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(s3e||(Hu.DidCreateFilesNotification=s3e={}));var a3e;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(a3e||(Hu.WillRenameFilesRequest=a3e={}));var c3e;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(c3e||(Hu.DidRenameFilesNotification=c3e={}));var l3e;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(l3e||(Hu.DidDeleteFilesNotification=l3e={}));var u3e;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(u3e||(Hu.WillDeleteFilesRequest=u3e={}))});var g3e=U(Eb=>{"use strict";d();Object.defineProperty(Eb,"__esModule",{value:!0});Eb.MonikerRequest=Eb.MonikerKind=Eb.UniquenessLevel=void 0;var f3e=ca(),p3e;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(p3e||(Eb.UniquenessLevel=p3e={}));var m3e;(function(t){t.$import="import",t.$export="export",t.local="local"})(m3e||(Eb.MonikerKind=m3e={}));var h3e;(function(t){t.method="textDocument/moniker",t.messageDirection=f3e.MessageDirection.clientToServer,t.type=new f3e.ProtocolRequestType(t.method)})(h3e||(Eb.MonikerRequest=h3e={}))});var E3e=U(vb=>{"use strict";d();Object.defineProperty(vb,"__esModule",{value:!0});vb.TypeHierarchySubtypesRequest=vb.TypeHierarchySupertypesRequest=vb.TypeHierarchyPrepareRequest=void 0;var B4=ca(),A3e;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=B4.MessageDirection.clientToServer,t.type=new B4.ProtocolRequestType(t.method)})(A3e||(vb.TypeHierarchyPrepareRequest=A3e={}));var y3e;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=B4.MessageDirection.clientToServer,t.type=new B4.ProtocolRequestType(t.method)})(y3e||(vb.TypeHierarchySupertypesRequest=y3e={}));var C3e;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=B4.MessageDirection.clientToServer,t.type=new B4.ProtocolRequestType(t.method)})(C3e||(vb.TypeHierarchySubtypesRequest=C3e={}))});var b3e=U(D4=>{"use strict";d();Object.defineProperty(D4,"__esModule",{value:!0});D4.InlineValueRefreshRequest=D4.InlineValueRequest=void 0;var UW=ca(),v3e;(function(t){t.method="textDocument/inlineValue",t.messageDirection=UW.MessageDirection.clientToServer,t.type=new UW.ProtocolRequestType(t.method)})(v3e||(D4.InlineValueRequest=v3e={}));var x3e;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=UW.MessageDirection.serverToClient,t.type=new UW.ProtocolRequestType0(t.method)})(x3e||(D4.InlineValueRefreshRequest=x3e={}))});var _3e=U(xb=>{"use strict";d();Object.defineProperty(xb,"__esModule",{value:!0});xb.InlayHintRefreshRequest=xb.InlayHintResolveRequest=xb.InlayHintRequest=void 0;var N4=ca(),I3e;(function(t){t.method="textDocument/inlayHint",t.messageDirection=N4.MessageDirection.clientToServer,t.type=new N4.ProtocolRequestType(t.method)})(I3e||(xb.InlayHintRequest=I3e={}));var T3e;(function(t){t.method="inlayHint/resolve",t.messageDirection=N4.MessageDirection.clientToServer,t.type=new N4.ProtocolRequestType(t.method)})(T3e||(xb.InlayHintResolveRequest=T3e={}));var w3e;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=N4.MessageDirection.serverToClient,t.type=new N4.ProtocolRequestType0(t.method)})(w3e||(xb.InlayHintRefreshRequest=w3e={}))});var N3e=U(Xp=>{"use strict";d();Object.defineProperty(Xp,"__esModule",{value:!0});Xp.DiagnosticRefreshRequest=Xp.WorkspaceDiagnosticRequest=Xp.DocumentDiagnosticRequest=Xp.DocumentDiagnosticReportKind=Xp.DiagnosticServerCancellationData=void 0;var D3e=B_(),Obt=SW(),L4=ca(),S3e;(function(t){function e(r){let n=r;return n&&Obt.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(S3e||(Xp.DiagnosticServerCancellationData=S3e={}));var R3e;(function(t){t.Full="full",t.Unchanged="unchanged"})(R3e||(Xp.DocumentDiagnosticReportKind=R3e={}));var k3e;(function(t){t.method="textDocument/diagnostic",t.messageDirection=L4.MessageDirection.clientToServer,t.type=new L4.ProtocolRequestType(t.method),t.partialResult=new D3e.ProgressType})(k3e||(Xp.DocumentDiagnosticRequest=k3e={}));var P3e;(function(t){t.method="workspace/diagnostic",t.messageDirection=L4.MessageDirection.clientToServer,t.type=new L4.ProtocolRequestType(t.method),t.partialResult=new D3e.ProgressType})(P3e||(Xp.WorkspaceDiagnosticRequest=P3e={}));var B3e;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=L4.MessageDirection.serverToClient,t.type=new L4.ProtocolRequestType0(t.method)})(B3e||(Xp.DiagnosticRefreshRequest=B3e={}))});var q3e=U(Na=>{"use strict";d();Object.defineProperty(Na,"__esModule",{value:!0});Na.DidCloseNotebookDocumentNotification=Na.DidSaveNotebookDocumentNotification=Na.DidChangeNotebookDocumentNotification=Na.NotebookCellArrayChange=Na.DidOpenNotebookDocumentNotification=Na.NotebookDocumentSyncRegistrationType=Na.NotebookDocument=Na.NotebookCell=Na.ExecutionSummary=Na.NotebookCellKind=void 0;var z6=_W(),Kh=SW(),ry=ca(),yue;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(yue||(Na.NotebookCellKind=yue={}));var Cue;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return Kh.objectLiteral(o)&&z6.uinteger.is(o.executionOrder)&&(o.success===void 0||Kh.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Cue||(Na.ExecutionSummary=Cue={}));var qW;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return Kh.objectLiteral(a)&&yue.is(a.kind)&&z6.DocumentUri.is(a.document)&&(a.metadata===void 0||Kh.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Cue.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Kh.objectLiteral(o)&&Kh.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(qW||(Na.NotebookCell=qW={}));var L3e;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Kh.objectLiteral(i)&&Kh.string(i.uri)&&z6.integer.is(i.version)&&Kh.typedArray(i.cells,qW.is)}s(r,"is"),t.is=r})(L3e||(Na.NotebookDocument=L3e={}));var M4;(function(t){t.method="notebookDocument/sync",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.RegistrationType(t.method)})(M4||(Na.NotebookDocumentSyncRegistrationType=M4={}));var M3e;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=M4.method})(M3e||(Na.DidOpenNotebookDocumentNotification=M3e={}));var F3e;(function(t){function e(n){let i=n;return Kh.objectLiteral(i)&&z6.uinteger.is(i.start)&&z6.uinteger.is(i.deleteCount)&&(i.cells===void 0||Kh.typedArray(i.cells,qW.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(F3e||(Na.NotebookCellArrayChange=F3e={}));var O3e;(function(t){t.method="notebookDocument/didChange",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=M4.method})(O3e||(Na.DidChangeNotebookDocumentNotification=O3e={}));var Q3e;(function(t){t.method="notebookDocument/didSave",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=M4.method})(Q3e||(Na.DidSaveNotebookDocumentNotification=Q3e={}));var U3e;(function(t){t.method="notebookDocument/didClose",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=M4.method})(U3e||(Na.DidCloseNotebookDocumentNotification=U3e={}))});var G3e=U(HW=>{"use strict";d();Object.defineProperty(HW,"__esModule",{value:!0});HW.InlineCompletionRequest=void 0;var H3e=ca(),W3e;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=H3e.MessageDirection.clientToServer,t.type=new H3e.ProtocolRequestType(t.method)})(W3e||(HW.InlineCompletionRequest=W3e={}))});var nDe=U(Ee=>{"use strict";d();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.WorkspaceSymbolRequest=Ee.CodeActionResolveRequest=Ee.CodeActionRequest=Ee.DocumentSymbolRequest=Ee.DocumentHighlightRequest=Ee.ReferencesRequest=Ee.DefinitionRequest=Ee.SignatureHelpRequest=Ee.SignatureHelpTriggerKind=Ee.HoverRequest=Ee.CompletionResolveRequest=Ee.CompletionRequest=Ee.CompletionTriggerKind=Ee.PublishDiagnosticsNotification=Ee.WatchKind=Ee.RelativePattern=Ee.FileChangeType=Ee.DidChangeWatchedFilesNotification=Ee.WillSaveTextDocumentWaitUntilRequest=Ee.WillSaveTextDocumentNotification=Ee.TextDocumentSaveReason=Ee.DidSaveTextDocumentNotification=Ee.DidCloseTextDocumentNotification=Ee.DidChangeTextDocumentNotification=Ee.TextDocumentContentChangeEvent=Ee.DidOpenTextDocumentNotification=Ee.TextDocumentSyncKind=Ee.TelemetryEventNotification=Ee.LogMessageNotification=Ee.ShowMessageRequest=Ee.ShowMessageNotification=Ee.MessageType=Ee.DidChangeConfigurationNotification=Ee.ExitNotification=Ee.ShutdownRequest=Ee.InitializedNotification=Ee.InitializeErrorCodes=Ee.InitializeRequest=Ee.WorkDoneProgressOptions=Ee.TextDocumentRegistrationOptions=Ee.StaticRegistrationOptions=Ee.PositionEncodingKind=Ee.FailureHandlingKind=Ee.ResourceOperationKind=Ee.UnregistrationRequest=Ee.RegistrationRequest=Ee.DocumentSelector=Ee.NotebookCellTextDocumentFilter=Ee.NotebookDocumentFilter=Ee.TextDocumentFilter=void 0;Ee.MonikerRequest=Ee.MonikerKind=Ee.UniquenessLevel=Ee.WillDeleteFilesRequest=Ee.DidDeleteFilesNotification=Ee.WillRenameFilesRequest=Ee.DidRenameFilesNotification=Ee.WillCreateFilesRequest=Ee.DidCreateFilesNotification=Ee.FileOperationPatternKind=Ee.LinkedEditingRangeRequest=Ee.ShowDocumentRequest=Ee.SemanticTokensRegistrationType=Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.TokenFormat=Ee.CallHierarchyPrepareRequest=Ee.CallHierarchyOutgoingCallsRequest=Ee.CallHierarchyIncomingCallsRequest=Ee.WorkDoneProgressCancelNotification=Ee.WorkDoneProgressCreateRequest=Ee.WorkDoneProgress=Ee.SelectionRangeRequest=Ee.DeclarationRequest=Ee.FoldingRangeRefreshRequest=Ee.FoldingRangeRequest=Ee.ColorPresentationRequest=Ee.DocumentColorRequest=Ee.ConfigurationRequest=Ee.DidChangeWorkspaceFoldersNotification=Ee.WorkspaceFoldersRequest=Ee.TypeDefinitionRequest=Ee.ImplementationRequest=Ee.ApplyWorkspaceEditRequest=Ee.ExecuteCommandRequest=Ee.PrepareRenameRequest=Ee.RenameRequest=Ee.PrepareSupportDefaultBehavior=Ee.DocumentOnTypeFormattingRequest=Ee.DocumentRangesFormattingRequest=Ee.DocumentRangeFormattingRequest=Ee.DocumentFormattingRequest=Ee.DocumentLinkResolveRequest=Ee.DocumentLinkRequest=Ee.CodeLensRefreshRequest=Ee.CodeLensResolveRequest=Ee.CodeLensRequest=Ee.WorkspaceSymbolResolveRequest=void 0;Ee.InlineCompletionRequest=Ee.DidCloseNotebookDocumentNotification=Ee.DidSaveNotebookDocumentNotification=Ee.DidChangeNotebookDocumentNotification=Ee.NotebookCellArrayChange=Ee.DidOpenNotebookDocumentNotification=Ee.NotebookDocumentSyncRegistrationType=Ee.NotebookDocument=Ee.NotebookCell=Ee.ExecutionSummary=Ee.NotebookCellKind=Ee.DiagnosticRefreshRequest=Ee.WorkspaceDiagnosticRequest=Ee.DocumentDiagnosticRequest=Ee.DocumentDiagnosticReportKind=Ee.DiagnosticServerCancellationData=Ee.InlayHintRefreshRequest=Ee.InlayHintResolveRequest=Ee.InlayHintRequest=Ee.InlineValueRefreshRequest=Ee.InlineValueRequest=Ee.TypeHierarchySupertypesRequest=Ee.TypeHierarchySubtypesRequest=Ee.TypeHierarchyPrepareRequest=void 0;var Qt=ca(),j3e=_W(),vl=SW(),Qbt=gPe();Object.defineProperty(Ee,"ImplementationRequest",{enumerable:!0,get:s(function(){return Qbt.ImplementationRequest},"get")});var Ubt=CPe();Object.defineProperty(Ee,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Ubt.TypeDefinitionRequest},"get")});var ZBe=xPe();Object.defineProperty(Ee,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return ZBe.WorkspaceFoldersRequest},"get")});Object.defineProperty(Ee,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return ZBe.DidChangeWorkspaceFoldersNotification},"get")});var qbt=TPe();Object.defineProperty(Ee,"ConfigurationRequest",{enumerable:!0,get:s(function(){return qbt.ConfigurationRequest},"get")});var eDe=SPe();Object.defineProperty(Ee,"DocumentColorRequest",{enumerable:!0,get:s(function(){return eDe.DocumentColorRequest},"get")});Object.defineProperty(Ee,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return eDe.ColorPresentationRequest},"get")});var tDe=PPe();Object.defineProperty(Ee,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return tDe.FoldingRangeRequest},"get")});Object.defineProperty(Ee,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return tDe.FoldingRangeRefreshRequest},"get")});var Hbt=NPe();Object.defineProperty(Ee,"DeclarationRequest",{enumerable:!0,get:s(function(){return Hbt.DeclarationRequest},"get")});var Wbt=FPe();Object.defineProperty(Ee,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Wbt.SelectionRangeRequest},"get")});var Iue=qPe();Object.defineProperty(Ee,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Iue.WorkDoneProgress},"get")});Object.defineProperty(Ee,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Iue.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(Ee,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Iue.WorkDoneProgressCancelNotification},"get")});var Tue=jPe();Object.defineProperty(Ee,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Tue.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Tue.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Tue.CallHierarchyPrepareRequest},"get")});var F4=JPe();Object.defineProperty(Ee,"TokenFormat",{enumerable:!0,get:s(function(){return F4.TokenFormat},"get")});Object.defineProperty(Ee,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return F4.SemanticTokensRequest},"get")});Object.defineProperty(Ee,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return F4.SemanticTokensDeltaRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return F4.SemanticTokensRangeRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return F4.SemanticTokensRefreshRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return F4.SemanticTokensRegistrationType},"get")});var Gbt=e3e();Object.defineProperty(Ee,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Gbt.ShowDocumentRequest},"get")});var jbt=n3e();Object.defineProperty(Ee,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return jbt.LinkedEditingRangeRequest},"get")});var D_=d3e();Object.defineProperty(Ee,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return D_.FileOperationPatternKind},"get")});Object.defineProperty(Ee,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return D_.DidCreateFilesNotification},"get")});Object.defineProperty(Ee,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return D_.WillCreateFilesRequest},"get")});Object.defineProperty(Ee,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return D_.DidRenameFilesNotification},"get")});Object.defineProperty(Ee,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return D_.WillRenameFilesRequest},"get")});Object.defineProperty(Ee,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return D_.DidDeleteFilesNotification},"get")});Object.defineProperty(Ee,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return D_.WillDeleteFilesRequest},"get")});var wue=g3e();Object.defineProperty(Ee,"UniquenessLevel",{enumerable:!0,get:s(function(){return wue.UniquenessLevel},"get")});Object.defineProperty(Ee,"MonikerKind",{enumerable:!0,get:s(function(){return wue.MonikerKind},"get")});Object.defineProperty(Ee,"MonikerRequest",{enumerable:!0,get:s(function(){return wue.MonikerRequest},"get")});var _ue=E3e();Object.defineProperty(Ee,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return _ue.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return _ue.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return _ue.TypeHierarchySupertypesRequest},"get")});var rDe=b3e();Object.defineProperty(Ee,"InlineValueRequest",{enumerable:!0,get:s(function(){return rDe.InlineValueRequest},"get")});Object.defineProperty(Ee,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return rDe.InlineValueRefreshRequest},"get")});var Sue=_3e();Object.defineProperty(Ee,"InlayHintRequest",{enumerable:!0,get:s(function(){return Sue.InlayHintRequest},"get")});Object.defineProperty(Ee,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Sue.InlayHintResolveRequest},"get")});Object.defineProperty(Ee,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Sue.InlayHintRefreshRequest},"get")});var Y6=N3e();Object.defineProperty(Ee,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return Y6.DiagnosticServerCancellationData},"get")});Object.defineProperty(Ee,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return Y6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(Ee,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return Y6.DocumentDiagnosticRequest},"get")});Object.defineProperty(Ee,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return Y6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(Ee,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return Y6.DiagnosticRefreshRequest},"get")});var ny=q3e();Object.defineProperty(Ee,"NotebookCellKind",{enumerable:!0,get:s(function(){return ny.NotebookCellKind},"get")});Object.defineProperty(Ee,"ExecutionSummary",{enumerable:!0,get:s(function(){return ny.ExecutionSummary},"get")});Object.defineProperty(Ee,"NotebookCell",{enumerable:!0,get:s(function(){return ny.NotebookCell},"get")});Object.defineProperty(Ee,"NotebookDocument",{enumerable:!0,get:s(function(){return ny.NotebookDocument},"get")});Object.defineProperty(Ee,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return ny.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(Ee,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return ny.NotebookCellArrayChange},"get")});Object.defineProperty(Ee,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidCloseNotebookDocumentNotification},"get")});var Vbt=G3e();Object.defineProperty(Ee,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return Vbt.InlineCompletionRequest},"get")});var Eue;(function(t){function e(r){let n=r;return vl.string(n)||vl.string(n.language)||vl.string(n.scheme)||vl.string(n.pattern)}s(e,"is"),t.is=e})(Eue||(Ee.TextDocumentFilter=Eue={}));var vue;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(vl.string(n.notebookType)||vl.string(n.scheme)||vl.string(n.pattern))}s(e,"is"),t.is=e})(vue||(Ee.NotebookDocumentFilter=vue={}));var xue;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(vl.string(n.notebook)||vue.is(n.notebook))&&(n.language===void 0||vl.string(n.language))}s(e,"is"),t.is=e})(xue||(Ee.NotebookCellTextDocumentFilter=xue={}));var bue;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!vl.string(n)&&!Eue.is(n)&&!xue.is(n))return!1;return!0}s(e,"is"),t.is=e})(bue||(Ee.DocumentSelector=bue={}));var V3e;(function(t){t.method="client/registerCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(V3e||(Ee.RegistrationRequest=V3e={}));var $3e;(function(t){t.method="client/unregisterCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})($3e||(Ee.UnregistrationRequest=$3e={}));var z3e;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(z3e||(Ee.ResourceOperationKind=z3e={}));var Y3e;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Y3e||(Ee.FailureHandlingKind=Y3e={}));var K3e;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(K3e||(Ee.PositionEncodingKind=K3e={}));var J3e;(function(t){function e(r){let n=r;return n&&vl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(J3e||(Ee.StaticRegistrationOptions=J3e={}));var X3e;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||bue.is(n.documentSelector))}s(e,"is"),t.is=e})(X3e||(Ee.TextDocumentRegistrationOptions=X3e={}));var Z3e;(function(t){function e(n){let i=n;return vl.objectLiteral(i)&&(i.workDoneProgress===void 0||vl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&vl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(Z3e||(Ee.WorkDoneProgressOptions=Z3e={}));var eBe;(function(t){t.method="initialize",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(eBe||(Ee.InitializeRequest=eBe={}));var tBe;(function(t){t.unknownProtocolVersion=1})(tBe||(Ee.InitializeErrorCodes=tBe={}));var rBe;(function(t){t.method="initialized",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(rBe||(Ee.InitializedNotification=rBe={}));var nBe;(function(t){t.method="shutdown",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType0(t.method)})(nBe||(Ee.ShutdownRequest=nBe={}));var iBe;(function(t){t.method="exit",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType0(t.method)})(iBe||(Ee.ExitNotification=iBe={}));var oBe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(oBe||(Ee.DidChangeConfigurationNotification=oBe={}));var sBe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(sBe||(Ee.MessageType=sBe={}));var aBe;(function(t){t.method="window/showMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(aBe||(Ee.ShowMessageNotification=aBe={}));var cBe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(cBe||(Ee.ShowMessageRequest=cBe={}));var lBe;(function(t){t.method="window/logMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(lBe||(Ee.LogMessageNotification=lBe={}));var uBe;(function(t){t.method="telemetry/event",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(uBe||(Ee.TelemetryEventNotification=uBe={}));var dBe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(dBe||(Ee.TextDocumentSyncKind=dBe={}));var fBe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(fBe||(Ee.DidOpenTextDocumentNotification=fBe={}));var pBe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(pBe||(Ee.TextDocumentContentChangeEvent=pBe={}));var mBe;(function(t){t.method="textDocument/didChange",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(mBe||(Ee.DidChangeTextDocumentNotification=mBe={}));var hBe;(function(t){t.method="textDocument/didClose",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(hBe||(Ee.DidCloseTextDocumentNotification=hBe={}));var gBe;(function(t){t.method="textDocument/didSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(gBe||(Ee.DidSaveTextDocumentNotification=gBe={}));var ABe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(ABe||(Ee.TextDocumentSaveReason=ABe={}));var yBe;(function(t){t.method="textDocument/willSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(yBe||(Ee.WillSaveTextDocumentNotification=yBe={}));var CBe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(CBe||(Ee.WillSaveTextDocumentWaitUntilRequest=CBe={}));var EBe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(EBe||(Ee.DidChangeWatchedFilesNotification=EBe={}));var vBe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(vBe||(Ee.FileChangeType=vBe={}));var xBe;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(j3e.URI.is(n.baseUri)||j3e.WorkspaceFolder.is(n.baseUri))&&vl.string(n.pattern)}s(e,"is"),t.is=e})(xBe||(Ee.RelativePattern=xBe={}));var bBe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(bBe||(Ee.WatchKind=bBe={}));var IBe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(IBe||(Ee.PublishDiagnosticsNotification=IBe={}));var TBe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(TBe||(Ee.CompletionTriggerKind=TBe={}));var wBe;(function(t){t.method="textDocument/completion",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(wBe||(Ee.CompletionRequest=wBe={}));var _Be;(function(t){t.method="completionItem/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(_Be||(Ee.CompletionResolveRequest=_Be={}));var SBe;(function(t){t.method="textDocument/hover",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(SBe||(Ee.HoverRequest=SBe={}));var RBe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(RBe||(Ee.SignatureHelpTriggerKind=RBe={}));var kBe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(kBe||(Ee.SignatureHelpRequest=kBe={}));var PBe;(function(t){t.method="textDocument/definition",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(PBe||(Ee.DefinitionRequest=PBe={}));var BBe;(function(t){t.method="textDocument/references",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(BBe||(Ee.ReferencesRequest=BBe={}));var DBe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(DBe||(Ee.DocumentHighlightRequest=DBe={}));var NBe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(NBe||(Ee.DocumentSymbolRequest=NBe={}));var LBe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(LBe||(Ee.CodeActionRequest=LBe={}));var MBe;(function(t){t.method="codeAction/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(MBe||(Ee.CodeActionResolveRequest=MBe={}));var FBe;(function(t){t.method="workspace/symbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(FBe||(Ee.WorkspaceSymbolRequest=FBe={}));var OBe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(OBe||(Ee.WorkspaceSymbolResolveRequest=OBe={}));var QBe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(QBe||(Ee.CodeLensRequest=QBe={}));var UBe;(function(t){t.method="codeLens/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(UBe||(Ee.CodeLensResolveRequest=UBe={}));var qBe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType0(t.method)})(qBe||(Ee.CodeLensRefreshRequest=qBe={}));var HBe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(HBe||(Ee.DocumentLinkRequest=HBe={}));var WBe;(function(t){t.method="documentLink/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(WBe||(Ee.DocumentLinkResolveRequest=WBe={}));var GBe;(function(t){t.method="textDocument/formatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(GBe||(Ee.DocumentFormattingRequest=GBe={}));var jBe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(jBe||(Ee.DocumentRangeFormattingRequest=jBe={}));var VBe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(VBe||(Ee.DocumentRangesFormattingRequest=VBe={}));var $Be;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})($Be||(Ee.DocumentOnTypeFormattingRequest=$Be={}));var zBe;(function(t){t.Identifier=1})(zBe||(Ee.PrepareSupportDefaultBehavior=zBe={}));var YBe;(function(t){t.method="textDocument/rename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(YBe||(Ee.RenameRequest=YBe={}));var KBe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(KBe||(Ee.PrepareRenameRequest=KBe={}));var JBe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(JBe||(Ee.ExecuteCommandRequest=JBe={}));var XBe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType("workspace/applyEdit")})(XBe||(Ee.ApplyWorkspaceEditRequest=XBe={}))});var oDe=U(WW=>{"use strict";d();Object.defineProperty(WW,"__esModule",{value:!0});WW.createProtocolConnection=void 0;var iDe=B_();function $bt(t,e,r,n){return iDe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,iDe.createMessageConnection)(t,e,r,n)}s($bt,"createProtocolConnection");WW.createProtocolConnection=$bt});var aDe=U(yf=>{"use strict";d();var zbt=yf&&yf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GW=yf&&yf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zbt(e,t,r)};Object.defineProperty(yf,"__esModule",{value:!0});yf.LSPErrorCodes=yf.createProtocolConnection=void 0;GW(B_(),yf);GW(_W(),yf);GW(ca(),yf);GW(nDe(),yf);var Ybt=oDe();Object.defineProperty(yf,"createProtocolConnection",{enumerable:!0,get:s(function(){return Ybt.createProtocolConnection},"get")});var sDe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(sDe||(yf.LSPErrorCodes=sDe={}))});var di=U(iy=>{"use strict";d();var Kbt=iy&&iy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cDe=iy&&iy.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kbt(e,t,r)};Object.defineProperty(iy,"__esModule",{value:!0});iy.createProtocolConnection=void 0;var Jbt=fue();cDe(fue(),iy);cDe(aDe(),iy);function Xbt(t,e,r,n){return(0,Jbt.createMessageConnection)(t,e,r,n)}s(Xbt,"createProtocolConnection");iy.createProtocolConnection=Xbt});var JDe=U((iG,KDe)=>{d();(function(t,e){typeof iG=="object"&&typeof KDe<"u"?e(iG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(iG,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),pe=r(J,"slice");function Y(w,R){try{return{v:w.apply(this,R)}}catch(B){return{e:B}}}s(Y,"safe");function G(w){return function(R){return typeof R===w}}s(G,"_createIs");function H(w){var R="[object "+w+"]";return function(B){return!!(B&&ce(B)===R)}}s(H,"_createObjIs");function ce(w){return _[x].call(w)}s(ce,"objToString");function ie(w){return typeof w===f||w===f}s(ie,"isUndefined");function V(w){return!z(w)}s(V,"isStrictUndefined");function Q(w){return w===i||ie(w)}s(Q,"isNullOrUndefined");function z(w){return!!w||w!==n}s(z,"isDefined");var re=G("string"),fe=G(a);function ne(w){return!w&&Q(w)?!1:!!w&&typeof w===c}s(ne,"isObject");var me=r(M,"isArray"),he=H("Error"),Qe=r(b,"getOwnPropertyDescriptor");function ke(w,R){return!!w&&_.hasOwnProperty[E](w,R)}s(ke,"objHasOwnProperty");var tt=e(r(b,"hasOwn"),Fe);function Fe(w,R){return ke(w,R)||!!Qe(w,R)}s(Fe,"polyObjHasOwn");function ht(w,R,B){if(w&&ne(w)){for(var F in w)if(tt(w,F)&&R[E](B||w,F,w[F])===-1)break}}s(ht,"objForEachKey");var St={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function xt(w){var R={};if(R[St.c]=!0,R[St.e]=!0,w.l){R.get=function(){return w.l.v};var B=Qe(w.l,"v");B&&B.set&&(R.set=function(F){w.l.v=F})}return ht(w,function(F,se){R[St[F]]=V(se)?R[St[F]]:se}),R}s(xt,"_createProp");var Tt=r(b,"defineProperty");function le(w,R,B){return Tt(w,R,xt(B))}s(le,"objDefine");function Ue(w,R,B,F,se){var be={};return ht(w,function(we,Oe){ye(be,we,R?Oe:we),ye(be,Oe,B?Oe:we)}),F?F(be):be}s(Ue,"_createKeyValueMap");function ye(w,R,B,F){Tt(w,R,{value:B,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var nt=e(k),ee="[object Error]";function oe(w,R){var B=o,F=_[x][E](w);F===ee&&(w={stack:nt(w.stack),message:nt(w.message),name:nt(w.name)});try{B=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),B=(B?B.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||nt(w)}catch(se){B=" - "+oe(se,R)}return F+": "+B}s(oe,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function De(w){throw new TypeError(w)}s(De,"throwTypeError");var xe=r(b,"freeze");function Ye(w){return w}s(Ye,"_doNothing");function st(w){return w[u]||i}s(st,"_getProto");var yt=r(b,"assign"),qt=r(b,"keys"),dr=e(xe,Ye),Ft=e(r(b,"getPrototypeOf"),st);function Yr(w){return Ue(w,1,0,dr)}s(Yr,"createEnum");function en(w){var R={};return ht(w,function(B,F){ye(R,B,F[1]),ye(R,F[0],F[1])}),dr(R)}s(en,"createSimpleMap");function yn(w){return en(w)}s(yn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function Et(){if(!Ge){var w=Y(ft).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(Et,"_getGlobalConfig");var Zt=Vt;function Vt(w,R,B){var F=R?R[w]:i;return function(se){var be=(se?se[w]:i)||F;if(be||B){var we=arguments;return(be||B).apply(se,be?pe[E](we,1):we)}De('"'+nt(w)+'" not defined for '+oe(se))}}s(Vt,"_unwrapFunctionWithPoly");var vr=r(N,"min"),Ir=r(N,"max"),zt=Zt("slice",P),ir=Zt("substring",P),Xt=Vt("substr",P,Sr);function Sr(w,R,B){return Q(w)&&De("Invalid "+oe(w)),B<0?o:(R=R||0,R<0&&(R=Ir(R+w[g],0)),ie(B)?zt(w,R):zt(w,R,R+B))}s(Sr,"polyStrSubstr");function qr(w,R){return ir(w,0,R)}s(qr,"strLeft");var tn="_urid",zn;function ai(){if(!zn){var w=Et();zn=w.gblSym=w.gblSym||{k:{},s:{}}}return zn}s(ai,"_globalSymbolRegistry");function Hn(w){var R={description:nt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Hn,"polyNewSymbol");function ri(w){var R=ai();if(!tt(R.k,w)){var B=Hn(w),F=qt(R.s).length;B[tn]=function(){return F+"_"+B[x]()},R.k[w]=B,R.s[B[tn]()]=nt(w)}return R.k[w]}s(ri,"polySymbolFor");var ln;function ni(){ln=Et()}s(ni,"_initTestHooks");function _e(w){return Tt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var W="window",ge;function ve(w,R){var B;return function(){return!ln&&ni(),(!B||ln.lzy)&&(B=_e(Y(w,R).v)),B.v}}s(ve,"_getGlobalInstFn");function te(w){return!ln&&ni(),(!ge||w===!1||ln.lzy)&&(ge=_e(Y(ft).v||i)),ge.v}s(te,"getGlobal");function O(w,R){var B;if(!ge||R===!1?B=te(R):B=ge.v,B&&B[w])return B[w];if(w===W)try{return window}catch{}return i}s(O,"getInst");var Re=ve(O,["document"]);function ze(){return!!Gt()}s(ze,"hasWindow");var Gt=ve(O,[W]);function Pr(){return!!Ar()}s(Pr,"hasNavigator");var Ar=ve(O,["navigator"]),gn,Cn;function Tr(){return gn=_e(Y(O,[m]).v),gn}s(Tr,"_initSymbol");function $t(w){var R=(ln.lzy?0:gn)||Tr();return R.v?R.v[w]:n}s($t,"_getSymbolKey");function Wn(w,R){!ln&&ni();var B=(ln.lzy?0:gn)||Tr();return B.v?B.v(w):R?i:Hn(w)}s(Wn,"newSymbol");function ga(w){return!ln&&ni(),Cn=(ln.lzy?0:Cn)||_e(Y($t,["for"]).v),(Cn.v||ri)(w)}s(ga,"symbolFor");function mh(w,R,B){return w.apply(R,B)}s(mh,"fnApply");function dl(w,R,B){if(w)for(var F=w[g]>>>0,se=0;se<F&&!(se in w&&R[E](B||w,w[se],se,w)===-1);se++);}s(dl,"arrForEach");var hh=Zt("indexOf",J),Ip=Zt("map",J),Ba=Zt("reduce",J),pA=e(r(b,"create"),Mv);function Mv(w){if(!w)return{};var R=typeof w;R!==c&&R!==a&&De("Prototype must be an Object or function: "+oe(w));function B(){}return s(B,"tempFunc"),B[l]=w,new B}s(Mv,"polyObjCreate");var WN;function gh(w,R){var B=b.setPrototypeOf||function(F,se){var be;!WN&&(WN=_e((be={},be[u]=[],be instanceof Array))),WN.v?F[u]=se:ht(se,function(we,Oe){return F[we]=Oe})};return B(w,R)}s(gh,"objSetPrototypeOf");function zoe(w,R,B){Y(le,[R,y,{v:w,c:!0,e:!1}]),R=gh(R,B);function F(){this[p]=R,Y(le,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[l]=B===i?pA(B):(F[l]=B[l],new F),R}s(zoe,"_createCustomError");function mA(w,R){R&&(w[y]=R)}s(mA,"_setName");function Yoe(w,R,B){var F=B||Error,se=F[l][y],be=Error.captureStackTrace;return zoe(w,function(){var we=this,Oe=arguments;try{Y(mA,[F,w]);var Ze=mh(F,we,pe[E](Oe))||we;if(Ze!==we){var gt=Ft(we);gt!==Ft(Ze)&&gh(Ze,gt)}return be&&be(Ze,we[p]),R&&R(Ze,Oe),Ze}finally{Y(mA,[F,se])}},F)}s(Yoe,"createCustomError");function JC(){return(Date.now||GN)()}s(JC,"utcNow");function GN(){return new Date().getTime()}s(GN,"polyUtcNow");function x5(w){return s(function(B){return Q(B)&&De("strTrim called ["+oe(B)+"]"),B&&B.replace&&(B=B.replace(w,o)),B},"_doTrim")}s(x5,"_createTrimFn");var Koe=x5(/^\s+|(?=\s)\s+$/g),Su=Vt("trim",P,Koe),hA=r(N,"floor"),mw,XC,hw;function gA(w){if(!w||typeof w!==c)return!1;hw||(hw=ze()?Gt():!0);var R=!1;if(w!==hw){XC||(mw=Function[l][x],XC=mw[E](b));try{var B=Ft(w);R=!B,R||(ke(B,p)&&(B=B[p]),R=!!(B&&typeof B===a&&mw[E](B)===XC))}catch{}}return R}s(gA,"isPlainObject");var b5;function gw(){return!ln&&ni(),(!b5||ln.lzy)&&(b5=_e(Y(O,["performance"]).v)),b5.v}s(gw,"getPerformance");var jN=r(N,"round"),Fv=Vt("endsWith",P,Ov);function Ov(w,R,B){re(w)||De("'"+oe(w)+"' is not a string");var F=re(R)?R:nt(R),se=!ie(B)&&B<w[g]?B:w[g];return ir(w,se-F[g],se)===F}s(Ov,"polyStrEndsWith");var jr=Zt("indexOf",P),fd="ref",ZC="unref",Qv="hasRef",Joe="enabled";function AA(w,R,B){var F=!0,se=w?R(i):i,be;function we(){return F=!1,se&&se[ZC]&&se[ZC](),be}s(we,"_unref");function Oe(){se&&B(se),se=i}s(Oe,"_cancel");function Ze(){return se=R(se),F||we(),be}s(Ze,"_refresh");function gt(sr){!sr&&se&&Oe(),sr&&!se&&Ze()}return s(gt,"_setEnabled"),be={cancel:Oe,refresh:Ze},be[Qv]=function(){return se&&se[Qv]?se[Qv]():F},be[fd]=function(){return F=!0,se&&se[fd]&&se[fd](),be},be[ZC]=we,be=Tt(be,Joe,{get:s(function(){return!!se},"get"),set:gt}),{h:be,dn:s(function(){se=i},"dn")}}s(AA,"_createTimerHandler");function Xoe(w,R,B){var F=me(R),se=F?R.length:0,be=(se>0?R[0]:F?n:R)||setTimeout,we=(se>1?R[1]:n)||clearTimeout,Oe=B[0];B[0]=function(){Ze.dn(),mh(Oe,n,pe[E](arguments))};var Ze=AA(w,function(gt){if(gt){if(gt.refresh)return gt.refresh(),gt;mh(we,n,[gt])}return mh(be,n,B)},function(gt){mh(we,n,[gt])});return Ze.h}s(Xoe,"_createTimeoutWith");function VN(w,R){return Xoe(!0,n,pe[E](arguments))}s(VN,"scheduleTimeout");var Aw=Yr,Zoe=yn,yw="toLowerCase",gc="length",yA="warnToConsole",Cw="throwInternal",JQ="watch",ese="apply",so="push",e1="splice",CA="logger",$N="cancel",Ew="name",pd="unload",XQ="version",ZQ="loggingLevelConsole",zN="messageId",t1="message",YN="diagLog",eU="userAgent",KN="split",Uv="replace",EA="type",tU="evtName",I5="traceFlags",JN="getAttribute",T5;function tse(w,R){T5||(T5=Yoe("AggregationError",function(F,se){se[gc]>1&&(F.errors=se[1])}));var B=w||"One or more errors occurred.";throw dl(R,function(F,se){B+=`
`.concat(se," > ").concat(oe(F))}),new T5(B,R||[])}s(tse,"throwAggregationError");var rse="function",rU="object",nse="undefined",Ah="prototype",w5=Object,XN=w5[Ah];(te()||{}).Symbol,(te()||{}).Reflect;var _5="hasOwnProperty",ise=s(function(w){for(var R,B=1,F=arguments.length;B<F;B++){R=arguments[B];for(var se in R)XN[_5].call(R,se)&&(w[se]=R[se])}return w},"__objAssignFnImpl"),S5=yt||ise,R5=s(function(w,R){return R5=w5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var se in F)F[_5](se)&&(B[se]=F[se])},R5(w,R)},"extendStaticsFn");function vA(w,R){typeof R!==rse&&R!==null&&De("Class extends value "+String(R)+" is not a constructor or null"),R5(w,R);function B(){this.constructor=w}s(B,"__"),w[Ah]=R===null?pA(R):(B[Ah]=R[Ah],new B)}s(vA,"__extendsFn");var k5,r1="constructor",ef="prototype",tf="function",n1="_dynInstFuncs",qv="_isDynProxy",xA="_dynClass",Hv="_dynCls$",ZN="_dynInstChk",i1=ZN,Wv="_dfOpts",e8="_unknown_",P5="__proto__",Gv="_dyn"+P5,vw="__dynProto$Gbl",B5="_dynInstProto",jv="useBaseInst",Vv="setInstFuncs",xw=Object,o1=xw.getPrototypeOf,$v=xw.getOwnPropertyNames,t8=te(),D5=t8[vw]||(t8[vw]={o:(k5={},k5[Vv]=!0,k5[jv]=!0,k5),n:1e3});function zv(w){return w&&(w===xw[ef]||w===Array[ef])}s(zv,"_isObjectOrArrayPrototype");function Yv(w){return zv(w)||w===Function[ef]}s(Yv,"_isObjectArrayOrFunctionPrototype");function yh(w){var R;if(w){if(o1)return o1(w);var B=w[P5]||w[ef]||(w[r1]?w[r1][ef]:null);R=w[Gv]||B,ke(w,Gv)||(delete w[B5],R=w[Gv]=w[B5]||w[Gv],w[B5]=B)}return R}s(yh,"_getObjProto");function Tp(w,R){var B=[];if($v)B=$v(w);else for(var F in w)typeof F=="string"&&ke(w,F)&&B.push(F);if(B&&B.length>0)for(var se=0;se<B.length;se++)R(B[se])}s(Tp,"_forEachProp");function Kv(w,R,B){return R!==r1&&typeof w[R]===tf&&(B||ke(w,R))&&R!==P5&&R!==ef}s(Kv,"_isDynamicCandidate");function Jv(w){De("DynamicProto: "+w)}s(Jv,"_throwTypeError");function N5(w){var R=pA(null);return Tp(w,function(B){!R[B]&&Kv(w,B,!1)&&(R[B]=w[B])}),R}s(N5,"_getInstanceFuncs");function r8(w,R){for(var B=w.length-1;B>=0;B--)if(w[B]===R)return!0;return!1}s(r8,"_hasVisited");function n8(w,R,B,F){function se(Ze,gt,sr){var Rn=gt[sr];if(Rn[qv]&&F){var Yn=Ze[n1]||{};Yn[i1]!==!1&&(Rn=(Yn[gt[xA]]||{})[sr]||Rn)}return function(){return Rn.apply(Ze,arguments)}}s(se,"_instFuncProxy");var be=pA(null);Tp(B,function(Ze){be[Ze]=se(R,B,Ze)});for(var we=yh(w),Oe=[];we&&!Yv(we)&&!r8(Oe,we);)Tp(we,function(Ze){!be[Ze]&&Kv(we,Ze,!o1)&&(be[Ze]=se(R,we,Ze))}),Oe.push(we),we=yh(we);return be}s(n8,"_getBaseFuncs");function ose(w,R,B,F){var se=null;if(w&&ke(B,xA)){var be=w[n1]||pA(null);if(se=(be[B[xA]]||pA(null))[R],se||Jv("Missing ["+R+"] "+tf),!se[ZN]&&be[i1]!==!1){for(var we=!ke(w,R),Oe=yh(w),Ze=[];we&&Oe&&!Yv(Oe)&&!r8(Ze,Oe);){var gt=Oe[R];if(gt){we=gt===F;break}Ze.push(Oe),Oe=yh(Oe)}try{we&&(w[R]=se),se[ZN]=1}catch{be[i1]=!1}}}return se}s(ose,"_getInstFunc");function sse(w,R,B){var F=R[w];return F===B&&(F=yh(R)[w]),typeof F!==tf&&Jv("["+w+"] is not a "+tf),F}s(sse,"_getProtoFunc");function ase(w,R,B,F,se){function be(Ze,gt){var sr=s(function(){var Rn=ose(this,gt,Ze,sr)||sse(gt,Ze,sr);return Rn.apply(this,arguments)},"dynProtoProxy");return sr[qv]=1,sr}if(s(be,"_createDynamicPrototype"),!zv(w)){var we=B[n1]=B[n1]||pA(null);if(!zv(we)){var Oe=we[R]=we[R]||pA(null);we[i1]!==!1&&(we[i1]=!!se),zv(Oe)||Tp(B,function(Ze){Kv(B,Ze,!1)&&B[Ze]!==F[Ze]&&(Oe[Ze]=B[Ze],delete B[Ze],(!ke(w,Ze)||w[Ze]&&!w[Ze][qv])&&(w[Ze]=be(w,Ze)))})}}}s(ase,"_populatePrototype");function cse(w,R){if(o1){for(var B=[],F=yh(R);F&&!Yv(F)&&!r8(B,F);){if(F===w)return!0;B.push(F),F=yh(F)}return!1}return!0}s(cse,"_checkPrototype");function i8(w,R){return ke(w,ef)?w.name||R||e8:((w||{})[r1]||{}).name||R||e8}s(i8,"_getObjName");function bw(w,R,B,F){ke(w,ef)||Jv("theClass is an invalid class definition.");var se=w[ef];cse(se,R)||Jv("["+i8(w)+"] not in hierarchy of ["+i8(R)+"]");var be=null;ke(se,xA)?be=se[xA]:(be=Hv+i8(w,"_")+"$"+D5.n,D5.n++,se[xA]=be);var we=bw[Wv],Oe=!!we[jv];Oe&&F&&F[jv]!==void 0&&(Oe=!!F[jv]);var Ze=N5(R),gt=n8(se,R,Ze,Oe);B(R,gt);var sr=!!o1&&!!we[Vv];sr&&F&&(sr=!!F[Vv]),ase(se,be,R,Ze,sr!==!1)}s(bw,"dynamicProto"),bw[Wv]=D5.o;var jl=void 0,Aa="",nU="Not dynamic - ",iU=/-([a-z])/g,Iw=/([^\w\d_$])/g,o8=/^(\d+[\w\d_$])/;function s8(w){return!Q(w)}s(s8,"isNotNullOrUndefined");function L5(w){var R=w;return R&&re(R)&&(R=R[Uv](iU,function(B,F){return F.toUpperCase()}),R=R[Uv](Iw,"_"),R=R[Uv](o8,function(B,F){return"_"+F})),R}s(L5,"normalizeJsName");function oU(w,R){return w&&R?jr(w,R)!==-1:!1}s(oU,"strContains");function Ch(w){return w&&w.toISOString()||""}s(Ch,"toISOString");function bA(w){return he(w)?w[Ew]:Aa}s(bA,"getExceptionName");function Tw(w){return function(){function R(){var B=this;w&&ht(w,function(F,se){B[F]=se})}return s(R,"class_1"),R}()}s(Tw,"createClassFromInterface");var sU="console",M5="JSON",lse="crypto",IA="msCrypto",Xv="msie",ii="trident/",Zv=null,s1=null,Eh=null;function F5(){return typeof console!==nse?console:O(sU)}s(F5,"getConsole");function ao(){return!!(typeof JSON===rU&&JSON||O(M5)!==null)}s(ao,"hasJSON");function ex(){return ao()?JSON||O(M5):null}s(ex,"getJSON");function za(){return O(lse)}s(za,"getCrypto");function tx(){return O(IA)}s(tx,"getMsCrypto");function ww(){var w=Ar();if(w&&(w[eU]!==s1||Zv===null)){s1=w[eU];var R=(s1||Aa)[yw]();Zv=oU(R,Xv)||oU(R,ii)}return Zv}s(ww,"isIE");function TA(w){return(Eh===null||w===!1)&&(Eh=Pr()&&!!Ar().sendBeacon),Eh}s(TA,"isBeaconsSupported");function _w(w,R){if(w)for(var B=0;B<w[gc];B++){var F=w[B];if(F[Ew]&&F[Ew]===R)return F}return{}}s(_w,"_getNamedValue");function O5(w){var R=Re();return R&&w?_w(R.querySelectorAll("meta"),w).content:null}s(O5,"findMetaTag");function wp(w){var R,B=gw();if(B){var F=B.getEntriesByType("navigation")||[];R=_w((F[gc]>0?F[0]:{}).serverTiming,w).description}return R}s(wp,"findNamedServerTiming");var rx=4294967296,l0=4294967295,nx=123456789,wA=987654321,fl=!1,ix=nx,_p=wA;function aU(w){w<0&&(w>>>=0),ix=nx+w&l0,_p=wA-w&l0,fl=!0}s(aU,"_mwcSeed");function a1(){try{var w=JC()&2147483647;aU((Math.random()*rx^w)+w)}catch{}}s(a1,"_autoSeedMwc");function Q5(w){return w>0?hA(ox()/l0*(w+1))>>>0:0}s(Q5,"randomValue");function ox(w){var R=0,B=za()||tx();return B&&B.getRandomValues&&(R=B.getRandomValues(new Uint32Array(1))[0]&l0),R===0&&ww()&&(fl||a1(),R=cU()&l0),R===0&&(R=hA(rx*Math.random()|0)),w||(R>>>=0),R}s(ox,"random32");function cU(w){_p=36969*(_p&65535)+(_p>>16)&l0,ix=18e3*(ix&65535)+(ix>>16)&l0;var R=(_p<<16)+(ix&65535)>>>0&l0|0;return w||(R>>>=0),R}s(cU,"mwcRandom32");function c1(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=ox()>>>0,F=0,se=Aa;se[gc]<w;)F++,se+=R.charAt(B&63),B>>>=6,F===5&&(B=(ox()<<2&4294967295|B&3)>>>0,F=0);return se}s(c1,"newId");var Sp="3.3.6",U5="."+c1(6),l1=0;function Rp(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(Rp,"_canAcceptData");function q5(w,R){var B=R[w.id];if(!B){B={};try{Rp(R)&&le(R,w.id,{e:!1,v:B})}catch{}}return B}s(q5,"_getCache");function vh(w,R){return R===void 0&&(R=!1),L5(w+l1+++(R?"."+Sp:Aa)+U5)}s(vh,"createUniqueNamespace");function kp(w){var R={id:vh("_aiData-"+(w||Aa)+"."+Sp),accept:s(function(B){return Rp(B)},"accept"),get:s(function(B,F,se,be){var we=B[R.id];return we?we[L5(F)]:(be&&(we=q5(R,B),we[L5(F)]=se),se)},"get"),kill:s(function(B,F){if(B&&B[F])try{delete B[F]}catch{}},"kill")};return R}s(kp,"createElmNodeData");function _A(w){return w&&ne(w)&&(w.isVal||w.fb||tt(w,"v")||tt(w,"mrg")||tt(w,"ref")||w.set)}s(_A,"_isConfigDefaults");function H5(w,R,B){var F,se=B.dfVal||z;if(R&&B.fb){var be=B.fb;me(be)||(be=[be]);for(var we=0;we<be[gc];we++){var Oe=be[we],Ze=R[Oe];if(se(Ze)?F=Ze:w&&(Ze=w.cfg[Oe],se(Ze)&&(F=Ze),w.set(w.cfg,nt(Oe),Ze)),se(F))break}}return!se(F)&&se(B.v)&&(F=B.v),F}s(H5,"_getDefault");function SA(w,R,B){var F=B;if(B&&_A(B)&&(F=H5(w,R,B)),F){_A(F)&&(F=SA(w,R,F));var se;me(F)?(se=[],se[gc]=F[gc]):gA(F)&&(se={}),se&&(ht(F,function(be,we){we&&_A(we)&&(we=SA(w,R,we)),se[be]=we}),F=se)}return F}s(SA,"_resolveDefaultValue");function RA(w,R,B,F){var se,be,we,Oe=F,Ze,gt,sr,Rn;_A(Oe)?(se=Oe.isVal,be=Oe.set,sr=Oe.rdOnly,Rn=Oe.blkVal,Ze=Oe.mrg,gt=Oe.ref,!gt&&ie(gt)&&(gt=!!Ze),we=H5(w,R,Oe)):we=F,Rn&&w.blkVal(R,B);var Yn,fr=!0,wr=R[B];(wr||!Q(wr))&&(Yn=wr,fr=!1,se&&Yn!==we&&!se(Yn)&&(Yn=we,fr=!0),be&&(Yn=be(Yn,we,R),fr=Yn===we)),fr?we?Yn=SA(w,R,we):Yn=we:(gA(Yn)||me(we))&&Ze&&we&&(gA(we)||me(we))&&ht(we,function(Gn,kn){RA(w,Yn,Gn,kn)}),w.set(R,B,Yn),gt&&w.ref(R,B),sr&&w.rdOnly(R,B)}s(RA,"_applyDefaultValue");var Vl=ga("[[ai_dynCfg_1]]"),a8=ga("[[ai_blkDynCfg_1]]"),Sw=ga("[[ai_frcDynCfg_1]]");function c8(w){if(w){var R;if(me(w)?(R=[],R[gc]=w[gc]):gA(w)&&(R={}),R)return ht(w,function(B,F){R[B]=c8(F)}),R}return w}s(c8,"_cfgDeepCopy");function l8(w){if(w){var R=w[Vl]||w;if(R.cfg&&(R.cfg===w||R.cfg[Vl]===R))return R}return null}s(l8,"getDynamicConfigHandler");function sx(w){if(w&&(gA(w)||me(w)))try{w[a8]=!0}catch{}return w}s(sx,"blockDynamicConversion");function kA(w,R,B){var F=!1;return B&&!w[R.blkVal]&&(F=B[Sw],!F&&!B[a8]&&(F=gA(B)||me(B))),F}s(kA,"_canMakeDynamic");function u0(w){De("InvalidAccess:"+w)}s(u0,"throwInvalidAccess");var lU=["push","pop","shift","unshift","splice"],xh=s(function(w,R,B,F){w&&w[Cw](3,108,"".concat(B," [").concat(R,"] failed - ")+oe(F))},"_throwDynamicError");function u8(w,R,B){me(R)&&dl(lU,function(F){var se=R[F];R[F]=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];var Oe=se[ese](this,be);return u1(w,R,B,"Patching"),Oe}})}s(u8,"_patchArray");function bh(w,R){var B=Qe(w,R);return B&&B.get}s(bh,"_getOwnPropGetter");function uU(w,R,B,F){var se={n:B,h:[],trk:s(function(gt){gt&&gt.fn&&(hh(se.h,gt)===-1&&se.h[so](gt),w.trk(gt,se))},"trk"),clr:s(function(gt){var sr=hh(se.h,gt);sr!==-1&&se.h[e1](sr,1)},"clr")},be=!0,we=!1;function Oe(){be&&(we=we||kA(Oe,w,F),F&&!F[Vl]&&we&&(F=u1(w,F,B,"Converting")),be=!1);var gt=w.act;return gt&&se.trk(gt),F}s(Oe,"_getProperty"),Oe[w.prop]={chng:s(function(){w.add(se)},"chng")};function Ze(gt){if(F!==gt){Oe[w.ro]&&!w.upd&&u0("["+B+"] is read-only:"+oe(R)),be&&(we=we||kA(Oe,w,F),be=!1);var sr=we&&Oe[w.rf];if(we)if(sr){ht(F,function(Yn){F[Yn]=gt?gt[Yn]:jl});try{ht(gt,function(Yn,fr){ax(w,F,Yn,fr)}),gt=F}catch(Yn){xh((w.hdlr||{})[CA],B,"Assigning",Yn),we=!1}}else F&&F[Vl]&&ht(F,function(Yn){var fr=bh(F,Yn);if(fr){var wr=fr[w.prop];wr&&wr.chng()}});if(gt!==F){var Rn=gt&&kA(Oe,w,gt);!sr&&Rn&&(gt=u1(w,gt,B,"Converting")),F=gt,we=Rn}w.add(se)}}s(Ze,"_setProperty"),le(R,se.n,{g:Oe,s:Ze})}s(uU,"_createDynamicProperty");function ax(w,R,B,F){if(R){var se=bh(R,B),be=se&&!!se[w.prop];be?R[B]=F:uU(w,R,B,F)}return R}s(ax,"_setDynamicProperty");function d8(w,R,B,F){if(R){var se=bh(R,B),be=se&&!!se[w.prop],we=F&&F[0],Oe=F&&F[1],Ze=F&&F[2];if(!be){if(Ze)try{sx(R)}catch(gt){xh((w.hdlr||{})[CA],B,"Blocking",gt)}try{ax(w,R,B,R[B]),se=bh(R,B)}catch(gt){xh((w.hdlr||{})[CA],B,"State",gt)}}we&&(se[w.rf]=we),Oe&&(se[w.ro]=Oe),Ze&&(se[w.blkVal]=!0)}return R}s(d8,"_setDynamicPropertyState");function u1(w,R,B,F){try{ht(R,function(se,be){ax(w,R,se,be)}),R[Vl]||(Tt(R,Vl,{get:s(function(){return w.hdlr},"get")}),u8(w,R,B))}catch(se){xh((w.hdlr||{})[CA],B,F,se)}return R}s(u1,"_makeDynamicObject");var d1="[[ai_",rf="]]";function dU(w){var R=Wn(d1+"get"+w.uid+rf),B=Wn(d1+"ro"+w.uid+rf),F=Wn(d1+"rf"+w.uid+rf),se=Wn(d1+"blkVal"+w.uid+rf),be=Wn(d1+"dtl"+w.uid+rf),we=null,Oe=null,Ze;function gt(fr,wr){var Gn=Ze.act;try{Ze.act=fr,fr&&fr[be]&&(dl(fr[be],function(Si){Si.clr(fr)}),fr[be]=[]),wr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Si){var kn=w[CA];throw kn&&kn[Cw](1,107,oe(Si)),Si}finally{Ze.act=Gn||null}}s(gt,"_useHandler");function sr(){if(we){var fr=we;we=null,Oe&&Oe[$N](),Oe=null;var wr=[];if(dl(fr,function(Gn){if(Gn&&(Gn[be]&&(dl(Gn[be],function(kn){kn.clr(Gn)}),Gn[be]=null),Gn.fn))try{gt(Gn,Gn.fn)}catch(kn){wr[so](kn)}}),we)try{sr()}catch(Gn){wr[so](Gn)}wr[gc]>0&&tse("Watcher error(s): ",wr)}}s(sr,"_notifyWatchers");function Rn(fr){if(fr&&fr.h[gc]>0){we||(we=[]),Oe||(Oe=VN(function(){Oe=null,sr()},0));for(var wr=0;wr<fr.h[gc];wr++){var Gn=fr.h[wr];Gn&&hh(we,Gn)===-1&&we[so](Gn)}}}s(Rn,"_addWatcher");function Yn(fr,wr){if(fr){var Gn=fr[be]=fr[be]||[];hh(Gn,wr)===-1&&Gn[so](wr)}}return s(Yn,"_trackHandler"),Ze={prop:R,ro:B,rf:F,blkVal:se,hdlr:w,add:Rn,notify:sr,use:gt,trk:Yn},Ze}s(dU,"_createState");function use(w,R){var B={fn:R,rm:s(function(){B.fn=null,w=null,R=null},"rm")};return le(B,"toJSON",{v:s(function(){return"WatcherHandler"+(B.fn?"":"[X]")},"v")}),w.use(B,R),B}s(use,"_createAndUseHandler");function fU(w,R,B){var F=l8(R);if(F)return F;var se=vh("dyncfg",!0),be=R&&B!==!1?R:c8(R),we;function Oe(){we.notify()}s(Oe,"_notifyWatchers");function Ze(kn,Si,bo){try{kn=ax(we,kn,Si,bo)}catch(ji){xh(w,Si,"Setting value",ji)}return kn[Si]}s(Ze,"_setValue");function gt(kn){return use(we,kn)}s(gt,"_watch");function sr(kn,Si){we.use(null,function(bo){var ji=we.upd;try{ie(Si)||(we.upd=Si),kn(bo)}finally{we.upd=ji}})}s(sr,"_block");function Rn(kn,Si){var bo;return d8(we,kn,Si,(bo={},bo[0]=!0,bo))[Si]}s(Rn,"_ref");function Yn(kn,Si){var bo;return d8(we,kn,Si,(bo={},bo[1]=!0,bo))[Si]}s(Yn,"_rdOnly");function fr(kn,Si){var bo;return d8(we,kn,Si,(bo={},bo[2]=!0,bo))[Si]}s(fr,"_blkPropValue");function wr(kn,Si){return Si&&ht(Si,function(bo,ji){RA(Gn,kn,bo,ji)}),kn}s(wr,"_applyDefaults");var Gn={uid:null,cfg:be,logger:w,notify:Oe,set:Ze,setDf:wr,watch:gt,ref:Rn,rdOnly:Yn,blkVal:fr,_block:sr};return le(Gn,"uid",{c:!1,e:!1,w:!1,v:se}),we=dU(Gn),u1(we,be,"config","Creating"),Gn}s(fU,"_createDynamicHandler");function pU(w,R){w?(w[yA](R),w[Cw](2,108,R)):u0(R)}s(pU,"_logInvalidAccess");function Rw(w,R,B,F){var se=fU(B,w||{},F);return R&&se.setDf(se.cfg,R),se}s(Rw,"createDynamicConfig");function mU(w,R,B){var F=w[Vl]||w;return F.cfg&&(F.cfg===w||F.cfg[Vl]===F)?F[JQ](R):(pU(B,nU+oe(w)),Rw(w,null,B)[JQ](R))}s(mU,"onConfigChange");var W5=null;function hU(){var w=O("Microsoft");return w&&(W5=w.ApplicationInsights),W5}s(hU,"_getExtensionNamespace");function dse(w){var R=W5;return!R&&w.disableDbgExt!==!0&&(R=W5||hU()),R?R.ChromeDbgExt:null}s(dse,"getDebugExt");var cx,G5="warnToConsole",gU="AI (Internal): ",AU="AI: ",fse="AITR_",pse={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},yU=(cx={},cx[0]=null,cx[1]="errorToConsole",cx[2]=G5,cx[3]="debugToConsole",cx);function CU(w){return w?'"'+w[Uv](/\"/g,Aa)+'"':Aa}s(CU,"_sanitizeDiagnosticText");function j5(w,R){var B=F5();if(B){var F="log";B[w]&&(F=w),fe(B[F])&&B[F](R)}}s(j5,"_logToConsole");var V5=function(){function w(R,B,F,se){F===void 0&&(F=!1);var be=this;be[zN]=R,be[t1]=(F?AU:gU)+R;var we=Aa;ao()&&(we=ex().stringify(se));var Oe=(B?" message:"+CU(B):Aa)+(se?" props:"+CU(we):Aa);be[t1]+=Oe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function mse(w,R){return(w||{})[CA]||new $5(R)}s(mse,"safeGetLogger");var $5=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var B=0,F={},se,be,we,Oe,Ze;bw(w,this,function(gt){Ze=Rn(R||{}),gt.consoleLoggingLevel=function(){return se},gt[Cw]=function(wr,Gn,kn,Si,bo){bo===void 0&&(bo=!1);var ji=new V5(Gn,kn,bo,Si);if(Oe)throw oe(ji);var Ac=yU[wr]||G5;if(ie(ji[t1]))fr("throw"+(wr===1?"Critical":"Warning"),ji);else{if(bo){var Qx=+ji[zN];!F[Qx]&&se>=wr&&(gt[Ac](ji[t1]),F[Qx]=!0)}else se>=wr&&gt[Ac](ji[t1]);sr(wr,ji)}},gt.debugToConsole=function(wr){j5("debug",wr),fr("warning",wr)},gt[yA]=function(wr){j5("warn",wr),fr("warning",wr)},gt.errorToConsole=function(wr){j5("error",wr),fr("error",wr)},gt.resetInternalMessageCount=function(){B=0,F={}},gt.logInternalMessage=sr,gt[pd]=function(wr){Ze&&Ze.rm(),Ze=null};function sr(wr,Gn){if(!Yn()){var kn=!0,Si=fse+Gn[zN];if(F[Si]?kn=!1:F[Si]=!0,kn&&(wr<=be&&(gt.queue[so](Gn),B++,fr(wr===1?"error":"warn",Gn)),B===we)){var bo="Internal events throttle limit per PageView reached for this app.",ji=new V5(23,bo,!1);gt.queue[so](ji),wr===1?gt.errorToConsole(bo):gt[yA](bo)}}}s(sr,"_logInternalMessage");function Rn(wr){return mU(Rw(wr,pse,gt).cfg,function(Gn){var kn=Gn.cfg;se=kn[ZQ],be=kn.loggingLevelTelemetry,we=kn.maxMessageLimit,Oe=kn.enableDebug})}s(Rn,"_setDefaultsFromConfig");function Yn(){return B>=we}s(Yn,"_areInternalMessagesThrottled");function fr(wr,Gn){var kn=dse(R||{});kn&&kn[YN]&&kn[YN](wr,Gn)}s(fr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function z5(w){return w||new $5}s(z5,"_getLogger");function md(w,R,B,F,se,be){be===void 0&&(be=!1),z5(w)[Cw](R,B,F,se,be)}s(md,"_throwInternal");function Y5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Aa,B,F=0;F<4;F++)B=ox(),R+=w[B&15]+w[B>>4&15]+w[B>>8&15]+w[B>>12&15]+w[B>>16&15]+w[B>>20&15]+w[B>>24&15]+w[B>>28&15];var se=w[8+(ox()&3)|0];return Xt(R,0,8)+Xt(R,9,4)+"4"+Xt(R,13,3)+se+Xt(R,16,3)+Xt(R,19,12)}s(Y5,"generateW3CId");var lx=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,f8="00",nf="ff",_i="00000000000000000000000000000000",Ih="0000000000000000",Ya=1;function d0(w,R,B){return w&&w[gc]===R&&w!==B?!!w.match(/^[\da-f]*$/i):!1}s(d0,"_isValid");function K5(w,R,B){return d0(w,R)?w:B}s(K5,"_formatValue");function f1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[gc]<2;)R="0"+R;return R}s(f1,"_formatFlags");function ux(w,R,B,F){return{version:d0(F,2,nf)?F:f8,traceId:dx(w)?w:Y5(),spanId:fx(R)?R:qr(Y5(),16),traceFlags:B>=0&&B<=255?B:1}}s(ux,"createTraceParent");function of(w,R){if(!w||(me(w)&&(w=w[0]||""),!w||!re(w)||w[gc]>8192))return null;if(w.indexOf(",")!==-1){var B=w[KN](",");w=B[R>0&&B[gc]>R?R:0]}var F=lx.exec(Su(w));return!F||F[1]===nf||F[2]===_i||F[3]===Ih?null:{version:(F[1]||Aa)[yw](),traceId:(F[2]||Aa)[yw](),spanId:(F[3]||Aa)[yw](),traceFlags:parseInt(F[4],16)}}s(of,"parseTraceParent");function dx(w){return d0(w,32,_i)}s(dx,"isValidTraceId");function fx(w){return d0(w,16,Ih)}s(fx,"isValidSpanId");function px(w){return!(!w||!d0(w[XQ],2,nf)||!d0(w.traceId,32,_i)||!d0(w.spanId,16,Ih)||!d0(f1(w[I5]),2))}s(px,"isValidTraceParent");function J5(w){return px(w)?(w[I5]&Ya)===Ya:!1}s(J5,"isSampledFlag");function p1(w){if(w){var R=f1(w[I5]);d0(R,2)||(R="01");var B=w[XQ]||f8;return B!=="00"&&B!=="ff"&&(B=f8),"".concat(B.toLowerCase(),"-").concat(K5(w.traceId,32,_i).toLowerCase(),"-").concat(K5(w.spanId,16,Ih).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(p1,"formatTraceParent");function p8(w){var R="traceparent",B=of(O5(R),w);return B||(B=of(wp(R),w)),B}s(p8,"findW3cTraceParent");function m8(w){var R=w.getElementsByTagName("script"),B=[];return dl(R,function(F){var se=F[JN]("src");if(se){var be=F[JN]("crossorigin"),we=F.hasAttribute("async")===!0,Oe=F.hasAttribute("defer")===!0,Ze=F[JN]("referrerpolicy"),gt={url:se};be&&(gt.crossOrigin=be),we&&(gt.async=we),Oe&&(gt.defer=Oe),Ze&&(gt.referrerPolicy=Ze),B[so](gt)}}),B}s(m8,"findAllScripts");var X5="on",kw="attachEvent",Z5="addEventListener",ek="detachEvent",EU="removeEventListener",h8="events";vh("aiEvtPageHide"),vh("aiEvtPageShow");var hse=/\.[\.]+/g,gse=/[\.]+$/,tk=1,mx=kp("events"),pl=/^([^.]*)(?:\.(.+)|)/;function Pw(w){return w&&w[Uv]?w[Uv](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Aa):w}s(Pw,"_normalizeNamespace");function jc(w,R){if(R){var B=Aa;me(R)?(B=Aa,dl(R,function(se){se=Pw(se),se&&(se[0]!=="."&&(se="."+se),B+=se)})):B=Pw(R),B&&(B[0]!=="."&&(B="."+B),w=(w||Aa)+B)}var F=pl.exec(w||Aa)||[];return{type:F[1],ns:(F[2]||Aa).replace(hse,".").replace(gse,Aa)[KN](".").sort().join(".")}}s(jc,"_getEvtNamespace");function PA(w,R,B){B===void 0&&(B=!0);var F=mx.get(w,h8,{},B),se=F[R];return se||(se=F[R]=[]),se}s(PA,"_getRegisteredEvents");function vU(w,R,B,F){w&&R&&R[EA]&&(w[EU]?w[EU](R[EA],B,F):w[ek]&&w[ek](X5+R[EA],B))}s(vU,"_doDetach");function Ase(w,R,B,F){var se=!1;return w&&R&&R[EA]&&B&&(w[Z5]?(w[Z5](R[EA],B,F),se=!0):w[kw]&&(w[kw](X5+R[EA],B),se=!0)),se}s(Ase,"_doAttach");function Bw(w,R,B,F){for(var se=R[gc];se--;){var be=R[se];be&&(!B.ns||B.ns===be[tU].ns)&&(!F||F(be))&&(vU(w,be[tU],be.handler,be.capture),R[e1](se,1))}}s(Bw,"_doUnregister");function g8(w,R,B){if(R[EA])Bw(w,PA(w,R[EA]),R,B);else{var F=mx.get(w,h8,{});ht(F,function(se,be){Bw(w,be,R,B)}),qt(F)[gc]===0&&mx.kill(w,h8)}}s(g8,"_unregisterEvents");function yse(w,R){var B;return R?(me(R)?B=[w].concat(R):B=[w,R],B=jc("xx",B).ns[KN](".")):B=w,B}s(yse,"mergeEvtNamespace");function A8(w,R,B,F,se){se===void 0&&(se=!1);var be=!1;if(w)try{var we=jc(R,F);if(be=Ase(w,we,B,se),be&&mx.accept(w)){var Oe={guid:tk++,evtName:we,handler:B,capture:se};PA(w,we.type)[so](Oe)}}catch{}return be}s(A8,"eventOn");function xU(w,R,B,F,se){if(se===void 0&&(se=!1),w)try{var be=jc(R,F),we=!1;g8(w,be,function(Oe){return be.ns&&!B||Oe.handler===B?(we=!0,!0):!1}),we||vU(w,be,B,se)}catch{}}s(xU,"eventOff");var rk="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",bU="sampleRate",nk="ProcessLegacy",IU="http.method",y8="https://dc.services.visualstudio.com",Dw="/v2/track",Pp="not_specified",C8="iKey",TU=Zoe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),BA="split",Sn="length",hx="toLowerCase",m1="ingestionendpoint",h1="toString",E8="removeItem",Nw="message",gx="count",ik="preTriggerDate",v8="getUTCDate",ok="stringify",Ax="pathname",g1="match",x8="correlationHeaderExcludePatterns",sf="name",yx="extensionConfig",Bp="properties",Ru="measurements",Cx="sizeInBytes",Lw="typeName",Ex="exceptions",Mw="severityLevel",vx="problemGroup",hd="parsedStack",sk="hasFullStack",ak="assembly",f0="fileName",xx="line",DA="aiDataContract",Fw="duration";function b8(w,R,B){var F=R[Sn],se=I8(w,R);if(se[Sn]!==F){for(var be=0,we=se;B[we]!==void 0;)be++,we=ir(se,0,147)+wU(be);se=we}return se}s(b8,"dataSanitizeKeyAndAddUniqueness");function I8(w,R){var B;return R&&(R=Su(nt(R)),R[Sn]>150&&(B=ir(R,0,150),md(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),B||R}s(I8,"dataSanitizeKey");function Vc(w,R,B){B===void 0&&(B=1024);var F;return R&&(B=B||1024,R=Su(nt(R)),R[Sn]>B&&(F=ir(R,0,B),md(w,2,61,"string value is too long. It has been truncated to "+B+" characters.",{value:R},!0))),F||R}s(Vc,"dataSanitizeString");function Dp(w,R){return w8(w,R,2048,66)}s(Dp,"dataSanitizeUrl");function ck(w,R){var B;return R&&R[Sn]>32768&&(B=ir(R,0,32768),md(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),B||R}s(ck,"dataSanitizeMessage");function T8(w,R){var B;if(R){var F=""+R;F[Sn]>32768&&(B=ir(F,0,32768),md(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return B||R}s(T8,"dataSanitizeException");function Th(w,R){if(R){var B={};ht(R,function(F,se){if(ne(se)&&ao())try{se=ex()[ok](se)}catch(be){md(w,2,49,"custom property is not valid",{exception:be},!0)}se=Vc(w,se,8192),F=b8(w,F,B),B[F]=se}),R=B}return R}s(Th,"dataSanitizeProperties");function af(w,R){if(R){var B={};ht(R,function(F,se){F=b8(w,F,B),B[F]=se}),R=B}return R}s(af,"dataSanitizeMeasurements");function bx(w,R){return R&&w8(w,R,128,69)[h1]()}s(bx,"dataSanitizeId");function w8(w,R,B,F){var se;return R&&(R=Su(nt(R)),R[Sn]>B&&(se=ir(R,0,B),md(w,2,F,"input is too long, it has been truncated to "+B+" characters.",{data:R},!0))),se||R}s(w8,"dataSanitizeInput");function wU(w){var R="00"+w;return Xt(R,R[Sn]-3)}s(wU,"dsPadNumber");var _8=Re()||{},_U=0,Cse=[null,null,null,null,null];function Ix(w){var R=_U,B=Cse,F=B[R];return _8.createElement?B[R]||(F=B[R]=_8.createElement("a")):F={host:RU(w,!0)},F.href=w,R++,R>=B[Sn]&&(R=0),_U=R,F}s(Ix,"urlParseUrl");function Ese(w){var R,B=Ix(w);return B&&(R=B.href),R}s(Ese,"urlGetAbsoluteUrl");function vse(w){var R,B=Ix(w);return B&&(R=B[Ax]),R}s(vse,"urlGetPathName");function SU(w,R){return w?w.toUpperCase()+" "+R:R}s(SU,"urlGetCompleteUrl");function RU(w,R){var B=wh(w,R)||"";if(B){var F=B[g1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>3&&re(F[2])&&F[2][Sn]>0)return F[2]+(F[3]||"")}return B}s(RU,"urlParseHost");function wh(w,R){var B=null;if(w){var F=w[g1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>2&&re(F[2])&&F[2][Sn]>0&&(B=F[2]||"",R&&F[Sn]>2)){var se=(F[1]||"")[hx](),be=F[3]||"";(se==="http"&&be===":80"||se==="https"&&be===":443")&&(be=""),B+=be}}return B}s(wh,"urlParseFullHost");var kU=[y8+Dw,"https://breeze.aimon.applicationinsights.io"+Dw,"https://dc-int.services.visualstudio.com"+Dw],Tx="cid-v1:";function PU(w){return hh(kU,w[hx]())!==-1}s(PU,"isInternalApplicationInsightsEndpoint");function S8(w){Tx=w}s(S8,"correlationIdSetPrefix");function R8(){return Tx}s(R8,"correlationIdGetPrefix");function NA(w,R,B){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[x8]){for(var F=0;F<w.correlationHeaderExcludePatterns[Sn];F++)if(w[x8][F].test(R))return!1}var se=Ix(R).host[hx]();if(se&&(jr(se,":443")!==-1||jr(se,":80")!==-1)&&(se=(wh(R,!0)||"")[hx]()),(!w||!w.enableCorsCorrelation)&&se&&se!==B)return!1;var be=w&&w.correlationHeaderDomains;if(be){var we;if(dl(be,function(gt){var sr=new RegExp(gt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||sr.test(se)}),!we)return!1}var Oe=w&&w.correlationHeaderExcludedDomains;if(!Oe||Oe[Sn]===0)return!0;for(var F=0;F<Oe[Sn];F++){var Ze=new RegExp(Oe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Ze.test(se))return!1}return se&&se[Sn]>0}s(NA,"correlationIdCanIncludeCorrelationHeader");function BU(w){if(w){var R=DU(w,TU[1]);if(R&&R!==Tx)return R}}s(BU,"correlationIdGetCorrelationContext");function DU(w,R){if(w)for(var B=w[BA](","),F=0;F<B[Sn];++F){var se=B[F][BA]("=");if(se[Sn]===2&&se[0]===R)return se[1]}}s(DU,"correlationIdGetCorrelationContextValue");function NU(w,R,B,F){var se,be=F,we=F;if(R&&R[Sn]>0){var Oe=Ix(R);if(se=Oe.host,!be)if(Oe[Ax]!=null){var Ze=Oe.pathname[Sn]===0?"/":Oe[Ax];Ze.charAt(0)!=="/"&&(Ze="/"+Ze),we=Oe[Ax],be=Vc(w,B?B+" "+Ze:Ze)}else be=Vc(w,R)}else se=F,be=F;return{target:se,name:be,data:we}}s(NU,"AjaxHelperParseDependencyPath");function xse(){var w=gw();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return JC()}s(xse,"dateTimeUtilsNow");function bse(w,R){var B=null;return w!==0&&R!==0&&!Q(w)&&!Q(R)&&(B=R-w),B}s(bse,"dateTimeUtilsDuration");function k8(w,R){var B=w||{};return{getName:s(function(){return B[sf]},"getName"),setName:s(function(F){R&&R.setName(F),B[sf]=F},"setName"),getTraceId:s(function(){return B.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),dx(F)&&(B.traceID=F)},"setTraceId"),getSpanId:s(function(){return B.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),fx(F)&&(B.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return B.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),B.traceFlags=F},"setTraceFlags")}}s(k8,"createDistributedTraceContextFromTrace");var wx=Aw({LocalStorage:0,SessionStorage:1}),Ise=Aw({AI:0,AI_AND_W3C:1,W3C:2}),Ow=Aw({Normal:1,Critical:2}),LA=void 0,p0=void 0,LU="";function _x(){return lk()?Sx(wx.LocalStorage):null}s(_x,"_getLocalStorageObject");function Sx(w){try{if(Q(te()))return null;var R=new Date()[h1](),B=O(w===wx.LocalStorage?"localStorage":"sessionStorage"),F=LU+R;B.setItem(F,R);var se=B.getItem(F)!==R;if(B[E8](F),!se)return B}catch{}return null}s(Sx,"_getVerifiedStorageObject");function Rx(){return _h()?Sx(wx.SessionStorage):null}s(Rx,"_getSessionStorageObject");function Qw(){LA=!1,p0=!1}s(Qw,"utlDisableStorage");function Uw(w){LU=w||""}s(Uw,"utlSetStoragePrefix");function Tse(){LA=lk(!0),p0=_h(!0)}s(Tse,"utlEnableStorage");function lk(w){return(w||LA===void 0)&&(LA=!!Sx(wx.LocalStorage)),LA}s(lk,"utlCanUseLocalStorage");function MU(w,R){var B=_x();if(B!==null)try{return B.getItem(R)}catch(F){LA=!1,md(w,2,1,"Browser failed read of local storage. "+bA(F),{exception:oe(F)})}return null}s(MU,"utlGetLocalStorage");function FU(w,R,B){var F=_x();if(F!==null)try{return F.setItem(R,B),!0}catch(se){LA=!1,md(w,2,3,"Browser failed write to local storage. "+bA(se),{exception:oe(se)})}return!1}s(FU,"utlSetLocalStorage");function cf(w,R){var B=_x();if(B!==null)try{return B[E8](R),!0}catch(F){LA=!1,md(w,2,5,"Browser failed removal of local storage item. "+bA(F),{exception:oe(F)})}return!1}s(cf,"utlRemoveStorage");function _h(w){return(w||p0===void 0)&&(p0=!!Sx(wx.SessionStorage)),p0}s(_h,"utlCanUseSessionStorage");function kx(){var w=[];return _h()&&ht(O("sessionStorage"),function(R){w.push(R)}),w}s(kx,"utlGetSessionStorageKeys");function OU(w,R){var B=Rx();if(B!==null)try{return B.getItem(R)}catch(F){p0=!1,md(w,2,2,"Browser failed read of session storage. "+bA(F),{exception:oe(F)})}return null}s(OU,"utlGetSessionStorage");function wse(w,R,B){var F=Rx();if(F!==null)try{return F.setItem(R,B),!0}catch(se){p0=!1,md(w,2,4,"Browser failed write to session storage. "+bA(se),{exception:oe(se)})}return!1}s(wse,"utlSetSessionStorage");function QU(w,R){var B=Rx();if(B!==null)try{return B[E8](R),!0}catch(F){p0=!1,md(w,2,6,"Browser failed removal of session storage item. "+bA(F),{exception:oe(F)})}return!1}s(QU,"utlRemoveSessionStorage");var _se="appInsightsThrottle",Sse=function(){function w(R,B){var F=this,se,be,we,Oe,Ze,gt,sr,Rn=!1,Yn=!1;wr(),F._getDbgPlgTargets=function(){return[sr]},F.getConfig=function(){return we},F.canThrottle=function(_t){var Nr=G8(_t),un=Gn(_t);return bo(un,se,Nr)},F.isTriggered=function(_t){return rq(_t)},F.isReady=function(){return Rn},F.flush=function(_t){try{var Nr=nq(_t);if(Nr&&Nr[Sn]>0){var un=Nr.slice(0);return sr[_t]=[],dl(un,function(Zo){fr(Zo.msgID,Zo[Nw],Zo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(sr){var _t=!0;return ht(sr,function(Nr){var un=F.flush(parseInt(Nr));_t=_t&&un}),_t}}catch{}return!1},F.onReadyState=function(_t,Nr){return Nr===void 0&&(Nr=!0),Rn=Q(_t)?!0:_t,Rn&&Nr?F.flushAll():null},F.sendMessage=function(_t,Nr,un){return fr(_t,Nr,un,!0)};function fr(_t,Nr,un,Zo){if(Rn){var yc=Vse(_t);if(!yc)return;var ya=Gn(_t),Cc=G8(_t),y1=bo(ya,se,Cc),UA=!1,Ux=0,iq=rq(_t);try{y1&&!iq?(Ux=vr(ya.limit.maxSendNumber,Cc[gx]+1),Cc[gx]=0,UA=!0,Ze[_t]=!0,Cc[ik]=new Date):(Ze[_t]=y1,Cc[gx]+=1);var oq=ji(_t);W8(be,oq,Cc);for(var bk=0;bk<Ux;bk++)tq(_t,be,Nr,un)}catch{}return{isThrottled:UA,throttleNum:Ux}}else if(Zo){var $se=nq(_t);$se.push({msgID:_t,message:Nr,severity:un})}return null}s(fr,"_flushMessage");function wr(){be=mse(R),Ze={},Oe={},sr={},we={},kn(109),gt=s8(B)?B:"",R.addUnloadHook(mU(R.config,function(_t){var Nr=_t.cfg;se=lk();var un=Nr.throttleMgrCfg||{};ht(un,function(Zo,yc){kn(parseInt(Zo),yc)})}))}s(wr,"_initConfig");function Gn(_t){return we[_t]||we[109]}s(Gn,"_getCfgByKey");function kn(_t,Nr){var un,Zo;try{var yc=Nr||{},ya={};ya.disabled=!!yc.disabled;var Cc=yc.interval||{};Yn=Cc?.daysOfMonth&&Cc?.daysOfMonth[Sn]>0,ya.interval=Si(Cc);var y1={samplingRate:((un=yc.limit)===null||un===void 0?void 0:un.samplingRate)||100,maxSendNumber:((Zo=yc.limit)===null||Zo===void 0?void 0:Zo.maxSendNumber)||1};ya.limit=y1,we[_t]=ya}catch{}}s(kn,"_setCfgByKey");function Si(_t){_t=_t||{};var Nr=_t?.monthInterval,un=_t?.dayInterval;return Q(Nr)&&Q(un)&&(_t.monthInterval=3,Yn||(_t.daysOfMonth=[28],Yn=!0)),_t={monthInterval:_t?.monthInterval,dayInterval:_t?.dayInterval,daysOfMonth:_t?.daysOfMonth},_t}s(Si,"_getIntervalConfig");function bo(_t,Nr,un){if(_t&&!_t.disabled&&Nr&&s8(un)){var Zo=zw(),yc=un.date,ya=_t.interval,Cc=1;if(ya?.monthInterval){var y1=(Zo.getUTCFullYear()-yc.getUTCFullYear())*12+Zo.getUTCMonth()-yc.getUTCMonth();Cc=xk(ya.monthInterval,0,y1)}var UA=1;if(Yn)UA=hh(ya.daysOfMonth,Zo[v8]());else if(ya?.dayInterval){var Ux=hA((Zo.getTime()-yc.getTime())/864e5);UA=xk(ya.dayInterval,0,Ux)}return Cc>=0&&UA>=0}return!1}s(bo,"_canThrottle");function ji(_t,Nr){var un=s8(Nr)?Nr:"";return _t?_se+un+"-"+_t:null}s(ji,"_getLocalStorageName");function Ac(_t){try{if(_t){var Nr=new Date;return _t.getUTCFullYear()===Nr.getUTCFullYear()&&_t.getUTCMonth()===Nr.getUTCMonth()&&_t[v8]()===Nr[v8]()}}catch{}return!1}s(Ac,"_isTriggeredOnCurDate");function Qx(_t,Nr,un){try{var Zo={date:zw(),count:0};if(_t){var yc=JSON.parse(_t),ya={date:zw(yc.date)||Zo.date,count:yc[gx]||Zo[gx],preTriggerDate:yc.preTriggerDate?zw(yc[ik]):void 0};return ya}else return W8(Nr,un,Zo),Zo}catch{}return null}s(Qx,"_getLocalStorageObj");function zw(_t){try{if(_t){var Nr=new Date(_t);if(!isNaN(Nr.getDate()))return Nr}else return new Date}catch{}return null}s(zw,"_getThrottleDate");function W8(_t,Nr,un){try{return FU(_t,Nr,Su(JSON[ok](un)))}catch{}return!1}s(W8,"_resetLocalStorage");function xk(_t,Nr,un){return _t<=0?1:un>=Nr&&(un-Nr)%_t==0?hA((un-Nr)/_t)+1:-1}s(xk,"_checkInterval");function tq(_t,Nr,un,Zo){md(Nr,Zo||1,_t,un)}s(tq,"_sendMessage");function Vse(_t){try{var Nr=Gn(_t);return Q5(1e6)<=Nr.limit.samplingRate}catch{}return!1}s(Vse,"_canSampledIn");function G8(_t){try{var Nr=Oe[_t];if(!Nr){var un=ji(_t,gt);Nr=Qx(MU(be,un),be,un),Oe[_t]=Nr}return Oe[_t]}catch{}return null}s(G8,"_getLocalStorageObjByKey");function rq(_t){var Nr=Ze[_t];if(Q(Nr)){Nr=!1;var un=G8(_t);un&&(Nr=Ac(un[ik])),Ze[_t]=Nr}return Ze[_t]}s(rq,"_isTrigger");function nq(_t){return sr=sr||{},Q(sr[_t])&&(sr[_t]=[]),sr[_t]}s(nq,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),P8=";",Np="=";function uk(w){if(!w)return{};var R=w[BA](P8),B=Ba(R,function(se,be){var we=be[BA](Np);if(we[Sn]===2){var Oe=we[0][hx](),Ze=we[1];se[Oe]=Ze}return se},{});if(qt(B)[Sn]>0){if(B.endpointsuffix){var F=B.location?B.location+".":"";B[m1]=B[m1]||"https://"+F+"dc."+B.endpointsuffix}B[m1]=B[m1]||y8,Fv(B[m1],"/")&&(B[m1]=B[m1].slice(0,-1))}return B}s(uk,"parseConnectionString");var dk={parse:uk},fk=function(){function w(R,B,F){var se=this,be=this;be.ver=1,be.sampleRate=100,be.tags={},be[sf]=Vc(R,F)||Pp,be.data=B,be.time=Ch(new Date),be[DA]={time:1,iKey:1,name:1,sampleRate:s(function(){return se.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),Rse=function(){function w(R,B,F,se){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var be=this;be.ver=2,be[sf]=Vc(R,B)||Pp,be[Bp]=Th(R,F),be[Ru]=af(R,se)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),kse=58,UU=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Pse=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Px=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,qU=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Bse=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Dse=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Nse=/([^\(\s\n]+):([0-9]+)$/,HU="<no_method>",Bx="error",gd="stack",qw="stackDetails",pk="errorSrc",Hw="message",Ww="description",B8=[{re:Pse,len:5,m:1,fn:2,ln:3,col:4},{chk:mk,pre:Rr,re:Px,len:4,m:1,fn:2,ln:3},{re:qU,len:3,m:1,fn:2,hdl:N8},{re:Bse,len:2,fn:1,hdl:N8}];function Rr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Rr,"_scrubAnonymous");function mk(w){return jr(w,"[native")<0}s(mk,"_ignoreNative");function Gw(w,R){var B=w;return B&&!re(B)&&(JSON&&JSON[ok]?(B=JSON[ok](w),R&&(!B||B==="{}")&&(fe(w[h1])?B=w[h1]():B=""+w)):B=""+w+" - (Missing JSON.stringify)"),B||""}s(Gw,"_stringify");function MA(w,R){var B=w;return w&&(B&&!re(B)&&(B=w[Hw]||w[Ww]||B),B&&!re(B)&&(B=Gw(B,!0)),w.filename&&(B=B+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&jr(B||"",R)===-1&&(B=R+": "+B),B||""}s(MA,"_formatMessage");function WU(w){try{if(ne(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(WU,"_isExceptionDetailsInternal");function GU(w){try{if(ne(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(GU,"_isExceptionInternal");function hk(w){return w&&w.src&&re(w.src)&&w.obj&&me(w.obj)}s(hk,"_isStackDetails");function Sh(w){var R=w||"";re(R)||(re(R[gd])?R=R[gd]:R=""+R);var B=R[BA](`
`);return{src:R,obj:B}}s(Sh,"_convertStackObj");function jU(w){for(var R=[],B=w[BA](`
`),F=0;F<B[Sn];F++){var se=B[F];B[F+1]&&(se+="@"+B[F+1],F++),R.push(se)}return{src:w,obj:R}}s(jU,"_getOperaStack");function gk(w){var R=null;if(w)try{if(w[gd])R=Sh(w[gd]);else if(w[Bx]&&w[Bx][gd])R=Sh(w[Bx][gd]);else if(w.exception&&w.exception[gd])R=Sh(w.exception[gd]);else if(hk(w))R=w;else if(hk(w[qw]))R=w[qw];else if(Gt()&&Gt().opera&&w[Hw])R=jU(w[Nw]);else if(w.reason&&w.reason[gd])R=Sh(w.reason[gd]);else if(re(w))R=Sh(w);else{var B=w[Hw]||w[Ww]||"";re(w[pk])&&(B&&(B+=`
`),B+=" from "+w[pk]),B&&(R=Sh(B))}}catch(F){R=Sh(F)}return R||{src:"",obj:null}}s(gk,"_getStackFromErrorObj");function VU(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(VU,"_formatStackTrace");function Ak(w){var R,B=w.obj;if(B&&B[Sn]>0){R=[];var F=0,se=!1,be=0;dl(B,function(Gn){if(se||Lse(Gn)){var kn=nt(Gn);se=!0;var Si=Mse(kn,F);Si&&(be+=Si[Cx],R.push(Si),F++)}});var we=32*1024;if(be>we)for(var Oe=0,Ze=R[Sn]-1,gt=0,sr=Oe,Rn=Ze;Oe<Ze;){var Yn=R[Oe][Cx],fr=R[Ze][Cx];if(gt+=Yn+fr,gt>we){var wr=Rn-sr+1;R.splice(sr,wr);break}sr=Oe,Rn=Ze,Oe++,Ze--}}return R}s(Ak,"_parseStack");function Dx(w){var R="";if(w&&(R=w.typeName||w[sf]||"",!R))try{var B=/function (.{1,200})\(/,F=B.exec(w.constructor[h1]());R=F&&F[Sn]>1?F[1]:""}catch{}return R}s(Dx,"_getErrorType");function yk(w){if(w)try{if(!re(w)){var R=Dx(w),B=Gw(w,!1);return(!B||B==="{}")&&(w[Bx]&&(w=w[Bx],R=Dx(w)),B=Gw(w,!0)),jr(B,R)!==0&&R!=="String"?R+":"+B:B}}catch{}return""+(w||"")}s(yk,"_formatErrorCode");var Lp=function(){function w(R,B,F,se,be,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Oe=this;Oe.ver=2,GU(B)?(Oe[Ex]=B[Ex]||[],Oe[Bp]=B[Bp],Oe[Ru]=B[Ru],B[Mw]&&(Oe[Mw]=B[Mw]),B.id&&(Oe.id=B.id,B[Bp].id=B.id),B[vx]&&(Oe[vx]=B[vx]),Q(B.isManual)||(Oe.isManual=B.isManual)):(F||(F={}),we&&(F.id=we),Oe[Ex]=[YU(R,B,F)],Oe[Bp]=Th(R,F),Oe[Ru]=af(R,se),be&&(Oe[Mw]=be),we&&(Oe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,B,F,se,be,we,Oe,Ze){var gt=Dx(be||we||R);return{message:MA(R,gt),url:B,lineNumber:F,columnNumber:se,error:yk(be||we||R),evt:yk(we||R),typeName:gt,stackDetails:gk(Oe||be||we),errorSrc:Ze}},w.CreateFromInterface=function(R,B,F,se){var be=B[Ex]&&Ip(B[Ex],function(Oe){return D8(R,Oe)}),we=new w(R,S5(S5({},B),{exceptions:be}),F,se);return we},w.prototype.toInterface=function(){var R=this,B=R.exceptions,F=R.properties,se=R.measurements,be=R.severityLevel,we=R.problemGroup,Oe=R.id,Ze=R.isManual,gt=B instanceof Array&&Ip(B,function(sr){return sr.toInterface()})||void 0;return{ver:"4.0",exceptions:gt,severityLevel:be,properties:F,measurements:se,problemGroup:we,id:Oe,isManual:Ze}},w.CreateSimpleException=function(R,B,F,se,be,we){var Oe;return{exceptions:[(Oe={},Oe[sk]=!0,Oe.message=R,Oe.stack=be,Oe.typeName=B,Oe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=yk,w}(),$U=dr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function zU(){var w=this,R=me(w[hd])&&Ip(w[hd],function(F){return JU(F)}),B={id:w.id,outerId:w.outerId,typeName:w[Lw],message:w[Nw],hasFullStack:w[sk],stack:w[gd],parsedStack:R||void 0};return B}s(zU,"_toInterface");function YU(w,R,B){var F,se,be,we,Oe,Ze,gt,sr;if(WU(R))we=R[Lw],Oe=R[Nw],gt=R[gd],sr=R[hd]||[],Ze=R[sk];else{var Rn=R,Yn=Rn&&Rn.evt;he(Rn)||(Rn=Rn[Bx]||Yn||Rn),we=Vc(w,Dx(Rn))||Pp,Oe=ck(w,MA(R||Rn,we))||Pp;var fr=R[qw]||gk(R);sr=Ak(fr),me(sr)&&Ip(sr,function(wr){wr[ak]=Vc(w,wr[ak]),wr[f0]=Vc(w,wr[f0])}),gt=T8(w,VU(fr)),Ze=me(sr)&&sr[Sn]>0,B&&(B[Lw]=B[Lw]||we)}return F={},F[DA]=$U,F.id=se,F.outerId=be,F.typeName=we,F.message=Oe,F[sk]=Ze,F.stack=gt,F.parsedStack=sr,F.toInterface=zU,F}s(YU,"_createExceptionDetails");function D8(w,R){var B=me(R[hd])&&Ip(R[hd],function(se){return KU(se)})||R[hd],F=YU(w,S5(S5({},R),{parsedStack:B}));return F}s(D8,"_createExDetailsFromInterface");function jw(w,R){var B=R[g1](Dse);if(B&&B[Sn]>=4)w[f0]=B[1],w[xx]=parseInt(B[2]);else{var F=R[g1](Nse);F&&F[Sn]>=3?(w[f0]=F[1],w[xx]=parseInt(F[2])):w[f0]=R}}s(jw,"_parseFilename");function N8(w,R,B){var F=w[f0];R.fn&&B&&B[Sn]>R.fn&&(R.ln&&B[Sn]>R.ln?(F=Su(B[R.fn]||""),w[xx]=parseInt(Su(B[R.ln]||""))||0):F=Su(B[R.fn]||"")),F&&jw(w,F)}s(N8,"_handleFilename");function Lse(w){var R=!1;if(w&&re(w)){var B=Su(w);B&&(R=UU.test(B))}return R}s(Lse,"_isStackFrame");var L8=dr({level:1,method:1,assembly:0,fileName:0,line:0});function Mse(w,R){var B,F;if(w&&re(w)&&Su(w)){F=(B={},B[DA]=L8,B.level=R,B.assembly=Su(w),B.method=HU,B.fileName="",B.line=0,B.sizeInBytes=0,B);for(var se=0;se<B8[Sn];){var be=B8[se];if(be.chk&&!be.chk(w))break;be.pre&&(w=be.pre(w));var we=w[g1](be.re);if(we&&we[Sn]>=be.len){be.m&&(F.method=Su(we[be.m]||HU)),be.hdl?be.hdl(F,be,we):be.fn&&(be.ln?(F[f0]=Su(we[be.fn]||""),F[xx]=parseInt(Su(we[be.ln]||""))||0):jw(F,we[be.fn]||""));break}se++}}return M8(F)}s(Mse,"_extractStackFrame");function KU(w){var R,B=(R={},R[DA]=L8,R.level=w.level,R.method=w.method,R.assembly=w[ak],R.fileName=w[f0],R.line=w[xx],R.sizeInBytes=0,R);return M8(B)}s(KU,"_stackFrameFromInterface");function M8(w){var R=kse;return w&&(R+=w.method[Sn],R+=w.assembly[Sn],R+=w.fileName[Sn],R+=w.level.toString()[Sn],R+=w.line.toString()[Sn],w[Cx]=R),w}s(M8,"_populateFrameSizeInBytes");function JU(w){return{level:w.level,method:w.method,assembly:w[ak],fileName:w[f0],line:w[xx]}}s(JU,"_parsedFrameToInterface");var XU=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),Fse=function(){function w(R,B,F,se,be,we,Oe,Ze,gt){this.aiDataContract={ver:1,metrics:1,properties:0};var sr=this;sr.ver=2;var Rn=new XU;Rn[gx]=se>0?se:void 0,Rn.max=isNaN(we)||we===null?void 0:we,Rn.min=isNaN(be)||be===null?void 0:be,Rn[sf]=Vc(R,B)||Pp,Rn.value=F,Rn.stdDev=isNaN(Oe)||Oe===null?void 0:Oe,sr.metrics=[Rn],sr[Bp]=Th(R,Ze),sr[Ru]=af(R,gt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),Nx="";function Ose(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[hx]()==="true"}s(Ose,"stringToBoolOrDefault");function F8(w){(isNaN(w)||w<0)&&(w=0),w=jN(w);var R=Nx+w%1e3,B=Nx+hA(w/1e3)%60,F=Nx+hA(w/(1e3*60))%60,se=Nx+hA(w/(1e3*60*60))%24,be=hA(w/(1e3*60*60*24));return R=R[Sn]===1?"00"+R:R[Sn]===2?"0"+R:R,B=B[Sn]<2?"0"+B:B,F=F[Sn]<2?"0"+F:F,se=se[Sn]<2?"0"+se:se,(be>0?be+".":Nx)+se+":"+F+":"+B+"."+R}s(F8,"msToTimeSpan");function Qse(w,R){var B=null;return dl(w,function(F){if(F.identifier===R)return B=F,-1}),B}s(Qse,"getExtensionByName");function FA(w,R,B,F,se){return!se&&re(w)&&(w==="Script error."||w==="Script error")}s(FA,"isCrossOriginError");var Use=function(){function w(R,B,F,se,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Ze=this;Ze.ver=2,Ze.id=bx(R,Oe),Ze.url=Dp(R,F),Ze[sf]=Vc(R,B)||Pp,isNaN(se)||(Ze[Fw]=F8(se)),Ze[Bp]=Th(R,be),Ze[Ru]=af(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),Lx=function(){function w(R,B,F,se,be,we,Oe,Ze,gt,sr,Rn,Yn){gt===void 0&&(gt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var fr=this;fr.ver=2,fr.id=B,fr[Fw]=F8(be),fr.success=we,fr.resultCode=Oe+"",fr.type=Vc(R,gt);var wr=NU(R,F,Ze,se);fr.data=Dp(R,se)||wr.data,fr.target=Vc(R,wr.target),sr&&(fr.target="".concat(fr.target," | ").concat(sr)),fr[sf]=Vc(R,wr[sf]),fr[Bp]=Th(R,Rn),fr[Ru]=af(R,Yn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),O8=function(){function w(R,B,F,se,be){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,B=B||Pp,we[Nw]=ck(R,B),we[Bp]=Th(R,se),we[Ru]=af(R,be),F&&(we[Mw]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),Vw=function(){function w(R,B,F,se,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Ze=this;Ze.ver=2,Ze.url=Dp(R,F),Ze[sf]=Vc(R,B)||Pp,Ze[Bp]=Th(R,be),Ze[Ru]=af(R,we),Oe&&(Ze.domProcessing=Oe.domProcessing,Ze[Fw]=Oe[Fw],Ze.networkConnect=Oe.networkConnect,Ze.perfTotal=Oe.perfTotal,Ze.receivedResponse=Oe.receivedResponse,Ze.sentRequest=Oe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),qse=function(){function w(R,B){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=B}return s(w,"Data"),w}(),Ck=Aw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Hse=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,B,F,se){se===void 0&&(se=!1);var be;return F&&R[yx]&&R[yx][F]&&!Q(R[yx][F][B])?be=R[yx][F][B]:be=R[B],Q(be)?se:be},w}();function Mp(w){var R="ai."+w+".";return function(B){return R+B}}s(Mp,"_aiNameFunc");var Mx=Mp("application"),Ka=Mp("device"),Ek=Mp("location"),Fx=Mp("operation"),vk=Mp("session"),OA=Mp("user"),A1=Mp("cloud"),$w=Mp("internal"),QA=function(w){vA(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(Tw({applicationVersion:Mx("ver"),applicationBuild:Mx("build"),applicationTypeId:Mx("typeId"),applicationId:Mx("applicationId"),applicationLayer:Mx("layer"),deviceId:Ka("id"),deviceIp:Ka("ip"),deviceLanguage:Ka("language"),deviceLocale:Ka("locale"),deviceModel:Ka("model"),deviceFriendlyName:Ka("friendlyName"),deviceNetwork:Ka("network"),deviceNetworkName:Ka("networkName"),deviceOEMName:Ka("oemName"),deviceOS:Ka("os"),deviceOSVersion:Ka("osVersion"),deviceRoleInstance:Ka("roleInstance"),deviceRoleName:Ka("roleName"),deviceScreenResolution:Ka("screenResolution"),deviceType:Ka("type"),deviceMachineName:Ka("machineName"),deviceVMName:Ka("vmName"),deviceBrowser:Ka("browser"),deviceBrowserVersion:Ka("browserVersion"),locationIp:Ek("ip"),locationCountry:Ek("country"),locationProvince:Ek("province"),locationCity:Ek("city"),operationId:Fx("id"),operationName:Fx("name"),operationParentId:Fx("parentId"),operationRootId:Fx("rootId"),operationSyntheticSource:Fx("syntheticSource"),operationCorrelationVector:Fx("correlationVector"),sessionId:vk("id"),sessionIsFirst:vk("isFirst"),sessionIsNew:vk("isNew"),userAccountAcquisitionDate:OA("accountAcquisitionDate"),userAccountId:OA("accountId"),userAgent:OA("userAgent"),userId:OA("id"),userStoreRegion:OA("storeRegion"),userAuthUserId:OA("authUserId"),userAnonymousUserAcquisitionDate:OA("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:OA("authUserAcquisitionDate"),cloudName:A1("name"),cloudRole:A1("role"),cloudRoleVer:A1("roleVer"),cloudRoleInstance:A1("roleInstance"),cloudEnvironment:A1("environment"),cloudLocation:A1("location"),cloudDeploymentUnit:A1("deploymentUnit"),internalNodeName:$w("nodeName"),internalSdkVersion:$w("sdkVersion"),internalAgentVersion:$w("agentVersion"),internalSnippet:$w("snippet"),internalSdkSrc:$w("sdkSrc")}));function Q8(w,R,B,F,se,be){B=Vc(F,B)||Pp,(Q(w)||Q(R)||Q(B))&&We("Input doesn't contain all required fields");var we="";w[C8]&&(we=w[C8],delete w[C8]);var Oe={name:B,time:Ch(new Date),iKey:we,ext:be||{},tags:[],data:{},baseType:R,baseData:w};return Q(se)||ht(se,function(Ze,gt){Oe.data[Ze]=gt}),Oe}s(Q8,"createTelemetryItem");var U8=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=Q8,w}(),Wse={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Gse=new QA;function ZU(w){var R=null;if(fe(Event))R=new Event(w);else{var B=Re();B&&B.createEvent&&(R=B.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(ZU,"createDomEvent");function q8(w,R){xU(w,null,null,R)}s(q8,"_disableEvents");function eq(w){var R=Re(),B=Ar(),F=!1,se=[],be=1;B&&!Q(B.onLine)&&!B.onLine&&(be=2);var we=0,Oe=Yn(),Ze=yse(vh("OfflineListener"),w);try{if(sr(Gt())&&(F=!0),R){var gt=R.body||R;gt.ononline&&sr(gt)&&(F=!0)}}catch{F=!1}function sr(ji){var Ac=!1;return ji&&(Ac=A8(ji,"online",Gn,Ze),Ac&&A8(ji,"offline",kn,Ze)),Ac}s(sr,"_enableEvents");function Rn(){return Oe}s(Rn,"_isOnline");function Yn(){return!(we===2||be===2)}s(Yn,"calCurrentState");function fr(){var ji=Yn();Oe!==ji&&(Oe=ji,dl(se,function(Ac){var Qx={isOnline:Oe,rState:be,uState:we};try{Ac(Qx)}catch{}}))}s(fr,"listnerNoticeCheck");function wr(ji){we=ji,fr()}s(wr,"setOnlineState");function Gn(){be=1,fr()}s(Gn,"_setOnline");function kn(){be=2,fr()}s(kn,"_setOffline");function Si(){var ji=Gt();if(ji&&F){if(q8(ji,Ze),R){var Ac=R.body||R;ie(Ac.ononline)||q8(Ac,Ze)}F=!1}}s(Si,"_unload");function bo(ji){return se.push(ji),{rm:s(function(){var Ac=se.indexOf(ji);if(Ac>-1)return se.splice(Ac,1)},"rm")}}return s(bo,"addListener"),{isOnline:Rn,isListening:s(function(){return F},"isListening"),unload:Si,addListener:bo,setOnlineState:wr}}s(eq,"createOfflineListener");var jse="AppInsightsPropertiesPlugin",H8="AppInsightsChannelPlugin",Ox="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Ox,t.BreezeChannelIdentifier=H8,t.ConfigurationManager=Hse,t.ConnectionStringParser=dk,t.ContextTagKeys=QA,t.CtxTagKeys=Gse,t.DEFAULT_BREEZE_ENDPOINT=y8,t.DEFAULT_BREEZE_PATH=Dw,t.Data=qse,t.DisabledPropertyName=rk,t.DistributedTracingModes=Ise,t.Envelope=fk,t.Event=Rse,t.EventPersistence=Ow,t.Exception=Lp,t.Extensions=Wse,t.HttpMethod=IU,t.Metric=Fse,t.PageView=Use,t.PageViewPerformance=Vw,t.ProcessLegacy=nk,t.PropertiesPluginIdentifier=jse,t.RemoteDependencyData=Lx,t.RequestHeaders=TU,t.SampleRate=bU,t.SeverityLevel=Ck,t.TelemetryItemCreator=U8,t.ThrottleMgr=Sse,t.Trace=O8,t.correlationIdCanIncludeCorrelationHeader=NA,t.correlationIdGetCorrelationContext=BU,t.correlationIdGetCorrelationContextValue=DU,t.correlationIdGetPrefix=R8,t.correlationIdSetPrefix=S8,t.createDistributedTraceContextFromTrace=k8,t.createDomEvent=ZU,t.createOfflineListener=eq,t.createTelemetryItem=Q8,t.createTraceParent=ux,t.dataSanitizeException=T8,t.dataSanitizeId=bx,t.dataSanitizeInput=w8,t.dataSanitizeKey=I8,t.dataSanitizeKeyAndAddUniqueness=b8,t.dataSanitizeMeasurements=af,t.dataSanitizeMessage=ck,t.dataSanitizeProperties=Th,t.dataSanitizeString=Vc,t.dataSanitizeUrl=Dp,t.dateTimeUtilsDuration=bse,t.dateTimeUtilsNow=xse,t.dsPadNumber=wU,t.findAllScripts=m8,t.findW3cTraceParent=p8,t.formatTraceParent=p1,t.getExtensionByName=Qse,t.isBeaconApiSupported=TA,t.isCrossOriginError=FA,t.isInternalApplicationInsightsEndpoint=PU,t.isSampledFlag=J5,t.isValidSpanId=fx,t.isValidTraceId=dx,t.isValidTraceParent=px,t.msToTimeSpan=F8,t.parseConnectionString=uk,t.parseTraceParent=of,t.strNotSpecified=Pp,t.stringToBoolOrDefault=Ose,t.urlGetAbsoluteUrl=Ese,t.urlGetCompleteUrl=SU,t.urlGetPathName=vse,t.urlParseFullHost=wh,t.urlParseHost=RU,t.urlParseUrl=Ix,t.utlCanUseLocalStorage=lk,t.utlCanUseSessionStorage=_h,t.utlDisableStorage=Qw,t.utlEnableStorage=Tse,t.utlGetLocalStorage=MU,t.utlGetSessionStorage=OU,t.utlGetSessionStorageKeys=kx,t.utlRemoveSessionStorage=QU,t.utlRemoveStorage=cf,t.utlSetLocalStorage=FU,t.utlSetSessionStorage=wse,t.utlSetStoragePrefix=Uw})});var ZDe=U((oG,XDe)=>{d();(function(t,e){typeof oG=="object"&&typeof XDe<"u"?e(oG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(oG,function(t){"use strict";function e(A,v){return A||v}s(e,"_pureAssign");function r(A,v){return A[v]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),pe=r(J,"slice");function Y(A,v){try{return{v:A.apply(this,v)}}catch(T){return{e:T}}}s(Y,"safe");function G(A,v){var T=Y(A);return T.e?v:T.v}s(G,"safeGet");var H;function ce(A){return function(v){return typeof v===A}}s(ce,"_createIs");function ie(A){var v="[object "+A+"]";return function(T){return!!(T&&V(T)===v)}}s(ie,"_createObjIs");function V(A){return _[x].call(A)}s(V,"objToString");function Q(A){return typeof A===f||A===f}s(Q,"isUndefined");function z(A){return!ne(A)}s(z,"isStrictUndefined");function re(A){return A===i||Q(A)}s(re,"isNullOrUndefined");function fe(A){return A===i||!ne(A)}s(fe,"isStrictNullOrUndefined");function ne(A){return!!A||A!==n}s(ne,"isDefined");function me(A){return!H&&(H=["string","number","boolean",f,"symbol","bigint"]),A!==c&&H.indexOf(A)!==-1}s(me,"isPrimitiveType");var he=ce("string"),Qe=ce(a);function ke(A){return!A&&re(A)?!1:!!A&&typeof A===c}s(ke,"isObject");var tt=r(M,"isArray"),Fe=ie("Date"),ht=ce("number"),St=ce("boolean"),xt=ie("Error");function Tt(A){return!!(A&&A.then&&Qe(A.then))}s(Tt,"isPromiseLike");function le(A){return!(!A||G(function(){return!(A&&0+A)},!A))}s(le,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(A,v){return!!A&&_.hasOwnProperty[E](A,v)}s(ye,"objHasOwnProperty");var nt=e(r(b,"hasOwn"),ee);function ee(A,v){return ye(A,v)||!!Ue(A,v)}s(ee,"polyObjHasOwn");function oe(A,v,T){if(A&&ke(A)){for(var S in A)if(nt(A,S)&&v[E](T||A,S,A[S])===-1)break}}s(oe,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function De(A){var v={};if(v[We.c]=!0,v[We.e]=!0,A.l){v.get=function(){return A.l.v};var T=Ue(A.l,"v");T&&T.set&&(v.set=function(S){A.l.v=S})}return oe(A,function(S,D){v[We[S]]=z(D)?v[We[S]]:D}),v}s(De,"_createProp");var xe=r(b,"defineProperty");function Ye(A,v,T){return xe(A,v,De(T))}s(Ye,"objDefine");function st(A,v,T,S,D){var L={};return oe(A,function(q,Z){yt(L,q,v?Z:q),yt(L,Z,T?Z:q)}),S?S(L):L}s(st,"_createKeyValueMap");function yt(A,v,T,S){xe(A,v,{value:T,enumerable:!0,writable:!1})}s(yt,"_assignMapValue");var qt=e(k),dr="[object Error]";function Ft(A,v){var T=o,S=_[x][E](A);S===dr&&(A={stack:qt(A.stack),message:qt(A.message),name:qt(A.name)});try{T=JSON.stringify(A,i,v?typeof v=="number"?v:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||qt(A)}catch(D){T=" - "+Ft(D,v)}return S+": "+T}s(Ft,"dumpObj");function Yr(A){throw new Error(A)}s(Yr,"throwError");function en(A){throw new TypeError(A)}s(en,"throwTypeError");var yn=r(b,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Et=r(b,"keys");function Zt(A){return yn&&oe(A,function(v,T){(tt(T)||ke(T))&&Zt(T)}),Vt(A)}s(Zt,"objDeepFreeze");var Vt=e(yn,Ae),vr=e(r(b,"getPrototypeOf"),Ge);function Ir(A){return st(A,1,0,Vt)}s(Ir,"createEnum");function zt(A){return st(A,0,0,Vt)}s(zt,"createEnumKeyMap");function ir(A){var v={};return oe(A,function(T,S){yt(v,T,S[1]),yt(v,S[0],S[1])}),Vt(v)}s(ir,"createSimpleMap");function Xt(A){return ir(A)}s(Xt,"createTypeMap");var Sr=zt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),qr="__tsUtils$gblCfg",tn;function zn(){var A;return typeof globalThis!==f&&(A=globalThis),!A&&typeof self!==f&&(A=self),!A&&typeof window!==f&&(A=window),!A&&typeof global!==f&&(A=global),A}s(zn,"_getGlobalValue");function ai(){if(!tn){var A=Y(zn).v||{};tn=A[qr]=A[qr]||{}}return tn}s(ai,"_getGlobalConfig");var Hn=ri;function ri(A,v,T){var S=v?v[A]:i;return function(D){var L=(D?D[A]:i)||S;if(L||T){var q=arguments;return(L||T).apply(D,L?pe[E](q,1):q)}en('"'+qt(A)+'" not defined for '+Ft(D))}}s(ri,"_unwrapFunctionWithPoly");function ln(A){return function(v){return v[A]}}s(ln,"_unwrapProp");var ni=r(N,"min"),_e=r(N,"max"),W=Hn("slice",P),ge=Hn("substring",P),ve=ri("substr",P,te);function te(A,v,T){return re(A)&&en("Invalid "+Ft(A)),T<0?o:(v=v||0,v<0&&(v=_e(v+A[g],0)),Q(T)?W(A,v):W(A,v,v+T))}s(te,"polyStrSubstr");function O(A,v){return ge(A,0,v)}s(O,"strLeft");var Re="_urid",ze;function Gt(){if(!ze){var A=ai();ze=A.gblSym=A.gblSym||{k:{},s:{}}}return ze}s(Gt,"_globalSymbolRegistry");var Pr;function Ar(A){var v={description:qt(A),toString:s(function(){return m+"("+A+")"},"toString")};return v[h]=!0,v}s(Ar,"polyNewSymbol");function gn(A){var v=Gt();if(!nt(v.k,A)){var T=Ar(A),S=Et(v.s).length;T[Re]=function(){return S+"_"+T[x]()},v.k[A]=T,v.s[T[Re]()]=qt(A)}return v.k[A]}s(gn,"polySymbolFor");function Cn(A){!Pr&&(Pr={});var v,T=Sr[A];return T&&(v=Pr[T]=Pr[T]||Ar(m+"."+T)),v}s(Cn,"polyGetKnownSymbol");var Tr;function $t(){Tr=ai()}s($t,"_initTestHooks");function Wn(A){var v={};return!Tr&&$t(),v.b=Tr.lzy,xe(v,"v",{configurable:!0,get:s(function(){var T=A();return Tr.lzy||xe(v,"v",{value:T}),v.b=Tr.lzy,T},"get")}),v}s(Wn,"getLazy");function ga(A){return xe({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(ga,"createCachedValue");var mh="window",dl;function hh(A,v){var T;return function(){return!Tr&&$t(),(!T||Tr.lzy)&&(T=ga(Y(A,v).v)),T.v}}s(hh,"_getGlobalInstFn");function Ip(A){return!Tr&&$t(),(!dl||A===!1||Tr.lzy)&&(dl=ga(Y(zn).v||i)),dl.v}s(Ip,"getGlobal");function Ba(A,v){var T;if(!dl||v===!1?T=Ip(v):T=dl.v,T&&T[A])return T[A];if(A===mh)try{return window}catch{}return i}s(Ba,"getInst");function pA(){return!!Mv()}s(pA,"hasDocument");var Mv=hh(Ba,["document"]);function WN(){return!!gh()}s(WN,"hasWindow");var gh=hh(Ba,[mh]);function zoe(){return!!mA()}s(zoe,"hasNavigator");var mA=hh(Ba,["navigator"]),Yoe=hh(function(){return!!Y(function(){return process&&(process.versions||{}).node}).v}),JC,GN;function x5(){return JC=ga(Y(Ba,[m]).v),JC}s(x5,"_initSymbol");function Koe(A){var v=(Tr.lzy?0:JC)||x5();return v.v?v.v[A]:n}s(Koe,"_getSymbolKey");function Su(){return!!hA()}s(Su,"hasSymbol");function hA(){return!Tr&&$t(),((Tr.lzy?0:JC)||x5()).v}s(hA,"getSymbol");function mw(A,v){var T=Sr[A];!Tr&&$t();var S=(Tr.lzy?0:JC)||x5();return S.v?S.v[T||A]:v?n:Cn(A)}s(mw,"getKnownSymbol");function XC(A,v){!Tr&&$t();var T=(Tr.lzy?0:JC)||x5();return T.v?T.v(A):v?i:Ar(A)}s(XC,"newSymbol");function hw(A){return!Tr&&$t(),GN=(Tr.lzy?0:GN)||ga(Y(Koe,["for"]).v),(GN.v||gn)(A)}s(hw,"symbolFor");function gA(A){return!!A&&Qe(A.next)}s(gA,"isIterator");function b5(A){return!fe(A)&&Qe(A[mw(3)])}s(b5,"isIterable");var gw;function jN(A,v,T){if(A&&(gA(A)||(!gw&&(gw=ga(mw(3))),A=A[gw.v]?A[gw.v]():i),gA(A))){var S=n,D=n;try{for(var L=0;!(D=A.next()).done&&v[E](T||A,D.value,L,A)!==-1;)L++}catch(q){S={e:q},A.throw&&(D=i,A.throw(S))}finally{try{D&&!D.done&&A.return&&A.return(D)}finally{if(S)throw S.e}}}}s(jN,"iterForOf");function Fv(A,v,T){return A.apply(v,T)}s(Fv,"fnApply");function Ov(A,v){return!Q(v)&&A&&(tt(v)?Fv(A.push,A,v):gA(v)||b5(v)?jN(v,function(T){A.push(T)}):A.push(v)),A}s(Ov,"arrAppend");function jr(A,v,T){if(A)for(var S=A[g]>>>0,D=0;D<S&&!(D in A&&v[E](T||A,A[D],D,A)===-1);D++);}s(jr,"arrForEach");var fd=Hn("indexOf",J),ZC=Hn("map",J);function Qv(A,v,T){return((A?A.slice:i)||pe).apply(A,pe[E](arguments,1))}s(Qv,"arrSlice");var Joe=Hn("reduce",J),AA=e(r(b,"create"),Xoe);function Xoe(A){if(!A)return{};var v=typeof A;v!==c&&v!==a&&en("Prototype must be an Object or function: "+Ft(A));function T(){}return s(T,"tempFunc"),T[l]=A,new T}s(Xoe,"polyObjCreate");var VN;function Aw(A,v){var T=b.setPrototypeOf||function(S,D){var L;!VN&&(VN=ga((L={},L[u]=[],L instanceof Array))),VN.v?S[u]=D:oe(D,function(q,Z){return S[q]=Z})};return T(A,v)}s(Aw,"objSetPrototypeOf");function Zoe(A,v,T){Y(Ye,[v,y,{v:A,c:!0,e:!1}]),v=Aw(v,T);function S(){this[p]=v,Y(Ye,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),v[l]=T===i?AA(T):(S[l]=T[l],new S),v}s(Zoe,"_createCustomError");function yw(A,v){v&&(A[y]=v)}s(yw,"_setName");function gc(A,v,T){var S=T||Error,D=S[l][y],L=Error.captureStackTrace;return Zoe(A,function(){var q=this,Z=arguments;try{Y(yw,[S,A]);var ae=Fv(S,q,pe[E](Z))||q;if(ae!==q){var Ce=vr(q);Ce!==vr(ae)&&Aw(ae,Ce)}return L&&L(ae,q[p]),v&&v(ae,Z),ae}finally{Y(yw,[S,D])}},S)}s(gc,"createCustomError");function yA(){return(Date.now||Cw)()}s(yA,"utcNow");function Cw(){return new Date().getTime()}s(Cw,"polyUtcNow");function JQ(A){return s(function(T){return re(T)&&en("strTrim called ["+Ft(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(JQ,"_createTrimFn");var ese=JQ(/^\s+|(?=\s)\s+$/g),so=ri("trim",P,ese),e1=r(N,"floor"),CA,$N,Ew;function pd(A){if(!A||typeof A!==c)return!1;Ew||(Ew=WN()?gh():!0);var v=!1;if(A!==Ew){$N||(CA=Function[l][x],$N=CA[E](b));try{var T=vr(A);v=!T,v||(ye(T,p)&&(T=T[p]),v=!!(T&&typeof T===a&&CA[E](T)===$N))}catch{}}return v}s(pd,"isPlainObject");function XQ(A){return A.value&&I5(A),!0}s(XQ,"_defaultDeepCopyHandler");var ZQ=[Uv,I5,tU,EA];function zN(A,v,T,S){var D;return jr(A,function(L){if(L.k===v)return D=L,-1}),D||(D={k:v,v},A.push(D),S(D)),D.v}s(zN,"_getSetVisited");function t1(A,v,T,S){var D=T.handler,L=T.path?S?T.path.concat(S):T.path:[],q={handler:T.handler,src:T.src,path:L},Z=typeof v,ae=!1,Ce=v===i;Ce||(v&&Z===c?ae=pd(v):Ce=me(Z));var Te={type:Z,isPrim:Ce,isPlain:ae,value:v,result:v,path:L,origin:T.src,copy:s(function(Le,Ke){return t1(A,Le,Ke?q:T,Ke)},"copy"),copyTo:s(function(Le,Ke){return YN(A,Le,Ke,q)},"copyTo")};return Te.isPrim?D&&D[E](T,Te)?Te.result:v:zN(A,v,L,function(Le){Ye(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(je){Le.v=je},"s")});for(var Ke=0,Me=D;!(Me||(Ke<ZQ.length?ZQ[Ke++]:XQ))[E](T,Te);)Me=i})}s(t1,"_deepCopy");function YN(A,v,T,S){if(!re(T))for(var D in T)v[D]=t1(A,T[D],S,D);return v}s(YN,"_copyProps");function eU(A,v,T){var S={handler:T,src:v,path:[]};return YN([],A,v,S)}s(eU,"objCopyProps");function KN(A,v){var T={handler:v,src:A};return t1([],A,T)}s(KN,"objDeepCopy");function Uv(A){var v=A.value;if(tt(v)){var T=A.result=[];return T.length=v.length,A.copyTo(T,v),!0}return!1}s(Uv,"arrayDeepCopyHandler");function EA(A){var v=A.value;return Fe(v)?(A.result=new Date(v.getTime()),!0):!1}s(EA,"dateDeepCopyHandler");function tU(A){return A.type===a}s(tU,"functionDeepCopyHandler");function I5(A){var v=A.value;if(v&&A.isPlain){var T=A.result={};return A.copyTo(T,v),!0}return!1}s(I5,"plainObjDeepCopyHandler");function JN(A,v){return jr(v,function(T){eU(A,T)}),A}s(JN,"_doExtend");function T5(A,v,T,S,D,L,q){return JN(KN(A)||{},pe[E](arguments))}s(T5,"deepExtend");var tse=ln(g),rse=r(N,"round"),rU=ri("endsWith",P,nse);function nse(A,v,T){he(A)||en("'"+Ft(A)+"' is not a string");var S=he(v)?v:qt(v),D=!Q(T)&&T<A[g]?T:A[g];return ge(A,D-S[g],D)===S}s(nse,"polyStrEndsWith");var Ah=Hn("indexOf",P),w5="ref",XN="unref",_5="hasRef",ise="enabled";function S5(A,v,T){var S=!0,D=A?v(i):i,L;function q(){return S=!1,D&&D[XN]&&D[XN](),L}s(q,"_unref");function Z(){D&&T(D),D=i}s(Z,"_cancel");function ae(){return D=v(D),S||q(),L}s(ae,"_refresh");function Ce(Te){!Te&&D&&Z(),Te&&!D&&ae()}return s(Ce,"_setEnabled"),L={cancel:Z,refresh:ae},L[_5]=function(){return D&&D[_5]?D[_5]():S},L[w5]=function(){return S=!0,D&&D[w5]&&D[w5](),L},L[XN]=q,L=xe(L,ise,{get:s(function(){return!!D},"get"),set:Ce}),{h:L,dn:s(function(){D=i},"dn")}}s(S5,"_createTimerHandler");function R5(A,v,T){var S=tt(v),D=S?v.length:0,L=(D>0?v[0]:S?n:v)||setTimeout,q=(D>1?v[1]:n)||clearTimeout,Z=T[0];T[0]=function(){ae.dn(),Fv(Z,n,pe[E](arguments))};var ae=S5(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;Fv(q,n,[Ce])}return Fv(L,n,T)},function(Ce){Fv(q,n,[Ce])});return ae.h}s(R5,"_createTimeoutWith");function vA(A,v){return R5(!0,n,pe[E](arguments))}s(vA,"scheduleTimeout");function k5(A,v){return R5(!1,n,pe[E](arguments))}s(k5,"createTimeout");var r1,ef="constructor",tf="prototype",n1="function",qv="_dynInstFuncs",xA="_isDynProxy",Hv="_dynClass",ZN="_dynCls$",i1="_dynInstChk",Wv=i1,e8="_dfOpts",P5="_unknown_",Gv="__proto__",vw="_dyn"+Gv,B5="__dynProto$Gbl",jv="_dynInstProto",Vv="useBaseInst",xw="setInstFuncs",o1=Object,$v=o1.getPrototypeOf,t8=o1.getOwnPropertyNames,D5=Ip(),zv=D5[B5]||(D5[B5]={o:(r1={},r1[xw]=!0,r1[Vv]=!0,r1),n:1e3});function Yv(A){return A&&(A===o1[tf]||A===Array[tf])}s(Yv,"_isObjectOrArrayPrototype");function yh(A){return Yv(A)||A===Function[tf]}s(yh,"_isObjectArrayOrFunctionPrototype");function Tp(A){var v;if(A){if($v)return $v(A);var T=A[Gv]||A[tf]||(A[ef]?A[ef][tf]:null);v=A[vw]||T,ye(A,vw)||(delete A[jv],v=A[vw]=A[jv]||A[vw],A[jv]=T)}return v}s(Tp,"_getObjProto");function Kv(A,v){var T=[];if(t8)T=t8(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var D=0;D<T.length;D++)v(T[D])}s(Kv,"_forEachProp");function Jv(A,v,T){return v!==ef&&typeof A[v]===n1&&(T||ye(A,v))&&v!==Gv&&v!==tf}s(Jv,"_isDynamicCandidate");function N5(A){en("DynamicProto: "+A)}s(N5,"_throwTypeError");function r8(A){var v=AA(null);return Kv(A,function(T){!v[T]&&Jv(A,T,!1)&&(v[T]=A[T])}),v}s(r8,"_getInstanceFuncs");function n8(A,v){for(var T=A.length-1;T>=0;T--)if(A[T]===v)return!0;return!1}s(n8,"_hasVisited");function ose(A,v,T,S){function D(ae,Ce,Te){var Le=Ce[Te];if(Le[xA]&&S){var Ke=ae[qv]||{};Ke[Wv]!==!1&&(Le=(Ke[Ce[Hv]]||{})[Te]||Le)}return function(){return Le.apply(ae,arguments)}}s(D,"_instFuncProxy");var L=AA(null);Kv(T,function(ae){L[ae]=D(v,T,ae)});for(var q=Tp(A),Z=[];q&&!yh(q)&&!n8(Z,q);)Kv(q,function(ae){!L[ae]&&Jv(q,ae,!$v)&&(L[ae]=D(v,q,ae))}),Z.push(q),q=Tp(q);return L}s(ose,"_getBaseFuncs");function sse(A,v,T,S){var D=null;if(A&&ye(T,Hv)){var L=A[qv]||AA(null);if(D=(L[T[Hv]]||AA(null))[v],D||N5("Missing ["+v+"] "+n1),!D[i1]&&L[Wv]!==!1){for(var q=!ye(A,v),Z=Tp(A),ae=[];q&&Z&&!yh(Z)&&!n8(ae,Z);){var Ce=Z[v];if(Ce){q=Ce===S;break}ae.push(Z),Z=Tp(Z)}try{q&&(A[v]=D),D[i1]=1}catch{L[Wv]=!1}}}return D}s(sse,"_getInstFunc");function ase(A,v,T){var S=v[A];return S===T&&(S=Tp(v)[A]),typeof S!==n1&&N5("["+A+"] is not a "+n1),S}s(ase,"_getProtoFunc");function cse(A,v,T,S,D){function L(ae,Ce){var Te=s(function(){var Le=sse(this,Ce,ae,Te)||ase(Ce,ae,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[xA]=1,Te}if(s(L,"_createDynamicPrototype"),!Yv(A)){var q=T[qv]=T[qv]||AA(null);if(!Yv(q)){var Z=q[v]=q[v]||AA(null);q[Wv]!==!1&&(q[Wv]=!!D),Yv(Z)||Kv(T,function(ae){Jv(T,ae,!1)&&T[ae]!==S[ae]&&(Z[ae]=T[ae],delete T[ae],(!ye(A,ae)||A[ae]&&!A[ae][xA])&&(A[ae]=L(A,ae)))})}}}s(cse,"_populatePrototype");function i8(A,v){if($v){for(var T=[],S=Tp(v);S&&!yh(S)&&!n8(T,S);){if(S===A)return!0;T.push(S),S=Tp(S)}return!1}return!0}s(i8,"_checkPrototype");function bw(A,v){return ye(A,tf)?A.name||v||P5:((A||{})[ef]||{}).name||v||P5}s(bw,"_getObjName");function jl(A,v,T,S){ye(A,tf)||N5("theClass is an invalid class definition.");var D=A[tf];i8(D,v)||N5("["+bw(A)+"] not in hierarchy of ["+bw(v)+"]");var L=null;ye(D,Hv)?L=D[Hv]:(L=ZN+bw(A,"_")+"$"+zv.n,zv.n++,D[Hv]=L);var q=jl[e8],Z=!!q[Vv];Z&&S&&S[Vv]!==void 0&&(Z=!!S[Vv]);var ae=r8(v),Ce=ose(D,v,ae,Z);T(v,Ce);var Te=!!$v&&!!q[xw];Te&&S&&(Te=!!S[xw]),cse(D,L,v,ae,Te!==!1)}s(jl,"dynamicProto"),jl[e8]=zv.o;var Aa="function",nU="object",iU="undefined",Iw="prototype",o8=Object,s8=o8[Iw];(Ip()||{}).Symbol,(Ip()||{}).Reflect;var L5="hasOwnProperty",oU=s(function(A){for(var v,T=1,S=arguments.length;T<S;T++){v=arguments[T];for(var D in v)s8[L5].call(v,D)&&(A[D]=v[D])}return A},"__objAssignFnImpl"),Ch=ft||oU,bA=s(function(A,v){return bA=o8.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var D in S)S[L5](D)&&(T[D]=S[D])},bA(A,v)},"extendStaticsFn");function Tw(A,v){typeof v!==Aa&&v!==null&&en("Class extends value "+String(v)+" is not a constructor or null"),bA(A,v);function T(){this.constructor=A}s(T,"__"),A[Iw]=v===null?AA(v):(T[Iw]=v[Iw],new T)}s(Tw,"__extendsFn");function sU(A,v){for(var T=0,S=v.length,D=A.length;T<S;T++,D++)A[D]=v[T];return A}s(sU,"__spreadArrayFn");var M5=Ir,lse=Xt,IA=M5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Xv="toLowerCase",ii="length",Zv="warnToConsole",s1="throwInternal",Eh="watch",F5="apply",ao="push",ex="splice",za="logger",tx="cancel",ww="initialize",TA="identifier",_w="removeNotificationListener",O5="addNotificationListener",wp="isInitialized",rx="value",l0="getNotifyMgr",nx="getPlugin",wA="name",fl="processNext",ix="getProcessTelContext",_p="enabled",aU="stopPollingInternalLogs",a1="unload",Q5="onComplete",ox="version",cU="loggingLevelConsole",c1="createNew",Sp="teardown",U5="messageId",l1="message",Rp="diagLog",q5="_doTeardown",vh="update",kp="getNext",_A="setNextPlugin",H5="userAgent",SA="split",RA="replace",Vl="type",a8="evtName",Sw="status",c8="getAllResponseHeaders",l8="isChildEvt",sx="data",kA="getCtx",u0="setCtx",lU="itemsReceived",xh="urlString",u8="headers",bh="timeout",uU="traceFlags",ax;function d8(A,v){ax||(ax=gc("AggregationError",function(S,D){D[ii]>1&&(S.errors=D[1])}));var T=A||"One or more errors occurred.";throw jr(v,function(S,D){T+=`
`.concat(D," > ").concat(Ft(S))}),new ax(T,v||[])}s(d8,"throwAggregationError");var u1="Promise",d1="rejected";function rf(A,v){return dU(A,function(T){return v?v({status:"fulfilled",rejected:!1,value:T}):T},function(T){return v?v({status:d1,rejected:!0,reason:T}):T})}s(rf,"doAwaitResponse");function dU(A,v,T,S){var D=A;try{if(Tt(A))(v||T)&&(D=A.then(v,T));else try{v&&(D=v(A))}catch(L){if(T)D=T(L);else throw L}}finally{S&&use(D,S)}return D}s(dU,"doAwait");function use(A,v){var T=A;return v&&(Tt(A)?A.finally?T=A.finally(v):T=A.then(function(S){return v(),S},function(S){throw v(),S}):v()),T}s(use,"doFinally");var fU=["pending","resolving","resolved",d1],pU="dispatchEvent",Rw;function mU(A){var v;return A&&A.createEvent&&(v=A.createEvent("Event")),!!v&&v.initEvent}s(mU,"_hasInitEventFn");function W5(A,v,T,S){var D=Mv();!Rw&&(Rw=ga(!!Y(mU,[D]).v));var L=Rw.v?D.createEvent("Event"):S?new Event(v):{};if(T&&T(L),Rw.v&&L.initEvent(v,!1,!0),L&&A[pU])A[pU](L);else{var q=A["on"+v];if(q)q(L);else{var Z=Ba("console");Z&&(Z.error||Z.log)(v,Ft(L))}}}s(W5,"emitEvent");var hU="unhandledRejection",dse=hU.toLowerCase(),cx=10,G5;function gU(A){return Qe(A)?A.toString():Ft(A)}s(gU,"dumpFnObj");function AU(A,v,T){var S=Qv(arguments,3),D=0,L=!1,q,Z=[],ae=!1,Ce=null,Te;function Le(Yt,yr){try{ae=!0,Ce&&Ce.cancel(),Ce=null;var Kn=A(function(Di,Ni){Z.push(function(){try{var Bo=D===2?Yt:yr,An=Q(Bo)?q:Qe(Bo)?Bo(q):Bo;Tt(An)?An.then(Di,Ni):Bo?Di(An):D===3?Ni(An):Di(An)}catch(Hr){Ni(Hr)}}),L&&ut()},S);return Kn}finally{}}s(Le,"_then");function Ke(Yt){return Le(void 0,Yt)}s(Ke,"_catch");function Me(Yt){var yr=Yt,Kn=Yt;return Qe(Yt)&&(yr=s(function(Di){return Yt&&Yt(),Di},"thenFinally"),Kn=s(function(Di){throw Yt&&Yt(),Di},"catchFinally")),Le(yr,Kn)}s(Me,"_finally");function je(){return fU[D]}s(je,"_strState");function ut(){if(Z.length>0){var Yt=Z.slice();Z=[],ae=!0,Ce&&Ce.cancel(),Ce=null,v(Yt)}}s(ut,"_processQueue");function rt(Yt,yr){return function(Kn){if(D===yr){if(Yt===2&&Tt(Kn)){D=1,Kn.then(rt(2,1),rt(3,1));return}D=Yt,L=!0,q=Kn,ut(),!ae&&Yt===3&&!Ce&&(Ce=vA(Ct,cx))}}}s(rt,"_createSettleIfFn");function Ct(){if(!ae)if(ae=!0,Yoe())process.emit(hU,q,Te);else{var Yt=gh()||Ip();!G5&&(G5=ga(Y(Ba,[u1+"RejectionEvent"]).v)),W5(Yt,dse,function(yr){return Ye(yr,"promise",{g:s(function(){return Te},"g")}),yr.reason=q,yr},!!G5.v)}}s(Ct,"_notifyUnhandledRejection"),Te={then:Le,catch:Ke,finally:Me},xe(Te,"state",{get:je}),Su()&&(Te[mw(11)]="IPromise");function Mt(){return"IPromise "+je()+(L?" - "+gU(q):"")}return s(Mt,"_toString"),Te.toString=Mt,s(function(){Qe(T)||en(u1+": executor is not a function - "+gU(T));var yr=rt(3,0);try{T.call(Te,rt(2,0),yr)}catch(Kn){yr(Kn)}},"_initialize")(),Te}s(AU,"_createPromise");function fse(A){return function(v){var T=Qv(arguments,1);return A(function(S,D){try{var L=[],q=1;jN(v,function(Z,ae){Z&&(q++,dU(Z,function(Ce){L[ae]=Ce,--q===0&&S(L)},D))}),q--,q===0&&S(L)}catch(Z){D(Z)}},T)}}s(fse,"_createAllPromise");function pse(A){return ga(function(v){var T=Qv(arguments,1);return A(function(S,D){var L=[],q=1;function Z(ae,Ce){q++,rf(ae,function(Te){Te.rejected?L[Ce]={status:d1,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--q===0&&S(L)})}s(Z,"processItem");try{tt(v)?jr(v,Z):b5(v)?jN(v,Z):en("Input is not an iterable"),q--,q===0&&S(L)}catch(ae){D(ae)}},T)})}s(pse,"_createAllSettledPromise");function yU(A){jr(A,function(v){try{v()}catch{}})}s(yU,"syncItemProcessor");function CU(A){var v=ht(A)?A:0;return function(T){vA(function(){yU(T)},v)}}s(CU,"timeoutItemProcessor");function j5(A,v){return AU(j5,CU(v),A,v)}s(j5,"createAsyncPromise");var V5;function mse(A,v){!V5&&(V5=ga(Y(Ba,[u1]).v||null));var T=V5.v;if(!T)return j5(A);Qe(A)||en(u1+": executor is not a function - "+Ft(A));var S=0;function D(){return fU[S]}s(D,"_strState");var L=new T(function(q,Z){function ae(Te){S=2,q(Te)}s(ae,"_resolve");function Ce(Te){S=3,Z(Te)}s(Ce,"_reject"),A(ae,Ce)});return xe(L,"state",{get:D}),L}s(mse,"createNativePromise");var $5;function z5(A){return AU(z5,yU,A)}s(z5,"createSyncPromise");function md(A,v){return!$5&&($5=pse(z5)),$5.v(A,v)}s(md,"createSyncAllSettledPromise");var Y5;function lx(A,v){return!Y5&&(Y5=ga(mse)),Y5.v.call(this,A,v)}s(lx,"createPromise");var f8=fse(lx),nf=void 0,_i="",Ih="channels",Ya="core",d0="createPerfMgr",K5="disabled",f1="extensionConfig",ux="extensions",of="processTelemetry",dx="priority",fx="eventsSent",px="eventsDiscarded",J5="eventsSendRequest",p1="perfEvent",p8="offlineEventsStored",m8="offlineBatchSent",X5="offlineBatchDrop",kw="getPerfMgr",Z5="domain",ek="path",EU="Not dynamic - ",h8=/-([a-z])/g,hse=/([^\w\d_$])/g,gse=/^(\d+[\w\d_$])/;function tk(A){return!re(A)}s(tk,"isNotNullOrUndefined");function mx(A){var v=A;return v&&he(v)&&(v=v[RA](h8,function(T,S){return S.toUpperCase()}),v=v[RA](hse,"_"),v=v[RA](gse,function(T,S){return"_"+S})),v}s(mx,"normalizeJsName");function pl(A,v){return A&&v?Ah(A,v)!==-1:!1}s(pl,"strContains");function Pw(A){return A&&A.toISOString()||""}s(Pw,"toISOString");function jc(A){return xt(A)?A[wA]:_i}s(jc,"getExceptionName");function PA(A,v,T,S,D){var L=T;return A&&(L=A[v],L!==T&&(!D||D(L))&&(!S||S(T))&&(L=T,A[v]=L)),L}s(PA,"setValue");function vU(A,v,T){var S;return A?(S=A[v],!S&&re(S)&&(S=Q(T)?{}:T,A[v]=S)):S=Q(T)?{}:T,S}s(vU,"getSetValue");function Ase(A,v){var T=null,S=null;return Qe(A)?T=A:S=A,function(){var D=arguments;if(T&&(S=T()),S)return S[v][F5](S,D)}}s(Ase,"_createProxyFunction");function Bw(A,v,T,S,D){A&&v&&T&&(D!==!1||Q(A[v]))&&(A[v]=Ase(T,S))}s(Bw,"proxyFunctionAs");function g8(A,v,T,S){return A&&v&&ke(A)&&tt(T)&&jr(T,function(D){he(D)&&Bw(A,D,v,D,S)}),A}s(g8,"proxyFunctions");function yse(A){return function(){function v(){var T=this;A&&oe(A,function(S,D){T[S]=D})}return s(v,"class_1"),v}()}s(yse,"createClassFromInterface");function A8(A){return A&&ft&&(A=o8(ft({},A))),A}s(A8,"optimizeObject");function xU(A,v,T,S,D,L){var q=arguments,Z=q[0]||{},ae=q[ii],Ce=!1,Te=1;for(ae>0&&St(Z)&&(Ce=Z,Z=q[Te]||{},Te++),ke(Z)||(Z={});Te<ae;Te++){var Le=q[Te],Ke=tt(Le),Me=ke(Le);for(var je in Le){var ut=Ke&&je in Le||Me&&nt(Le,je);if(ut){var rt=Le[je],Ct=void 0;if(Ce&&rt&&((Ct=tt(rt))||pd(rt))){var Mt=Z[je];Ct?tt(Mt)||(Mt=[]):pd(Mt)||(Mt={}),rt=xU(Ce,Mt,rt)}rt!==void 0&&(Z[je]=rt)}}}return Z}s(xU,"objExtend");function rk(A){try{return A.responseText}catch{}return null}s(rk,"getResponseText");function bU(A,v){return A?"XDomainRequest,Response:"+rk(A)||"":v}s(bU,"formatErrorMessageXdr");function nk(A,v){return A?"XMLHttpRequest,Status:"+A[Sw]+",Response:"+rk(A)||A.response||"":v}s(nk,"formatErrorMessageXhr");function IU(A,v){return v&&(ht(v)?A=[v].concat(A):tt(v)&&(A=v.concat(A))),A}s(IU,"prependTransports");var y8="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Dw="withCredentials",Pp="timeout";function C8(A,v,T,S,D,L){S===void 0&&(S=!1),D===void 0&&(D=!1);function q(ae,Ce,Te){try{ae[Ce]=Te}catch{}}s(q,"_wrapSetXhrProp");var Z=new XMLHttpRequest;return S&&q(Z,y8,S),T&&q(Z,Dw,T),Z.open(A,v,!D),T&&q(Z,Dw,T),!D&&L&&q(Z,Pp,L),Z}s(C8,"openXhr");function TU(A){var v={};if(he(A)){var T=so(A)[SA](/[\r\n]+/);jr(T,function(S){if(S){var D=S.indexOf(": ");if(D!==-1){var L=so(S.substring(0,D))[Xv](),q=so(S.substring(D+1));v[L]=q}else v[so(S)]=1}})}return v}s(TU,"convertAllHeadersToMap");function BA(A,v,T){if(!A[T]&&v&&v.getResponseHeader){var S=v.getResponseHeader(T);S&&(A[T]=so(S))}return A}s(BA,"_appendHeader");var Sn="kill-duration",hx="kill-duration-seconds",m1="time-delta-millis";function h1(A,v){var T={};return A[c8]?T=TU(A[c8]()):v&&(T=BA(T,A,m1),T=BA(T,A,Sn),T=BA(T,A,hx)),T}s(h1,"_getAllResponseHeaders");var E8="documentMode",Nw="location",gx="console",ik="JSON",v8="crypto",ok="msCrypto",Ax="msie",g1="trident/",x8="XMLHttpRequest",sf=null,yx=null,Bp=!1,Ru=null,Cx=null;function Lw(A,v){var T=!1;if(A){try{if(T=v in A,!T){var S=A[Iw];S&&(T=v in S)}}catch{}if(!T)try{var D=new A;T=!Q(D[v])}catch{}}return T}s(Lw,"_hasProperty");function Ex(A){if(A&&Bp){var v=Ba("__mockLocation");if(v)return v}return typeof location===nU&&location?location:Ba(Nw)}s(Ex,"getLocation");function Mw(){return typeof console!==iU?console:Ba(gx)}s(Mw,"getConsole");function vx(){return!!(typeof JSON===nU&&JSON||Ba(ik)!==null)}s(vx,"hasJSON");function hd(){return vx()?JSON||Ba(ik):null}s(hd,"getJSON");function sk(){return Ba(v8)}s(sk,"getCrypto");function ak(){return Ba(ok)}s(ak,"getMsCrypto");function f0(){var A=mA();if(A&&(A[H5]!==yx||sf===null)){yx=A[H5];var v=(yx||_i)[Xv]();sf=pl(v,Ax)||pl(v,g1)}return sf}s(f0,"isIE");function xx(A){if(A===void 0&&(A=null),!A){var v=mA()||{};A=v?(v.userAgent||_i)[Xv]():_i}var T=(A||_i)[Xv]();if(pl(T,Ax)){var S=Mv()||{};return _e(parseInt(T[SA](Ax)[1]),S[E8]||0)}else if(pl(T,g1)){var D=parseInt(T[SA](g1)[1]);if(D)return D+4}return null}s(xx,"getIEVersion");function DA(A){return(Cx===null||A===!1)&&(Cx=zoe()&&!!mA().sendBeacon),Cx}s(DA,"isBeaconsSupported");function Fw(A){var v=!1;try{v=!!Ba("fetch");var T=Ba("Request");v&&A&&T&&(v=Lw(T,"keepalive"))}catch{}return v}s(Fw,"isFetchSupported");function b8(){return Ru===null&&(Ru=typeof XDomainRequest!==iU,Ru&&I8()&&(Ru=Ru&&!Lw(Ba(x8),"withCredentials"))),Ru}s(b8,"useXDomainRequest");function I8(){var A=!1;try{var v=Ba(x8);A=!!v}catch{}return A}s(I8,"isXhrSupported");var Vc=4294967296,Dp=4294967295,ck=123456789,T8=987654321,Th=!1,af=ck,bx=T8;function w8(A){A<0&&(A>>>=0),af=ck+A&Dp,bx=T8-A&Dp,Th=!0}s(w8,"_mwcSeed");function wU(){try{var A=yA()&2147483647;w8((Math.random()*Vc^A)+A)}catch{}}s(wU,"_autoSeedMwc");function _8(A){var v=0,T=sk()||ak();return T&&T.getRandomValues&&(v=T.getRandomValues(new Uint32Array(1))[0]&Dp),v===0&&f0()&&(Th||wU(),v=_U()&Dp),v===0&&(v=e1(Vc*Math.random()|0)),A||(v>>>=0),v}s(_8,"random32");function _U(A){bx=36969*(bx&65535)+(bx>>16)&Dp,af=18e3*(af&65535)+(af>>16)&Dp;var v=(bx<<16)+(af&65535)>>>0&Dp|0;return A||(v>>>=0),v}s(_U,"mwcRandom32");function Cse(A){A===void 0&&(A=22);for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=_8()>>>0,S=0,D=_i;D[ii]<A;)S++,D+=v.charAt(T&63),T>>>=6,S===5&&(T=(_8()<<2&4294967295|T&3)>>>0,S=0);return D}s(Cse,"newId");var Ix="3.3.6",Ese="."+Cse(6),vse=0;function SU(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(SU,"_canAcceptData");function RU(A,v){var T=v[A.id];if(!T){T={};try{SU(v)&&Ye(v,A.id,{e:!1,v:T})}catch{}}return T}s(RU,"_getCache");function wh(A,v){return v===void 0&&(v=!1),mx(A+vse+++(v?"."+Ix:_i)+Ese)}s(wh,"createUniqueNamespace");function kU(A){var v={id:wh("_aiData-"+(A||_i)+"."+Ix),accept:s(function(T){return SU(T)},"accept"),get:s(function(T,S,D,L){var q=T[v.id];return q?q[mx(S)]:(L&&(q=RU(v,T),q[mx(S)]=D),D)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return v}s(kU,"createElmNodeData");function Tx(A){return A&&ke(A)&&(A.isVal||A.fb||nt(A,"v")||nt(A,"mrg")||nt(A,"ref")||A.set)}s(Tx,"_isConfigDefaults");function PU(A,v,T){var S,D=T.dfVal||ne;if(v&&T.fb){var L=T.fb;tt(L)||(L=[L]);for(var q=0;q<L[ii];q++){var Z=L[q],ae=v[Z];if(D(ae)?S=ae:A&&(ae=A.cfg[Z],D(ae)&&(S=ae),A.set(A.cfg,qt(Z),ae)),D(S))break}}return!D(S)&&D(T.v)&&(S=T.v),S}s(PU,"_getDefault");function S8(A,v,T){var S=T;if(T&&Tx(T)&&(S=PU(A,v,T)),S){Tx(S)&&(S=S8(A,v,S));var D;tt(S)?(D=[],D[ii]=S[ii]):pd(S)&&(D={}),D&&(oe(S,function(L,q){q&&Tx(q)&&(q=S8(A,v,q)),D[L]=q}),S=D)}return S}s(S8,"_resolveDefaultValue");function R8(A,v,T,S){var D,L,q,Z=S,ae,Ce,Te,Le;Tx(Z)?(D=Z.isVal,L=Z.set,Te=Z.rdOnly,Le=Z.blkVal,ae=Z.mrg,Ce=Z.ref,!Ce&&Q(Ce)&&(Ce=!!ae),q=PU(A,v,Z)):q=S,Le&&A.blkVal(v,T);var Ke,Me=!0,je=v[T];(je||!re(je))&&(Ke=je,Me=!1,D&&Ke!==q&&!D(Ke)&&(Ke=q,Me=!0),L&&(Ke=L(Ke,q,v),Me=Ke===q)),Me?q?Ke=S8(A,v,q):Ke=q:(pd(Ke)||tt(q))&&ae&&q&&(pd(q)||tt(q))&&oe(q,function(ut,rt){R8(A,Ke,ut,rt)}),A.set(v,T,Ke),Ce&&A.ref(v,T),Te&&A.rdOnly(v,T)}s(R8,"_applyDefaultValue");var NA=hw("[[ai_dynCfg_1]]"),BU=hw("[[ai_blkDynCfg_1]]"),DU=hw("[[ai_frcDynCfg_1]]");function NU(A){if(A){var v;if(tt(A)?(v=[],v[ii]=A[ii]):pd(A)&&(v={}),v)return oe(A,function(T,S){v[T]=NU(S)}),v}return A}s(NU,"_cfgDeepCopy");function xse(A){if(A){var v=A[NA]||A;if(v.cfg&&(v.cfg===A||v.cfg[NA]===v))return v}return null}s(xse,"getDynamicConfigHandler");function bse(A){if(A&&(pd(A)||tt(A)))try{A[BU]=!0}catch{}return A}s(bse,"blockDynamicConversion");function k8(A,v,T){var S=!1;return T&&!A[v.blkVal]&&(S=T[DU],!S&&!T[BU]&&(S=pd(T)||tt(T))),S}s(k8,"_canMakeDynamic");function wx(A){en("InvalidAccess:"+A)}s(wx,"throwInvalidAccess");var Ise=["push","pop","shift","unshift","splice"],Ow=s(function(A,v,T,S){A&&A[s1](3,108,"".concat(T," [").concat(v,"] failed - ")+Ft(S))},"_throwDynamicError");function LA(A,v,T){tt(v)&&jr(Ise,function(S){var D=v[S];v[S]=function(){for(var L=[],q=0;q<arguments.length;q++)L[q]=arguments[q];var Z=D[F5](this,L);return Rx(A,v,T,"Patching"),Z}})}s(LA,"_patchArray");function p0(A,v){var T=Ue(A,v);return T&&T.get}s(p0,"_getOwnPropGetter");function LU(A,v,T,S){var D={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(fd(D.h,Ce)===-1&&D.h[ao](Ce),A.trk(Ce,D))},"trk"),clr:s(function(Ce){var Te=fd(D.h,Ce);Te!==-1&&D.h[ex](Te,1)},"clr")},L=!0,q=!1;function Z(){L&&(q=q||k8(Z,A,S),S&&!S[NA]&&q&&(S=Rx(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&D.trk(Ce),S}s(Z,"_getProperty"),Z[A.prop]={chng:s(function(){A.add(D)},"chng")};function ae(Ce){if(S!==Ce){Z[A.ro]&&!A.upd&&wx("["+T+"] is read-only:"+Ft(v)),L&&(q=q||k8(Z,A,S),L=!1);var Te=q&&Z[A.rf];if(q)if(Te){oe(S,function(Ke){S[Ke]=Ce?Ce[Ke]:nf});try{oe(Ce,function(Ke,Me){_x(A,S,Ke,Me)}),Ce=S}catch(Ke){Ow((A.hdlr||{})[za],T,"Assigning",Ke),q=!1}}else S&&S[NA]&&oe(S,function(Ke){var Me=p0(S,Ke);if(Me){var je=Me[A.prop];je&&je.chng()}});if(Ce!==S){var Le=Ce&&k8(Z,A,Ce);!Te&&Le&&(Ce=Rx(A,Ce,T,"Converting")),S=Ce,q=Le}A.add(D)}}s(ae,"_setProperty"),Ye(v,D.n,{g:Z,s:ae})}s(LU,"_createDynamicProperty");function _x(A,v,T,S){if(v){var D=p0(v,T),L=D&&!!D[A.prop];L?v[T]=S:LU(A,v,T,S)}return v}s(_x,"_setDynamicProperty");function Sx(A,v,T,S){if(v){var D=p0(v,T),L=D&&!!D[A.prop],q=S&&S[0],Z=S&&S[1],ae=S&&S[2];if(!L){if(ae)try{bse(v)}catch(Ce){Ow((A.hdlr||{})[za],T,"Blocking",Ce)}try{_x(A,v,T,v[T]),D=p0(v,T)}catch(Ce){Ow((A.hdlr||{})[za],T,"State",Ce)}}q&&(D[A.rf]=q),Z&&(D[A.ro]=Z),ae&&(D[A.blkVal]=!0)}return v}s(Sx,"_setDynamicPropertyState");function Rx(A,v,T,S){try{oe(v,function(D,L){_x(A,v,D,L)}),v[NA]||(xe(v,NA,{get:s(function(){return A.hdlr},"get")}),LA(A,v,T))}catch(D){Ow((A.hdlr||{})[za],T,S,D)}return v}s(Rx,"_makeDynamicObject");var Qw="[[ai_",Uw="]]";function Tse(A){var v=XC(Qw+"get"+A.uid+Uw),T=XC(Qw+"ro"+A.uid+Uw),S=XC(Qw+"rf"+A.uid+Uw),D=XC(Qw+"blkVal"+A.uid+Uw),L=XC(Qw+"dtl"+A.uid+Uw),q=null,Z=null,ae;function Ce(Me,je){var ut=ae.act;try{ae.act=Me,Me&&Me[L]&&(jr(Me[L],function(Ct){Ct.clr(Me)}),Me[L]=[]),je({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(Ct){var rt=A[za];throw rt&&rt[s1](1,107,Ft(Ct)),Ct}finally{ae.act=ut||null}}s(Ce,"_useHandler");function Te(){if(q){var Me=q;q=null,Z&&Z[tx](),Z=null;var je=[];if(jr(Me,function(ut){if(ut&&(ut[L]&&(jr(ut[L],function(rt){rt.clr(ut)}),ut[L]=null),ut.fn))try{Ce(ut,ut.fn)}catch(rt){je[ao](rt)}}),q)try{Te()}catch(ut){je[ao](ut)}je[ii]>0&&d8("Watcher error(s): ",je)}}s(Te,"_notifyWatchers");function Le(Me){if(Me&&Me.h[ii]>0){q||(q=[]),Z||(Z=vA(function(){Z=null,Te()},0));for(var je=0;je<Me.h[ii];je++){var ut=Me.h[je];ut&&fd(q,ut)===-1&&q[ao](ut)}}}s(Le,"_addWatcher");function Ke(Me,je){if(Me){var ut=Me[L]=Me[L]||[];fd(ut,je)===-1&&ut[ao](je)}}return s(Ke,"_trackHandler"),ae={prop:v,ro:T,rf:S,blkVal:D,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ke},ae}s(Tse,"_createState");function lk(A,v){var T={fn:v,rm:s(function(){T.fn=null,A=null,v=null},"rm")};return Ye(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,v),T}s(lk,"_createAndUseHandler");function MU(A,v,T){var S=xse(v);if(S)return S;var D=wh("dyncfg",!0),L=v&&T!==!1?v:NU(v),q;function Z(){q.notify()}s(Z,"_notifyWatchers");function ae(rt,Ct,Mt){try{rt=_x(q,rt,Ct,Mt)}catch(Yt){Ow(A,Ct,"Setting value",Yt)}return rt[Ct]}s(ae,"_setValue");function Ce(rt){return lk(q,rt)}s(Ce,"_watch");function Te(rt,Ct){q.use(null,function(Mt){var Yt=q.upd;try{Q(Ct)||(q.upd=Ct),rt(Mt)}finally{q.upd=Yt}})}s(Te,"_block");function Le(rt,Ct){var Mt;return Sx(q,rt,Ct,(Mt={},Mt[0]=!0,Mt))[Ct]}s(Le,"_ref");function Ke(rt,Ct){var Mt;return Sx(q,rt,Ct,(Mt={},Mt[1]=!0,Mt))[Ct]}s(Ke,"_rdOnly");function Me(rt,Ct){var Mt;return Sx(q,rt,Ct,(Mt={},Mt[2]=!0,Mt))[Ct]}s(Me,"_blkPropValue");function je(rt,Ct){return Ct&&oe(Ct,function(Mt,Yt){R8(ut,rt,Mt,Yt)}),rt}s(je,"_applyDefaults");var ut={uid:null,cfg:L,logger:A,notify:Z,set:ae,setDf:je,watch:Ce,ref:Le,rdOnly:Ke,blkVal:Me,_block:Te};return Ye(ut,"uid",{c:!1,e:!1,w:!1,v:D}),q=Tse(ut),Rx(q,L,"config","Creating"),ut}s(MU,"_createDynamicHandler");function FU(A,v){A?(A[Zv](v),A[s1](2,108,v)):wx(v)}s(FU,"_logInvalidAccess");function cf(A,v,T,S){var D=MU(T,A||{},S);return v&&D.setDf(D.cfg,v),D}s(cf,"createDynamicConfig");function _h(A,v,T){var S=A[NA]||A;return S.cfg&&(S.cfg===A||S.cfg[NA]===S)?S[Eh](v):(FU(T,EU+Ft(A)),cf(A,null,T)[Eh](v))}s(_h,"onConfigChange");function kx(A,v){if(A&&A[a1])return A[a1](v)}s(kx,"runTargetUnload");function OU(A,v,T){var S;return T||(S=lx(function(D){T=D})),A&&tse(A)>0?rf(kx(A[0],v),function(){OU(Qv(A,1),v,T)}):T(),S}s(OU,"doUnloadAll");var wse=500,QU="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function _se(A,v,T){return!A&&re(A)?v:St(A)?A:qt(A)[Xv]()==="true"}s(_se,"_stringToBoolOrDefault");function Sse(A){return{mrg:!0,v:A}}s(Sse,"cfgDfMerge");function P8(A,v,T){return{fb:T,isVal:A,v}}s(P8,"cfgDfValidate");function Np(A,v){return{fb:v,set:_se,v:!!A}}s(Np,"cfgDfBoolean");var uk=[fx,px,J5,p1],dk=null,fk;function Rse(A,v){return function(){var T=arguments,S=UU(v);if(S){var D=S.listener;D&&D[A]&&D[A][F5](D,T)}}}s(Rse,"_listenerProxyFunc");function kse(){var A=Ba("Microsoft");return A&&(dk=A.ApplicationInsights),dk}s(kse,"_getExtensionNamespace");function UU(A){var v=dk;return!v&&A.disableDbgExt!==!0&&(v=dk||kse()),v?v.ChromeDbgExt:null}s(UU,"getDebugExt");function Pse(A){if(!fk){fk={};for(var v=0;v<uk[ii];v++)fk[uk[v]]=Rse(uk[v],A)}return fk}s(Pse,"getDebugListener");var Px,qU="warnToConsole",Bse="AI (Internal): ",Dse="AI: ",Nse="AITR_",HU={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Bx=(Px={},Px[0]=null,Px[1]="errorToConsole",Px[2]=qU,Px[3]="debugToConsole",Px);function gd(A){return A?'"'+A[RA](/\"/g,_i)+'"':_i}s(gd,"_sanitizeDiagnosticText");function qw(A,v){var T=Mw();if(T){var S="log";T[A]&&(S=A),Qe(T[S])&&T[S](v)}}s(qw,"_logToConsole");var pk=function(){function A(v,T,S,D){S===void 0&&(S=!1);var L=this;L[U5]=v,L[l1]=(S?Dse:Bse)+v;var q=_i;vx()&&(q=hd().stringify(D));var Z=(T?" message:"+gd(T):_i)+(D?" props:"+gd(q):_i);L[l1]+=Z}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function Hw(A,v){return(A||{})[za]||new Ww(v)}s(Hw,"safeGetLogger");var Ww=function(){function A(v){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},D,L,q,Z,ae;jl(A,this,function(Ce){ae=Le(v||{}),Ce.consoleLoggingLevel=function(){return D},Ce[s1]=function(je,ut,rt,Ct,Mt){Mt===void 0&&(Mt=!1);var Yt=new pk(ut,rt,Mt,Ct);if(Z)throw Ft(Yt);var yr=Bx[je]||qU;if(Q(Yt[l1]))Me("throw"+(je===1?"Critical":"Warning"),Yt);else{if(Mt){var Kn=+Yt[U5];!S[Kn]&&D>=je&&(Ce[yr](Yt[l1]),S[Kn]=!0)}else D>=je&&Ce[yr](Yt[l1]);Te(je,Yt)}},Ce.debugToConsole=function(je){qw("debug",je),Me("warning",je)},Ce[Zv]=function(je){qw("warn",je),Me("warning",je)},Ce.errorToConsole=function(je){qw("error",je),Me("error",je)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[a1]=function(je){ae&&ae.rm(),ae=null};function Te(je,ut){if(!Ke()){var rt=!0,Ct=Nse+ut[U5];if(S[Ct]?rt=!1:S[Ct]=!0,rt&&(je<=L&&(Ce.queue[ao](ut),T++,Me(je===1?"error":"warn",ut)),T===q)){var Mt="Internal events throttle limit per PageView reached for this app.",Yt=new pk(23,Mt,!1);Ce.queue[ao](Yt),je===1?Ce.errorToConsole(Mt):Ce[Zv](Mt)}}}s(Te,"_logInternalMessage");function Le(je){return _h(cf(je,HU,Ce).cfg,function(ut){var rt=ut.cfg;D=rt[cU],L=rt.loggingLevelTelemetry,q=rt.maxMessageLimit,Z=rt.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ke(){return T>=q}s(Ke,"_areInternalMessagesThrottled");function Me(je,ut){var rt=UU(v||{});rt&&rt[Rp]&&rt[Rp](je,ut)}s(Me,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function B8(A){return A||new Ww}s(B8,"_getLogger");function Rr(A,v,T,S,D,L){L===void 0&&(L=!1),B8(A)[s1](v,T,S,D,L)}s(Rr,"_throwInternal");function mk(A,v){B8(A)[Zv](v)}s(mk,"_warnToConsole");var Gw,MA,WU="toGMTString",GU="toUTCString",hk="cookie",Sh="expires",jU="isCookieUseDisabled",gk="disableCookiesUsage",VU="_ckMgr",Ak=null,Dx=null,yk=null,Lp,$U={},zU={},YU=(Gw={cookieCfg:Sse((MA={},MA[Z5]={fb:"cookieDomain",dfVal:tk},MA.path={fb:"cookiePath",dfVal:tk},MA.enabled=nf,MA.ignoreCookies=nf,MA.blockedCookies=nf,MA)),cookieDomain:nf,cookiePath:nf},Gw[gk]=nf,Gw);function D8(){!Lp&&(Lp=Wn(function(){return Mv()}))}s(D8,"_getDoc");function jw(A){return A?A.isEnabled():!0}s(jw,"_isMgrEnabled");function N8(A,v){return v&&A&&tt(A.ignoreCookies)?fd(A.ignoreCookies,v)!==-1:!1}s(N8,"_isIgnoredCookie");function Lse(A,v){return v&&A&&tt(A.blockedCookies)&&fd(A.blockedCookies,v)!==-1?!0:N8(A,v)}s(Lse,"_isBlockedCookie");function L8(A,v){var T=v[_p];if(re(T)){var S=void 0;Q(A[jU])||(S=!A[jU]),Q(A[gk])||(S=!A[gk]),T=S}return T}s(L8,"_isCfgEnabled");function Mse(A,v){var T,S,D,L,q,Z,ae,Ce;A=cf(A||zU,null,v).cfg,L=_h(A,function(Le){Le.setDf(Le.cfg,YU),T=Le.ref(Le.cfg,"cookieCfg"),S=T[ek]||"/",D=T[Z5],q=L8(A,T)!==!1,Z=T.getCookie||Fse,ae=T.setCookie||Nx,Ce=T.delCookie||Nx},v);var Te={isEnabled:s(function(){var Le=L8(A,T)!==!1&&q&&KU(v),Ke=zU[VU];return Le&&Ke&&Te!==Ke&&(Le=jw(Ke)),Le},"isEnabled"),setEnabled:s(function(Le){q=Le!==!1,T[_p]=Le},"setEnabled"),set:s(function(Le,Ke,Me,je,ut){var rt=!1;if(jw(Te)&&!Lse(T,Le)){var Ct={},Mt=so(Ke||_i),Yt=Ah(Mt,";");if(Yt!==-1&&(Mt=so(O(Ke,Yt)),Ct=M8(ge(Ke,Yt+1))),PA(Ct,Z5,je||D,le,Q),!re(Me)){var yr=f0();if(Q(Ct[Sh])){var Kn=yA(),Di=Kn+Me*1e3;if(Di>0){var Ni=new Date;Ni.setTime(Di),PA(Ct,Sh,JU(Ni,yr?WU:GU)||JU(Ni,yr?WU:GU)||_i,le)}}yr||PA(Ct,"max-age",_i+Me,null,Q)}var Bo=Ex();Bo&&Bo.protocol==="https:"&&(PA(Ct,"secure",null,null,Q),Dx===null&&(Dx=!Ose((mA()||{})[H5])),Dx&&PA(Ct,"SameSite","None",null,Q)),PA(Ct,ek,ut||S,null,Q),ae(Le,XU(Mt,Ct)),rt=!0}return rt},"set"),get:s(function(Le){var Ke=_i;return jw(Te)&&!N8(T,Le)&&(Ke=Z(Le)),Ke},"get"),del:s(function(Le,Ke){var Me=!1;return jw(Te)&&(Me=Te.purge(Le,Ke)),Me},"del"),purge:s(function(Le,Ke){var Me,je=!1;if(KU(v)){var ut=(Me={},Me[ek]=Ke||"/",Me[Sh]="Thu, 01 Jan 1970 00:00:01 GMT",Me);f0()||(ut["max-age"]="0"),Ce(Le,XU(_i,ut)),je=!0}return je},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[VU]=Te,Te}s(Mse,"createCookieMgr");function KU(A){if(Ak===null){Ak=!1,!Lp&&D8();try{var v=Lp.v||{};Ak=v[hk]!==void 0}catch(T){Rr(A,2,68,"Cannot access document.cookie - "+jc(T),{exception:Ft(T)})}}return Ak}s(KU,"areCookiesSupported");function M8(A){var v={};if(A&&A[ii]){var T=so(A)[SA](";");jr(T,function(S){if(S=so(S||_i),S){var D=Ah(S,"=");D===-1?v[S]=null:v[so(O(S,D))]=so(ge(S,D+1))}})}return v}s(M8,"_extractParts");function JU(A,v){return Qe(A[v])?A[v]():null}s(JU,"_formatDate");function XU(A,v){var T=A||_i;return oe(v,function(S,D){T+="; "+S+(re(D)?_i:"="+D)}),T}s(XU,"_formatCookieValue");function Fse(A){var v=_i;if(!Lp&&D8(),Lp.v){var T=Lp.v[hk]||_i;yk!==T&&($U=M8(T),yk=T),v=so($U[A]||_i)}return v}s(Fse,"_getCookieValue");function Nx(A,v){!Lp&&D8(),Lp.v&&(Lp.v[hk]=A+"="+v)}s(Nx,"_setCookieValue");function Ose(A){return he(A)?!!(pl(A,"CPU iPhone OS 12")||pl(A,"iPad; CPU OS 12")||pl(A,"Macintosh; Intel Mac OS X 10_14")&&pl(A,"Version/")&&pl(A,"Safari")||pl(A,"Macintosh; Intel Mac OS X 10_14")&&rU(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||pl(A,"Chrome/5")||pl(A,"Chrome/6")||pl(A,"UnrealEngine")&&!pl(A,"Chrome")||pl(A,"UCBrowser/12")||pl(A,"UCBrowser/11")):!1}s(Ose,"uaDisallowsSameSiteNone");var F8={perfEvtsSendAll:!1};function Qse(A){A.h=null;var v=A.cb;A.cb=[],jr(v,function(T){Y(T.fn,[T.arg])})}s(Qse,"_runScheduledListeners");function FA(A,v,T,S){jr(A,function(D){D&&D[v]&&(T?(T.cb[ao]({fn:S,arg:D}),T.h=T.h||vA(Qse,0,T)):Y(S,[D]))})}s(FA,"_runListeners");var Use=function(){function A(v){this.listeners=[];var T,S,D=[],L={h:null,cb:[]},q=cf(v,F8);S=q[Eh](function(Z){T=!!Z.cfg.perfEvtsSendAll}),jl(A,this,function(Z){Ye(Z,"listeners",{g:s(function(){return D},"g")}),Z[O5]=function(ae){D[ao](ae)},Z[_w]=function(ae){for(var Ce=fd(D,ae);Ce>-1;)D[ex](Ce,1),Ce=fd(D,ae)},Z[fx]=function(ae){FA(D,fx,L,function(Ce){Ce[fx](ae)})},Z[px]=function(ae,Ce){FA(D,px,L,function(Te){Te[px](ae,Ce)})},Z[J5]=function(ae,Ce){FA(D,J5,Ce?L:null,function(Te){Te[J5](ae,Ce)})},Z[p1]=function(ae){ae&&(T||!ae[l8]())&&FA(D,p1,null,function(Ce){ae.isAsync?vA(function(){return Ce[p1](ae)},0):Ce[p1](ae)})},Z[p8]=function(ae){ae&&ae[ii]&&FA(D,p8,L,function(Ce){Ce[p8](ae)})},Z[m8]=function(ae){ae&&ae[sx]&&FA(D,m8,L,function(Ce){Ce[m8](ae)})},Z[X5]=function(ae,Ce){if(ae>0){var Te=Ce||0;FA(D,X5,L,function(Le){Le[X5](ae,Te)})}},Z[a1]=function(ae){var Ce=s(function(){S&&S.rm(),S=null,D=[],L.h&&L.h[tx](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(FA(D,"unload",null,function(Le){var Ke=Le[a1](ae);Ke&&(Te||(Te=[]),Te[ao](Ke))}),Te)return lx(function(Le){return rf(f8(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),Lx="ctx",O8="ParentContextKey",Vw="ChildrenContextKey",qse=null,Ck=function(){function A(v,T,S){var D=this;if(D.start=yA(),D[wA]=v,D.isAsync=S,D[l8]=function(){return!1},Qe(T)){var L;Ye(D,"payload",{g:s(function(){return!L&&Qe(T)&&(L=T(),T=null),L},"g")})}D[kA]=function(q){return q?q===A[O8]||q===A[Vw]?D[q]:(D[Lx]||{})[q]:null},D[u0]=function(q,Z){if(q)if(q===A[O8])D[q]||(D[l8]=function(){return!0}),D[q]=Z;else if(q===A[Vw])D[q]=Z;else{var ae=D[Lx]=D[Lx]||{};ae[q]=Z}},D.complete=function(){var q=0,Z=D[kA](A[Vw]);if(tt(Z))for(var ae=0;ae<Z[ii];ae++){var Ce=Z[ae];Ce&&(q+=Ce.time)}D.time=yA()-D.start,D.exTime=D.time-q,D.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),Hse=function(){function A(v){this.ctx={},jl(A,this,function(T){T.create=function(S,D,L){return new Ck(S,D,L)},T.fire=function(S){S&&(S.complete(),v&&Qe(v[p1])&&v[p1](S))},T[u0]=function(S,D){if(S){var L=T[Lx]=T[Lx]||{};L[S]=D}},T[kA]=function(S){return(T[Lx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),Mp="CoreUtils.doPerf";function Mx(A,v,T,S,D){if(A){var L=A;if(L[kw]&&(L=L[kw]()),L){var q=void 0,Z=L[kA](Mp);try{if(q=L.create(v(),S,D),q){if(Z&&q[u0]&&(q[u0](Ck[O8],Z),Z[kA]&&Z[u0])){var ae=Z[kA](Ck[Vw]);ae||(ae=[],Z[u0](Ck[Vw],ae)),ae[ao](q)}return L[u0](Mp,q),T(q)}}catch(Ce){q&&q[u0]&&q[u0]("exception",Ce)}finally{q&&L.fire(q),L[u0](Mp,Z)}}}return T()}s(Mx,"doPerf");function Ka(){return qse}s(Ka,"getGblPerfMgr");var Ek="00000000000000000000000000000000",Fx="0000000000000000";function vk(A,v,T){return A&&A[ii]===v&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(vk,"_isValid");function OA(A){return vk(A,32,Ek)}s(OA,"isValidTraceId");function A1(A){return vk(A,16,Fx)}s(A1,"isValidSpanId");var $w=kU("plugin");function QA(A){return $w.get(A,"state",{},!0)}s(QA,"_getPluginState");function Q8(A,v){for(var T=[],S=null,D=A[kp](),L;D;){var q=D[nx]();if(q){S&&S[_A]&&q[of]&&S[_A](q),L=QA(q);var Z=!!L[wp];q[wp]&&(Z=q[wp]()),Z||T[ao](q),S=q,D=D[kp]()}}jr(T,function(ae){var Ce=A[Ya]();ae[ww](A.getCfg(),Ce,v,A[kp]()),L=QA(ae),!ae[Ya]&&!L[Ya]&&(L[Ya]=Ce),L[wp]=!0,delete L[Sp]})}s(Q8,"initializePlugins");function U8(A){return A.sort(function(v,T){var S=0;if(T){var D=T[of];v[of]?S=D?v[dx]-T[dx]:1:D&&(S=-1)}else S=v?1:-1;return S})}s(U8,"sortPlugins");function Wse(A){var v={};return{getName:s(function(){return v[wA]},"getName"),setName:s(function(T){A&&A.setName(T),v[wA]=T},"setName"),getTraceId:s(function(){return v.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),OA(T)&&(v.traceId=T)},"setTraceId"),getSpanId:s(function(){return v.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),A1(T)&&(v.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return v[uU]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),v[uU]=T},"setTraceFlags")}}s(Wse,"createDistributedTraceContext");var Gse="TelemetryPluginChain",ZU="_hasRun",q8="_getTelCtx",eq=0;function jse(A,v,T){for(;A;){if(A[nx]()===T)return A;A=A[kp]()}return B([T],v.config||{},v)}s(jse,"_getNextProxyStart");function H8(A,v,T,S){var D=null,L=[];v||(v=cf({},null,T[za])),S!==null&&(D=S?jse(A,T,S):A);var q={_next:ae,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return Hw(T,v.cfg)},"diagLog"),getCfg:s(function(){return v.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!D},"hasNext"),getNext:s(function(){return D},"getNext"),setNext:s(function(Me){D=Me},"setNext"),iterate:Ke,onComplete:Z}};function Z(Me,je){for(var ut=[],rt=2;rt<arguments.length;rt++)ut[rt-2]=arguments[rt];Me&&L[ao]({func:Me,self:Q(je)?q.ctx:je,args:ut})}s(Z,"_addOnComplete");function ae(){var Me=D;if(D=Me?Me[kp]():null,!Me){var je=L;je&&je[ii]>0&&(jr(je,function(ut){try{ut.func.call(ut.self,ut.args)}catch(rt){Rr(T[za],2,73,"Unexpected Exception during onComplete - "+Ft(rt))}}),L=[])}return Me}s(ae,"_moveNext");function Ce(Me,je){var ut=null,rt=v.cfg;if(rt&&Me){var Ct=rt[f1];!Ct&&je&&(Ct={}),rt[f1]=Ct,Ct=v.ref(rt,f1),Ct&&(ut=Ct[Me],!ut&&je&&(ut={}),Ct[Me]=ut,ut=v.ref(Ct,Me))}return ut}s(Ce,"_getExtCfg");function Te(Me,je){var ut=Ce(Me,!0);return je&&oe(je,function(rt,Ct){if(re(ut[rt])){var Mt=v.cfg[rt];(Mt||!re(Mt))&&(ut[rt]=Mt)}R8(v,ut,rt,Ct)}),v.setDf(ut,je)}s(Te,"_resolveExtCfg");function Le(Me,je,ut){ut===void 0&&(ut=!1);var rt,Ct=Ce(Me,!1),Mt=v.cfg;return Ct&&(Ct[je]||!re(Ct[je]))?rt=Ct[je]:(Mt[je]||!re(Mt[je]))&&(rt=Mt[je]),rt||!re(rt)?rt:ut}s(Le,"_getConfig");function Ke(Me){for(var je;je=q._next();){var ut=je[nx]();ut&&Me(ut)}}return s(Ke,"_iterateChain"),q}s(H8,"_createInternalContext");function Ox(A,v,T,S){var D=cf(v),L=H8(A,D,T,S),q=L.ctx;function Z(Ce){var Te=L._next();return Te&&Te[of](Ce,q),!Te}s(Z,"_processNext");function ae(Ce,Te){return Ce===void 0&&(Ce=null),tt(Ce)&&(Ce=B(Ce,D.cfg,T,Te)),Ox(Ce||q[kp](),D.cfg,T,Te)}return s(ae,"_createNew"),q[fl]=Z,q[c1]=ae,q}s(Ox,"createProcessTelemetryContext");function w(A,v,T){var S=cf(v.config),D=H8(A,S,v,T),L=D.ctx;function q(ae){var Ce=D._next();return Ce&&Ce[a1](L,ae),!Ce}s(q,"_processNext");function Z(ae,Ce){return ae===void 0&&(ae=null),tt(ae)&&(ae=B(ae,S.cfg,v,Ce)),w(ae||L[kp](),v,Ce)}return s(Z,"_createNew"),L[fl]=q,L[c1]=Z,L}s(w,"createProcessTelemetryUnloadContext");function R(A,v,T){var S=cf(v.config),D=H8(A,S,v,T),L=D.ctx;function q(ae){return L.iterate(function(Ce){Qe(Ce[vh])&&Ce[vh](L,ae)})}s(q,"_processNext");function Z(ae,Ce){return ae===void 0&&(ae=null),tt(ae)&&(ae=B(ae,S.cfg,v,Ce)),R(ae||L[kp](),v,Ce)}return s(Z,"_createNew"),L[fl]=q,L[c1]=Z,L}s(R,"createProcessTelemetryUpdateContext");function B(A,v,T,S){var D=null,L=!S;if(tt(A)&&A[ii]>0){var q=null;jr(A,function(Z){if(!L&&S===Z&&(L=!0),L&&Z&&Qe(Z[of])){var ae=F(Z,v,T);D||(D=ae),q&&q._setNext(ae),q=ae}})}return S&&!D?B([S],v,T):D}s(B,"createTelemetryProxyChain");function F(A,v,T){var S=null,D=Qe(A[of]),L=Qe(A[_A]),q;A?q=A[TA]+"-"+A[dx]+"-"+eq++:q="Unknown-0-"+eq++;var Z={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ke,_id:q,_setNext:s(function(Me){S=Me},"_setNext")};function ae(){var Me;return A&&Qe(A[q8])&&(Me=A[q8]()),Me||(Me=Ox(Z,v,T)),Me}s(ae,"_getTelCtx");function Ce(Me,je,ut,rt,Ct){var Mt=!1,Yt=A?A[TA]:Gse,yr=Me[ZU];return yr||(yr=Me[ZU]={}),Me.setNext(S),A&&Mx(Me[Ya](),function(){return Yt+":"+ut},function(){yr[q]=!0;try{var Kn=S?S._id:_i;Kn&&(yr[Kn]=!1),Mt=je(Me)}catch(Ni){var Di=S?yr[S._id]:!0;Di&&(Mt=!0),(!S||!Di)&&Rr(Me[Rp](),1,73,"Plugin ["+Yt+"] failed during "+ut+" - "+Ft(Ni)+", run flags: "+Ft(yr))}},rt,Ct),Mt}s(Ce,"_processChain");function Te(Me,je){je=je||ae();function ut(rt){if(!A||!D)return!1;var Ct=QA(A);return Ct[Sp]||Ct[K5]?!1:(L&&A[_A](S),A[of](Me,rt),!0)}s(ut,"_callProcessTelemetry"),Ce(je,ut,"processTelemetry",function(){return{item:Me}},!Me.sync)||je[fl](Me)}s(Te,"_processTelemetry");function Le(Me,je){function ut(){var rt=!1;if(A){var Ct=QA(A),Mt=A[Ya]||Ct[Ya];A&&(!Mt||Mt===Me.core())&&!Ct[Sp]&&(Ct[Ya]=null,Ct[Sp]=!0,Ct[wp]=!1,A[Sp]&&A[Sp](Me,je)===!0&&(rt=!0))}return rt}s(ut,"_callTeardown"),Ce(Me,ut,"unload",function(){},je.isAsync)||Me[fl](je)}s(Le,"_unloadPlugin");function Ke(Me,je){function ut(){var rt=!1;if(A){var Ct=QA(A),Mt=A[Ya]||Ct[Ya];A&&(!Mt||Mt===Me.core())&&!Ct[Sp]&&A[vh]&&A[vh](Me,je)===!0&&(rt=!0)}return rt}s(ut,"_callUpdate"),Ce(Me,ut,"update",function(){},!1)||Me[fl](je)}return s(Ke,"_updatePlugin"),Vt(Z)}s(F,"createTelemetryPluginProxy");function se(){var A=[];function v(S){S&&A[ao](S)}s(v,"_addHandler");function T(S,D){jr(A,function(L){try{L(S,D)}catch(q){Rr(S[Rp](),2,73,"Unexpected error calling unload handler - "+Ft(q))}}),A=[]}return s(T,"_runHandlers"),{add:v,run:T}}s(se,"createUnloadHandlerContainer");function be(){var A=[];function v(S){var D=A;A=[],jr(D,function(L){try{(L.rm||L.remove).call(L)}catch(q){Rr(S,2,73,"Unloading:"+Ft(q))}})}s(v,"_doUnload");function T(S){S&&Ov(A,S)}return s(T,"_addHook"),{run:v,add:T}}s(be,"createUnloadHookContainer");var we,Oe="getPlugin",Ze=(we={},we[f1]={isVal:tk,v:{}},we),gt=function(){function A(){var v=this,T,S,D,L,q;Ce(),jl(A,v,function(Te){Te[ww]=function(Le,Ke,Me,je){ae(Le,Ke,je),T=!0},Te[Sp]=function(Le,Ke){var Me=Te[Ya];if(!Me||Le&&Me!==Le[Ya]())return;var je,ut=!1,rt=Le||w(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0,isAsync:!1};function Mt(){ut||(ut=!0,L.run(rt,Ke),q.run(rt[Rp]()),je===!0&&rt[fl](Ct),Ce())}return s(Mt,"_unloadCallback"),!Te[q5]||Te[q5](rt,Ct,Mt)!==!0?Mt():je=!0,je},Te[vh]=function(Le,Ke){var Me=Te[Ya];if(!Me||Le&&Me!==Le[Ya]())return;var je,ut=!1,rt=Le||R(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0};function Mt(){ut||(ut=!0,ae(rt.getCfg(),rt.core(),rt[kp]()))}return s(Mt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(rt,Ct,Mt)!==!0?Mt():je=!0,je},Bw(Te,"_addUnloadCb",function(){return L},"add"),Bw(Te,"_addHook",function(){return q},"add"),Ye(Te,"_unloadHooks",{g:s(function(){return q},"g")})}),v[Rp]=function(Te){return Z(Te)[Rp]()},v[wp]=function(){return T},v.setInitialized=function(Te){T=Te},v[_A]=function(Te){D=Te},v[fl]=function(Te,Le){Le?Le[fl](Te):D&&Qe(D[of])&&D[of](Te,null)},v._getTelCtx=Z;function Z(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ke=S||Ox(null,{},v[Ya]);D&&D[Oe]?Le=Ke[c1](null,D[Oe]):Le=Ke[c1](null,D)}return Le}s(Z,"_getTelCtx");function ae(Te,Le,Ke){cf(Te,Ze,Hw(Le)),!Ke&&Le&&(Ke=Le[ix]()[kp]());var Me=D;D&&D[Oe]&&(Me=D[Oe]()),v[Ya]=Le,S=Ox(Ke,Te,Le,Me)}s(ae,"_setDefaults");function Ce(){T=!1,v[Ya]=null,S=null,D=null,q=be(),L=se()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function sr(A,v,T){var S={id:v,fn:T};Ov(A,S);var D={remove:s(function(){jr(A,function(L,q){if(L.id===S.id)return A[ex](q,1),-1})},"remove")};return D}s(sr,"_addInitializer");function Rn(A,v,T){for(var S=!1,D=A[ii],L=0;L<D;++L){var q=A[L];if(q)try{if(q.fn[F5](null,[v])===!1){S=!0;break}}catch(Z){Rr(T,2,64,"Telemetry initializer failed: "+jc(Z),{exception:Ft(Z)},!0)}}return!S}s(Rn,"_runInitializers");var Yn=function(A){Tw(v,A);function v(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,D;L(),jl(v,T,function(q,Z){q.addTelemetryInitializer=function(ae){return sr(D,S++,ae)},q[of]=function(ae,Ce){Rn(D,ae,Ce?Ce[Rp]():q[Rp]())&&q[fl](ae,Ce)},q[q5]=function(){L()}});function L(){S=0,D=[]}return s(L,"_initDefaults"),T}return s(v,"TelemetryInitializerPlugin"),v.__ieDyn=1,v}(gt),fr,wr="Plugins must provide initialize method",Gn="_notificationManager",kn="SDK is still unloading...",Si="SDK is not initialized",bo=100,ji=5e4,Ac=Zt((fr={cookieCfg:{}},fr[ux]={rdOnly:!0,ref:!0,v:[]},fr[Ih]={rdOnly:!0,ref:!0,v:[]},fr[f1]={ref:!0,v:{}},fr[d0]=nf,fr.loggingLevelConsole=0,fr.diagnosticLogInterval=nf,fr));function Qx(A,v){return new Hse(v)}s(Qx,"_createPerfManager");function zw(A,v,T){var S=[],D=[],L={};return jr(T,function(q){(re(q)||re(q[ww]))&&Yr(wr);var Z=q[dx],ae=q[TA];q&&Z&&(re(L[Z])?L[Z]=ae:mk(A,"Two extensions have same priority #"+Z+" - "+L[Z]+", "+ae)),!Z||Z<v?S[ao](q):D[ao](q)}),{core:S,channels:D}}s(zw,"_validateExtensions");function W8(A,v){var T=!1;return jr(v,function(S){if(S===A)return T=!0,-1}),T}s(W8,"_isPluginPresent");function xk(A,v,T,S){T&&oe(T,function(D,L){S&&pd(L)&&pd(v[D])&&xk(A,v[D],L,S),S&&pd(L)&&pd(v[D])?xk(A,v[D],L,S):A.set(v,D,L)})}s(xk,"_deepMergeConfig");function tq(A,v){var T=null,S=-1;return jr(A,function(D,L){if(D.w===v)return T=D,S=L,-1}),{i:S,l:T}}s(tq,"_findWatcher");function Vse(A,v){var T=tq(A,v).l;return T||(T={w:v,rm:s(function(){var S=tq(A,v);S.i!==-1&&A[ex](S.i,1)},"rm")},A[ao](T)),T}s(Vse,"_addDelayedCfgListener");function G8(A,v,T){jr(v,function(S){var D=_h(A,S.w,T);delete S.w,S.rm=function(){D.rm()}})}s(G8,"_registerDelayedCfgListener");function rq(A,v,T,S){return v.add(A[Eh](function(D){var L=D.cfg.disableDbgExt;L===!0&&S&&(T[_w](S),S=null),T&&!S&&L!==!0&&(S=Pse(D.cfg),T[O5](S))})),S}s(rq,"_initDebugListener");function nq(A){return Ye({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(nq,"_createUnloadHook");var _t=function(){function A(){var v,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,yr,Kn,Di,Ni,Bo,An,Hr,Li,ea,ss,Ot,Wr,Io;jl(A,this,function(wt){ct(),wt._getDbgPlgTargets=function(){return[Ni,D]},wt[wp]=function(){return T},wt.activeStatus=function(){return Hr},wt._setPendingStatus=function(){Hr=3},wt[ww]=function(pt,hr,Fn,Lr){Me&&Yr(kn),wt[wp]()&&Yr("Core cannot be initialized more than once"),v=cf(pt,Ac,Fn||wt[za],!1),pt=v.cfg,zl(v[Eh](function(Wo){var ks=Wo.cfg,Bu=Hr===3;if(!Bu){ea=ks.initInMemoMaxSize||bo;var lf=ks.instrumentationKey,Ph=ks.endpointUrl;if(re(lf)){Kn=null,Hr=IA.INACTIVE;var Bh="Please provide instrumentation key";T?(Rr(S,1,100,Bh),Ca()):Yr(Bh);return}var Lk=[];if(Tt(lf)?(Lk[ao](lf),Kn=null):Kn=lf,Tt(Ph)?(Lk[ao](Ph),Li=null):Li=Ph,Lk[ii]){ss=!1,Hr=3;var u6=tk(ks.initTimeOut)?ks.initTimeOut:ji,Iae=md(Lk);vA(function(){ss||Pn()},u6),rf(Iae,function(Kx){try{if(ss)return;if(!Kx.rejected){var Jx=Kx[rx];if(Jx&&Jx[ii]){var _q=Jx[0];if(Kn=_q&&_q[rx],Jx[ii]>1){var Sq=Jx[1];Li=Sq&&Sq[rx]}}Kn&&(pt.instrumentationKey=Kn,pt.endpointUrl=Li)}Pn()}catch{ss||Pn()}})}else Pn();var Mk=Wo.ref(Wo.cfg,f1);oe(Mk,function(Kx){Wo.ref(Mk,Kx)})}})),L=Lr,Yt=rq(v,Mt,L&&wt[l0](),Yt),zx(),wt[za]=Fn;var On=pt[ux];if(Te=[],Te[ao].apply(Te,sU(sU([],hr,!1),On)),Le=pt[Ih],Ea(null),(!Ke||Ke[ii]===0)&&Yr("No "+Ih+" available"),Le&&Le[ii]>1){var Qo=wt[nx]("TeeChannelController");(!Qo||!Qo.plugin)&&Rr(S,1,28,"TeeChannel required")}G8(pt,Di,S),Di=null,T=!0,Hr===IA.ACTIVE&&Ca()},wt.getChannels=function(){var pt=[];return Ke&&jr(Ke,function(hr){pt[ao](hr)}),Vt(pt)},wt.track=function(pt){Mx(wt[kw](),function(){return"AppInsightsCore:track"},function(){pt===null&&(ta(pt),Yr("Invalid telemetry item")),!pt[wA]&&re(pt[wA])&&(ta(pt),Yr("telemetry name required")),pt.iKey=pt.iKey||Kn,pt.time=pt.time||Pw(new Date),pt.ver=pt.ver||"4.0",!Me&&wt[wp]()&&Hr===IA.ACTIVE?Ec()[fl](pt):Hr!==IA.INACTIVE&&D[ii]<=ea&&D[ao](pt)},function(){return{item:pt}},!pt.sync)},wt[ix]=Ec,wt[l0]=function(){return L||(L=new Use(v.cfg),wt[Gn]=L),L},wt[O5]=function(pt){wt.getNotifyMgr()[O5](pt)},wt[_w]=function(pt){L&&L[_w](pt)},wt.getCookieMgr=function(){return ae||(ae=Mse(v.cfg,wt[za])),ae},wt.setCookieMgr=function(pt){ae!==pt&&(kx(ae,!1),ae=pt)},wt[kw]=function(){return q||Z||Ka()},wt.setPerfMgr=function(pt){q=pt},wt.eventCnt=function(){return D[ii]},wt.releaseQueue=function(){if(T&&D[ii]>0){var pt=D;D=[],Hr===2?jr(pt,function(hr){hr.iKey=hr.iKey||Kn,Ec()[fl](hr)}):Rr(S,2,20,"core init status is not active")}},wt.pollInternalLogs=function(pt){return ut=pt||null,Io=!1,Ot&&Ot[tx](),Do(!0)};function Pn(){ss=!0,re(Kn)?(Hr=IA.INACTIVE,Rr(S,1,112,"ikey can't be resolved from promises")):Hr=IA.ACTIVE,Ca()}s(Pn,"_setStatus");function Ca(){T&&(wt.releaseQueue(),wt.pollInternalLogs())}s(Ca,"_releaseQueues");function Do(pt){if((!Ot||!Ot[_p])&&!Io){var hr=pt||S&&S.queue[ii]>0;hr&&(Wr||(Wr=!0,zl(v[Eh](function(Fn){var Lr=Fn.cfg.diagnosticLogInterval;(!Lr||!(Lr>0))&&(Lr=1e4);var On=!1;Ot&&(On=Ot[_p],Ot[tx]()),Ot=k5($x,Lr),Ot.unref(),Ot[_p]=On}))),Ot[_p]=!0)}return Ot}s(Do,"_startLogPoller"),wt[aU]=function(){Io=!0,Ot&&Ot[tx](),$x()},g8(wt,function(){return je},["addTelemetryInitializer"]),wt[a1]=function(pt,hr,Fn){pt===void 0&&(pt=!0),T||Yr(Si),Me&&Yr(kn);var Lr={reason:50,isAsync:pt,flushComplete:!1},On;pt&&!hr&&(On=lx(function(ks){hr=ks}));var Qo=w(Op(),wt);Qo[Q5](function(){Mt.run(wt[za]),OU([ae,L,S],pt,function(){ct(),hr&&hr(Lr)})},wt);function Wo(ks){Lr.flushComplete=ks,Me=!0,Ct.run(Qo,Lr),wt[aU](),Qo[fl](Lr)}return s(Wo,"_doUnload"),$x(),Rh(pt,Wo,6,Fn),On},wt[nx]=Al,wt.addPlugin=function(pt,hr,Fn,Lr){if(!pt){Lr&&Lr(!1),Yx(wr);return}var On=Al(pt[TA]);if(On&&!hr){Lr&&Lr(!1),Yx("Plugin ["+pt[TA]+"] is already loaded!");return}var Qo={reason:16};function Wo(lf){Te[ao](pt),Qo.added=[pt],Ea(Qo),Lr&&Lr(!0)}if(s(Wo,"_addPlugin"),On){var ks=[On.plugin],Bu={reason:2,isAsync:!!Fn};Ad(ks,Bu,function(lf){lf?(Qo.removed=ks,Qo.reason|=32,Wo()):Lr&&Lr(!1)})}else Wo()},wt.updateCfg=function(pt,hr){hr===void 0&&(hr=!0);var Fn;if(wt[wp]()){Fn={reason:1,cfg:v.cfg,oldCfg:T5({},v.cfg),newConfig:T5({},pt),merge:hr},pt=Fn.newConfig;var Lr=v.cfg;pt[ux]=Lr[ux],pt[Ih]=Lr[Ih]}v._block(function(On){var Qo=On.cfg;xk(On,Qo,pt,hr),hr||oe(Qo,function(Wo){nt(pt,Wo)||On.set(Qo,Wo,nf)}),On.setDf(Qo,Ac)},!0),v.notify(),Fn&&kh(Fn)},wt.evtNamespace=function(){return rt},wt.flush=Rh,wt.getTraceCtx=function(pt){return yr||(yr=Wse()),yr},wt.setTraceCtx=function(pt){yr=pt||null},wt.addUnloadHook=zl,Bw(wt,"addUnloadCb",function(){return Ct},"add"),wt.onCfgChange=function(pt){var hr;return T?hr=_h(v.cfg,pt,wt[za]):hr=Vse(Di,pt),nq(hr)},wt.getWParam=function(){return pA()||v.cfg.enableWParam?0:-1};function gl(){var pt={};Bo=[];var hr=s(function(Fn){Fn&&jr(Fn,function(Lr){if(Lr[TA]&&Lr[ox]&&!pt[Lr.identifier]){var On=Lr[TA]+"="+Lr[ox];Bo[ao](On),pt[Lr.identifier]=Lr}})},"_addPluginVersions");hr(Ke),Le&&jr(Le,function(Fn){hr(Fn)}),hr(Te)}s(gl,"_setPluginVersions");function ct(){T=!1,v=cf({},Ac,wt[za]),v.cfg[cU]=1,Ye(wt,"config",{g:s(function(){return v.cfg},"g"),s:s(function(hr){wt.updateCfg(hr,!1)},"s")}),Ye(wt,"pluginVersionStringArr",{g:s(function(){return Bo||gl(),Bo},"g")}),Ye(wt,"pluginVersionString",{g:s(function(){return An||(Bo||gl(),An=Bo.join(";")),An||_i},"g")}),Ye(wt,"logger",{g:s(function(){return S||(S=new Ww(v.cfg),v[za]=S),S},"g"),s:s(function(hr){v[za]=hr,S!==hr&&(kx(S,!1),S=hr)},"s")}),wt[za]=new Ww(v.cfg),Ni=[];var pt=wt.config[ux]||[];pt.splice(0,pt[ii]),Ov(pt,Ni),je=new Yn,D=[],kx(L,!1),L=null,q=null,Z=null,kx(ae,!1),ae=null,Ce=null,Te=[],Le=null,Ke=null,Me=!1,ut=null,rt=wh("AIBaseCore",!0),Ct=se(),yr=null,Kn=null,Mt=be(),Di=[],An=null,Bo=null,Io=!1,Ot=null,Wr=!1,Hr=0,Li=null,ea=null,ss=!1}s(ct,"_initDefaults");function Ec(){var pt=Ox(Op(),v.cfg,wt);return pt[Q5](Do),pt}s(Ec,"_createTelCtx");function Ea(pt){var hr=zw(wt[za],wse,Te);Ce=null,An=null,Bo=null,Ke=(Le||[])[0]||[],Ke=U8(Ov(Ke,hr[Ih]));var Fn=Ov(U8(hr[Ya]),Ke);Ni=Vt(Fn);var Lr=wt.config[ux]||[];Lr.splice(0,Lr[ii]),Ov(Lr,Ni);var On=Ec();Ke&&Ke[ii]>0&&Q8(On[c1](Ke),Fn),Q8(On,Fn),pt&&kh(pt)}s(Ea,"_initPluginChain");function Al(pt){var hr=null,Fn=null,Lr=[];return jr(Ni,function(On){if(On[TA]===pt&&On!==je)return Fn=On,-1;On.getChannel&&Lr[ao](On)}),!Fn&&Lr[ii]>0&&jr(Lr,function(On){if(Fn=On.getChannel(pt),!Fn)return-1}),Fn&&(hr={plugin:Fn,setEnabled:s(function(On){QA(Fn)[K5]=!On},"setEnabled"),isEnabled:s(function(){var On=QA(Fn);return!On[Sp]&&!On[K5]},"isEnabled"),remove:s(function(On,Qo){On===void 0&&(On=!0);var Wo=[Fn],ks={reason:1,isAsync:On};Ad(Wo,ks,function(Bu){Bu&&Ea({reason:32,removed:Wo}),Qo&&Qo(Bu)})},"remove")}),hr}s(Al,"_getPlugin");function Op(){if(!Ce){var pt=(Ni||[]).slice();fd(pt,je)===-1&&pt[ao](je),Ce=B(U8(pt),v.cfg,wt)}return Ce}s(Op,"_getPluginChain");function Ad(pt,hr,Fn){if(pt&&pt[ii]>0){var Lr=B(pt,v.cfg,wt),On=w(Lr,wt);On[Q5](function(){var Qo=!1,Wo=[];jr(Te,function(Bu,lf){W8(Bu,pt)?Qo=!0:Wo[ao](Bu)}),Te=Wo,An=null,Bo=null;var ks=[];Le&&(jr(Le,function(Bu,lf){var Ph=[];jr(Bu,function(Bh){W8(Bh,pt)?Qo=!0:Ph[ao](Bh)}),ks[ao](Ph)}),Le=ks),Fn&&Fn(Qo),Do()}),On[fl](hr)}else Fn(!1)}s(Ad,"_removePlugins");function $x(){if(S&&S.queue){var pt=S.queue.slice(0);S.queue[ii]=0,jr(pt,function(hr){var Fn={name:ut||"InternalMessageId: "+hr[U5],iKey:Kn,time:Pw(new Date),baseType:pk.dataType,baseData:{message:hr[l1]}};wt.track(Fn)})}}s($x,"_flushInternalLogs");function Rh(pt,hr,Fn,Lr){var On=1,Qo=!1,Wo=null;Lr=Lr||5e3;function ks(){On--,Qo&&On===0&&(Wo&&Wo[tx](),Wo=null,hr&&hr(Qo),hr=null)}if(s(ks,"doCallback"),Ke&&Ke[ii]>0){var Bu=Ec()[c1](Ke);Bu.iterate(function(lf){if(lf.flush){On++;var Ph=!1;lf.flush(pt,function(){Ph=!0,ks()},Fn)||Ph||(pt&&Wo==null?Wo=vA(function(){Wo=null,ks()},Lr):ks())}})}return Qo=!0,ks(),!0}s(Rh,"_flushChannels");function zx(){var pt;zl(v[Eh](function(hr){var Fn=hr.cfg.enablePerfMgr;if(Fn){var Lr=hr.cfg[d0];(pt!==Lr||!pt)&&(Lr||(Lr=Qx),vU(hr.cfg,d0,Lr),pt=Lr,Z=null),!q&&!Z&&Qe(Lr)&&(Z=Lr(wt,wt[l0]()))}else Z=null,pt=null}))}s(zx,"_initPerfManager");function kh(pt){var hr=R(Op(),wt);hr[Q5](Do),(!wt._updateHook||wt._updateHook(hr,pt)!==!0)&&hr[fl](pt)}s(kh,"_doUpdate");function Yx(pt){var hr=wt[za];hr?(Rr(hr,2,73,pt),Do()):Yr(pt)}s(Yx,"_logOrThrowError");function ta(pt){var hr=wt[l0]();hr&&hr[px]([pt],2)}s(ta,"_notifyInvalidEvent");function zl(pt){Mt.add(pt)}s(zl,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Nr(A,v){try{if(A&&A!==""){var T=hd().parse(A);if(T&&T[lU]&&T[lU]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ii])return T}}catch(S){Rr(v,1,43,"Cannot parse the response. "+(S[wA]||Ft(S)),{response:A})}return null}s(Nr,"parseResponse");var un="",Zo="NoResponseBody",yc="&"+Zo+"=true",ya="POST",Cc=function(){function A(){var v=0,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke,Me,je,ut;jl(A,this,function(rt,Ct){var Mt=!0;ss(),rt[ww]=function(Ot,Wr){D=Wr,S&&Rr(D,1,28,"Sender is already initialized"),rt.SetConfig(Ot),S=!0},rt._getDbgPlgTargets=function(){return[S,L,Z,T]},rt.SetConfig=function(Ot){try{if(q=Ot.senderOnCompleteCallBack||{},Z=!!Ot.disableCredentials,ae=Ot.fetchCredentials,L=!!Ot.isOneDs,T=!!Ot.enableSendPromise,Te=!!Ot.disableXhr,Le=!!Ot.disableBeacon,Ke=!!Ot.disableBeaconSync,ut=Ot.timeWrapper,je=!!Ot.addNoResponse,Me=!!Ot.disableFetchKeepAlive,Ce={sendPOST:Hr},L||(Mt=!1),Z){var Wr=Ex();Wr&&Wr.protocol&&Wr.protocol[Xv]()==="file:"&&(Mt=!1)}return!0}catch{}return!1},rt.getSyncFetchPayload=function(){return v},rt.getSenderInst=function(Ot,Wr){return Ot&&Ot[ii]?Di(Ot,Wr):null},rt.getFallbackInst=function(){return Ce},rt[q5]=function(Ot,Wr){ss()};function Yt(Ot,Wr){Ni(Wr,200,{},Ot)}s(Yt,"_onSuccess");function yr(Ot,Wr){Rr(D,2,26,"Failed to send telemetry.",{message:Ot}),Ni(Wr,400,{})}s(yr,"_onError");function Kn(Ot){yr("No endpoint url is provided for the batch",Ot)}s(Kn,"_onNoPayloadUrl");function Di(Ot,Wr){for(var Io=0,wt=null,Pn=0;wt==null&&Pn<Ot[ii];)Io=Ot[Pn],!Te&&Io===1?b8()?wt=ea:I8()&&(wt=Hr):Io===2&&Fw(Wr)&&(!Wr||!Me)?wt=Li:Io===3&&DA()&&(Wr?!Ke:!Le)&&(wt=An),Pn++;return wt?{_transport:Io,_isSync:Wr,sendPOST:wt}:null}s(Di,"_getSenderInterface");function Ni(Ot,Wr,Io,wt){try{Ot&&Ot(Wr,Io,wt)}catch{}}s(Ni,"_doOnComplete");function Bo(Ot,Wr){var Io=mA(),wt=Ot[xh];if(!wt)return Kn(Wr),!0;wt=Ot[xh]+(je?yc:un);var Pn=Ot[sx],Ca=L?Pn:new Blob([Pn],{type:"text/plain;charset=UTF-8"}),Do=Io.sendBeacon(wt,Ca);return Do}s(Bo,"_doBeaconSend");function An(Ot,Wr,Io){var wt=Ot[sx];try{if(wt)if(Bo(Ot,Wr))Yt(un,Wr);else{var Pn=q&&q.beaconOnRetry;Pn&&Qe(Pn)?Pn(Ot,Wr,Bo):(Ce&&Ce.sendPOST(Ot,Wr,!0),Rr(D,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ca){L&&mk(D,"Failed to send telemetry using sendBeacon API. Ex:"+Ft(Ca)),Ni(Wr,L?0:400,{},un)}}s(An,"_beaconSender");function Hr(Ot,Wr,Io){var wt,Pn,Ca,Do=Ot[u8]||{};!Io&&T&&(wt=lx(function(Ea,Al){Pn=Ea,Ca=Al})),L&&Io&&Ot.disableXhrSync&&(Io=!1);var gl=Ot[xh];if(!gl){Kn(Wr),Pn&&Pn(!1);return}var ct=C8(ya,gl,Mt,!0,Io,Ot[bh]);L||ct.setRequestHeader("Content-type","application/json"),jr(Et(Do),function(Ea){ct.setRequestHeader(Ea,Do[Ea])}),ct.onreadystatechange=function(){L||(Ec(ct),ct.readyState===4&&Pn&&Pn(!0))},ct.onload=function(){L&&Ec(ct)};function Ec(Ea){var Al=q&&q.xhrOnComplete,Op=Al&&Qe(Al);if(Op)Al(Ea,Wr,Ot);else{var Ad=rk(Ea);Ni(Wr,Ea[Sw],h1(Ea,L),Ad)}}return s(Ec,"_doOnReadyFunc"),ct.onerror=function(Ea){Ni(Wr,L?ct[Sw]:400,h1(ct,L),L?un:nk(ct)),Ca&&Ca(Ea)},ct.ontimeout=function(){Ni(Wr,L?ct[Sw]:500,h1(ct,L),L?un:nk(ct)),Pn&&Pn(!1)},ct.send(Ot[sx]),wt}s(Hr,"_xhrSender");function Li(Ot,Wr,Io){var wt,Pn=Ot[xh],Ca=Ot[sx],Do=L?Ca:new Blob([Ca],{type:"application/json"}),gl,ct,Ec,Ea=new Headers,Al=Ca[ii],Op=!1,Ad=!1,$x=Ot[u8]||{},Rh=(wt={method:ya,body:Do},wt[QU]=!0,wt);Ot.headers&&Et(Ot.headers)[ii]>0&&(jr(Et($x),function(ta){Ea.append(ta,$x[ta])}),Rh[u8]=Ea),ae?Rh.credentials=ae:Mt&&L&&(Rh.credentials="include"),Io&&(Rh.keepalive=!0,v+=Al,L?Ot._sendReason===2&&(Op=!0,je&&(Pn+=yc)):Op=!0);var zx=new Request(Pn,Rh);try{zx[QU]=!0}catch{}if(!Io&&T&&(gl=lx(function(ta,zl){ct=ta,Ec=zl})),!Pn){Kn(Wr),ct&&ct(!1);return}function kh(ta){Ni(Wr,L?0:400,{},L?un:ta)}s(kh,"_handleError");function Yx(ta,zl,pt){var hr=ta[Sw],Fn=q.fetchOnComplete;Fn&&Qe(Fn)?Fn(ta,Wr,pt||un,zl):Ni(Wr,hr,{},pt||un)}s(Yx,"_onFetchComplete");try{rf(fetch(L?Pn:zx,L?Rh:null),function(ta){if(Io&&(v-=Al,Al=0),!Ad)if(Ad=!0,ta.rejected)kh(ta.reason&&ta.reason[l1]),Ec&&Ec(ta.reason);else{var zl=ta[rx];try{!L&&!zl.ok?(kh(zl.statusText),ct&&ct(!1)):L&&!zl.body?(Yx(zl,null,un),ct&&ct(!0)):rf(zl.text(),function(pt){Yx(zl,Ot,pt[rx]),ct&&ct(!0)})}catch(pt){kh(Ft(pt)),Ec&&Ec(pt)}}})}catch(ta){Ad||(kh(Ft(ta)),Ec&&Ec(ta))}return Op&&!Ad&&(Ad=!0,Ni(Wr,200,{}),ct&&ct(!0)),L&&!Ad&&Ot[bh]>0&&ut&&ut.set(function(){Ad||(Ad=!0,Ni(Wr,500,{}),ct&&ct(!0))},Ot[bh]),gl}s(Li,"_doFetchSender");function ea(Ot,Wr,Io){var wt=gh(),Pn=new XDomainRequest,Ca=Ot[sx];Pn.onload=function(){var Ea=rk(Pn),Al=q&&q.xdrOnComplete;Al&&Qe(Al)?Al(Pn,Wr,Ot):Ni(Wr,200,{},Ea)},Pn.onerror=function(){Ni(Wr,400,{},L?un:bU(Pn))},Pn.ontimeout=function(){Ni(Wr,500,{})},Pn.onprogress=function(){};var Do=wt&&wt.location&&wt.location.protocol||"",gl=Ot[xh];if(!gl){Kn(Wr);return}if(!L&&gl.lastIndexOf(Do,0)!==0){var ct="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Rr(D,2,40,". "+ct),yr(ct,Wr);return}var Ec=L?gl:gl[RA](/^(https?:)/,"");Pn.open(ya,Ec),Ot[bh]&&(Pn[bh]=Ot[bh]),Pn.send(Ca),L&&Io?ut&&ut.set(function(){Pn.send(Ca)},0):Pn.send(Ca)}s(ea,"_xdrSender");function ss(){v=0,S=!1,T=!1,D=null,L=null,q=null,Z=null,ae=null,Ce=null,Te=!1,Le=!1,Ke=!1,Me=!1,je=!1,ut=null}s(ss,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),y1="on",UA="attachEvent",Ux="addEventListener",iq="detachEvent",oq="removeEventListener",bk="events";wh("aiEvtPageHide"),wh("aiEvtPageShow");var $se=/\.[\.]+/g,lSe=/[\.]+$/,Smt=1,sq=kU("events"),Rmt=/^([^.]*)(?:\.(.+)|)/;function uSe(A){return A&&A[RA]?A[RA](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_i):A}s(uSe,"_normalizeNamespace");function zse(A,v){if(v){var T=_i;tt(v)?(T=_i,jr(v,function(D){D=uSe(D),D&&(D[0]!=="."&&(D="."+D),T+=D)})):T=uSe(v),T&&(T[0]!=="."&&(T="."+T),A=(A||_i)+T)}var S=Rmt.exec(A||_i)||[];return{type:S[1],ns:(S[2]||_i).replace($se,".").replace(lSe,_i)[SA](".").sort().join(".")}}s(zse,"_getEvtNamespace");function dSe(A,v,T){T===void 0&&(T=!0);var S=sq.get(A,bk,{},T),D=S[v];return D||(D=S[v]=[]),D}s(dSe,"_getRegisteredEvents");function fSe(A,v,T,S){A&&v&&v[Vl]&&(A[oq]?A[oq](v[Vl],T,S):A[iq]&&A[iq](y1+v[Vl],T))}s(fSe,"_doDetach");function kmt(A,v,T,S){var D=!1;return A&&v&&v[Vl]&&T&&(A[Ux]?(A[Ux](v[Vl],T,S),D=!0):A[UA]&&(A[UA](y1+v[Vl],T),D=!0)),D}s(kmt,"_doAttach");function pSe(A,v,T,S){for(var D=v[ii];D--;){var L=v[D];L&&(!T.ns||T.ns===L[a8].ns)&&(!S||S(L))&&(fSe(A,L[a8],L.handler,L.capture),v[ex](D,1))}}s(pSe,"_doUnregister");function Pmt(A,v,T){if(v[Vl])pSe(A,dSe(A,v[Vl]),v,T);else{var S=sq.get(A,bk,{});oe(S,function(D,L){pSe(A,L,v,T)}),Et(S)[ii]===0&&sq.kill(A,bk)}}s(Pmt,"_unregisterEvents");function mSe(A,v){var T;return v?(tt(v)?T=[A].concat(v):T=[A,v],T=zse("xx",T).ns[SA](".")):T=A,T}s(mSe,"mergeEvtNamespace");function hSe(A,v,T,S,D){D===void 0&&(D=!1);var L=!1;if(A)try{var q=zse(v,S);if(L=kmt(A,q,T,D),L&&sq.accept(A)){var Z={guid:Smt++,evtName:q,handler:T,capture:D};dSe(A,q.type)[ao](Z)}}catch{}return L}s(hSe,"eventOn");function Bmt(A,v,T,S,D){if(D===void 0&&(D=!1),A)try{var L=zse(v,S),q=!1;Pmt(A,L,function(Z){return L.ns&&!T||Z.handler===T?(q=!0,!0):!1}),q||fSe(A,L,T,D)}catch{}}s(Bmt,"eventOff");var gSe="sampleRate",Yse="ProcessLegacy",ASe="http.method",Kse="https://dc.services.visualstudio.com",Ik="/v2/track",qx="not_specified",ySe=lse({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),aq="split",bi="length",Jse="toLowerCase",Yw="ingestionendpoint",j8="toString",CSe="removeItem",cq="message",Dmt="count",Xse="stringify",Zse="pathname",V8="match",Hx="name",qA="properties",C1="measurements",lq="sizeInBytes",uq="typeName",$8="exceptions",z8="severityLevel",eae="problemGroup",Tk="parsedStack",dq="hasFullStack",fq="assembly",E1="fileName",wk="line",pq="aiDataContract",mq="duration";function ESe(A,v,T){var S=v[bi],D=Nmt(A,v);if(D[bi]!==S){for(var L=0,q=D;T[q]!==void 0;)L++,q=ge(D,0,147)+Fmt(L);D=q}return D}s(ESe,"dataSanitizeKeyAndAddUniqueness");function Nmt(A,v){var T;return v&&(v=so(qt(v)),v[bi]>150&&(T=ge(v,0,150),Rr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:v},!0))),T||v}s(Nmt,"dataSanitizeKey");function ku(A,v,T){T===void 0&&(T=1024);var S;return v&&(T=T||1024,v=so(qt(v)),v[bi]>T&&(S=ge(v,0,T),Rr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:v},!0))),S||v}s(ku,"dataSanitizeString");function tae(A,v){return xSe(A,v,2048,66)}s(tae,"dataSanitizeUrl");function vSe(A,v){var T;return v&&v[bi]>32768&&(T=ge(v,0,32768),Rr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:v},!0)),T||v}s(vSe,"dataSanitizeMessage");function Lmt(A,v){var T;if(v){var S=""+v;S[bi]>32768&&(T=ge(S,0,32768),Rr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:v},!0))}return T||v}s(Lmt,"dataSanitizeException");function Kw(A,v){if(v){var T={};oe(v,function(S,D){if(ke(D)&&vx())try{D=hd()[Xse](D)}catch(L){Rr(A,2,49,"custom property is not valid",{exception:L},!0)}D=ku(A,D,8192),S=ESe(A,S,T),T[S]=D}),v=T}return v}s(Kw,"dataSanitizeProperties");function Jw(A,v){if(v){var T={};oe(v,function(S,D){S=ESe(A,S,T),T[S]=D}),v=T}return v}s(Jw,"dataSanitizeMeasurements");function Mmt(A,v){return v&&xSe(A,v,128,69)[j8]()}s(Mmt,"dataSanitizeId");function xSe(A,v,T,S){var D;return v&&(v=so(qt(v)),v[bi]>T&&(D=ge(v,0,T),Rr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:v},!0))),D||v}s(xSe,"dataSanitizeInput");function Fmt(A){var v="00"+A;return ve(v,v[bi]-3)}s(Fmt,"dsPadNumber");var bSe=Mv()||{},ISe=0,Omt=[null,null,null,null,null];function Qmt(A){var v=ISe,T=Omt,S=T[v];return bSe.createElement?T[v]||(S=T[v]=bSe.createElement("a")):S={host:Umt(A,!0)},S.href=A,v++,v>=T[bi]&&(v=0),ISe=v,S}s(Qmt,"urlParseUrl");function Umt(A,v){var T=qmt(A,v)||"";if(T){var S=T[V8](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>3&&he(S[2])&&S[2][bi]>0)return S[2]+(S[3]||"")}return T}s(Umt,"urlParseHost");function qmt(A,v){var T=null;if(A){var S=A[V8](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>2&&he(S[2])&&S[2][bi]>0&&(T=S[2]||"",v&&S[bi]>2)){var D=(S[1]||"")[Jse](),L=S[3]||"";(D==="http"&&L===":80"||D==="https"&&L===":443")&&(L=""),T+=L}}return T}s(qmt,"urlParseFullHost");var Hmt=[Kse+Ik,"https://breeze.aimon.applicationinsights.io"+Ik,"https://dc-int.services.visualstudio.com"+Ik];function TSe(A){return fd(Hmt,A[Jse]())!==-1}s(TSe,"isInternalApplicationInsightsEndpoint");function Wmt(A,v,T,S){var D,L=S,q=S;if(v&&v[bi]>0){var Z=Qmt(v);if(D=Z.host,!L)if(Z[Zse]!=null){var ae=Z.pathname[bi]===0?"/":Z[Zse];ae.charAt(0)!=="/"&&(ae="/"+ae),q=Z[Zse],L=ku(A,T?T+" "+ae:ae)}else L=ku(A,v)}else D=S,L=S;return{target:D,name:L,data:q}}s(Wmt,"AjaxHelperParseDependencyPath");var rae=M5({LocalStorage:0,SessionStorage:1}),_k=void 0,wSe="";function _Se(A){try{if(re(Ip()))return null;var v=new Date()[j8](),T=Ba(A===rae.LocalStorage?"localStorage":"sessionStorage"),S=wSe+v;T.setItem(S,v);var D=T.getItem(S)!==v;if(T[CSe](S),!D)return T}catch{}return null}s(_Se,"_getVerifiedStorageObject");function nae(){return SSe()?_Se(rae.SessionStorage):null}s(nae,"_getSessionStorageObject");function Gmt(A){wSe=A||""}s(Gmt,"utlSetStoragePrefix");function SSe(A){return(A||_k===void 0)&&(_k=!!_Se(rae.SessionStorage)),_k}s(SSe,"utlCanUseSessionStorage");function jmt(A,v){var T=nae();if(T!==null)try{return T.getItem(v)}catch(S){_k=!1,Rr(A,2,2,"Browser failed read of session storage. "+jc(S),{exception:Ft(S)})}return null}s(jmt,"utlGetSessionStorage");function Vmt(A,v,T){var S=nae();if(S!==null)try{return S.setItem(v,T),!0}catch(D){_k=!1,Rr(A,2,4,"Browser failed write to session storage. "+jc(D),{exception:Ft(D)})}return!1}s(Vmt,"utlSetSessionStorage");function $mt(A,v){var T=nae();if(T!==null)try{return T[CSe](v),!0}catch(S){_k=!1,Rr(A,2,6,"Browser failed removal of session storage item. "+jc(S),{exception:Ft(S)})}return!1}s($mt,"utlRemoveSessionStorage");var zmt=";",Ymt="=";function iae(A){if(!A)return{};var v=A[aq](zmt),T=Joe(v,function(D,L){var q=L[aq](Ymt);if(q[bi]===2){var Z=q[0][Jse](),ae=q[1];D[Z]=ae}return D},{});if(Et(T)[bi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[Yw]=T[Yw]||"https://"+S+"dc."+T.endpointsuffix}T[Yw]=T[Yw]||Kse,rU(T[Yw],"/")&&(T[Yw]=T[Yw].slice(0,-1))}return T}s(iae,"parseConnectionString");var Kmt=function(){function A(v,T,S){var D=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[Hx]=ku(v,S)||qx,L.data=T,L.time=Pw(new Date),L[pq]={time:1,iKey:1,name:1,sampleRate:s(function(){return D.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),Sk=function(){function A(v,T,S,D){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[Hx]=ku(v,T)||qx,L[qA]=Kw(v,S),L[C1]=Jw(v,D)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),Jmt=58,Xmt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Zmt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,eht=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,tht=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,rht=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,nht=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,iht=/([^\(\s\n]+):([0-9]+)$/,RSe="<no_method>",Rk="error",Fp="stack",oae="stackDetails",kSe="errorSrc",sae="message",PSe="description",BSe=[{re:Zmt,len:5,m:1,fn:2,ln:3,col:4},{chk:sht,pre:oht,re:eht,len:4,m:1,fn:2,ln:3},{re:tht,len:3,m:1,fn:2,hdl:OSe},{re:rht,len:2,fn:1,hdl:OSe}];function oht(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(oht,"_scrubAnonymous");function sht(A){return Ah(A,"[native")<0}s(sht,"_ignoreNative");function aae(A,v){var T=A;return T&&!he(T)&&(JSON&&JSON[Xse]?(T=JSON[Xse](A),v&&(!T||T==="{}")&&(Qe(A[j8])?T=A[j8]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(aae,"_stringify");function DSe(A,v){var T=A;return A&&(T&&!he(T)&&(T=A[sae]||A[PSe]||T),T&&!he(T)&&(T=aae(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),v&&v!=="String"&&v!=="Object"&&v!=="Error"&&Ah(T||"",v)===-1&&(T=v+": "+T),T||""}s(DSe,"_formatMessage");function aht(A){try{if(ke(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(aht,"_isExceptionDetailsInternal");function cht(A){try{if(ke(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(cht,"_isExceptionInternal");function NSe(A){return A&&A.src&&he(A.src)&&A.obj&&tt(A.obj)}s(NSe,"_isStackDetails");function Xw(A){var v=A||"";he(v)||(he(v[Fp])?v=v[Fp]:v=""+v);var T=v[aq](`
`);return{src:v,obj:T}}s(Xw,"_convertStackObj");function lht(A){for(var v=[],T=A[aq](`
`),S=0;S<T[bi];S++){var D=T[S];T[S+1]&&(D+="@"+T[S+1],S++),v.push(D)}return{src:A,obj:v}}s(lht,"_getOperaStack");function LSe(A){var v=null;if(A)try{if(A[Fp])v=Xw(A[Fp]);else if(A[Rk]&&A[Rk][Fp])v=Xw(A[Rk][Fp]);else if(A.exception&&A.exception[Fp])v=Xw(A.exception[Fp]);else if(NSe(A))v=A;else if(NSe(A[oae]))v=A[oae];else if(gh()&&gh().opera&&A[sae])v=lht(A[cq]);else if(A.reason&&A.reason[Fp])v=Xw(A.reason[Fp]);else if(he(A))v=Xw(A);else{var T=A[sae]||A[PSe]||"";he(A[kSe])&&(T&&(T+=`
`),T+=" from "+A[kSe]),T&&(v=Xw(T))}}catch(S){v=Xw(S)}return v||{src:"",obj:null}}s(LSe,"_getStackFromErrorObj");function uht(A){var v="";return A&&(A.obj?v=A.obj.join(`
`):v=A.src||""),v}s(uht,"_formatStackTrace");function dht(A){var v,T=A.obj;if(T&&T[bi]>0){v=[];var S=0,D=!1,L=0;jr(T,function(ut){if(D||hht(ut)){var rt=qt(ut);D=!0;var Ct=ght(rt,S);Ct&&(L+=Ct[lq],v.push(Ct),S++)}});var q=32*1024;if(L>q)for(var Z=0,ae=v[bi]-1,Ce=0,Te=Z,Le=ae;Z<ae;){var Ke=v[Z][lq],Me=v[ae][lq];if(Ce+=Ke+Me,Ce>q){var je=Le-Te+1;v.splice(Te,je);break}Te=Z,Le=ae,Z++,ae--}}return v}s(dht,"_parseStack");function hq(A){var v="";if(A&&(v=A.typeName||A[Hx]||"",!v))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[j8]());v=S&&S[bi]>1?S[1]:""}catch{}return v}s(hq,"_getErrorType");function cae(A){if(A)try{if(!he(A)){var v=hq(A),T=aae(A,!1);return(!T||T==="{}")&&(A[Rk]&&(A=A[Rk],v=hq(A)),T=aae(A,!0)),Ah(T,v)!==0&&v!=="String"?v+":"+T:T}}catch{}return""+(A||"")}s(cae,"_formatErrorCode");var gq=function(){function A(v,T,S,D,L,q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Z=this;Z.ver=2,cht(T)?(Z[$8]=T[$8]||[],Z[qA]=T[qA],Z[C1]=T[C1],T[z8]&&(Z[z8]=T[z8]),T.id&&(Z.id=T.id,T[qA].id=T.id),T[eae]&&(Z[eae]=T[eae]),re(T.isManual)||(Z.isManual=T.isManual)):(S||(S={}),q&&(S.id=q),Z[$8]=[MSe(v,T,S)],Z[qA]=Kw(v,S),Z[C1]=Jw(v,D),L&&(Z[z8]=L),q&&(Z.id=q))}return s(A,"Exception"),A.CreateAutoException=function(v,T,S,D,L,q,Z,ae){var Ce=hq(L||q||v);return{message:DSe(v,Ce),url:T,lineNumber:S,columnNumber:D,error:cae(L||q||v),evt:cae(q||v),typeName:Ce,stackDetails:LSe(Z||L||q),errorSrc:ae}},A.CreateFromInterface=function(v,T,S,D){var L=T[$8]&&ZC(T[$8],function(Z){return mht(v,Z)}),q=new A(v,Ch(Ch({},T),{exceptions:L}),S,D);return q},A.prototype.toInterface=function(){var v=this,T=v.exceptions,S=v.properties,D=v.measurements,L=v.severityLevel,q=v.problemGroup,Z=v.id,ae=v.isManual,Ce=T instanceof Array&&ZC(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:D,problemGroup:q,id:Z,isManual:ae}},A.CreateSimpleException=function(v,T,S,D,L,q){var Z;return{exceptions:[(Z={},Z[dq]=!0,Z.message=v,Z.stack=L,Z.typeName=T,Z)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=cae,A}(),fht=Vt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function pht(){var A=this,v=tt(A[Tk])&&ZC(A[Tk],function(S){return yht(S)}),T={id:A.id,outerId:A.outerId,typeName:A[uq],message:A[cq],hasFullStack:A[dq],stack:A[Fp],parsedStack:v||void 0};return T}s(pht,"_toInterface");function MSe(A,v,T){var S,D,L,q,Z,ae,Ce,Te;if(aht(v))q=v[uq],Z=v[cq],Ce=v[Fp],Te=v[Tk]||[],ae=v[dq];else{var Le=v,Ke=Le&&Le.evt;xt(Le)||(Le=Le[Rk]||Ke||Le),q=ku(A,hq(Le))||qx,Z=vSe(A,DSe(v||Le,q))||qx;var Me=v[oae]||LSe(v);Te=dht(Me),tt(Te)&&ZC(Te,function(je){je[fq]=ku(A,je[fq]),je[E1]=ku(A,je[E1])}),Ce=Lmt(A,uht(Me)),ae=tt(Te)&&Te[bi]>0,T&&(T[uq]=T[uq]||q)}return S={},S[pq]=fht,S.id=D,S.outerId=L,S.typeName=q,S.message=Z,S[dq]=ae,S.stack=Ce,S.parsedStack=Te,S.toInterface=pht,S}s(MSe,"_createExceptionDetails");function mht(A,v){var T=tt(v[Tk])&&ZC(v[Tk],function(D){return Aht(D)})||v[Tk],S=MSe(A,Ch(Ch({},v),{parsedStack:T}));return S}s(mht,"_createExDetailsFromInterface");function FSe(A,v){var T=v[V8](nht);if(T&&T[bi]>=4)A[E1]=T[1],A[wk]=parseInt(T[2]);else{var S=v[V8](iht);S&&S[bi]>=3?(A[E1]=S[1],A[wk]=parseInt(S[2])):A[E1]=v}}s(FSe,"_parseFilename");function OSe(A,v,T){var S=A[E1];v.fn&&T&&T[bi]>v.fn&&(v.ln&&T[bi]>v.ln?(S=so(T[v.fn]||""),A[wk]=parseInt(so(T[v.ln]||""))||0):S=so(T[v.fn]||"")),S&&FSe(A,S)}s(OSe,"_handleFilename");function hht(A){var v=!1;if(A&&he(A)){var T=so(A);T&&(v=Xmt.test(T))}return v}s(hht,"_isStackFrame");var QSe=Vt({level:1,method:1,assembly:0,fileName:0,line:0});function ght(A,v){var T,S;if(A&&he(A)&&so(A)){S=(T={},T[pq]=QSe,T.level=v,T.assembly=so(A),T.method=RSe,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var D=0;D<BSe[bi];){var L=BSe[D];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var q=A[V8](L.re);if(q&&q[bi]>=L.len){L.m&&(S.method=so(q[L.m]||RSe)),L.hdl?L.hdl(S,L,q):L.fn&&(L.ln?(S[E1]=so(q[L.fn]||""),S[wk]=parseInt(so(q[L.ln]||""))||0):FSe(S,q[L.fn]||""));break}D++}}return USe(S)}s(ght,"_extractStackFrame");function Aht(A){var v,T=(v={},v[pq]=QSe,v.level=A.level,v.method=A.method,v.assembly=A[fq],v.fileName=A[E1],v.line=A[wk],v.sizeInBytes=0,v);return USe(T)}s(Aht,"_stackFrameFromInterface");function USe(A){var v=Jmt;return A&&(v+=A.method[bi],v+=A.assembly[bi],v+=A.fileName[bi],v+=A.level.toString()[bi],v+=A.line.toString()[bi],A[lq]=v),A}s(USe,"_populateFrameSizeInBytes");function yht(A){return{level:A.level,method:A.method,assembly:A[fq],fileName:A[E1],line:A[wk]}}s(yht,"_parsedFrameToInterface");var Cht=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),Y8=function(){function A(v,T,S,D,L,q,Z,ae,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new Cht;Le[Dmt]=D>0?D:void 0,Le.max=isNaN(q)||q===null?void 0:q,Le.min=isNaN(L)||L===null?void 0:L,Le[Hx]=ku(v,T)||qx,Le.value=S,Le.stdDev=isNaN(Z)||Z===null?void 0:Z,Te.metrics=[Le],Te[qA]=Kw(v,ae),Te[C1]=Jw(v,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),K8="";function qSe(A){(isNaN(A)||A<0)&&(A=0),A=rse(A);var v=K8+A%1e3,T=K8+e1(A/1e3)%60,S=K8+e1(A/(1e3*60))%60,D=K8+e1(A/(1e3*60*60))%24,L=e1(A/(1e3*60*60*24));return v=v[bi]===1?"00"+v:v[bi]===2?"0"+v:v,T=T[bi]<2?"0"+T:T,S=S[bi]<2?"0"+S:S,D=D[bi]<2?"0"+D:D,(L>0?L+".":K8)+D+":"+S+":"+T+"."+v}s(qSe,"msToTimeSpan");var Aq=function(){function A(v,T,S,D,L,q,Z){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ae=this;ae.ver=2,ae.id=Mmt(v,Z),ae.url=tae(v,S),ae[Hx]=ku(v,T)||qx,isNaN(D)||(ae[mq]=qSe(D)),ae[qA]=Kw(v,L),ae[C1]=Jw(v,q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),yq=function(){function A(v,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Me=this;Me.ver=2,Me.id=T,Me[mq]=qSe(L),Me.success=q,Me.resultCode=Z+"",Me.type=ku(v,Ce);var je=Wmt(v,S,ae,D);Me.data=tae(v,D)||je.data,Me.target=ku(v,je.target),Te&&(Me.target="".concat(Me.target," | ").concat(Te)),Me[Hx]=ku(v,je[Hx]),Me[qA]=Kw(v,Le),Me[C1]=Jw(v,Ke)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),Cq=function(){function A(v,T,S,D,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var q=this;q.ver=2,T=T||qx,q[cq]=vSe(v,T),q[qA]=Kw(v,D),q[C1]=Jw(v,L),S&&(q[z8]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),Eq=function(){function A(v,T,S,D,L,q,Z){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ae=this;ae.ver=2,ae.url=tae(v,S),ae[Hx]=ku(v,T)||qx,ae[qA]=Kw(v,L),ae[C1]=Jw(v,q),Z&&(ae.domProcessing=Z.domProcessing,ae[mq]=Z[mq],ae.networkConnect=Z.networkConnect,ae.perfTotal=Z.perfTotal,ae.receivedResponse=Z.receivedResponse,ae.sentRequest=Z.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),Zw=function(){function A(v,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=v,this.baseData=T}return s(A,"Data"),A}(),Eht=M5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function Wx(A){var v="ai."+A+".";return function(T){return v+T}}s(Wx,"_aiNameFunc");var J8=Wx("application"),$c=Wx("device"),vq=Wx("location"),kk=Wx("operation"),lae=Wx("session"),Gx=Wx("user"),e_=Wx("cloud"),X8=Wx("internal"),HSe=function(A){Tw(v,A);function v(){return A.call(this)||this}return s(v,"ContextTagKeys"),v}(yse({applicationVersion:J8("ver"),applicationBuild:J8("build"),applicationTypeId:J8("typeId"),applicationId:J8("applicationId"),applicationLayer:J8("layer"),deviceId:$c("id"),deviceIp:$c("ip"),deviceLanguage:$c("language"),deviceLocale:$c("locale"),deviceModel:$c("model"),deviceFriendlyName:$c("friendlyName"),deviceNetwork:$c("network"),deviceNetworkName:$c("networkName"),deviceOEMName:$c("oemName"),deviceOS:$c("os"),deviceOSVersion:$c("osVersion"),deviceRoleInstance:$c("roleInstance"),deviceRoleName:$c("roleName"),deviceScreenResolution:$c("screenResolution"),deviceType:$c("type"),deviceMachineName:$c("machineName"),deviceVMName:$c("vmName"),deviceBrowser:$c("browser"),deviceBrowserVersion:$c("browserVersion"),locationIp:vq("ip"),locationCountry:vq("country"),locationProvince:vq("province"),locationCity:vq("city"),operationId:kk("id"),operationName:kk("name"),operationParentId:kk("parentId"),operationRootId:kk("rootId"),operationSyntheticSource:kk("syntheticSource"),operationCorrelationVector:kk("correlationVector"),sessionId:lae("id"),sessionIsFirst:lae("isFirst"),sessionIsNew:lae("isNew"),userAccountAcquisitionDate:Gx("accountAcquisitionDate"),userAccountId:Gx("accountId"),userAgent:Gx("userAgent"),userId:Gx("id"),userStoreRegion:Gx("storeRegion"),userAuthUserId:Gx("authUserId"),userAnonymousUserAcquisitionDate:Gx("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Gx("authUserAcquisitionDate"),cloudName:e_("name"),cloudRole:e_("role"),cloudRoleVer:e_("roleVer"),cloudRoleInstance:e_("roleInstance"),cloudEnvironment:e_("environment"),cloudLocation:e_("location"),cloudDeploymentUnit:e_("deploymentUnit"),internalNodeName:X8("nodeName"),internalSdkVersion:X8("sdkVersion"),internalAgentVersion:X8("agentVersion"),internalSnippet:X8("snippet"),internalSdkSrc:X8("sdkSrc")})),ml=new HSe;function WSe(A,v){Bmt(A,null,null,v)}s(WSe,"_disableEvents");function vht(A){var v=Mv(),T=mA(),S=!1,D=[],L=1;T&&!re(T.onLine)&&!T.onLine&&(L=2);var q=0,Z=Ke(),ae=mSe(wh("OfflineListener"),A);try{if(Te(gh())&&(S=!0),v){var Ce=v.body||v;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Yt){var yr=!1;return Yt&&(yr=hSe(Yt,"online",ut,ae),yr&&hSe(Yt,"offline",rt,ae)),yr}s(Te,"_enableEvents");function Le(){return Z}s(Le,"_isOnline");function Ke(){return!(q===2||L===2)}s(Ke,"calCurrentState");function Me(){var Yt=Ke();Z!==Yt&&(Z=Yt,jr(D,function(yr){var Kn={isOnline:Z,rState:L,uState:q};try{yr(Kn)}catch{}}))}s(Me,"listnerNoticeCheck");function je(Yt){q=Yt,Me()}s(je,"setOnlineState");function ut(){L=1,Me()}s(ut,"_setOnline");function rt(){L=2,Me()}s(rt,"_setOffline");function Ct(){var Yt=gh();if(Yt&&S){if(WSe(Yt,ae),v){var yr=v.body||v;Q(yr.ononline)||WSe(yr,ae)}S=!1}}s(Ct,"_unload");function Mt(Yt){return D.push(Yt),{rm:s(function(){var yr=D.indexOf(Yt);if(yr>-1)return D.splice(yr,1)},"rm")}}return s(Mt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:Ct,addListener:Mt,setOnlineState:je}}s(vht,"createOfflineListener");var xht="AppInsightsChannelPlugin",t_="duration",$l="tags",uae="deviceType",m0="data",v1="name",Z8="traceID",Ri="length",e6="stringify",r_="measurements",HA="dataType",n_="envelopeType",i_="toString",o_="enqueue",s_="count",x1="push",dae="emitLineDelimitedJson",Pk="clear",xq="markAsSent",t6="clearSent",fae="bufferOverride",r6="BUFFER_KEY",jx="SENT_BUFFER_KEY",Bk="concat",n6="MAX_BUFFER_SIZE",i6="triggerSend",Pu="diagLog",pae="initialize",o6="_sender",s6="endpointUrl",a6="instrumentationKey",mae="customHeaders",GSe="maxBatchSizeInBytes",hae="onunloadDisableBeacon",gae="isBeaconApiDisabled",jSe="alwaysUseXhrOverride",VSe="enableSessionStorageBuffer",WA="_buffer",$Se="onunloadDisableFetch",zSe="disableSendBeaconSplit",bq="getSenderInst",a_="_onError",Aae="_onPartialSuccess",Iq="_onSuccess",yae="itemsReceived",Cae="itemsAccepted",Eae="baseType",Tq="sampleRate",bht="getHashCodeScore",vae="baseType",Zs="baseData",hl="properties",YSe="true";function Ja(A,v,T){return PA(A,v,T,le)}s(Ja,"_setValueIf");function Iht(A,v,T){var S=T[$l]=T[$l]||{},D=v.ext=v.ext||{},L=v[$l]=v[$l]||[],q=D.user;q&&(Ja(S,ml.userAuthUserId,q.authId),Ja(S,ml.userId,q.id||q.localId));var Z=D.app;Z&&Ja(S,ml.sessionId,Z.sesId);var ae=D.device;ae&&(Ja(S,ml.deviceId,ae.id||ae.localId),Ja(S,ml[uae],ae.deviceClass),Ja(S,ml.deviceIp,ae.ip),Ja(S,ml.deviceModel,ae.model),Ja(S,ml[uae],ae[uae]));var Ce=v.ext.web;if(Ce){Ja(S,ml.deviceLanguage,Ce.browserLang),Ja(S,ml.deviceBrowserVersion,Ce.browserVer),Ja(S,ml.deviceBrowser,Ce.browser);var Te=T[m0]=T[m0]||{},Le=Te[Zs]=Te[Zs]||{},Ke=Le[hl]=Le[hl]||{};Ja(Ke,"domain",Ce.domain),Ja(Ke,"isManual",Ce.isManual?YSe:null),Ja(Ke,"screenRes",Ce.screenRes),Ja(Ke,"userConsent",Ce.userConsent?YSe:null)}var Me=D.os;Me&&(Ja(S,ml.deviceOS,Me[v1]),Ja(S,ml.deviceOSVersion,Me.osVer));var je=D.trace;je&&(Ja(S,ml.operationParentId,je.parentID),Ja(S,ml.operationName,ku(A,je[v1])),Ja(S,ml.operationId,je[Z8]));for(var ut={},rt=L[Ri]-1;rt>=0;rt--){var Ct=L[rt];oe(Ct,function(Yt,yr){ut[Yt]=yr}),L.splice(rt,1)}oe(L,function(Yt,yr){ut[Yt]=yr});var Mt=Ch(Ch({},S),ut);Mt[ml.internalSdkVersion]||(Mt[ml.internalSdkVersion]=ku(A,"javascript:".concat(Tht.Version),64)),T[$l]=A8(Mt)}s(Iht,"_extractPartAExtensions");function Vx(A,v,T){re(A)||oe(A,function(S,D){ht(D)?T[S]=D:he(D)?v[S]=D:vx()&&(v[S]=hd()[e6](D))})}s(Vx,"_extractPropsAndMeasurements");function c_(A,v){re(A)||oe(A,function(T,S){A[T]=S||v})}s(c_,"_convertPropsUndefinedToCustomDefinedValue");function l_(A,v,T,S){var D=new Kmt(A,S,v);Ja(D,"sampleRate",T[gSe]),(T[Zs]||{}).startTime&&(D.time=Pw(T[Zs].startTime)),D.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return D[v1]=D[v1].replace("{0}",L),Iht(A,T,D),T[$l]=T[$l]||[],A8(D)}s(l_,"_createEnvelope");function u_(A,v){re(v[Zs])&&Rr(A,1,46,"telemetryItem.baseData cannot be null.")}s(u_,"EnvelopeCreatorInit");var Tht={Version:"3.3.6"};function wht(A,v,T){u_(A,v);var S=v[Zs][r_]||{},D=v[Zs][hl]||{};Vx(v[m0],D,S),re(T)||c_(D,T);var L=v[Zs];if(re(L))return mk(A,"Invalid input for dependency data"),null;var q=L[hl]&&L[hl][ASe]?L[hl][ASe]:"GET",Z=new yq(A,L.id,L.target,L[v1],L[t_],L.success,L.responseCode,q,L.type,L.correlationContext,D,S),ae=new Zw(yq[HA],Z);return l_(A,yq[n_],v,ae)}s(wht,"DependencyEnvelopeCreator");function KSe(A,v,T){u_(A,v);var S={},D={};v[vae]!==Sk[HA]&&(S.baseTypeSource=v[vae]),v[vae]===Sk[HA]?(S=v[Zs][hl]||{},D=v[Zs][r_]||{}):v[Zs]&&Vx(v[Zs],S,D),Vx(v[m0],S,D),re(T)||c_(S,T);var L=v[Zs][v1],q=new Sk(A,L,S,D),Z=new Zw(Sk[HA],q);return l_(A,Sk[n_],v,Z)}s(KSe,"EventEnvelopeCreator");function _ht(A,v,T){u_(A,v);var S=v[Zs][r_]||{},D=v[Zs][hl]||{};Vx(v[m0],D,S),re(T)||c_(D,T);var L=v[Zs],q=gq.CreateFromInterface(A,L,D,S),Z=new Zw(gq[HA],q);return l_(A,gq[n_],v,Z)}s(_ht,"ExceptionEnvelopeCreator");function Sht(A,v,T){u_(A,v);var S=v[Zs],D=S[hl]||{},L=S[r_]||{};Vx(v[m0],D,L),re(T)||c_(D,T);var q=new Y8(A,S[v1],S.average,S.sampleCount,S.min,S.max,S.stdDev,D,L),Z=new Zw(Y8[HA],q);return l_(A,Y8[n_],v,Z)}s(Sht,"MetricEnvelopeCreator");function Rht(A,v,T){u_(A,v);var S,D=v[Zs];!re(D)&&!re(D[hl])&&!re(D[hl][t_])?(S=D[hl][t_],delete D[hl][t_]):!re(v[m0])&&!re(v[m0][t_])&&(S=v[m0][t_],delete v[m0][t_]);var L=v[Zs],q;((v.ext||{}).trace||{})[Z8]&&(q=v.ext.trace[Z8]);var Z=L.id||q,ae=L[v1],Ce=L.uri,Te=L[hl]||{},Le=L[r_]||{};if(re(L.refUri)||(Te.refUri=L.refUri),re(L.pageType)||(Te.pageType=L.pageType),re(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[i_]()),!re(L[hl])){var Ke=L[hl];oe(Ke,function(ut,rt){Te[ut]=rt})}Vx(v[m0],Te,Le),re(T)||c_(Te,T);var Me=new Aq(A,ae,Ce,S,Te,Le,Z),je=new Zw(Aq[HA],Me);return l_(A,Aq[n_],v,je)}s(Rht,"PageViewEnvelopeCreator");function kht(A,v,T){u_(A,v);var S=v[Zs],D=S[v1],L=S.uri||S.url,q=S[hl]||{},Z=S[r_]||{};Vx(v[m0],q,Z),re(T)||c_(q,T);var ae=new Eq(A,D,L,void 0,q,Z,S),Ce=new Zw(Eq[HA],ae);return l_(A,Eq[n_],v,Ce)}s(kht,"PageViewPerformanceEnvelopeCreator");function Pht(A,v,T){u_(A,v);var S=v[Zs].message,D=v[Zs].severityLevel,L=v[Zs][hl]||{},q=v[Zs][r_]||{};Vx(v[m0],L,q),re(T)||c_(L,T);var Z=new Cq(A,S,D,L,q),ae=new Zw(Cq[HA],Z);return l_(A,Cq[n_],v,ae)}s(Pht,"TraceEnvelopeCreator");var JSe=function(){function A(v,T){var S=[],D=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(q){return S=q,S},jl(A,this,function(q){q[o_]=function(Z){if(q[s_]()>=T.eventsLimitInMem){D||(Rr(v,2,105,"Maximum in-memory buffer size reached: "+q[s_](),!0),D=!0);return}Z.cnt=Z.cnt||0,!(!re(L)&&Z.cnt>L)&&S[x1](Z)},q[s_]=function(){return S[Ri]},q.size=function(){for(var Z=S[Ri],ae=0;ae<S[Ri];ae++)Z+=S[ae].item[Ri];return T[dae]||(Z+=2),Z},q[Pk]=function(){S=[],D=!1},q.getItems=function(){return S.slice(0)},q.batchPayloads=function(Z){if(Z&&Z[Ri]>0){var ae=[];jr(Z,function(Te){ae[x1](Te.item)});var Ce=T[dae]?ae.join(`
`):"["+ae.join(",")+"]";return Ce}return null},q.createNew=function(Z,ae,Ce){var Te=S.slice(0);Z=Z||v,ae=ae||{};var Le=Ce?new XSe(Z,ae):new xae(Z,ae);return jr(Te,function(Ke){Le[o_](Ke)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),xae=function(A){Tw(v,A);function v(T,S){var D=A.call(this,T,S)||this;return jl(v,D,function(L,q){L[xq]=function(Z){q[Pk]()},L[t6]=function(Z){}}),D}return s(v,"ArraySendBuffer"),v.__ieDyn=1,v}(JSe),Bht=["AI_buffer","AI_sentBuffer"],XSe=function(A){Tw(v,A);function v(S,D){var L=A.call(this,S,D)||this,q=!1,Z=D?.namePrefix,ae=D[fae]||{getItem:jmt,setItem:Vmt},Ce=ae.getItem,Te=ae.setItem,Le=D.maxRetryCnt;return jl(v,L,function(Ke,Me){var je=yr(v[r6]),ut=yr(v[jx]),rt=Ni(),Ct=ut[Bk](rt),Mt=Ke._set(je[Bk](Ct));Mt[Ri]>v[n6]&&(Mt[Ri]=v[n6]),Di(v[jx],[]),Di(v[r6],Mt),Ke[o_]=function(An){if(Ke[s_]()>=v[n6]){q||(Rr(S,2,67,"Maximum buffer size reached: "+Ke[s_](),!0),q=!0);return}An.cnt=An.cnt||0,!(!re(Le)&&An.cnt>Le)&&(Me[o_](An),Di(v[r6],Ke._get()))},Ke[Pk]=function(){Me[Pk](),Di(v[r6],Ke._get()),Di(v[jx],[]),q=!1},Ke[xq]=function(An){Di(v[r6],Ke._set(Yt(An,Ke._get())));var Hr=yr(v[jx]);Hr instanceof Array&&An instanceof Array&&(Hr=Hr[Bk](An),Hr[Ri]>v[n6]&&(Rr(S,1,67,"Sent buffer reached its maximum size: "+Hr[Ri],!0),Hr[Ri]=v[n6]),Di(v[jx],Hr))},Ke[t6]=function(An){var Hr=yr(v[jx]);Hr=Yt(An,Hr),Di(v[jx],Hr)},Ke.createNew=function(An,Hr,Li){Li=!!Li;var ea=Ke._get().slice(0),ss=yr(v[jx]).slice(0);An=An||S,Hr=Hr||{},Ke[Pk]();var Ot=Li?new v(An,Hr):new xae(An,Hr);return jr(ea,function(Wr){Ot[o_](Wr)}),Li&&Ot[xq](ss),Ot};function Yt(An,Hr){var Li=[],ea=[];return jr(An,function(ss){ea[x1](ss.item)}),jr(Hr,function(ss){!Qe(ss)&&fd(ea,ss.item)===-1&&Li[x1](ss)}),Li}s(Yt,"_removePayloadsFromBuffer");function yr(An){var Hr=An;return Hr=Z?Z+"_"+Hr:Hr,Kn(Hr)}s(yr,"_getBuffer");function Kn(An){try{var Hr=Ce(S,An);if(Hr){var Li=hd().parse(Hr);if(he(Li)&&(Li=hd().parse(Li)),Li&&tt(Li))return Li}}catch(ea){Rr(S,1,42," storage key: "+An+", "+jc(ea),{exception:Ft(ea)})}return[]}s(Kn,"_getBufferBase");function Di(An,Hr){var Li=An;try{Li=Z?Z+"_"+Li:Li;var ea=JSON[e6](Hr);Te(S,Li,ea)}catch(ss){Te(S,Li,JSON[e6]([])),Rr(S,2,41," storage key: "+Li+", "+jc(ss)+". Buffer cleared",{exception:Ft(ss)})}}s(Di,"_setBuffer");function Ni(){var An=[];try{return jr(Bht,function(Hr){var Li=Bo(Hr);if(An=An[Bk](Li),Z){var ea=Z+"_"+Hr,ss=Bo(ea);An=An[Bk](ss)}}),An}catch(Hr){Rr(S,2,41,"Transfer events from previous buffers: "+jc(Hr)+". previous Buffer items can not be removed",{exception:Ft(Hr)})}return[]}s(Ni,"_getPreviousEvents");function Bo(An){try{var Hr=Kn(An),Li=[];return jr(Hr,function(ea){var ss={item:ea,cnt:0};Li[x1](ss)}),$mt(S,An),Li}catch{}return[]}s(Bo,"_getItemsFromPreviousKey")}),L}s(v,"SessionStorageSendBuffer");var T;return T=v,v.VERSION="_1",v.BUFFER_KEY="AI_buffer"+T.VERSION,v.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,v.MAX_BUFFER_SIZE=2e3,v}(JSe),Dht=function(){function A(v){jl(A,this,function(T){T.serialize=function(q){var Z=S(q,"root");try{return hd()[e6](Z)}catch(ae){Rr(v,1,48,ae&&Qe(ae[i_])?ae[i_]():"Error serializing object",null,!0)}};function S(q,Z){var ae="__aiCircularRefCheck",Ce={};if(!q)return Rr(v,1,48,"cannot serialize object because it is null or undefined",{name:Z},!0),Ce;if(q[ae])return Rr(v,2,50,"Circular reference detected while serializing object",{name:Z},!0),Ce;if(!q.aiDataContract){if(Z==="measurements")Ce=L(q,"number",Z);else if(Z==="properties")Ce=L(q,"string",Z);else if(Z==="tags")Ce=L(q,"string",Z);else if(tt(q))Ce=D(q,Z);else{Rr(v,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Z},!0);try{hd()[e6](q),Ce=q}catch(Te){Rr(v,1,48,Te&&Qe(Te[i_])?Te[i_]():"Error serializing object",null,!0)}}return Ce}return q[ae]=!0,oe(q.aiDataContract,function(Te,Le){var Ke=Qe(Le)?Le()&1:Le&1,Me=Qe(Le)?Le()&4:Le&4,je=Le&2,ut=q[Te]!==void 0,rt=ke(q[Te])&&q[Te]!==null;if(Ke&&!ut&&!je)Rr(v,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:Z});else if(!Me){var Ct=void 0;rt?je?Ct=D(q[Te],Te):Ct=S(q[Te],Te):Ct=q[Te],Ct!==void 0&&(Ce[Te]=Ct)}}),delete q[ae],Ce}s(S,"_serializeObject");function D(q,Z){var ae;if(q)if(!tt(q))Rr(v,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Z},!0);else{ae=[];for(var Ce=0;Ce<q[Ri];Ce++){var Te=q[Ce],Le=S(Te,Z+"["+Ce+"]");ae[x1](Le)}}return ae}s(D,"_serializeArray");function L(q,Z,ae){var Ce;return q&&(Ce={},oe(q,function(Te,Le){if(Z==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[i_]?Ce[Te]=Le[i_]():Ce[Te]="invalid field: toString() is not defined.";else if(Z==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ke=parseFloat(Le);Ce[Te]=Ke}else Ce[Te]="invalid field: "+ae+" is of unknown type.",Rr(v,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),Nht=8,Lht=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(v){var T=this.getHashCode(v)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(v){if(v==="")return 0;for(;v[Ri]<Nht;)v=v[Bk](v);for(var T=5381,S=0;S<v[Ri];++S)T=(T<<5)+T+v.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),Mht=function(){function A(){var v=this,T=new Lht,S=new HSe;v.getSamplingScore=function(D){var L=0;return D[$l]&&D[$l][S.userId]?L=T.getHashCodeScore(D[$l][S.userId]):D.ext&&D.ext.user&&D.ext.user.id?L=T[bht](D.ext.user.id):D[$l]&&D[$l][S.operationId]?L=T.getHashCodeScore(D[$l][S.operationId]):D.ext&&D.ext.telemetryTrace&&D.ext.telemetryTrace[Z8]?L=T.getHashCodeScore(D.ext.telemetryTrace[Z8]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),Fht=function(){function A(v,T){this.INT_MAX_VALUE=2147483647;var S=T||Hw(null);(v>100||v<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:v},!0),v=100),this[Tq]=v,this.samplingScoreGenerator=new Mht}return s(A,"Sample"),A.prototype.isSampledIn=function(v){var T=this[Tq],S=!1;return T==null||T>=100||v.baseType===Y8[HA]?!0:(S=this.samplingScoreGenerator.getSamplingScore(v)<T,S)},A}(),Rs,b1,GA=void 0,ZSe="",Oht=65e3;function e2e(A){try{return A.responseText}catch{}return null}s(e2e,"_getResponseText");function Qht(A){return A&&A.sendPOST}s(Qht,"isOverrideFn");var t2e=Zt((Rs={endpointUrl:P8(le,Kse+Ik)},Rs[dae]=Np(),Rs.maxBatchInterval=15e3,Rs[GSe]=102400,Rs.disableTelemetry=Np(),Rs[VSe]=Np(!0),Rs.isRetryDisabled=Np(),Rs[gae]=Np(!0),Rs[zSe]=Np(!0),Rs.disableXhr=Np(),Rs[$Se]=Np(),Rs[hae]=Np(),Rs[a6]=GA,Rs.namePrefix=GA,Rs.samplingPercentage=P8(Uht,100),Rs[mae]=GA,Rs.convertUndefined=GA,Rs.eventsLimitInMem=1e4,Rs[fae]=!1,Rs.httpXHROverride={isVal:Qht,v:GA},Rs[jSe]=Np(),Rs.transports=GA,Rs.retryCodes=GA,Rs.maxRetryCnt={isVal:ht,v:10},Rs));function Uht(A){return!isNaN(A)&&A>0&&A<=100}s(Uht,"_chkSampling");var qht=(b1={},b1[Sk.dataType]=KSe,b1[Cq.dataType]=Pht,b1[Aq.dataType]=Rht,b1[Eq.dataType]=kht,b1[gq.dataType]=_ht,b1[Y8.dataType]=Sht,b1[yq.dataType]=wht,b1),r2e=function(A){Tw(v,A);function v(){var T=A.call(this)||this;T.priority=1001,T.identifier=xht;var S,D,L,q,Z,ae,Ce,Te=0,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,yr,Kn,Di,Ni,Bo,An,Hr,Li,ea,ss,Ot,Wr,Io,wt,Pn,Ca,Do,gl;return jl(v,T,function(ct,Ec){i2e(),ct.pause=function(){Kx(),L=!0},ct.resume=function(){L&&(L=!1,D=null,Wo(),Mk())},ct.flush=function(qe,At,er){if(qe===void 0&&(qe=!0),!L){Kx();try{return ct[i6](qe,null,er||1)}catch(Br){Rr(ct[Pu](),1,22,"flush failed, telemetry will not be collected: "+jc(Br),{exception:Ft(Br)})}}},ct.onunloadFlush=function(){if(!L)if(Ct||Ot)try{return ct[i6](!0,lf,2)}catch(qe){Rr(ct[Pu](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+jc(qe),{exception:Ft(qe)})}else ct.flush(!1)},ct.addHeader=function(qe,At){Ce[qe]=At},ct[pae]=function(qe,At,er,Br){ct.isInitialized()&&Rr(ct[Pu](),1,28,"Sender is already initialized"),Ec[pae](qe,At,er,Br);var Qn=ct.identifier;Z=new Dht(At.logger),S=0,D=null,ct[o6]=null,ae=0;var En=ct[Pu]();Me=mSe(wh("Sender"),At.evtNamespace&&At.evtNamespace()),Ke=vht(Me),ct._addHook(_h(qe,function(co){var Xa=co.cfg;Xa.storagePrefix&&Gmt(Xa.storagePrefix);var h0=Ox(null,Xa,At),Ci=h0.getExtCfg(Qn,t2e),o2e=Ci[s6];if(je&&o2e===je){var Tae=Xa[s6];Tae&&Tae!==o2e&&(Ci[s6]=Tae)}Tt(Ci[a6])&&(Ci[a6]=Xa[a6]),Ye(ct,"_senderConfig",{g:s(function(){return Ci},"g")}),ut!==Ci[s6]&&(je=ut=Ci[s6]),At.activeStatus()===IA.PENDING?ct.pause():At.activeStatus()===IA.ACTIVE&&ct.resume(),yr&&yr!==Ci[mae]&&jr(yr,function(Yl){delete Ce[Yl.header]}),rt=Ci[GSe],Ct=(Ci[hae]===!1||Ci[gae]===!1)&&DA(),Mt=Ci[hae]===!1&&DA(),Yt=Ci[gae]===!1&&DA(),Ot=Ci[jSe],Wr=!!Ci.disableXhr,gl=Ci.retryCodes;var wae=Ci[fae],Fk=!!Ci[VSe]&&(!!wae||SSe()),s2e=Ci.namePrefix,jht=Fk!==Hr||Fk&&ea!==s2e||Fk&&Li!==wae;if(ct[WA]){if(jht)try{ct[WA]=ct[WA].createNew(En,Ci,Fk)}catch(Yl){Rr(ct[Pu](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+jc(Yl),{exception:Ft(Yl)})}Wo()}else ct[WA]=Fk?new XSe(En,Ci):new xae(En,Ci);ea=s2e,Hr=Fk,Li=wae,Io=!Ci[$Se]&&Fw(!0),Ca=!!Ci[zSe],ct._sample=new Fht(Ci.samplingPercentage,En),Di=Ci[a6],!Tt(Di)&&!n2e(Di,Xa)&&Rr(En,1,100,"Invalid Instrumentation key "+Di),yr=Ci[mae],he(je)&&!TSe(je)&&yr&&yr[Ri]>0?jr(yr,function(Yl){T.addHeader(Yl.header,Yl.value)}):yr=null,ss=Ci.enableSendPromise;var a2e=Al();Do?Do.SetConfig(a2e):(Do=new Cc,Do[pae](a2e,En));var Rq=Ci.httpXHROverride,kq=null,d6=null,Vht=IU([3,1,2],Ci.transports);kq=Do&&Do[bq](Vht,!1);var _ae=Do&&Do.getFallbackInst();wt=s(function(Yl,d_){return Lr(_ae,Yl,d_)},"_xhrSend"),Pn=s(function(Yl,d_){return Lr(_ae,Yl,d_,!1)},"_fallbackSend"),kq=Ot?Rq:kq||Rq||_ae,ct[o6]=function(Yl,d_){return Lr(kq,Yl,d_)},Io&&(Le=Lk);var Sae=IU([3,1],Ci.unloadTransports);Io||(Sae=Sae.filter(function(Yl){return Yl!==2})),d6=Do&&Do[bq](Sae,!0),d6=Ot?Rq:d6||Rq,(Ot||Ci.unloadTransports||!Le)&&d6&&(Le=s(function(Yl,d_){return Lr(d6,Yl,d_)},"_syncUnloadSender")),Le||(Le=wt),Kn=Ci.disableTelemetry,Ni=Ci.convertUndefined||GA,Bo=Ci.isRetryDisabled,An=Ci.maxBatchInterval}))},ct.processTelemetry=function(qe,At){At=ct._getTelCtx(At);var er=At[Pu]();try{var Br=kh(qe,er);if(!Br)return;var Qn=Yx(qe,er);if(!Qn)return;var En=Z.serialize(Qn),co=ct[WA];Wo(En);var Xa={item:En,cnt:0};co[o_](Xa),Mk()}catch(h0){Rr(er,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+jc(h0),{exception:Ft(h0)})}ct.processNext(qe,At)},ct.isCompletelyIdle=function(){return!L&&Te===0&&ct._buffer[s_]()===0},ct.getOfflineListener=function(){return Ke},ct._xhrReadyStateChange=function(qe,At,er){if(!Bh(At))return Op(qe,At,er)},ct[i6]=function(qe,At,er){qe===void 0&&(qe=!0);var Br;if(!L)try{var Qn=ct[WA];if(Kn)Qn[Pk]();else if(Qn[s_]()>0){var En=Qn.getItems();Sq(er||0,qe),At?Br=At.call(ct,En,qe):Br=ct[o6](En,qe)}Kx()}catch(Xa){var co=xx();(!co||co>9)&&Rr(ct[Pu](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+jc(Xa),{exception:Ft(Xa)})}return Br},ct.getOfflineSupport=function(){return{getUrl:s(function(){return je},"getUrl"),createPayload:pt,serialize:ta,batch:zl,shouldProcess:s(function(qe){return!!kh(qe)},"shouldProcess")}},ct._doTeardown=function(qe,At){ct.onunloadFlush(),kx(Ke,!1),i2e()},ct[a_]=function(qe,At,er){if(!Bh(qe))return Ad(qe,At)},ct[Aae]=function(qe,At){if(!Bh(qe))return $x(qe,At)},ct[Iq]=function(qe,At){if(!Bh(qe))return Rh(qe)},ct._xdrOnLoad=function(qe,At){if(!Bh(At))return Ea(qe,At)};function Ea(qe,At){var er=e2e(qe);if(qe&&(er+""=="200"||er===""))S=0,ct[Iq](At,0);else{var Br=Nr(er);Br&&Br[yae]&&Br[yae]>Br[Cae]&&!Bo?ct[Aae](At,Br):ct[a_](At,bU(qe))}}s(Ea,"_xdrOnLoad");function Al(){try{var qe={xdrOnComplete:s(function(er,Br,Qn){var En=zx(Qn);if(En)return Ea(er,En)},"xdrOnComplete"),fetchOnComplete:s(function(er,Br,Qn,En){var co=zx(En);if(co)return ks(er.status,co,er.url,co[Ri],er.statusText,Qn||"")},"fetchOnComplete"),xhrOnComplete:s(function(er,Br,Qn){var En=zx(Qn);if(En)return Op(er,En,En[Ri])},"xhrOnComplete"),beaconOnRetry:s(function(er,Br,Qn){return Ph(er,Br,Qn)},"beaconOnRetry")},At={enableSendPromise:ss,isOneDs:!1,disableCredentials:!1,disableXhr:Wr,disableBeacon:!Yt,disableBeaconSync:!Mt,senderOnCompleteCallBack:qe};return At}catch{}return null}s(Al,"_getSendPostMgrConfig");function Op(qe,At,er){qe.readyState===4&&ks(qe.status,At,qe.responseURL,er,nk(qe),e2e(qe)||qe.response)}s(Op,"_xhrReadyStateChange");function Ad(qe,At,er){Rr(ct[Pu](),2,26,"Failed to send telemetry.",{message:At}),ct._buffer&&ct._buffer[t6](qe)}s(Ad,"_onError");function $x(qe,At){for(var er=[],Br=[],Qn=At.errors.reverse(),En=0,co=Qn;En<co.length;En++){var Xa=co[En],h0=qe.splice(Xa.index,1)[0];Jx(Xa.statusCode)?Br[x1](h0):er[x1](h0)}qe[Ri]>0&&ct[Iq](qe,At[Cae]),er[Ri]>0&&ct[a_](er,nk(null,["partial success",At[Cae],"of",At.itemsReceived].join(" "))),Br[Ri]>0&&(u6(Br),Rr(ct[Pu](),2,40,"Partial success. Delivered: "+qe[Ri]+", Failed: "+er[Ri]+". Will retry to send "+Br[Ri]+" our of "+At[yae]+" items"))}s($x,"_onPartialSuccess");function Rh(qe,At){ct._buffer&&ct._buffer[t6](qe)}s(Rh,"_onSuccess");function zx(qe){try{if(qe){var At=qe,er=At.oriPayload;return er&&er[Ri]?er:null}}catch{}return null}s(zx,"_getPayloadArr");function kh(qe,At){if(Kn)return!1;if(!qe)return At&&Rr(At,1,7,"Cannot send empty telemetry"),!1;if(qe.baseData&&!qe[Eae])return At&&Rr(At,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(qe[Eae]||(qe[Eae]="EventData"),!ct[o6])return At&&Rr(At,1,28,"Sender was not initialized"),!1;if(hr(qe))qe[gSe]=ct._sample[Tq];else return At&&Rr(At,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ct._sample[Tq]}),!1;return!0}s(kh,"_validate");function Yx(qe,At){var er=qe.iKey||Di,Br=v.constructEnvelope(qe,er,At,Ni);if(!Br){Rr(At,1,47,"Unable to create an AppInsights envelope");return}var Qn=!1;if(qe[$l]&&qe[$l][Yse]&&(jr(qe[$l][Yse],function(En){try{En&&En(Br)===!1&&(Qn=!0,mk(At,"Telemetry processor check returns false"))}catch(co){Rr(At,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+jc(co),{exception:Ft(co)},!0)}}),delete qe[$l][Yse]),!Qn)return Br}s(Yx,"_getEnvelope");function ta(qe){var At=ZSe,er=ct[Pu]();try{var Br=kh(qe,er),Qn=null;Br&&(Qn=Yx(qe,er)),Qn&&(At=Z.serialize(Qn))}catch{}return At}s(ta,"_serialize");function zl(qe){var At=ZSe;return qe&&qe[Ri]&&(At="["+qe.join(",")+"]"),At}s(zl,"_batch");function pt(qe){var At=Qo();return{urlString:je,data:qe,headers:At}}s(pt,"_createPayload");function hr(qe){return ct._sample.isSampledIn(qe)}s(hr,"_isSampledIn");function Fn(qe,At,er,Br){At===200&&qe?ct._onSuccess(qe,qe[Ri]):Br&&ct[a_](qe,Br)}s(Fn,"_getOnComplete");function Lr(qe,At,er,Br){Br===void 0&&(Br=!0);var Qn=s(function(Xa,h0,Ci){return Fn(At,Xa,h0,Ci)},"onComplete"),En=On(At),co=qe&&qe.sendPOST;return co&&En?(Br&&ct._buffer[xq](At),co(En,Qn,!er)):null}s(Lr,"_doSend");function On(qe){if(tt(qe)&&qe[Ri]>0){var At=ct[WA].batchPayloads(qe),er=Qo(),Br={data:At,urlString:je,headers:er,disableXhrSync:Wr,disableFetchKeepAlive:!Io,oriPayload:qe};return Br}return null}s(On,"_getPayload");function Qo(){try{var qe=Ce||{};return TSe(je)&&(qe[ySe[6]]=ySe[7]),qe}catch{}return null}s(Qo,"_getHeaders");function Wo(qe){var At=qe?qe[Ri]:0;return ct[WA].size()+At>rt?((!Ke||Ke.isOnline())&&ct[i6](!0,null,10),!0):!1}s(Wo,"_checkMaxSize");function ks(qe,At,er,Br,Qn,En){var co=null;if(ct._appId||(co=Nr(En),co&&co.appId&&(ct._appId=co.appId)),(qe<200||qe>=300)&&qe!==0){if((qe===301||qe===307||qe===308)&&!Bu(er)){ct[a_](At,Qn);return}if(Ke&&!Ke.isOnline()){if(!Bo){var Xa=10;u6(At,Xa),Rr(ct[Pu](),2,40,". Offline - Response Code: ".concat(qe,". Offline status: ").concat(!Ke.isOnline(),". Will retry to send ").concat(At.length," items."))}return}!Bo&&Jx(qe)?(u6(At),Rr(ct[Pu](),2,40,". Response code "+qe+". Will retry to send "+At[Ri]+" items.")):ct[a_](At,Qn)}else Bu(er),qe===206?(co||(co=Nr(En)),co&&!Bo?ct[Aae](At,co):ct[a_](At,Qn)):(S=0,ct[Iq](At,Br))}s(ks,"_checkResponsStatus");function Bu(qe){return ae>=10?!1:!re(qe)&&qe!==""&&qe!==je?(je=qe,++ae,!0):!1}s(Bu,"_checkAndUpdateEndPointUrl");function lf(qe,At){if(Le)Le(qe,!1);else{var er=Do&&Do[bq]([3],!0);return Lr(er,qe,At)}}s(lf,"_doUnloadSend");function Ph(qe,At,er){var Br=qe,Qn=Br&&Br.oriPayload;if(Ca)Pn&&Pn(Qn,!0),Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var En=[],co=0;co<Qn[Ri];co++){var Xa=Qn[co],h0=[Xa],Ci=On(h0);er(Ci,At)?ct._onSuccess(h0,h0[Ri]):En[x1](Xa)}En[Ri]>0&&(Pn&&Pn(En,!0),Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Ph,"_onBeaconRetry");function Bh(qe){try{if(qe&&qe[Ri])return he(qe[0])}catch{}return null}s(Bh,"_isStringArr");function Lk(qe,At){var er=null;if(tt(qe)){for(var Br=qe[Ri],Qn=0;Qn<qe[Ri];Qn++)Br+=qe[Qn].item[Ri];var En=Do.getSyncFetchPayload();En+Br<=Oht?er=2:DA()?er=3:(er=1,Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var co=Do&&Do[bq]([er],!0);return Lr(co,qe,At)}return null}s(Lk,"_fetchKeepAliveSender");function u6(qe,At){if(At===void 0&&(At=1),!(!qe||qe[Ri]===0)){var er=ct[WA];er[t6](qe),S++;for(var Br=0,Qn=qe;Br<Qn.length;Br++){var En=Qn[Br];En.cnt=En.cnt||0,En.cnt++,er[o_](En)}Iae(At),Mk()}}s(u6,"_resendPayload");function Iae(qe){var At=10,er;if(S<=1)er=At;else{var Br=(Math.pow(2,S)-1)/2,Qn=e1(Math.random()*Br*At)+1;Qn=qe*Qn,er=_e(ni(Qn,3600),At)}var En=yA()+er*1e3;D=En}s(Iae,"_setRetryTime");function Mk(){if(!q&&!L){var qe=D?_e(0,D-yA()):0,At=_e(An,qe);q=vA(function(){q=null,ct[i6](!0,null,1)},At)}}s(Mk,"_setupTimer");function Kx(){q&&q.cancel(),q=null,D=null}s(Kx,"_clearScheduledTimer");function Jx(qe){return re(gl)?qe===401||qe===408||qe===429||qe===500||qe===502||qe===503||qe===504:gl[Ri]&&gl.indexOf(qe)>-1}s(Jx,"_isRetriable");function _q(){var qe="getNotifyMgr";return ct.core[qe]?ct.core[qe]():ct.core._notificationManager}s(_q,"_getNotifyMgr");function Sq(qe,At){var er=_q();if(er&&er.eventsSendRequest)try{er.eventsSendRequest(qe,At)}catch(Br){Rr(ct[Pu](),1,74,"send request notification failed: "+jc(Br),{exception:Ft(Br)})}}s(Sq,"_notifySendRequest");function n2e(qe,At){var er=At.disableInstrumentationKeyValidation,Br=re(er)?!1:er;if(Br)return!0;var Qn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",En=new RegExp(Qn);return En.test(qe)}s(n2e,"_validateInstrumentationKey");function i2e(){ct[o6]=null,ct[WA]=null,ct._appId=null,ct._sample=null,Ce={},Ke=null,S=0,D=null,L=!1,q=null,Z=null,ae=0,Te=0,Le=null,Me=null,je=null,ut=null,rt=0,Ct=!1,yr=null,Kn=!1,Di=null,Ni=GA,Bo=!1,Hr=null,ea=GA,Wr=!1,Io=!1,Ca=!1,wt=null,Pn=null,Do=null,Ye(ct,"_senderConfig",{g:s(function(){return xU({},t2e)},"g")})}s(i2e,"_initDefaults")}),T}return s(v,"Sender"),v.constructEnvelope=function(T,S,D,L){var q;S!==T.iKey&&!re(S)?q=Ch(Ch({},T),{iKey:S}):q=T;var Z=qht[q.baseType]||KSe;return Z(D,q,L)},v}(gt),Dk="instrumentationKey",wq="connectionString",c6="endpointUrl",l6="userOverrideEndpointUrl",Nk,bae=void 0,Hht=(Nk={diagnosticLogInterval:P8(Wht,1e4)},Nk[wq]=bae,Nk.endpointUrl=bae,Nk[Dk]=bae,Nk.extensionConfig={},Nk);function Wht(A){return A&&A>0}s(Wht,"_chkDiagLevel");var Ght=function(){function A(v){var T=new _t,S;(re(v)||re(v[Dk])&&re(v[wq]))&&Yr("Invalid input configuration"),jl(A,this,function(L){Ye(L,"config",{g:s(function(){return S},"g")}),q(),L.initialize=q,L.track=D,g8(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function q(){var Z=cf(v||{},Hht);S=Z.cfg,T.addUnloadHook(_h(Z,function(){var ae=S[wq];if(Tt(ae)){var Ce=z5(function(Me,je){rf(ae,function(ut){var rt=ut.value,Ct=S[Dk];if(!ut.rejected&&rt){S[wq]=rt;var Mt=iae(rt);Ct=Mt.instrumentationkey||Ct}Me(Ct)})}),Te=z5(function(Me,je){rf(ae,function(ut){var rt=ut.value,Ct=S[c6];if(!ut.rejected&&rt){var Mt=iae(rt),Yt=Mt.ingestionendpoint;Ct=Yt?Yt+Ik:Ct}Me(Ct)})});S[Dk]=Ce,S[c6]=S[l6]||Te}if(he(ae)){var Le=iae(ae),Ke=Le.ingestionendpoint;S[c6]=S[l6]?S[l6]:Ke+Ik,S[Dk]=Le.instrumentationkey||S[Dk]}S[c6]=S[l6]?S[l6]:S[c6]})),T.initialize(S,[new r2e])}s(q,"_initialize")});function D(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(D,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=_t,t.ApplicationInsights=Ght,t.Sender=r2e,t.SeverityLevel=Eht,t.arrForEach=jr,t.isNullOrUndefined=re,t.proxyFunctions=g8,t.throwError=Yr})});var wde=U((EQr,u8e)=>{d();var J4=1e3,X4=J4*60,Z4=X4*60,G_=Z4*24,dTt=G_*7,fTt=G_*365.25;u8e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return pTt(t);if(r==="number"&&isFinite(t))return e.long?hTt(t):mTt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function pTt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fTt;case"weeks":case"week":case"w":return r*dTt;case"days":case"day":case"d":return r*G_;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Z4;case"minutes":case"minute":case"mins":case"min":case"m":return r*X4;case"seconds":case"second":case"secs":case"sec":case"s":return r*J4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(pTt,"parse");function mTt(t){var e=Math.abs(t);return e>=G_?Math.round(t/G_)+"d":e>=Z4?Math.round(t/Z4)+"h":e>=X4?Math.round(t/X4)+"m":e>=J4?Math.round(t/J4)+"s":t+"ms"}s(mTt,"fmtShort");function hTt(t){var e=Math.abs(t);return e>=G_?LG(t,e,G_,"day"):e>=Z4?LG(t,e,Z4,"hour"):e>=X4?LG(t,e,X4,"minute"):e>=J4?LG(t,e,J4,"second"):t+" ms"}s(hTt,"fmtLong");function LG(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(LG,"plural")});var _de=U((bQr,d8e)=>{d();function gTt(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=wde(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,m=null,h,g;function y(...E){if(!y.enabled)return;let x=y,b=Number(new Date),_=b-(p||b);x.diff=_,x.prev=p,x.curr=b,p=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let k=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(N,M)=>{if(N==="%%")return"%";k++;let J=r.formatters[M];if(typeof J=="function"){let pe=E[k];N=J.call(x,pe),E.splice(k,1),k--}return N}),r.formatArgs.call(x,E),(x.log||r.log).apply(x,E)}return s(y,"debug"),y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),"get"),set:s(E=>{m=E},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(f,p){let m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,m=(typeof f=="string"?f:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(f=m[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(f))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(gTt,"setup");d8e.exports=gTt});var f8e=U((B0,MG)=>{d();B0.formatArgs=yTt;B0.save=CTt;B0.load=ETt;B0.useColors=ATt;B0.storage=vTt();B0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();B0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ATt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(ATt,"useColors");function yTt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+MG.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(yTt,"formatArgs");B0.log=console.debug||console.log||(()=>{});function CTt(t){try{t?B0.storage.setItem("debug",t):B0.storage.removeItem("debug")}catch{}}s(CTt,"save");function ETt(){let t;try{t=B0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(ETt,"load");function vTt(){try{return localStorage}catch{}}s(vTt,"localstorage");MG.exports=_de()(B0);var{formatters:xTt}=MG.exports;xTt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var m8e=U((SQr,p8e)=>{"use strict";d();p8e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var A8e=U((kQr,g8e)=>{"use strict";d();var bTt=require("os"),h8e=require("tty"),rm=m8e(),{env:Tl}=process,kb;rm("no-color")||rm("no-colors")||rm("color=false")||rm("color=never")?kb=0:(rm("color")||rm("colors")||rm("color=true")||rm("color=always"))&&(kb=1);"FORCE_COLOR"in Tl&&(Tl.FORCE_COLOR==="true"?kb=1:Tl.FORCE_COLOR==="false"?kb=0:kb=Tl.FORCE_COLOR.length===0?1:Math.min(parseInt(Tl.FORCE_COLOR,10),3));function Sde(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Sde,"translateLevel");function Rde(t,e){if(kb===0)return 0;if(rm("color=16m")||rm("color=full")||rm("color=truecolor"))return 3;if(rm("color=256"))return 2;if(t&&!e&&kb===void 0)return 0;let r=kb||0;if(Tl.TERM==="dumb")return r;if(process.platform==="win32"){let n=bTt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Tl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Tl)||Tl.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Tl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Tl.TEAMCITY_VERSION)?1:0;if(Tl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Tl){let n=parseInt((Tl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Tl.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Tl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Tl.TERM)||"COLORTERM"in Tl?1:r}s(Rde,"supportsColor");function ITt(t){let e=Rde(t,t&&t.isTTY);return Sde(e)}s(ITt,"getSupportLevel");g8e.exports={supportsColor:ITt,stdout:Sde(Rde(!0,h8e.isatty(1))),stderr:Sde(Rde(!0,h8e.isatty(2)))}});var C8e=U((au,OG)=>{d();var TTt=require("tty"),FG=require("util");au.init=BTt;au.log=RTt;au.formatArgs=_Tt;au.save=kTt;au.load=PTt;au.useColors=wTt;au.destroy=FG.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");au.colors=[6,2,3,4,5,1];try{let t=A8e();t&&(t.stderr||t).level>=2&&(au.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}au.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function wTt(){return"colors"in au.inspectOpts?!!au.inspectOpts.colors:TTt.isatty(process.stderr.fd)}s(wTt,"useColors");function _Tt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+OG.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=STt()+e+" "+t[0]}s(_Tt,"formatArgs");function STt(){return au.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(STt,"getDate");function RTt(...t){return process.stderr.write(FG.format(...t)+`
`)}s(RTt,"log");function kTt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(kTt,"save");function PTt(){return process.env.DEBUG}s(PTt,"load");function BTt(t){t.inspectOpts={};let e=Object.keys(au.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=au.inspectOpts[e[r]]}s(BTt,"init");OG.exports=_de()(au);var{formatters:y8e}=OG.exports;y8e.o=function(t){return this.inspectOpts.colors=this.useColors,FG.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};y8e.O=function(t){return this.inspectOpts.colors=this.useColors,FG.inspect(t,this.inspectOpts)}});var fy=U((LQr,kde)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kde.exports=f8e():kde.exports=C8e()});var x8e=U(xf=>{"use strict";d();var DTt=xf&&xf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NTt=xf&&xf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E8e=xf&&xf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&DTt(e,t,r);return NTt(e,t),e};Object.defineProperty(xf,"__esModule",{value:!0});xf.req=xf.json=xf.toBuffer=void 0;var LTt=E8e(require("http")),MTt=E8e(require("https"));async function v8e(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(v8e,"toBuffer");xf.toBuffer=v8e;async function FTt(t){let r=(await v8e(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(FTt,"json");xf.json=FTt;function OTt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?MTt:LTt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(OTt,"req");xf.req=OTt});var Bde=U(D0=>{"use strict";d();var I8e=D0&&D0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QTt=D0&&D0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),T8e=D0&&D0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&I8e(e,t,r);return QTt(e,t),e},UTt=D0&&D0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&I8e(e,t,r)};Object.defineProperty(D0,"__esModule",{value:!0});D0.Agent=void 0;var qTt=T8e(require("net")),b8e=T8e(require("http")),HTt=require("https");UTt(x8e(),D0);var py=Symbol("AgentBaseInternalState"),Pde=class extends b8e.Agent{static{s(this,"Agent")}constructor(e){super(e),this[py]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new qTt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?HTt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof b8e.Agent)return c.addRequest(e,i);this[py].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[py].currentSocket;if(this[py].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[py].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[py]&&(this[py].defaultPort=e)}get protocol(){return this[py].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[py]&&(this[py].protocol=e)}};D0.Agent=Pde});var w8e=U(eP=>{"use strict";d();var WTt=eP&&eP.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eP,"__esModule",{value:!0});eP.parseProxyResponse=void 0;var GTt=WTt(fy()),QG=(0,GTt.default)("https-proxy-agent:parse-proxy-response");function jTt(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),QG("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),QG("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){QG("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=g.split(" "),E=+y[1],x=y.slice(2).join(" "),b={};for(let _ of h){if(!_)continue;let k=_.indexOf(":");if(k===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let P=_.slice(0,k).toLowerCase(),N=_.slice(k+1).trimStart(),M=b[P];typeof M=="string"?b[P]=[M,N]:Array.isArray(M)?M.push(N):b[P]=N}QG("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:E,statusText:x,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(jTt,"parseProxyResponse");eP.parseProxyResponse=jTt});var P8e=U(nm=>{"use strict";d();var VTt=nm&&nm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Tt=nm&&nm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),R8e=nm&&nm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&VTt(e,t,r);return $Tt(e,t),e},k8e=nm&&nm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nm,"__esModule",{value:!0});nm.HttpsProxyAgent=void 0;var Dde=R8e(require("net")),_8e=R8e(require("tls")),zTt=k8e(require("assert")),YTt=k8e(fy()),KTt=Bde(),JTt=require("url"),XTt=w8e(),p9=(0,YTt.default)("https-proxy-agent"),UG=class extends KTt.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new JTt.URL(e):e,this.proxyHeaders=r?.headers??{},p9("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?S8e(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){p9("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=_8e.connect({...this.connectOpts,servername:m})}else p9("Creating `net.Socket`: %o",this.connectOpts),i=Dde.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=Dde.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,XTt.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",ZTt),r.secureEndpoint){p9("Upgrading socket connection to TLS");let m=r.servername||r.host;return _8e.connect({...S8e(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new Dde.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{p9("Replaying proxy buffer for failed request"),(0,zTt.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};UG.protocols=["http","https"];nm.HttpsProxyAgent=UG;function ZTt(t){t.resume()}s(ZTt,"resume");function S8e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(S8e,"omit")});var N8e=U(im=>{"use strict";d();var ewt=im&&im.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),twt=im&&im.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),D8e=im&&im.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ewt(e,t,r);return twt(e,t),e},rwt=im&&im.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(im,"__esModule",{value:!0});im.HttpProxyAgent=void 0;var nwt=D8e(require("net")),iwt=D8e(require("tls")),owt=rwt(fy()),swt=require("events"),awt=Bde(),B8e=require("url"),tP=(0,owt.default)("http-proxy-agent"),qG=class extends awt.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new B8e.URL(e):e,this.proxyHeaders=r?.headers??{},tP("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?cwt(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new B8e.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;tP("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(tP("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),tP("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(tP("Creating `tls.Socket`: %o",this.connectOpts),o=iwt.connect(this.connectOpts)):(tP("Creating `net.Socket`: %o",this.connectOpts),o=nwt.connect(this.connectOpts)),await(0,swt.once)(o,"connect"),o}};qG.protocols=["http","https"];im.HttpProxyAgent=qG;function cwt(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(cwt,"omit")});var r6e=U(rj=>{"use strict";d();Object.defineProperty(rj,"__esModule",{value:!0});rj.state=void 0;rj.state={instrumenterImplementation:void 0}});var u6e=U(aj=>{"use strict";d();Object.defineProperty(aj,"__esModule",{value:!0});aj.state=void 0;aj.state={operationRequestMap:new WeakMap}});var TP=U((N0e,m9e)=>{d();var Zj=require("buffer"),Iy=Zj.Buffer;function p9e(t,e){for(var r in t)e[r]=t[r]}s(p9e,"copyProps");Iy.from&&Iy.alloc&&Iy.allocUnsafe&&Iy.allocUnsafeSlow?m9e.exports=Zj:(p9e(Zj,N0e),N0e.Buffer=DS);function DS(t,e,r){return Iy(t,e,r)}s(DS,"SafeBuffer");DS.prototype=Object.create(Iy.prototype);p9e(Iy,DS);DS.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Iy(t,e,r)};DS.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Iy(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};DS.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Iy(t)};DS.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Zj.SlowBuffer(t)}});var L0e=U((ssn,h9e)=>{d();var eV=TP().Buffer,USt=require("stream"),qSt=require("util");function tV(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=eV.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=eV.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(tV,"DataStream");qSt.inherits(tV,USt);tV.prototype.write=s(function(e){this.buffer=eV.concat([this.buffer,eV.from(e)]),this.emit("data",e)},"write");tV.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");h9e.exports=tV});var A9e=U((lsn,g9e)=>{"use strict";d();function M0e(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(M0e,"getParamSize");var HSt={ES256:M0e(256),ES384:M0e(384),ES512:M0e(521)};function WSt(t){var e=HSt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(WSt,"getParamBytesForAlg");g9e.exports=WSt});var I9e=U((fsn,b9e)=>{"use strict";d();var rV=TP().Buffer,C9e=A9e(),nV=128,E9e=0,GSt=32,jSt=16,VSt=2,v9e=jSt|GSt|E9e<<6,iV=VSt|E9e<<6;function $St(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s($St,"base64Url");function x9e(t){if(rV.isBuffer(t))return t;if(typeof t=="string")return rV.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(x9e,"signatureAsBuffer");function zSt(t,e){t=x9e(t);var r=C9e(e),n=r+1,i=t.length,o=0;if(t[o++]!==v9e)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(nV|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==iV)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==iV)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=rV.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,f+Math.max(-m,0),f+u),h=h.toString("base64"),h=$St(h),h}s(zSt,"derToJose");function y9e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=nV;return i&&--n,n}s(y9e,"countPadding");function YSt(t,e){t=x9e(t);var r=C9e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=y9e(t,0,r),o=y9e(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<nV,f=rV.allocUnsafe((u?2:3)+l),p=0;return f[p++]=v9e,u?f[p++]=l:(f[p++]=nV|1,f[p++]=l&255),f[p++]=iV,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=iV,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(YSt,"joseToDer");b9e.exports={derToJose:zSt,joseToDer:YSt}});var w9e=U((hsn,T9e)=>{"use strict";d();var TL=require("buffer").Buffer,F0e=require("buffer").SlowBuffer;T9e.exports=oV;function oV(t,e){if(!TL.isBuffer(t)||!TL.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(oV,"bufferEq");oV.install=function(){TL.prototype.equal=F0e.prototype.equal=s(function(e){return oV(this,e)},"equal")};var KSt=TL.prototype.equal,JSt=F0e.prototype.equal;oV.restore=function(){TL.prototype.equal=KSt,F0e.prototype.equal=JSt}});var q0e=U((ysn,L9e)=>{d();var _P=TP().Buffer,am=require("crypto"),S9e=I9e(),_9e=require("util"),XSt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,wL="secret must be a string or buffer",wP="key must be a string or a buffer",ZSt="key must be a string, a buffer or an object",Q0e=typeof am.createPublicKey=="function";Q0e&&(wP+=" or a KeyObject",wL+="or a KeyObject");function R9e(t){if(!_P.isBuffer(t)&&typeof t!="string"&&(!Q0e||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw sg(wP)}s(R9e,"checkIsPublicKey");function k9e(t){if(!_P.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw sg(ZSt)}s(k9e,"checkIsPrivateKey");function e2t(t){if(!_P.isBuffer(t)){if(typeof t=="string")return t;if(!Q0e||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw sg(wL)}}s(e2t,"checkIsSecretKey");function U0e(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(U0e,"fromBase64");function P9e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(P9e,"toBase64");function sg(t){var e=[].slice.call(arguments,1),r=_9e.format.bind(_9e,t).apply(null,e);return new TypeError(r)}s(sg,"typeError");function t2t(t){return _P.isBuffer(t)||typeof t=="string"}s(t2t,"bufferOrString");function _L(t){return t2t(t)||(t=JSON.stringify(t)),t}s(_L,"normalizeInput");function B9e(t){return s(function(r,n){e2t(n),r=_L(r);var i=am.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return U0e(o)},"sign")}s(B9e,"createHmacSigner");var O0e,r2t="timingSafeEqual"in am?s(function(e,r){return e.byteLength!==r.byteLength?!1:am.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return O0e||(O0e=w9e()),O0e(e,r)},"timingSafeEqual");function n2t(t){return s(function(r,n,i){var o=B9e(t)(r,i);return r2t(_P.from(n),_P.from(o))},"verify")}s(n2t,"createHmacVerifier");function D9e(t){return s(function(r,n){k9e(n),r=_L(r);var i=am.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return U0e(o)},"sign")}s(D9e,"createKeySigner");function N9e(t){return s(function(r,n,i){R9e(i),r=_L(r),n=P9e(n);var o=am.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(N9e,"createKeyVerifier");function i2t(t){return s(function(r,n){k9e(n),r=_L(r);var i=am.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:am.constants.RSA_PKCS1_PSS_PADDING,saltLength:am.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return U0e(o)},"sign")}s(i2t,"createPSSKeySigner");function o2t(t){return s(function(r,n,i){R9e(i),r=_L(r),n=P9e(n);var o=am.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:am.constants.RSA_PKCS1_PSS_PADDING,saltLength:am.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(o2t,"createPSSKeyVerifier");function s2t(t){var e=D9e(t);return s(function(){var n=e.apply(null,arguments);return n=S9e.derToJose(n,"ES"+t),n},"sign")}s(s2t,"createECDSASigner");function a2t(t){var e=N9e(t);return s(function(n,i,o){i=S9e.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(a2t,"createECDSAVerifer");function c2t(){return s(function(){return""},"sign")}s(c2t,"createNoneSigner");function l2t(){return s(function(e,r){return r===""},"verify")}s(l2t,"createNoneVerifier");L9e.exports=s(function(e){var r={hs:B9e,rs:D9e,ps:i2t,es:s2t,none:c2t},n={hs:n2t,rs:N9e,ps:o2t,es:a2t,none:l2t},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw sg(XSt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var H0e=U((vsn,M9e)=>{d();var u2t=require("buffer").Buffer;M9e.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||u2t.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var H9e=U((Isn,q9e)=>{d();var d2t=TP().Buffer,F9e=L0e(),f2t=q0e(),p2t=require("stream"),O9e=H0e(),W0e=require("util");function Q9e(t,e){return d2t.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Q9e,"base64url");function m2t(t,e,r){r=r||"utf8";var n=Q9e(O9e(t),"binary"),i=Q9e(O9e(e),r);return W0e.format("%s.%s",n,i)}s(m2t,"jwsSecuredInput");function U9e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=f2t(e.alg),a=m2t(e,r,i),c=o.sign(a,n);return W0e.format("%s.%s",a,c)}s(U9e,"jwsSign");function sV(t){var e=t.secret||t.privateKey||t.key,r=new F9e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new F9e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(sV,"SignStream");W0e.inherits(sV,p2t);sV.prototype.sign=s(function(){try{var e=U9e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");sV.sign=U9e;q9e.exports=sV});var X9e=U((_sn,J9e)=>{d();var G9e=TP().Buffer,W9e=L0e(),h2t=q0e(),g2t=require("stream"),j9e=H0e(),A2t=require("util"),y2t=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function C2t(t){return Object.prototype.toString.call(t)==="[object Object]"}s(C2t,"isObject");function E2t(t){if(C2t(t))return t;try{return JSON.parse(t)}catch{return}}s(E2t,"safeJsonParse");function V9e(t){var e=t.split(".",1)[0];return E2t(G9e.from(e,"base64").toString("binary"))}s(V9e,"headerFromJWS");function v2t(t){return t.split(".",2).join(".")}s(v2t,"securedInputFromJWS");function $9e(t){return t.split(".")[2]}s($9e,"signatureFromJWS");function x2t(t,e){e=e||"utf8";var r=t.split(".")[1];return G9e.from(r,"base64").toString(e)}s(x2t,"payloadFromJWS");function z9e(t){return y2t.test(t)&&!!V9e(t)}s(z9e,"isValidJws");function Y9e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=j9e(t);var i=$9e(t),o=v2t(t),a=h2t(e);return a.verify(o,i,r)}s(Y9e,"jwsVerify");function K9e(t,e){if(e=e||{},t=j9e(t),!z9e(t))return null;var r=V9e(t);if(!r)return null;var n=x2t(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:$9e(t)}}s(K9e,"jwsDecode");function SP(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new W9e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new W9e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(SP,"VerifyStream");A2t.inherits(SP,g2t);SP.prototype.verify=s(function(){try{var e=Y9e(this.signature.buffer,this.algorithm,this.key.buffer),r=K9e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");SP.decode=K9e;SP.isValid=z9e;SP.verify=Y9e;J9e.exports=SP});var cV=U(Jb=>{d();var Z9e=H9e(),aV=X9e(),b2t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Jb.ALGORITHMS=b2t;Jb.sign=Z9e.sign;Jb.verify=aV.verify;Jb.decode=aV.decode;Jb.isValid=aV.isValid;Jb.createSign=s(function(e){return new Z9e(e)},"createSign");Jb.createVerify=s(function(e){return new aV(e)},"createVerify")});var G0e=U((Dsn,eLe)=>{d();var I2t=cV();eLe.exports=function(t,e){e=e||{};var r=I2t.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var SL=U((Lsn,tLe)=>{d();var lV=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");lV.prototype=Object.create(Error.prototype);lV.prototype.constructor=lV;tLe.exports=lV});var j0e=U((Osn,nLe)=>{d();var rLe=SL(),uV=s(function(t,e){rLe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");uV.prototype=Object.create(rLe.prototype);uV.prototype.constructor=uV;nLe.exports=uV});var V0e=U((qsn,oLe)=>{d();var iLe=SL(),dV=s(function(t,e){iLe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");dV.prototype=Object.create(iLe.prototype);dV.prototype.constructor=dV;oLe.exports=dV});var $0e=U((Gsn,sLe)=>{d();var T2t=wde();sLe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=T2t(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var RL=U((Vsn,aLe)=>{d();var w2t="2.0.0",_2t=Number.MAX_SAFE_INTEGER||9007199254740991,S2t=16,R2t=250,k2t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];aLe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:S2t,MAX_SAFE_BUILD_LENGTH:R2t,MAX_SAFE_INTEGER:_2t,RELEASE_TYPES:k2t,SEMVER_SPEC_VERSION:w2t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var kL=U((zsn,cLe)=>{d();var P2t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};cLe.exports=P2t});var RP=U((Ty,lLe)=>{d();var{MAX_SAFE_COMPONENT_LENGTH:z0e,MAX_SAFE_BUILD_LENGTH:B2t,MAX_LENGTH:D2t}=RL(),N2t=kL();Ty=lLe.exports={};var L2t=Ty.re=[],M2t=Ty.safeRe=[],Cr=Ty.src=[],F2t=Ty.safeSrc=[],Er=Ty.t={},O2t=0,Y0e="[a-zA-Z0-9-]",Q2t=[["\\s",1],["\\d",D2t],[Y0e,B2t]],U2t=s(t=>{for(let[e,r]of Q2t)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),li=s((t,e,r)=>{let n=U2t(e),i=O2t++;N2t(t,i,e),Er[t]=i,Cr[i]=e,F2t[i]=n,L2t[i]=new RegExp(e,r?"g":void 0),M2t[i]=new RegExp(n,r?"g":void 0)},"createToken");li("NUMERICIDENTIFIER","0|[1-9]\\d*");li("NUMERICIDENTIFIERLOOSE","\\d+");li("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Y0e}*`);li("MAINVERSION",`(${Cr[Er.NUMERICIDENTIFIER]})\\.(${Cr[Er.NUMERICIDENTIFIER]})\\.(${Cr[Er.NUMERICIDENTIFIER]})`);li("MAINVERSIONLOOSE",`(${Cr[Er.NUMERICIDENTIFIERLOOSE]})\\.(${Cr[Er.NUMERICIDENTIFIERLOOSE]})\\.(${Cr[Er.NUMERICIDENTIFIERLOOSE]})`);li("PRERELEASEIDENTIFIER",`(?:${Cr[Er.NUMERICIDENTIFIER]}|${Cr[Er.NONNUMERICIDENTIFIER]})`);li("PRERELEASEIDENTIFIERLOOSE",`(?:${Cr[Er.NUMERICIDENTIFIERLOOSE]}|${Cr[Er.NONNUMERICIDENTIFIER]})`);li("PRERELEASE",`(?:-(${Cr[Er.PRERELEASEIDENTIFIER]}(?:\\.${Cr[Er.PRERELEASEIDENTIFIER]})*))`);li("PRERELEASELOOSE",`(?:-?(${Cr[Er.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Cr[Er.PRERELEASEIDENTIFIERLOOSE]})*))`);li("BUILDIDENTIFIER",`${Y0e}+`);li("BUILD",`(?:\\+(${Cr[Er.BUILDIDENTIFIER]}(?:\\.${Cr[Er.BUILDIDENTIFIER]})*))`);li("FULLPLAIN",`v?${Cr[Er.MAINVERSION]}${Cr[Er.PRERELEASE]}?${Cr[Er.BUILD]}?`);li("FULL",`^${Cr[Er.FULLPLAIN]}$`);li("LOOSEPLAIN",`[v=\\s]*${Cr[Er.MAINVERSIONLOOSE]}${Cr[Er.PRERELEASELOOSE]}?${Cr[Er.BUILD]}?`);li("LOOSE",`^${Cr[Er.LOOSEPLAIN]}$`);li("GTLT","((?:<|>)?=?)");li("XRANGEIDENTIFIERLOOSE",`${Cr[Er.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);li("XRANGEIDENTIFIER",`${Cr[Er.NUMERICIDENTIFIER]}|x|X|\\*`);li("XRANGEPLAIN",`[v=\\s]*(${Cr[Er.XRANGEIDENTIFIER]})(?:\\.(${Cr[Er.XRANGEIDENTIFIER]})(?:\\.(${Cr[Er.XRANGEIDENTIFIER]})(?:${Cr[Er.PRERELEASE]})?${Cr[Er.BUILD]}?)?)?`);li("XRANGEPLAINLOOSE",`[v=\\s]*(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:${Cr[Er.PRERELEASELOOSE]})?${Cr[Er.BUILD]}?)?)?`);li("XRANGE",`^${Cr[Er.GTLT]}\\s*${Cr[Er.XRANGEPLAIN]}$`);li("XRANGELOOSE",`^${Cr[Er.GTLT]}\\s*${Cr[Er.XRANGEPLAINLOOSE]}$`);li("COERCEPLAIN",`(^|[^\\d])(\\d{1,${z0e}})(?:\\.(\\d{1,${z0e}}))?(?:\\.(\\d{1,${z0e}}))?`);li("COERCE",`${Cr[Er.COERCEPLAIN]}(?:$|[^\\d])`);li("COERCEFULL",Cr[Er.COERCEPLAIN]+`(?:${Cr[Er.PRERELEASE]})?(?:${Cr[Er.BUILD]})?(?:$|[^\\d])`);li("COERCERTL",Cr[Er.COERCE],!0);li("COERCERTLFULL",Cr[Er.COERCEFULL],!0);li("LONETILDE","(?:~>?)");li("TILDETRIM",`(\\s*)${Cr[Er.LONETILDE]}\\s+`,!0);Ty.tildeTrimReplace="$1~";li("TILDE",`^${Cr[Er.LONETILDE]}${Cr[Er.XRANGEPLAIN]}$`);li("TILDELOOSE",`^${Cr[Er.LONETILDE]}${Cr[Er.XRANGEPLAINLOOSE]}$`);li("LONECARET","(?:\\^)");li("CARETTRIM",`(\\s*)${Cr[Er.LONECARET]}\\s+`,!0);Ty.caretTrimReplace="$1^";li("CARET",`^${Cr[Er.LONECARET]}${Cr[Er.XRANGEPLAIN]}$`);li("CARETLOOSE",`^${Cr[Er.LONECARET]}${Cr[Er.XRANGEPLAINLOOSE]}$`);li("COMPARATORLOOSE",`^${Cr[Er.GTLT]}\\s*(${Cr[Er.LOOSEPLAIN]})$|^$`);li("COMPARATOR",`^${Cr[Er.GTLT]}\\s*(${Cr[Er.FULLPLAIN]})$|^$`);li("COMPARATORTRIM",`(\\s*)${Cr[Er.GTLT]}\\s*(${Cr[Er.LOOSEPLAIN]}|${Cr[Er.XRANGEPLAIN]})`,!0);Ty.comparatorTrimReplace="$1$2$3";li("HYPHENRANGE",`^\\s*(${Cr[Er.XRANGEPLAIN]})\\s+-\\s+(${Cr[Er.XRANGEPLAIN]})\\s*$`);li("HYPHENRANGELOOSE",`^\\s*(${Cr[Er.XRANGEPLAINLOOSE]})\\s+-\\s+(${Cr[Er.XRANGEPLAINLOOSE]})\\s*$`);li("STAR","(<|>)?=?\\s*\\*");li("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");li("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var fV=U((Xsn,uLe)=>{d();var q2t=Object.freeze({loose:!0}),H2t=Object.freeze({}),W2t=s(t=>t?typeof t!="object"?q2t:t:H2t,"parseOptions");uLe.exports=W2t});var K0e=U((tan,pLe)=>{d();var dLe=/^[0-9]+$/,fLe=s((t,e)=>{let r=dLe.test(t),n=dLe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),G2t=s((t,e)=>fLe(e,t),"rcompareIdentifiers");pLe.exports={compareIdentifiers:fLe,rcompareIdentifiers:G2t}});var Vu=U((ian,ALe)=>{d();var pV=kL(),{MAX_LENGTH:mLe,MAX_SAFE_INTEGER:mV}=RL(),{safeRe:hLe,safeSrc:gLe,t:hV}=RP(),j2t=fV(),{compareIdentifiers:kP}=K0e(),J0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=j2t(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>mLe)throw new TypeError(`version is longer than ${mLe} characters`);pV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?hLe[hV.LOOSE]:hLe[hV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>mV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<mV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(pV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),kP(this.major,e.major)||kP(this.minor,e.minor)||kP(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(pV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kP(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(pV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kP(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?gLe[hV.PRERELEASELOOSE]:gLe[hV.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),kP(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};ALe.exports=J0e});var NS=U((aan,CLe)=>{d();var yLe=Vu(),V2t=s((t,e,r=!1)=>{if(t instanceof yLe)return t;try{return new yLe(t,e)}catch(n){if(!r)return null;throw n}},"parse");CLe.exports=V2t});var vLe=U((uan,ELe)=>{d();var $2t=NS(),z2t=s((t,e)=>{let r=$2t(t,e);return r?r.version:null},"valid");ELe.exports=z2t});var bLe=U((pan,xLe)=>{d();var Y2t=NS(),K2t=s((t,e)=>{let r=Y2t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");xLe.exports=K2t});var wLe=U((gan,TLe)=>{d();var ILe=Vu(),J2t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new ILe(t instanceof ILe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");TLe.exports=J2t});var RLe=U((Can,SLe)=>{d();var _Le=NS(),X2t=s((t,e)=>{let r=_Le(t,null,!0),n=_Le(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");SLe.exports=X2t});var PLe=U((xan,kLe)=>{d();var Z2t=Vu(),eRt=s((t,e)=>new Z2t(t,e).major,"major");kLe.exports=eRt});var DLe=U((Tan,BLe)=>{d();var tRt=Vu(),rRt=s((t,e)=>new tRt(t,e).minor,"minor");BLe.exports=rRt});var LLe=U((San,NLe)=>{d();var nRt=Vu(),iRt=s((t,e)=>new nRt(t,e).patch,"patch");NLe.exports=iRt});var FLe=U((Pan,MLe)=>{d();var oRt=NS(),sRt=s((t,e)=>{let r=oRt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");MLe.exports=sRt});var cm=U((Nan,QLe)=>{d();var OLe=Vu(),aRt=s((t,e,r)=>new OLe(t,r).compare(new OLe(e,r)),"compare");QLe.exports=aRt});var qLe=U((Fan,ULe)=>{d();var cRt=cm(),lRt=s((t,e,r)=>cRt(e,t,r),"rcompare");ULe.exports=lRt});var WLe=U((Uan,HLe)=>{d();var uRt=cm(),dRt=s((t,e)=>uRt(t,e,!0),"compareLoose");HLe.exports=dRt});var gV=U((Wan,jLe)=>{d();var GLe=Vu(),fRt=s((t,e,r)=>{let n=new GLe(t,r),i=new GLe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");jLe.exports=fRt});var $Le=U((Van,VLe)=>{d();var pRt=gV(),mRt=s((t,e)=>t.sort((r,n)=>pRt(r,n,e)),"sort");VLe.exports=mRt});var YLe=U((Yan,zLe)=>{d();var hRt=gV(),gRt=s((t,e)=>t.sort((r,n)=>hRt(n,r,e)),"rsort");zLe.exports=gRt});var PL=U((Xan,KLe)=>{d();var ARt=cm(),yRt=s((t,e,r)=>ARt(t,e,r)>0,"gt");KLe.exports=yRt});var AV=U((tcn,JLe)=>{d();var CRt=cm(),ERt=s((t,e,r)=>CRt(t,e,r)<0,"lt");JLe.exports=ERt});var X0e=U((icn,XLe)=>{d();var vRt=cm(),xRt=s((t,e,r)=>vRt(t,e,r)===0,"eq");XLe.exports=xRt});var Z0e=U((acn,ZLe)=>{d();var bRt=cm(),IRt=s((t,e,r)=>bRt(t,e,r)!==0,"neq");ZLe.exports=IRt});var yV=U((ucn,eMe)=>{d();var TRt=cm(),wRt=s((t,e,r)=>TRt(t,e,r)>=0,"gte");eMe.exports=wRt});var CV=U((pcn,tMe)=>{d();var _Rt=cm(),SRt=s((t,e,r)=>_Rt(t,e,r)<=0,"lte");tMe.exports=SRt});var epe=U((gcn,rMe)=>{d();var RRt=X0e(),kRt=Z0e(),PRt=PL(),BRt=yV(),DRt=AV(),NRt=CV(),LRt=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return RRt(t,r,n);case"!=":return kRt(t,r,n);case">":return PRt(t,r,n);case">=":return BRt(t,r,n);case"<":return DRt(t,r,n);case"<=":return NRt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");rMe.exports=LRt});var iMe=U((Ccn,nMe)=>{d();var MRt=Vu(),FRt=NS(),{safeRe:EV,t:vV}=RP(),ORt=s((t,e)=>{if(t instanceof MRt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?EV[vV.COERCEFULL]:EV[vV.COERCE]);else{let l=e.includePrerelease?EV[vV.COERCERTLFULL]:EV[vV.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return FRt(`${n}.${i}.${o}${a}${c}`,e)},"coerce");nMe.exports=ORt});var sMe=U((xcn,oMe)=>{d();var tpe=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};oMe.exports=tpe});var lm=U((Tcn,uMe)=>{d();var QRt=/\s+/g,rpe=class t{static{s(this,"Range")}constructor(e,r){if(r=qRt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof npe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(QRt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!cMe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&zRt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&VRt)|(this.options.loose&&$Rt))+":"+e,i=aMe.get(n);if(i)return i;let o=this.options.loose,a=o?Sf[Rd.HYPHENRANGELOOSE]:Sf[Rd.HYPHENRANGE];e=e.replace(a,i5t(this.options.includePrerelease)),qs("hyphen replace",e),e=e.replace(Sf[Rd.COMPARATORTRIM],WRt),qs("comparator trim",e),e=e.replace(Sf[Rd.TILDETRIM],GRt),qs("tilde trim",e),e=e.replace(Sf[Rd.CARETTRIM],jRt),qs("caret trim",e);let c=e.split(" ").map(p=>YRt(p,this.options)).join(" ").split(/\s+/).map(p=>n5t(p,this.options));o&&(c=c.filter(p=>(qs("loose invalid filter",p,this.options),!!p.match(Sf[Rd.COMPARATORLOOSE])))),qs("range list",c);let l=new Map,u=c.map(p=>new npe(p,this.options));for(let p of u){if(cMe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return aMe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>lMe(n,r)&&e.set.some(i=>lMe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new HRt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(o5t(this.set[r],e,this.options))return!0;return!1}};uMe.exports=rpe;var URt=sMe(),aMe=new URt,qRt=fV(),npe=BL(),qs=kL(),HRt=Vu(),{safeRe:Sf,t:Rd,comparatorTrimReplace:WRt,tildeTrimReplace:GRt,caretTrimReplace:jRt}=RP(),{FLAG_INCLUDE_PRERELEASE:VRt,FLAG_LOOSE:$Rt}=RL(),cMe=s(t=>t.value==="<0.0.0-0","isNullSet"),zRt=s(t=>t.value==="","isAny"),lMe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),YRt=s((t,e)=>(qs("comp",t,e),t=XRt(t,e),qs("caret",t),t=KRt(t,e),qs("tildes",t),t=e5t(t,e),qs("xrange",t),t=r5t(t,e),qs("stars",t),t),"parseComparator"),kd=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),KRt=s((t,e)=>t.trim().split(/\s+/).map(r=>JRt(r,e)).join(" "),"replaceTildes"),JRt=s((t,e)=>{let r=e.loose?Sf[Rd.TILDELOOSE]:Sf[Rd.TILDE];return t.replace(r,(n,i,o,a,c)=>{qs("tilde",t,n,i,o,a,c);let l;return kd(i)?l="":kd(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:kd(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(qs("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,qs("tilde return",l),l})},"replaceTilde"),XRt=s((t,e)=>t.trim().split(/\s+/).map(r=>ZRt(r,e)).join(" "),"replaceCarets"),ZRt=s((t,e)=>{qs("caret",t,e);let r=e.loose?Sf[Rd.CARETLOOSE]:Sf[Rd.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{qs("caret",t,i,o,a,c,l);let u;return kd(o)?u="":kd(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:kd(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(qs("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(qs("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),qs("caret return",u),u})},"replaceCaret"),e5t=s((t,e)=>(qs("replaceXRanges",t,e),t.split(/\s+/).map(r=>t5t(r,e)).join(" ")),"replaceXRanges"),t5t=s((t,e)=>{t=t.trim();let r=e.loose?Sf[Rd.XRANGELOOSE]:Sf[Rd.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{qs("xRange",t,n,i,o,a,c,l);let u=kd(o),f=u||kd(a),p=f||kd(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),qs("xRange return",n),n})},"replaceXRange"),r5t=s((t,e)=>(qs("replaceStars",t,e),t.trim().replace(Sf[Rd.STAR],"")),"replaceStars"),n5t=s((t,e)=>(qs("replaceGTE0",t,e),t.trim().replace(Sf[e.includePrerelease?Rd.GTE0PRE:Rd.GTE0],"")),"replaceGTE0"),i5t=s(t=>(e,r,n,i,o,a,c,l,u,f,p,m)=>(kd(n)?r="":kd(i)?r=`>=${n}.0.0${t?"-0":""}`:kd(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,kd(u)?l="":kd(f)?l=`<${+u+1}.0.0-0`:kd(p)?l=`<${u}.${+f+1}.0-0`:m?l=`<=${u}.${f}.${p}-${m}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),o5t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(qs(t[n].semver),t[n].semver!==npe.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var BL=U((Scn,gMe)=>{d();var DL=Symbol("SemVer ANY"),spe=class t{static{s(this,"Comparator")}static get ANY(){return DL}constructor(e,r){if(r=dMe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ope("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===DL?this.value="":this.value=this.operator+this.semver.version,ope("comp",this)}parse(e){let r=this.options.loose?fMe[pMe.COMPARATORLOOSE]:fMe[pMe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new mMe(n[2],this.options.loose):this.semver=DL}toString(){return this.value}test(e){if(ope("Comparator.test",e,this.options.loose),this.semver===DL||e===DL)return!0;if(typeof e=="string")try{e=new mMe(e,this.options)}catch{return!1}return ipe(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new hMe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new hMe(this.value,r).test(e.semver):(r=dMe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||ipe(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||ipe(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};gMe.exports=spe;var dMe=fV(),{safeRe:fMe,t:pMe}=RP(),ipe=epe(),ope=kL(),mMe=Vu(),hMe=lm()});var NL=U((Pcn,AMe)=>{d();var s5t=lm(),a5t=s((t,e,r)=>{try{e=new s5t(e,r)}catch{return!1}return e.test(t)},"satisfies");AMe.exports=a5t});var CMe=U((Ncn,yMe)=>{d();var c5t=lm(),l5t=s((t,e)=>new c5t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");yMe.exports=l5t});var vMe=U((Fcn,EMe)=>{d();var u5t=Vu(),d5t=lm(),f5t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new d5t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new u5t(n,r))}),n},"maxSatisfying");EMe.exports=f5t});var bMe=U((Ucn,xMe)=>{d();var p5t=Vu(),m5t=lm(),h5t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new m5t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new p5t(n,r))}),n},"minSatisfying");xMe.exports=h5t});var wMe=U((Wcn,TMe)=>{d();var ape=Vu(),g5t=lm(),IMe=PL(),A5t=s((t,e)=>{t=new g5t(t,e);let r=new ape("0.0.0");if(t.test(r)||(r=new ape("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new ape(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||IMe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||IMe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");TMe.exports=A5t});var SMe=U((Vcn,_Me)=>{d();var y5t=lm(),C5t=s((t,e)=>{try{return new y5t(t,e).range||"*"}catch{return null}},"validRange");_Me.exports=C5t});var xV=U((Ycn,BMe)=>{d();var E5t=Vu(),PMe=BL(),{ANY:v5t}=PMe,x5t=lm(),b5t=NL(),RMe=PL(),kMe=AV(),I5t=CV(),T5t=yV(),w5t=s((t,e,r,n)=>{t=new E5t(t,n),e=new x5t(e,n);let i,o,a,c,l;switch(r){case">":i=RMe,o=I5t,a=kMe,c=">",l=">=";break;case"<":i=kMe,o=T5t,a=RMe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(b5t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,m=null;if(f.forEach(h=>{h.semver===v5t&&(h=new PMe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");BMe.exports=w5t});var NMe=U((Xcn,DMe)=>{d();var _5t=xV(),S5t=s((t,e,r)=>_5t(t,e,">",r),"gtr");DMe.exports=S5t});var MMe=U((tln,LMe)=>{d();var R5t=xV(),k5t=s((t,e,r)=>R5t(t,e,"<",r),"ltr");LMe.exports=k5t});var QMe=U((iln,OMe)=>{d();var FMe=lm(),P5t=s((t,e,r)=>(t=new FMe(t,r),e=new FMe(e,r),t.intersects(e,r)),"intersects");OMe.exports=P5t});var qMe=U((aln,UMe)=>{d();var B5t=NL(),D5t=cm();UMe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>D5t(f,p,r));for(let f of a)B5t(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var $Me=U((lln,VMe)=>{d();var HMe=lm(),lpe=BL(),{ANY:cpe}=lpe,LL=NL(),upe=cm(),N5t=s((t,e,r={})=>{if(t===e)return!0;t=new HMe(t,r),e=new HMe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=M5t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),L5t=[new lpe(">=0.0.0-0")],WMe=[new lpe(">=0.0.0")],M5t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===cpe){if(e.length===1&&e[0].semver===cpe)return!0;r.includePrerelease?t=L5t:t=WMe}if(e.length===1&&e[0].semver===cpe){if(r.includePrerelease)return!0;e=WMe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=GMe(i,h,r):h.operator==="<"||h.operator==="<="?o=jMe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=upe(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!LL(h,String(i),r)||o&&!LL(h,String(o),r))return null;for(let g of e)if(!LL(h,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(f=f||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=GMe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!LL(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=jMe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!LL(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||m||p)},"simpleSubset"),GMe=s((t,e,r)=>{if(!t)return e;let n=upe(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),jMe=s((t,e,r)=>{if(!t)return e;let n=upe(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");VMe.exports=N5t});var PP=U((fln,KMe)=>{d();var dpe=RP(),zMe=RL(),F5t=Vu(),YMe=K0e(),O5t=NS(),Q5t=vLe(),U5t=bLe(),q5t=wLe(),H5t=RLe(),W5t=PLe(),G5t=DLe(),j5t=LLe(),V5t=FLe(),$5t=cm(),z5t=qLe(),Y5t=WLe(),K5t=gV(),J5t=$Le(),X5t=YLe(),Z5t=PL(),ekt=AV(),tkt=X0e(),rkt=Z0e(),nkt=yV(),ikt=CV(),okt=epe(),skt=iMe(),akt=BL(),ckt=lm(),lkt=NL(),ukt=CMe(),dkt=vMe(),fkt=bMe(),pkt=wMe(),mkt=SMe(),hkt=xV(),gkt=NMe(),Akt=MMe(),ykt=QMe(),Ckt=qMe(),Ekt=$Me();KMe.exports={parse:O5t,valid:Q5t,clean:U5t,inc:q5t,diff:H5t,major:W5t,minor:G5t,patch:j5t,prerelease:V5t,compare:$5t,rcompare:z5t,compareLoose:Y5t,compareBuild:K5t,sort:J5t,rsort:X5t,gt:Z5t,lt:ekt,eq:tkt,neq:rkt,gte:nkt,lte:ikt,cmp:okt,coerce:skt,Comparator:akt,Range:ckt,satisfies:lkt,toComparators:ukt,maxSatisfying:dkt,minSatisfying:fkt,minVersion:pkt,validRange:mkt,outside:hkt,gtr:gkt,ltr:Akt,intersects:ykt,simplifyRange:Ckt,subset:Ekt,SemVer:F5t,re:dpe.re,src:dpe.src,tokens:dpe.t,SEMVER_SPEC_VERSION:zMe.SEMVER_SPEC_VERSION,RELEASE_TYPES:zMe.RELEASE_TYPES,compareIdentifiers:YMe.compareIdentifiers,rcompareIdentifiers:YMe.rcompareIdentifiers}});var XMe=U((mln,JMe)=>{d();var vkt=PP();JMe.exports=vkt.satisfies(process.version,">=15.7.0")});var eFe=U((gln,ZMe)=>{d();var xkt=PP();ZMe.exports=xkt.satisfies(process.version,">=16.9.0")});var fpe=U((yln,tFe)=>{d();var bkt=XMe(),Ikt=eFe(),Tkt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},wkt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};tFe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=Tkt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(bkt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=wkt[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(Ikt){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var ppe=U((Eln,rFe)=>{d();var _kt=PP();rFe.exports=_kt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var oFe=U((xln,iFe)=>{d();var xs=SL(),Skt=j0e(),nFe=V0e(),Rkt=G0e(),kkt=$0e(),Pkt=fpe(),Bkt=ppe(),Dkt=cV(),{KeyObject:Nkt,createSecretKey:Lkt,createPublicKey:Mkt}=require("crypto"),mpe=["RS256","RS384","RS512"],Fkt=["ES256","ES384","ES512"],hpe=["RS256","RS384","RS512"],Okt=["HS256","HS384","HS512"];Bkt&&(mpe.splice(mpe.length,0,"PS256","PS384","PS512"),hpe.splice(hpe.length,0,"PS256","PS384","PS512"));iFe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new xs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new xs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new xs("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new xs("jwt must be provided"));if(typeof t!="string")return i(new xs("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new xs("jwt malformed"));let c;try{c=Rkt(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new xs("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new xs("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new xs("error in secret or public key callback: "+f.message));let m=a[2].trim()!=="";if(!m&&p)return i(new xs("jwt signature is required"));if(m&&!p)return i(new xs("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new xs('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof Nkt))try{p=Mkt(p)}catch{try{p=Lkt(typeof p=="string"?Buffer.from(p):p)}catch{return i(new xs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=Okt:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=hpe:p.asymmetricKeyType==="ec"?r.algorithms=Fkt:r.algorithms=mpe),r.algorithms.indexOf(c.header.alg)===-1)return i(new xs("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new xs(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new xs(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{Pkt(l.alg,p)}catch(y){return i(y)}let h;try{h=Dkt.verify(t,c.header.alg,p)}catch(y){return i(y)}if(!h)return i(new xs("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new xs("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new Skt("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new xs("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new nFe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return y.some(function(_){return _ instanceof RegExp?_.test(b):_===b})}))return i(new xs("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new xs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new xs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new xs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new xs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new xs("iat required when maxAge is specified"));let y=kkt(r.maxAge,g.iat);if(typeof y>"u")return i(new xs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=y+(r.clockTolerance||0))return i(new nFe("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=c.signature;return i(null,{header:l,payload:g,signature:y})}return i(null,g)})}});var dFe=U((Tln,uFe)=>{d();var sFe=1/0,cFe=9007199254740991,Qkt=17976931348623157e292,aFe=NaN,Ukt="[object Arguments]",qkt="[object Function]",Hkt="[object GeneratorFunction]",Wkt="[object String]",Gkt="[object Symbol]",jkt=/^\s+|\s+$/g,Vkt=/^[-+]0x[0-9a-f]+$/i,$kt=/^0b[01]+$/i,zkt=/^0o[0-7]+$/i,Ykt=/^(?:0|[1-9]\d*)$/,Kkt=parseInt;function Jkt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(Jkt,"arrayMap");function Xkt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(Xkt,"baseFindIndex");function Zkt(t,e,r){if(e!==e)return Xkt(t,e4t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(Zkt,"baseIndexOf");function e4t(t){return t!==t}s(e4t,"baseIsNaN");function t4t(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(t4t,"baseTimes");function r4t(t,e){return Jkt(e,function(r){return t[r]})}s(r4t,"baseValues");function n4t(t,e){return function(r){return t(e(r))}}s(n4t,"overArg");var bV=Object.prototype,Ape=bV.hasOwnProperty,IV=bV.toString,i4t=bV.propertyIsEnumerable,o4t=n4t(Object.keys,Object),s4t=Math.max;function a4t(t,e){var r=lFe(t)||f4t(t)?t4t(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||Ape.call(t,o))&&!(i&&(o=="length"||l4t(o,n)))&&r.push(o);return r}s(a4t,"arrayLikeKeys");function c4t(t){if(!u4t(t))return o4t(t);var e=[];for(var r in Object(t))Ape.call(t,r)&&r!="constructor"&&e.push(r);return e}s(c4t,"baseKeys");function l4t(t,e){return e=e??cFe,!!e&&(typeof t=="number"||Ykt.test(t))&&t>-1&&t%1==0&&t<e}s(l4t,"isIndex");function u4t(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||bV;return t===r}s(u4t,"isPrototype");function d4t(t,e,r,n){t=ype(t)?t:x4t(t),r=r&&!n?C4t(r):0;var i=t.length;return r<0&&(r=s4t(i+r,0)),g4t(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Zkt(t,e,r)>-1}s(d4t,"includes");function f4t(t){return p4t(t)&&Ape.call(t,"callee")&&(!i4t.call(t,"callee")||IV.call(t)==Ukt)}s(f4t,"isArguments");var lFe=Array.isArray;function ype(t){return t!=null&&h4t(t.length)&&!m4t(t)}s(ype,"isArrayLike");function p4t(t){return Cpe(t)&&ype(t)}s(p4t,"isArrayLikeObject");function m4t(t){var e=gpe(t)?IV.call(t):"";return e==qkt||e==Hkt}s(m4t,"isFunction");function h4t(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=cFe}s(h4t,"isLength");function gpe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(gpe,"isObject");function Cpe(t){return!!t&&typeof t=="object"}s(Cpe,"isObjectLike");function g4t(t){return typeof t=="string"||!lFe(t)&&Cpe(t)&&IV.call(t)==Wkt}s(g4t,"isString");function A4t(t){return typeof t=="symbol"||Cpe(t)&&IV.call(t)==Gkt}s(A4t,"isSymbol");function y4t(t){if(!t)return t===0?t:0;if(t=E4t(t),t===sFe||t===-sFe){var e=t<0?-1:1;return e*Qkt}return t===t?t:0}s(y4t,"toFinite");function C4t(t){var e=y4t(t),r=e%1;return e===e?r?e-r:e:0}s(C4t,"toInteger");function E4t(t){if(typeof t=="number")return t;if(A4t(t))return aFe;if(gpe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gpe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jkt,"");var r=$kt.test(t);return r||zkt.test(t)?Kkt(t.slice(2),r?2:8):Vkt.test(t)?aFe:+t}s(E4t,"toNumber");function v4t(t){return ype(t)?a4t(t):c4t(t)}s(v4t,"keys");function x4t(t){return t?r4t(t,v4t(t)):[]}s(x4t,"values");uFe.exports=d4t});var pFe=U((Sln,fFe)=>{d();var b4t="[object Boolean]",I4t=Object.prototype,T4t=I4t.toString;function w4t(t){return t===!0||t===!1||_4t(t)&&T4t.call(t)==b4t}s(w4t,"isBoolean");function _4t(t){return!!t&&typeof t=="object"}s(_4t,"isObjectLike");fFe.exports=w4t});var yFe=U((Pln,AFe)=>{d();var mFe=1/0,S4t=17976931348623157e292,hFe=NaN,R4t="[object Symbol]",k4t=/^\s+|\s+$/g,P4t=/^[-+]0x[0-9a-f]+$/i,B4t=/^0b[01]+$/i,D4t=/^0o[0-7]+$/i,N4t=parseInt,L4t=Object.prototype,M4t=L4t.toString;function F4t(t){return typeof t=="number"&&t==q4t(t)}s(F4t,"isInteger");function gFe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(gFe,"isObject");function O4t(t){return!!t&&typeof t=="object"}s(O4t,"isObjectLike");function Q4t(t){return typeof t=="symbol"||O4t(t)&&M4t.call(t)==R4t}s(Q4t,"isSymbol");function U4t(t){if(!t)return t===0?t:0;if(t=H4t(t),t===mFe||t===-mFe){var e=t<0?-1:1;return e*S4t}return t===t?t:0}s(U4t,"toFinite");function q4t(t){var e=U4t(t),r=e%1;return e===e?r?e-r:e:0}s(q4t,"toInteger");function H4t(t){if(typeof t=="number")return t;if(Q4t(t))return hFe;if(gFe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gFe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(k4t,"");var r=B4t.test(t);return r||D4t.test(t)?N4t(t.slice(2),r?2:8):P4t.test(t)?hFe:+t}s(H4t,"toNumber");AFe.exports=F4t});var EFe=U((Nln,CFe)=>{d();var W4t="[object Number]",G4t=Object.prototype,j4t=G4t.toString;function V4t(t){return!!t&&typeof t=="object"}s(V4t,"isObjectLike");function $4t(t){return typeof t=="number"||V4t(t)&&j4t.call(t)==W4t}s($4t,"isNumber");CFe.exports=$4t});var IFe=U((Fln,bFe)=>{d();var z4t="[object Object]";function Y4t(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(Y4t,"isHostObject");function K4t(t,e){return function(r){return t(e(r))}}s(K4t,"overArg");var J4t=Function.prototype,vFe=Object.prototype,xFe=J4t.toString,X4t=vFe.hasOwnProperty,Z4t=xFe.call(Object),ePt=vFe.toString,tPt=K4t(Object.getPrototypeOf,Object);function rPt(t){return!!t&&typeof t=="object"}s(rPt,"isObjectLike");function nPt(t){if(!rPt(t)||ePt.call(t)!=z4t||Y4t(t))return!1;var e=tPt(t);if(e===null)return!0;var r=X4t.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&xFe.call(r)==Z4t}s(nPt,"isPlainObject");bFe.exports=nPt});var wFe=U((Uln,TFe)=>{d();var iPt="[object String]",oPt=Object.prototype,sPt=oPt.toString,aPt=Array.isArray;function cPt(t){return!!t&&typeof t=="object"}s(cPt,"isObjectLike");function lPt(t){return typeof t=="string"||!aPt(t)&&cPt(t)&&sPt.call(t)==iPt}s(lPt,"isString");TFe.exports=lPt});var PFe=U((Wln,kFe)=>{d();var uPt="Expected a function",_Fe=1/0,dPt=17976931348623157e292,SFe=NaN,fPt="[object Symbol]",pPt=/^\s+|\s+$/g,mPt=/^[-+]0x[0-9a-f]+$/i,hPt=/^0b[01]+$/i,gPt=/^0o[0-7]+$/i,APt=parseInt,yPt=Object.prototype,CPt=yPt.toString;function EPt(t,e){var r;if(typeof e!="function")throw new TypeError(uPt);return t=TPt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(EPt,"before");function vPt(t){return EPt(2,t)}s(vPt,"once");function RFe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(RFe,"isObject");function xPt(t){return!!t&&typeof t=="object"}s(xPt,"isObjectLike");function bPt(t){return typeof t=="symbol"||xPt(t)&&CPt.call(t)==fPt}s(bPt,"isSymbol");function IPt(t){if(!t)return t===0?t:0;if(t=wPt(t),t===_Fe||t===-_Fe){var e=t<0?-1:1;return e*dPt}return t===t?t:0}s(IPt,"toFinite");function TPt(t){var e=IPt(t),r=e%1;return e===e?r?e-r:e:0}s(TPt,"toInteger");function wPt(t){if(typeof t=="number")return t;if(bPt(t))return SFe;if(RFe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RFe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(pPt,"");var r=hPt.test(t);return r||gPt.test(t)?APt(t.slice(2),r?2:8):mPt.test(t)?SFe:+t}s(wPt,"toNumber");kFe.exports=vPt});var UFe=U((Vln,QFe)=>{d();var BFe=$0e(),_Pt=ppe(),SPt=fpe(),DFe=cV(),RPt=dFe(),TV=pFe(),NFe=yFe(),Epe=EFe(),MFe=IFe(),Xb=wFe(),kPt=PFe(),{KeyObject:PPt,createSecretKey:BPt,createPrivateKey:DPt}=require("crypto"),FFe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];_Pt&&FFe.splice(3,0,"PS256","PS384","PS512");var NPt={expiresIn:{isValid:s(function(t){return NFe(t)||Xb(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return NFe(t)||Xb(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return Xb(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:RPt.bind(null,FFe),message:'"algorithm" must be a valid string enum value'},header:{isValid:MFe,message:'"header" must be an object'},encoding:{isValid:Xb,message:'"encoding" must be a string'},issuer:{isValid:Xb,message:'"issuer" must be a string'},subject:{isValid:Xb,message:'"subject" must be a string'},jwtid:{isValid:Xb,message:'"jwtid" must be a string'},noTimestamp:{isValid:TV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Xb,message:'"keyid" must be a string'},mutatePayload:{isValid:TV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:TV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:TV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},LPt={iat:{isValid:Epe,message:'"iat" should be a number of seconds'},exp:{isValid:Epe,message:'"exp" should be a number of seconds'},nbf:{isValid:Epe,message:'"nbf" should be a number of seconds'}};function OFe(t,e,r,n){if(!MFe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(OFe,"validate");function MPt(t){return OFe(NPt,!1,t,"options")}s(MPt,"validateOptions");function FPt(t){return OFe(LPt,!0,t,"payload")}s(FPt,"validatePayload");var LFe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},OPt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];QFe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof PPt))try{e=DPt(e)}catch{try{e=BPt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{FPt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=OPt.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{MPt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{SPt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=BFe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=BFe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(LFe).forEach(function(u){let f=LFe[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&kPt(n),DFe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=DFe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var HFe=U((Yln,qFe)=>{d();qFe.exports={decode:G0e(),verify:oFe(),sign:UFe(),JsonWebTokenError:SL(),NotBeforeError:j0e(),TokenExpiredError:V0e()}});function l3t(){try{return Tpe.default.statSync("/.dockerenv"),!0}catch{return!1}}function u3t(){try{return Tpe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function wpe(){return Ipe===void 0&&(Ipe=l3t()||u3t()),Ipe}var Tpe,Ipe,nOe=Dh(()=>{d();Tpe=Ne(require("node:fs"),1);s(l3t,"hasDockerEnv");s(u3t,"hasDockerCGroup");s(wpe,"isDocker")});function QP(){return _pe===void 0&&(_pe=d3t()||wpe()),_pe}var iOe,_pe,d3t,Spe=Dh(()=>{d();iOe=Ne(require("node:fs"),1);nOe();d3t=s(()=>{try{return iOe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(QP,"isInsideContainer")});var Rpe,sOe,aOe,oOe,UP,cOe=Dh(()=>{d();Rpe=Ne(require("node:process"),1),sOe=Ne(require("node:os"),1),aOe=Ne(require("node:fs"),1);Spe();oOe=s(()=>{if(Rpe.default.platform!=="linux")return!1;if(sOe.default.release().toLowerCase().includes("microsoft"))return!QP();try{return aOe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!QP():!1}catch{return!1}},"isWsl"),UP=Rpe.default.env.__IS_WSL_TEST__?oOe:oOe()});function QS(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var lOe=Dh(()=>{d();s(QS,"defineLazyProperty")});async function kpe(){if(dOe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await f3t("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var uOe,dOe,fOe,f3t,pOe=Dh(()=>{d();uOe=require("node:util"),dOe=Ne(require("node:process"),1),fOe=require("node:child_process"),f3t=(0,uOe.promisify)(fOe.execFile);s(kpe,"defaultBrowserId")});async function gOe(t,{humanReadableOutput:e=!0}={}){if(mOe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await p3t("osascript",["-e",t,r]);return n.trim()}var mOe,hOe,Ppe,p3t,AOe=Dh(()=>{d();mOe=Ne(require("node:process"),1),hOe=require("node:util"),Ppe=require("node:child_process"),p3t=(0,hOe.promisify)(Ppe.execFile);s(gOe,"runAppleScript")});async function Bpe(t){return gOe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var yOe=Dh(()=>{d();AOe();s(Bpe,"bundleName")});async function Dpe(t=m3t){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new OV(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=h3t[n];if(!i)throw new OV(`Unknown browser ID: ${n}`);return i}var COe,EOe,m3t,h3t,OV,vOe=Dh(()=>{d();COe=require("node:util"),EOe=require("node:child_process"),m3t=(0,COe.promisify)(EOe.execFile),h3t={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},OV=class extends Error{static{s(this,"UnknownBrowserError")}};s(Dpe,"defaultBrowser")});async function Npe(){if(QV.default.platform==="darwin"){let t=await kpe();return{name:await Bpe(t),id:t}}if(QV.default.platform==="linux"){let{stdout:t}=await g3t("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:A3t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(QV.default.platform==="win32")return Dpe();throw new Error("Only macOS, Linux, and Windows are supported")}var xOe,QV,bOe,g3t,A3t,IOe=Dh(()=>{d();xOe=require("node:util"),QV=Ne(require("node:process"),1),bOe=require("node:child_process");pOe();yOe();vOe();g3t=(0,xOe.promisify)(bOe.execFile),A3t=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(Npe,"defaultBrowser")});var BOe={};ra(BOe,{apps:()=>qS,default:()=>jL,openApp:()=>x3t});async function E3t(){let t=await POe(),r=Mpe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await y3t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function SOe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[wOe]:e}=t;if(!e)throw new Error(`${wOe} is not supported`);return e}function Qpe({[qP]:t},{wsl:e}){if(e&&UP)return SOe(e);if(!t)throw new Error(`${qP} is not supported`);return SOe(t)}var WL,Mpe,Fpe,ROe,kOe,Ope,US,y3t,Lpe,TOe,qP,wOe,C3t,POe,_Oe,GL,v3t,x3t,qS,jL,UV=Dh(()=>{d();WL=Ne(require("node:process"),1),Mpe=require("node:buffer"),Fpe=Ne(require("node:path"),1),ROe=require("node:url"),kOe=Ne(require("node:util"),1),Ope=Ne(require("node:child_process"),1),US=Ne(require("node:fs/promises"),1);cOe();lOe();IOe();Spe();y3t=kOe.default.promisify(Ope.default.execFile),Lpe=Fpe.default.dirname((0,ROe.fileURLToPath)(importMetaUrlShim)),TOe=Fpe.default.join(Lpe,"xdg-open"),{platform:qP,arch:wOe}=WL.default,C3t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await US.default.access(r,US.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await US.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),POe=s(async()=>`${await C3t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(E3t,"getWindowsDefaultBrowserFromWsl");_Oe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),GL=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return _Oe(t.app,c=>GL({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return _Oe(e,c=>GL({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=UP?await E3t():await Npe();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),GL({...t,app:{name:qS[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(qP==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(qP==="win32"||UP&&!QP()&&!e){n=UP?await POe():`${WL.default.env.SYSTEMROOT||WL.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),UP||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=Mpe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!Lpe||Lpe==="/",l=!1;try{await US.default.access(TOe,US.constants.X_OK),l=!0}catch{}n=WL.default.versions.electron??(qP==="android"||c||!l)?"xdg-open":TOe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}qP==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=Ope.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),v3t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return GL({...e,target:t})},"open"),x3t=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return GL({...e,app:{name:t,arguments:r}})},"openApp");s(SOe,"detectArchBinary");s(Qpe,"detectPlatformBinary");qS={};QS(qS,"chrome",()=>Qpe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));QS(qS,"firefox",()=>Qpe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));QS(qS,"edge",()=>Qpe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));QS(qS,"browser",()=>"browser");QS(qS,"browserPrivate",()=>"browserPrivate");jL=v3t});var r7e=U(_y=>{"use strict";d();Object.defineProperty(_y,"__esModule",{value:!0});_y.bytePairEncode=_y.BinaryMap=_y.binaryMapKey=void 0;var V3t=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");_y.binaryMapKey=V3t;var zpe=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,_y.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,_y.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};_y.BinaryMap=zpe;var wy=new Int32Array(128),Dd=new Int32Array(128);function $3t(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;wy.length<r*2;)Dd=new Int32Array(Dd.length*2),wy=new Int32Array(wy.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Dd[l]=l,wy[l]=u}Dd[r-1]=r-1,wy[r-1]=2147483647,Dd[r]=r,wy[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Dd[l],Dd[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){wy[Dd[i]]=a(i,1),i>0&&(wy[Dd[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Dd[l]=Dd[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=wy[Dd[l]];wy[Dd[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Dd[l],Dd[l+1]));return c}s($3t,"bytePairEncode");_y.bytePairEncode=$3t});var n7e=U(YV=>{"use strict";d();Object.defineProperty(YV,"__esModule",{value:!0});YV.makeTextEncoder=void 0;var Ype=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},Kpe=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},z3t=s(()=>typeof Buffer<"u"?new Kpe:new Ype,"makeTextEncoder");YV.makeTextEncoder=z3t});var i7e=U(KV=>{"use strict";d();Object.defineProperty(KV,"__esModule",{value:!0});KV.LRUCache=void 0;var Jpe=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Xpe(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};KV.LRUCache=Jpe;var Xpe=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var eme=U(XV=>{"use strict";d();Object.defineProperty(XV,"__esModule",{value:!0});XV.TikTokenizer=void 0;var JV=r7e(),Y3t=n7e(),K3t=i7e();function J3t(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(J3t,"loadTikTokenBpe");function X3t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(X3t,"escapeRegExp");var Zpe=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,Y3t.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new K3t.LRUCache(i);let o=typeof e=="string"?J3t(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new JV.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>X3t(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,JV.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let m=o-a;a+=m,c+=f.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(f),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(f,[h]),a+1<=o)a++,c+=f.length,r.push(h);else break;else{let g=(0,JV.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,c+=f.length;for(let E=0;E<y;E++)r.push(g[E]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let E=g[0],x=this.cache.get(E);if(x)a+=x.length,c+=E.length,i.push(...x),l.set(a,c);else{let b=this.textEncoder.encode(E),_=this.encoder.get(b);if(_!==void 0)this.cache.set(E,[_]),a++,c+=E.length,i.push(_),l.set(a,c);else{let k=(0,JV.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(E,k),a+=k.length,c+=E.length;for(let P of k)i.push(P);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[m,h]of l)if(m>=u){f=m,p=h;break}if(f>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};XV.TikTokenizer=Zpe});var m7e=U(kc=>{"use strict";d();Object.defineProperty(kc,"__esModule",{value:!0});kc.createTokenizer=kc.createByEncoderName=kc.createByModelName=kc.getRegexByModel=kc.getRegexByEncoder=kc.getSpecialTokensByModel=kc.getSpecialTokensByEncoder=kc.MODEL_TO_ENCODING=void 0;var Z3t=eme(),eBt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);kc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var ZV="<|endoftext|>",o7e="<|fim_prefix|>",s7e="<|fim_middle|>",a7e="<|fim_suffix|>",c7e="<|endofprompt|>",nM="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",l7e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",tBt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],u7e=tBt.join("|");function tme(t){let e="";if(kc.MODEL_TO_ENCODING.has(t))e=kc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of eBt)if(t.startsWith(r)){e=n;break}return e}s(tme,"getEncoderFromModelName");async function rBt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(rBt,"fetchAndSaveFile");function rme(t){let e=new Map([[ZV,50256]]);switch(t){case"o200k_base":e=new Map([[ZV,199999],[c7e,200018]]);break;case"cl100k_base":e=new Map([[ZV,100257],[o7e,100258],[s7e,100259],[a7e,100260],[c7e,100276]]);break;case"p50k_edit":e=new Map([[ZV,50256],[o7e,50281],[s7e,50282],[a7e,50283]]);break;default:break}return e}s(rme,"getSpecialTokensByEncoder");kc.getSpecialTokensByEncoder=rme;function nBt(t){let e=tme(t);return rme(e)}s(nBt,"getSpecialTokensByModel");kc.getSpecialTokensByModel=nBt;function d7e(t){switch(t){case"o200k_base":return u7e;case"cl100k_base":return l7e;default:break}return nM}s(d7e,"getRegexByEncoder");kc.getRegexByEncoder=d7e;function iBt(t){let e=tme(t);return d7e(e)}s(iBt,"getRegexByModel");kc.getRegexByModel=iBt;async function oBt(t,e=null){return f7e(tme(t),e)}s(oBt,"createByModelName");kc.createByModelName=oBt;async function f7e(t,e=null){let r,n,i=rme(t);switch(t){case"o200k_base":r=u7e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=l7e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=nM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=nM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=nM,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=nM,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await rBt(n,u),console.log(`Saved file to ${u}`)),p7e(u,i,r)}s(f7e,"createByEncoderName");kc.createByEncoderName=f7e;function p7e(t,e,r,n=8192){return new Z3t.TikTokenizer(t,e,r,n)}s(p7e,"createTokenizer");kc.createTokenizer=p7e});var h7e=U(Pc=>{"use strict";d();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createTokenizer=Pc.createByEncoderName=Pc.createByModelName=Pc.getSpecialTokensByModel=Pc.getSpecialTokensByEncoder=Pc.getRegexByModel=Pc.getRegexByEncoder=Pc.MODEL_TO_ENCODING=Pc.TikTokenizer=void 0;var sBt=eme();Object.defineProperty(Pc,"TikTokenizer",{enumerable:!0,get:s(function(){return sBt.TikTokenizer},"get")});var iI=m7e();Object.defineProperty(Pc,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return iI.MODEL_TO_ENCODING},"get")});Object.defineProperty(Pc,"getRegexByEncoder",{enumerable:!0,get:s(function(){return iI.getRegexByEncoder},"get")});Object.defineProperty(Pc,"getRegexByModel",{enumerable:!0,get:s(function(){return iI.getRegexByModel},"get")});Object.defineProperty(Pc,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return iI.getSpecialTokensByEncoder},"get")});Object.defineProperty(Pc,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return iI.getSpecialTokensByModel},"get")});Object.defineProperty(Pc,"createByModelName",{enumerable:!0,get:s(function(){return iI.createByModelName},"get")});Object.defineProperty(Pc,"createByEncoderName",{enumerable:!0,get:s(function(){return iI.createByEncoderName},"get")});Object.defineProperty(Pc,"createTokenizer",{enumerable:!0,get:s(function(){return iI.createTokenizer},"get")})});var dme=U((Cvn,O7e)=>{"use strict";d();O7e.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var U7e=U((xvn,Q7e)=>{"use strict";d();var ONt=dme();function QNt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=ONt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(QNt,"parsePath");Q7e.exports=QNt});var V7e=U((Tvn,j7e)=>{"use strict";d();var UNt=U7e();function qNt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(qNt,"_interopDefaultLegacy");var HNt=qNt(UNt);function WNt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(WNt,"getAugmentedNamespace");var H7e={},GNt="text/plain",jNt="us-ascii",q7e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),VNt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===jNt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==GNt)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function $Nt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return VNt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],m=f.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];q7e(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])q7e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s($Nt,"normalizeUrl");var zNt=Object.freeze({__proto__:null,default:$Nt}),YNt=WNt(zNt);Object.defineProperty(H7e,"__esModule",{value:!0});var KNt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JNt=YNt,XNt=W7e(JNt),ZNt=HNt.default,e8t=W7e(ZNt);function W7e(t){return t&&t.__esModule?t:{default:t}}s(W7e,"_interopRequireDefault");var G7e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":KNt(r))!=="object"&&(r={stripHash:!1}),e=(0,XNt.default)(e,r));var o=(0,e8t.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");G7e.MAX_INPUT_LENGTH=2048;var t8t=H7e.default=G7e;j7e.exports=t8t});var Y7e=U((Svn,z7e)=>{"use strict";d();var r8t=dme();function $7e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=r8t(t);if(t=t.substring(t.indexOf("://")+3),$7e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s($7e,"isSsh");z7e.exports=$7e});var X7e=U((Pvn,J7e)=>{"use strict";d();var n8t=V7e(),K7e=Y7e();function i8t(t){let e=n8t(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),K7e(e.protocols)||e.protocols.length===0&&K7e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(i8t,"gitUp");J7e.exports=i8t});var eQe=U((Nvn,Z7e)=>{"use strict";d();var o8t=X7e();function fme(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=o8t(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return fme.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var E=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,x=E.exec(n.pathname);return x!=null&&(n.source="bitbucket-server",x[1]==="users"?n.owner="~"+x[2]:n.owner=x[2],n.organization=n.owner,n.name=x[3],o=x[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=c8t(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(fme,"gitUrlParse");fme.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?s8t(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+a8t(t)+i;default:return t.href}};function s8t(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(s8t,"buildToken");function a8t(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(a8t,"buildPath");function c8t(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(c8t,"findLongestMatchingSubstring");Z7e.exports=fme});var A$=U((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var x=0,b=1;;){var _=t[e++];if(x+=(127&_)*b,b*=128,!(128&_))break}return x}s(n,"_");function i(){var x=n();return UTF8ArrayToString(t,(e+=x)-x,x)}s(i,"n");function o(x,b){if(x)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(f=n(),p=0;p<f;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var E=i();256&n()&&u.tlsExports.add(E)}else if(h===4)for(y=n();y--;)i(),E=i(),(3&n())==1&&u.weakImports.add(E);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,x=e.substr(E,100).split(`
`)[0],b,_=x.match(QUERY_WORD_REGEX)[0];switch(y){case 2:b=new RangeError(`Bad node name '${_}'`);break;case 3:b=new RangeError(`Bad field name '${_}'`);break;case 4:b=new RangeError(`Bad capture name @${_}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${E}: '${x}'...`),_="";break;default:b=new SyntaxError(`Bad syntax at offset ${E}: '${x}'...`),_=""}throw b.index=E,b.length=_.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let E=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");l[y]=UTF8ToString(E,x)}for(let y=0;y<o;y++){let E=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(E,x)}let f=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let y=0;y<c;y++){let E=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let b=[],_=E;for(let k=0;k<x;k++){let P=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,P===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[N]});else if(P===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[N]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let M=b[0].value,J=!0;switch(M){case"not-eq?":J=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let H=b[1].name,ce=b[2].name;g[y].push(function(ie){let V,Q;for(let z of ie)z.name===H&&(V=z.node),z.name===ce&&(Q=z.node);return V===void 0||Q===void 0||V.text===Q.text===J})}else{let H=b[1].name,ce=b[2].value;g[y].push(function(ie){for(let V of ie)if(V.name===H)return V.node.text===ce===J;return!0})}break;case"not-match?":J=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let pe=b[1].name,Y=new RegExp(b[2].value);g[y].push(function(H){for(let ce of H)if(ce.name===pe)return Y.test(ce.node.text)===J;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(H=>H.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[y]||(f[y]={}),f[y][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(H=>H.type!=="string"))throw new Error(`Arguments to \`#${M}\` predicate must be a strings.".`);let G=M==="is?"?p:m;G[y]||(G[y]={}),G[y][b[1].value]=b[2]?b[2].value:null;break;default:h[y].push({operator:M,operands:b.slice(1)})}b.length=0}}Object.freeze(f[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(f),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(E=>E(y))){u[f++]={pattern:h,captures:y};let E=this.setProperties[h];E&&(u[m].setProperties=E);let x=this.assertedProperties[h];x&&(u[m].assertedProperties=x);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[h].every(E=>E(f))){let E=f[y],x=this.setProperties[h];x&&(E.setProperties=x);let b=this.assertedProperties[h];b&&(E.assertedProperties=b);let _=this.refutedProperties[h];_&&(E.refutedProperties=_),u.push(E)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var ihe=U((gwn,GQe)=>{d();var nhe=require("fs"),z$=require("path"),kM=z$.join,V6t=z$.dirname,HQe=nhe.accessSync&&function(t){try{nhe.accessSync(t)}catch{return!1}return!0}||nhe.existsSync||z$.existsSync,WQe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function $6t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(WQe).map(function(l){l in t||(t[l]=WQe[l])}),t.module_root||(t.module_root=z6t(__filename)),z$.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=kM.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s($6t,"bindings");GQe.exports=$6t;function z6t(t){for(var e=V6t(t),r;;){if(e==="."&&(e=process.cwd()),HQe(kM(e,"dist")))return kM(e,"dist");if(HQe(kM(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=kM(e,"..")}}s(z6t,"getRoot")});var VQe=U((Cwn,jQe)=>{d();jQe.exports=ihe()("node_sqlite3.node")});var YQe=U(zQe=>{d();var Y6t=require("util");function K6t(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return Y6t.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=$Qe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+$Qe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(K6t,"extendTrace");zQe.extendTrace=K6t;function $Qe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s($Qe,"filter")});var ZQe=U((JQe,XQe)=>{d();var J6t=require("path"),Am=VQe(),n3=require("events").EventEmitter;XQe.exports=JQe=Am;function i3(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new Y$(this,e,r);return t.call(this,i,n)}}s(i3,"normalizeMethod");function she(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(she,"inherits");Am.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Ld(t,e,r);let n;if(t=J6t.resolve(t),!Am.cached.objects[t])n=Am.cached.objects[t]=new Ld(t,e,r);else{n=Am.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Ld=Am.Database,Y$=Am.Statement,ohe=Am.Backup;she(Ld,n3);she(Y$,n3);she(ohe,n3);Ld.prototype.prepare=i3(function(t,e){return e.length?t.bind.apply(t,e):t});Ld.prototype.run=i3(function(t,e){return t.run.apply(t,e).finalize(),this});Ld.prototype.get=i3(function(t,e){return t.get.apply(t,e).finalize(),this});Ld.prototype.all=i3(function(t,e){return t.all.apply(t,e).finalize(),this});Ld.prototype.each=i3(function(t,e){return t.each.apply(t,e).finalize(),this});Ld.prototype.map=i3(function(t,e){return t.map.apply(t,e).finalize(),this});Ld.prototype.backup=function(){let t;return arguments.length<=2?t=new ohe(this,arguments[0],"main","main",!0,arguments[1]):t=new ohe(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Am.BUSY,Am.LOCKED],t};Y$.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var KQe=!1,ahe=["trace","profile","change"];Ld.prototype.addListener=Ld.prototype.on=function(t){let e=n3.prototype.addListener.apply(this,arguments);return ahe.indexOf(t)>=0&&this.configure(t,!0),e};Ld.prototype.removeListener=function(t){let e=n3.prototype.removeListener.apply(this,arguments);return ahe.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ld.prototype.removeAllListeners=function(t){let e=n3.prototype.removeAllListeners.apply(this,arguments);return ahe.indexOf(t)>=0&&this.configure(t,!1),e};Am.verbose=function(){if(!KQe){let t=YQe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ld.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(Y$.prototype,e)}),KQe=!0}return Am}});var cz=U(Nc=>{"use strict";d();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.thenable=Nc.typedArray=Nc.stringArray=Nc.array=Nc.func=Nc.error=Nc.number=Nc.string=Nc.boolean=void 0;function Z6t(t){return t===!0||t===!1}s(Z6t,"boolean");Nc.boolean=Z6t;function iUe(t){return typeof t=="string"||t instanceof String}s(iUe,"string");Nc.string=iUe;function e9t(t){return typeof t=="number"||t instanceof Number}s(e9t,"number");Nc.number=e9t;function t9t(t){return t instanceof Error}s(t9t,"error");Nc.error=t9t;function oUe(t){return typeof t=="function"}s(oUe,"func");Nc.func=oUe;function sUe(t){return Array.isArray(t)}s(sUe,"array");Nc.array=sUe;function r9t(t){return sUe(t)&&t.every(e=>iUe(e))}s(r9t,"stringArray");Nc.stringArray=r9t;function n9t(t,e){return Array.isArray(t)&&t.every(e)}s(n9t,"typedArray");Nc.typedArray=n9t;function i9t(t){return t&&oUe(t.then)}s(i9t,"thenable");Nc.thenable=i9t});var uhe=U(ym=>{"use strict";d();Object.defineProperty(ym,"__esModule",{value:!0});ym.generateUuid=ym.parse=ym.isUUID=ym.v4=ym.empty=void 0;var DM=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},NM=class t extends DM{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};NM._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];NM._timeHighBits=["8","9","a","b"];ym.empty=new DM("00000000-0000-0000-0000-000000000000");function aUe(){return new NM}s(aUe,"v4");ym.v4=aUe;var o9t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function cUe(t){return o9t.test(t)}s(cUe,"isUUID");ym.isUUID=cUe;function s9t(t){if(!cUe(t))throw new Error("invalid uuid");return new DM(t)}s(s9t,"parse");ym.parse=s9t;function a9t(){return aUe().asHex()}s(a9t,"generateUuid");ym.generateUuid=a9t});var lUe=U(mI=>{"use strict";d();Object.defineProperty(mI,"__esModule",{value:!0});mI.attachPartialResult=mI.ProgressFeature=mI.attachWorkDone=void 0;var pI=di(),c9t=uhe(),t2=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(pI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(pI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(pI.WorkDoneProgress.type,this._token,{kind:"end"})}};t2.Instances=new Map;var lz=class extends t2{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new pI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},LM=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},uz=class extends LM{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new pI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function l9t(t,e){if(e===void 0||e.workDoneToken===void 0)return new LM;let r=e.workDoneToken;return delete e.workDoneToken,new t2(t,r)}s(l9t,"attachWorkDone");mI.attachWorkDone=l9t;var u9t=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(pI.WorkDoneProgressCancelNotification.type,r=>{let n=t2.Instances.get(r.token);(n instanceof lz||n instanceof uz)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new LM:new t2(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,c9t.generateUuid)();return this.connection.sendRequest(pI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new lz(this.connection,e))}else return Promise.resolve(new uz)}},"ProgressFeature");mI.ProgressFeature=u9t;var dhe;(function(t){t.type=new pI.ProgressType})(dhe||(dhe={}));var fhe=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(dhe.type,this._token,e)}};function d9t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new fhe(t,r)}s(d9t,"attachPartialResult");mI.attachPartialResult=d9t});var uUe=U(dz=>{"use strict";d();Object.defineProperty(dz,"__esModule",{value:!0});dz.ConfigurationFeature=void 0;var f9t=di(),p9t=cz(),m9t=s(t=>class extends t{getConfiguration(e){return e?p9t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(f9t.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");dz.ConfigurationFeature=m9t});var dUe=U(pz=>{"use strict";d();Object.defineProperty(pz,"__esModule",{value:!0});pz.WorkspaceFoldersFeature=void 0;var fz=di(),h9t=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new fz.Emitter,this.connection.onNotification(fz.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(fz.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(fz.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");pz.WorkspaceFoldersFeature=h9t});var fUe=U(mz=>{"use strict";d();Object.defineProperty(mz,"__esModule",{value:!0});mz.CallHierarchyFeature=void 0;var phe=di(),g9t=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(phe.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=phe.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=phe.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");mz.CallHierarchyFeature=g9t});var hhe=U(hI=>{"use strict";d();Object.defineProperty(hI,"__esModule",{value:!0});hI.SemanticTokensBuilder=hI.SemanticTokensDiff=hI.SemanticTokensFeature=void 0;var hz=di(),A9t=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(hz.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=hz.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=hz.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=hz.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");hI.SemanticTokensFeature=A9t;var gz=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};hI.SemanticTokensDiff=gz;var mhe=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new gz(this._prevData,this._data).computeDiff()}:this.build()}};hI.SemanticTokensBuilder=mhe});var pUe=U(Az=>{"use strict";d();Object.defineProperty(Az,"__esModule",{value:!0});Az.ShowDocumentFeature=void 0;var y9t=di(),C9t=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(y9t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");Az.ShowDocumentFeature=C9t});var mUe=U(yz=>{"use strict";d();Object.defineProperty(yz,"__esModule",{value:!0});yz.FileOperationsFeature=void 0;var s3=di(),E9t=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(s3.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(s3.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(s3.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(s3.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(s3.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(s3.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");yz.FileOperationsFeature=E9t});var hUe=U(Cz=>{"use strict";d();Object.defineProperty(Cz,"__esModule",{value:!0});Cz.LinkedEditingRangeFeature=void 0;var v9t=di(),x9t=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(v9t.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");Cz.LinkedEditingRangeFeature=x9t});var gUe=U(Ez=>{"use strict";d();Object.defineProperty(Ez,"__esModule",{value:!0});Ez.TypeHierarchyFeature=void 0;var ghe=di(),b9t=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(ghe.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=ghe.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=ghe.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");Ez.TypeHierarchyFeature=b9t});var yUe=U(vz=>{"use strict";d();Object.defineProperty(vz,"__esModule",{value:!0});vz.InlineValueFeature=void 0;var AUe=di(),I9t=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(AUe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(AUe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");vz.InlineValueFeature=I9t});var EUe=U(xz=>{"use strict";d();Object.defineProperty(xz,"__esModule",{value:!0});xz.FoldingRangeFeature=void 0;var CUe=di(),T9t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(CUe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=CUe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");xz.FoldingRangeFeature=T9t});var vUe=U(bz=>{"use strict";d();Object.defineProperty(bz,"__esModule",{value:!0});bz.InlayHintFeature=void 0;var Ahe=di(),w9t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Ahe.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Ahe.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Ahe.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");bz.InlayHintFeature=w9t});var xUe=U(Iz=>{"use strict";d();Object.defineProperty(Iz,"__esModule",{value:!0});Iz.DiagnosticFeature=void 0;var MM=di(),_9t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(MM.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(MM.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(MM.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(MM.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(MM.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");Iz.DiagnosticFeature=_9t});var Che=U(Tz=>{"use strict";d();Object.defineProperty(Tz,"__esModule",{value:!0});Tz.TextDocuments=void 0;var r2=di(),yhe=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new r2.Emitter,this._onDidOpen=new r2.Emitter,this._onDidClose=new r2.Emitter,this._onDidSave=new r2.Emitter,this._onWillSave=new r2.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=r2.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),r2.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};Tz.TextDocuments=yhe});var vhe=U(a3=>{"use strict";d();Object.defineProperty(a3,"__esModule",{value:!0});a3.NotebookDocuments=a3.NotebookSyncFeature=void 0;var Cm=di(),bUe=Che(),S9t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Cm.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Cm.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Cm.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Cm.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");a3.NotebookSyncFeature=S9t;var wz=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Cm.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Cm.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Cm.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};wz.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Ehe=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof bUe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new bUe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Cm.Emitter,this._onDidChange=new Cm.Emitter,this._onDidSave=new Cm.Emitter,this._onDidClose=new Cm.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new wz,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],m=[];if(l.cells!==void 0){let x=l.cells;if(x.structure!==void 0){let b=x.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),x.structure.didOpen!==void 0)for(let _ of x.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(x.structure.didClose)for(let _ of x.structure.didClose)r.closeTextDocument({textDocument:_}),f.push(_.uri)}if(x.data!==void 0){let b=new Map(x.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=b.get(o.cells[_].document);if(k!==void 0){let P=o.cells.splice(_,1,k);if(p.push({old:P[0],new:k}),b.delete(k.document),b.size===0)break}}}if(x.textContent!==void 0)for(let b of x.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let x of u)g.push(this.getNotebookCell(x));let y=[];for(let x of f)y.push(this.getNotebookCell(x));let E=[];for(let x of m)E.push(this.getNotebookCell(x));(g.length>0||y.length>0||p.length>0||E.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:E}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Cm.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};a3.NotebookDocuments=Ehe});var IUe=U(_z=>{"use strict";d();Object.defineProperty(_z,"__esModule",{value:!0});_z.MonikerFeature=void 0;var R9t=di(),k9t=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=R9t.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");_z.MonikerFeature=k9t});var _he=U(Po=>{"use strict";d();Object.defineProperty(Po,"__esModule",{value:!0});Po.createConnection=Po.combineFeatures=Po.combineNotebooksFeatures=Po.combineLanguagesFeatures=Po.combineWorkspaceFeatures=Po.combineWindowFeatures=Po.combineClientFeatures=Po.combineTracerFeatures=Po.combineTelemetryFeatures=Po.combineConsoleFeatures=Po._NotebooksImpl=Po._LanguagesImpl=Po.BulkUnregistration=Po.BulkRegistration=Po.ErrorMessageTracker=void 0;var Kt=di(),Em=cz(),bhe=uhe(),si=lUe(),P9t=uUe(),B9t=dUe(),D9t=fUe(),N9t=hhe(),L9t=pUe(),M9t=mUe(),F9t=hUe(),O9t=gUe(),Q9t=yUe(),U9t=EUe(),q9t=vUe(),H9t=xUe(),W9t=vhe(),G9t=IUe();function xhe(t){if(t!==null)return t}s(xhe,"null2Undefined");var Ihe=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Po.ErrorMessageTracker=Ihe;var Sz=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(Kt.MessageType.Error,e)}warn(e){this.send(Kt.MessageType.Warning,e)}info(e){this.send(Kt.MessageType.Info,e)}log(e){this.send(Kt.MessageType.Log,e)}debug(e){this.send(Kt.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(Kt.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,Kt.RAL)().console.error("Sending log message failed")})}},The=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:Kt.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(xhe)}showWarningMessage(e,...r){let n={type:Kt.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(xhe)}showInformationMessage(e,...r){let n={type:Kt.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(xhe)}},TUe=(0,L9t.ShowDocumentFeature)((0,si.ProgressFeature)(The)),wUe;(function(t){function e(){return new Rz}s(e,"create"),t.create=e})(wUe||(Po.BulkRegistration=wUe={}));var Rz=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Em.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=bhe.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},_Ue;(function(t){function e(){return new FM(void 0,[])}s(e,"create"),t.create=e})(_Ue||(Po.BulkUnregistration=_Ue={}));var FM=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(Kt.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Em.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(Kt.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},kz=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof Rz?this.registerMany(e):e instanceof FM?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Em.string(r)?r:r.method,o=bhe.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(Kt.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Em.string(e)?e:e.method,i=bhe.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(Kt.RegistrationRequest.type,o).then(a=>Kt.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(Kt.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(Kt.RegistrationRequest.type,r).then(()=>new FM(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},whe=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(Kt.ApplyWorkspaceEditRequest.type,n)}},SUe=(0,M9t.FileOperationsFeature)((0,B9t.WorkspaceFoldersFeature)((0,P9t.ConfigurationFeature)(whe))),Pz=class{static{s(this,"TracerImpl")}constructor(){this._trace=Kt.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==Kt.Trace.Off&&this.connection.sendNotification(Kt.LogTraceNotification.type,{message:e,verbose:this._trace===Kt.Trace.Verbose?r:void 0}).catch(()=>{})}},Bz=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(Kt.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Dz=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,si.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,si.attachPartialResult)(this.connection,r)}};Po._LanguagesImpl=Dz;var RUe=(0,U9t.FoldingRangeFeature)((0,G9t.MonikerFeature)((0,H9t.DiagnosticFeature)((0,q9t.InlayHintFeature)((0,Q9t.InlineValueFeature)((0,O9t.TypeHierarchyFeature)((0,F9t.LinkedEditingRangeFeature)((0,N9t.SemanticTokensFeature)((0,D9t.CallHierarchyFeature)(Dz))))))))),Nz=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,si.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,si.attachPartialResult)(this.connection,r)}};Po._NotebooksImpl=Nz;var kUe=(0,W9t.NotebookSyncFeature)(Nz);function PUe(t,e){return function(r){return e(t(r))}}s(PUe,"combineConsoleFeatures");Po.combineConsoleFeatures=PUe;function BUe(t,e){return function(r){return e(t(r))}}s(BUe,"combineTelemetryFeatures");Po.combineTelemetryFeatures=BUe;function DUe(t,e){return function(r){return e(t(r))}}s(DUe,"combineTracerFeatures");Po.combineTracerFeatures=DUe;function NUe(t,e){return function(r){return e(t(r))}}s(NUe,"combineClientFeatures");Po.combineClientFeatures=NUe;function LUe(t,e){return function(r){return e(t(r))}}s(LUe,"combineWindowFeatures");Po.combineWindowFeatures=LUe;function MUe(t,e){return function(r){return e(t(r))}}s(MUe,"combineWorkspaceFeatures");Po.combineWorkspaceFeatures=MUe;function FUe(t,e){return function(r){return e(t(r))}}s(FUe,"combineLanguagesFeatures");Po.combineLanguagesFeatures=FUe;function OUe(t,e){return function(r){return e(t(r))}}s(OUe,"combineNotebooksFeatures");Po.combineNotebooksFeatures=OUe;function j9t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,PUe),tracer:r(t.tracer,e.tracer,DUe),telemetry:r(t.telemetry,e.telemetry,BUe),client:r(t.client,e.client,NUe),window:r(t.window,e.window,LUe),workspace:r(t.workspace,e.workspace,MUe),languages:r(t.languages,e.languages,FUe),notebooks:r(t.notebooks,e.notebooks,OUe)}}s(j9t,"combineFeatures");Po.combineFeatures=j9t;function V9t(t,e,r){let n=r&&r.console?new(r.console(Sz)):new Sz,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(Pz)):new Pz,a=r&&r.telemetry?new(r.telemetry(Bz)):new Bz,c=r&&r.client?new(r.client(kz)):new kz,l=r&&r.window?new(r.window(TUe)):new TUe,u=r&&r.workspace?new(r.workspace(SUe)):new SUe,f=r&&r.languages?new(r.languages(RUe)):new RUe,p=r&&r.notebooks?new(r.notebooks(kUe)):new kUe,m=[n,o,a,c,l,u,f,p];function h(b){return b instanceof Promise?b:Em.thenable(b)?new Promise((_,k)=>{b.then(P=>_(P),P=>k(P))}):Promise.resolve(b)}s(h,"asPromise");let g,y,E,x={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,..._)=>i.sendRequest(Em.string(b)?b:b.method,..._),"sendRequest"),onRequest:s((b,_)=>i.onRequest(b,_),"onRequest"),sendNotification:s((b,_)=>{let k=Em.string(b)?b:b.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((b,_)=>i.onNotification(b,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(Kt.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(E=b,{dispose:s(()=>{E=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(Kt.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(Kt.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(Kt.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(Kt.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(Kt.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(Kt.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(Kt.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(Kt.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(Kt.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(Kt.HoverRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(Kt.CompletionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(Kt.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(Kt.SignatureHelpRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(Kt.DeclarationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(b=>i.onRequest(Kt.DefinitionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(Kt.TypeDefinitionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(Kt.ImplementationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(b=>i.onRequest(Kt.ReferencesRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(Kt.DocumentHighlightRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(Kt.DocumentSymbolRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(Kt.WorkspaceSymbolRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(Kt.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(Kt.CodeActionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(Kt.CodeActionResolveRequest.type,(_,k)=>b(_,k)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(Kt.CodeLensRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(Kt.CodeLensResolveRequest.type,(_,k)=>b(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(Kt.DocumentFormattingRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(Kt.DocumentRangeFormattingRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(Kt.DocumentOnTypeFormattingRequest.type,(_,k)=>b(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(Kt.RenameRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(Kt.PrepareRenameRequest.type,(_,k)=>b(_,k)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(Kt.DocumentLinkRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(Kt.DocumentLinkResolveRequest.type,(_,k)=>b(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(Kt.DocumentColorRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(Kt.ColorPresentationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(Kt.FoldingRangeRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(Kt.SelectionRangeRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(Kt.ExecuteCommandRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(x);return i.onRequest(Kt.InitializeRequest.type,b=>{e.initialize(b),Em.string(b.trace)&&(o.trace=Kt.Trace.fromString(b.trace));for(let _ of m)_.initialize(b.capabilities);if(y){let _=y(b,new Kt.CancellationTokenSource().token,(0,si.attachWorkDone)(i,b),void 0);return h(_).then(k=>{if(k instanceof Kt.ResponseError)return k;let P=k;P||(P={capabilities:{}});let N=P.capabilities;N||(N={},P.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Em.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None:!Em.number(N.textDocumentSync)&&!Em.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Em.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None);for(let M of m)M.fillServerCapabilities(N);return P})}else{let _={capabilities:{textDocumentSync:Kt.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest(Kt.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new Kt.CancellationTokenSource().token)}),i.onNotification(Kt.ExitNotification.type,()=>{try{E&&E()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(Kt.SetTraceNotification.type,b=>{o.trace=Kt.Trace.fromString(b.value)}),x}s(V9t,"createConnection");Po.createConnection=V9t});var QUe=U(Nf=>{"use strict";d();Object.defineProperty(Nf,"__esModule",{value:!0});Nf.resolveModulePath=Nf.FileSystem=Nf.resolveGlobalYarnPath=Nf.resolveGlobalNodePath=Nf.resolve=Nf.uriToFilePath=void 0;var $9t=require("url"),mg=require("path"),She=require("fs"),Bhe=require("child_process");function z9t(t){let e=$9t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return mg.normalize(r.join("/"))}s(z9t,"uriToFilePath");Nf.uriToFilePath=z9t;function Rhe(){return process.platform==="win32"}s(Rhe,"isWindows");function Lz(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&She.existsSync(e)&&(u[i]?u[i]=e+mg.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,Bhe.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(Lz,"resolve");Nf.resolve=Lz;function khe(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};Rhe()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Bhe.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Rhe()?mg.join(a,"node_modules"):mg.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(khe,"resolveGlobalNodePath");Nf.resolveGlobalNodePath=khe;function Y9t(t){let e="yarn",r={encoding:"utf8"};Rhe()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,Bhe.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return mg.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(Y9t,"resolveGlobalYarnPath");Nf.resolveGlobalYarnPath=Y9t;var Phe;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!She.existsSync(__filename.toUpperCase())||!She.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?mg.normalize(o).indexOf(mg.normalize(i))===0:mg.normalize(o).toLowerCase().indexOf(mg.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Phe||(Nf.FileSystem=Phe={}));function K9t(t,e,r,n){return r?(mg.isAbsolute(r)||(r=mg.join(t,r)),Lz(e,r,r,n).then(i=>Phe.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Lz(e,khe(n),t,n))):Lz(e,khe(n),t,n)}s(K9t,"resolveModulePath");Nf.resolveModulePath=K9t});var Dhe=U((LSn,UUe)=>{"use strict";d();UUe.exports=di()});var qUe=U(Mz=>{"use strict";d();Object.defineProperty(Mz,"__esModule",{value:!0});Mz.InlineCompletionFeature=void 0;var J9t=di(),X9t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(J9t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");Mz.InlineCompletionFeature=X9t});var GUe=U(Ku=>{"use strict";d();var Z9t=Ku&&Ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WUe=Ku&&Ku.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Z9t(e,t,r)};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ProposedFeatures=Ku.NotebookDocuments=Ku.TextDocuments=Ku.SemanticTokensBuilder=void 0;var eLt=hhe();Object.defineProperty(Ku,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return eLt.SemanticTokensBuilder},"get")});var tLt=qUe();WUe(di(),Ku);var rLt=Che();Object.defineProperty(Ku,"TextDocuments",{enumerable:!0,get:s(function(){return rLt.TextDocuments},"get")});var nLt=vhe();Object.defineProperty(Ku,"NotebookDocuments",{enumerable:!0,get:s(function(){return nLt.NotebookDocuments},"get")});WUe(_he(),Ku);var HUe;(function(t){t.all={__brand:"features",languages:tLt.InlineCompletionFeature}})(HUe||(Ku.ProposedFeatures=HUe={}))});var Lc=U(vm=>{"use strict";d();var iLt=vm&&vm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zUe=vm&&vm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iLt(e,t,r)};Object.defineProperty(vm,"__esModule",{value:!0});vm.createConnection=vm.Files=void 0;var jUe=require("node:util"),Nhe=cz(),oLt=_he(),OM=QUe(),n2=Dhe();zUe(Dhe(),vm);zUe(GUe(),vm);var VUe;(function(t){t.uriToFilePath=OM.uriToFilePath,t.resolveGlobalNodePath=OM.resolveGlobalNodePath,t.resolveGlobalYarnPath=OM.resolveGlobalYarnPath,t.resolve=OM.resolve,t.resolveModulePath=OM.resolveModulePath})(VUe||(vm.Files=VUe={}));var $Ue;function Fz(){if($Ue!==void 0)try{$Ue.end()}catch{}}s(Fz,"endProtocolConnection");var c3=!1,YUe;function sLt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(YUe=setInterval(()=>{try{process.kill(n,0)}catch{Fz(),process.exit(c3?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(sLt,"setupExitTimer");sLt();var aLt={initialize:s(t=>{let e=t.processId;Nhe.number(e)&&YUe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(c3?0:1)}},3e3)},"initialize"),get shutdownReceived(){return c3},set shutdownReceived(t){c3=t},exit:s(t=>{Fz(),process.exit(t)},"exit")};function cLt(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),n2.ConnectionStrategy.is(t)||n2.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),lLt(o,a,c,i)}s(cLt,"createConnection");vm.createConnection=cLt;function lLt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let m=f[p];if(m==="--node-ipc"){t=new n2.IPCMessageReader(process),e=new n2.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(f[p+1]);break}else if(m==="--pipe"){u=f[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,n2.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,n2.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Nhe.func(t.read)&&Nhe.func(t.on)){let l=t;l.on("end",()=>{Fz(),process.exit(c3?0:1)}),l.on("close",()=>{Fz(),process.exit(c3?0:1)})}let c=s(l=>{let u=(0,n2.createProtocolConnection)(t,e,l,r);return i&&uLt(l),u},"connectionFactory");return(0,oLt.createConnection)(c,aLt,n)}s(lLt,"_createConnection");function uLt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,jUe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,jUe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(uLt,"patchConsole")});var hg=U(($Sn,KUe)=>{"use strict";d();KUe.exports=Lc()});var OWe=U((ePn,FWe)=>{"use strict";d();FWe.exports=LWe;function LWe(t,e,r){t instanceof RegExp&&(t=NWe(t,r)),e instanceof RegExp&&(e=NWe(e,r));var n=MWe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(LWe,"balanced");function NWe(t,e){var r=e.match(t);return r?r[0]:null}s(NWe,"maybeMatch");LWe.range=MWe;function MWe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(MWe,"range")});var VWe=U((nPn,jWe)=>{d();var QWe=OWe();jWe.exports=tMt;var UWe="\0SLASH"+Math.random()+"\0",qWe="\0OPEN"+Math.random()+"\0",Mge="\0CLOSE"+Math.random()+"\0",HWe="\0COMMA"+Math.random()+"\0",WWe="\0PERIOD"+Math.random()+"\0";function Lge(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Lge,"numeric");function ZLt(t){return t.split("\\\\").join(UWe).split("\\{").join(qWe).split("\\}").join(Mge).split("\\,").join(HWe).split("\\.").join(WWe)}s(ZLt,"escapeBraces");function eMt(t){return t.split(UWe).join("\\").split(qWe).join("{").split(Mge).join("}").split(HWe).join(",").split(WWe).join(".")}s(eMt,"unescapeBraces");function GWe(t){if(!t)return[""];var e=[],r=QWe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=GWe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(GWe,"parseCommaParts");function tMt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),YM(ZLt(t),!0).map(eMt)):[]}s(tMt,"expandTop");function rMt(t){return"{"+t+"}"}s(rMt,"embrace");function nMt(t){return/^-?0\d/.test(t)}s(nMt,"isPadded");function iMt(t,e){return t<=e}s(iMt,"lte");function oMt(t,e){return t>=e}s(oMt,"gte");function YM(t,e){var r=[],n=QWe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?YM(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Mge+n.post,YM(t)):[t];var m;if(f)m=n.body.split(/\.\./);else if(m=GWe(n.body),m.length===1&&(m=YM(m[0],!1).map(rMt),m.length===1))return o.map(function(Y){return n.pre+m[0]+Y});var h;if(f){var g=Lge(m[0]),y=Lge(m[1]),E=Math.max(m[0].length,m[1].length),x=m.length==3?Math.abs(Lge(m[2])):1,b=iMt,_=y<g;_&&(x*=-1,b=oMt);var k=m.some(nMt);h=[];for(var P=g;b(P,y);P+=x){var N;if(u)N=String.fromCharCode(P),N==="\\"&&(N="");else if(N=String(P),k){var M=E-N.length;if(M>0){var J=new Array(M+1).join("0");P<0?N="-"+J+N.slice(1):N=J+N}}h.push(N)}}else{h=[];for(var pe=0;pe<m.length;pe++)h.push.apply(h,YM(m[pe],!1))}for(var pe=0;pe<h.length;pe++)for(var a=0;a<o.length;a++){var c=i+h[pe]+o[a];(!e||f||c)&&r.push(c)}}return r}s(YM,"expand")});var fa=U((DYn,p$e)=>{d();p$e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Mo=U((LYn,m$e)=>{"use strict";d();var Sa=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},gye=class extends Sa{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Aye=class extends Sa{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},yye=class extends Sa{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Cye=class extends Sa{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Eye=class extends Sa{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},vye=class extends Sa{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},xye=class extends Sa{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},gJ=class extends Sa{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},bye=class extends gJ{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Iye=class extends Sa{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Tye=class extends Sa{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},wye=class extends Sa{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},_ye=class extends Sa{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Sye=class extends Sa{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Rye=class extends Sa{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},kye=class extends Sa{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Pye=class extends Sa{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Bye=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},Dye=class extends Sa{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Nye=class extends Sa{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Lye=class extends Sa{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},Mye=class extends Sa{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};m$e.exports={AbortError:gJ,HTTPParserError:Bye,UndiciError:Sa,HeadersTimeoutError:Aye,HeadersOverflowError:yye,BodyTimeoutError:Cye,RequestContentLengthMismatchError:Tye,ConnectTimeoutError:gye,ResponseStatusCodeError:Eye,InvalidArgumentError:vye,InvalidReturnValueError:xye,RequestAbortedError:bye,ClientDestroyedError:_ye,ClientClosedError:Sye,InformationalError:Iye,SocketError:Rye,NotSupportedError:kye,ResponseContentLengthMismatchError:wye,BalancedPoolMissingUpstreamError:Pye,ResponseExceededMaxSizeError:Dye,RequestRetryError:Nye,ResponseError:Lye,SecureProxyConnectionError:Mye}});var yJ=U((OYn,h$e)=>{"use strict";d();var AJ={},Fye=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Fye.length;++t){let e=Fye[t],r=e.toLowerCase();AJ[e]=AJ[r]=r}Object.setPrototypeOf(AJ,null);h$e.exports={wellknownHeaderNames:Fye,headerNameLowerCasedRecord:AJ}});var C$e=U((UYn,y$e)=>{"use strict";d();var{wellknownHeaderNames:g$e,headerNameLowerCasedRecord:hQt}=yJ(),Oye=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},CJ=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new Oye(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},A$e=new CJ;for(let t=0;t<g$e.length;++t){let e=hQt[g$e[t]];A$e.insert(e,e)}y$e.exports={TernarySearchTree:CJ,tree:A$e}});var Pi=U((WYn,L$e)=>{"use strict";d();var SF=require("node:assert"),{kDestroyed:v$e,kBodyUsed:X3,kListeners:Qye,kBody:E$e}=fa(),{IncomingMessage:gQt}=require("node:http"),xJ=require("node:stream"),AQt=require("node:net"),{Blob:yQt}=require("node:buffer"),CQt=require("node:util"),{stringify:EQt}=require("node:querystring"),{EventEmitter:vQt}=require("node:events"),{InvalidArgumentError:Nl}=Mo(),{headerNameLowerCasedRecord:xQt}=yJ(),{tree:x$e}=C$e(),[bQt,IQt]=process.versions.node.split(".").map(t=>Number(t)),vJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[E$e]=e,this[X3]=!1}async*[Symbol.asyncIterator](){SF(!this[X3],"disturbed"),this[X3]=!0,yield*this[E$e]}};function TQt(t){return bJ(t)?(_$e(t)===0&&t.on("data",function(){SF(!1)}),typeof t.readableDidRead!="boolean"&&(t[X3]=!1,vQt.prototype.on.call(t,"data",function(){this[X3]=!0})),t):t&&typeof t.pipeTo=="function"?new vJ(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&w$e(t)?new vJ(t):t}s(TQt,"wrapRequestBody");function wQt(){}s(wQt,"nop");function bJ(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(bJ,"isStream");function b$e(t){if(t===null)return!1;if(t instanceof yQt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(b$e,"isBlobLike");function _Qt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=EQt(e);return r&&(t+="?"+r),t}s(_Qt,"buildURL");function I$e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(I$e,"isValidPort");function EJ(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(EJ,"isHttpOrHttpsPrefixed");function T$e(t){if(typeof t=="string"){if(t=new URL(t),!EJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Nl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&I$e(t.port)===!1)throw new Nl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Nl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Nl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Nl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Nl("Invalid URL origin: the origin must be a string or null/undefined.");if(!EJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!EJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(T$e,"parseURL");function SQt(t){if(t=T$e(t),t.pathname!=="/"||t.search||t.hash)throw new Nl("invalid url");return t}s(SQt,"parseOrigin");function RQt(t){if(t[0]==="["){let r=t.indexOf("]");return SF(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(RQt,"getHostname");function kQt(t){if(!t)return null;SF(typeof t=="string");let e=RQt(t);return AQt.isIP(e)?"":e}s(kQt,"getServerName");function PQt(t){return JSON.parse(JSON.stringify(t))}s(PQt,"deepClone");function BQt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(BQt,"isAsyncIterable");function w$e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(w$e,"isIterable");function _$e(t){if(t==null)return 0;if(bJ(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(b$e(t))return t.size!=null?t.size:null;if(k$e(t))return t.byteLength}return null}s(_$e,"bodyLength");function S$e(t){return t&&!!(t.destroyed||t[v$e]||xJ.isDestroyed?.(t))}s(S$e,"isDestroyed");function DQt(t,e){t==null||!bJ(t)||S$e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===gQt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[v$e]=!0))}s(DQt,"destroy");var NQt=/timeout=(\d+)/;function LQt(t){let e=t.toString().match(NQt);return e?parseInt(e[1],10)*1e3:null}s(LQt,"parseKeepAliveTimeout");function R$e(t){return typeof t=="string"?xQt[t]??t.toLowerCase():x$e.lookup(t)??t.toString("latin1").toLowerCase()}s(R$e,"headerNameToString");function MQt(t){return x$e.lookup(t)??t.toString("latin1").toLowerCase()}s(MQt,"bufferToLowerCasedHeaderName");function FQt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=R$e(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(FQt,"parseHeaders");function OQt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(OQt,"parseRawHeaders");function k$e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(k$e,"isBuffer");function QQt(t,e,r){if(!t||typeof t!="object")throw new Nl("handler must be an object");if(typeof t.onConnect!="function")throw new Nl("invalid onConnect method");if(typeof t.onError!="function")throw new Nl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Nl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Nl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Nl("invalid onHeaders method");if(typeof t.onData!="function")throw new Nl("invalid onData method");if(typeof t.onComplete!="function")throw new Nl("invalid onComplete method")}}s(QQt,"validateHandler");function UQt(t){return!!(t&&(xJ.isDisturbed(t)||t[X3]))}s(UQt,"isDisturbed");function qQt(t){return!!(t&&xJ.isErrored(t))}s(qQt,"isErrored");function HQt(t){return!!(t&&xJ.isReadable(t))}s(HQt,"isReadable");function WQt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(WQt,"getSocketInfo");function GQt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(GQt,"ReadableStreamFrom");function jQt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(jQt,"isFormDataLike");function VQt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(VQt,"addAbortListener");var $Qt=typeof String.prototype.toWellFormed=="function",zQt=typeof String.prototype.isWellFormed=="function";function P$e(t){return $Qt?`${t}`.toWellFormed():CQt.toUSVString(t)}s(P$e,"toUSVString");function YQt(t){return zQt?`${t}`.isWellFormed():P$e(t)===`${t}`}s(YQt,"isUSVString");function B$e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(B$e,"isTokenCharCode");function KQt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!B$e(t.charCodeAt(e)))return!1;return!0}s(KQt,"isValidHTTPToken");var JQt=/[^\t\x20-\x7e\x80-\xff]/;function XQt(t){return!JQt.test(t)}s(XQt,"isValidHeaderValue");function ZQt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(ZQt,"parseRangeHeader");function eUt(t,e,r){return(t[Qye]??=[]).push([e,r]),t.on(e,r),t}s(eUt,"addListener");function tUt(t){for(let[e,r]of t[Qye]??[])t.removeListener(e,r);t[Qye]=null}s(tUt,"removeAllListeners");function rUt(t,e,r){try{e.onError(r),SF(e.aborted)}catch(n){t.emit("error",n)}}s(rUt,"errorRequest");var D$e=Object.create(null);D$e.enumerable=!0;var Uye={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},N$e={...Uye,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Uye,null);Object.setPrototypeOf(N$e,null);L$e.exports={kEnumerableProperty:D$e,nop:wQt,isDisturbed:UQt,isErrored:qQt,isReadable:HQt,toUSVString:P$e,isUSVString:YQt,isBlobLike:b$e,parseOrigin:SQt,parseURL:T$e,getServerName:kQt,isStream:bJ,isIterable:w$e,isAsyncIterable:BQt,isDestroyed:S$e,headerNameToString:R$e,bufferToLowerCasedHeaderName:MQt,addListener:eUt,removeAllListeners:tUt,errorRequest:rUt,parseRawHeaders:OQt,parseHeaders:FQt,parseKeepAliveTimeout:LQt,destroy:DQt,bodyLength:_$e,deepClone:PQt,ReadableStreamFrom:GQt,isBuffer:k$e,validateHandler:QQt,getSocketInfo:WQt,isFormDataLike:jQt,buildURL:_Qt,addAbortListener:VQt,isValidHTTPToken:KQt,isValidHeaderValue:XQt,isTokenCharCode:B$e,parseRangeHeader:ZQt,normalizedMethodRecordsBase:Uye,normalizedMethodRecords:N$e,isValidPort:I$e,isHttpOrHttpsPrefixed:EJ,nodeMajor:bQt,nodeMinor:IQt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:TQt}});var Z3=U((VYn,F$e)=>{"use strict";d();var Uo=require("node:diagnostics_channel"),Hye=require("node:util"),IJ=Hye.debuglog("undici"),qye=Hye.debuglog("fetch"),F2=Hye.debuglog("websocket"),M$e=!1,nUt={beforeConnect:Uo.channel("undici:client:beforeConnect"),connected:Uo.channel("undici:client:connected"),connectError:Uo.channel("undici:client:connectError"),sendHeaders:Uo.channel("undici:client:sendHeaders"),create:Uo.channel("undici:request:create"),bodySent:Uo.channel("undici:request:bodySent"),headers:Uo.channel("undici:request:headers"),trailers:Uo.channel("undici:request:trailers"),error:Uo.channel("undici:request:error"),open:Uo.channel("undici:websocket:open"),close:Uo.channel("undici:websocket:close"),socketError:Uo.channel("undici:websocket:socket_error"),ping:Uo.channel("undici:websocket:ping"),pong:Uo.channel("undici:websocket:pong")};if(IJ.enabled||qye.enabled){let t=qye.enabled?qye:IJ;Uo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Uo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Uo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Uo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Uo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Uo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Uo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),M$e=!0}if(F2.enabled){if(!M$e){let t=IJ.enabled?IJ:F2;Uo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Uo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Uo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Uo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Uo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;F2("connection opened %s%s",e,r?`:${r}`:"")}),Uo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;F2("closed connection to %s - %s %s",e.url,r,n)}),Uo.channel("undici:websocket:socket_error").subscribe(t=>{F2("connection errored - %s",t.message)}),Uo.channel("undici:websocket:ping").subscribe(t=>{F2("ping received")}),Uo.channel("undici:websocket:pong").subscribe(t=>{F2("pong received")})}F$e.exports={channels:nUt}});var H$e=U((zYn,q$e)=>{"use strict";d();var{InvalidArgumentError:Ra,NotSupportedError:iUt}=Mo(),PE=require("node:assert"),{isValidHTTPToken:U$e,isValidHeaderValue:O$e,isStream:oUt,destroy:sUt,isBuffer:aUt,isFormDataLike:cUt,isIterable:lUt,isBlobLike:uUt,buildURL:dUt,validateHandler:fUt,getServerName:pUt,normalizedMethodRecords:mUt}=Pi(),{channels:jy}=Z3(),{headerNameLowerCasedRecord:Q$e}=yJ(),hUt=/[^\u0021-\u00ff]/,Om=Symbol("handler"),Wye=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},E){if(typeof r!="string")throw new Ra("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Ra("path must be an absolute URL or start with a slash");if(hUt.test(r))throw new Ra("invalid request path");if(typeof n!="string")throw new Ra("method must be a string");if(mUt[n]===void 0&&!U$e(n))throw new Ra("invalid request method");if(u&&typeof u!="string")throw new Ra("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Ra("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Ra("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new Ra("invalid reset");if(g!=null&&typeof g!="boolean")throw new Ra("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(oUt(i)){this.body=i;let x=this.body._readableState;(!x||!x.autoDestroy)&&(this.endHandler=s(function(){sUt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(aUt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(cUt(i)||lUt(i)||uUt(i))this.body=i;else throw new Ra("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?dUt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Ra("headers array must be even");for(let x=0;x<o.length;x+=2)TJ(this,o[x],o[x+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let x of o){if(!Array.isArray(x)||x.length!==2)throw new Ra("headers must be in key-value pair format");TJ(this,x[0],x[1])}else{let x=Object.keys(o);for(let b=0;b<x.length;++b)TJ(this,x[b],o[x[b]])}else if(o!=null)throw new Ra("headers must be an object or an array");fUt(E,n,u),this.servername=y||pUt(this.host),this[Om]=E,jy.create.hasSubscribers&&jy.create.publish({request:this})}onBodySent(e){if(this[Om].onBodySent)try{return this[Om].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(jy.bodySent.hasSubscribers&&jy.bodySent.publish({request:this}),this[Om].onRequestSent)try{return this[Om].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(PE(!this.aborted),PE(!this.completed),this.error)e(this.error);else return this.abort=e,this[Om].onConnect(e)}onResponseStarted(){return this[Om].onResponseStarted?.()}onHeaders(e,r,n,i){PE(!this.aborted),PE(!this.completed),jy.headers.hasSubscribers&&jy.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Om].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){PE(!this.aborted),PE(!this.completed);try{return this[Om].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return PE(!this.aborted),PE(!this.completed),this[Om].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),PE(!this.aborted),this.completed=!0,jy.trailers.hasSubscribers&&jy.trailers.publish({request:this,trailers:e});try{return this[Om].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),jy.error.hasSubscribers&&jy.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Om].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return TJ(this,e,r),this}};function TJ(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Ra(`invalid ${e} header`);if(r===void 0)return;let n=Q$e[e];if(n===void 0&&(n=e.toLowerCase(),Q$e[n]===void 0&&!U$e(n)))throw new Ra("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!O$e(r[o]))throw new Ra(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new Ra(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!O$e(r))throw new Ra(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new Ra("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new Ra("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Ra(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Ra("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new iUt("expect header not supported");t.headers.push(e,r)}}}s(TJ,"processHeader");q$e.exports=Wye});var RF=U((JYn,W$e)=>{"use strict";d();var gUt=require("node:events"),wJ=class extends gUt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new Gye(this,n)}},Gye=class extends wJ{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};W$e.exports=wJ});var nB=U((eKn,G$e)=>{"use strict";d();var AUt=RF(),{ClientDestroyedError:jye,ClientClosedError:yUt,InvalidArgumentError:eB}=Mo(),{kDestroy:CUt,kClose:EUt,kClosed:kF,kDestroyed:tB,kDispatch:Vye,kInterceptors:O2}=fa(),BE=Symbol("onDestroyed"),rB=Symbol("onClosed"),_J=Symbol("Intercepted Dispatch"),$ye=class extends AUt{static{s(this,"DispatcherBase")}constructor(){super(),this[tB]=!1,this[BE]=null,this[kF]=!1,this[rB]=[]}get destroyed(){return this[tB]}get closed(){return this[kF]}get interceptors(){return this[O2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[O2][r]!="function")throw new eB("interceptor must be an function")}this[O2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new eB("invalid callback");if(this[tB]){queueMicrotask(()=>e(new jye,null));return}if(this[kF]){this[rB]?this[rB].push(e):queueMicrotask(()=>e(null,null));return}this[kF]=!0,this[rB].push(e);let r=s(()=>{let n=this[rB];this[rB]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[EUt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new eB("invalid callback");if(this[tB]){this[BE]?this[BE].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new jye),this[tB]=!0,this[BE]=this[BE]||[],this[BE].push(r);let n=s(()=>{let i=this[BE];this[BE]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[CUt](e).then(()=>{queueMicrotask(n)})}[_J](e,r){if(!this[O2]||this[O2].length===0)return this[_J]=this[Vye],this[Vye](e,r);let n=this[Vye].bind(this);for(let i=this[O2].length-1;i>=0;i--)n=this[O2][i](n);return this[_J]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new eB("handler must be an object");try{if(!e||typeof e!="object")throw new eB("opts must be an object.");if(this[tB]||this[BE])throw new jye;if(this[kF])throw new yUt;return this[_J](e,r)}catch(n){if(typeof r.onError!="function")throw new eB("invalid onError method");return r.onError(n),!1}}};G$e.exports=$ye});var eCe=U((nKn,z$e)=>{"use strict";d();var iB=0,zye=1e3,Yye=(zye>>1)-1,DE,Kye=Symbol("kFastTimer"),NE=[],Jye=-2,Xye=-1,V$e=0,j$e=1;function Zye(){iB+=Yye;let t=0,e=NE.length;for(;t<e;){let r=NE[t];r._state===V$e?(r._idleStart=iB-Yye,r._state=j$e):r._state===j$e&&iB>=r._idleStart+r._idleTimeout&&(r._state=Xye,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===Xye?(r._state=Jye,--e!==0&&(NE[t]=NE[e])):++t}NE.length=e,NE.length!==0&&$$e()}s(Zye,"onTick");function $$e(){DE?DE.refresh():(clearTimeout(DE),DE=setTimeout(Zye,Yye),DE.unref&&DE.unref())}s($$e,"refreshTimeout");var SJ=class{static{s(this,"FastTimer")}[Kye]=!0;_state=Jye;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===Jye&&NE.push(this),(!DE||NE.length===1)&&$$e(),this._state=V$e}clear(){this._state=Xye,this._idleStart=-1}};z$e.exports={setTimeout(t,e,r){return e<=zye?setTimeout(t,e,r):new SJ(t,e,r)},clearTimeout(t){t[Kye]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new SJ(t,e,r)},clearFastTimeout(t){t.clear()},now(){return iB},tick(t=0){iB+=t-zye+1,Zye(),Zye()},reset(){iB=0,NE.length=0,clearTimeout(DE),DE=null},kFastTimer:Kye}});var PF=U((cKn,Z$e)=>{"use strict";d();var vUt=require("node:net"),Y$e=require("node:assert"),X$e=Pi(),{InvalidArgumentError:xUt,ConnectTimeoutError:bUt}=Mo(),RJ=eCe();function K$e(){}s(K$e,"noop");var tCe,rCe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?rCe=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:rCe=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function IUt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new xUt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new rCe(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},E){let x;if(p==="https:"){tCe||(tCe=require("node:tls")),h=h||a.servername||X$e.getServerName(f)||null;let _=h||u;Y$e(_);let k=i||c.get(_)||null;m=m||443,x=tCe.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),x.on("session",function(P){c.set(_,P)})}else Y$e(!y,"httpSocket can only be sent on TLS update"),m=m||80,x=vUt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;x.setKeepAlive(!0,_)}let b=TUt(new WeakRef(x),{timeout:n,hostname:u,port:m});return x.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),E){let _=E;E=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(b),E){let k=E;E=null,k(_)}}),x},"connect")}s(IUt,"buildConnector");var TUt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return K$e;let r=null,n=null,i=RJ.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>J$e(t.deref(),e))})},e.timeout);return()=>{RJ.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return K$e;let r=null,n=RJ.setFastTimeout(()=>{r=setImmediate(()=>{J$e(t.deref(),e)})},e.timeout);return()=>{RJ.clearFastTimeout(n),clearImmediate(r)}};function J$e(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,X$e.destroy(t,new bUt(r))}s(J$e,"onConnectTimeout");Z$e.exports=IUt});var eze=U(kJ=>{"use strict";d();Object.defineProperty(kJ,"__esModule",{value:!0});kJ.enumToMap=void 0;function wUt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(wUt,"enumToMap");kJ.enumToMap=wUt});var tze=U(Wt=>{"use strict";d();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.SPECIAL_HEADERS=Wt.HEADER_STATE=Wt.MINOR=Wt.MAJOR=Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS=Wt.TOKEN=Wt.STRICT_TOKEN=Wt.HEX=Wt.URL_CHAR=Wt.STRICT_URL_CHAR=Wt.USERINFO_CHARS=Wt.MARK=Wt.ALPHANUM=Wt.NUM=Wt.HEX_MAP=Wt.NUM_MAP=Wt.ALPHA=Wt.FINISH=Wt.H_METHOD_MAP=Wt.METHOD_MAP=Wt.METHODS_RTSP=Wt.METHODS_ICE=Wt.METHODS_HTTP=Wt.METHODS=Wt.LENIENT_FLAGS=Wt.FLAGS=Wt.TYPE=Wt.ERROR=void 0;var _Ut=eze(),SUt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(SUt=Wt.ERROR||(Wt.ERROR={}));var RUt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(RUt=Wt.TYPE||(Wt.TYPE={}));var kUt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(kUt=Wt.FLAGS||(Wt.FLAGS={}));var PUt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(PUt=Wt.LENIENT_FLAGS||(Wt.LENIENT_FLAGS={}));var hn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(hn=Wt.METHODS||(Wt.METHODS={}));Wt.METHODS_HTTP=[hn.DELETE,hn.GET,hn.HEAD,hn.POST,hn.PUT,hn.CONNECT,hn.OPTIONS,hn.TRACE,hn.COPY,hn.LOCK,hn.MKCOL,hn.MOVE,hn.PROPFIND,hn.PROPPATCH,hn.SEARCH,hn.UNLOCK,hn.BIND,hn.REBIND,hn.UNBIND,hn.ACL,hn.REPORT,hn.MKACTIVITY,hn.CHECKOUT,hn.MERGE,hn["M-SEARCH"],hn.NOTIFY,hn.SUBSCRIBE,hn.UNSUBSCRIBE,hn.PATCH,hn.PURGE,hn.MKCALENDAR,hn.LINK,hn.UNLINK,hn.PRI,hn.SOURCE];Wt.METHODS_ICE=[hn.SOURCE];Wt.METHODS_RTSP=[hn.OPTIONS,hn.DESCRIBE,hn.ANNOUNCE,hn.SETUP,hn.PLAY,hn.PAUSE,hn.TEARDOWN,hn.GET_PARAMETER,hn.SET_PARAMETER,hn.REDIRECT,hn.RECORD,hn.FLUSH,hn.GET,hn.POST];Wt.METHOD_MAP=_Ut.enumToMap(hn);Wt.H_METHOD_MAP={};Object.keys(Wt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Wt.H_METHOD_MAP[t]=Wt.METHOD_MAP[t])});var BUt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(BUt=Wt.FINISH||(Wt.FINISH={}));Wt.ALPHA=[];for(let t=65;t<=90;t++)Wt.ALPHA.push(String.fromCharCode(t)),Wt.ALPHA.push(String.fromCharCode(t+32));Wt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Wt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Wt.NUM=["0","1","2","3","4","5","6","7","8","9"];Wt.ALPHANUM=Wt.ALPHA.concat(Wt.NUM);Wt.MARK=["-","_",".","!","~","*","'","(",")"];Wt.USERINFO_CHARS=Wt.ALPHANUM.concat(Wt.MARK).concat(["%",";",":","&","=","+","$",","]);Wt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Wt.ALPHANUM);Wt.URL_CHAR=Wt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Wt.URL_CHAR.push(t);Wt.HEX=Wt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Wt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Wt.ALPHANUM);Wt.TOKEN=Wt.STRICT_TOKEN.concat([" "]);Wt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Wt.HEADER_CHARS.push(t);Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS.filter(t=>t!==44);Wt.MAJOR=Wt.NUM_MAP;Wt.MINOR=Wt.MAJOR;var oB;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(oB=Wt.HEADER_STATE||(Wt.HEADER_STATE={}));Wt.SPECIAL_HEADERS={connection:oB.CONNECTION,"content-length":oB.CONTENT_LENGTH,"proxy-connection":oB.CONNECTION,"transfer-encoding":oB.TRANSFER_ENCODING,upgrade:oB.UPGRADE}});var nCe=U((gKn,rze)=>{"use strict";d();var{Buffer:DUt}=require("node:buffer");rze.exports=DUt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var ize=U((yKn,nze)=>{"use strict";d();var{Buffer:NUt}=require("node:buffer");nze.exports=NUt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var BF=U((EKn,fze)=>{"use strict";d();var oze=["GET","HEAD","POST"],LUt=new Set(oze),MUt=[101,204,205,304],sze=[301,302,303,307,308],FUt=new Set(sze),aze=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],OUt=new Set(aze),cze=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],QUt=new Set(cze),UUt=["follow","manual","error"],lze=["GET","HEAD","OPTIONS","TRACE"],qUt=new Set(lze),HUt=["navigate","same-origin","no-cors","cors"],WUt=["omit","same-origin","include"],GUt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],jUt=["content-encoding","content-language","content-location","content-type","content-length"],VUt=["half"],uze=["CONNECT","TRACE","TRACK"],$Ut=new Set(uze),dze=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],zUt=new Set(dze);fze.exports={subresource:dze,forbiddenMethods:uze,requestBodyHeader:jUt,referrerPolicy:cze,requestRedirect:UUt,requestMode:HUt,requestCredentials:WUt,requestCache:GUt,redirectStatus:sze,corsSafeListedMethods:oze,nullBodyStatus:MUt,safeMethods:lze,badPorts:aze,requestDuplex:VUt,subresourceSet:zUt,badPortsSet:OUt,redirectStatusSet:FUt,corsSafeListedMethodsSet:LUt,safeMethodsSet:qUt,forbiddenMethodsSet:$Ut,referrerPolicySet:QUt}});var oCe=U((xKn,pze)=>{"use strict";d();var iCe=Symbol.for("undici.globalOrigin.1");function YUt(){return globalThis[iCe]}s(YUt,"getGlobalOrigin");function KUt(t){if(t===void 0){Object.defineProperty(globalThis,iCe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,iCe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(KUt,"setGlobalOrigin");pze.exports={getGlobalOrigin:YUt,setGlobalOrigin:KUt}});var Uf=U((TKn,Eze)=>{"use strict";d();var BJ=require("node:assert"),JUt=new TextEncoder,DF=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,XUt=/[\u000A\u000D\u0009\u0020]/,ZUt=/[\u0009\u000A\u000C\u000D\u0020]/g,eqt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function tqt(t){BJ(t.protocol==="data:");let e=gze(t,!0);e=e.slice(5);let r={position:0},n=sB(",",e,r),i=n.length;if(n=aqt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=Aze(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=Cze(a);if(a=nqt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=sCe(n);return c==="failure"&&(c=sCe("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(tqt,"dataURLProcessor");function gze(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(gze,"URLSerializer");function DJ(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(DJ,"collectASequenceOfCodePoints");function sB(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(sB,"collectASequenceOfCodePointsFast");function Aze(t){let e=JUt.encode(t);return rqt(e)}s(Aze,"stringPercentDecode");function mze(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(mze,"isHexCharByte");function hze(t){return t>=48&&t<=57?t-48:(t&223)-55}s(hze,"hexByteToNumber");function rqt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(mze(t[i+1])&&mze(t[i+2]))?r[n++]=37:(r[n++]=hze(t[i+1])<<4|hze(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(rqt,"percentDecode");function sCe(t){t=PJ(t,!0,!0);let e={position:0},r=sB("/",t,e);if(r.length===0||!DF.test(r)||e.position>t.length)return"failure";e.position++;let n=sB(";",t,e);if(n=PJ(n,!1,!0),n.length===0||!DF.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,DJ(u=>XUt.test(u),t,e);let c=DJ(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=yze(t,e,!0),sB(";",t,e);else if(l=sB(";",t,e),l=PJ(l,!1,!0),l.length===0)continue;c.length!==0&&DF.test(c)&&(l.length===0||eqt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(sCe,"parseMIMEType");function nqt(t){t=t.replace(ZUt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(nqt,"forgivingBase64");function yze(t,e,r){let n=e.position,i="";for(BJ(t[e.position]==='"'),e.position++;i+=DJ(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{BJ(o==='"');break}}return r?i:t.slice(n,e.position)}s(yze,"collectAnHTTPQuotedString");function iqt(t){BJ(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",DF.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(iqt,"serializeAMimeType");function oqt(t){return t===13||t===10||t===9||t===32}s(oqt,"isHTTPWhiteSpace");function PJ(t,e=!0,r=!0){return aCe(t,e,r,oqt)}s(PJ,"removeHTTPWhitespace");function sqt(t){return t===13||t===10||t===9||t===12||t===32}s(sqt,"isASCIIWhitespace");function aqt(t,e=!0,r=!0){return aCe(t,e,r,sqt)}s(aqt,"removeASCIIWhitespace");function aCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(aCe,"removeChars");function Cze(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(Cze,"isomorphicDecode");function cqt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(cqt,"minimizeSupportedMimeType");Eze.exports={dataURLProcessor:tqt,URLSerializer:gze,collectASequenceOfCodePoints:DJ,collectASequenceOfCodePointsFast:sB,stringPercentDecode:Aze,parseMIMEType:sCe,collectAnHTTPQuotedString:yze,serializeAMimeType:iqt,removeChars:aCe,removeHTTPWhitespace:PJ,minimizeSupportedMimeType:cqt,HTTP_TOKEN_CODEPOINTS:DF,isomorphicDecode:Cze}});var Au=U((SKn,vze)=>{"use strict";d();var{types:Vy,inspect:lqt}=require("node:util"),{markAsUncloneable:uqt}=require("node:worker_threads"),{toUSVString:dqt}=Pi(),Lt={};Lt.converters={};Lt.util={};Lt.errors={};Lt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Lt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Lt.errors.exception({header:t.prefix,message:r})};Lt.errors.invalidArgument=function(t){return Lt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Lt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Lt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Lt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Lt.illegalConstructor=function(){throw Lt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Lt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Lt.util.markAsUncloneable=uqt||(()=>{});Lt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Lt.errors.exception({header:"Integer conversion",message:`Could not convert ${Lt.util.Stringify(t)} to an integer.`});if(a=Lt.util.IntegerPart(a),a<o||a>i)throw Lt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Lt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Lt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Lt.util.Stringify=function(t){switch(Lt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return lqt(t);case"String":return`"${t}"`;default:return`${t}`}};Lt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Lt.util.Type(e)!=="Object")throw Lt.errors.exception({header:r,message:`${n} (${Lt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw Lt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};Lt.recordConverter=function(t,e){return(r,n,i)=>{if(Lt.util.Type(r)!=="Object")throw Lt.errors.exception({header:n,message:`${i} ("${Lt.util.Type(r)}") is not an Object.`});let o={};if(!Vy.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};Lt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Lt.errors.exception({header:r,message:`Expected ${n} ("${Lt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Lt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Lt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Lt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw Lt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw Lt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};Lt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Lt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Lt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Lt.converters.ByteString=function(t,e,r){let n=Lt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Lt.converters.USVString=dqt;Lt.converters.boolean=function(t){return!!t};Lt.converters.any=function(t){return t};Lt.converters["long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Lt.converters["unsigned long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Lt.converters["unsigned long"]=function(t,e,r){return Lt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Lt.converters["unsigned short"]=function(t,e,r,n){return Lt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Lt.converters.ArrayBuffer=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!Vy.isAnyArrayBuffer(t))throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&Vy.isSharedArrayBuffer(t))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.TypedArray=function(t,e,r,n,i){if(Lt.util.Type(t)!=="Object"||!Vy.isTypedArray(t)||t.constructor.name!==e.name)throw Lt.errors.conversionFailed({prefix:r,argument:`${n} ("${Lt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Vy.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.DataView=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!Vy.isDataView(t))throw Lt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&Vy.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.BufferSource=function(t,e,r,n){if(Vy.isAnyArrayBuffer(t))return Lt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(Vy.isTypedArray(t))return Lt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(Vy.isDataView(t))return Lt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["BufferSource"]})};Lt.converters["sequence<ByteString>"]=Lt.sequenceConverter(Lt.converters.ByteString);Lt.converters["sequence<sequence<ByteString>>"]=Lt.sequenceConverter(Lt.converters["sequence<ByteString>"]);Lt.converters["record<ByteString, ByteString>"]=Lt.recordConverter(Lt.converters.ByteString,Lt.converters.ByteString);vze.exports={webidl:Lt}});var X0=U((kKn,Lze)=>{"use strict";d();var{Transform:fqt}=require("node:stream"),xze=require("node:zlib"),{redirectStatusSet:pqt,referrerPolicySet:mqt,badPortsSet:hqt}=BF(),{getGlobalOrigin:bze}=oCe(),{collectASequenceOfCodePoints:Q2,collectAnHTTPQuotedString:gqt,removeChars:Aqt,parseMIMEType:yqt}=Uf(),{performance:Cqt}=require("node:perf_hooks"),{isBlobLike:Eqt,ReadableStreamFrom:vqt,isValidHTTPToken:Ize,normalizedMethodRecordsBase:xqt}=Pi(),U2=require("node:assert"),{isUint8Array:bqt}=require("node:util/types"),{webidl:NF}=Au(),Tze=[],LJ;try{LJ=require("node:crypto");let t=["sha256","sha384","sha512"];Tze=LJ.getHashes().filter(e=>t.includes(e))}catch{}function wze(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(wze,"responseURL");function Iqt(t,e){if(!pqt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&Sze(r)&&(_ze(r)||(r=Tqt(r)),r=new URL(r,wze(t))),r&&!r.hash&&(r.hash=e),r}s(Iqt,"responseLocationURL");function _ze(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(_ze,"isValidEncodedURL");function Tqt(t){return Buffer.from(t,"binary").toString("utf8")}s(Tqt,"normalizeBinaryStringToUtf8");function MF(t){return t.urlList[t.urlList.length-1]}s(MF,"requestCurrentURL");function wqt(t){let e=MF(t);return Dze(e)&&hqt.has(e.port)?"blocked":"allowed"}s(wqt,"requestBadPort");function _qt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(_qt,"isErrorLike");function Sqt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(Sqt,"isValidReasonPhrase");var Rqt=Ize;function Sze(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(Sze,"isValidHeaderValue");function kqt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(mqt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(kqt,"setRequestReferrerPolicyOnRedirect");function Pqt(){return"allowed"}s(Pqt,"crossOriginResourcePolicyCheck");function Bqt(){return"success"}s(Bqt,"corsCheck");function Dqt(){return"success"}s(Dqt,"TAOCheck");function Nqt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(Nqt,"appendFetchMetadata");function Lqt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&lCe(t.origin)&&!lCe(MF(t))&&(e=null);break;case"same-origin":MJ(t,MF(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(Lqt,"appendRequestOriginHeader");function aB(t,e){return t}s(aB,"coarsenTime");function Mqt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:aB(t.domainLookupStartTime,r),domainLookupEndTime:aB(t.domainLookupEndTime,r),connectionStartTime:aB(t.connectionStartTime,r),connectionEndTime:aB(t.connectionEndTime,r),secureConnectionStartTime:aB(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(Mqt,"clampAndCoarsenConnectionTimingInfo");function Fqt(t){return aB(Cqt.now(),t)}s(Fqt,"coarsenedSharedCurrentTime");function Oqt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(Oqt,"createOpaqueTimingInfo");function Rze(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(Rze,"makePolicyContainer");function Qqt(t){return{referrerPolicy:t.referrerPolicy}}s(Qqt,"clonePolicyContainer");function Uqt(t){let e=t.referrerPolicy;U2(e);let r=null;if(t.referrer==="client"){let c=bze();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=cCe(r),i=cCe(r,!0);n.toString().length>4096&&(n=i);let o=MJ(t,n),a=LF(n)&&!LF(t.url);switch(e){case"origin":return i??cCe(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=MF(t);return MJ(n,c)?n:LF(n)&&!LF(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(Uqt,"determineRequestsReferrer");function cCe(t,e){return U2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(cCe,"stripURLForReferrer");function LF(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(LF,"isURLPotentiallyTrustworthy");function qqt(t,e){if(LJ===void 0)return!0;let r=kze(e);if(r==="no metadata"||r.length===0)return!0;let n=Wqt(r),i=Gqt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=LJ.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),jqt(l,c))return!0}return!1}s(qqt,"bytesMatch");var Hqt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function kze(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=Hqt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();Tze.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(kze,"parseMetadata");function Wqt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(Wqt,"getStrongestMetadata");function Gqt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(Gqt,"filterMetadataListByAlgorithm");function jqt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(jqt,"compareBase64Mixed");function Vqt(t){}s(Vqt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function MJ(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(MJ,"sameOrigin");function $qt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s($qt,"createDeferredPromise");function zqt(t){return t.controller.state==="aborted"}s(zqt,"isAborted");function Yqt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(Yqt,"isCancelled");function Kqt(t){return xqt[t.toLowerCase()]??t}s(Kqt,"normalizeMethod");function Jqt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return U2(typeof e=="string"),e}s(Jqt,"serializeJavascriptValueToJSONString");var Xqt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function Pze(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,Xqt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(Pze,"createIterator");function Zqt(t,e,r,n=0,i=1){let o=Pze(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return NF.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return NF.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return NF.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(NF.brandCheck(this,e),NF.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(Zqt,"iteratorMixin");async function eHt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await Bze(o))}catch(a){i(a)}}s(eHt,"fullyReadBody");function tHt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(tHt,"isReadableStreamLike");function rHt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(rHt,"readableStreamClose");var nHt=/[^\x00-\xFF]/;function NJ(t){return U2(!nHt.test(t)),t}s(NJ,"isomorphicEncode");async function Bze(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!bqt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(Bze,"readAllBytes");function iHt(t){U2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(iHt,"urlIsLocal");function lCe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(lCe,"urlHasHttpsScheme");function Dze(t){U2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(Dze,"urlIsHttpHttpsScheme");function oHt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&Q2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&Q2(l=>l==="	"||l===" ",r,n);let i=Q2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&Q2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&Q2(l=>l==="	"||l===" ",r,n);let a=Q2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(oHt,"simpleRangeHeaderValue");function sHt(t,e,r){let n="bytes ";return n+=NJ(`${t}`),n+="-",n+=NJ(`${e}`),n+="/",n+=NJ(`${r}`),n}s(sHt,"buildContentRange");var uCe=class extends fqt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?xze.createInflate(this.#e):xze.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function aHt(t){return new uCe(t)}s(aHt,"createInflate");function cHt(t){let e=null,r=null,n=null,i=Nze("content-type",t);if(i===null)return"failure";for(let o of i){let a=yqt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(cHt,"extractMimeType");function lHt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=Q2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=gqt(e,r),r.position<e.length)continue}else U2(e.charCodeAt(r.position)===44),r.position++;i=Aqt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(lHt,"gettingDecodingSplitting");function Nze(t,e){let r=e.get(t,!0);return r===null?null:lHt(r)}s(Nze,"getDecodeSplit");var uHt=new TextDecoder;function dHt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),uHt.decode(t))}s(dHt,"utf8DecodeBytes");var dCe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return bze()}get origin(){return this.baseUrl?.origin}policyContainer=Rze()},fCe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new dCe},fHt=new fCe;Lze.exports={isAborted:zqt,isCancelled:Yqt,isValidEncodedURL:_ze,createDeferredPromise:$qt,ReadableStreamFrom:vqt,tryUpgradeRequestToAPotentiallyTrustworthyURL:Vqt,clampAndCoarsenConnectionTimingInfo:Mqt,coarsenedSharedCurrentTime:Fqt,determineRequestsReferrer:Uqt,makePolicyContainer:Rze,clonePolicyContainer:Qqt,appendFetchMetadata:Nqt,appendRequestOriginHeader:Lqt,TAOCheck:Dqt,corsCheck:Bqt,crossOriginResourcePolicyCheck:Pqt,createOpaqueTimingInfo:Oqt,setRequestReferrerPolicyOnRedirect:kqt,isValidHTTPToken:Ize,requestBadPort:wqt,requestCurrentURL:MF,responseURL:wze,responseLocationURL:Iqt,isBlobLike:Eqt,isURLPotentiallyTrustworthy:LF,isValidReasonPhrase:Sqt,sameOrigin:MJ,normalizeMethod:Kqt,serializeJavascriptValueToJSONString:Jqt,iteratorMixin:Zqt,createIterator:Pze,isValidHeaderName:Rqt,isValidHeaderValue:Sze,isErrorLike:_qt,fullyReadBody:eHt,bytesMatch:qqt,isReadableStreamLike:tHt,readableStreamClose:rHt,isomorphicEncode:NJ,urlIsLocal:iHt,urlHasHttpsScheme:lCe,urlIsHttpHttpsScheme:Dze,readAllBytes:Bze,simpleRangeHeaderValue:oHt,buildContentRange:sHt,parseMetadata:kze,createInflate:aHt,extractMimeType:cHt,getDecodeSplit:Nze,utf8DecodeBytes:dHt,environmentSettingsObject:fHt}});var UI=U((DKn,Mze)=>{"use strict";d();Mze.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var mCe=U((LKn,Fze)=>{"use strict";d();var{Blob:pHt,File:mHt}=require("node:buffer"),{kState:LE}=UI(),{webidl:$y}=Au(),pCe=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[LE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return $y.brandCheck(this,t),this[LE].blobLike.stream(...e)}arrayBuffer(...e){return $y.brandCheck(this,t),this[LE].blobLike.arrayBuffer(...e)}slice(...e){return $y.brandCheck(this,t),this[LE].blobLike.slice(...e)}text(...e){return $y.brandCheck(this,t),this[LE].blobLike.text(...e)}get size(){return $y.brandCheck(this,t),this[LE].blobLike.size}get type(){return $y.brandCheck(this,t),this[LE].blobLike.type}get name(){return $y.brandCheck(this,t),this[LE].name}get lastModified(){return $y.brandCheck(this,t),this[LE].lastModified}get[Symbol.toStringTag](){return"File"}};$y.converters.Blob=$y.interfaceConverter(pHt);function hHt(t){return t instanceof mHt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(hHt,"isFileLike");Fze.exports={FileLike:pCe,isFileLike:hHt}});var OF=U((OKn,Hze)=>{"use strict";d();var{isBlobLike:FJ,iteratorMixin:gHt}=X0(),{kState:Wd}=UI(),{kEnumerableProperty:cB}=Pi(),{FileLike:Oze,isFileLike:AHt}=mCe(),{webidl:Ts}=Au(),{File:qze}=require("node:buffer"),Qze=require("node:util"),Uze=globalThis.File??qze,FF=class t{static{s(this,"FormData")}constructor(e){if(Ts.util.markAsUncloneable(this),e!==void 0)throw Ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Wd]=[]}append(e,r,n=void 0){Ts.brandCheck(this,t);let i="FormData.append";if(Ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!FJ(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Ts.converters.USVString(e,i,"name"),r=FJ(r)?Ts.converters.Blob(r,i,"value",{strict:!1}):Ts.converters.USVString(r,i,"value"),n=arguments.length===3?Ts.converters.USVString(n,i,"filename"):void 0;let o=hCe(e,r,n);this[Wd].push(o)}delete(e){Ts.brandCheck(this,t);let r="FormData.delete";Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd]=this[Wd].filter(n=>n.name!==e)}get(e){Ts.brandCheck(this,t);let r="FormData.get";Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name");let n=this[Wd].findIndex(i=>i.name===e);return n===-1?null:this[Wd][n].value}getAll(e){Ts.brandCheck(this,t);let r="FormData.getAll";return Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd].filter(n=>n.name===e).map(n=>n.value)}has(e){Ts.brandCheck(this,t);let r="FormData.has";return Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Ts.brandCheck(this,t);let i="FormData.set";if(Ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!FJ(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Ts.converters.USVString(e,i,"name"),r=FJ(r)?Ts.converters.Blob(r,i,"name",{strict:!1}):Ts.converters.USVString(r,i,"name"),n=arguments.length===3?Ts.converters.USVString(n,i,"name"):void 0;let o=hCe(e,r,n),a=this[Wd].findIndex(c=>c.name===e);a!==-1?this[Wd]=[...this[Wd].slice(0,a),o,...this[Wd].slice(a+1).filter(c=>c.name!==e)]:this[Wd].push(o)}[Qze.inspect.custom](e,r){let n=this[Wd].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=Qze.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};gHt("FormData",FF,Wd,"name","value");Object.defineProperties(FF.prototype,{append:cB,delete:cB,get:cB,getAll:cB,has:cB,set:cB,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function hCe(t,e,r){if(typeof e!="string"){if(AHt(e)||(e=e instanceof Blob?new Uze([e],"blob",{type:e.type}):new Oze(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof qze?new Uze([e],r,n):new Oze(e,r,n)}}return{name:t,value:e}}s(hCe,"makeEntry");Hze.exports={FormData:FF,makeEntry:hCe}});var zze=U((qKn,$ze)=>{"use strict";d();var{isUSVString:Wze,bufferToLowerCasedHeaderName:yHt}=Pi(),{utf8DecodeBytes:CHt}=X0(),{HTTP_TOKEN_CODEPOINTS:EHt,isomorphicDecode:Gze}=Uf(),{isFileLike:vHt}=mCe(),{makeEntry:xHt}=OF(),OJ=require("node:assert"),{File:bHt}=require("node:buffer"),IHt=globalThis.File??bHt,THt=Buffer.from('form-data; name="'),jze=Buffer.from("; filename"),wHt=Buffer.from("--"),_Ht=Buffer.from(`--\r
`);function SHt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(SHt,"isAsciiString");function RHt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(RHt,"validateBoundary");function kHt(t,e){OJ(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&QJ(t,wHt,o)||o.position===t.length-4&&QJ(t,_Ht,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=PHt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(f??="text/plain",SHt(f)||(f=""),h=new IHt([m],u,{type:f})):h=CHt(Buffer.from(m)),OJ(Wze(l)),OJ(typeof h=="string"&&Wze(h)||vHt(h)),i.push(xHt(l,h,u))}}s(kHt,"multipartFormDataParser");function PHt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=lB(c=>c!==10&&c!==13&&c!==58,t,e);if(a=gCe(a,!0,!0,c=>c===9||c===32),!EHt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,lB(c=>c===32||c===9,t,e),yHt(a)){case"content-disposition":{if(r=n=null,!QJ(t,THt,e)||(e.position+=17,r=Vze(t,e),r===null))return"failure";if(QJ(t,jze,e)){let c=e.position+jze.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=Vze(t,e),n===null))return"failure"}break}case"content-type":{let c=lB(l=>l!==10&&l!==13,t,e);c=gCe(c,!1,!0,l=>l===9||l===32),i=Gze(c);break}case"content-transfer-encoding":{let c=lB(l=>l!==10&&l!==13,t,e);c=gCe(c,!1,!0,l=>l===9||l===32),o=Gze(c);break}default:lB(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(PHt,"parseMultipartFormDataHeaders");function Vze(t,e){OJ(t[e.position-1]===34);let r=lB(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(Vze,"parseMultipartFormDataName");function lB(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(lB,"collectASequenceOfBytes");function gCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(gCe,"removeChars");function QJ(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(QJ,"bufferStartsWith");$ze.exports={multipartFormDataParser:kHt,validateBoundary:RHt}});var fB=U((GKn,rYe)=>{"use strict";d();var QF=Pi(),{ReadableStreamFrom:BHt,isBlobLike:Yze,isReadableStreamLike:DHt,readableStreamClose:NHt,createDeferredPromise:LHt,fullyReadBody:MHt,extractMimeType:FHt,utf8DecodeBytes:Xze}=X0(),{FormData:Kze}=OF(),{kState:dB}=UI(),{webidl:OHt}=Au(),{Blob:QHt}=require("node:buffer"),ACe=require("node:assert"),{isErrored:Zze,isDisturbed:UHt}=require("node:stream"),{isArrayBuffer:qHt}=require("node:util/types"),{serializeAMimeType:HHt}=Uf(),{multipartFormDataParser:WHt}=zze(),yCe;try{let t=require("node:crypto");yCe=s(e=>t.randomInt(0,e),"random")}catch{yCe=s(t=>Math.floor(Math.random(t)),"random")}var UJ=new TextEncoder;function GHt(){}s(GHt,"noop");var CCe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,ECe;CCe&&(ECe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!UHt(e)&&!Zze(e)&&e.cancel("Response object has been garbage collected").catch(GHt)}));function eYe(t,e=!1){let r=null;t instanceof ReadableStream?r=t:Yze(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?UJ.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>NHt(l))},start(){},type:"bytes"}),ACe(DHt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(qHt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(QF.isFormDataLike(t)){let l=`----formdata-undici-0${`${yCe(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(E=>E.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(E=>E.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[E,x]of t)if(typeof x=="string"){let b=UJ.encode(u+`; name="${f(p(E))}"\r
\r
${p(x)}\r
`);m.push(b),o+=b.byteLength}else{let b=UJ.encode(`${u}; name="${f(p(E))}"`+(x.name?`; filename="${f(x.name)}"`:"")+`\r
Content-Type: ${x.type||"application/octet-stream"}\r
\r
`);m.push(b,x,h),typeof x.size=="number"?o+=b.byteLength+x.size+h.byteLength:g=!0}let y=UJ.encode(`--${l}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let E of m)E.stream?yield*E.stream():yield E},"action"),a=`multipart/form-data; boundary=${l}`}else if(Yze(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(QF.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:BHt(t)}if((typeof i=="string"||QF.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!Zze(r)){let m=new Uint8Array(f);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(eYe,"extractBody");function jHt(t,e=!1){return t instanceof ReadableStream&&(ACe(!QF.isDisturbed(t),"The body has already been consumed."),ACe(!t.locked,"The stream is locked.")),eYe(t,e)}s(jHt,"safelyExtractBody");function VHt(t,e){let[r,n]=e.stream.tee();return CCe&&ECe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(VHt,"cloneBody");function $Ht(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s($Ht,"throwIfAborted");function zHt(t){return{blob(){return uB(this,r=>{let n=Jze(this);return n===null?n="":n&&(n=HHt(n)),new QHt([r],{type:n})},t)},arrayBuffer(){return uB(this,r=>new Uint8Array(r).buffer,t)},text(){return uB(this,Xze,t)},json(){return uB(this,KHt,t)},formData(){return uB(this,r=>{let n=Jze(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=WHt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new Kze;return o[dB]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new Kze;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return uB(this,r=>new Uint8Array(r),t)}}}s(zHt,"bodyMixinMethods");function YHt(t){Object.assign(t.prototype,zHt(t))}s(YHt,"mixinBody");async function uB(t,e,r){if(OHt.brandCheck(t,r),tYe(t))throw new TypeError("Body is unusable: Body has already been read");$Ht(t[dB]);let n=LHt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[dB].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await MHt(t[dB].body,o,i),n.promise)}s(uB,"consumeBody");function tYe(t){let e=t[dB].body;return e!=null&&(e.stream.locked||QF.isDisturbed(e.stream))}s(tYe,"bodyUnusable");function KHt(t){return JSON.parse(Xze(t))}s(KHt,"parseJSONFromBytes");function Jze(t){let e=t[dB].headersList,r=FHt(e);return r==="failure"?null:r}s(Jze,"bodyMimeType");rYe.exports={extractBody:eYe,safelyExtractBody:jHt,cloneBody:VHt,mixinBody:YHt,streamRegistry:ECe,hasFinalizationRegistry:CCe,bodyUnusable:tYe}});var pYe=U(($Kn,fYe)=>{"use strict";d();var Tn=require("node:assert"),ti=Pi(),{channels:nYe}=Z3(),vCe=eCe(),{RequestContentLengthMismatchError:q2,ResponseContentLengthMismatchError:JHt,RequestAbortedError:lYe,HeadersTimeoutError:XHt,HeadersOverflowError:ZHt,SocketError:VJ,InformationalError:pB,BodyTimeoutError:eWt,HTTPParserError:tWt,ResponseExceededMaxSizeError:rWt}=Mo(),{kUrl:uYe,kReset:qf,kClient:TCe,kParser:qa,kBlocking:HF,kRunning:Xu,kPending:nWt,kSize:iYe,kWriting:HI,kQueue:wg,kNoRef:UF,kKeepAliveDefaultTimeout:iWt,kHostHeader:oWt,kPendingIdx:sWt,kRunningIdx:Qm,kError:Um,kPipelining:GJ,kSocket:mB,kKeepAliveTimeoutValue:$J,kMaxHeadersSize:xCe,kKeepAliveMaxTimeout:aWt,kKeepAliveTimeoutThreshold:cWt,kHeadersTimeout:lWt,kBodyTimeout:uWt,kStrictContentLength:wCe,kMaxRequests:oYe,kCounter:dWt,kMaxResponseSize:fWt,kOnError:pWt,kResume:qI,kHTTPContext:dYe}=fa(),zy=tze(),mWt=Buffer.alloc(0),qJ=Buffer[Symbol.species],HJ=ti.addListener,hWt=ti.removeAllListeners,bCe;async function gWt(){let t=process.env.JEST_WORKER_ID?nCe():void 0,e;try{e=await WebAssembly.compile(ize())}catch{e=await WebAssembly.compile(t||nCe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Ky+Yy.byteOffset;return il.onStatus(new qJ(Yy.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Tn(il.ptr===r),il.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Ky+Yy.byteOffset;return il.onHeaderField(new qJ(Yy.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Ky+Yy.byteOffset;return il.onHeaderValue(new qJ(Yy.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Tn(il.ptr===r),il.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Ky+Yy.byteOffset;return il.onBody(new qJ(Yy.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Tn(il.ptr===r),il.onMessageComplete()||0),"wasm_on_message_complete")}})}s(gWt,"lazyllhttp");var ICe=null,_Ce=gWt();_Ce.catch();var il=null,Yy=null,WJ=0,Ky=null,AWt=0,qF=1,hB=2|qF,jJ=4|qF,SCe=8|AWt,RCe=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Tn(Number.isFinite(e[xCe])&&e[xCe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(zy.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[xCe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[fWt]}setTimeout(e,r){e!==this.timeoutValue||r&qF^this.timeoutType&qF?(this.timeout&&(vCe.clearTimeout(this.timeout),this.timeout=null),e&&(r&qF?this.timeout=vCe.setFastTimeout(sYe,e,new WeakRef(this)):(this.timeout=setTimeout(sYe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Tn(this.ptr!=null),Tn(il==null),this.llhttp.llhttp_resume(this.ptr),Tn(this.timeoutType===jJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||mWt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Tn(this.ptr!=null),Tn(il==null),Tn(!this.paused);let{socket:r,llhttp:n}=this;e.length>WJ&&(Ky&&n.free(Ky),WJ=Math.ceil(e.length/4096)*4096,Ky=n.malloc(WJ)),new Uint8Array(n.memory.buffer,Ky,WJ).set(e);try{let i;try{Yy=e,il=this,i=n.llhttp_execute(this.ptr,Ky,e.length)}catch(a){throw a}finally{il=null,Yy=null}let o=n.llhttp_get_error_pos(this.ptr)-Ky;if(i===zy.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===zy.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==zy.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new tWt(c,zy.ERROR[i],e.slice(o))}}catch(i){ti.destroy(r,i)}}destroy(){Tn(this.ptr!=null),Tn(il==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&vCe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[wg][r[Qm]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=ti.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&ti.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&ti.destroy(this.socket,new ZHt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Tn(r),Tn(n[mB]===i),Tn(!i.destroyed),Tn(!this.paused),Tn((o.length&1)===0);let c=n[wg][n[Qm]];Tn(c),Tn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[qa].destroy(),i[qa]=null,i[TCe]=null,i[Um]=null,hWt(i),n[mB]=null,n[dYe]=null,n[wg][n[Qm]++]=null,n.emit("disconnect",n[uYe],[n],new pB("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){ti.destroy(i,l)}n[qI]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[wg][i[Qm]];if(!l)return-1;if(Tn(!this.upgrade),Tn(this.statusCode<200),e===100)return ti.destroy(o,new VJ("bad response",ti.getSocketInfo(o))),-1;if(r&&!l.upgrade)return ti.destroy(o,new VJ("bad upgrade",ti.getSocketInfo(o))),-1;if(Tn(this.timeoutType===hB),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[qf]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[uWt];this.setTimeout(f,jJ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Tn(i[Xu]===1),this.upgrade=!0,2;if(r)return Tn(i[Xu]===1),this.upgrade=!0,2;if(Tn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[GJ]){let f=this.keepAlive?ti.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[cWt],i[aWt]);p<=0?o[qf]=!0:i[$J]=p}else i[$J]=i[iWt]}else o[qf]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[HF]&&(o[HF]=!1,i[qI]()),u?zy.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[wg][r[Qm]];if(Tn(a),Tn(this.timeoutType===jJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Tn(i>=200),o>-1&&this.bytesRead+e.length>o)return ti.destroy(n,new rWt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return zy.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Tn(n>=100),Tn((this.headers.length&1)===0);let u=e[wg][e[Qm]];if(Tn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return ti.destroy(r,new JHt),-1;if(u.onComplete(o),e[wg][e[Qm]++]=null,r[HI])return Tn(e[Xu]===0),ti.destroy(r,new pB("reset")),zy.ERROR.PAUSED;if(l){if(r[qf]&&e[Xu]===0)return ti.destroy(r,new pB("reset")),zy.ERROR.PAUSED;e[GJ]==null||e[GJ]===1?setImmediate(()=>e[qI]()):e[qI]()}else return ti.destroy(r,new pB("reset")),zy.ERROR.PAUSED}}};function sYe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===hB?(!e[HI]||e.writableNeedDrain||n[Xu]>1)&&(Tn(!i,"cannot be paused while waiting for headers"),ti.destroy(e,new XHt)):r===jJ?i||ti.destroy(e,new eWt):r===SCe&&(Tn(n[Xu]===0&&n[$J]),ti.destroy(e,new pB("socket idle timeout")))}s(sYe,"onParserTimeout");async function yWt(t,e){t[mB]=e,ICe||(ICe=await _Ce,_Ce=null),e[UF]=!1,e[HI]=!1,e[qf]=!1,e[HF]=!1,e[qa]=new RCe(t,e,ICe),HJ(e,"error",function(n){Tn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[qa];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Um]=n,this[TCe][pWt](n)}),HJ(e,"readable",function(){let n=this[qa];n&&n.readMore()}),HJ(e,"end",function(){let n=this[qa];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}ti.destroy(this,new VJ("other side closed",ti.getSocketInfo(this)))}),HJ(e,"close",function(){let n=this[TCe],i=this[qa];i&&(!this[Um]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[qa].destroy(),this[qa]=null);let o=this[Um]||new VJ("closed",ti.getSocketInfo(this));if(n[mB]=null,n[dYe]=null,n.destroyed){Tn(n[nWt]===0);let a=n[wg].splice(n[Qm]);for(let c=0;c<a.length;c++){let l=a[c];ti.errorRequest(n,l,o)}}else if(n[Xu]>0&&o.code!=="UND_ERR_INFO"){let a=n[wg][n[Qm]];n[wg][n[Qm]++]=null,ti.errorRequest(n,a,o)}n[sWt]=n[Qm],Tn(n[Xu]===0),n.emit("disconnect",n[uYe],[n],o),n[qI]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return vWt(t,...n)},resume(){CWt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[HI]||e[qf]||e[HF]||n&&(t[Xu]>0&&!n.idempotent||t[Xu]>0&&(n.upgrade||n.method==="CONNECT")||t[Xu]>0&&ti.bodyLength(n.body)!==0&&(ti.isStream(n.body)||ti.isAsyncIterable(n.body)||ti.isFormDataLike(n.body))))}}}s(yWt,"connectH1");function CWt(t){let e=t[mB];if(e&&!e.destroyed){if(t[iYe]===0?!e[UF]&&e.unref&&(e.unref(),e[UF]=!0):e[UF]&&e.ref&&(e.ref(),e[UF]=!1),t[iYe]===0)e[qa].timeoutType!==SCe&&e[qa].setTimeout(t[$J],SCe);else if(t[Xu]>0&&e[qa].statusCode<200&&e[qa].timeoutType!==hB){let r=t[wg][t[Qm]],n=r.headersTimeout!=null?r.headersTimeout:t[lWt];e[qa].setTimeout(n,hB)}}}s(CWt,"resumeH1");function EWt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(EWt,"shouldSendContentLength");function vWt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(ti.isFormDataLike(l)){bCe||(bCe=fB().extractBody);let[E,x]=bCe(l);e.contentType==null&&u.push("content-type",x),l=E.stream,f=E.length}else ti.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=ti.bodyLength(l);if(f=m??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),EWt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[wCe])return ti.errorRequest(t,e,new q2),!1;process.emitWarning(new q2)}let h=t[mB],g=s(E=>{e.aborted||e.completed||(ti.errorRequest(t,e,E||new lYe),ti.destroy(l),ti.destroy(h,new pB("aborted")))},"abort");try{e.onConnect(g)}catch(E){ti.errorRequest(t,e,E)}if(e.aborted)return!1;r==="HEAD"&&(h[qf]=!0),(o||r==="CONNECT")&&(h[qf]=!0),c!=null&&(h[qf]=c),t[oYe]&&h[dWt]++>=t[oYe]&&(h[qf]=!0),a&&(h[HF]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[oWt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[GJ]&&!h[qf]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let E=0;E<u.length;E+=2){let x=u[E+0],b=u[E+1];if(Array.isArray(b))for(let _=0;_<b.length;_++)y+=`${x}: ${b[_]}\r
`;else y+=`${x}: ${b}\r
`}return nYe.sendHeaders.hasSubscribers&&nYe.sendHeaders.publish({request:e,headers:y,socket:h}),!l||m===0?aYe(g,null,t,e,h,f,y,p):ti.isBuffer(l)?aYe(g,l,t,e,h,f,y,p):ti.isBlobLike(l)?typeof l.stream=="function"?cYe(g,l.stream(),t,e,h,f,y,p):bWt(g,l,t,e,h,f,y,p):ti.isStream(l)?xWt(g,l,t,e,h,f,y,p):ti.isIterable(l)?cYe(g,l,t,e,h,f,y,p):Tn(!1),!0}s(vWt,"writeH1");function xWt(t,e,r,n,i,o,a,c){Tn(o!==0||r[Xu]===0,"stream body cannot be pipelined");let l=!1,u=new zJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(y){ti.destroy(this,y)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new lYe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Tn(i.destroyed||i[HI]&&r[Xu]<=1),i.off("drain",p).off("error",h),e.removeListener("data",f).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?ti.destroy(e,g):ti.destroy(e)}},"onFinished");e.on("data",f).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(xWt,"writeStream");function aYe(t,e,r,n,i,o,a,c){try{e?ti.isBuffer(e)&&(Tn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[qf]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Tn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[qI]()}catch(l){t(l)}}s(aYe,"writeBuffer");async function bWt(t,e,r,n,i,o,a,c){Tn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new q2;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[qf]=!0),r[qI]()}catch(l){t(l)}}s(bWt,"writeBlob");async function cYe(t,e,r,n,i,o,a,c){Tn(o!==0||r[Xu]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let f=s(()=>new Promise((m,h)=>{Tn(l===null),i[Um]?h(i[Um]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new zJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Um])throw i[Um];p.write(m)||await f()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(cYe,"writeIterable");var zJ=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[HI]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Um])throw r[Um];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[wCe])throw new q2;process.emitWarning(new q2)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[qf]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[qa].timeout&&r[qa].timeoutType===hB&&r[qa].timeout.refresh&&r[qa].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[HI]=!1,e[Um])throw e[Um];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[wCe])throw new q2;process.emitWarning(new q2)}e[qa].timeout&&e[qa].timeoutType===hB&&e[qa].timeout.refresh&&e[qa].timeout.refresh(),n[qI]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[HI]=!1,e&&(Tn(n[Xu]<=1,"pipeline should only contain this request"),i(e))}};fYe.exports=yWt});var vYe=U((KKn,EYe)=>{"use strict";d();var qm=require("node:assert"),{pipeline:IWt}=require("node:stream"),Xi=Pi(),{RequestContentLengthMismatchError:kCe,RequestAbortedError:mYe,SocketError:WF,InformationalError:PCe}=Mo(),{kUrl:YJ,kReset:JJ,kClient:gB,kRunning:XJ,kPending:TWt,kQueue:WI,kPendingIdx:BCe,kRunningIdx:_g,kError:Rg,kSocket:Ll,kStrictContentLength:wWt,kOnError:DCe,kMaxConcurrentStreams:CYe,kHTTP2Session:Sg,kResume:GI,kSize:_Wt,kHTTPContext:SWt}=fa(),ME=Symbol("open streams"),hYe,gYe=!1,KJ;try{KJ=require("node:http2")}catch{KJ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:RWt,HTTP2_HEADER_METHOD:kWt,HTTP2_HEADER_PATH:PWt,HTTP2_HEADER_SCHEME:BWt,HTTP2_HEADER_CONTENT_LENGTH:DWt,HTTP2_HEADER_EXPECT:NWt,HTTP2_HEADER_STATUS:LWt}}=KJ;function MWt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(MWt,"parseH2Headers");async function FWt(t,e){t[Ll]=e,gYe||(gYe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=KJ.connect(t[YJ],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[CYe]});r[ME]=0,r[gB]=t,r[Ll]=e,Xi.addListener(r,"error",QWt),Xi.addListener(r,"frameError",UWt),Xi.addListener(r,"end",qWt),Xi.addListener(r,"goaway",HWt),Xi.addListener(r,"close",function(){let{[gB]:i}=this,{[Ll]:o}=i,a=this[Ll][Rg]||this[Rg]||new WF("closed",Xi.getSocketInfo(o));if(i[Sg]=null,i.destroyed){qm(i[TWt]===0);let c=i[WI].splice(i[_g]);for(let l=0;l<c.length;l++){let u=c[l];Xi.errorRequest(i,u,a)}}}),r.unref(),t[Sg]=r,e[Sg]=r,Xi.addListener(e,"error",function(i){qm(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Rg]=i,this[gB][DCe](i)}),Xi.addListener(e,"end",function(){Xi.destroy(this,new WF("other side closed",Xi.getSocketInfo(this)))}),Xi.addListener(e,"close",function(){let i=this[Rg]||new WF("closed",Xi.getSocketInfo(this));t[Ll]=null,this[Sg]!=null&&this[Sg].destroy(i),t[BCe]=t[_g],qm(t[XJ]===0),t.emit("disconnect",t[YJ],[t],i),t[GI]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return GWt(t,...i)},resume(){OWt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(FWt,"connectH2");function OWt(t){let e=t[Ll];e?.destroyed===!1&&(t[_Wt]===0&&t[CYe]===0?(e.unref(),t[Sg].unref()):(e.ref(),t[Sg].ref()))}s(OWt,"resumeH2");function QWt(t){qm(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Ll][Rg]=t,this[gB][DCe](t)}s(QWt,"onHttp2SessionError");function UWt(t,e,r){if(r===0){let n=new PCe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Ll][Rg]=n,this[gB][DCe](n)}}s(UWt,"onHttp2FrameError");function qWt(){let t=new WF("other side closed",Xi.getSocketInfo(this[Ll]));this.destroy(t),Xi.destroy(this[Ll],t)}s(qWt,"onHttp2SessionEnd");function HWt(t){let e=this[Rg]||new WF(`HTTP/2: "GOAWAY" frame received with code ${t}`,Xi.getSocketInfo(this)),r=this[gB];if(r[Ll]=null,r[SWt]=null,this[Sg]!=null&&(this[Sg].destroy(e),this[Sg]=null),Xi.destroy(this[Ll],e),r[_g]<r[WI].length){let n=r[WI][r[_g]];r[WI][r[_g]++]=null,Xi.errorRequest(r,n,e),r[BCe]=r[_g]}qm(r[XJ]===0),r.emit("disconnect",r[YJ],[r],e),r[GI]()}s(HWt,"onHTTP2GoAway");function WWt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(WWt,"shouldSendContentLength");function GWt(t,e){let r=t[Sg],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return Xi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let P=u[k+0],N=u[k+1];if(Array.isArray(N))for(let M=0;M<N.length;M++)p[P]?p[P]+=`,${N[M]}`:p[P]=N[M];else p[P]=N}let m,{hostname:h,port:g}=t[YJ];p[RWt]=o||`${h}${g?`:${g}`:""}`,p[kWt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new mYe,Xi.errorRequest(t,e,k),m!=null&&Xi.destroy(m,k),Xi.destroy(f,k),t[WI][t[_g]++]=null,t[GI]())},"abort");try{e.onConnect(y)}catch(k){Xi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[ME],t[WI][t[_g]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[ME],t[WI][t[_g]++]=null}),m.once("close",()=>{r[ME]-=1,r[ME]===0&&r.unref()}),!0;p[PWt]=i,p[BWt]="https";let E=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let x=Xi.bodyLength(f);if(Xi.isFormDataLike(f)){hYe??=fB().extractBody;let[k,P]=hYe(f);p["content-type"]=P,f=k.stream,x=k.length}if(x==null&&(x=e.contentLength),(x===0||!E)&&(x=null),WWt(n)&&x>0&&e.contentLength!=null&&e.contentLength!==x){if(t[wWt])return Xi.errorRequest(t,e,new kCe),!1;process.emitWarning(new kCe)}x!=null&&(qm(f,"no body must not have content length"),p[DWt]=`${x}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[NWt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",_)):(m=r.request(p,{endStream:b,signal:l}),_()),++r[ME],m.once("response",k=>{let{[LWt]:P,...N}=k;if(e.onResponseStarted(),e.aborted){let M=new mYe;Xi.errorRequest(t,e,M),Xi.destroy(m,M);return}e.onHeaders(Number(P),MWt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",M=>{e.onData(M)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[ME]===0&&r.unref(),y(new PCe("HTTP/2: stream half-closed (remote)")),t[WI][t[_g]++]=null,t[BCe]=t[_g],t[GI]()}),m.once("close",()=>{r[ME]-=1,r[ME]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,P)=>{y(new PCe(`HTTP/2: "frameError" received - type ${k}, code ${P}`))}),!0;function _(){!f||x===0?AYe(y,m,null,t,e,t[Ll],x,E):Xi.isBuffer(f)?AYe(y,m,f,t,e,t[Ll],x,E):Xi.isBlobLike(f)?typeof f.stream=="function"?yYe(y,m,f.stream(),t,e,t[Ll],x,E):VWt(y,m,f,t,e,t[Ll],x,E):Xi.isStream(f)?jWt(y,t[Ll],E,m,f,t,e,x):Xi.isIterable(f)?yYe(y,m,f,t,e,t[Ll],x,E):qm(!1)}s(_,"writeBodyH2")}s(GWt,"writeH2");function AYe(t,e,r,n,i,o,a,c){try{r!=null&&Xi.isBuffer(r)&&(qm(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[JJ]=!0),i.onRequestSent(),n[GI]()}catch(l){t(l)}}s(AYe,"writeBuffer");function jWt(t,e,r,n,i,o,a,c){qm(c!==0||o[XJ]===0,"stream body cannot be pipelined");let l=IWt(i,n,f=>{f?(Xi.destroy(l,f),t(f)):(Xi.removeAllListeners(l),a.onRequestSent(),r||(e[JJ]=!0),o[GI]())});Xi.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(jWt,"writeStream");async function VWt(t,e,r,n,i,o,a,c){qm(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new kCe;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[JJ]=!0),n[GI]()}catch(l){t(l)}}s(VWt,"writeBlob");async function yYe(t,e,r,n,i,o,a,c){qm(a!==0||n[XJ]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,m)=>{qm(l===null),o[Rg]?m(o[Rg]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[Rg])throw o[Rg];let m=e.write(p);i.onBodySent(p),m||await f()}e.end(),i.onRequestSent(),c||(o[JJ]=!0),n[GI]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(yYe,"writeIterable");EYe.exports=FWt});var eX=U((ZKn,IYe)=>{"use strict";d();var Jy=Pi(),{kBodyUsed:GF}=fa(),LCe=require("node:assert"),{InvalidArgumentError:$Wt}=Mo(),zWt=require("node:events"),YWt=[300,301,302,303,307,308],xYe=Symbol("body"),ZJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[xYe]=e,this[GF]=!1}async*[Symbol.asyncIterator](){LCe(!this[GF],"disturbed"),this[GF]=!0,yield*this[xYe]}},NCe=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new $Wt("maxRedirections must be a positive number");Jy.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Jy.isStream(this.opts.body)?(Jy.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){LCe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[GF]=!1,zWt.prototype.on.call(this.opts.body,"data",function(){this[GF]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new ZJ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Jy.isIterable(this.opts.body)&&(this.opts.body=new ZJ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||Jy.isDisturbed(this.opts.body)?null:KWt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=Jy.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=JWt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function KWt(t,e){if(YWt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&Jy.headerNameToString(e[r])==="location")return e[r+1]}s(KWt,"parseLocation");function bYe(t,e,r){if(t.length===4)return Jy.headerNameToString(t)==="host";if(e&&Jy.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=Jy.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(bYe,"shouldRemoveHeader");function JWt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)bYe(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))bYe(i,e,r)||n.push(i,t[i]);else LCe(t==null,"headers must be an object or an array");return n}s(JWt,"cleanRequestHeaders");IYe.exports=NCe});var tX=U((rJn,TYe)=>{"use strict";d();var XWt=eX();function ZWt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new XWt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(ZWt,"createRedirectInterceptor");TYe.exports=ZWt});var JF=U((oJn,LYe)=>{"use strict";d();var FE=require("node:assert"),PYe=require("node:net"),eGt=require("node:http"),H2=Pi(),{channels:AB}=Z3(),tGt=H$e(),rGt=nB(),{InvalidArgumentError:dc,InformationalError:nGt,ClientDestroyedError:iGt}=Mo(),oGt=PF(),{kUrl:Xy,kServerName:jI,kClient:sGt,kBusy:MCe,kConnect:aGt,kResuming:W2,kRunning:YF,kPending:KF,kSize:zF,kQueue:kg,kConnected:cGt,kConnecting:yB,kNeedDrain:$I,kKeepAliveDefaultTimeout:wYe,kHostHeader:lGt,kPendingIdx:Pg,kRunningIdx:OE,kError:uGt,kPipelining:rX,kKeepAliveTimeoutValue:dGt,kMaxHeadersSize:fGt,kKeepAliveMaxTimeout:pGt,kKeepAliveTimeoutThreshold:mGt,kHeadersTimeout:hGt,kBodyTimeout:gGt,kStrictContentLength:AGt,kConnector:jF,kMaxRedirections:yGt,kMaxRequests:FCe,kCounter:CGt,kClose:EGt,kDestroy:vGt,kDispatch:xGt,kInterceptors:_Ye,kLocalAddress:VF,kMaxResponseSize:bGt,kOnError:IGt,kHTTPContext:fc,kMaxConcurrentStreams:TGt,kResume:$F}=fa(),wGt=pYe(),_Gt=vYe(),SYe=!1,VI=Symbol("kClosedResolve"),RYe=s(()=>{},"noop");function BYe(t){return t[rX]??t[fc]?.defaultPipelining??1}s(BYe,"getPipelining");var OCe=class extends rGt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:E,tls:x,strictContentLength:b,maxCachedSessions:_,maxRedirections:k,connect:P,maxRequestsPerClient:N,localAddress:M,maxResponseSize:J,autoSelectFamily:pe,autoSelectFamilyAttemptTimeout:Y,maxConcurrentStreams:G,allowH2:H}={}){if(super(),f!==void 0)throw new dc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new dc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new dc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new dc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new dc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new dc("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new dc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new dc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new dc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new dc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new dc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new dc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new dc("bodyTimeout must be a positive integer or zero");if(P!=null&&typeof P!="function"&&typeof P!="object")throw new dc("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new dc("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new dc("maxRequestsPerClient must be a positive number");if(M!=null&&(typeof M!="string"||PYe.isIP(M)===0))throw new dc("localAddress must be valid string IP address");if(J!=null&&(!Number.isInteger(J)||J<-1))throw new dc("maxResponseSize must be a positive number");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new dc("autoSelectFamilyAttemptTimeout must be a positive number");if(H!=null&&typeof H!="boolean")throw new dc("allowH2 must be a valid boolean value");if(G!=null&&(typeof G!="number"||G<1))throw new dc("maxConcurrentStreams must be a positive integer, greater than 0");typeof P!="function"&&(P=oGt({...x,maxCachedSessions:_,allowH2:H,socketPath:y,timeout:c,...pe?{autoSelectFamily:pe,autoSelectFamilyAttemptTimeout:Y}:void 0,...P})),r?.Client&&Array.isArray(r.Client)?(this[_Ye]=r.Client,SYe||(SYe=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[_Ye]=[SGt({maxRedirections:k})],this[Xy]=H2.parseOrigin(e),this[jF]=P,this[rX]=E??1,this[fGt]=n||eGt.maxHeaderSize,this[wYe]=p??4e3,this[pGt]=h??6e5,this[mGt]=g??2e3,this[dGt]=this[wYe],this[jI]=null,this[VF]=M??null,this[W2]=0,this[$I]=0,this[lGt]=`host: ${this[Xy].hostname}${this[Xy].port?`:${this[Xy].port}`:""}\r
`,this[gGt]=l??3e5,this[hGt]=i??3e5,this[AGt]=b??!0,this[yGt]=k,this[FCe]=N,this[VI]=null,this[bGt]=J>-1?J:-1,this[TGt]=G??100,this[fc]=null,this[kg]=[],this[OE]=0,this[Pg]=0,this[$F]=ce=>QCe(this,ce),this[IGt]=ce=>DYe(this,ce)}get pipelining(){return this[rX]}set pipelining(e){this[rX]=e,this[$F](!0)}get[KF](){return this[kg].length-this[Pg]}get[YF](){return this[Pg]-this[OE]}get[zF](){return this[kg].length-this[OE]}get[cGt](){return!!this[fc]&&!this[yB]&&!this[fc].destroyed}get[MCe](){return!!(this[fc]?.busy(null)||this[zF]>=(BYe(this)||1)||this[KF]>0)}[aGt](e){NYe(this),this.once("connect",e)}[xGt](e,r){let n=e.origin||this[Xy].origin,i=new tGt(n,e,r);return this[kg].push(i),this[W2]||(H2.bodyLength(i.body)==null&&H2.isIterable(i.body)?(this[W2]=1,queueMicrotask(()=>QCe(this))):this[$F](!0)),this[W2]&&this[$I]!==2&&this[MCe]&&(this[$I]=2),this[$I]<2}async[EGt](){return new Promise(e=>{this[zF]?this[VI]=e:e(null)})}async[vGt](e){return new Promise(r=>{let n=this[kg].splice(this[Pg]);for(let o=0;o<n.length;o++){let a=n[o];H2.errorRequest(this,a,e)}let i=s(()=>{this[VI]&&(this[VI](),this[VI]=null),r(null)},"callback");this[fc]?(this[fc].destroy(e,i),this[fc]=null):queueMicrotask(i),this[$F]()})}},SGt=tX();function DYe(t,e){if(t[YF]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){FE(t[Pg]===t[OE]);let r=t[kg].splice(t[OE]);for(let n=0;n<r.length;n++){let i=r[n];H2.errorRequest(t,i,e)}FE(t[zF]===0)}}s(DYe,"onError");async function NYe(t){FE(!t[yB]),FE(!t[fc]);let{host:e,hostname:r,protocol:n,port:i}=t[Xy];if(r[0]==="["){let o=r.indexOf("]");FE(o!==-1);let a=r.substring(1,o);FE(PYe.isIP(a)),r=a}t[yB]=!0,AB.beforeConnect.hasSubscribers&&AB.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[jI],localAddress:t[VF]},connector:t[jF]});try{let o=await new Promise((a,c)=>{t[jF]({host:e,hostname:r,protocol:n,port:i,servername:t[jI],localAddress:t[VF]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){H2.destroy(o.on("error",RYe),new iGt);return}FE(o);try{t[fc]=o.alpnProtocol==="h2"?await _Gt(t,o):await wGt(t,o)}catch(a){throw o.destroy().on("error",RYe),a}t[yB]=!1,o[CGt]=0,o[FCe]=t[FCe],o[sGt]=t,o[uGt]=null,AB.connected.hasSubscribers&&AB.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[jI],localAddress:t[VF]},connector:t[jF],socket:o}),t.emit("connect",t[Xy],[t])}catch(o){if(t.destroyed)return;if(t[yB]=!1,AB.connectError.hasSubscribers&&AB.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[jI],localAddress:t[VF]},connector:t[jF],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(FE(t[YF]===0);t[KF]>0&&t[kg][t[Pg]].servername===t[jI];){let a=t[kg][t[Pg]++];H2.errorRequest(t,a,o)}else DYe(t,o);t.emit("connectionError",t[Xy],[t],o)}t[$F]()}s(NYe,"connect");function kYe(t){t[$I]=0,t.emit("drain",t[Xy],[t])}s(kYe,"emitDrain");function QCe(t,e){t[W2]!==2&&(t[W2]=2,RGt(t,e),t[W2]=0,t[OE]>256&&(t[kg].splice(0,t[OE]),t[Pg]-=t[OE],t[OE]=0))}s(QCe,"resume");function RGt(t,e){for(;;){if(t.destroyed){FE(t[KF]===0);return}if(t[VI]&&!t[zF]){t[VI](),t[VI]=null;return}if(t[fc]&&t[fc].resume(),t[MCe])t[$I]=2;else if(t[$I]===2){e?(t[$I]=1,queueMicrotask(()=>kYe(t))):kYe(t);continue}if(t[KF]===0||t[YF]>=(BYe(t)||1))return;let r=t[kg][t[Pg]];if(t[Xy].protocol==="https:"&&t[jI]!==r.servername){if(t[YF]>0)return;t[jI]=r.servername,t[fc]?.destroy(new nGt("servername changed"),()=>{t[fc]=null,QCe(t)})}if(t[yB])return;if(!t[fc]){NYe(t);return}if(t[fc].destroyed||t[fc].busy(r))return;!r.aborted&&t[fc].write(r)?t[Pg]++:t[kg].splice(t[Pg],1)}}s(RGt,"_resume");LYe.exports=OCe});var UCe=U((lJn,MYe)=>{"use strict";d();var nX=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};MYe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new nX}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new nX),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var OYe=U((fJn,FYe)=>{d();var{kFree:kGt,kConnected:PGt,kPending:BGt,kQueued:DGt,kRunning:NGt,kSize:LGt}=fa(),G2=Symbol("pool"),qCe=class{static{s(this,"PoolStats")}constructor(e){this[G2]=e}get connected(){return this[G2][PGt]}get free(){return this[G2][kGt]}get pending(){return this[G2][BGt]}get queued(){return this[G2][DGt]}get running(){return this[G2][NGt]}get size(){return this[G2][LGt]}};FYe.exports=qCe});var $Ce=U((hJn,zYe)=>{"use strict";d();var MGt=nB(),FGt=UCe(),{kConnected:HCe,kSize:QYe,kRunning:UYe,kPending:qYe,kQueued:XF,kBusy:OGt,kFree:QGt,kUrl:UGt,kClose:qGt,kDestroy:HGt,kDispatch:WGt}=fa(),GGt=OYe(),Hf=Symbol("clients"),Gd=Symbol("needDrain"),ZF=Symbol("queue"),WCe=Symbol("closed resolve"),GCe=Symbol("onDrain"),HYe=Symbol("onConnect"),WYe=Symbol("onDisconnect"),GYe=Symbol("onConnectionError"),jCe=Symbol("get dispatcher"),VYe=Symbol("add client"),$Ye=Symbol("remove client"),jYe=Symbol("stats"),VCe=class extends MGt{static{s(this,"PoolBase")}constructor(){super(),this[ZF]=new FGt,this[Hf]=[],this[XF]=0;let e=this;this[GCe]=s(function(n,i){let o=e[ZF],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[XF]--,a=!this.dispatch(c.opts,c.handler)}this[Gd]=a,!this[Gd]&&e[Gd]&&(e[Gd]=!1,e.emit("drain",n,[e,...i])),e[WCe]&&o.isEmpty()&&Promise.all(e[Hf].map(c=>c.close())).then(e[WCe])},"onDrain"),this[HYe]=(r,n)=>{e.emit("connect",r,[e,...n])},this[WYe]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[GYe]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[jYe]=new GGt(this)}get[OGt](){return this[Gd]}get[HCe](){return this[Hf].filter(e=>e[HCe]).length}get[QGt](){return this[Hf].filter(e=>e[HCe]&&!e[Gd]).length}get[qYe](){let e=this[XF];for(let{[qYe]:r}of this[Hf])e+=r;return e}get[UYe](){let e=0;for(let{[UYe]:r}of this[Hf])e+=r;return e}get[QYe](){let e=this[XF];for(let{[QYe]:r}of this[Hf])e+=r;return e}get stats(){return this[jYe]}async[qGt](){this[ZF].isEmpty()?await Promise.all(this[Hf].map(e=>e.close())):await new Promise(e=>{this[WCe]=e})}async[HGt](e){for(;;){let r=this[ZF].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Hf].map(r=>r.destroy(e)))}[WGt](e,r){let n=this[jCe]();return n?n.dispatch(e,r)||(n[Gd]=!0,this[Gd]=!this[jCe]()):(this[Gd]=!0,this[ZF].push({opts:e,handler:r}),this[XF]++),!this[Gd]}[VYe](e){return e.on("drain",this[GCe]).on("connect",this[HYe]).on("disconnect",this[WYe]).on("connectionError",this[GYe]),this[Hf].push(e),this[Gd]&&queueMicrotask(()=>{this[Gd]&&this[GCe](e[UGt],[this,e])}),this}[$Ye](e){e.close(()=>{let r=this[Hf].indexOf(e);r!==-1&&this[Hf].splice(r,1)}),this[Gd]=this[Hf].some(r=>!r[Gd]&&r.closed!==!0&&r.destroyed!==!0)}};zYe.exports={PoolBase:VCe,kClients:Hf,kNeedDrain:Gd,kAddClient:VYe,kRemoveClient:$Ye,kGetDispatcher:jCe}});var CB=U((yJn,XYe)=>{"use strict";d();var{PoolBase:jGt,kClients:iX,kNeedDrain:VGt,kAddClient:$Gt,kGetDispatcher:zGt}=$Ce(),YGt=JF(),{InvalidArgumentError:zCe}=Mo(),YYe=Pi(),{kUrl:KYe,kInterceptors:KGt}=fa(),JGt=PF(),YCe=Symbol("options"),KCe=Symbol("connections"),JYe=Symbol("factory");function XGt(t,e){return new YGt(t,e)}s(XGt,"defaultFactory");var JCe=class extends jGt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=XGt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new zCe("invalid connections");if(typeof n!="function")throw new zCe("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new zCe("connect must be a function or an object");typeof i!="function"&&(i=JGt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[KGt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[KCe]=r||null,this[KYe]=YYe.parseOrigin(e),this[YCe]={...YYe.deepClone(m),connect:i,allowH2:p},this[YCe].interceptors=m.interceptors?{...m.interceptors}:void 0,this[JYe]=n,this.on("connectionError",(h,g,y)=>{for(let E of g){let x=this[iX].indexOf(E);x!==-1&&this[iX].splice(x,1)}})}[zGt](){for(let e of this[iX])if(!e[VGt])return e;if(!this[KCe]||this[iX].length<this[KCe]){let e=this[JYe](this[KYe],this[YCe]);return this[$Gt](e),e}}};XYe.exports=JCe});var nKe=U((vJn,rKe)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:ZGt,InvalidArgumentError:ejt}=Mo(),{PoolBase:tjt,kClients:Zu,kNeedDrain:eO,kAddClient:rjt,kRemoveClient:njt,kGetDispatcher:ijt}=$Ce(),ojt=CB(),{kUrl:XCe,kInterceptors:sjt}=fa(),{parseOrigin:ZYe}=Pi(),eKe=Symbol("factory"),oX=Symbol("options"),tKe=Symbol("kGreatestCommonDivisor"),j2=Symbol("kCurrentWeight"),V2=Symbol("kIndex"),Hm=Symbol("kWeight"),sX=Symbol("kMaxWeightPerServer"),aX=Symbol("kErrorPenalty");function ajt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(ajt,"getGreatestCommonDivisor");function cjt(t,e){return new ojt(t,e)}s(cjt,"defaultFactory");var ZCe=class extends tjt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=cjt,...n}={}){if(super(),this[oX]=n,this[V2]=-1,this[j2]=0,this[sX]=this[oX].maxWeightPerServer||100,this[aX]=this[oX].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new ejt("factory must be a function.");this[sjt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[eKe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=ZYe(e).origin;if(this[Zu].find(i=>i[XCe].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[eKe](r,Object.assign({},this[oX]));this[rjt](n),n.on("connect",()=>{n[Hm]=Math.min(this[sX],n[Hm]+this[aX])}),n.on("connectionError",()=>{n[Hm]=Math.max(1,n[Hm]-this[aX]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Hm]=Math.max(1,n[Hm]-this[aX]),this._updateBalancedPoolStats())});for(let i of this[Zu])i[Hm]=this[sX];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Zu].length;r++)e=ajt(this[Zu][r][Hm],e);this[tKe]=e}removeUpstream(e){let r=ZYe(e).origin,n=this[Zu].find(i=>i[XCe].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[njt](n),this}get upstreams(){return this[Zu].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[XCe].origin)}[ijt](){if(this[Zu].length===0)throw new ZGt;if(!this[Zu].find(o=>!o[eO]&&o.closed!==!0&&o.destroyed!==!0)||this[Zu].map(o=>o[eO]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Zu].findIndex(o=>!o[eO]);for(;n++<this[Zu].length;){this[V2]=(this[V2]+1)%this[Zu].length;let o=this[Zu][this[V2]];if(o[Hm]>this[Zu][i][Hm]&&!o[eO]&&(i=this[V2]),this[V2]===0&&(this[j2]=this[j2]-this[tKe],this[j2]<=0&&(this[j2]=this[sX])),o[Hm]>=this[j2]&&!o[eO])return o}return this[j2]=this[Zu][i][Hm],this[V2]=i,this[Zu][i]}};rKe.exports=ZCe});var EB=U((IJn,uKe)=>{"use strict";d();var{InvalidArgumentError:cX}=Mo(),{kClients:zI,kRunning:iKe,kClose:ljt,kDestroy:ujt,kDispatch:djt,kInterceptors:fjt}=fa(),pjt=nB(),mjt=CB(),hjt=JF(),gjt=Pi(),Ajt=tX(),oKe=Symbol("onConnect"),sKe=Symbol("onDisconnect"),aKe=Symbol("onConnectionError"),yjt=Symbol("maxRedirections"),cKe=Symbol("onDrain"),lKe=Symbol("factory"),e1e=Symbol("options");function Cjt(t,e){return e&&e.connections===1?new hjt(t,e):new mjt(t,e)}s(Cjt,"defaultFactory");var t1e=class extends pjt{static{s(this,"Agent")}constructor({factory:e=Cjt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new cX("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new cX("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new cX("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[fjt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Ajt({maxRedirections:r})],this[e1e]={...gjt.deepClone(i),connect:n},this[e1e].interceptors=i.interceptors?{...i.interceptors}:void 0,this[yjt]=r,this[lKe]=e,this[zI]=new Map,this[cKe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[oKe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[sKe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[aKe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[iKe](){let e=0;for(let r of this[zI].values())e+=r[iKe];return e}[djt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new cX("opts.origin must be a non-empty string or URL.");let i=this[zI].get(n);return i||(i=this[lKe](e.origin,this[e1e]).on("drain",this[cKe]).on("connect",this[oKe]).on("disconnect",this[sKe]).on("connectionError",this[aKe]),this[zI].set(n,i)),i.dispatch(e,r)}async[ljt](){let e=[];for(let r of this[zI].values())e.push(r.close());this[zI].clear(),await Promise.all(e)}async[ujt](e){let r=[];for(let n of this[zI].values())r.push(n.destroy(e));this[zI].clear(),await Promise.all(r)}};uKe.exports=t1e});var i1e=U((_Jn,mKe)=>{"use strict";d();var{kProxy:Ejt,kClose:vjt,kDestroy:xjt,kInterceptors:bjt}=fa(),{URL:tO}=require("node:url"),Ijt=EB(),Tjt=CB(),wjt=nB(),{InvalidArgumentError:dX,RequestAbortedError:_jt,SecureProxyConnectionError:Sjt}=Mo(),dKe=PF(),lX=Symbol("proxy agent"),uX=Symbol("proxy client"),rO=Symbol("proxy headers"),r1e=Symbol("request tls settings"),fKe=Symbol("proxy tls settings"),pKe=Symbol("connect endpoint function");function Rjt(t){return t==="https:"?443:80}s(Rjt,"defaultProtocolPort");function kjt(t,e){return new Tjt(t,e)}s(kjt,"defaultFactory");var Pjt=s(()=>{},"noop"),n1e=class extends wjt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof tO)&&!e.uri)throw new dX("Proxy uri is mandatory");let{clientFactory:r=kjt}=e;if(typeof r!="function")throw new dX("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[Ejt]={uri:i,protocol:c},this[bjt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[r1e]=e.requestTls,this[fKe]=e.proxyTls,this[rO]=e.headers||{},e.auth&&e.token)throw new dX("opts.auth cannot be used in combination with opts.token");e.auth?this[rO]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[rO]["proxy-authorization"]=e.token:l&&u&&(this[rO]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=dKe({...e.proxyTls});this[pKe]=dKe({...e.requestTls}),this[uX]=r(n,{connect:p}),this[lX]=new Ijt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${Rjt(m.protocol)}`);try{let{socket:y,statusCode:E}=await this[uX].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[rO],host:m.host},servername:this[fKe]?.servername||f});if(E!==200&&(y.on("error",Pjt).destroy(),h(new _jt(`Proxy response (${E}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let x;this[r1e]?x=this[r1e].servername:x=m.servername,this[pKe]({...m,servername:x,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new Sjt(y)):h(y)}},"connect")})}dispatch(e,r){let n=Bjt(e.headers);if(Djt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new tO(e.origin);n.host=i}return this[lX].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new tO(e):e instanceof tO?e:new tO(e.uri)}async[vjt](){await this[lX].close(),await this[uX].close()}async[xjt](){await this[lX].destroy(),await this[uX].destroy()}};function Bjt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(Bjt,"buildHeaders");function Djt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new dX("Proxy-Authorization should be sent in ProxyAgent constructor")}s(Djt,"throwIfProxyAuthIsSent");mKe.exports=n1e});var EKe=U((kJn,CKe)=>{"use strict";d();var Njt=nB(),{kClose:Ljt,kDestroy:Mjt,kClosed:hKe,kDestroyed:gKe,kDispatch:Fjt,kNoProxyAgent:nO,kHttpProxyAgent:YI,kHttpsProxyAgent:$2}=fa(),AKe=i1e(),Ojt=EB(),Qjt={"http:":80,"https:":443},yKe=!1,o1e=class extends Njt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,yKe||(yKe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[nO]=new Ojt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[YI]=new AKe({...o,uri:a}):this[YI]=this[nO];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[$2]=new AKe({...o,uri:c}):this[$2]=this[YI],this.#o()}[Fjt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[Ljt](){await this[nO].close(),this[YI][hKe]||await this[YI].close(),this[$2][hKe]||await this[$2].close()}async[Mjt](e){await this[nO].destroy(e),this[YI][gKe]||await this[YI].destroy(e),this[$2][gKe]||await this[$2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||Qjt[r]||0,this.#r(n,i)?r==="https:"?this[$2]:this[YI]:this[nO]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};CKe.exports=o1e});var fX=U((DJn,IKe)=>{"use strict";d();var vB=require("node:assert"),{kRetryHandlerDefaultRetry:vKe}=fa(),{RequestRetryError:iO}=Mo(),{isDisturbed:xKe,parseHeaders:Ujt,parseRangeHeader:bKe,wrapRequestBody:qjt}=Pi();function Hjt(t){let e=Date.now();return new Date(t).getTime()-e}s(Hjt,"calculateRetryAfterHeader");var s1e=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:qjt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[vKe],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[vKe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:E}=u,{counter:x}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(E)&&!E.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(x>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?Hjt(b):b*1e3);let _=b>0?Math.min(b,m):Math.min(p*h**(x-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=Ujt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new iO("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new iO("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=bKe(o["content-range"]);if(!c)return this.abort(new iO("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new iO("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return vB(this.start===l,"content-range mismatch"),vB(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=bKe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;vB(l!=null&&Number.isFinite(l),"content-range mismatch"),vB(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return vB(Number.isFinite(this.start)),vB(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new iO("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||xKe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||xKe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};IKe.exports=s1e});var wKe=U((MJn,TKe)=>{"use strict";d();var Wjt=RF(),Gjt=fX(),a1e=class extends Wjt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new Gjt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};TKe.exports=a1e});var p1e=U((QJn,LKe)=>{"use strict";d();var PKe=require("node:assert"),{Readable:jjt}=require("node:stream"),{RequestAbortedError:BKe,NotSupportedError:Vjt,InvalidArgumentError:$jt,AbortError:c1e}=Mo(),DKe=Pi(),{ReadableStreamFrom:zjt}=Pi(),Z0=Symbol("kConsume"),oO=Symbol("kReading"),KI=Symbol("kBody"),_Ke=Symbol("kAbort"),NKe=Symbol("kContentType"),SKe=Symbol("kContentLength"),Yjt=s(()=>{},"noop"),l1e=class extends jjt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[_Ke]=r,this[Z0]=null,this[KI]=null,this[NKe]=n,this[SKe]=i,this[oO]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new BKe),e&&this[_Ke](),super.destroy(e)}_destroy(e,r){this[oO]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[oO]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[oO]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Z0]&&e!==null?(d1e(this[Z0],e),this[oO]?super.push(e):!0):super.push(e)}async text(){return sO(this,"text")}async json(){return sO(this,"json")}async blob(){return sO(this,"blob")}async bytes(){return sO(this,"bytes")}async arrayBuffer(){return sO(this,"arrayBuffer")}async formData(){throw new Vjt}get bodyUsed(){return DKe.isDisturbed(this)}get body(){return this[KI]||(this[KI]=zjt(this),this[Z0]&&(this[KI].getReader(),PKe(this[KI].locked))),this[KI]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new $jt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[SKe]>r&&this.destroy(new c1e);let a=s(()=>{this.destroy(n.reason??new c1e)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new c1e):i(null)}).on("error",Yjt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function Kjt(t){return t[KI]&&t[KI].locked===!0||t[Z0]}s(Kjt,"isLocked");function Jjt(t){return DKe.isDisturbed(t)||Kjt(t)}s(Jjt,"isUnusable");async function sO(t,e){return PKe(!t[Z0]),new Promise((r,n)=>{if(Jjt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Z0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){f1e(this[Z0],i)}).on("close",function(){this[Z0].body!==null&&f1e(this[Z0],new BKe)}),Xjt(t[Z0])})})}s(sO,"consume");function Xjt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)d1e(t,e.buffer[i])}else for(let r of e.buffer)d1e(t,r);for(e.endEmitted?kKe(this[Z0]):t.stream.on("end",function(){kKe(this[Z0])}),t.stream.resume();t.stream.read()!=null;);}s(Xjt,"consumeStart");function u1e(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(u1e,"chunksDecode");function RKe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(RKe,"chunksConcat");function kKe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(u1e(r,o)):e==="json"?n(JSON.parse(u1e(r,o))):e==="arrayBuffer"?n(RKe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[NKe]})):e==="bytes"&&n(RKe(r,o)),f1e(t)}catch(a){i.destroy(a)}}s(kKe,"consumeEnd");function d1e(t,e){t.length+=e.length,t.body.push(e)}s(d1e,"consumePush");function f1e(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(f1e,"consumeFinish");LKe.exports={Readable:l1e,chunksDecode:u1e}});var m1e=U((HJn,UKe)=>{d();var Zjt=require("node:assert"),{ResponseStatusCodeError:MKe}=Mo(),{chunksDecode:FKe}=p1e(),eVt=128*1024;async function tVt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){Zjt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>eVt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new MKe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{OKe(r)?f=JSON.parse(FKe(a,c)):QKe(r)&&(f=FKe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new MKe(l,n,o,f)))}s(tVt,"getResolveErrorBodyCallback");var OKe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),QKe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");UKe.exports={getResolveErrorBodyCallback:tVt,isContentTypeApplicationJson:OKe,isContentTypeText:QKe}});var WKe=U((jJn,h1e)=>{"use strict";d();var rVt=require("node:assert"),{Readable:nVt}=p1e(),{InvalidArgumentError:xB,RequestAbortedError:qKe}=Mo(),ep=Pi(),{getResolveErrorBodyCallback:iVt}=m1e(),{AsyncResource:oVt}=require("node:async_hooks"),pX=class extends oVt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new xB("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new xB("invalid callback");if(f&&(typeof f!="number"||f<0))throw new xB("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new xB("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new xB("invalid method");if(c&&typeof c!="function")throw new xB("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw ep.isStream(a)&&ep.destroy(a.on("error",ep.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,ep.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new qKe:this.removeAbortListener=ep.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new qKe,this.res?ep.destroy(this.res.on("error",ep.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}rVt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?ep.parseRawHeaders(r):ep.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?ep.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new nVt({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(iVt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:l}))}onData(e){return this.res.push(e)}onComplete(e){ep.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{ep.destroy(r,e)})),i&&(this.body=null,ep.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function HKe(t,e){if(e===void 0)return new Promise((r,n)=>{HKe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new pX(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(HKe,"request");h1e.exports=HKe;h1e.exports.RequestHandler=pX});var aO=U((zJn,VKe)=>{d();var{addAbortListener:sVt}=Pi(),{RequestAbortedError:aVt}=Mo(),bB=Symbol("kListener"),Zy=Symbol("kSignal");function GKe(t){t.abort?t.abort(t[Zy]?.reason):t.reason=t[Zy]?.reason??new aVt,jKe(t)}s(GKe,"abort");function cVt(t,e){if(t.reason=null,t[Zy]=null,t[bB]=null,!!e){if(e.aborted){GKe(t);return}t[Zy]=e,t[bB]=()=>{GKe(t)},sVt(t[Zy],t[bB])}}s(cVt,"addSignal");function jKe(t){t[Zy]&&("removeEventListener"in t[Zy]?t[Zy].removeEventListener("abort",t[bB]):t[Zy].removeListener("abort",t[bB]),t[Zy]=null,t[bB]=null)}s(jKe,"removeSignal");VKe.exports={addSignal:cVt,removeSignal:jKe}});var KKe=U((JJn,YKe)=>{"use strict";d();var lVt=require("node:assert"),{finished:uVt,PassThrough:dVt}=require("node:stream"),{InvalidArgumentError:IB,InvalidReturnValueError:fVt}=Mo(),Bg=Pi(),{getResolveErrorBodyCallback:pVt}=m1e(),{AsyncResource:mVt}=require("node:async_hooks"),{addSignal:hVt,removeSignal:$Ke}=aO(),g1e=class extends mVt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new IB("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new IB("invalid callback");if(typeof r!="function")throw new IB("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new IB("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new IB("invalid method");if(l&&typeof l!="function")throw new IB("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Bg.isStream(c)&&Bg.destroy(c.on("error",Bg.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,Bg.isStream(c)&&c.on("error",p=>{this.onError(p)}),hVt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}lVt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?Bg.parseRawHeaders(r):Bg.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Bg.parseHeaders(r):f)["content-type"];p=new dVt,this.callback=null,this.runInAsyncScope(pVt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new fVt("expected Writable");uVt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:E,trailers:x,abort:b}=this;this.res=null,(h||!y.readable)&&Bg.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:E,trailers:x}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;$Ke(this),r&&(this.trailers=Bg.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;$Ke(this),this.factory=null,r?(this.res=null,Bg.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,Bg.destroy(o,e))}};function zKe(t,e,r){if(r===void 0)return new Promise((n,i)=>{zKe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new g1e(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(zKe,"stream");YKe.exports=zKe});var eJe=U((eXn,ZKe)=>{"use strict";d();var{Readable:XKe,Duplex:gVt,PassThrough:AVt}=require("node:stream"),{InvalidArgumentError:cO,InvalidReturnValueError:yVt,RequestAbortedError:A1e}=Mo(),Wm=Pi(),{AsyncResource:CVt}=require("node:async_hooks"),{addSignal:EVt,removeSignal:vVt}=aO(),JKe=require("node:assert"),TB=Symbol("resume"),y1e=class extends XKe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[TB]=null}_read(){let{[TB]:e}=this;e&&(this[TB]=null,e())}_destroy(e,r){this._read(),r(e)}},C1e=class extends XKe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[TB]=e}_read(){this[TB]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new A1e),r(e)}},E1e=class extends CVt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new cO("invalid opts");if(typeof r!="function")throw new cO("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new cO("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new cO("invalid method");if(a&&typeof a!="function")throw new cO("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new y1e().on("error",Wm.nop),this.ret=new gVt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[TB]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new A1e),g&&l&&g(),Wm.destroy(f,l),Wm.destroy(p,l),Wm.destroy(m,l),vVt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,EVt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}JKe(!i,"pipeline cannot be retried"),JKe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?Wm.parseRawHeaders(r):Wm.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new C1e(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?Wm.parseRawHeaders(r):Wm.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",Wm.nop),l}if(!c||typeof c.on!="function")throw new yVt("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;Wm.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||Wm.destroy(l,new A1e)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,Wm.destroy(r,e)}};function xVt(t,e){try{let r=new E1e(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new AVt().destroy(r)}}s(xVt,"pipeline");ZKe.exports=xVt});var sJe=U((nXn,oJe)=>{"use strict";d();var{InvalidArgumentError:v1e,SocketError:bVt}=Mo(),{AsyncResource:IVt}=require("node:async_hooks"),tJe=Pi(),{addSignal:TVt,removeSignal:rJe}=aO(),nJe=require("node:assert"),x1e=class extends IVt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new v1e("invalid opts");if(typeof r!="function")throw new v1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new v1e("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,TVt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}nJe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new bVt("bad upgrade",null)}onUpgrade(e,r,n){nJe(e===101);let{callback:i,opaque:o,context:a}=this;rJe(this),this.callback=null;let c=this.responseHeaders==="raw"?tJe.parseRawHeaders(r):tJe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;rJe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function iJe(t,e){if(e===void 0)return new Promise((r,n)=>{iJe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new x1e(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(iJe,"upgrade");oJe.exports=iJe});var dJe=U((sXn,uJe)=>{"use strict";d();var wVt=require("node:assert"),{AsyncResource:_Vt}=require("node:async_hooks"),{InvalidArgumentError:b1e,SocketError:SVt}=Mo(),aJe=Pi(),{addSignal:RVt,removeSignal:cJe}=aO(),I1e=class extends _Vt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new b1e("invalid opts");if(typeof r!="function")throw new b1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new b1e("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,RVt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}wVt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new SVt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;cJe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?aJe.parseRawHeaders(r):aJe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;cJe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function lJe(t,e){if(e===void 0)return new Promise((r,n)=>{lJe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new I1e(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(lJe,"connect");uJe.exports=lJe});var fJe=U((lXn,wB)=>{"use strict";d();wB.exports.request=WKe();wB.exports.stream=KKe();wB.exports.pipeline=eJe();wB.exports.upgrade=sJe();wB.exports.connect=dJe()});var w1e=U((dXn,pJe)=>{"use strict";d();var{UndiciError:kVt}=Mo(),T1e=class t extends kVt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};pJe.exports={MockNotMatchedError:T1e}});var _B=U((mXn,mJe)=>{"use strict";d();mJe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var lO=U((gXn,TJe)=>{"use strict";d();var{MockNotMatchedError:z2}=w1e(),{kDispatches:mX,kMockAgent:PVt,kOriginalDispatch:BVt,kOrigin:DVt,kGetNetConnect:NVt}=_B(),{buildURL:LVt}=Pi(),{STATUS_CODES:MVt}=require("node:http"),{types:{isPromise:FVt}}=require("node:util");function QE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(QE,"matchValue");function gJe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(gJe,"lowerCaseEntries");function AJe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):gJe(t)[e.toLocaleLowerCase()]}s(AJe,"getHeaderByName");function R1e(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(R1e,"buildHeadersFromArray");function yJe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=R1e(e)),t.headers(e?gJe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=AJe(e,r);if(!QE(n,i))return!1}return!0}s(yJe,"matchHeaders");function hJe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(hJe,"safeUrl");function OVt(t,{path:e,method:r,body:n,headers:i}){let o=QE(t.path,e),a=QE(t.method,r),c=typeof t.body<"u"?QE(t.body,n):!0,l=yJe(t,i);return o&&a&&c&&l}s(OVt,"matchKey");function CJe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(CJe,"getResponseData");function EJe(t,e){let r=e.query?LVt(e.path,e.query):e.path,n=typeof r=="string"?hJe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>QE(hJe(o),n));if(i.length===0)throw new z2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>QE(o,e.method)),i.length===0)throw new z2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?QE(o,e.body):!0),i.length===0)throw new z2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>yJe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new z2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(EJe,"getMockDispatch");function QVt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(QVt,"addMockDispatch");function _1e(t,e){let r=t.findIndex(n=>n.consumed?OVt(n,e):!1);r!==-1&&t.splice(r,1)}s(_1e,"deleteMockDispatch");function vJe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(vJe,"buildKey");function S1e(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(S1e,"generateKeyValues");function xJe(t){return MVt[t]||"unknown"}s(xJe,"getStatusText");async function UVt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(UVt,"getResponse");function bJe(t,e){let r=vJe(t),n=EJe(this[mX],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!f&&p>=m,n.pending=p<m,l!==null)return _1e(this[mX],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[mX])},u):h(this[mX]);function h(y,E=o){let x=Array.isArray(t.headers)?R1e(t.headers):t.headers,b=typeof E=="function"?E({...t,headers:x}):E;if(FVt(b)){b.then(N=>h(y,N));return}let _=CJe(b),k=S1e(a),P=S1e(c);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,xJe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(P),_1e(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(bJe,"mockDispatch");function qVt(){let t=this[PVt],e=this[DVt],r=this[BVt];return s(function(i,o){if(t.isMockActive)try{bJe.call(this,i,o)}catch(a){if(a instanceof z2){let c=t[NVt]();if(c===!1)throw new z2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(IJe(c,e))r.call(this,i,o);else throw new z2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(qVt,"buildMockDispatch");function IJe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>QE(n,r.host)))}s(IJe,"checkNetConnect");function HVt(t){if(t){let{agent:e,...r}=t;return r}}s(HVt,"buildMockOptions");TJe.exports={getResponseData:CJe,getMockDispatch:EJe,addMockDispatch:QVt,deleteMockDispatch:_1e,buildKey:vJe,generateKeyValues:S1e,matchValue:QE,getResponse:UVt,getStatusText:xJe,mockDispatch:bJe,buildMockDispatch:qVt,checkNetConnect:IJe,buildMockOptions:HVt,getHeaderByName:AJe,buildHeadersFromArray:R1e}});var M1e=U((CXn,L1e)=>{"use strict";d();var{getResponseData:WVt,buildKey:GVt,addMockDispatch:k1e}=lO(),{kDispatches:hX,kDispatchKey:gX,kDefaultHeaders:P1e,kDefaultTrailers:B1e,kContentLength:D1e,kMockDispatch:AX}=_B(),{InvalidArgumentError:eC}=Mo(),{buildURL:jVt}=Pi(),SB=class{static{s(this,"MockScope")}constructor(e){this[AX]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new eC("waitInMs must be a valid integer > 0");return this[AX].delay=e,this}persist(){return this[AX].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new eC("repeatTimes must be a valid integer > 0");return this[AX].times=e,this}},N1e=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new eC("opts must be an object");if(typeof e.path>"u")throw new eC("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=jVt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[gX]=GVt(e),this[hX]=r,this[P1e]={},this[B1e]={},this[D1e]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=WVt(r),o=this[D1e]?{"content-length":i.length}:{},a={...this[P1e],...o,...n.headers},c={...this[B1e],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new eC("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new eC("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new eC("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=k1e(this[hX],this[gX],o);return new SB(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=k1e(this[hX],this[gX],n);return new SB(i)}replyWithError(e){if(typeof e>"u")throw new eC("error must be defined");let r=k1e(this[hX],this[gX],{error:e});return new SB(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new eC("headers must be defined");return this[P1e]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new eC("trailers must be defined");return this[B1e]=e,this}replyContentLength(){return this[D1e]=!0,this}};L1e.exports.MockInterceptor=N1e;L1e.exports.MockScope=SB});var Q1e=U((xXn,BJe)=>{"use strict";d();var{promisify:VVt}=require("node:util"),$Vt=JF(),{buildMockDispatch:zVt}=lO(),{kDispatches:wJe,kMockAgent:_Je,kClose:SJe,kOriginalClose:RJe,kOrigin:kJe,kOriginalDispatch:YVt,kConnected:F1e}=_B(),{MockInterceptor:KVt}=M1e(),PJe=fa(),{InvalidArgumentError:JVt}=Mo(),O1e=class extends $Vt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new JVt("Argument opts.agent must implement Agent");this[_Je]=r.agent,this[kJe]=e,this[wJe]=[],this[F1e]=1,this[YVt]=this.dispatch,this[RJe]=this.close.bind(this),this.dispatch=zVt.call(this),this.close=this[SJe]}get[PJe.kConnected](){return this[F1e]}intercept(e){return new KVt(e,this[wJe])}async[SJe](){await VVt(this[RJe])(),this[F1e]=0,this[_Je][PJe.kClients].delete(this[kJe])}};BJe.exports=O1e});var H1e=U((TXn,QJe)=>{"use strict";d();var{promisify:XVt}=require("node:util"),ZVt=CB(),{buildMockDispatch:e$t}=lO(),{kDispatches:DJe,kMockAgent:NJe,kClose:LJe,kOriginalClose:MJe,kOrigin:FJe,kOriginalDispatch:t$t,kConnected:U1e}=_B(),{MockInterceptor:r$t}=M1e(),OJe=fa(),{InvalidArgumentError:n$t}=Mo(),q1e=class extends ZVt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new n$t("Argument opts.agent must implement Agent");this[NJe]=r.agent,this[FJe]=e,this[DJe]=[],this[U1e]=1,this[t$t]=this.dispatch,this[MJe]=this.close.bind(this),this.dispatch=e$t.call(this),this.close=this[LJe]}get[OJe.kConnected](){return this[U1e]}intercept(e){return new r$t(e,this[DJe])}async[LJe](){await XVt(this[MJe])(),this[U1e]=0,this[NJe][OJe.kClients].delete(this[FJe])}};QJe.exports=q1e});var qJe=U((RXn,UJe)=>{"use strict";d();var i$t={pronoun:"it",is:"is",was:"was",this:"this"},o$t={pronoun:"they",is:"are",was:"were",this:"these"};UJe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?i$t:o$t,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var WJe=U((DXn,HJe)=>{"use strict";d();var{Transform:s$t}=require("node:stream"),{Console:a$t}=require("node:console"),c$t=process.versions.icu?"\u2705":"Y ",l$t=process.versions.icu?"\u274C":"N ";HJe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new s$t({transform(r,n,i){i(null,r)}}),this.logger=new a$t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?c$t:l$t,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var $Je=U((MXn,VJe)=>{"use strict";d();var{kClients:Y2}=fa(),u$t=EB(),{kAgent:W1e,kMockAgentSet:yX,kMockAgentGet:GJe,kDispatches:G1e,kIsMockActive:CX,kNetConnect:K2,kGetNetConnect:d$t,kOptions:EX,kFactory:vX}=_B(),f$t=Q1e(),p$t=H1e(),{matchValue:m$t,buildMockOptions:h$t}=lO(),{InvalidArgumentError:jJe,UndiciError:g$t}=Mo(),A$t=RF(),y$t=qJe(),C$t=WJe(),j1e=class extends A$t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[K2]=!0,this[CX]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new jJe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new u$t(e);this[W1e]=r,this[Y2]=r[Y2],this[EX]=h$t(e)}get(e){let r=this[GJe](e);return r||(r=this[vX](e),this[yX](e,r)),r}dispatch(e,r){return this.get(e.origin),this[W1e].dispatch(e,r)}async close(){await this[W1e].close(),this[Y2].clear()}deactivate(){this[CX]=!1}activate(){this[CX]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[K2])?this[K2].push(e):this[K2]=[e];else if(typeof e>"u")this[K2]=!0;else throw new jJe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[K2]=!1}get isMockActive(){return this[CX]}[yX](e,r){this[Y2].set(e,r)}[vX](e){let r=Object.assign({agent:this},this[EX]);return this[EX]&&this[EX].connections===1?new f$t(e,r):new p$t(e,r)}[GJe](e){let r=this[Y2].get(e);if(r)return r;if(typeof e!="string"){let n=this[vX]("http://localhost:9999");return this[yX](e,n),n}for(let[n,i]of Array.from(this[Y2]))if(i&&typeof n!="string"&&m$t(n,e)){let o=this[vX](e);return this[yX](e,o),o[G1e]=i[G1e],o}}[d$t](){return this[K2]}pendingInterceptors(){let e=this[Y2];return Array.from(e.entries()).flatMap(([r,n])=>n[G1e].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new C$t}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new y$t("interceptor","interceptors").pluralize(r.length);throw new g$t(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};VJe.exports=j1e});var xX=U((QXn,JJe)=>{"use strict";d();var zJe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:E$t}=Mo(),v$t=EB();KJe()===void 0&&YJe(new v$t);function YJe(t){if(!t||typeof t.dispatch!="function")throw new E$t("Argument agent must implement Agent");Object.defineProperty(globalThis,zJe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(YJe,"setGlobalDispatcher");function KJe(){return globalThis[zJe]}s(KJe,"getGlobalDispatcher");JJe.exports={setGlobalDispatcher:YJe,getGlobalDispatcher:KJe}});var bX=U((WXn,XJe)=>{"use strict";d();XJe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var eXe=U((VXn,ZJe)=>{"use strict";d();var x$t=eX();ZJe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new x$t(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var rXe=U((YXn,tXe)=>{"use strict";d();var b$t=fX();tXe.exports=t=>e=>s(function(n,i){return e(n,new b$t({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var iXe=U((XXn,nXe)=>{"use strict";d();var I$t=Pi(),{InvalidArgumentError:T$t,RequestAbortedError:w$t}=Mo(),_$t=bX(),V1e=class extends _$t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new T$t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=I$t.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new w$t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function S$t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new V1e({maxSize:o},i);return e(n,a)},"Intercept")}s(S$t,"createDumpInterceptor");nXe.exports=S$t});var aXe=U((tZn,sXe)=>{"use strict";d();var{isIP:R$t}=require("node:net"),{lookup:k$t}=require("node:dns"),P$t=bX(),{InvalidArgumentError:RB,InformationalError:B$t}=Mo(),oXe=Math.pow(2,31)-1,$1e=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new B$t("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){k$t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===oXe?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===oXe?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new z1e(this,e,r)}},z1e=class extends P$t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};sXe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new RB("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new RB("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new RB("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new RB("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new RB("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new RB("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new $1e(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return R$t(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var J2=U((iZn,mXe)=>{"use strict";d();var{kConstruct:D$t}=fa(),{kEnumerableProperty:kB}=Pi(),{iteratorMixin:N$t,isValidHeaderName:uO,isValidHeaderValue:lXe}=X0(),{webidl:Co}=Au(),Y1e=require("node:assert"),IX=require("node:util"),Fc=Symbol("headers map"),tp=Symbol("headers map sorted");function cXe(t){return t===10||t===13||t===9||t===32}s(cXe,"isHTTPWhiteSpaceCharCode");function uXe(t){let e=0,r=t.length;for(;r>e&&cXe(t.charCodeAt(r-1));)--r;for(;r>e&&cXe(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(uXe,"headerValueNormalize");function dXe(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Co.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});K1e(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)K1e(t,r[n],e[r[n]])}else throw Co.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(dXe,"fill");function K1e(t,e,r){if(r=uXe(r),uO(e)){if(!lXe(r))throw Co.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Co.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(pXe(t)==="immutable")throw new TypeError("immutable");return J1e(t).append(e,r,!1)}s(K1e,"appendHeader");function fXe(t,e){return t[0]<e[0]?-1:1}s(fXe,"compareHeaderName");var TX=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Fc]=new Map(e[Fc]),this[tp]=e[tp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Fc]=new Map(e),this[tp]=null)}contains(e,r){return this[Fc].has(r?e:e.toLowerCase())}clear(){this[Fc].clear(),this[tp]=null,this.cookies=null}append(e,r,n){this[tp]=null;let i=n?e:e.toLowerCase(),o=this[Fc].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Fc].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[Fc].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[tp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Fc].set(i,{name:e,value:r})}delete(e,r){this[tp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Fc].delete(e)}get(e,r){return this[Fc].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[Fc])yield[e,r]}get entries(){let e={};if(this[Fc].size!==0)for(let{name:r,value:n}of this[Fc].values())e[r]=n;return e}rawValues(){return this[Fc].values()}get entriesList(){let e=[];if(this[Fc].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Fc])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[Fc].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[Fc][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],Y1e(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],Y1e(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[Fc])r[n++]=[i,o],Y1e(o!==null);return r.sort(fXe)}}},Dg=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Co.util.markAsUncloneable(this),e!==D$t&&(this.#t=new TX,this.#e="none",e!==void 0&&(e=Co.converters.HeadersInit(e,"Headers contructor","init"),dXe(this,e)))}append(e,r){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Co.converters.ByteString(e,n,"name"),r=Co.converters.ByteString(r,n,"value"),K1e(this,e,r)}delete(e){if(Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.delete"),e=Co.converters.ByteString(e,"Headers.delete","name"),!uO(e))throw Co.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Co.converters.ByteString(e,r,"name"),!uO(e))throw Co.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Co.converters.ByteString(e,r,"name"),!uO(e))throw Co.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Co.converters.ByteString(e,n,"name"),r=Co.converters.ByteString(r,n,"value"),r=uXe(r),uO(e)){if(!lXe(r))throw Co.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Co.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Co.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[tp](){if(this.#t[tp])return this.#t[tp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[tp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[tp]=e}[IX.inspect.custom](e,r){return r.depth??=e,`Headers ${IX.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:pXe,setHeadersGuard:L$t,getHeadersList:J1e,setHeadersList:M$t}=Dg;Reflect.deleteProperty(Dg,"getHeadersGuard");Reflect.deleteProperty(Dg,"setHeadersGuard");Reflect.deleteProperty(Dg,"getHeadersList");Reflect.deleteProperty(Dg,"setHeadersList");N$t("Headers",Dg,tp,0,1);Object.defineProperties(Dg.prototype,{append:kB,delete:kB,get:kB,has:kB,set:kB,getSetCookie:kB,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[IX.inspect.custom]:{enumerable:!1}});Co.converters.HeadersInit=function(t,e,r){if(Co.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!IX.types.isProxy(t)&&n===Dg.prototype.entries)try{return J1e(t).entriesList}catch{}return typeof n=="function"?Co.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Co.converters["record<ByteString, ByteString>"](t,e,r)}throw Co.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};mXe.exports={fill:dXe,compareHeaderName:fXe,Headers:Dg,HeadersList:TX,getHeadersGuard:pXe,setHeadersGuard:L$t,setHeadersList:M$t,getHeadersList:J1e}});var fO=U((aZn,IXe)=>{"use strict";d();var{Headers:EXe,HeadersList:hXe,fill:F$t,getHeadersGuard:O$t,setHeadersGuard:vXe,setHeadersList:xXe}=J2(),{extractBody:gXe,cloneBody:Q$t,mixinBody:U$t,hasFinalizationRegistry:q$t,streamRegistry:H$t,bodyUnusable:W$t}=fB(),X1e=Pi(),AXe=require("node:util"),{kEnumerableProperty:rp}=X1e,{isValidReasonPhrase:G$t,isCancelled:j$t,isAborted:V$t,isBlobLike:$$t,serializeJavascriptValueToJSONString:z$t,isErrorLike:Y$t,isomorphicEncode:K$t,environmentSettingsObject:J$t}=X0(),{redirectStatusSet:X$t,nullBodyStatus:Z$t}=BF(),{kState:Ha,kHeaders:UE}=UI(),{webidl:hi}=Au(),{FormData:ezt}=OF(),{URLSerializer:yXe}=Uf(),{kConstruct:_X}=fa(),Z1e=require("node:assert"),{types:tzt}=require("node:util"),rzt=new TextEncoder("utf-8"),X2=class t{static{s(this,"Response")}static error(){return dO(SX(),"immutable")}static json(e,r={}){hi.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=hi.converters.ResponseInit(r));let n=rzt.encode(z$t(e)),i=gXe(n),o=dO(PB({}),"response");return CXe(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){hi.argumentLengthCheck(arguments,1,"Response.redirect"),e=hi.converters.USVString(e),r=hi.converters["unsigned short"](r);let n;try{n=new URL(e,J$t.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!X$t.has(r))throw new RangeError(`Invalid status code ${r}`);let i=dO(PB({}),"immutable");i[Ha].status=r;let o=K$t(yXe(n));return i[Ha].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(hi.util.markAsUncloneable(this),e===_X)return;e!==null&&(e=hi.converters.BodyInit(e)),r=hi.converters.ResponseInit(r),this[Ha]=PB({}),this[UE]=new EXe(_X),vXe(this[UE],"response"),xXe(this[UE],this[Ha].headersList);let n=null;if(e!=null){let[i,o]=gXe(e);n={body:i,type:o}}CXe(this,r,n)}get type(){return hi.brandCheck(this,t),this[Ha].type}get url(){hi.brandCheck(this,t);let e=this[Ha].urlList,r=e[e.length-1]??null;return r===null?"":yXe(r,!0)}get redirected(){return hi.brandCheck(this,t),this[Ha].urlList.length>1}get status(){return hi.brandCheck(this,t),this[Ha].status}get ok(){return hi.brandCheck(this,t),this[Ha].status>=200&&this[Ha].status<=299}get statusText(){return hi.brandCheck(this,t),this[Ha].statusText}get headers(){return hi.brandCheck(this,t),this[UE]}get body(){return hi.brandCheck(this,t),this[Ha].body?this[Ha].body.stream:null}get bodyUsed(){return hi.brandCheck(this,t),!!this[Ha].body&&X1e.isDisturbed(this[Ha].body.stream)}clone(){if(hi.brandCheck(this,t),W$t(this))throw hi.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=eEe(this[Ha]);return dO(e,O$t(this[UE]))}[AXe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${AXe.formatWithOptions(r,n)}`}};U$t(X2);Object.defineProperties(X2.prototype,{type:rp,url:rp,status:rp,ok:rp,redirected:rp,statusText:rp,headers:rp,clone:rp,body:rp,bodyUsed:rp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(X2,{json:rp,redirect:rp,error:rp});function eEe(t){if(t.internalResponse)return bXe(eEe(t.internalResponse),t.type);let e=PB({...t,body:null});return t.body!=null&&(e.body=Q$t(e,t.body)),e}s(eEe,"cloneResponse");function PB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new hXe(t?.headersList):new hXe,urlList:t?.urlList?[...t.urlList]:[]}}s(PB,"makeResponse");function SX(t){let e=Y$t(t);return PB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(SX,"makeNetworkError");function nzt(t){return t.type==="error"&&t.status===0}s(nzt,"isNetworkError");function wX(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return Z1e(!(n in e)),r[n]=i,!0}})}s(wX,"makeFilteredResponse");function bXe(t,e){if(e==="basic")return wX(t,{type:"basic",headersList:t.headersList});if(e==="cors")return wX(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return wX(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return wX(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});Z1e(!1)}s(bXe,"filterResponse");function izt(t,e=null){return Z1e(j$t(t)),V$t(t)?SX(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):SX(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(izt,"makeAppropriateNetworkError");function CXe(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!G$t(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[Ha].status=e.status),"statusText"in e&&e.statusText!=null&&(t[Ha].statusText=e.statusText),"headers"in e&&e.headers!=null&&F$t(t[UE],e.headers),r){if(Z$t.includes(t.status))throw hi.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[Ha].body=r.body,r.type!=null&&!t[Ha].headersList.contains("content-type",!0)&&t[Ha].headersList.append("content-type",r.type,!0)}}s(CXe,"initializeResponse");function dO(t,e){let r=new X2(_X);return r[Ha]=t,r[UE]=new EXe(_X),xXe(r[UE],t.headersList),vXe(r[UE],e),q$t&&t.body?.stream&&H$t.register(r,new WeakRef(t.body.stream)),r}s(dO,"fromInnerResponse");hi.converters.ReadableStream=hi.interfaceConverter(ReadableStream);hi.converters.FormData=hi.interfaceConverter(ezt);hi.converters.URLSearchParams=hi.interfaceConverter(URLSearchParams);hi.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?hi.converters.USVString(t,e,r):$$t(t)?hi.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||tzt.isArrayBuffer(t)?hi.converters.BufferSource(t,e,r):X1e.isFormDataLike(t)?hi.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?hi.converters.URLSearchParams(t,e,r):hi.converters.DOMString(t,e,r)};hi.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?hi.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:hi.converters.XMLHttpRequestBodyInit(t,e,r)};hi.converters.ResponseInit=hi.dictionaryConverter([{key:"status",converter:hi.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:hi.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:hi.converters.HeadersInit}]);IXe.exports={isNetworkError:nzt,makeNetworkError:SX,makeResponse:PB,makeAppropriateNetworkError:izt,filterResponse:bXe,Response:X2,cloneResponse:eEe,fromInnerResponse:dO}});var SXe=U((uZn,_Xe)=>{"use strict";d();var{kConnected:TXe,kSize:wXe}=fa(),tEe=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[TXe]===0&&this.value[wXe]===0?void 0:this.value}},rEe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[TXe]===0&&e[wXe]===0&&this.finalizer(r)})}unregister(e){}};_Xe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:tEe,FinalizationRegistry:rEe}):{WeakRef,FinalizationRegistry}}});var BB=U((pZn,WXe)=>{"use strict";d();var{extractBody:ozt,mixinBody:szt,cloneBody:azt,bodyUnusable:RXe}=fB(),{Headers:OXe,fill:czt,HeadersList:BX,setHeadersGuard:iEe,getHeadersGuard:lzt,setHeadersList:QXe,getHeadersList:kXe}=J2(),{FinalizationRegistry:uzt}=SXe()(),kX=Pi(),PXe=require("node:util"),{isValidHTTPToken:dzt,sameOrigin:BXe,environmentSettingsObject:RX}=X0(),{forbiddenMethodsSet:fzt,corsSafeListedMethodsSet:pzt,referrerPolicy:mzt,requestRedirect:hzt,requestMode:gzt,requestCredentials:Azt,requestCache:yzt,requestDuplex:Czt}=BF(),{kEnumerableProperty:Oc,normalizedMethodRecordsBase:Ezt,normalizedMethodRecords:vzt}=kX,{kHeaders:np,kSignal:PX,kState:Vs,kDispatcher:nEe}=UI(),{webidl:wn}=Au(),{URLSerializer:xzt}=Uf(),{kConstruct:DX}=fa(),bzt=require("node:assert"),{getMaxListeners:DXe,setMaxListeners:NXe,getEventListeners:Izt,defaultMaxListeners:LXe}=require("node:events"),Tzt=Symbol("abortController"),UXe=new uzt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),NX=new WeakMap;function MXe(t){return e;function e(){let r=t.deref();if(r!==void 0){UXe.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=NX.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}NX.delete(r.signal)}}}}s(MXe,"buildAbort");var FXe=!1,JI=class t{static{s(this,"Request")}constructor(e,r={}){if(wn.util.markAsUncloneable(this),e===DX)return;let n="Request constructor";wn.argumentLengthCheck(arguments,1,n),e=wn.converters.RequestInfo(e,n,"input"),r=wn.converters.RequestInit(r,n,"init");let i=null,o=null,a=RX.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[nEe]=r.dispatcher;let x;try{x=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(x.username||x.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=LX({urlList:[x]}),o="cors"}else this[nEe]=r.dispatcher||e[nEe],bzt(e instanceof t),i=e[Vs],c=e[PX];let l=RX.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&BXe(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=LX({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:RX.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let x=r.referrer;if(x==="")i.referrer="no-referrer";else{let b;try{b=new URL(x,a)}catch(_){throw new TypeError(`Referrer "${x}" is not a valid URL.`,{cause:_})}b.protocol==="about:"&&b.hostname==="client"||l&&!BXe(b,RX.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw wn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let x=r.method,b=vzt[x];if(b!==void 0)i.method=b;else{if(!dzt(x))throw new TypeError(`'${x}' is not a valid HTTP method.`);let _=x.toUpperCase();if(fzt.has(_))throw new TypeError(`'${x}' HTTP method is unsupported.`);x=Ezt[_]??x,i.method=x}!FXe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),FXe=!0)}r.signal!==void 0&&(c=r.signal),this[Vs]=i;let m=new AbortController;if(this[PX]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[Tzt]=m;let x=new WeakRef(m),b=MXe(x);try{(typeof DXe=="function"&&DXe(c)===LXe||Izt(c,"abort").length>=LXe)&&NXe(1500,c)}catch{}kX.addAbortListener(c,b),UXe.register(m,{signal:c,abort:b},b)}}if(this[np]=new OXe(DX),QXe(this[np],i.headersList),iEe(this[np],"request"),p==="no-cors"){if(!pzt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);iEe(this[np],"request-no-cors")}if(f){let x=kXe(this[np]),b=r.headers!==void 0?r.headers:new BX(x);if(x.clear(),b instanceof BX){for(let{name:_,value:k}of b.rawValues())x.append(_,k,!1);x.cookies=b.cookies}else czt(this[np],b)}let h=e instanceof t?e[Vs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[x,b]=ozt(r.body,i.keepalive);g=x,b&&!kXe(this[np]).contains("content-type",!0)&&this[np].append("content-type",b)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let E=y;if(g==null&&h!=null){if(RXe(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let x=new TransformStream;h.stream.pipeThrough(x),E={source:h.source,length:h.length,stream:x.readable}}this[Vs].body=E}get method(){return wn.brandCheck(this,t),this[Vs].method}get url(){return wn.brandCheck(this,t),xzt(this[Vs].url)}get headers(){return wn.brandCheck(this,t),this[np]}get destination(){return wn.brandCheck(this,t),this[Vs].destination}get referrer(){return wn.brandCheck(this,t),this[Vs].referrer==="no-referrer"?"":this[Vs].referrer==="client"?"about:client":this[Vs].referrer.toString()}get referrerPolicy(){return wn.brandCheck(this,t),this[Vs].referrerPolicy}get mode(){return wn.brandCheck(this,t),this[Vs].mode}get credentials(){return this[Vs].credentials}get cache(){return wn.brandCheck(this,t),this[Vs].cache}get redirect(){return wn.brandCheck(this,t),this[Vs].redirect}get integrity(){return wn.brandCheck(this,t),this[Vs].integrity}get keepalive(){return wn.brandCheck(this,t),this[Vs].keepalive}get isReloadNavigation(){return wn.brandCheck(this,t),this[Vs].reloadNavigation}get isHistoryNavigation(){return wn.brandCheck(this,t),this[Vs].historyNavigation}get signal(){return wn.brandCheck(this,t),this[PX]}get body(){return wn.brandCheck(this,t),this[Vs].body?this[Vs].body.stream:null}get bodyUsed(){return wn.brandCheck(this,t),!!this[Vs].body&&kX.isDisturbed(this[Vs].body.stream)}get duplex(){return wn.brandCheck(this,t),"half"}clone(){if(wn.brandCheck(this,t),RXe(this))throw new TypeError("unusable");let e=qXe(this[Vs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=NX.get(this.signal);n===void 0&&(n=new Set,NX.set(this.signal,n));let i=new WeakRef(r);n.add(i),kX.addAbortListener(r.signal,MXe(i))}return HXe(e,r.signal,lzt(this[np]))}[PXe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${PXe.formatWithOptions(r,n)}`}};szt(JI);function LX(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new BX(t.headersList):new BX}}s(LX,"makeRequest");function qXe(t){let e=LX({...t,body:null});return t.body!=null&&(e.body=azt(e,t.body)),e}s(qXe,"cloneRequest");function HXe(t,e,r){let n=new JI(DX);return n[Vs]=t,n[PX]=e,n[np]=new OXe(DX),QXe(n[np],t.headersList),iEe(n[np],r),n}s(HXe,"fromInnerRequest");Object.defineProperties(JI.prototype,{method:Oc,url:Oc,headers:Oc,redirect:Oc,clone:Oc,signal:Oc,duplex:Oc,destination:Oc,body:Oc,bodyUsed:Oc,isHistoryNavigation:Oc,isReloadNavigation:Oc,keepalive:Oc,integrity:Oc,cache:Oc,credentials:Oc,attribute:Oc,referrerPolicy:Oc,referrer:Oc,mode:Oc,[Symbol.toStringTag]:{value:"Request",configurable:!0}});wn.converters.Request=wn.interfaceConverter(JI);wn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?wn.converters.USVString(t,e,r):t instanceof JI?wn.converters.Request(t,e,r):wn.converters.USVString(t,e,r)};wn.converters.AbortSignal=wn.interfaceConverter(AbortSignal);wn.converters.RequestInit=wn.dictionaryConverter([{key:"method",converter:wn.converters.ByteString},{key:"headers",converter:wn.converters.HeadersInit},{key:"body",converter:wn.nullableConverter(wn.converters.BodyInit)},{key:"referrer",converter:wn.converters.USVString},{key:"referrerPolicy",converter:wn.converters.DOMString,allowedValues:mzt},{key:"mode",converter:wn.converters.DOMString,allowedValues:gzt},{key:"credentials",converter:wn.converters.DOMString,allowedValues:Azt},{key:"cache",converter:wn.converters.DOMString,allowedValues:yzt},{key:"redirect",converter:wn.converters.DOMString,allowedValues:hzt},{key:"integrity",converter:wn.converters.DOMString},{key:"keepalive",converter:wn.converters.boolean},{key:"signal",converter:wn.nullableConverter(t=>wn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:wn.converters.any},{key:"duplex",converter:wn.converters.DOMString,allowedValues:Czt},{key:"dispatcher",converter:wn.converters.any}]);WXe.exports={Request:JI,makeRequest:LX,fromInnerRequest:HXe,cloneRequest:qXe}});var mO=U((gZn,iZe)=>{"use strict";d();var{makeNetworkError:Ko,makeAppropriateNetworkError:MX,filterResponse:oEe,makeResponse:FX,fromInnerResponse:wzt}=fO(),{HeadersList:GXe}=J2(),{Request:_zt,cloneRequest:Szt}=BB(),XI=require("node:zlib"),{bytesMatch:Rzt,makePolicyContainer:kzt,clonePolicyContainer:Pzt,requestBadPort:Bzt,TAOCheck:Dzt,appendRequestOriginHeader:Nzt,responseLocationURL:Lzt,requestCurrentURL:tC,setRequestReferrerPolicyOnRedirect:Mzt,tryUpgradeRequestToAPotentiallyTrustworthyURL:Fzt,createOpaqueTimingInfo:uEe,appendFetchMetadata:Ozt,corsCheck:Qzt,crossOriginResourcePolicyCheck:Uzt,determineRequestsReferrer:qzt,coarsenedSharedCurrentTime:pO,createDeferredPromise:Hzt,isBlobLike:Wzt,sameOrigin:lEe,isCancelled:Z2,isAborted:jXe,isErrorLike:Gzt,fullyReadBody:jzt,readableStreamClose:Vzt,isomorphicEncode:OX,urlIsLocal:$zt,urlIsHttpHttpsScheme:dEe,urlHasHttpsScheme:zzt,clampAndCoarsenConnectionTimingInfo:Yzt,simpleRangeHeaderValue:Kzt,buildContentRange:Jzt,createInflate:Xzt,extractMimeType:Zzt}=X0(),{kState:YXe,kDispatcher:eYt}=UI(),eR=require("node:assert"),{safelyExtractBody:fEe,extractBody:VXe}=fB(),{redirectStatusSet:KXe,nullBodyStatus:JXe,safeMethodsSet:tYt,requestBodyHeader:rYt,subresourceSet:nYt}=BF(),iYt=require("node:events"),{Readable:oYt,pipeline:sYt,finished:aYt}=require("node:stream"),{addAbortListener:cYt,isErrored:lYt,isReadable:QX,bufferToLowerCasedHeaderName:$Xe}=Pi(),{dataURLProcessor:uYt,serializeAMimeType:dYt,minimizeSupportedMimeType:fYt}=Uf(),{getGlobalDispatcher:pYt}=xX(),{webidl:mYt}=Au(),{STATUS_CODES:hYt}=require("node:http"),gYt=["GET","HEAD"],AYt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",sEe,UX=class extends iYt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function yYt(t){XXe(t,"fetch")}s(yYt,"handleFetchDone");function CYt(t,e=void 0){mYt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=Hzt(),n;try{n=new _zt(t,e)}catch(f){return r.reject(f),r.promise}let i=n[YXe];if(n.signal.aborted)return aEe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return cYt(n.signal,()=>{c=!0,eR(l!=null),l.abort(n.signal.reason);let f=a?.deref();aEe(r,i,f,n.signal.reason)}),l=eZe({request:i,processResponseEndOfBody:yYt,processResponse:s(f=>{if(!c){if(f.aborted){aEe(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(wzt(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[eYt]}),r.promise}s(CYt,"fetch");function XXe(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;dEe(r)&&n!==null&&(t.timingAllowPassed||(n=uEe({startTime:n.startTime}),i=""),n.endTime=pO(),t.timingInfo=n,ZXe(n,r.href,e,globalThis,i))}s(XXe,"finalizeAndReportTiming");var ZXe=performance.markResourceTiming;function aEe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&QX(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[YXe];i.body!=null&&QX(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(aEe,"abortFetch");function eZe({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=pYt()}){eR(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=pO(u),p=uEe({startTime:f}),m={controller:new UX(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return eR(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=Pzt(t.client.policyContainer):t.policyContainer=kzt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,nYt.has(t.destination),tZe(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(eZe,"fetching");async function tZe(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!$zt(tC(r))&&(n=Ko("local URLs only")),Fzt(r),Bzt(r)==="blocked"&&(n=Ko("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=qzt(r)),n===null&&(n=await(async()=>{let o=tC(r);return lEe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await zXe(t)):r.mode==="same-origin"?Ko('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?Ko('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await zXe(t)):dEe(tC(r))?(r.responseTainting="cors",await rZe(t)):Ko("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=oEe(n,"basic"):r.responseTainting==="cors"?n=oEe(n,"cors"):r.responseTainting==="opaque"?n=oEe(n,"opaque"):eR(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=Ko()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||JXe.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>cEe(t,Ko(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!Rzt(c,r.integrity)){o("integrity mismatch");return}n.body=fEe(c)[0],cEe(t,n)},"processBody");await jzt(n.body,a,o)}else cEe(t,n)}s(tZe,"mainFetch");function zXe(t){if(Z2(t)&&t.request.redirectCount===0)return Promise.resolve(MX(t));let{request:e}=t,{protocol:r}=tC(e);switch(r){case"about:":return Promise.resolve(Ko("about scheme is not supported"));case"blob:":{sEe||(sEe=require("node:buffer").resolveObjectURL);let n=tC(e);if(n.search.length!==0)return Promise.resolve(Ko("NetworkError when attempting to fetch resource."));let i=sEe(n.toString());if(e.method!=="GET"||!Wzt(i))return Promise.resolve(Ko("invalid method"));let o=FX(),a=i.size,c=OX(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=Kzt(u,!0);if(f==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=f;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Ko("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=VXe(h);o.body=g[0];let y=OX(`${h.size}`),E=Jzt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",E,!0)}else{let u=VXe(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=tC(e),i=uYt(n);if(i==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let o=dYt(i.mimeType);return Promise.resolve(FX({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:fEe(i.body)[0]}))}case"file:":return Promise.resolve(Ko("not implemented... yet..."));case"http:":case"https:":return rZe(t).catch(n=>Ko(n));default:return Promise.resolve(Ko("unknown scheme"))}}s(zXe,"schemeFetch");function EYt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(EYt,"finalizeResponse");function cEe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=uEe(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=Zzt(e.headersList);f!=="failure"&&(l.contentType=fYt(f))}t.request.initiatorType!=null&&ZXe(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():aYt(i.body.stream,()=>{n()})}s(cEe,"fetchFinale");async function rZe(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await nZe(t),e.responseTainting==="cors"&&Qzt(e,r)==="failure")return Ko("cors failure");Dzt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&Uzt(e.origin,e.client,e.destination,n)==="blocked"?Ko("blocked"):(KXe.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=Ko("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await vYt(t,r):eR(!1)),r.timingInfo=i,r)}s(rZe,"httpFetch");function vYt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=Lzt(n,tC(r).hash),i==null)return e}catch(a){return Promise.resolve(Ko(a))}if(!dEe(i))return Promise.resolve(Ko("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Ko("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!lEe(r,i))return Promise.resolve(Ko('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Ko('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Ko());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!gYt.includes(r.method)){r.method="GET",r.body=null;for(let a of rYt)r.headersList.delete(a)}lEe(tC(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(eR(r.body.source!=null),r.body=fEe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=pO(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),Mzt(r,n),tZe(t,!0)}s(vYt,"httpRedirectFetch");async function nZe(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=Szt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=OX(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",OX(o.referrer.href),!0),Nzt(o),Ozt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",AYt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(zzt(tC(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Ko("only if cached");let m=await xYt(i,u,r);!tYt.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?Ko():Z2(t)?MX(t):Ko("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(Z2(t))return MX(t);t.controller.connection.destroy(),a=await nZe(t,e,!0)}return a}s(nZe,"httpNetworkOrCacheFetch");async function xYt(t,e=!1,r=!1){eR(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(x){Z2(t)||(yield x,t.processRequestBodyChunkLength?.(x.byteLength))},"processBodyChunk"),y=s(()=>{Z2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),E=s(x=>{Z2(t)||(x.name==="AbortError"?t.controller.abort():t.controller.terminate(x))},"processBodyError");l=async function*(){try{for await(let x of n.body.stream)yield*g(x);y()}catch(x){E(x)}}()}try{let{body:g,status:y,statusText:E,headersList:x,socket:b}=await h({body:l});if(b)i=FX({status:y,statusText:E,headersList:x,socket:b});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=FX({status:y,statusText:E,headersList:x})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),MX(t,g)):Ko(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{Z2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:x,value:b}=await t.controller.next();if(jXe(t))break;g=x?void 0:b}catch(x){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=x,y=!0)}if(g===void 0){Vzt(t.controller.controller),EYt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let E=new Uint8Array(g);if(E.byteLength&&t.controller.controller.enqueue(E),lYt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){jXe(t)?(i.aborted=!0,QX(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):QX(p)&&t.controller.controller.error(new TypeError("terminated",{cause:Gzt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=tC(n),E=t.controller.dispatcher;return new Promise((x,b)=>E.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:E.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=Yzt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=pO(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=pO(t.crossOriginIsolatedCapability)},onHeaders(_,k,P,N){if(_<200)return;let M=[],J="",pe=new GXe;for(let ie=0;ie<k.length;ie+=2)pe.append($Xe(k[ie]),k[ie+1].toString("latin1"),!0);let Y=pe.get("content-encoding",!0);Y&&(M=Y.toLowerCase().split(",").map(ie=>ie.trim())),J=pe.get("location",!0),this.body=new oYt({read:P});let G=[],H=J&&n.redirect==="follow"&&KXe.has(_);if(M.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!JXe.includes(_)&&!H)for(let ie=M.length-1;ie>=0;--ie){let V=M[ie];if(V==="x-gzip"||V==="gzip")G.push(XI.createGunzip({flush:XI.constants.Z_SYNC_FLUSH,finishFlush:XI.constants.Z_SYNC_FLUSH}));else if(V==="deflate")G.push(Xzt({flush:XI.constants.Z_SYNC_FLUSH,finishFlush:XI.constants.Z_SYNC_FLUSH}));else if(V==="br")G.push(XI.createBrotliDecompress({flush:XI.constants.BROTLI_OPERATION_FLUSH,finishFlush:XI.constants.BROTLI_OPERATION_FLUSH}));else{G.length=0;break}}let ce=this.onError.bind(this);return x({status:_,statusText:N,headersList:pe,body:G.length?sYt(this.body,...G,ie=>{ie&&this.onError(ie)}).on("error",ce):this.body.on("error",ce)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),b(_)},onUpgrade(_,k,P){if(_!==101)return;let N=new GXe;for(let M=0;M<k.length;M+=2)N.append($Xe(k[M]),k[M+1].toString("latin1"),!0);return x({status:_,statusText:hYt[_],headersList:N,socket:P}),!0}}))}s(h,"dispatch")}s(xYt,"httpNetworkFetch");iZe.exports={fetch:CYt,Fetch:UX,fetching:eZe,finalizeAndReportTiming:XXe}});var pEe=U((CZn,oZe)=>{"use strict";d();oZe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var aZe=U((vZn,sZe)=>{"use strict";d();var{webidl:ip}=Au(),qX=Symbol("ProgressEvent state"),mEe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=ip.converters.DOMString(e,"ProgressEvent constructor","type"),r=ip.converters.ProgressEventInit(r??{}),super(e,r),this[qX]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return ip.brandCheck(this,t),this[qX].lengthComputable}get loaded(){return ip.brandCheck(this,t),this[qX].loaded}get total(){return ip.brandCheck(this,t),this[qX].total}};ip.converters.ProgressEventInit=ip.dictionaryConverter([{key:"lengthComputable",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);sZe.exports={ProgressEvent:mEe}});var lZe=U((IZn,cZe)=>{"use strict";d();function bYt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(bYt,"getEncoding");cZe.exports={getEncoding:bYt}});var AZe=U((_Zn,gZe)=>{"use strict";d();var{kState:DB,kError:hEe,kResult:uZe,kAborted:hO,kLastProgressEventFired:gEe}=pEe(),{ProgressEvent:IYt}=aZe(),{getEncoding:dZe}=lZe(),{serializeAMimeType:TYt,parseMIMEType:fZe}=Uf(),{types:wYt}=require("node:util"),{StringDecoder:pZe}=require("string_decoder"),{btoa:mZe}=require("node:buffer"),_Yt={enumerable:!0,writable:!1,configurable:!1};function SYt(t,e,r,n){if(t[DB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[DB]="loading",t[uZe]=null,t[hEe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[hO];)try{let{done:u,value:f}=await c;if(l&&!t[hO]&&queueMicrotask(()=>{ZI("loadstart",t)}),l=!1,!u&&wYt.isUint8Array(f))a.push(f),(t[gEe]===void 0||Date.now()-t[gEe]>=50)&&!t[hO]&&(t[gEe]=Date.now(),queueMicrotask(()=>{ZI("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[DB]="done";try{let p=RYt(a,r,e.type,n);if(t[hO])return;t[uZe]=p,ZI("load",t)}catch(p){t[hEe]=p,ZI("error",t)}t[DB]!=="loading"&&ZI("loadend",t)});break}}catch(u){if(t[hO])return;queueMicrotask(()=>{t[DB]="done",t[hEe]=u,ZI("error",t),t[DB]!=="loading"&&ZI("loadend",t)});break}})()}s(SYt,"readOperation");function ZI(t,e){let r=new IYt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(ZI,"fireAProgressEvent");function RYt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=fZe(r||"application/octet-stream");o!=="failure"&&(i+=TYt(o)),i+=";base64,";let a=new pZe("latin1");for(let c of t)i+=mZe(a.write(c));return i+=mZe(a.end()),i}case"Text":{let i="failure";if(n&&(i=dZe(n)),i==="failure"&&r){let o=fZe(r);o!=="failure"&&(i=dZe(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),kYt(t,i)}case"ArrayBuffer":return hZe(t).buffer;case"BinaryString":{let i="",o=new pZe("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(RYt,"packageData");function kYt(t,e){let r=hZe(t),n=PYt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(kYt,"decode");function PYt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(PYt,"BOMSniffing");function hZe(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(hZe,"combineByteSequences");gZe.exports={staticPropertyDescriptors:_Yt,readOperation:SYt,fireAProgressEvent:ZI}});var vZe=U((kZn,EZe)=>{"use strict";d();var{staticPropertyDescriptors:NB,readOperation:HX,fireAProgressEvent:yZe}=AZe(),{kState:tR,kError:CZe,kResult:WX,kEvents:Fo,kAborted:BYt}=pEe(),{webidl:is}=Au(),{kEnumerableProperty:Wf}=Pi(),Ng=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[tR]="empty",this[WX]=null,this[CZe]=null,this[Fo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=is.converters.Blob(e,{strict:!1}),HX(this,e,"ArrayBuffer")}readAsBinaryString(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=is.converters.Blob(e,{strict:!1}),HX(this,e,"BinaryString")}readAsText(e,r=void 0){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=is.converters.Blob(e,{strict:!1}),r!==void 0&&(r=is.converters.DOMString(r,"FileReader.readAsText","encoding")),HX(this,e,"Text",r)}readAsDataURL(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=is.converters.Blob(e,{strict:!1}),HX(this,e,"DataURL")}abort(){if(this[tR]==="empty"||this[tR]==="done"){this[WX]=null;return}this[tR]==="loading"&&(this[tR]="done",this[WX]=null),this[BYt]=!0,yZe("abort",this),this[tR]!=="loading"&&yZe("loadend",this)}get readyState(){switch(is.brandCheck(this,t),this[tR]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return is.brandCheck(this,t),this[WX]}get error(){return is.brandCheck(this,t),this[CZe]}get onloadend(){return is.brandCheck(this,t),this[Fo].loadend}set onloadend(e){is.brandCheck(this,t),this[Fo].loadend&&this.removeEventListener("loadend",this[Fo].loadend),typeof e=="function"?(this[Fo].loadend=e,this.addEventListener("loadend",e)):this[Fo].loadend=null}get onerror(){return is.brandCheck(this,t),this[Fo].error}set onerror(e){is.brandCheck(this,t),this[Fo].error&&this.removeEventListener("error",this[Fo].error),typeof e=="function"?(this[Fo].error=e,this.addEventListener("error",e)):this[Fo].error=null}get onloadstart(){return is.brandCheck(this,t),this[Fo].loadstart}set onloadstart(e){is.brandCheck(this,t),this[Fo].loadstart&&this.removeEventListener("loadstart",this[Fo].loadstart),typeof e=="function"?(this[Fo].loadstart=e,this.addEventListener("loadstart",e)):this[Fo].loadstart=null}get onprogress(){return is.brandCheck(this,t),this[Fo].progress}set onprogress(e){is.brandCheck(this,t),this[Fo].progress&&this.removeEventListener("progress",this[Fo].progress),typeof e=="function"?(this[Fo].progress=e,this.addEventListener("progress",e)):this[Fo].progress=null}get onload(){return is.brandCheck(this,t),this[Fo].load}set onload(e){is.brandCheck(this,t),this[Fo].load&&this.removeEventListener("load",this[Fo].load),typeof e=="function"?(this[Fo].load=e,this.addEventListener("load",e)):this[Fo].load=null}get onabort(){return is.brandCheck(this,t),this[Fo].abort}set onabort(e){is.brandCheck(this,t),this[Fo].abort&&this.removeEventListener("abort",this[Fo].abort),typeof e=="function"?(this[Fo].abort=e,this.addEventListener("abort",e)):this[Fo].abort=null}};Ng.EMPTY=Ng.prototype.EMPTY=0;Ng.LOADING=Ng.prototype.LOADING=1;Ng.DONE=Ng.prototype.DONE=2;Object.defineProperties(Ng.prototype,{EMPTY:NB,LOADING:NB,DONE:NB,readAsArrayBuffer:Wf,readAsBinaryString:Wf,readAsText:Wf,readAsDataURL:Wf,abort:Wf,readyState:Wf,result:Wf,error:Wf,onloadstart:Wf,onprogress:Wf,onload:Wf,onabort:Wf,onerror:Wf,onloadend:Wf,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Ng,{EMPTY:NB,LOADING:NB,DONE:NB});EZe.exports={FileReader:Ng}});var GX=U((DZn,xZe)=>{"use strict";d();xZe.exports={kConstruct:fa().kConstruct}});var TZe=U((LZn,IZe)=>{"use strict";d();var DYt=require("node:assert"),{URLSerializer:bZe}=Uf(),{isValidHeaderName:NYt}=X0();function LYt(t,e,r=!1){let n=bZe(t,r),i=bZe(e,r);return n===i}s(LYt,"urlEquals");function MYt(t){DYt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),NYt(r)&&e.push(r);return e}s(MYt,"getFieldValues");IZe.exports={urlEquals:LYt,getFieldValues:MYt}});var SZe=U((OZn,_Ze)=>{"use strict";d();var{kConstruct:FYt}=GX(),{urlEquals:OYt,getFieldValues:AEe}=TZe(),{kEnumerableProperty:rR,isDisturbed:QYt}=Pi(),{webidl:on}=Au(),{Response:UYt,cloneResponse:qYt,fromInnerResponse:HYt}=fO(),{Request:qE,fromInnerRequest:WYt}=BB(),{kState:Lg}=UI(),{fetching:GYt}=mO(),{urlIsHttpHttpsScheme:jX,createDeferredPromise:LB,readAllBytes:jYt}=X0(),yEe=require("node:assert"),VX=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==FYt&&on.illegalConstructor(),on.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){on.brandCheck(this,t);let n="Cache.match";on.argumentLengthCheck(arguments,1,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){on.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=on.converters.RequestInfo(e,n,"request")),r=on.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){on.brandCheck(this,t);let r="Cache.add";on.argumentLengthCheck(arguments,1,r),e=on.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){on.brandCheck(this,t);let r="Cache.addAll";on.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw on.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=on.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Lg];if(!jX(h.url)||h.method!=="GET")throw on.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new qE(m)[Lg];if(!jX(h.url))throw on.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=LB();o.push(GYt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(on.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let E=AEe(y.headersList.get("vary"));for(let x of E)if(x==="*"){g.reject(on.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let f=LB(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){on.brandCheck(this,t);let n="Cache.put";on.argumentLengthCheck(arguments,2,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.Response(r,n,"response");let i=null;if(e instanceof qE?i=e[Lg]:i=new qE(e)[Lg],!jX(i.url)||i.method!=="GET")throw on.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[Lg];if(o.status===206)throw on.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=AEe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw on.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(QYt(o.body.stream)||o.body.stream.locked))throw on.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=qYt(o),c=LB();if(o.body!=null){let g=o.body.stream.getReader();jYt(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=LB(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){on.brandCheck(this,t);let n="Cache.delete";on.argumentLengthCheck(arguments,1,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof qE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return!1}else yEe(typeof e=="string"),i=new qE(e)[Lg];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=LB(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){on.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=on.converters.RequestInfo(e,n,"request")),r=on.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof qE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new qE(e)[Lg]);let o=LB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=WYt(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw on.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);yEe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!jX(l.url))throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);yEe(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!OYt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=AEe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof qE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new qE(e)[Lg]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=HYt(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(VX.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:rR,matchAll:rR,add:rR,addAll:rR,put:rR,delete:rR,keys:rR});var wZe=[{key:"ignoreSearch",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];on.converters.CacheQueryOptions=on.dictionaryConverter(wZe);on.converters.MultiCacheQueryOptions=on.dictionaryConverter([...wZe,{key:"cacheName",converter:on.converters.DOMString}]);on.converters.Response=on.interfaceConverter(UYt);on.converters["sequence<RequestInfo>"]=on.sequenceConverter(on.converters.RequestInfo);_Ze.exports={Cache:VX}});var kZe=U((qZn,RZe)=>{"use strict";d();var{kConstruct:gO}=GX(),{Cache:$X}=SZe(),{webidl:ed}=Au(),{kEnumerableProperty:AO}=Pi(),zX=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==gO&&ed.illegalConstructor(),ed.util.markAsUncloneable(this)}async match(e,r={}){if(ed.brandCheck(this,t),ed.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=ed.converters.RequestInfo(e),r=ed.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new $X(gO,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new $X(gO,n).match(e,r);if(o!==void 0)return o}}async has(e){ed.brandCheck(this,t);let r="CacheStorage.has";return ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){ed.brandCheck(this,t);let r="CacheStorage.open";if(ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new $X(gO,i)}let n=[];return this.#e.set(e,n),new $X(gO,n)}async delete(e){ed.brandCheck(this,t);let r="CacheStorage.delete";return ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return ed.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(zX.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:AO,has:AO,open:AO,delete:AO,keys:AO});RZe.exports={CacheStorage:zX}});var BZe=U((GZn,PZe)=>{"use strict";d();PZe.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var CEe=U((VZn,FZe)=>{"use strict";d();function VYt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(VYt,"isCTLExcludingHtab");function DZe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(DZe,"validateCookieName");function NZe(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(NZe,"validateCookieValue");function LZe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(LZe,"validateCookiePath");function $Yt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s($Yt,"validateCookieDomain");var zYt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],YYt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],YX=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function MZe(t){return typeof t=="number"&&(t=new Date(t)),`${zYt[t.getUTCDay()]}, ${YX[t.getUTCDate()]} ${YYt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${YX[t.getUTCHours()]}:${YX[t.getUTCMinutes()]}:${YX[t.getUTCSeconds()]} GMT`}s(MZe,"toIMFDate");function KYt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(KYt,"validateCookieMaxAge");function JYt(t){if(t.name.length===0)return null;DZe(t.name),NZe(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(KYt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&($Yt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(LZe(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${MZe(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(JYt,"stringify");FZe.exports={isCTLExcludingHtab:VYt,validateCookieName:DZe,validateCookiePath:LZe,validateCookieValue:NZe,toIMFDate:MZe,stringify:JYt}});var QZe=U((YZn,OZe)=>{"use strict";d();var{maxNameValuePairSize:XYt,maxAttributeValueSize:ZYt}=BZe(),{isCTLExcludingHtab:eKt}=CEe(),{collectASequenceOfCodePointsFast:KX}=Uf(),tKt=require("node:assert");function rKt(t){if(eKt(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=KX(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=KX("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>XYt?null:{name:n,value:i,...MB(r)}}s(rKt,"parseSetCookie");function MB(t,e={}){if(t.length===0)return e;tKt(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=KX(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=KX("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>ZYt)return MB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return MB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return MB(t,e)}s(MB,"parseUnparsedAttributes");OZe.exports={parseSetCookie:rKt,parseUnparsedAttributes:MB}});var HZe=U((XZn,qZe)=>{"use strict";d();var{parseSetCookie:nKt}=QZe(),{stringify:iKt}=CEe(),{webidl:Zi}=Au(),{Headers:JX}=J2();function oKt(t){Zi.argumentLengthCheck(arguments,1,"getCookies"),Zi.brandCheck(t,JX,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(oKt,"getCookies");function sKt(t,e,r){Zi.brandCheck(t,JX,{strict:!1});let n="deleteCookie";Zi.argumentLengthCheck(arguments,2,n),e=Zi.converters.DOMString(e,n,"name"),r=Zi.converters.DeleteCookieAttributes(r),UZe(t,{name:e,value:"",expires:new Date(0),...r})}s(sKt,"deleteCookie");function aKt(t){Zi.argumentLengthCheck(arguments,1,"getSetCookies"),Zi.brandCheck(t,JX,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>nKt(r)):[]}s(aKt,"getSetCookies");function UZe(t,e){Zi.argumentLengthCheck(arguments,2,"setCookie"),Zi.brandCheck(t,JX,{strict:!1}),e=Zi.converters.Cookie(e);let r=iKt(e);r&&t.append("Set-Cookie",r)}s(UZe,"setCookie");Zi.converters.DeleteCookieAttributes=Zi.dictionaryConverter([{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Zi.converters.Cookie=Zi.dictionaryConverter([{converter:Zi.converters.DOMString,key:"name"},{converter:Zi.converters.DOMString,key:"value"},{converter:Zi.nullableConverter(t=>typeof t=="number"?Zi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Zi.sequenceConverter(Zi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);qZe.exports={getCookies:oKt,deleteCookie:sKt,getSetCookies:aKt,setCookie:UZe}});var OB=U((tei,GZe)=>{"use strict";d();var{webidl:Jr}=Au(),{kEnumerableProperty:Gf}=Pi(),{kConstruct:WZe}=fa(),{MessagePort:cKt}=require("node:worker_threads"),FB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===WZe){super(arguments[1],arguments[2]),Jr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";Jr.argumentLengthCheck(arguments,1,n),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,Jr.util.markAsUncloneable(this)}get data(){return Jr.brandCheck(this,t),this.#e.data}get origin(){return Jr.brandCheck(this,t),this.#e.origin}get lastEventId(){return Jr.brandCheck(this,t),this.#e.lastEventId}get source(){return Jr.brandCheck(this,t),this.#e.source}get ports(){return Jr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return Jr.brandCheck(this,t),Jr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(WZe,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:lKt}=FB;delete FB.createFastMessageEvent;var XX=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";Jr.argumentLengthCheck(arguments,1,n),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.CloseEventInit(r),super(e,r),this.#e=r,Jr.util.markAsUncloneable(this)}get wasClean(){return Jr.brandCheck(this,t),this.#e.wasClean}get code(){return Jr.brandCheck(this,t),this.#e.code}get reason(){return Jr.brandCheck(this,t),this.#e.reason}},ZX=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";Jr.argumentLengthCheck(arguments,1,n),super(e,r),Jr.util.markAsUncloneable(this),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return Jr.brandCheck(this,t),this.#e.message}get filename(){return Jr.brandCheck(this,t),this.#e.filename}get lineno(){return Jr.brandCheck(this,t),this.#e.lineno}get colno(){return Jr.brandCheck(this,t),this.#e.colno}get error(){return Jr.brandCheck(this,t),this.#e.error}};Object.defineProperties(FB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Gf,origin:Gf,lastEventId:Gf,source:Gf,ports:Gf,initMessageEvent:Gf});Object.defineProperties(XX.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Gf,code:Gf,wasClean:Gf});Object.defineProperties(ZX.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Gf,filename:Gf,lineno:Gf,colno:Gf,error:Gf});Jr.converters.MessagePort=Jr.interfaceConverter(cKt);Jr.converters["sequence<MessagePort>"]=Jr.sequenceConverter(Jr.converters.MessagePort);var EEe=[{key:"bubbles",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Jr.converters.MessageEventInit=Jr.dictionaryConverter([...EEe,{key:"data",converter:Jr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Jr.nullableConverter(Jr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Jr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Jr.converters.CloseEventInit=Jr.dictionaryConverter([...EEe,{key:"wasClean",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Jr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Jr.converters.ErrorEventInit=Jr.dictionaryConverter([...EEe,{key:"message",converter:Jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Jr.converters.any}]);GZe.exports={MessageEvent:FB,CloseEvent:XX,ErrorEvent:ZX,createFastMessageEvent:lKt}});var nR=U((iei,jZe)=>{"use strict";d();var uKt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",dKt={enumerable:!0,writable:!1,configurable:!1},fKt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},pKt={NOT_SENT:0,PROCESSING:1,SENT:2},mKt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},hKt=2**16-1,gKt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},AKt=Buffer.allocUnsafe(0),yKt={string:1,typedArray:2,arrayBuffer:3,blob:4};jZe.exports={uid:uKt,sentCloseFrameState:pKt,staticPropertyDescriptors:dKt,states:fKt,opcodes:mKt,maxUnsigned16Bit:hKt,parserStates:gKt,emptyBuffer:AKt,sendHints:yKt}});var yO=U((sei,VZe)=>{"use strict";d();VZe.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var vO=U((cei,tet)=>{"use strict";d();var{kReadyState:CO,kController:CKt,kResponse:EKt,kBinaryType:vKt,kWebSocketURL:xKt}=yO(),{states:EO,opcodes:eT}=nR(),{ErrorEvent:bKt,createFastMessageEvent:IKt}=OB(),{isUtf8:TKt}=require("node:buffer"),{collectASequenceOfCodePointsFast:wKt,removeHTTPWhitespace:$Ze}=Uf();function _Kt(t){return t[CO]===EO.CONNECTING}s(_Kt,"isConnecting");function SKt(t){return t[CO]===EO.OPEN}s(SKt,"isEstablished");function RKt(t){return t[CO]===EO.CLOSING}s(RKt,"isClosing");function kKt(t){return t[CO]===EO.CLOSED}s(kKt,"isClosed");function vEe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(vEe,"fireEvent");function PKt(t,e,r){if(t[CO]!==EO.OPEN)return;let n;if(e===eT.TEXT)try{n=eet(r)}catch{YZe(t,"Received invalid UTF-8 in text frame.");return}else e===eT.BINARY&&(t[vKt]==="blob"?n=new Blob([r]):n=BKt(r));vEe("message",t,IKt,{origin:t[xKt].origin,data:n})}s(PKt,"websocketMessageReceived");function BKt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(BKt,"toArrayBuffer");function DKt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(DKt,"isValidSubprotocol");function NKt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(NKt,"isValidStatusCode");function YZe(t,e){let{[CKt]:r,[EKt]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&vEe("error",t,(i,o)=>new bKt(i,o),{error:new Error(e),message:e})}s(YZe,"failWebsocketConnection");function KZe(t){return t===eT.CLOSE||t===eT.PING||t===eT.PONG}s(KZe,"isControlFrame");function JZe(t){return t===eT.CONTINUATION}s(JZe,"isContinuationFrame");function XZe(t){return t===eT.TEXT||t===eT.BINARY}s(XZe,"isTextBinaryFrame");function LKt(t){return XZe(t)||JZe(t)||KZe(t)}s(LKt,"isValidOpcode");function MKt(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=wKt(";",t,e),[i,o=""]=n.split("=");r.set($Ze(i,!0,!1),$Ze(o,!1,!0)),e.position++}return r}s(MKt,"parseExtensions");function FKt(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(FKt,"isValidClientWindowBits");var ZZe=typeof process.versions.icu=="string",zZe=ZZe?new TextDecoder("utf-8",{fatal:!0}):void 0,eet=ZZe?zZe.decode.bind(zZe):function(t){if(TKt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};tet.exports={isConnecting:_Kt,isEstablished:SKt,isClosing:RKt,isClosed:kKt,fireEvent:vEe,isValidSubprotocol:DKt,isValidStatusCode:NKt,failWebsocketConnection:YZe,websocketMessageReceived:PKt,utf8Decode:eet,isControlFrame:KZe,isContinuationFrame:JZe,isTextBinaryFrame:XZe,isValidOpcode:LKt,parseExtensions:MKt,isValidClientWindowBits:FKt}});var tZ=U((dei,ret)=>{"use strict";d();var{maxUnsigned16Bit:OKt}=nR(),eZ=16386,xEe,xO=null,QB=eZ;try{xEe=require("node:crypto")}catch{xEe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function QKt(){return QB===eZ&&(QB=0,xEe.randomFillSync(xO??=Buffer.allocUnsafe(eZ),0,eZ)),[xO[QB++],xO[QB++],xO[QB++],xO[QB++]]}s(QKt,"generateMask");var bEe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=QKt(),i=r?.byteLength??0,o=i,a=6;i>OKt?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};ret.exports={WebsocketFrameSend:bEe}});var TEe=U((mei,uet)=>{"use strict";d();var{uid:UKt,states:bO,sentCloseFrameState:rZ,emptyBuffer:qKt,opcodes:HKt}=nR(),{kReadyState:IO,kSentClose:nZ,kByteParser:iet,kReceivedClose:net,kResponse:oet}=yO(),{fireEvent:WKt,failWebsocketConnection:tT,isClosing:GKt,isClosed:jKt,isEstablished:VKt,parseExtensions:$Kt}=vO(),{channels:UB}=Z3(),{CloseEvent:zKt}=OB(),{makeRequest:YKt}=BB(),{fetching:KKt}=mO(),{Headers:JKt,getHeadersList:XKt}=J2(),{getDecodeSplit:ZKt}=X0(),{WebsocketFrameSend:eJt}=tZ(),IEe;try{IEe=require("node:crypto")}catch{}function tJt(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=YKt({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=XKt(new JKt(o.headers));c.headersList=p}let l=IEe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),KKt({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){tT(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){tT(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){tT(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){tT(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=IEe.createHash("sha1").update(l+UKt).digest("base64");if(m!==h){tT(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=$Kt(g),!y.has("permessage-deflate"))){tT(n,"Sec-WebSocket-Extensions header does not match.");return}let E=p.headersList.get("Sec-WebSocket-Protocol");if(E!==null&&!ZKt("sec-websocket-protocol",c.headersList).includes(E)){tT(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",set),p.socket.on("close",aet),p.socket.on("error",cet),UB.open.hasSubscribers&&UB.open.publish({address:p.socket.address(),protocol:E,extensions:g}),i(p,y)}})}s(tJt,"establishWebSocketConnection");function rJt(t,e,r,n){if(!(GKt(t)||jKt(t)))if(!VKt(t))tT(t,"Connection was closed before it was established."),t[IO]=bO.CLOSING;else if(t[nZ]===rZ.NOT_SENT){t[nZ]=rZ.PROCESSING;let i=new eJt;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=qKt,t[oet].socket.write(i.createFrame(HKt.CLOSE)),t[nZ]=rZ.SENT,t[IO]=bO.CLOSING}else t[IO]=bO.CLOSING}s(rJt,"closeWebSocketConnection");function set(t){this.ws[iet].write(t)||this.pause()}s(set,"onSocketData");function aet(){let{ws:t}=this,{[oet]:e}=t;e.socket.off("data",set),e.socket.off("close",aet),e.socket.off("error",cet);let r=t[nZ]===rZ.SENT&&t[net],n=1005,i="",o=t[iet].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[net]||(n=1006),t[IO]=bO.CLOSED,WKt("close",t,(a,c)=>new zKt(a,c),{wasClean:r,code:n,reason:i}),UB.close.hasSubscribers&&UB.close.publish({websocket:t,code:n,reason:i})}s(aet,"onSocketClose");function cet(t){let{ws:e}=this;e[IO]=bO.CLOSING,UB.socketError.hasSubscribers&&UB.socketError.publish(t),this.destroy()}s(cet,"onSocketError");uet.exports={establishWebSocketConnection:tJt,closeWebSocketConnection:rJt}});var fet=U((Aei,det)=>{"use strict";d();var{createInflateRaw:nJt,Z_DEFAULT_WINDOWBITS:iJt}=require("node:zlib"),{isValidClientWindowBits:oJt}=vO(),sJt=Buffer.from([0,0,255,255]),iZ=Symbol("kBuffer"),oZ=Symbol("kLength"),wEe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=iJt;if(this.#t.serverMaxWindowBits){if(!oJt(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=nJt({windowBits:i}),this.#e[iZ]=[],this.#e[oZ]=0,this.#e.on("data",o=>{this.#e[iZ].push(o),this.#e[oZ]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(sJt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[iZ],this.#e[oZ]);this.#e[iZ].length=0,this.#e[oZ]=0,n(null,i)})}};det.exports={PerMessageDeflate:wEe}});var bet=U((Eei,xet)=>{"use strict";d();var{Writable:aJt}=require("node:stream"),cJt=require("node:assert"),{parserStates:jf,opcodes:qB,states:lJt,emptyBuffer:pet,sentCloseFrameState:met}=nR(),{kReadyState:uJt,kSentClose:het,kResponse:get,kReceivedClose:Aet}=yO(),{channels:sZ}=Z3(),{isValidStatusCode:dJt,isValidOpcode:fJt,failWebsocketConnection:Gm,websocketMessageReceived:yet,utf8Decode:pJt,isControlFrame:Cet,isTextBinaryFrame:_Ee,isContinuationFrame:mJt}=vO(),{WebsocketFrameSend:Eet}=tZ(),{closeWebSocketConnection:vet}=TEe(),{PerMessageDeflate:hJt}=fet(),SEe=class extends aJt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=jf.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new hJt(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===jf.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==qB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!fJt(i))return Gm(this.ws,"Invalid opcode received"),e();if(o)return Gm(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){Gm(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){Gm(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!_Ee(i)){Gm(this.ws,"Invalid frame type was fragmented.");return}if(_Ee(i)&&this.#o.length>0){Gm(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){Gm(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&Cet(i)){Gm(this.ws,"Control frame either too large or fragmented");return}if(mJt(i)&&this.#o.length===0&&!this.#r.compressed){Gm(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=jf.READ_DATA):c===126?this.#n=jf.PAYLOADLENGTH_16:c===127&&(this.#n=jf.PAYLOADLENGTH_64),_Ee(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===jf.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=jf.READ_DATA}else if(this.#n===jf.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Gm(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=jf.READ_DATA}else if(this.#n===jf.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(Cet(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=jf.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){vet(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=jf.INFO,this.#i=!0,this.run(e);return}yet(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=jf.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);yet(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=jf.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return pet;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){cJt(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!dJt(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=pJt(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===qB.CLOSE){if(n===1)return Gm(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return vet(this.ws,i,o,o.length),Gm(this.ws,o),!1}if(this.ws[het]!==met.SENT){let i=pet;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new Eet(i);this.ws[get].socket.write(o.createFrame(qB.CLOSE),a=>{a||(this.ws[het]=met.SENT)})}return this.ws[uJt]=lJt.CLOSING,this.ws[Aet]=!0,!1}else if(r===qB.PING){if(!this.ws[Aet]){let i=new Eet(e);this.ws[get].socket.write(i.createFrame(qB.PONG)),sZ.ping.hasSubscribers&&sZ.ping.publish({payload:e})}}else r===qB.PONG&&sZ.pong.hasSubscribers&&sZ.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};xet.exports={ByteParser:SEe}});var Ret=U((bei,_et)=>{"use strict";d();var{WebsocketFrameSend:gJt}=tZ(),{opcodes:Iet,sendHints:HB}=nR(),AJt=UCe(),Tet=Buffer[Symbol.species],REe=class{static{s(this,"SendQueue")}#e=new AJt;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==HB.blob){let o=wet(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=wet(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function wet(t,e){return new gJt(yJt(t,e)).createFrame(e===HB.string?Iet.TEXT:Iet.BINARY)}s(wet,"createFrame");function yJt(t,e){switch(e){case HB.string:return Buffer.from(t);case HB.arrayBuffer:case HB.blob:return new Tet(t);case HB.typedArray:return new Tet(t.buffer,t.byteOffset,t.byteLength)}}s(yJt,"toBuffer");_et.exports={SendQueue:REe}});var Oet=U((wei,Fet)=>{"use strict";d();var{webidl:$n}=Au(),{URLSerializer:CJt}=Uf(),{environmentSettingsObject:ket}=X0(),{staticPropertyDescriptors:rT,states:TO,sentCloseFrameState:EJt,sendHints:aZ}=nR(),{kWebSocketURL:Pet,kReadyState:kEe,kController:vJt,kBinaryType:cZ,kResponse:Bet,kSentClose:xJt,kByteParser:bJt}=yO(),{isConnecting:IJt,isEstablished:TJt,isClosing:wJt,isValidSubprotocol:_Jt,fireEvent:Det}=vO(),{establishWebSocketConnection:SJt,closeWebSocketConnection:Net}=TEe(),{ByteParser:RJt}=bet(),{kEnumerableProperty:jm,isBlobLike:Let}=Pi(),{getGlobalDispatcher:kJt}=xX(),{types:Met}=require("node:util"),{ErrorEvent:PJt,CloseEvent:BJt}=OB(),{SendQueue:DJt}=Ret(),op=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),$n.util.markAsUncloneable(this);let n="WebSocket constructor";$n.argumentLengthCheck(arguments,1,n);let i=$n.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=$n.converters.USVString(e,n,"url"),r=i.protocols;let o=ket.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>_Jt(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[Pet]=new URL(a.href);let c=ket.settingsObject;this[vJt]=SJt(a,r,c,this,(l,u)=>this.#o(l,u),i),this[kEe]=t.CONNECTING,this[xJt]=EJt.NOT_SENT,this[cZ]="blob"}close(e=void 0,r=void 0){$n.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=$n.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=$n.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");Net(this,e,r,i)}send(e){$n.brandCheck(this,t);let r="WebSocket.send";if($n.argumentLengthCheck(arguments,1,r),e=$n.converters.WebSocketSendData(e,r,"data"),IJt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!TJt(this)||wJt(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},aZ.string)}else Met.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},aZ.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},aZ.typedArray)):Let(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},aZ.blob))}get readyState(){return $n.brandCheck(this,t),this[kEe]}get bufferedAmount(){return $n.brandCheck(this,t),this.#t}get url(){return $n.brandCheck(this,t),CJt(this[Pet])}get extensions(){return $n.brandCheck(this,t),this.#n}get protocol(){return $n.brandCheck(this,t),this.#i}get onopen(){return $n.brandCheck(this,t),this.#e.open}set onopen(e){$n.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return $n.brandCheck(this,t),this.#e.error}set onerror(e){$n.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return $n.brandCheck(this,t),this.#e.close}set onclose(e){$n.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return $n.brandCheck(this,t),this.#e.message}set onmessage(e){$n.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return $n.brandCheck(this,t),this[cZ]}set binaryType(e){$n.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[cZ]="blob":this[cZ]=e}#o(e,r){this[Bet]=e;let n=new RJt(this,r);n.on("drain",NJt),n.on("error",LJt.bind(this)),e.socket.ws=this,this[bJt]=n,this.#r=new DJt(e.socket),this[kEe]=TO.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),Det("open",this)}};op.CONNECTING=op.prototype.CONNECTING=TO.CONNECTING;op.OPEN=op.prototype.OPEN=TO.OPEN;op.CLOSING=op.prototype.CLOSING=TO.CLOSING;op.CLOSED=op.prototype.CLOSED=TO.CLOSED;Object.defineProperties(op.prototype,{CONNECTING:rT,OPEN:rT,CLOSING:rT,CLOSED:rT,url:jm,readyState:jm,bufferedAmount:jm,onopen:jm,onerror:jm,onclose:jm,close:jm,onmessage:jm,binaryType:jm,send:jm,extensions:jm,protocol:jm,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(op,{CONNECTING:rT,OPEN:rT,CLOSING:rT,CLOSED:rT});$n.converters["sequence<DOMString>"]=$n.sequenceConverter($n.converters.DOMString);$n.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return $n.util.Type(t)==="Object"&&Symbol.iterator in t?$n.converters["sequence<DOMString>"](t):$n.converters.DOMString(t,e,r)};$n.converters.WebSocketInit=$n.dictionaryConverter([{key:"protocols",converter:$n.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:$n.converters.any,defaultValue:s(()=>kJt(),"defaultValue")},{key:"headers",converter:$n.nullableConverter($n.converters.HeadersInit)}]);$n.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return $n.util.Type(t)==="Object"&&!(Symbol.iterator in t)?$n.converters.WebSocketInit(t):{protocols:$n.converters["DOMString or sequence<DOMString>"](t)}};$n.converters.WebSocketSendData=function(t){if($n.util.Type(t)==="Object"){if(Let(t))return $n.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||Met.isArrayBuffer(t))return $n.converters.BufferSource(t)}return $n.converters.USVString(t)};function NJt(){this.ws[Bet].socket.resume()}s(NJt,"onParserDrain");function LJt(t){let e,r;t instanceof BJt?(e=t.reason,r=t.code):e=t.message,Det("error",this,()=>new PJt("error",{error:t,message:e})),Net(this,r)}s(LJt,"onParserError");Fet.exports={WebSocket:op}});var PEe=U((Rei,Qet)=>{"use strict";d();function MJt(t){return t.indexOf("\0")===-1}s(MJt,"isValidLastEventId");function FJt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(FJt,"isASCIINumber");function OJt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(OJt,"delay");Qet.exports={isValidLastEventId:MJt,isASCIINumber:FJt,delay:OJt}});var Wet=U((Bei,Het)=>{"use strict";d();var{Transform:QJt}=require("node:stream"),{isASCIINumber:Uet,isValidLastEventId:qet}=PEe(),HE=[239,187,191],BEe=10,lZ=13,UJt=58,qJt=32,DEe=class extends QJt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===HE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===HE[0]&&this.buffer[1]===HE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===HE[0]&&this.buffer[1]===HE[1]&&this.buffer[2]===HE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===HE[0]&&this.buffer[1]===HE[1]&&this.buffer[2]===HE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===BEe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===BEe||this.buffer[this.pos]===lZ){this.buffer[this.pos]===lZ&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===BEe||this.buffer[this.pos]===lZ){this.buffer[this.pos]===lZ&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(UJt);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===qJt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":Uet(o)&&(r[i]=o);break;case"id":qet(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&Uet(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&qet(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Het.exports={EventSourceStream:DEe}});var Jet=U((Lei,Ket)=>{"use strict";d();var{pipeline:HJt}=require("node:stream"),{fetching:WJt}=mO(),{makeRequest:GJt}=BB(),{webidl:WE}=Au(),{EventSourceStream:jJt}=Wet(),{parseMIMEType:VJt}=Uf(),{createFastMessageEvent:$Jt}=OB(),{isNetworkError:Get}=fO(),{delay:zJt}=PEe(),{kEnumerableProperty:iR}=Pi(),{environmentSettingsObject:jet}=X0(),Vet=!1,$et=3e3,wO=0,zet=1,_O=2,YJt="anonymous",KJt="use-credentials",WB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=wO;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),WE.util.markAsUncloneable(this);let n="EventSource constructor";WE.argumentLengthCheck(arguments,1,n),Vet||(Vet=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=WE.converters.USVString(e,n,"url"),r=WE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:$et};let i=jet,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=YJt;r.withCredentials&&(a=KJt,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=jet.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=GJt(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===_O)return;this.#n=wO;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{Get(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(Get(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?VJt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=zet,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new jJt({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent($Jt(l.type,l.options))},"push")});HJt(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=WJt(e)}async#l(){this.#n!==_O&&(this.#n=wO,this.dispatchEvent(new Event("error")),await zJt(this.#a.reconnectionTime),this.#n===wO&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){WE.brandCheck(this,t),this.#n!==_O&&(this.#n=_O,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Yet={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:wO,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:zet,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:_O,writable:!1}};Object.defineProperties(WB,Yet);Object.defineProperties(WB.prototype,Yet);Object.defineProperties(WB.prototype,{close:iR,onerror:iR,onmessage:iR,onopen:iR,readyState:iR,url:iR,withCredentials:iR});WE.converters.EventSourceInitDict=WE.dictionaryConverter([{key:"withCredentials",converter:WE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:WE.converters.any}]);Ket.exports={EventSource:WB,defaultReconnectionTime:$et}});var ttt=U((Oei,Ln)=>{"use strict";d();var JJt=JF(),Xet=RF(),XJt=CB(),ZJt=nKe(),eXt=EB(),tXt=i1e(),rXt=EKe(),nXt=wKe(),Zet=Mo(),dZ=Pi(),{InvalidArgumentError:uZ}=Zet,GB=fJe(),iXt=PF(),oXt=Q1e(),sXt=$Je(),aXt=H1e(),cXt=w1e(),lXt=fX(),{getGlobalDispatcher:ett,setGlobalDispatcher:uXt}=xX(),dXt=bX(),fXt=eX(),pXt=tX();Object.assign(Xet.prototype,GB);Ln.exports.Dispatcher=Xet;Ln.exports.Client=JJt;Ln.exports.Pool=XJt;Ln.exports.BalancedPool=ZJt;Ln.exports.Agent=eXt;Ln.exports.ProxyAgent=tXt;Ln.exports.EnvHttpProxyAgent=rXt;Ln.exports.RetryAgent=nXt;Ln.exports.RetryHandler=lXt;Ln.exports.DecoratorHandler=dXt;Ln.exports.RedirectHandler=fXt;Ln.exports.createRedirectInterceptor=pXt;Ln.exports.interceptors={redirect:eXe(),retry:rXe(),dump:iXe(),dns:aXe()};Ln.exports.buildConnector=iXt;Ln.exports.errors=Zet;Ln.exports.util={parseHeaders:dZ.parseHeaders,headerNameToString:dZ.headerNameToString};function SO(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new uZ("invalid url");if(r!=null&&typeof r!="object")throw new uZ("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new uZ("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(dZ.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=dZ.parseURL(e);let{agent:i,dispatcher:o=ett()}=r;if(i)throw new uZ("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(SO,"makeDispatcher");Ln.exports.setGlobalDispatcher=uXt;Ln.exports.getGlobalDispatcher=ett;var mXt=mO().fetch;Ln.exports.fetch=s(async function(e,r=void 0){try{return await mXt(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Ln.exports.Headers=J2().Headers;Ln.exports.Response=fO().Response;Ln.exports.Request=BB().Request;Ln.exports.FormData=OF().FormData;Ln.exports.File=globalThis.File??require("node:buffer").File;Ln.exports.FileReader=vZe().FileReader;var{setGlobalOrigin:hXt,getGlobalOrigin:gXt}=oCe();Ln.exports.setGlobalOrigin=hXt;Ln.exports.getGlobalOrigin=gXt;var{CacheStorage:AXt}=kZe(),{kConstruct:yXt}=GX();Ln.exports.caches=new AXt(yXt);var{deleteCookie:CXt,getCookies:EXt,getSetCookies:vXt,setCookie:xXt}=HZe();Ln.exports.deleteCookie=CXt;Ln.exports.getCookies=EXt;Ln.exports.getSetCookies=vXt;Ln.exports.setCookie=xXt;var{parseMIMEType:bXt,serializeAMimeType:IXt}=Uf();Ln.exports.parseMIMEType=bXt;Ln.exports.serializeAMimeType=IXt;var{CloseEvent:TXt,ErrorEvent:wXt,MessageEvent:_Xt}=OB();Ln.exports.WebSocket=Oet().WebSocket;Ln.exports.CloseEvent=TXt;Ln.exports.ErrorEvent=wXt;Ln.exports.MessageEvent=_Xt;Ln.exports.request=SO(GB.request);Ln.exports.stream=SO(GB.stream);Ln.exports.pipeline=SO(GB.pipeline);Ln.exports.connect=SO(GB.connect);Ln.exports.upgrade=SO(GB.upgrade);Ln.exports.MockClient=oXt;Ln.exports.MockPool=aXt;Ln.exports.MockAgent=sXt;Ln.exports.mockErrors=cXt;var{EventSource:SXt}=Jet();Ln.exports.EventSource=SXt});var xi=U((qei,rtt)=>{d();rtt.exports={options:{usePureJavaScript:!1}}});var ott=U((Wei,itt)=>{d();var NEe={};itt.exports=NEe;var ntt={};NEe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=RXt(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};NEe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=ntt[e];if(!r){r=ntt[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function RXt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(RXt,"_encodeWithByteBuffer")});var So=U((Vei,ltt)=>{d();var stt=xi(),att=ott(),Pe=ltt.exports=stt.util=stt.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Pe.nextTick=process.nextTick,typeof setImmediate=="function"?Pe.setImmediate=setImmediate:Pe.setImmediate=Pe.nextTick;return}if(typeof setImmediate=="function"){Pe.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Pe.nextTick=function(c){return setImmediate(c)};return}if(Pe.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Pe.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Pe.setImmediate;Pe.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Pe.nextTick=Pe.setImmediate})();Pe.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Pe.globalScope=function(){return Pe.isNodejs?global:typeof self>"u"?window:self}();Pe.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Pe.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Pe.isArrayBufferView=function(t){return t&&Pe.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function RO(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(RO,"_checkBitsParam");Pe.ByteBuffer=LEe;function LEe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Pe.isArrayBuffer(t)||Pe.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof LEe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(LEe,"ByteStringBuffer");Pe.ByteStringBuffer=LEe;var kXt=4096;Pe.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>kXt&&(this.data.substr(0,1),this._constructedStringLength=0)};Pe.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Pe.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Pe.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Pe.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Pe.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Pe.encodeUtf8(t))};Pe.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Pe.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Pe.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Pe.ByteStringBuffer.prototype.putInt=function(t,e){RO(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Pe.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Pe.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Pe.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt=function(t){RO(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Pe.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Pe.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Pe.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Pe.ByteStringBuffer.prototype.copy=function(){var t=Pe.createBuffer(this.data);return t.read=this.read,t};Pe.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Pe.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Pe.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Pe.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.ByteStringBuffer.prototype.toString=function(){return Pe.decodeUtf8(this.bytes())};function PXt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Pe.isArrayBuffer(t),n=Pe.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(PXt,"DataBuffer");Pe.DataBuffer=PXt;Pe.DataBuffer.prototype.length=function(){return this.write-this.read};Pe.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Pe.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Pe.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Pe.DataBuffer.prototype.putBytes=function(t,e){if(Pe.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Pe.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Pe.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Pe.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Pe.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Pe.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Pe.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Pe.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Pe.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Pe.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Pe.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Pe.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Pe.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Pe.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Pe.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Pe.DataBuffer.prototype.putInt=function(t,e){RO(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Pe.DataBuffer.prototype.putSignedInt=function(t,e){return RO(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Pe.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Pe.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Pe.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Pe.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Pe.DataBuffer.prototype.getInt=function(t){RO(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Pe.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Pe.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Pe.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Pe.DataBuffer.prototype.copy=function(){return new Pe.DataBuffer(this)};Pe.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Pe.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Pe.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Pe.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Pe.binary.raw.encode(e);if(t==="hex")return Pe.binary.hex.encode(e);if(t==="base64")return Pe.binary.base64.encode(e);if(t==="utf8")return Pe.text.utf8.decode(e);if(t==="utf16")return Pe.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Pe.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Pe.encodeUtf8(t)),new Pe.ByteBuffer(t)};Pe.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Pe.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Pe.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Pe.bytesToHex=function(t){return Pe.createBuffer(t).toHex()};Pe.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var nT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",iT=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],ctt="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Pe.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=nT.charAt(i>>2),r+=nT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=nT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":nT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=iT[t.charCodeAt(a++)-43],n=iT[t.charCodeAt(a++)-43],i=iT[t.charCodeAt(a++)-43],o=iT[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Pe.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Pe.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Pe.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:att.encode,decode:att.decode}};Pe.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Pe.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.binary.hex.encode=Pe.bytesToHex;Pe.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Pe.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=nT.charAt(i>>2),r+=nT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=nT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":nT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=iT[t.charCodeAt(l++)-43],o=iT[t.charCodeAt(l++)-43],a=iT[t.charCodeAt(l++)-43],c=iT[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Pe.binary.base58.encode=function(t,e){return Pe.binary.baseN.encode(t,ctt,e)};Pe.binary.base58.decode=function(t,e){return Pe.binary.baseN.decode(t,ctt,e)};Pe.text={utf8:{},utf16:{}};Pe.text.utf8.encode=function(t,e,r){t=Pe.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.text.utf8.decode=function(t){return Pe.decodeUtf8(String.fromCharCode.apply(null,t))};Pe.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Pe.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Pe.deflate=function(t,e,r){if(e=Pe.decode64(t.deflate(Pe.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Pe.inflate=function(t,e,r){var n=t.inflate(Pe.encode64(e)).rval;return n===null?null:Pe.decode64(n)};var MEe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Pe.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),FEe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Pe.decode64(r))),r},"_getStorageObject"),BXt=s(function(t,e,r,n){var i=FEe(t,e);i===null&&(i={}),i[r]=n,MEe(t,e,i)},"_setItem"),DXt=s(function(t,e,r){var n=FEe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),NXt=s(function(t,e,r){var n=FEe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),MEe(t,e,n)}},"_removeItem"),LXt=s(function(t,e){MEe(t,e,null)},"_clearItems"),fZ=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Pe.setItem=function(t,e,r,n,i){fZ(BXt,arguments,i)};Pe.getItem=function(t,e,r,n){return fZ(DXt,arguments,n)};Pe.removeItem=function(t,e,r,n){fZ(NXt,arguments,n)};Pe.clearItems=function(t,e,r){fZ(LXt,arguments,r)};Pe.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Pe.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Pe.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Pe.formatSize=function(t){return t>=1073741824?t=Pe.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Pe.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Pe.formatNumber(t/1024,0)+" KiB":t=Pe.formatNumber(t,0)+" bytes",t};Pe.bytesFromIP=function(t){return t.indexOf(".")!==-1?Pe.bytesFromIPv4(t):t.indexOf(":")!==-1?Pe.bytesFromIPv6(t):null};Pe.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Pe.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Pe.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Pe.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Pe.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Pe.bytesToIP=function(t){return t.length===4?Pe.bytesToIPv4(t):t.length===16?Pe.bytesToIPv6(t):null};Pe.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Pe.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Pe.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Pe.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Pe&&!t.update)return e(null,Pe.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Pe.cores=navigator.hardwareConcurrency,e(null,Pe.cores);if(typeof Worker>"u")return Pe.cores=1,e(null,Pe.cores);if(typeof Blob>"u")return Pe.cores=2,e(null,Pe.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Pe.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Pe.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(f.st>h.st&&f.st<h.et||h.st>f.st&&h.st<f.et)&&p.push(m)}return l.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var pZ=U((Yei,utt)=>{d();var Ml=xi();So();utt.exports=Ml.cipher=Ml.cipher||{};Ml.cipher.algorithms=Ml.cipher.algorithms||{};Ml.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ml.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ml.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ml.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ml.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ml.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ml.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ml.cipher.algorithms[t]=e};Ml.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ml.cipher.algorithms?Ml.cipher.algorithms[t]:null};var OEe=Ml.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};OEe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ml.util.createBuffer(),this.output=t.output||Ml.util.createBuffer(),this.mode.start(e)};OEe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};OEe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var UEe=U((Jei,dtt)=>{d();var Fl=xi();So();Fl.cipher=Fl.cipher||{};var Qi=dtt.exports=Fl.cipher.modes=Fl.cipher.modes||{};Qi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.ecb.prototype.start=function(t){};Qi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=mZ(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Qi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Qi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Qi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=mZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=mZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb.prototype.decrypt=Qi.ofb.prototype.encrypt;Qi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=mZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}hZ(this._inBlock)};Qi.ctr.prototype.decrypt=Qi.ctr.prototype.encrypt;Qi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Qi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Fl.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Fl.util.createBuffer(t.additionalData):r=Fl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Fl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(QEe(n*8)))}this._inBlock=this._j0.slice(0),hZ(this._inBlock),this._partialBytes=0,r=Fl.util.createBuffer(r),this._aDataLength=QEe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Qi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),hZ(this._inBlock)};Qi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),hZ(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Qi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Fl.util.createBuffer();var n=this._aDataLength.concat(QEe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Qi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Qi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Qi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Qi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Qi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};Qi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function mZ(t,e){if(typeof t=="string"&&(t=Fl.util.createBuffer(t)),Fl.util.isArray(t)&&t.length>4){var r=t;t=Fl.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Fl.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(mZ,"transformIV");function hZ(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(hZ,"inc32");function QEe(t){return[t/4294967296|0,t&4294967295]}s(QEe,"from64To32")});var oT=U((eti,htt)=>{d();var ws=xi();pZ();UEe();So();htt.exports=ws.aes=ws.aes||{};ws.aes.startEncrypting=function(t,e,r,n){var i=gZ({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ws.aes.createEncryptionCipher=function(t,e){return gZ({key:t,output:null,decrypt:!1,mode:e})};ws.aes.startDecrypting=function(t,e,r,n){var i=gZ({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ws.aes.createDecryptionCipher=function(t,e){return gZ({key:t,output:null,decrypt:!0,mode:e})};ws.aes.Algorithm=function(t,e){WEe||ptt();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return HEe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return HEe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};ws.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ws.util.createBuffer(e);else if(ws.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ws.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ws.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ws.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=mtt(e,t.decrypt&&!a),this._init=!0}};ws.aes._expandKey=function(t,e){return WEe||ptt(),mtt(t,e)};ws.aes._updateBlock=HEe;VB("AES-ECB",ws.cipher.modes.ecb);VB("AES-CBC",ws.cipher.modes.cbc);VB("AES-CFB",ws.cipher.modes.cfb);VB("AES-OFB",ws.cipher.modes.ofb);VB("AES-CTR",ws.cipher.modes.ctr);VB("AES-GCM",ws.cipher.modes.gcm);function VB(t,e){var r=s(function(){return new ws.aes.Algorithm(t,e)},"factory");ws.cipher.registerAlgorithm(t,r)}s(VB,"registerAlgorithm");var WEe=!1,jB=4,jd,qEe,ftt,oR,Mg;function ptt(){WEe=!0,ftt=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;jd=new Array(256),qEe=new Array(256),oR=new Array(4),Mg=new Array(4);for(var e=0;e<4;++e)oR[e]=new Array(256),Mg[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,jd[r]=c,qEe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)oR[p][r]=u,Mg[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(ptt,"initialize");function mtt(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=jB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=jd[n>>>16&255]<<24^jd[n>>>8&255]<<16^jd[n&255]<<8^jd[n>>>24]^ftt[i]<<24,i++):o>6&&l%o===4&&(n=jd[n>>>24]<<24^jd[n>>>16&255]<<16^jd[n>>>8&255]<<8^jd[n&255]),r[l]=r[l-o]^n;if(e){var u,f=Mg[0],p=Mg[1],m=Mg[2],h=Mg[3],g=r.slice(0);c=r.length;for(var l=0,y=c-jB;l<c;l+=jB,y-=jB)if(l===0||l===c-jB)g[l]=r[y],g[l+1]=r[y+3],g[l+2]=r[y+2],g[l+3]=r[y+1];else for(var E=0;E<jB;++E)u=r[y+E],g[l+(3&-E)]=f[jd[u>>>24]]^p[jd[u>>>16&255]]^m[jd[u>>>8&255]]^h[jd[u&255]];r=g}return r}s(mtt,"_expandKey");function HEe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=Mg[0],a=Mg[1],c=Mg[2],l=Mg[3],u=qEe):(o=oR[0],a=oR[1],c=oR[2],l=oR[3],u=jd);var f,p,m,h,g,y,E;f=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var x=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++x],y=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[f&255]^t[++x],E=o[m>>>24]^a[h>>>16&255]^c[f>>>8&255]^l[p&255]^t[++x],h=o[h>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[m&255]^t[++x],f=g,p=y,m=E;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++x],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^t[++x],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++x],r[n?1:3]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++x]}s(HEe,"_updateBlock");function gZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ws.cipher.createDecipher(r,t.key):n=ws.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof ws.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(gZ,"_createCipher")});var sT=U((nti,gtt)=>{d();var kO=xi();kO.pki=kO.pki||{};var GEe=gtt.exports=kO.pki.oids=kO.oids=kO.oids||{};function Pt(t,e){GEe[t]=e,GEe[e]=t}s(Pt,"_IN");function qo(t,e){GEe[t]=e}s(qo,"_I_");Pt("1.2.840.113549.1.1.1","rsaEncryption");Pt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Pt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Pt("1.2.840.113549.1.1.7","RSAES-OAEP");Pt("1.2.840.113549.1.1.8","mgf1");Pt("1.2.840.113549.1.1.9","pSpecified");Pt("1.2.840.113549.1.1.10","RSASSA-PSS");Pt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Pt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Pt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Pt("1.3.101.112","EdDSA25519");Pt("1.2.840.10040.4.3","dsa-with-sha1");Pt("1.3.14.3.2.7","desCBC");Pt("1.3.14.3.2.26","sha1");Pt("1.3.14.3.2.29","sha1WithRSASignature");Pt("2.16.840.1.101.3.4.2.1","sha256");Pt("2.16.840.1.101.3.4.2.2","sha384");Pt("2.16.840.1.101.3.4.2.3","sha512");Pt("2.16.840.1.101.3.4.2.4","sha224");Pt("2.16.840.1.101.3.4.2.5","sha512-224");Pt("2.16.840.1.101.3.4.2.6","sha512-256");Pt("1.2.840.113549.2.2","md2");Pt("1.2.840.113549.2.5","md5");Pt("1.2.840.113549.1.7.1","data");Pt("1.2.840.113549.1.7.2","signedData");Pt("1.2.840.113549.1.7.3","envelopedData");Pt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Pt("1.2.840.113549.1.7.5","digestedData");Pt("1.2.840.113549.1.7.6","encryptedData");Pt("1.2.840.113549.1.9.1","emailAddress");Pt("1.2.840.113549.1.9.2","unstructuredName");Pt("1.2.840.113549.1.9.3","contentType");Pt("1.2.840.113549.1.9.4","messageDigest");Pt("1.2.840.113549.1.9.5","signingTime");Pt("1.2.840.113549.1.9.6","counterSignature");Pt("1.2.840.113549.1.9.7","challengePassword");Pt("1.2.840.113549.1.9.8","unstructuredAddress");Pt("1.2.840.113549.1.9.14","extensionRequest");Pt("1.2.840.113549.1.9.20","friendlyName");Pt("1.2.840.113549.1.9.21","localKeyId");Pt("1.2.840.113549.1.9.22.1","x509Certificate");Pt("1.2.840.113549.1.12.10.1.1","keyBag");Pt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Pt("1.2.840.113549.1.12.10.1.3","certBag");Pt("1.2.840.113549.1.12.10.1.4","crlBag");Pt("1.2.840.113549.1.12.10.1.5","secretBag");Pt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Pt("1.2.840.113549.1.5.13","pkcs5PBES2");Pt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Pt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Pt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Pt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Pt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Pt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Pt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Pt("1.2.840.113549.2.7","hmacWithSHA1");Pt("1.2.840.113549.2.8","hmacWithSHA224");Pt("1.2.840.113549.2.9","hmacWithSHA256");Pt("1.2.840.113549.2.10","hmacWithSHA384");Pt("1.2.840.113549.2.11","hmacWithSHA512");Pt("1.2.840.113549.3.7","des-EDE3-CBC");Pt("2.16.840.1.101.3.4.1.2","aes128-CBC");Pt("2.16.840.1.101.3.4.1.22","aes192-CBC");Pt("2.16.840.1.101.3.4.1.42","aes256-CBC");Pt("2.5.4.3","commonName");Pt("2.5.4.4","surname");Pt("2.5.4.5","serialNumber");Pt("2.5.4.6","countryName");Pt("2.5.4.7","localityName");Pt("2.5.4.8","stateOrProvinceName");Pt("2.5.4.9","streetAddress");Pt("2.5.4.10","organizationName");Pt("2.5.4.11","organizationalUnitName");Pt("2.5.4.12","title");Pt("2.5.4.13","description");Pt("2.5.4.15","businessCategory");Pt("2.5.4.17","postalCode");Pt("2.5.4.42","givenName");Pt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Pt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Pt("2.16.840.1.113730.1.1","nsCertType");Pt("2.16.840.1.113730.1.13","nsComment");qo("2.5.29.1","authorityKeyIdentifier");qo("2.5.29.2","keyAttributes");qo("2.5.29.3","certificatePolicies");qo("2.5.29.4","keyUsageRestriction");qo("2.5.29.5","policyMapping");qo("2.5.29.6","subtreesConstraint");qo("2.5.29.7","subjectAltName");qo("2.5.29.8","issuerAltName");qo("2.5.29.9","subjectDirectoryAttributes");qo("2.5.29.10","basicConstraints");qo("2.5.29.11","nameConstraints");qo("2.5.29.12","policyConstraints");qo("2.5.29.13","basicConstraints");Pt("2.5.29.14","subjectKeyIdentifier");Pt("2.5.29.15","keyUsage");qo("2.5.29.16","privateKeyUsagePeriod");Pt("2.5.29.17","subjectAltName");Pt("2.5.29.18","issuerAltName");Pt("2.5.29.19","basicConstraints");qo("2.5.29.20","cRLNumber");qo("2.5.29.21","cRLReason");qo("2.5.29.22","expirationDate");qo("2.5.29.23","instructionCode");qo("2.5.29.24","invalidityDate");qo("2.5.29.25","cRLDistributionPoints");qo("2.5.29.26","issuingDistributionPoint");qo("2.5.29.27","deltaCRLIndicator");qo("2.5.29.28","issuingDistributionPoint");qo("2.5.29.29","certificateIssuer");qo("2.5.29.30","nameConstraints");Pt("2.5.29.31","cRLDistributionPoints");Pt("2.5.29.32","certificatePolicies");qo("2.5.29.33","policyMappings");qo("2.5.29.34","policyConstraints");Pt("2.5.29.35","authorityKeyIdentifier");qo("2.5.29.36","policyConstraints");Pt("2.5.29.37","extKeyUsage");qo("2.5.29.46","freshestCRL");qo("2.5.29.54","inhibitAnyPolicy");Pt("1.3.6.1.4.1.11129.2.4.2","timestampList");Pt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Pt("1.3.6.1.5.5.7.3.1","serverAuth");Pt("1.3.6.1.5.5.7.3.2","clientAuth");Pt("1.3.6.1.5.5.7.3.3","codeSigning");Pt("1.3.6.1.5.5.7.3.4","emailProtection");Pt("1.3.6.1.5.5.7.3.8","timeStamping")});var Fg=U((sti,ytt)=>{d();var $s=xi();So();sT();var or=ytt.exports=$s.asn1=$s.asn1||{};or.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};or.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};or.create=function(t,e,r,n,i){if($s.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||$s.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=or.copy(c)),c};or.copy=function(t,e){var r;if($s.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(or.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:or.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};or.equals=function(t,e,r){if($s.util.isArray(t)){if(!$s.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!or.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&or.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};or.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function PO(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(PO,"_checkBufferLength");var MXt=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;PO(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");or.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.length(),n=AZ(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function AZ(t,e,r,n){var i;PO(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=MXt(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,m=(o&32)===32;if(m)if(f=[],l===void 0)for(;;){if(PO(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(AZ(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(AZ(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&l>1){var h=t.read,g=e,y=0;if(c===or.Type.BITSTRING&&(PO(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var E={strict:!0,decodeBitStrings:!0},x=AZ(t,e,r+1,E),b=i-t.length();e-=b,c==or.Type.BITSTRING&&b++;var _=x.tagClass;b===l&&(_===or.Class.UNIVERSAL||_===or.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch{}f===void 0&&(t.read=h,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===or.Type.BMPSTRING)for(f="";l>0;l-=2)PO(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var k=p===void 0?null:{bitStringContents:p};return or.create(a,c,m,f,k)}s(AZ,"_fromDer");or.toDer=function(t){var e=$s.util.createBuffer(),r=t.tagClass|t.type,n=$s.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=or.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(or.toDer(t.value[o]))}else if(t.type===or.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===or.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};or.oidToDer=function(t){var e=t.split("."),r=$s.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};or.derToOid=function(t){var e;typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};or.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=f*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};or.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};or.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.integerToDer=function(t){var e=$s.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};or.derToInteger=function(t){typeof t=="string"&&(t=$s.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};or.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&$s.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=or.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Att=/[^\\u0000-\\u00ff]/;or.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case or.Class.UNIVERSAL:n+="Universal:";break;case or.Class.APPLICATION:n+="Application:";break;case or.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case or.Class.PRIVATE:n+="Private:";break}if(t.tagClass===or.Class.UNIVERSAL)switch(n+=t.type,t.type){case or.Type.NONE:n+=" (None)";break;case or.Type.BOOLEAN:n+=" (Boolean)";break;case or.Type.INTEGER:n+=" (Integer)";break;case or.Type.BITSTRING:n+=" (Bit string)";break;case or.Type.OCTETSTRING:n+=" (Octet string)";break;case or.Type.NULL:n+=" (Null)";break;case or.Type.OID:n+=" (Object Identifier)";break;case or.Type.ODESC:n+=" (Object Descriptor)";break;case or.Type.EXTERNAL:n+=" (External or Instance of)";break;case or.Type.REAL:n+=" (Real)";break;case or.Type.ENUMERATED:n+=" (Enumerated)";break;case or.Type.EMBEDDED:n+=" (Embedded PDV)";break;case or.Type.UTF8:n+=" (UTF8)";break;case or.Type.ROID:n+=" (Relative Object Identifier)";break;case or.Type.SEQUENCE:n+=" (Sequence)";break;case or.Type.SET:n+=" (Set)";break;case or.Type.PRINTABLESTRING:n+=" (Printable String)";break;case or.Type.IA5String:n+=" (IA5String (ASCII))";break;case or.Type.UTCTIME:n+=" (UTC time)";break;case or.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case or.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=or.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===or.Type.OID){var l=or.derToOid(t.value);n+=l,$s.pki&&$s.pki.oids&&l in $s.pki.oids&&(n+=" ("+$s.pki.oids[l]+") ")}if(t.type===or.Type.INTEGER)try{n+=or.derToInteger(t.value)}catch{n+="0x"+$s.util.bytesToHex(t.value)}else if(t.type===or.Type.BITSTRING){if(t.value.length>1?n+="0x"+$s.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===or.Type.OCTETSTRING)Att.test(t.value)||(n+="("+t.value+") "),n+="0x"+$s.util.bytesToHex(t.value);else if(t.type===or.Type.UTF8)try{n+=$s.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+$s.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===or.Type.PRINTABLESTRING||t.type===or.Type.IA5String?n+=t.value:Att.test(t.value)?n+="0x"+$s.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var rC=U((lti,Ctt)=>{d();var yZ=xi();Ctt.exports=yZ.md=yZ.md||{};yZ.md.algorithms=yZ.md.algorithms||{}});var $B=U((dti,Ett)=>{d();var GE=xi();rC();So();var FXt=Ett.exports=GE.hmac=GE.hmac||{};FXt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in GE.md.algorithms)e=GE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=GE.util.createBuffer(a);else if(GE.util.isArray(a)){var c=a;a=GE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=GE.util.createBuffer(),n=GE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var EZ=U((pti,Itt)=>{d();var nC=xi();rC();So();var xtt=Itt.exports=nC.md5=nC.md5||{};nC.md.md5=nC.md.algorithms.md5=xtt;xtt.create=function(){btt||OXt();var t=null,e=nC.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=nC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=nC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),vtt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=nC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(jEe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};vtt(f,r,i);var p=nC.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var jEe=null,CZ=null,BO=null,zB=null,btt=!1;function OXt(){jEe="\x80",jEe+=nC.util.fillString("\0",64),CZ=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],BO=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],zB=new Array(64);for(var t=0;t<64;++t)zB[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);btt=!0}s(OXt,"_init");function vtt(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+zB[f]+e[f],u=BO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+zB[f]+e[CZ[f]],u=BO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+zB[f]+e[CZ[f]],u=BO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+zB[f]+e[CZ[f]],u=BO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(vtt,"_update")});var sR=U((gti,wtt)=>{d();var xZ=xi();So();var Ttt=wtt.exports=xZ.pem=xZ.pem||{};Ttt.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=vZ(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=vZ(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=vZ(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=vZ(t.headers[i]);return t.procType&&(r+=`\r
`),r+=xZ.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Ttt.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:xZ.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;f+=m,u=p}if(o=f.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(QXt(g[y]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function vZ(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(vZ,"foldHeader");function QXt(t){return t.replace(/^\s+/,"")}s(QXt,"ltrim")});var DO=U((Cti,Stt)=>{d();var pa=xi();pZ();UEe();So();Stt.exports=pa.des=pa.des||{};pa.des.startEncrypting=function(t,e,r,n){var i=bZ({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};pa.des.createEncryptionCipher=function(t,e){return bZ({key:t,output:null,decrypt:!1,mode:e})};pa.des.startDecrypting=function(t,e,r,n){var i=bZ({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};pa.des.createDecryptionCipher=function(t,e){return bZ({key:t,output:null,decrypt:!0,mode:e})};pa.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return _tt(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return _tt(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};pa.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=pa.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=zXt(e),this._init=!0}};iC("DES-ECB",pa.cipher.modes.ecb);iC("DES-CBC",pa.cipher.modes.cbc);iC("DES-CFB",pa.cipher.modes.cfb);iC("DES-OFB",pa.cipher.modes.ofb);iC("DES-CTR",pa.cipher.modes.ctr);iC("3DES-ECB",pa.cipher.modes.ecb);iC("3DES-CBC",pa.cipher.modes.cbc);iC("3DES-CFB",pa.cipher.modes.cfb);iC("3DES-OFB",pa.cipher.modes.ofb);iC("3DES-CTR",pa.cipher.modes.ctr);function iC(t,e){var r=s(function(){return new pa.des.Algorithm(t,e)},"factory");pa.cipher.registerAlgorithm(t,r)}s(iC,"registerAlgorithm");var UXt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],qXt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],HXt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],WXt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],GXt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],jXt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],VXt=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],$Xt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function zXt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,E=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,_,k=0;k<y;k++){var P=t.getInt32(),N=t.getInt32();_=(P>>>4^N)&252645135,N^=_,P^=_<<4,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>2^N)&858993459,N^=_,P^=_<<2,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=(N>>>8^P)&16711935,P^=_,N^=_<<8,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=P<<8|N>>>20&240,P=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var M=0;M<x.length;++M){x[M]?(P=P<<2|P>>>26,N=N<<2|N>>>26):(P=P<<1|P>>>27,N=N<<1|N>>>27),P&=-15,N&=-15;var J=e[P>>>28]|r[P>>>24&15]|n[P>>>20&15]|i[P>>>16&15]|o[P>>>12&15]|a[P>>>8&15]|c[P>>>4&15],pe=l[N>>>28]|u[N>>>24&15]|f[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(pe>>>16^J)&65535,E[b++]=J^_,E[b++]=pe^_<<16}}return E}s(zXt,"_createKeys");function _tt(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],m=o[u];m!=f;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(qXt[h>>>24&63]|WXt[h>>>16&63]|jXt[h>>>8&63]|$Xt[h&63]|UXt[g>>>24&63]|HXt[g>>>16&63]|GXt[g>>>8&63]|VXt[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(_tt,"_updateBlock");function bZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=pa.cipher.createDecipher(r,t.key):n=pa.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof pa.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(bZ,"_createCipher")});var IZ=U((xti,Rtt)=>{d();var Vd=xi();$B();rC();So();var YXt=Vd.pkcs5=Vd.pkcs5||{},jE;Vd.util.isNodejs&&!Vd.options.usePureJavaScript&&(jE=require("crypto"));Rtt.exports=Vd.pbkdf2=YXt.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Vd.util.isNodejs&&!Vd.options.usePureJavaScript&&jE.pbkdf2&&(i===null||typeof i!="object")&&(jE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?jE.pbkdf2Sync.length===4?jE.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):jE.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):jE.pbkdf2Sync.length===4?jE.pbkdf2Sync(t,e,r,n).toString("binary"):jE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Vd.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Vd.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=Vd.hmac.create();f.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=l;++y){f.start(null,null),f.update(e),f.update(Vd.util.int32ToBytes(y)),m=g=f.digest().getBytes();for(var E=2;E<=r;++E)f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Vd.util.xorBytes(m,h,a),g=h;p+=y<l?m:m.substr(0,u)}return p}var y=1,E;function x(){if(y>l)return o(null,p);f.start(null,null),f.update(e),f.update(Vd.util.int32ToBytes(y)),m=g=f.digest().getBytes(),E=2,b()}s(x,"outer");function b(){if(E<=r)return f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Vd.util.xorBytes(m,h,a),g=h,++E,Vd.util.setImmediate(b);p+=y<l?m:m.substr(0,u),++y,x()}s(b,"inner"),x()}});var $Ee=U((Tti,Ntt)=>{d();var oC=xi();rC();So();var Ptt=Ntt.exports=oC.sha256=oC.sha256||{};oC.md.sha256=oC.md.algorithms.sha256=Ptt;Ptt.create=function(){Btt||KXt();var t=null,e=oC.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=oC.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=oC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),ktt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=oC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(VEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};ktt(p,r,i);var m=oC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var VEe=null,Btt=!1,Dtt=null;function KXt(){VEe="\x80",VEe+=oC.util.fillString("\0",64),Dtt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Btt=!0}s(KXt,"_init");function ktt(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,E=t.h6,x=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=E^g&(y^E),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|m&(f^p),n=x+a+c+Dtt[u]+e[u],i=o+l,x=E,E=y,y=g,g=h+n>>>0,h=m,m=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+E|0,t.h7=t.h7+x|0,b-=64}}s(ktt,"_update")});var zEe=U((Sti,Ltt)=>{d();var sC=xi();So();var TZ=null;sC.util.isNodejs&&!sC.options.usePureJavaScript&&!process.versions["node-webkit"]&&(TZ=require("crypto"));var JXt=Ltt.exports=sC.prng=sC.prng||{};JXt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=sC.util.createBuffer();e.key=null,E();function E(x){if(x)return f(x);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return sC.util.nextTick(function(){o(E)});var b=p(e.key,e.seed);e.generated+=b.length,y.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),sC.util.setImmediate(E)}s(E,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=sC.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=f(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(f(e.key,p(e.seed))),e.seed=h(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var f=null,p=sC.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(f=s(function(P){return m.getRandomValues(P)},"getRandomValues"));var h=sC.util.createBuffer();if(f)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{f(y);for(var E=0;E<y.length;++E)h.putInt32(y[E])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(h.length()<u)for(var x,b,_,k=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(k&65535),x=16807*(k>>16),b+=(x&32767)<<16,b+=x>>15,b=(b&2147483647)+(b>>31),k=b&4294967295;for(var E=0;E<3;++E)_=k>>>(E<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),TZ?(e.seedFile=function(u,f){TZ.randomBytes(u,function(p,m){if(p)return f(p);f(null,m.toString())})},e.seedFileSync=function(u){return TZ.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",m=0;m<f;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var Vm=U((Pti,YEe)=>{d();var Ol=xi();oT();$Ee();zEe();So();(function(){if(Ol.random&&Ol.random.getBytes){YEe.exports=Ol.random;return}(function(t){var e={},r=new Array(4),n=Ol.util.createBuffer();e.formatKey=function(p){var m=Ol.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Ol.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Ol.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Ol.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Ol.md.sha256;function i(){var p=Ol.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=Ol.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),Ol.options.usePureJavaScript||!Ol.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Ol.random)Ol.random=o;else for(var f in o)Ol.random[f]=o[f];Ol.random.createInstance=i,YEe.exports=Ol.random})(typeof jQuery<"u"?jQuery:null)})()});var JEe=U((Nti,Ott)=>{d();var Vf=xi();So();var KEe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Mtt=[1,2,3,5],XXt=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),ZXt=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Ott.exports=Vf.rc2=Vf.rc2||{};Vf.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Vf.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(KEe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,KEe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,KEe[r.at(c+1)^r.at(c+o)]);return r};var Ftt=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=Vf.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=XXt(g[u],Mtt[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=ZXt(g[u],Mtt[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var E=i.getInt16Le();a!==null&&(r?E^=a.getInt16Le():a.putInt16Le(E)),y.push(E&65535)}f=r?0:63;for(var x=0;x<g.length;x++)for(var b=0;b<g[x][0];b++)g[x][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Vf.util.createBuffer(g)),n=!1,i=Vf.util.createBuffer(),o=y||new Vf.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var x=o.length(),b=o.at(x-1);b>x?y=!1:o.truncate(b)}return y},"finish")},h},"createCipher");Vf.rc2.startEncrypting=function(t,e,r){var n=Vf.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Vf.rc2.createEncryptionCipher=function(t,e){return Ftt(t,e,!0)};Vf.rc2.startDecrypting=function(t,e,r){var n=Vf.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Vf.rc2.createDecryptionCipher=function(t,e){return Ftt(t,e,!1)}});var LO=U((Fti,Vtt)=>{d();var XEe=xi();Vtt.exports=XEe.jsbn=XEe.jsbn||{};var VE,eZt=0xdeadbeefcafe,Qtt=(eZt&16777215)==15715070;function bt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(bt,"BigInteger");XEe.jsbn.BigInteger=bt;function Ro(){return new bt(null)}s(Ro,"nbi");function tZt(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(tZt,"am1");function rZt(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(rZt,"am2");function Utt(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s(Utt,"am3");typeof navigator>"u"?(bt.prototype.am=Utt,VE=28):Qtt&&navigator.appName=="Microsoft Internet Explorer"?(bt.prototype.am=rZt,VE=30):Qtt&&navigator.appName!="Netscape"?(bt.prototype.am=tZt,VE=26):(bt.prototype.am=Utt,VE=28);bt.prototype.DB=VE;bt.prototype.DM=(1<<VE)-1;bt.prototype.DV=1<<VE;var ZEe=52;bt.prototype.FV=Math.pow(2,ZEe);bt.prototype.F1=ZEe-VE;bt.prototype.F2=2*VE-ZEe;var nZt="0123456789abcdefghijklmnopqrstuvwxyz",wZ=new Array,YB,$m;YB=48;for($m=0;$m<=9;++$m)wZ[YB++]=$m;YB=97;for($m=10;$m<36;++$m)wZ[YB++]=$m;YB=65;for($m=10;$m<36;++$m)wZ[YB++]=$m;function qtt(t){return nZt.charAt(t)}s(qtt,"int2char");function Htt(t,e){var r=wZ[t.charCodeAt(e)];return r??-1}s(Htt,"intAt");function iZt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(iZt,"bnpCopyTo");function oZt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(oZt,"bnpFromInt");function aT(t){var e=Ro();return e.fromInt(t),e}s(aT,"nbv");function sZt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Htt(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&bt.ZERO.subTo(this,this)}s(sZt,"bnpFromString");function aZt(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(aZt,"bnpClamp");function cZt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=qtt(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=qtt(n));return i?o:"0"}s(cZt,"bnToString");function lZt(){var t=Ro();return bt.ZERO.subTo(this,t),t}s(lZt,"bnNegate");function uZt(){return this.s<0?this.negate():this}s(uZt,"bnAbs");function dZt(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(dZt,"bnCompareTo");function _Z(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(_Z,"nbits");function fZt(){return this.t<=0?0:this.DB*(this.t-1)+_Z(this.data[this.t-1]^this.s&this.DM)}s(fZt,"bnBitLength");function pZt(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(pZt,"bnpDLShiftTo");function mZt(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(mZt,"bnpDRShiftTo");function hZt(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(hZt,"bnpLShiftTo");function gZt(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(gZt,"bnpRShiftTo");function AZt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(AZt,"bnpSubTo");function yZt(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&bt.ZERO.subTo(e,e)}s(yZt,"bnpMultiplyTo");function CZt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(CZt,"bnpSquareTo");function EZt(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ro());var o=Ro(),a=this.s,c=t.s,l=this.DB-_Z(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,E=y-u,x=e??Ro();for(o.dlShiftTo(E,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),bt.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--E>=0;){var b=r.data[--y]==f?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,b,r,E,0,u))<b)for(o.dlShiftTo(E,x),r.subTo(x,r);r.data[y]<--b;)r.subTo(x,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&bt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&bt.ZERO.subTo(r,r)}}}s(EZt,"bnpDivRemTo");function vZt(t){var e=Ro();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(bt.ZERO)>0&&t.subTo(e,e),e}s(vZt,"bnMod");function aR(t){this.m=t}s(aR,"Classic");function xZt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(xZt,"cConvert");function bZt(t){return t}s(bZt,"cRevert");function IZt(t){t.divRemTo(this.m,null,t)}s(IZt,"cReduce");function TZt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(TZt,"cMulTo");function wZt(t,e){t.squareTo(e),this.reduce(e)}s(wZt,"cSqrTo");aR.prototype.convert=xZt;aR.prototype.revert=bZt;aR.prototype.reduce=IZt;aR.prototype.mulTo=TZt;aR.prototype.sqrTo=wZt;function _Zt(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(_Zt,"bnpInvDigit");function cR(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(cR,"Montgomery");function SZt(t){var e=Ro();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(bt.ZERO)>0&&this.m.subTo(e,e),e}s(SZt,"montConvert");function RZt(t){var e=Ro();return t.copyTo(e),this.reduce(e),e}s(RZt,"montRevert");function kZt(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(kZt,"montReduce");function PZt(t,e){t.squareTo(e),this.reduce(e)}s(PZt,"montSqrTo");function BZt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(BZt,"montMulTo");cR.prototype.convert=SZt;cR.prototype.revert=RZt;cR.prototype.reduce=kZt;cR.prototype.mulTo=BZt;cR.prototype.sqrTo=PZt;function DZt(){return(this.t>0?this.data[0]&1:this.s)==0}s(DZt,"bnpIsEven");function NZt(t,e){if(t>4294967295||t<1)return bt.ONE;var r=Ro(),n=Ro(),i=e.convert(this),o=_Z(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(NZt,"bnpExp");function LZt(t,e){var r;return t<256||e.isEven()?r=new aR(e):r=new cR(e),this.exp(t,r)}s(LZt,"bnModPowInt");bt.prototype.copyTo=iZt;bt.prototype.fromInt=oZt;bt.prototype.fromString=sZt;bt.prototype.clamp=aZt;bt.prototype.dlShiftTo=pZt;bt.prototype.drShiftTo=mZt;bt.prototype.lShiftTo=hZt;bt.prototype.rShiftTo=gZt;bt.prototype.subTo=AZt;bt.prototype.multiplyTo=yZt;bt.prototype.squareTo=CZt;bt.prototype.divRemTo=EZt;bt.prototype.invDigit=_Zt;bt.prototype.isEven=DZt;bt.prototype.exp=NZt;bt.prototype.toString=cZt;bt.prototype.negate=lZt;bt.prototype.abs=uZt;bt.prototype.compareTo=dZt;bt.prototype.bitLength=fZt;bt.prototype.mod=vZt;bt.prototype.modPowInt=LZt;bt.ZERO=aT(0);bt.ONE=aT(1);function MZt(){var t=Ro();return this.copyTo(t),t}s(MZt,"bnClone");function FZt(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(FZt,"bnIntValue");function OZt(){return this.t==0?this.s:this.data[0]<<24>>24}s(OZt,"bnByteValue");function QZt(){return this.t==0?this.s:this.data[0]<<16>>16}s(QZt,"bnShortValue");function UZt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(UZt,"bnpChunkSize");function qZt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(qZt,"bnSigNum");function HZt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=aT(r),i=Ro(),o=Ro(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(HZt,"bnpToRadix");function WZt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Htt(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&bt.ZERO.subTo(this,this)}s(WZt,"bnpFromRadix");function GZt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(bt.ONE.shiftLeft(t-1),eve,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(bt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(GZt,"bnpFromNumber");function jZt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(jZt,"bnToByteArray");function VZt(t){return this.compareTo(t)==0}s(VZt,"bnEquals");function $Zt(t){return this.compareTo(t)<0?this:t}s($Zt,"bnMin");function zZt(t){return this.compareTo(t)>0?this:t}s(zZt,"bnMax");function YZt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(YZt,"bnpBitwiseTo");function KZt(t,e){return t&e}s(KZt,"op_and");function JZt(t){var e=Ro();return this.bitwiseTo(t,KZt,e),e}s(JZt,"bnAnd");function eve(t,e){return t|e}s(eve,"op_or");function XZt(t){var e=Ro();return this.bitwiseTo(t,eve,e),e}s(XZt,"bnOr");function Wtt(t,e){return t^e}s(Wtt,"op_xor");function ZZt(t){var e=Ro();return this.bitwiseTo(t,Wtt,e),e}s(ZZt,"bnXor");function Gtt(t,e){return t&~e}s(Gtt,"op_andnot");function eer(t){var e=Ro();return this.bitwiseTo(t,Gtt,e),e}s(eer,"bnAndNot");function ter(){for(var t=Ro(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(ter,"bnNot");function rer(t){var e=Ro();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(rer,"bnShiftLeft");function ner(t){var e=Ro();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(ner,"bnShiftRight");function ier(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(ier,"lbit");function oer(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+ier(this.data[t]);return this.s<0?this.t*this.DB:-1}s(oer,"bnGetLowestSetBit");function ser(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(ser,"cbit");function aer(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=ser(this.data[r]^e);return t}s(aer,"bnBitCount");function cer(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(cer,"bnTestBit");function ler(t,e){var r=bt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(ler,"bnpChangeBit");function uer(t){return this.changeBit(t,eve)}s(uer,"bnSetBit");function der(t){return this.changeBit(t,Gtt)}s(der,"bnClearBit");function fer(t){return this.changeBit(t,Wtt)}s(fer,"bnFlipBit");function per(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(per,"bnpAddTo");function mer(t){var e=Ro();return this.addTo(t,e),e}s(mer,"bnAdd");function her(t){var e=Ro();return this.subTo(t,e),e}s(her,"bnSubtract");function ger(t){var e=Ro();return this.multiplyTo(t,e),e}s(ger,"bnMultiply");function Aer(t){var e=Ro();return this.divRemTo(t,e,null),e}s(Aer,"bnDivide");function yer(t){var e=Ro();return this.divRemTo(t,null,e),e}s(yer,"bnRemainder");function Cer(t){var e=Ro(),r=Ro();return this.divRemTo(t,e,r),new Array(e,r)}s(Cer,"bnDivideAndRemainder");function Eer(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(Eer,"bnpDMultiply");function ver(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(ver,"bnpDAddOffset");function NO(){}s(NO,"NullExp");function jtt(t){return t}s(jtt,"nNop");function xer(t,e,r){t.multiplyTo(e,r)}s(xer,"nMulTo");function ber(t,e){t.squareTo(e)}s(ber,"nSqrTo");NO.prototype.convert=jtt;NO.prototype.revert=jtt;NO.prototype.mulTo=xer;NO.prototype.sqrTo=ber;function Ier(t){return this.exp(t,new NO)}s(Ier,"bnPow");function Ter(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(Ter,"bnpMultiplyLowerTo");function wer(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(wer,"bnpMultiplyUpperTo");function KB(t){this.r2=Ro(),this.q3=Ro(),bt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(KB,"Barrett");function _er(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ro();return t.copyTo(e),this.reduce(e),e}s(_er,"barrettConvert");function Ser(t){return t}s(Ser,"barrettRevert");function Rer(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(Rer,"barrettReduce");function ker(t,e){t.squareTo(e),this.reduce(e)}s(ker,"barrettSqrTo");function Per(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(Per,"barrettMulTo");KB.prototype.convert=_er;KB.prototype.revert=Ser;KB.prototype.reduce=Rer;KB.prototype.mulTo=Per;KB.prototype.sqrTo=ker;function Ber(t,e){var r=t.bitLength(),n,i=aT(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new aR(e):e.isEven()?o=new KB(e):o=new cR(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=Ro();for(o.sqrTo(a[1],f);c<=u;)a[c]=Ro(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Ro(),y;for(r=_Z(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(Ber,"bnModPow");function Der(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(Der,"bnGCD");function Ner(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(Ner,"bnpModInt");function Ler(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return bt.ZERO;for(var r=t.clone(),n=this.clone(),i=aT(1),o=aT(0),a=aT(0),c=aT(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(bt.ONE)!=0)return bt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(Ler,"bnModInverse");var Og=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Mer=(1<<26)/Og[Og.length-1];function Fer(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Og[Og.length-1]){for(e=0;e<Og.length;++e)if(r.data[0]==Og[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Og.length;){for(var n=Og[e],i=e+1;i<Og.length&&n<Mer;)n*=Og[i++];for(n=r.modInt(n);e<i;)if(n%Og[e++]==0)return!1}return r.millerRabin(t)}s(Fer,"bnIsProbablePrime");function Oer(t){var e=this.subtract(bt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Qer(),o,a=0;a<t;++a){do o=new bt(this.bitLength(),i);while(o.compareTo(bt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(bt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(bt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(Oer,"bnpMillerRabin");function Qer(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(Qer,"bnGetPrng");bt.prototype.chunkSize=UZt;bt.prototype.toRadix=HZt;bt.prototype.fromRadix=WZt;bt.prototype.fromNumber=GZt;bt.prototype.bitwiseTo=YZt;bt.prototype.changeBit=ler;bt.prototype.addTo=per;bt.prototype.dMultiply=Eer;bt.prototype.dAddOffset=ver;bt.prototype.multiplyLowerTo=Ter;bt.prototype.multiplyUpperTo=wer;bt.prototype.modInt=Ner;bt.prototype.millerRabin=Oer;bt.prototype.clone=MZt;bt.prototype.intValue=FZt;bt.prototype.byteValue=OZt;bt.prototype.shortValue=QZt;bt.prototype.signum=qZt;bt.prototype.toByteArray=jZt;bt.prototype.equals=VZt;bt.prototype.min=$Zt;bt.prototype.max=zZt;bt.prototype.and=JZt;bt.prototype.or=XZt;bt.prototype.xor=ZZt;bt.prototype.andNot=eer;bt.prototype.not=ter;bt.prototype.shiftLeft=rer;bt.prototype.shiftRight=ner;bt.prototype.getLowestSetBit=oer;bt.prototype.bitCount=aer;bt.prototype.testBit=cer;bt.prototype.setBit=uer;bt.prototype.clearBit=der;bt.prototype.flipBit=fer;bt.prototype.add=mer;bt.prototype.subtract=her;bt.prototype.multiply=ger;bt.prototype.divide=Aer;bt.prototype.remainder=yer;bt.prototype.divideAndRemainder=Cer;bt.prototype.modPow=Ber;bt.prototype.modInverse=Ler;bt.prototype.pow=Ier;bt.prototype.gcd=Der;bt.prototype.isProbablePrime=Fer});var JB=U((Uti,Ktt)=>{d();var aC=xi();rC();So();var ztt=Ktt.exports=aC.sha1=aC.sha1||{};aC.md.sha1=aC.md.algorithms.sha1=ztt;ztt.create=function(){Ytt||Uer();var t=null,e=aC.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=aC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=aC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),$tt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=aC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(tve.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};$tt(p,r,i);var m=aC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var tve=null,Ytt=!1;function Uer(){tve="\x80",tve+=aC.util.fillString("\0",64),Ytt=!0}s(Uer,"_init");function $tt(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s($tt,"_update")});var rve=U((Wti,Xtt)=>{d();var cC=xi();So();Vm();JB();var Jtt=Xtt.exports=cC.pkcs1=cC.pkcs1||{};Jtt.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=cC.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=cC.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=SZ(i,c-o.digestLength-1,a),E=cC.util.xorBytes(g,y,g.length),x=SZ(E,o.digestLength,a),b=cC.util.xorBytes(i,x,i.length);return"\0"+b+E};Jtt.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=a,E}if(i===void 0?i=cC.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=SZ(f,i.digestLength,o),m=cC.util.xorBytes(u,p,u.length),h=SZ(m,a-i.digestLength-1,o),g=cC.util.xorBytes(f,h,f.length),y=g.substring(0,i.digestLength),E=l!=="\0",x=0;x<i.digestLength;++x)E|=c.charAt(x)!==y.charAt(x);for(var b=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var P=g.charCodeAt(k),N=P&1^1,M=b?65534:0;E|=P&M,b=b&N,_+=b}if(E||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function SZ(t,e,r){r||(r=cC.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(SZ,"rsa_mgf1")});var ive=U((Vti,nve)=>{d();var cT=xi();So();LO();Vm();(function(){if(cT.prime){nve.exports=cT.prime;return}var t=nve.exports=cT.prime=cT.prime||{},e=cT.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||cT.random,E={nextBytes:s(function(x){for(var b=y.getBytesSync(x.length),_=0;_<x.length;++_)x[_]=b.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,E,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),E=0,x=f(y.bitLength());"millerRabinTests"in h&&(x=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(y,p,m,E,x,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,y,E,x){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return x(null,p);p.dAddOffset(r[g++%8],0)}while(E<0||+new Date-b<E);cT.util.setImmediate(function(){c(p,m,h,g,y,E,x)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),E=h.workers,x=h.workLoad||100,b=x*30/8,_=h.workerScript||"forge/prime.worker.js";if(E===-1)return cT.util.estimateCores(function(P,N){P&&(N=2),E=N-1,k()});k();function k(){E=Math.max(1,E);for(var P=[],N=0;N<E;++N)P[N]=new Worker(_);for(var M=E,N=0;N<E;++N)P[N].addEventListener("message",pe);var J=!1;function pe(Y){if(!J){--M;var G=Y.data;if(G.found){for(var H=0;H<P.length;++H)P[H].terminate();return J=!0,g(null,new e(G.prime,16))}y.bitLength()>p&&(y=u(p,m));var ce=y.toString(16);Y.target.postMessage({hex:ce,workLoad:x}),y.dAddOffset(b,0)}}s(pe,"workerMessage")}s(k,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var MO=U((Yti,ort)=>{d();var sn=xi();Fg();LO();sT();rve();ive();Vm();So();typeof Eo>"u"&&(Eo=sn.jsbn.BigInteger);var Eo,ove=sn.util.isNodejs?require("crypto"):null,He=sn.asn1,zm=sn.util;sn.pki=sn.pki||{};ort.exports=sn.pki.rsa=sn.rsa=sn.rsa||{};var ui=sn.pki,qer=[6,4,2,4,2,4,6,2],Her={name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Wer={name:"RSAPrivateKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Ger={name:"RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},jer=sn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ver={name:"DigestInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:He.Class.UNIVERSAL,type:He.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},$er=s(function(t){var e;if(t.algorithm in ui.oids)e=ui.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=He.oidToDer(e).getBytes(),i=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]),o=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]);o.value.push(He.create(He.Class.UNIVERSAL,He.Type.OID,!1,n)),o.value.push(He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,""));var a=He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),He.toDer(i).getBytes()},"emsaPkcs1v15encode"),nrt=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Eo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Eo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Eo(sn.util.bytesToHex(sn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Eo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");ui.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=irt(t,e,r)):(i=sn.util.createBuffer(),i.putBytes(t));for(var a=new Eo(i.toHex(),16),c=nrt(a,e,n),l=c.toString(16),u=sn.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(sn.util.hexToBytes(l)),u.getBytes()};ui.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Eo(sn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=nrt(a,e,r),l=c.toString(16),u=sn.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(sn.util.hexToBytes(l)),n!==!1?RZ(u.getBytes(),e,r):u.getBytes()};ui.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||sn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Eo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};ui.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Eo(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Eo(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Eo.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(Yer(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(qer[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Eo.ONE),t.q1=t.q.subtract(Eo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Eo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};ui.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!sn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Ztt("generateKeyPair"))return ove.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:ui.privateKeyFromPem(u),publicKey:ui.publicKeyFromPem(l)})});if(ert("generateKey")&&ert("exportKey"))return zm.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rrt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return zm.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=ui.privateKeyFromAsn1(He.fromDer(sn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:ui.setRsaPublicKey(l.n,l.e)})}});if(trt("generateKey")&&trt("exportKey")){var i=zm.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rrt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=zm.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,m=ui.privateKeyFromAsn1(He.fromDer(sn.util.createBuffer(p)));n(null,{privateKey:m,publicKey:ui.setRsaPublicKey(m.n,m.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(Ztt("generateKeyPairSync")){var o=ove.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ui.privateKeyFromPem(o.privateKey),publicKey:ui.publicKeyFromPem(o.publicKey)}}}var a=ui.rsa.createKeyPairGenerationState(t,e,r);if(!n)return ui.rsa.stepKeyPairGenerationState(a,0),a.keys;zer(a,r,n)};ui.setRsaPublicKey=ui.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return irt(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return sn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return ui.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=RZ(u,r,!0);var f=He.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!He.validate(f,Ver,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=He.derToOid(p.algorithmIdentifier);if(!(g===sn.oids.md2||g===sn.oids.md5||g===sn.oids.sha1||g===sn.oids.sha224||g===sn.oids.sha256||g===sn.oids.sha384||g===sn.oids.sha512||g===sn.oids["sha512-224"]||g===sn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===sn.oids.md2||g===sn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=RZ(u,r,!0),l===u},"verify")});var c=ui.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};ui.setRsaPrivateKey=ui.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var m=ui.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:RZ};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(h,g){return sn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(m,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:$er},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var m=f.encode(u,l.n.bitLength());return ui.rsa.encrypt(m,l,p)},l};ui.wrapRsaPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,He.toDer(t).getBytes())])};ui.privateKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,Her,e,r)&&(t=He.fromDer(sn.util.createBuffer(e.privateKey))),e={},r=[],!He.validate(t,Wer,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=sn.util.createBuffer(e.privateKeyModulus).toHex(),o=sn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=sn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=sn.util.createBuffer(e.privateKeyPrime1).toHex(),l=sn.util.createBuffer(e.privateKeyPrime2).toHex(),u=sn.util.createBuffer(e.privateKeyExponent1).toHex(),f=sn.util.createBuffer(e.privateKeyExponent2).toHex(),p=sn.util.createBuffer(e.privateKeyCoefficient).toHex(),ui.setRsaPrivateKey(new Eo(i,16),new Eo(o,16),new Eo(a,16),new Eo(c,16),new Eo(l,16),new Eo(u,16),new Eo(f,16),new Eo(p,16))};ui.privateKeyToAsn1=ui.privateKeyToRSAPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.e)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.d)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.p)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.q)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.dP)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.dQ)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.qInv))])};ui.publicKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,jer,e,r)){var n=He.derToOid(e.publicKeyOid);if(n!==ui.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!He.validate(t,Ger,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=sn.util.createBuffer(e.publicKeyModulus).toHex(),a=sn.util.createBuffer(e.publicKeyExponent).toHex();return ui.setRsaPublicKey(new Eo(o,16),new Eo(a,16))};ui.publicKeyToAsn1=ui.publicKeyToSubjectPublicKeyInfo=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.BITSTRING,!1,[ui.publicKeyToRSAPublicKey(t)])])};ui.publicKeyToRSAPublicKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,lC(t.e))])};function irt(t,e,r){var n=sn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=sn.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(irt,"_encodePkcs1_v1_5");function RZ(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=sn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(RZ,"_decodePkcs1_v1_5");function zer(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){sn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Eo.ONE),t.q1=t.q.subtract(Eo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Eo.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(zer,"_generateKeyPair");function lC(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=sn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(lC,"_bnToBytes");function Yer(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(Yer,"_getMillerRabinTests");function Ztt(t){return sn.util.isNodejs&&typeof ove[t]=="function"}s(Ztt,"_detectNodeCrypto");function ert(t){return typeof zm.globalScope<"u"&&typeof zm.globalScope.crypto=="object"&&typeof zm.globalScope.crypto.subtle=="object"&&typeof zm.globalScope.crypto.subtle[t]=="function"}s(ert,"_detectSubtleCrypto");function trt(t){return typeof zm.globalScope<"u"&&typeof zm.globalScope.msCrypto=="object"&&typeof zm.globalScope.msCrypto.subtle=="object"&&typeof zm.globalScope.msCrypto.subtle[t]=="function"}s(trt,"_detectSubtleMsCrypto");function rrt(t){for(var e=sn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(rrt,"_intToUint8Array")});var sve=U((Xti,urt)=>{d();var mr=xi();oT();Fg();DO();rC();sT();IZ();sR();Vm();JEe();MO();So();typeof srt>"u"&&(srt=mr.jsbn.BigInteger);var srt,lt=mr.asn1,gi=mr.pki=mr.pki||{};urt.exports=gi.pbe=mr.pbe=mr.pbe||{};var lR=gi.oids,Ker={name:"EncryptedPrivateKeyInfo",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Jer={name:"PBES2Algorithms",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Xer={name:"pkcs-12PbeParams",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"iterations"}]};gi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=mr.random.getBytesSync(r.saltSize),i=r.count,o=lt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=lR["aes128-CBC"],p=mr.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=lR["aes192-CBC"],p=mr.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=lR["aes256-CBC"],p=mr.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=lR.desCBC,p=mr.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=lrt(h),y=mr.pkcs5.pbkdf2(e,n,i,a,g),E=mr.random.getBytesSync(u),x=p(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes();var b=Zer(n,o,a,h);c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(lR.pkcs5PBES2).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(lR.pkcs5PBKDF2).getBytes()),b]),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(f).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){a=24;var _=new mr.util.ByteBuffer(n),y=gi.pbe.generatePkcs12Key(e,_,1,i,a),E=gi.pbe.generatePkcs12Key(e,_,2,i,a),x=mr.des.createEncryptionCipher(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes(),c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(lR["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,n),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[c,lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,l)]);return k};gi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!lt.validate(t,Ker,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=lt.derToOid(n.encryptionOid),c=gi.pbe.getCipher(a,n.encryptionParams,e),l=mr.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=lt.fromDer(c.output)),r};gi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:lt.toDer(t).getBytes()};return mr.pem.encode(r,{maxline:e})};gi.encryptedPrivateKeyFromPem=function(t){var e=mr.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return lt.fromDer(e.body)};gi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=gi.wrapRsaPrivateKey(gi.privateKeyToAsn1(t));return n=gi.encryptPrivateKeyInfo(n,e,r),gi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=mr.random.getBytesSync(8),c=mr.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=mr.random.getBytesSync(8),c=mr.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=mr.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(lt.toDer(gi.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:mr.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return mr.pem.encode(p)};gi.decryptRsaPrivateKey=function(t,e){var r=null,n=mr.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=mr.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=mr.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=mr.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=mr.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=mr.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return mr.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return mr.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return mr.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=mr.util.hexToBytes(n.dekInfo.parameters),l=mr.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(mr.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=gi.decryptPrivateKeyInfo(lt.fromDer(r),e):r=lt.fromDer(r),r!==null&&(r=gi.privateKeyFromAsn1(r)),r};gi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in mr.md))throw new Error('"sha1" hash algorithm unavailable.');o=mr.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new mr.util.ByteBuffer,p=new mr.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new mr.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),E=new mr.util.ByteBuffer;for(c=0;c<y;c++)E.putByte(e.at(c%h));var x=u*Math.ceil(m/u),b=new mr.util.ByteBuffer;for(c=0;c<x;c++)b.putByte(p.at(c%m));var _=E;_.putBuffer(b);for(var k=Math.ceil(i/l),P=1;P<=k;P++){var N=new mr.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var M=0;M<n;M++)o.start(),o.update(N.getBytes()),N=o.digest();var J=new mr.util.ByteBuffer;for(c=0;c<u;c++)J.putByte(N.at(c%l));var pe=Math.ceil(h/u)+Math.ceil(m/u),Y=new mr.util.ByteBuffer;for(a=0;a<pe;a++){var G=new mr.util.ByteBuffer(_.getBytes(u)),H=511;for(c=J.length()-1;c>=0;c--)H=H>>8,H+=J.at(c)+G.at(c),G.setAt(c,H&255);Y.putBuffer(G)}_=Y,f.putBuffer(N)}return f.truncate(f.length()-i),f};gi.pbe.getCipher=function(t,e,r){switch(t){case gi.oids.pkcs5PBES2:return gi.pbe.getCipherForPBES2(t,e,r);case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:return gi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};gi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!lt.validate(e,Jer,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=lt.derToOid(n.kdfOid),t!==gi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=lt.derToOid(n.encOid),t!==gi.oids["aes128-CBC"]&&t!==gi.oids["aes192-CBC"]&&t!==gi.oids["aes256-CBC"]&&t!==gi.oids["des-EDE3-CBC"]&&t!==gi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=mr.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(gi.oids[t]){case"aes128-CBC":l=16,u=mr.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=mr.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=mr.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=mr.des.createDecryptionCipher;break;case"desCBC":l=8,u=mr.des.createDecryptionCipher;break}var f=crt(n.prfOid),p=mr.pkcs5.pbkdf2(r,a,c,l,f),m=n.encIv,h=u(p);return h.start(m),h};gi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!lt.validate(e,Xer,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mr.util.createBuffer(n.salt),c=mr.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=mr.des.startDecrypting;break;case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(y,E){var x=mr.rc2.createDecryptionCipher(y,40);return x.start(E,null),x},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=crt(n.prfOid),m=gi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=gi.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(m,h)};gi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in mr.md))throw new Error('"md5" hash algorithm unavailable.');n=mr.md.md5.create()}e===null&&(e="");for(var i=[art(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(art(n,i[a-1]+t+e));return i.join("").substr(0,r)};function art(t,e){return t.start().update(e).digest().getBytes()}s(art,"hash");function crt(t){var e;if(!t)e="hmacWithSHA1";else if(e=gi.oids[lt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return lrt(e)}s(crt,"prfOidToMessageDigest");function lrt(t){var e=mr.md;switch(t){case"hmacWithSHA224":e=mr.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(lrt,"prfAlgorithmToMessageDigest");function Zer(t,e,r,n){var i=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,t),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,mr.util.hexToBytes(r.toString(16))),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(gi.oids[n]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.NULL,!1,"")])),i}s(Zer,"createPbkdf2Params")});var ave=U((tri,prt)=>{d();var XB=xi();Fg();So();var ar=XB.asn1,ZB=prt.exports=XB.pkcs7asn1=XB.pkcs7asn1||{};XB.pkcs7=XB.pkcs7||{};XB.pkcs7.asn1=ZB;var drt={name:"ContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ZB.contentInfoValidator=drt;var frt={name:"EncryptedContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ZB.envelopedDataValidator={name:"EnvelopedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(frt)};ZB.encryptedDataValidator={name:"EncryptedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"}].concat(frt)};var etr={name:"SignerInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ZB.signedDataValidator={name:"SignedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},drt,{name:"SignedData.Certificates",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,capture:"signerInfos",optional:!0,value:[etr]}]};ZB.recipientInfoValidator={name:"RecipientInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var cve=U((nri,mrt)=>{d();var uR=xi();So();uR.mgf=uR.mgf||{};var ttr=mrt.exports=uR.mgf.mgf1=uR.mgf1=uR.mgf1||{};ttr.create=function(t){var e={generate:s(function(r,n){for(var i=new uR.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new uR.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var grt=U((sri,hrt)=>{d();var kZ=xi();cve();hrt.exports=kZ.mgf=kZ.mgf||{};kZ.mgf.mgf1=kZ.mgf1});var PZ=U((cri,Art)=>{d();var dR=xi();Vm();So();var rtr=Art.exports=dR.pss=dR.pss||{};rtr.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=dR.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||dR.random,c={};return c.encode=function(l,u){var f,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new dR.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var E=e.digest().getBytes(),x=new dR.util.ByteBuffer;x.fillWithByte(0,m-o-n-2),x.putByte(1),x.putBytes(g);var b=x.getBytes(),_=m-n-1,k=r.generate(E,_),P="";for(f=0;f<_;f++)P+=String.fromCharCode(b.charCodeAt(f)^k.charCodeAt(f));var N=65280>>8*m-p&255;return P=String.fromCharCode(P.charCodeAt(0)&~N)+P.substr(1),P+E+"\xBC"},c.verify=function(l,u,f){var p,m=f-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),E=u.substr(g,n),x=65280>>8*h-m&255;if((y.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(E,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^b.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~x)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=_.substr(-o),N=new dR.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(l),N.putBytes(P),e.start(),e.update(N.getBytes());var M=e.digest().getBytes();return E===M},c}});var NZ=U((uri,xrt)=>{d();var an=xi();oT();Fg();DO();rC();grt();sT();sR();PZ();MO();So();var j=an.asn1,jt=xrt.exports=an.pki=an.pki||{},vo=jt.oids,Wa={};Wa.CN=vo.commonName;Wa.commonName="CN";Wa.C=vo.countryName;Wa.countryName="C";Wa.L=vo.localityName;Wa.localityName="L";Wa.ST=vo.stateOrProvinceName;Wa.stateOrProvinceName="ST";Wa.O=vo.organizationName;Wa.organizationName="O";Wa.OU=vo.organizationalUnitName;Wa.organizationalUnitName="OU";Wa.E=vo.emailAddress;Wa.emailAddress="E";var Crt=an.pki.rsa.publicKeyValidator,ntr={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Crt,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},itr={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},otr={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Crt,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},str={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[otr,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in vo&&(o.name=vo[o.type],o.name in Wa&&(o.shortName=Wa[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=j.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in vo&&(c.name=vo[c.type],c.name in Wa&&(c.shortName=Wa[c.name])),c.type===vo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function lT(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(lT,"_getAttribute");var BZ=s(function(t,e,r){var n={};if(t!==vo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:vo.sha1},mgf:{algorithmOid:vo.mgf1,hash:{algorithmOid:vo.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,itr,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=j.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),DZ=s(function(t){switch(vo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return an.md.sha1.create();case"md5WithRSAEncryption":return an.md.md5.create();case"sha256WithRSAEncryption":return an.md.sha256.create();case"sha384WithRSAEncryption":return an.md.sha384.create();case"sha512WithRSAEncryption":return an.md.sha512.create();case"RSASSA-PSS":return an.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Ert=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case vo.sha1WithRSAEncryption:case vo.sha1WithRSASignature:break;case vo["RSASSA-PSS"]:var n,i;if(n=vo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||an.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=vo[e.signatureParameters.mgf.algorithmOid],i===void 0||an.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=an.mgf[i].create(an.md[n].create()),n=vo[e.signatureParameters.hash.algorithmOid],n===void 0||an.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=an.pss.create(an.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");jt.certificateFromPem=function(t,e,r){var n=an.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificateFromAsn1(o,e)};jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:j.toDer(jt.certificateToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.publicKeyFromPem=function(t){var e=an.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return jt.publicKeyFromAsn1(n)};jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:j.toDer(jt.publicKeyToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||an.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};jt.certificationRequestFromPem=function(t,e,r){var n=an.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificationRequestFromAsn1(o,e)};jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:j.toDer(jt.certificationRequestToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return lT(t.issuer,e)},t.issuer.addField=function(e){Ym([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return lT(t.subject,e)},t.subject.addField=function(e){Ym([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Ym(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Ym(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)vrt(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||an.md.sha1.create();var n=vo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=jt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=DZ({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||jt.getTBSCertificate(e),l=j.toDer(c);a.update(l.getBytes())}return a!==null&&(r=Ert({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=vo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return an.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,ntr,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=an.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=an.asn1.derToOid(r.certSignatureOid),a.signatureParameters=BZ(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=an.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=BZ(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=DZ({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=an.md.sha1.create(),p=j.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return lT(a.issuer,g)},a.issuer.addField=function(g){Ym([g]),a.issuer.attributes.push(g)},a.issuer.attributes=jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var m=an.md.sha1.create(),h=j.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return lT(a.subject,g)},a.subject.addField=function(g){Ym([g]),a.subject.attributes.push(g)},a.subject.attributes=jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(jt.certificateExtensionFromAsn1(n.value[i]));return e};jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in vo){if(e.name=vo[e.id],e.name==="keyUsage"){var r=j.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=j.fromDer(e.value);r.value.length>0&&r.value[0].type===j.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===j.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=j.fromDer(e.value),a=0;a<r.value.length;++a){var c=j.derToOid(r.value[a].value);c in vo?e[vo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=j.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=j.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=an.util.bytesToIP(l.value);break;case 8:f.oid=j.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=j.fromDer(e.value);e.subjectKeyIdentifier=an.util.bytesToHex(r.value)}}return e};jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,str,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=an.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=BZ(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=an.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=BZ(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=DZ({signatureOid:a.signatureOid,type:"certification request"});var c=j.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=an.md.sha1.create();return a.subject.getField=function(u){return lT(a.subject,u)},a.subject.addField=function(u){Ym([u]),a.subject.attributes.push(u)},a.subject.attributes=jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return lT(a,u)},a.addAttribute=function(u){Ym([u]),a.attributes.push(u)},a.attributes=jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return lT(t.subject,e)},t.subject.addField=function(e){Ym([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return lT(t,e)},t.addAttribute=function(e){Ym([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Ym(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Ym(e),t.attributes=e},t.sign=function(e,r){t.md=r||an.md.sha1.create();var n=vo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=jt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=DZ({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||jt.getCertificationRequestInfo(t),i=j.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Ert({certificate:t,md:r,signature:t.signature})),e},t};function eD(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=j.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===j.Type.UTF8&&(a=an.util.encodeUtf8(a))),n=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(r.type).getBytes()),j.create(j.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(eD,"_dnToAsn1");function Ym(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in jt.oids?e.name=jt.oids[e.type]:e.shortName&&e.shortName in Wa&&(e.name=jt.oids[Wa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in jt.oids)e.type=jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Wa&&(e.shortName=Wa[e.name]),e.type===vo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(jt.certificateExtensionToAsn1(vrt(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Ym,"_fillMissingFields");function vrt(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in jt.oids&&(t.name=jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in jt.oids)t.id=jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in vo?c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(vo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=an.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[eD(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=an.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var c=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),E=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=an.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));E.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(vrt,"_fillMissingExtensionFields");function lve(t,e){switch(t){case vo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,r);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(lve,"_signatureParametersToAsn1");function atr(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=an.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(atr,"_CRIAttributesToAsn1");var ctr=new Date("1950-01-01T00:00:00Z"),ltr=new Date("2050-01-01T00:00:00Z");function yrt(t){return t>=ctr&&t<ltr?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(yrt,"_dateToAsn1");jt.getTBSCertificate=function(t){var e=yrt(t.validity.notBefore),r=yrt(t.validity.notAfter),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,an.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),lve(t.siginfo.algorithmOid,t.siginfo.parameters)]),eD(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,r]),eD(t.subject),jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(jt.certificateExtensionsToAsn1(t.extensions)),n};jt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),eD(t.subject),jt.publicKeyToAsn1(t.publicKey),atr(t)]);return e};jt.distinguishedNameToAsn1=function(t){return eD(t)};jt.certificateToAsn1=function(t){var e=t.tbsCertificate||jt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),lve(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(jt.certificateExtensionToAsn1(t[n]));return e};jt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=j.toDer(r).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,r)),e};jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||jt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),lve(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=an.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];an.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=an.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;an.util.isArray(c)||(c=[c]);for(var l=j.toDer(jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=j.toDer(jt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!an.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=an.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!an.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=j.toDer(jt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=j.toDer(jt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=an.md.sha1.create();a.attributes=jt.RDNAttributesAsArray(eD(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;an.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:jt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:jt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var E=l.getExtension("basicConstraints"),x=l.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:jt.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:jt.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in E){var b=c-1;b>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:jt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,c,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:jt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!an.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++c}while(e.length>0);return!0}});var dve=U((pri,Irt)=>{d();var _s=xi();Fg();$B();sT();ave();sve();Vm();MO();JB();So();NZ();var Ie=_s.asn1,Ui=_s.pki,OO=Irt.exports=_s.pkcs12=_s.pkcs12||{},brt={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},utr={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},brt,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},dtr={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},ftr={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},ptr={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function FO(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(FO,"_getBagsByAttribute");OO.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,utr,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(E){var x={},b;return"localKeyId"in E?b=E.localKeyId:"localKeyIdHex"in E&&(b=_s.util.hexToBytes(E.localKeyIdHex)),b===void 0&&!("friendlyName"in E)&&"bagType"in E&&(x[E.bagType]=FO(a.safeContents,null,null,E.bagType)),b!==void 0&&(x.localKeyId=FO(a.safeContents,"localKeyId",b,E.bagType)),"friendlyName"in E&&(x.friendlyName=FO(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),x},"getBags"),getBagsByFriendlyName:s(function(E,x){return FO(a.safeContents,"friendlyName",E,x)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(E,x){return FO(a.safeContents,"localKeyId",E,x)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==Ui.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Ie.Class.UNIVERSAL||c.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=uve(c),n.mac){var l=null,u=0,f=Ie.derToOid(n.macAlgorithm);switch(f){case Ui.oids.sha1:l=_s.md.sha1.create(),u=20;break;case Ui.oids.sha256:l=_s.md.sha256.create(),u=32;break;case Ui.oids.sha384:l=_s.md.sha384.create(),u=48;break;case Ui.oids.sha512:l=_s.md.sha512.create(),u=64;break;case Ui.oids.md5:l=_s.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new _s.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(_s.util.bytesToHex(n.macIterations),16):1,h=OO.generateKey(r,p,3,m,u,l),g=_s.hmac.create();g.start(l,h),g.update(c.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return mtr(a,c.value,e,r),a};function uve(t){if(t.composed||t.constructed){for(var e=_s.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(uve,"_decodePkcs7Data");function mtr(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Ie.validate(o,brt,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case Ui.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=uve(p).value;break;case Ui.oids.encryptedData:f=htr(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Ie.derToOid(a.contentType),l}u.safeBags=gtr(f,r,n),t.safeContents.push(u)}}s(mtr,"_decodeAuthenticatedSafe");function htr(t,e){var r={},n=[];if(!Ie.validate(t,_s.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==Ui.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=Ui.pbe.getCipher(o,r.encParameter,e),c=uve(r.encryptedContentAsn1),l=_s.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(htr,"_decryptSafeContents");function gtr(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Ie.validate(o,dtr,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Ie.derToOid(a.bagId),attributes:Atr(a.bagAttributes)};n.push(u);var f,p,m=a.bagValue.value[0];switch(u.type){case Ui.oids.pkcs8ShroudedKeyBag:if(m=Ui.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ui.oids.keyBag:try{u.key=Ui.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Ui.oids.certBag:f=ptr,p=s(function(){if(Ie.derToOid(a.certId)!==Ui.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=Ui.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!Ie.validate(m,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(gtr,"_decodeSafeContents");function Atr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],ftr,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(Ui.oids[a]!==void 0){e[Ui.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Ui.oids[a]].push(n.values[c].value)}}return e}s(Atr,"_decodeBagAttributes");OO.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=_s.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=_s.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Ui.certificateFromPem(a));var c=_s.md.sha1.create();c.update(Ie.toDer(Ui.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=_s.random.getBytes(20);var l=[];i!==null&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,l));var u=[],f=[];e!==null&&(_s.util.isArray(e)?f=e:f=[e]);for(var p=[],m=0;m<f.length;++m){e=f[m],typeof e=="string"&&(e=Ui.certificateFromPem(e));var h=m===0?o:void 0,g=Ui.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),x=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(E).getBytes())])]);u.push(x)}var b=null;if(t!==null){var _=Ui.wrapRsaPrivateKey(Ui.privateKeyToAsn1(t));r===null?b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ui.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[b]),P=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(P)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),M;if(n.useMac){var c=_s.md.sha1.create(),J=new _s.util.ByteBuffer(_s.random.getBytes(n.saltSize)),pe=n.count,t=OO.generateKey(r,J,3,pe,20),Y=_s.hmac.create();Y.start(c,t),Y.update(Ie.toDer(N).getBytes());var G=Y.getMac();M=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,G.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,J.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(pe).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),M])};OO.generateKey=_s.pbe.generatePkcs12Key});var pve=U((gri,Trt)=>{d();var uT=xi();Fg();sT();sve();sR();IZ();dve();PZ();MO();So();NZ();var fve=uT.asn1,tD=Trt.exports=uT.pki=uT.pki||{};tD.pemToDer=function(t){var e=uT.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return uT.util.createBuffer(e.body)};tD.privateKeyFromPem=function(t){var e=uT.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=fve.fromDer(e.body);return tD.privateKeyFromAsn1(n)};tD.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:fve.toDer(tD.privateKeyToAsn1(t)).getBytes()};return uT.pem.encode(r,{maxline:e})};tD.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:fve.toDer(t).getBytes()};return uT.pem.encode(r,{maxline:e})}});var Cve=U((yri,Drt)=>{d();var It=xi();Fg();$B();EZ();sR();pve();Vm();JB();So();var OZ=s(function(t,e,r,n){var i=It.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=It.util.createBuffer(),f=It.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);f.start("MD5",c);var h=It.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",l);var y=It.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),y.putBuffer(f.digest());return i.putBytes(It.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),ytr=s(function(t,e,r){var n=It.hmac.create();n.start("SHA1",t);var i=It.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Ctr=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=It.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Etr=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=It.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),sp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return It.util.createBuffer(t.getBytes(r))},"readVector"),Km=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),K={};K.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};K.SupportedVersions=[K.Versions.TLS_1_1,K.Versions.TLS_1_0];K.Version=K.SupportedVersions[0];K.MaxFragment=15360;K.ConnectionEnd={server:0,client:1};K.PRFAlgorithm={tls_prf_sha256:0};K.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};K.CipherType={stream:0,block:1,aead:2};K.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};K.CompressionMethod={none:0,deflate:1};K.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};K.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};K.Alert={};K.Alert.Level={warning:1,fatal:2};K.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};K.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};K.CipherSuites={};K.getCipherSuite=function(t){var e=null;for(var r in K.CipherSuites){var n=K.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};K.handleUnexpected=function(t,e){var r=!t.open&&t.entity===K.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unexpected_message}})};K.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(K.queue(t,K.createAlert(t,{level:K.Alert.Level.warning,description:K.Alert.Description.no_renegotiation})),K.flush(t)),t.process()};K.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===K.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:It.util.createBuffer(o.getBytes(32)),session_id:sp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=sp(o,2),n.compression_methods=sp(o,1)),a=r-(a-o.length()),a>0){for(var c=sp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:sp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=sp(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(sp(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=K.getCipherSuite(n.cipher_suite);else for(var m=It.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=K.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.handshake_failure},cipherSuite:It.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=K.CompressionMethod.none}return n};K.createSecurityParameters=function(t,e){var r=t.entity===K.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:K.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:K.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};K.handleServerHello=function(t,e,r){var n=K.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=Srt,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=xtr,t.session.resuming=!1,K.createSecurityParameters(t,n)),t.session.id=i,t.process()}};K.handleClientHello=function(t,e,r){var n=K.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=It.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<K.SupportedVersions.length&&(a=K.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Ave,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Rtr:gve,t.session.resuming=!1,K.createSecurityParameters(t,n)),t.open=!0,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerHello(t)})),t.session.resuming?(K.queue(t,K.createRecord(t,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),t.state.pending=K.createConnectionState(t),t.state.current.write=t.state.pending.write,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createFinished(t)}))):(K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificate(t)})),t.fail||(K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerKeyExchange(t)})),t.verifyClient!==!1&&K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificateRequest(t)})),K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerHelloDone(t)})))),K.flush(t),t.process()}};K.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:sp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=sp(i.certificate_list,3),a=It.asn1.fromDer(o),o=It.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate}})}var l=t.entity===K.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?wrt:gve:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],K.verifyCertificateChain(t,c)&&(t.expect=l?wrt:gve)),t.process()};K.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unsupported_certificate}});t.expect=btr,t.process()};K.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:sp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=It.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=It.random.getBytes(48)}t.expect=Ave,t.session.clientCertificate!==null&&(t.expect=ktr),t.process()};K.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:sp(n,1),certificate_authorities:sp(n,2)};t.session.certificateRequest=i,t.expect=Itr,t.process()};K.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:sp(n,2).getBytes()},a=It.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.handshake_failure}})}t.expect=Ave,t.process()};K.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!It.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificate(t)}),K.queue(t,e)),e=K.createRecord(t,{type:K.ContentType.handshake,data:K.createClientKeyExchange(t)}),K.queue(t,e),t.expect=_tr;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&K.queue(c,K.createRecord(c,{type:K.ContentType.handshake,data:K.createCertificateVerify(c,l)})),K.queue(c,K.createRecord(c,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),c.state.pending=K.createConnectionState(c),c.state.current.write=c.state.pending.write,K.queue(c,K.createRecord(c,{type:K.ContentType.handshake,data:K.createFinished(c)})),c.expect=Srt,K.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);K.getClientSignature(t,a)};K.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var r=t.entity===K.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=K.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?Ttr:Ptr,t.process()};K.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=It.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===K.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=OZ;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(K.queue(t,K.createRecord(t,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createFinished(t)}))),t.expect=a?wtr:Btr,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,K.flush(t),t.isConnected=!0,t.connected(t),t.process()};K.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case K.Alert.Description.close_notify:i="Connection closed.";break;case K.Alert.Description.unexpected_message:i="Unexpected message.";break;case K.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case K.Alert.Description.decryption_failed:i="Decryption failed.";break;case K.Alert.Description.record_overflow:i="Record overflow.";break;case K.Alert.Description.decompression_failure:i="Decompression failed.";break;case K.Alert.Description.handshake_failure:i="Handshake failure.";break;case K.Alert.Description.bad_certificate:i="Bad certificate.";break;case K.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case K.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case K.Alert.Description.certificate_expired:i="Certificate expired.";break;case K.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case K.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case K.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case K.Alert.Description.access_denied:i="Access denied.";break;case K.Alert.Description.decode_error:i="Decode error.";break;case K.Alert.Description.decrypt_error:i="Decrypt error.";break;case K.Alert.Description.export_restriction:i="Export restriction.";break;case K.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case K.Alert.Description.insufficient_security:i="Insufficient security.";break;case K.Alert.Description.internal_error:i="Internal error.";break;case K.Alert.Description.user_canceled:i="User canceled.";break;case K.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===K.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===K.ConnectionEnd.client?"server":"client",alert:n}),t.process()};K.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=It.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in FZ[t.entity][t.expect]?(t.entity===K.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:It.md.md5.create(),sha1:It.md.sha1.create()}),n!==K.HandshakeType.hello_request&&n!==K.HandshakeType.certificate_verify&&n!==K.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),FZ[t.entity][t.expect][n](t,e,i)):K.handleUnexpected(t,e)};K.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};K.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===K.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();K.queue(t,K.createRecord(t,{type:K.ContentType.heartbeat,data:K.createHeartbeat(K.HeartbeatMessageType.heartbeat_response,o)})),K.flush(t)}else if(n===K.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,It.util.createBuffer(o))}t.process()};var vtr=0,xtr=1,wrt=2,btr=3,Itr=4,Srt=5,Ttr=6,wtr=7,_tr=8,Str=0,Rtr=1,gve=2,ktr=3,Ave=4,Ptr=5,Btr=6,$=K.handleUnexpected,Rrt=K.handleChangeCipherSpec,yu=K.handleAlert,$d=K.handleHandshake,krt=K.handleApplicationData,Cu=K.handleHeartbeat,yve=[];yve[K.ConnectionEnd.client]=[[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[Rrt,yu,$,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,krt,Cu],[$,yu,$d,$,Cu]];yve[K.ConnectionEnd.server]=[[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[Rrt,yu,$,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,krt,Cu],[$,yu,$d,$,Cu]];var dT=K.handleHelloRequest,Dtr=K.handleServerHello,Prt=K.handleCertificate,_rt=K.handleServerKeyExchange,mve=K.handleCertificateRequest,LZ=K.handleServerHelloDone,Brt=K.handleFinished,FZ=[];FZ[K.ConnectionEnd.client]=[[$,$,Dtr,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,Prt,_rt,mve,LZ,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,_rt,mve,LZ,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,$,mve,LZ,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,$,$,LZ,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Brt],[dT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[dT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Ntr=K.handleClientHello,Ltr=K.handleClientKeyExchange,Mtr=K.handleCertificateVerify;FZ[K.ConnectionEnd.server]=[[$,Ntr,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,Prt,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Ltr,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Mtr,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Brt],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];K.generateKeys=function(t,e){var r=OZ,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===K.Versions.TLS_1_0.major&&t.version.minor===K.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};K.createConnectionState=function(t){var e=t.entity===K.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=K.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case K.CompressionMethod.none:break;case K.CompressionMethod.deflate:n.read.compressFunction=Etr,n.write.compressFunction=Ctr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};K.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=It.util.createBuffer();return r.putInt32(e),r.putBytes(It.random.getBytes(28)),r};K.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};K.createAlert=function(t,e){var r=It.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),K.createRecord(t,{type:K.ContentType.alert,data:r})};K.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=It.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=It.util.createBuffer();o.putByte(K.CompressionMethod.none);var a=o.length(),c=It.util.createBuffer();if(t.virtualHost){var l=It.util.createBuffer();l.putByte(0),l.putByte(0);var u=It.util.createBuffer();u.putByte(0),Km(u,2,It.util.createBuffer(t.virtualHost));var f=It.util.createBuffer();Km(f,2,u),Km(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=It.util.createBuffer();return g.putByte(K.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),Km(g,1,It.util.createBuffer(m)),Km(g,2,e),Km(g,1,o),p>0&&Km(g,2,c),g};K.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=It.util.createBuffer();return n.putByte(K.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Km(n,1,It.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};K.createCertificate=function(t){var e=t.entity===K.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=It.util.createBuffer();if(r!==null)try{It.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=It.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=It.util.createBuffer(c.body);o===null&&(o=It.asn1.fromDer(u.bytes(),!1));var f=It.util.createBuffer();Km(f,3,u),i.putBuffer(f)}r=It.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate}})}var p=3+i.length(),m=It.util.createBuffer();return m.putByte(K.HandshakeType.certificate),m.putInt24(p),Km(m,3,i),m};K.createClientKeyExchange=function(t){var e=It.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(It.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=It.util.createBuffer();return o.putByte(K.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};K.createServerKeyExchange=function(t){var e=0,r=It.util.createBuffer();return e>0&&(r.putByte(K.HandshakeType.server_key_exchange),r.putInt24(e)),r};K.getClientSignature=function(t,e){var r=It.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=It.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};K.createCertificateVerify=function(t,e){var r=e.length+2,n=It.util.createBuffer();return n.putByte(K.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};K.createCertificateRequest=function(t){var e=It.util.createBuffer();e.putByte(1);var r=It.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=It.pki.distinguishedNameToAsn1(i.subject),a=It.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=It.util.createBuffer();return l.putByte(K.HandshakeType.certificate_request),l.putInt24(c),Km(l,1,e),Km(l,2,r),l};K.createServerHelloDone=function(t){var e=It.util.createBuffer();return e.putByte(K.HandshakeType.server_hello_done),e.putInt24(0),e};K.createChangeCipherSpec=function(){var t=It.util.createBuffer();return t.putByte(1),t};K.createFinished=function(t){var e=It.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===K.ConnectionEnd.client,n=t.session.sp,i=12,o=OZ,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=It.util.createBuffer();return c.putByte(K.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};K.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=It.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(It.random.getBytes(o)),n};K.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===K.ContentType.handshake||e.type===K.ContentType.alert||e.type===K.ContentType.change_cipher_spec))){if(e.type===K.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=K.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>K.MaxFragment;)n.push(K.createRecord(t,{type:e.type,data:It.util.createBuffer(i.slice(0,K.MaxFragment))})),i=i.slice(K.MaxFragment);i.length>0&&n.push(K.createRecord(t,{type:e.type,data:It.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};K.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var hve=s(function(t){switch(t){case!0:return!0;case It.pki.certificateError.bad_certificate:return K.Alert.Description.bad_certificate;case It.pki.certificateError.unsupported_certificate:return K.Alert.Description.unsupported_certificate;case It.pki.certificateError.certificate_revoked:return K.Alert.Description.certificate_revoked;case It.pki.certificateError.certificate_expired:return K.Alert.Description.certificate_expired;case It.pki.certificateError.certificate_unknown:return K.Alert.Description.certificate_unknown;case It.pki.certificateError.unknown_ca:return K.Alert.Description.unknown_ca;default:return K.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Ftr=s(function(t){switch(t){case!0:return!0;case K.Alert.Description.bad_certificate:return It.pki.certificateError.bad_certificate;case K.Alert.Description.unsupported_certificate:return It.pki.certificateError.unsupported_certificate;case K.Alert.Description.certificate_revoked:return It.pki.certificateError.certificate_revoked;case K.Alert.Description.certificate_expired:return It.pki.certificateError.certificate_expired;case K.Alert.Description.certificate_unknown:return It.pki.certificateError.certificate_unknown;case K.Alert.Description.unknown_ca:return It.pki.certificateError.unknown_ca;default:return It.pki.certificateError.bad_certificate}},"_alertDescToCertError");K.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=hve(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!It.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=Ftr(u))}return u},It.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||It.util.isArray(i))&&(i={send:!0,alert:{level:K.Alert.Level.fatal,description:hve(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:K.Alert.Level.fatal,description:hve(i.error)}),t.error(t,i)}return!t.fail};K.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=It.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=It.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};K.createConnection=function(t){var e=null;t.caStore?It.util.isArray(t.caStore)?e=It.pki.createCaStore(t.caStore):e=t.caStore:e=It.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in K.CipherSuites)r.push(K.CipherSuites[n])}var i=t.server?K.ConnectionEnd.server:K.ConnectionEnd.client,o=t.sessionCache?K.createSessionCache(t.sessionCache):null,a={version:{major:K.Version.major,minor:K.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:It.util.createBuffer(),tlsData:It.util.createBuffer(),data:It.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===K.ConnectionEnd.client?"client":"server"),p.send&&(K.queue(f,K.createAlert(f,p.alert)),K.flush(f));var m=p.fatal!==!1;m&&(f.fail=!0),t.error(f,p),m&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:K.Version.major,minor:K.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===K.ConnectionEnd.client?vtr:Str,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=K.createConnectionState(a)},a.reset();var c=s(function(f,p){var m=p.type-K.ContentType.change_cipher_spec,h=yve[f.entity][f.expect];m in h?h[m](f,p):K.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,m=f.input,h=m.length();if(h<5)p=5-h;else{f.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:It.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,m=f.input,h=m.length();if(h<f.record.length)p=f.record.length-h;else{f.record.fragment.putBytes(m.getBytes(f.record.length)),m.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==K.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:It.md.md5.create(),sha1:It.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=K.createRandom().getBytes(),a.open=!0,K.queue(a,K.createRecord(a,{type:K.ContentType.handshake,data:K.createClientHello(a)})),K.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return K.queue(a,K.createRecord(a,{type:K.ContentType.application_data,data:It.util.createBuffer(f)})),K.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof It.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,K.queue(a,K.createRecord(a,{type:K.ContentType.heartbeat,data:K.createHeartbeat(K.HeartbeatMessageType.heartbeat_request,f,p)})),K.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,K.queue(a,K.createAlert(a,{level:K.Alert.Level.warning,description:K.Alert.Description.close_notify})),K.flush(a)),a.closed(a)),a.reset(f)},a};Drt.exports=It.tls=It.tls||{};for(MZ in K)typeof K[MZ]!="function"&&(It.tls[MZ]=K[MZ]);var MZ;It.tls.prf_tls1=OZ;It.tls.hmac_sha1=ytr;It.tls.createSessionCache=K.createSessionCache;It.tls.createConnection=K.createConnection});var Mrt=U((vri,Lrt)=>{d();var fT=xi();oT();Cve();var Jm=Lrt.exports=fT.tls;Jm.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Jm.BulkCipherAlgorithm.aes,t.cipher_type=Jm.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Jm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Nrt};Jm.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Jm.BulkCipherAlgorithm.aes,t.cipher_type=Jm.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Jm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Nrt};function Nrt(t,e,r){var n=e.entity===fT.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:fT.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:fT.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=qtr,t.write.cipherFunction=Otr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Jm.hmac_sha1}s(Nrt,"initConnectionState");function Otr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Jm.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=fT.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Jm.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Qtr)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(Otr,"encrypt_aes_cbc_sha1");function Qtr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(Qtr,"encrypt_aes_cbc_sha1_padding");function Utr(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Utr,"decrypt_aes_cbc_sha1_padding");function qtr(t,e){var r=!1,n;t.version.minor===Jm.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Utr);var o=e.macLength,a=fT.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=fT.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Htr(e.macKey,a,l)&&r,r}s(qtr,"decrypt_aes_cbc_sha1");function Htr(t,e,r){var n=fT.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(Htr,"compareMacs")});var xve=U((Iri,Urt)=>{d();var zs=xi();rC();So();var QO=Urt.exports=zs.sha512=zs.sha512||{};zs.md.sha512=zs.md.algorithms.sha512=QO;var Ort=zs.sha384=zs.sha512.sha384=zs.sha512.sha384||{};Ort.create=function(){return QO.create("SHA-384")};zs.md.sha384=zs.md.algorithms.sha384=Ort;zs.sha512.sha256=zs.sha512.sha256||{create:s(function(){return QO.create("SHA-512/256")},"create")};zs.md["sha512/256"]=zs.md.algorithms["sha512/256"]=zs.sha512.sha256;zs.sha512.sha224=zs.sha512.sha224||{create:s(function(){return QO.create("SHA-512/224")},"create")};zs.md["sha512/224"]=zs.md.algorithms["sha512/224"]=zs.sha512.sha224;QO.create=function(t){if(Qrt||Wtr(),typeof t>"u"&&(t="SHA-512"),!(t in fR))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=fR[t],r=null,n=zs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=zs.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=zs.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),Frt(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=zs.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes(Eve.substr(0,c.blockLength-f));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);Frt(y,i,l);var E=zs.util.createBuffer(),x;t==="SHA-512"?x=y.length:t==="SHA-384"?x=y.length-2:x=y.length-4;for(var g=0;g<x;++g)E.putInt32(y[g][0]),(g!==x-1||t!=="SHA-512/224")&&E.putInt32(y[g][1]);return E},c};var Eve=null,Qrt=!1,vve=null,fR=null;function Wtr(){Eve="\x80",Eve+=zs.util.fillString("\0",128),vve=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],fR={},fR["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],fR["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],fR["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],fR["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Qrt=!0}s(Wtr,"_init");function Frt(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b,_,k,P,N,M,J,pe,Y,G,H,ce,ie,V,Q,z,re,fe,ne,me,he=r.length();he>=128;){for(V=0;V<16;++V)e[V][0]=r.getInt32()>>>0,e[V][1]=r.getInt32()>>>0;for(;V<80;++V)re=e[V-2],Q=re[0],z=re[1],n=((Q>>>19|z<<13)^(z>>>29|Q<<3)^Q>>>6)>>>0,i=((Q<<13|z>>>19)^(z<<3|Q>>>29)^(Q<<26|z>>>6))>>>0,ne=e[V-15],Q=ne[0],z=ne[1],o=((Q>>>1|z<<31)^(Q>>>8|z<<24)^Q>>>7)>>>0,a=((Q<<31|z>>>1)^(Q<<24|z>>>8)^(Q<<25|z>>>7))>>>0,fe=e[V-7],me=e[V-16],z=i+fe[1]+a+me[1],e[V][0]=n+fe[0]+o+me[0]+(z/4294967296>>>0)>>>0,e[V][1]=z>>>0;for(y=t[0][0],E=t[0][1],x=t[1][0],b=t[1][1],_=t[2][0],k=t[2][1],P=t[3][0],N=t[3][1],M=t[4][0],J=t[4][1],pe=t[5][0],Y=t[5][1],G=t[6][0],H=t[6][1],ce=t[7][0],ie=t[7][1],V=0;V<80;++V)u=((M>>>14|J<<18)^(M>>>18|J<<14)^(J>>>9|M<<23))>>>0,f=((M<<18|J>>>14)^(M<<14|J>>>18)^(J<<23|M>>>9))>>>0,p=(G^M&(pe^G))>>>0,m=(H^J&(Y^H))>>>0,c=((y>>>28|E<<4)^(E>>>2|y<<30)^(E>>>7|y<<25))>>>0,l=((y<<4|E>>>28)^(E<<30|y>>>2)^(E<<25|y>>>7))>>>0,h=(y&x|_&(y^x))>>>0,g=(E&b|k&(E^b))>>>0,z=ie+f+m+vve[V][1]+e[V][1],n=ce+u+p+vve[V][0]+e[V][0]+(z/4294967296>>>0)>>>0,i=z>>>0,z=l+g,o=c+h+(z/4294967296>>>0)>>>0,a=z>>>0,ce=G,ie=H,G=pe,H=Y,pe=M,Y=J,z=N+i,M=P+n+(z/4294967296>>>0)>>>0,J=z>>>0,P=_,N=k,_=x,k=b,x=y,b=E,z=i+a,y=n+o+(z/4294967296>>>0)>>>0,E=z>>>0;z=t[0][1]+E,t[0][0]=t[0][0]+y+(z/4294967296>>>0)>>>0,t[0][1]=z>>>0,z=t[1][1]+b,t[1][0]=t[1][0]+x+(z/4294967296>>>0)>>>0,t[1][1]=z>>>0,z=t[2][1]+k,t[2][0]=t[2][0]+_+(z/4294967296>>>0)>>>0,t[2][1]=z>>>0,z=t[3][1]+N,t[3][0]=t[3][0]+P+(z/4294967296>>>0)>>>0,t[3][1]=z>>>0,z=t[4][1]+J,t[4][0]=t[4][0]+M+(z/4294967296>>>0)>>>0,t[4][1]=z>>>0,z=t[5][1]+Y,t[5][0]=t[5][0]+pe+(z/4294967296>>>0)>>>0,t[5][1]=z>>>0,z=t[6][1]+H,t[6][0]=t[6][0]+G+(z/4294967296>>>0)>>>0,t[6][1]=z>>>0,z=t[7][1]+ie,t[7][0]=t[7][0]+ce+(z/4294967296>>>0)>>>0,t[7][1]=z>>>0,he-=128}}s(Frt,"_update")});var qrt=U(bve=>{d();var Gtr=xi();Fg();var Ql=Gtr.asn1;bve.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};bve.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var ent=U((Rri,Zrt)=>{d();var Eu=xi();LO();Vm();xve();So();var $rt=qrt(),jtr=$rt.publicKeyValidator,Vtr=$rt.privateKeyValidator;typeof Hrt>"u"&&(Hrt=Eu.jsbn.BigInteger);var Hrt,wve=Eu.util.ByteBuffer,$f=typeof Buffer>"u"?Uint8Array:Buffer;Eu.pki=Eu.pki||{};Zrt.exports=Eu.pki.ed25519=Eu.ed25519=Eu.ed25519||{};var qi=Eu.ed25519;qi.constants={};qi.constants.PUBLIC_KEY_BYTE_LENGTH=32;qi.constants.PRIVATE_KEY_BYTE_LENGTH=64;qi.constants.SEED_BYTE_LENGTH=32;qi.constants.SIGN_BYTE_LENGTH=64;qi.constants.HASH_BYTE_LENGTH=64;qi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Eu.random.getBytesSync(qi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==qi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+qi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=$E({message:e,encoding:"binary"});for(var r=new $f(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new $f(qi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Ktr(r,n),{publicKey:r,privateKey:n}};qi.privateKeyFromAsn1=function(t){var e={},r=[],n=Eu.asn1.validate(t,Vtr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Eu.asn1.derToOid(e.privateKeyOid),a=Eu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=$E({message:Eu.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};qi.publicKeyFromAsn1=function(t){var e={},r=[],n=Eu.asn1.validate(t,jtr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Eu.asn1.derToOid(e.publicKeyOid),a=Eu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return $E({message:c,encoding:"binary"})};qi.publicKeyFromPrivateKey=function(t){t=t||{};var e=$E({message:t.privateKey,encoding:"binary"});if(e.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new $f(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};qi.sign=function(t){t=t||{};var e=$E(t),r=$E({message:t.privateKey,encoding:"binary"});if(r.length===qi.constants.SEED_BYTE_LENGTH){var n=qi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.SEED_BYTE_LENGTH+" or "+qi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length);Jtr(i,e,e.length,r);for(var o=new $f(qi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};qi.verify=function(t){t=t||{};var e=$E(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=$E({message:t.signature,encoding:"binary"});if(r.length!==qi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+qi.constants.SIGN_BYTE_LENGTH);var n=$E({message:t.publicKey,encoding:"binary"});if(n.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+qi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length),o=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<qi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+qi.constants.SIGN_BYTE_LENGTH]=e[a];return Xtr(o,i,i.length,n)>=0};function $E(t){var e=t.message;if(e instanceof Uint8Array||e instanceof $f)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new wve(e,r)}else if(!(e instanceof wve))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new $f(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s($E,"messageToNativeBuffer");var _ve=_n(),QZ=_n([1]),$tr=_n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ztr=_n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Wrt=_n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Grt=_n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ive=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Ytr=_n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function UO(t,e){var r=Eu.md.sha512.create(),n=new wve(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new $f(qi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(UO,"sha512");function Ktr(t,e){var r=[_n(),_n(),_n(),_n()],n,i=UO(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Pve(r,i),kve(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(Ktr,"crypto_sign_keypair");function Jtr(t,e,r,n){var i,o,a=new Float64Array(64),c=[_n(),_n(),_n(),_n()],l=UO(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=UO(t.subarray(32),r+32);for(Sve(f),Pve(c,f),kve(t,c),i=32;i<64;++i)t[i]=n[i];var p=UO(t,r+64);for(Sve(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return zrt(t.subarray(32),a),u}s(Jtr,"crypto_sign");function Xtr(t,e,r,n){var i,o,a=new $f(32),c=[_n(),_n(),_n(),_n()],l=[_n(),_n(),_n(),_n()];if(o=-1,r<64||Ztr(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=UO(t,r);if(Sve(u),Jrt(c,l,u),Pve(l,e.subarray(32)),Rve(c,l),kve(a,c),r-=64,Yrt(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(Xtr,"crypto_sign_open");function zrt(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*Ive[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Ive[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Ive[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(zrt,"modL");function Sve(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;zrt(t,e)}s(Sve,"reduce");function Rve(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n(),u=_n(),f=_n();nD(r,t[1],t[0]),nD(f,e[1],e[0]),ms(r,r,f),rD(n,t[0],t[1]),rD(f,e[0],e[1]),ms(n,n,f),ms(i,t[3],e[3]),ms(i,i,ztr),ms(o,t[2],e[2]),rD(o,o,o),nD(a,n,r),nD(c,o,i),rD(l,o,i),rD(u,n,r),ms(t[0],a,c),ms(t[1],u,l),ms(t[2],l,c),ms(t[3],a,u)}s(Rve,"add");function jrt(t,e,r){for(var n=0;n<4;++n)Xrt(t[n],e[n],r)}s(jrt,"cswap");function kve(t,e){var r=_n(),n=_n(),i=_n();irr(i,e[2]),ms(r,e[0],i),ms(n,e[1],i),UZ(t,n),t[31]^=Krt(r)<<7}s(kve,"pack");function UZ(t,e){var r,n,i,o=_n(),a=_n();for(r=0;r<16;++r)a[r]=e[r];for(Tve(a),Tve(a),Tve(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Xrt(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(UZ,"pack25519");function Ztr(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n();return pT(t[2],QZ),trr(t[1],e),pR(i,t[1]),ms(o,i,$tr),nD(i,i,t[2]),rD(o,t[2],o),pR(a,o),pR(c,a),ms(l,c,a),ms(r,l,i),ms(r,r,o),rrr(r,r),ms(r,r,i),ms(r,r,o),ms(r,r,o),ms(t[0],r,o),pR(n,t[0]),ms(n,n,o),Vrt(n,i)&&ms(t[0],t[0],Ytr),pR(n,t[0]),ms(n,n,o),Vrt(n,i)?-1:(Krt(t[0])===e[31]>>7&&nD(t[0],_ve,t[0]),ms(t[3],t[0],t[1]),0)}s(Ztr,"unpackneg");function trr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(trr,"unpack25519");function rrr(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)pR(r,r),n!==1&&ms(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(rrr,"pow2523");function Vrt(t,e){var r=new $f(32),n=new $f(32);return UZ(r,t),UZ(n,e),Yrt(r,0,n,0)}s(Vrt,"neq25519");function Yrt(t,e,r,n){return nrr(t,e,r,n,32)}s(Yrt,"crypto_verify_32");function nrr(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(nrr,"vn");function Krt(t){var e=new $f(32);return UZ(e,t),e[0]&1}s(Krt,"par25519");function Jrt(t,e,r){var n,i;for(pT(t[0],_ve),pT(t[1],QZ),pT(t[2],QZ),pT(t[3],_ve),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,jrt(t,e,n),Rve(e,t),Rve(t,t),jrt(t,e,n)}s(Jrt,"scalarmult");function Pve(t,e){var r=[_n(),_n(),_n(),_n()];pT(r[0],Wrt),pT(r[1],Grt),pT(r[2],QZ),ms(r[3],Wrt,Grt),Jrt(t,r,e)}s(Pve,"scalarbase");function pT(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(pT,"set25519");function irr(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)pR(r,r),n!==2&&n!==4&&ms(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(irr,"inv25519");function Tve(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Tve,"car25519");function Xrt(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Xrt,"sel25519");function _n(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(_n,"gf");function rD(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(rD,"A");function nD(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(nD,"Z");function pR(t,e){ms(t,e,e)}s(pR,"S");function ms(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=0,g=0,y=0,E=0,x=0,b=0,_=0,k=0,P=0,N=0,M=0,J=0,pe=0,Y=0,G=0,H=0,ce=0,ie=0,V=0,Q=0,z=0,re=0,fe=0,ne=r[0],me=r[1],he=r[2],Qe=r[3],ke=r[4],tt=r[5],Fe=r[6],ht=r[7],St=r[8],xt=r[9],Tt=r[10],le=r[11],Ue=r[12],ye=r[13],nt=r[14],ee=r[15];n=e[0],o+=n*ne,a+=n*me,c+=n*he,l+=n*Qe,u+=n*ke,f+=n*tt,p+=n*Fe,m+=n*ht,h+=n*St,g+=n*xt,y+=n*Tt,E+=n*le,x+=n*Ue,b+=n*ye,_+=n*nt,k+=n*ee,n=e[1],a+=n*ne,c+=n*me,l+=n*he,u+=n*Qe,f+=n*ke,p+=n*tt,m+=n*Fe,h+=n*ht,g+=n*St,y+=n*xt,E+=n*Tt,x+=n*le,b+=n*Ue,_+=n*ye,k+=n*nt,P+=n*ee,n=e[2],c+=n*ne,l+=n*me,u+=n*he,f+=n*Qe,p+=n*ke,m+=n*tt,h+=n*Fe,g+=n*ht,y+=n*St,E+=n*xt,x+=n*Tt,b+=n*le,_+=n*Ue,k+=n*ye,P+=n*nt,N+=n*ee,n=e[3],l+=n*ne,u+=n*me,f+=n*he,p+=n*Qe,m+=n*ke,h+=n*tt,g+=n*Fe,y+=n*ht,E+=n*St,x+=n*xt,b+=n*Tt,_+=n*le,k+=n*Ue,P+=n*ye,N+=n*nt,M+=n*ee,n=e[4],u+=n*ne,f+=n*me,p+=n*he,m+=n*Qe,h+=n*ke,g+=n*tt,y+=n*Fe,E+=n*ht,x+=n*St,b+=n*xt,_+=n*Tt,k+=n*le,P+=n*Ue,N+=n*ye,M+=n*nt,J+=n*ee,n=e[5],f+=n*ne,p+=n*me,m+=n*he,h+=n*Qe,g+=n*ke,y+=n*tt,E+=n*Fe,x+=n*ht,b+=n*St,_+=n*xt,k+=n*Tt,P+=n*le,N+=n*Ue,M+=n*ye,J+=n*nt,pe+=n*ee,n=e[6],p+=n*ne,m+=n*me,h+=n*he,g+=n*Qe,y+=n*ke,E+=n*tt,x+=n*Fe,b+=n*ht,_+=n*St,k+=n*xt,P+=n*Tt,N+=n*le,M+=n*Ue,J+=n*ye,pe+=n*nt,Y+=n*ee,n=e[7],m+=n*ne,h+=n*me,g+=n*he,y+=n*Qe,E+=n*ke,x+=n*tt,b+=n*Fe,_+=n*ht,k+=n*St,P+=n*xt,N+=n*Tt,M+=n*le,J+=n*Ue,pe+=n*ye,Y+=n*nt,G+=n*ee,n=e[8],h+=n*ne,g+=n*me,y+=n*he,E+=n*Qe,x+=n*ke,b+=n*tt,_+=n*Fe,k+=n*ht,P+=n*St,N+=n*xt,M+=n*Tt,J+=n*le,pe+=n*Ue,Y+=n*ye,G+=n*nt,H+=n*ee,n=e[9],g+=n*ne,y+=n*me,E+=n*he,x+=n*Qe,b+=n*ke,_+=n*tt,k+=n*Fe,P+=n*ht,N+=n*St,M+=n*xt,J+=n*Tt,pe+=n*le,Y+=n*Ue,G+=n*ye,H+=n*nt,ce+=n*ee,n=e[10],y+=n*ne,E+=n*me,x+=n*he,b+=n*Qe,_+=n*ke,k+=n*tt,P+=n*Fe,N+=n*ht,M+=n*St,J+=n*xt,pe+=n*Tt,Y+=n*le,G+=n*Ue,H+=n*ye,ce+=n*nt,ie+=n*ee,n=e[11],E+=n*ne,x+=n*me,b+=n*he,_+=n*Qe,k+=n*ke,P+=n*tt,N+=n*Fe,M+=n*ht,J+=n*St,pe+=n*xt,Y+=n*Tt,G+=n*le,H+=n*Ue,ce+=n*ye,ie+=n*nt,V+=n*ee,n=e[12],x+=n*ne,b+=n*me,_+=n*he,k+=n*Qe,P+=n*ke,N+=n*tt,M+=n*Fe,J+=n*ht,pe+=n*St,Y+=n*xt,G+=n*Tt,H+=n*le,ce+=n*Ue,ie+=n*ye,V+=n*nt,Q+=n*ee,n=e[13],b+=n*ne,_+=n*me,k+=n*he,P+=n*Qe,N+=n*ke,M+=n*tt,J+=n*Fe,pe+=n*ht,Y+=n*St,G+=n*xt,H+=n*Tt,ce+=n*le,ie+=n*Ue,V+=n*ye,Q+=n*nt,z+=n*ee,n=e[14],_+=n*ne,k+=n*me,P+=n*he,N+=n*Qe,M+=n*ke,J+=n*tt,pe+=n*Fe,Y+=n*ht,G+=n*St,H+=n*xt,ce+=n*Tt,ie+=n*le,V+=n*Ue,Q+=n*ye,z+=n*nt,re+=n*ee,n=e[15],k+=n*ne,P+=n*me,N+=n*he,M+=n*Qe,J+=n*ke,pe+=n*tt,Y+=n*Fe,G+=n*ht,H+=n*St,ce+=n*xt,ie+=n*Tt,V+=n*le,Q+=n*Ue,z+=n*ye,re+=n*nt,fe+=n*ee,o+=38*P,a+=38*N,c+=38*M,l+=38*J,u+=38*pe,f+=38*Y,p+=38*G,m+=38*H,h+=38*ce,g+=38*ie,y+=38*V,E+=38*Q,x+=38*z,b+=38*re,_+=38*fe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=E,t[12]=x,t[13]=b,t[14]=_,t[15]=k}s(ms,"M")});var int=U((Bri,nnt)=>{d();var ap=xi();So();Vm();LO();nnt.exports=ap.kem=ap.kem||{};var tnt=ap.jsbn.BigInteger;ap.kem.rsa={};ap.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||ap.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new tnt(ap.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(tnt.ONE)<=0);c=ap.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=ap.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};ap.kem.kdf1=function(t,e){rnt(this,t,0,e||t.digestLength)};ap.kem.kdf2=function(t,e){rnt(this,t,1,e||t.digestLength)};function rnt(t,e,r,n){t.generate=function(i,o){for(var a=new ap.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new ap.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(rnt,"_createKDF")});var cnt=U((Lri,ant)=>{d();var eo=xi();So();ant.exports=eo.log=eo.log||{};eo.log.levels=["none","error","warning","info","debug","verbose","max"];var qZ={},Nve=[],HO=null;eo.log.LEVEL_LOCKED=2;eo.log.NO_LEVEL_CHECK=4;eo.log.INTERPOLATE=8;for(uC=0;uC<eo.log.levels.length;++uC)Bve=eo.log.levels[uC],qZ[Bve]={index:uC,name:Bve.toUpperCase()};var Bve,uC;eo.log.logMessage=function(t){for(var e=qZ[t.level].index,r=0;r<Nve.length;++r){var n=Nve[r];if(n.flags&eo.log.NO_LEVEL_CHECK)n.f(t);else{var i=qZ[n.level].index;e<=i&&n.f(n,t)}}};eo.log.prepareStandard=function(t){"standard"in t||(t.standard=qZ[t.level].name+" ["+t.category+"] "+t.message)};eo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=eo.util.format.apply(this,e)}};eo.log.prepareStandardFull=function(t){"standardFull"in t||(eo.log.prepareStandard(t),t.standardFull=t.standard)};for(Dve=["error","warning","info","debug","verbose"],uC=0;uC<Dve.length;++uC)(function(e){eo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};eo.log.logMessage(o)}})(Dve[uC]);var Dve,uC;eo.log.makeLogger=function(t){var e={flags:0,f:t};return eo.log.setLevel(e,"none"),e};eo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&eo.log.LEVEL_LOCKED))for(var n=0;n<eo.log.levels.length;++n){var i=eo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};eo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=eo.log.LEVEL_LOCKED:t.flags&=~eo.log.LEVEL_LOCKED};eo.log.addLogger=function(t){Nve.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ont={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},WO=s(function(t,e){eo.log.prepareStandard(e);var r=ont[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),iD=eo.log.makeLogger(WO)):(WO=s(function(e,r){eo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),iD=eo.log.makeLogger(WO)),eo.log.setLevel(iD,"debug"),eo.log.addLogger(iD),HO=iD):console={log:s(function(){},"log")};var iD,ont,WO;HO!==null&&typeof window<"u"&&window.location&&(qO=new URL(window.location.href).searchParams,qO.has("console.level")&&eo.log.setLevel(HO,qO.get("console.level").slice(-1)[0]),qO.has("console.lock")&&(snt=qO.get("console.lock").slice(-1)[0],snt=="true"&&eo.log.lock(HO)));var qO,snt;eo.log.consoleLogger=HO});var unt=U((Ori,lnt)=>{d();lnt.exports=rC();EZ();JB();$Ee();xve()});var pnt=U((Uri,fnt)=>{d();var Jt=xi();oT();Fg();DO();sT();sR();ave();Vm();So();NZ();var Se=Jt.asn1,zd=fnt.exports=Jt.pkcs7=Jt.pkcs7||{};zd.messageFromPem=function(t){var e=Jt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Se.fromDer(e.body);return zd.messageFromAsn1(n)};zd.messageToPem=function(t,e){var r={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Jt.pem.encode(r,{maxline:e})};zd.messageFromAsn1=function(t){var e={},r=[];if(!Se.validate(t,zd.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Se.derToOid(e.contentType),o;switch(i){case Jt.pki.oids.envelopedData:o=zd.createEnvelopedData();break;case Jt.pki.oids.encryptedData:o=zd.createEncryptedData();break;case Jt.pki.oids.signedData:o=zd.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};zd.createSignedData=function(){var t=null;return t={type:Jt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Mve(t,n,zd.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Jt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Jt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Jt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=Jt.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||Jt.pki.oids.sha1;switch(l){case Jt.pki.oids.sha1:case Jt.pki.oids.sha256:case Jt.pki.oids.sha384:case Jt.pki.oids.sha512:case Jt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!f&&h.type===Jt.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&h.type===Jt.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:Jt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Jt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Jt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Jt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Jt.md[Jt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Jt.md[Jt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==Jt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<f.authenticatedAttributes.length;++m){var h=f.authenticatedAttributes[m];h.type===Jt.pki.oids.messageDigest?h.value=n[f.digestAlgorithm].digest():h.type===Jt.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(Lve(h)),f.authenticatedAttributesAsn1.value.push(Lve(h))}a=Se.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=urr(t.signers)}s(r,"addSignerInfos")};zd.createEncryptedData=function(){var t=null;return t={type:Jt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Mve(t,e,zd.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),dnt(t)},"decrypt")},t};zd.createEnvelopedData=function(){var t=null;return t={type:Jt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Mve(t,e,zd.asn1.envelopedDataValidator);t.recipients=arr(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,crr(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,drr(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:case Jt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Jt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}dnt(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Jt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Jt.pki.oids["aes128-CBC"]:n=16,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes192-CBC"]:n=24,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes256-CBC"]:n=32,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Jt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Jt.util.createBuffer(Jt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Jt.util.createBuffer(Jt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function orr(t){var e={},r=[];if(!Se.validate(t,zd.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Jt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Jt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(orr,"_recipientFromAsn1");function srr(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(srr,"_recipientToAsn1");function arr(t){for(var e=[],r=0;r<t.length;++r)e.push(orr(t[r]));return e}s(arr,"_recipientsFromAsn1");function crr(t){for(var e=[],r=0;r<t.length;++r)e.push(srr(t[r]));return e}s(crr,"_recipientsToAsn1");function lrr(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Lve(i))}e.value.push(r)}return e}s(lrr,"_signerToAsn1");function urr(t){for(var e=[],r=0;r<t.length;++r)e.push(lrr(t[r]));return e}s(urr,"_signersToAsn1");function Lve(t){var e;if(t.type===Jt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Jt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Jt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(Lve,"_attributeToAsn1");function drr(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(drr,"_encryptedContentToAsn1");function Mve(t,e,r){var n={},i=[];if(!Se.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(n.contentType);if(a!==Jt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(Jt.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(n.encAlgorithm),parameter:Jt.util.createBuffer(n.encParameter.value),content:Jt.util.createBuffer(c)}}if(n.content){var c="";if(Jt.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=Jt.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Mve,"_fromAsn1");function dnt(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Jt.pki.oids["aes128-CBC"]:case Jt.pki.oids["aes192-CBC"]:case Jt.pki.oids["aes256-CBC"]:e=Jt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Jt.pki.oids.desCBC:case Jt.pki.oids["des-EDE3-CBC"]:e=Jt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(dnt,"_decryptContent")});var hnt=U((Wri,mnt)=>{d();var Qc=xi();oT();$B();EZ();JB();So();var WZ=mnt.exports=Qc.ssh=Qc.ssh||{};WZ.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=Qc.util.createBuffer();oD(a,n),dC(a,t.e),dC(a,t.n);var c=Qc.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=Qc.util.createBuffer();dC(u,t.d),dC(u,t.p),dC(u,t.q),dC(u,t.qInv);var f;if(!e)f=Qc.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=HZ(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=Qc.util.createBuffer();h.putBuffer(HZ("\0\0\0\0",e)),h.putBuffer(HZ("\0\0\0",e));var g=Qc.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(Qc.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),f=Qc.util.encode64(y.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var E=HZ("putty-private-key-file-mac-key",e),x=Qc.util.createBuffer();oD(x,n),oD(x,i),oD(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(u.length()),x.putBuffer(u);var b=Qc.hmac.create();return b.start("sha1",E),b.update(x.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};WZ.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Qc.util.createBuffer();return oD(n,r),dC(n,t.e),dC(n,t.n),r+" "+Qc.util.encode64(n.bytes())+" "+e};WZ.privateKeyToOpenSSH=function(t,e){return e?Qc.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Qc.pki.privateKeyToPem(t)};WZ.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Qc.md.md5.create(),n="ssh-rsa",i=Qc.util.createBuffer();oD(i,n),dC(i,t.e),dC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function dC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Qc.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(dC,"_addBigIntegerToBuffer");function oD(t,e){t.putInt32(e.length),t.putString(e)}s(oD,"_addStringToBuffer");function HZ(){for(var t=Qc.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(HZ,"_sha1")});var Ant=U((Vri,gnt)=>{d();gnt.exports=xi();oT();Mrt();Fg();pZ();DO();ent();$B();int();cnt();unt();cve();IZ();sR();rve();dve();pnt();pve();ive();zEe();PZ();Vm();JEe();hnt();Cve();So()});var Ent=U(mR=>{"use strict";d();Object.defineProperty(mR,"__esModule",{value:!0});mR.convert=mR.Format=void 0;var GO=Ant(),mT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(mT=mR.Format||(mR.Format={}));function ynt(t){var e=GO.pki.pemToDer(t),r=GO.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(ynt,"myASN");function frr(t){var e=ynt(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(frr,"txtFormat");function Cnt(t,e){switch(e){case mT.der:return GO.pki.pemToDer(t);case mT.pem:return t;case mT.txt:return frr(t);case mT.asn1:return ynt(t);case mT.fingerprint:var r=GO.md.sha1.create(),n=Cnt(t,mT.der);return r.update(n.getBytes()),r.digest().toHex();case mT.x509:return GO.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(Cnt,"convert");mR.convert=Cnt});var wnt=U(zf=>{"use strict";d();var hT=zf&&zf.__assign||function(){return hT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hT.apply(this,arguments)},GZ=zf&&zf.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(zf,"__esModule",{value:!0});zf.convert=zf.Format=zf.addToGlobalAgent=zf.get=void 0;var Fve=require("https"),prr=require("tls"),vnt=require("child_process"),xnt=ttt(),zE=Ent();Object.defineProperty(zf,"Format",{enumerable:!0,get:s(function(){return zE.Format},"get")});Object.defineProperty(zf,"convert",{enumerable:!0,get:s(function(){return zE.convert},"get")});var bnt=process.platform==="darwin",Int=Fve.globalAgent,VZ={keychain:"all",unique:!0,excludeBundled:!0,format:zE.Format.pem};function Tnt(t){if(t===void 0&&(t=VZ),!bnt)return[];t=hT(hT({},VZ),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,vnt.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=GZ(GZ([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,vnt.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=GZ(GZ([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,zE.convert)(u,zE.Format.fingerprint)}),l=t.excludeBundled?prr.rootCertificates.map(function(u){return(0,zE.convert)(u,zE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,zE.convert)(u,t.format)})}s(Tnt,"get");zf.get=Tnt;var jZ=Int.options.ca,mrr=s(function(t){if(t===void 0&&(t=VZ),!!bnt){var e;Array.isArray(jZ)?e=Array.from(jZ):e=typeof jZ<"u"?[jZ]:[],Tnt(hT(hT(hT({},VZ),t),{format:zE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),Int.options.ca=e,Fve.Agent=function(r){return function(n){var i=typeof n<"u"?hT({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(Fve.Agent),(0,xnt.setGlobalDispatcher)(new xnt.Agent({connect:{ca:e}}))}},"addToGlobalAgent");zf.addToGlobalAgent=mrr});var _nt=U((eni,Ove)=>{d();function hrr(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(hrr,"all");process.platform!=="win32"?Ove.exports.all=()=>[]:Ove.exports.all=hrr});var Lnt=U((ani,Nnt)=>{"use strict";d();function Dnt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(Dnt,"validateParameter");function Arr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(Arr,"hasOwnProperty");function yrr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];Arr(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),Dnt(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(yrr,"defineOperation");Nnt.exports={defineOperation:yrr,validateParameter:Dnt}});var $ve=U((uni,Ont)=>{"use strict";d();var cD=ihe()("kerberos"),aD=cD.KerberosClient,Mnt=cD.KerberosServer,gT=Lnt().defineOperation,Crr=1,Err=2,vrr=4,xrr=8,brr=16,Irr=32,Trr=64,wrr=128,_rr=256,Fnt=0,Srr=9,Rrr=6;aD.prototype.step=gT(aD.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);aD.prototype.wrap=gT(aD.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);aD.prototype.unwrap=gT(aD.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Mnt.prototype.step=gT(Mnt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var krr=gT(cD.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),Prr=gT(cD.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),Brr=gT(cD.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:Fnt}},{name:"callback",type:"function",required:!1}]),Drr=gT(cD.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Ont.exports={initializeClient:Brr,initializeServer:Drr,principalDetails:Prr,checkPassword:krr,GSS_C_DELEG_FLAG:Crr,GSS_C_MUTUAL_FLAG:Err,GSS_C_REPLAY_FLAG:vrr,GSS_C_SEQUENCE_FLAG:xrr,GSS_C_CONF_FLAG:brr,GSS_C_INTEG_FLAG:Irr,GSS_C_ANON_FLAG:Trr,GSS_C_PROT_READY_FLAG:wrr,GSS_C_TRANS_FLAG:_rr,GSS_C_NO_OID:Fnt,GSS_MECH_OID_KRB5:Srr,GSS_MECH_OID_SPNEGO:Rrr}});var Qnt=U((fni,Nrr)=>{Nrr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var qnt=U((pni,Unt)=>{"use strict";d();var Lrr=require("dns"),Mrr=$ve(),zve=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=Frr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();Lrr.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Mrr.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function Frr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=Orr(t),r(null,i)})}}s(Frr,"firstTransition");function Orr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=Qrr(t),r(null,i||"")})}}s(Orr,"secondTransition");function Qrr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=Urr(t),r(null,a)})})}}s(Qrr,"thirdTransition");function Urr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(Urr,"fourthTransition");Unt.exports={MongoAuthProcess:zve}});var Wnt=U((gni,jO)=>{"use strict";d();var Hnt=$ve();jO.exports=Hnt;jO.exports.Kerberos=Hnt;jO.exports.version=Qnt().version;jO.exports.processes={MongoAuthProcess:qnt().MongoAuthProcess}});var Pit=U(xxe=>{"use strict";d();Object.defineProperty(xxe,"__esModule",{value:!0});xxe.assertNever=znr;function znr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(znr,"assertNever")});var a7=U(iv=>{"use strict";d();Object.defineProperty(iv,"__esModule",{value:!0});iv.ChatCompletionContentPartOpaque=iv.ChatCompletionContentPartKind=iv.ChatRole=void 0;var Ynr=Pit(),Bee;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(Bee||(iv.ChatRole=Bee={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Ynr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(Bee||(iv.ChatRole=Bee={}));var Bit;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Bit||(iv.ChatCompletionContentPartKind=Bit={}));var Dit;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(Dit||(iv.ChatCompletionContentPartOpaque=Dit={}))});var bxe=U(IC=>{"use strict";d();Object.defineProperty(IC,"__esModule",{value:!0});IC.BaseTokensPerName=IC.BaseTokensPerMessage=IC.BaseTokensPerCompletion=IC.ChatRole=void 0;var Nit;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Nit||(IC.ChatRole=Nit={}));IC.BaseTokensPerCompletion=3;IC.BaseTokensPerMessage=3;IC.BaseTokensPerName=1});var Mit=U(Nee=>{"use strict";d();Object.defineProperty(Nee,"__esModule",{value:!0});Nee.toOpenAiChatMessage=Lit;Nee.toOpenAIChatMessages=Xnr;var ov=a7(),Dee=bxe(),Knr=TT();function Ixe(t){return t.filter(e=>e.type===ov.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Ixe,"onlyStringContent");function Jnr(t){let e=t.map(r=>{if(r.type===ov.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===ov.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===ov.ChatCompletionContentPartKind.Opaque&&ov.ChatCompletionContentPartOpaque.usableIn(r,Knr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(Jnr,"stringAndImageContent");function Lit(t){switch(t.role){case ov.ChatRole.System:return{role:Dee.ChatRole.System,content:Ixe(t.content),name:t.name};case ov.ChatRole.User:return{role:Dee.ChatRole.User,content:Jnr(t.content),name:t.name};case ov.ChatRole.Assistant:return{role:Dee.ChatRole.Assistant,content:Ixe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case ov.ChatRole.Tool:return{role:Dee.ChatRole.Tool,content:Ixe(t.content),tool_call_id:t.toolCallId};default:return}}s(Lit,"toOpenAiChatMessage");function Xnr(t){return t.map(Lit).filter(e=>!!e)}s(Xnr,"toOpenAIChatMessages")});var Oit=U(Fee=>{"use strict";d();Object.defineProperty(Fee,"__esModule",{value:!0});Fee.toVsCodeChatMessage=Fit;Fee.toVsCodeChatMessages=Znr;var Mee=a7();function Lee(t){return t.filter(e=>e.type===Mee.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Lee,"onlyStringContent");var wT;function Fit(t){switch(wT??=require("vscode"),t.role){case Mee.ChatRole.Assistant:let e=wT.LanguageModelChatMessage.Assistant(Lee(t.content),t.name);return t.toolCalls&&(e.content=[new wT.LanguageModelTextPart(Lee(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new wT.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Mee.ChatRole.User:return wT.LanguageModelChatMessage.User(Lee(t.content),t.name);case Mee.ChatRole.Tool:{let r=wT.LanguageModelChatMessage.User("");return r.content=[new wT.LanguageModelToolResultPart(t.toolCallId,[new wT.LanguageModelTextPart(Lee(t.content))])],r}default:return}}s(Fit,"toVsCodeChatMessage");function Znr(t){return t.map(Fit).filter(e=>!!e)}s(Znr,"toVsCodeChatMessages")});var TT=U(qg=>{"use strict";d();Object.defineProperty(qg,"__esModule",{value:!0});qg.OutputMode=qg.Raw=qg.OpenAI=void 0;qg.toMode=Txe;qg.toVSCode=eir;qg.toOpenAI=tir;var Qit=Mit(),Uit=Oit();qg.OpenAI=bxe();qg.Raw=a7();var CR;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(CR||(qg.OutputMode=CR={}));function Txe(t,e){switch(t){case CR.Raw:return e;case CR.VSCode:return e instanceof Array?(0,Uit.toVsCodeChatMessages)(e):(0,Uit.toVsCodeChatMessage)(e);case CR.OpenAI:return e instanceof Array?(0,Qit.toOpenAIChatMessages)(e):(0,Qit.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Txe,"toMode");function eir(t){return Txe(CR.VSCode,t)}s(eir,"toVSCode");function tir(t){return Txe(CR.OpenAI,t)}s(tir,"toOpenAI")});var wxe=U(c7=>{"use strict";d();Object.defineProperty(c7,"__esModule",{value:!0});c7.jsonRetainedProps=void 0;c7.forEachNode=qit;c7.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function qit(t,e){if(e(t),t.type===1)for(let r of t.children)qit(r,e)}s(qit,"forEachNode")});var Hit=U(_xe=>{"use strict";d();Object.defineProperty(_xe,"__esModule",{value:!0});_xe.once=rir;function rir(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(rir,"once")});var Pxe=U(nd=>{"use strict";d();Object.defineProperty(nd,"__esModule",{value:!0});nd.BudgetExceededError=nd.MaterializedChatMessageImage=nd.MaterializedChatMessageBreakpoint=nd.MaterializedChatMessageOpaque=nd.MaterializedChatMessage=nd.MaterializedChatMessageTextChunk=nd.GenericMaterializedContainer=void 0;var ED=Hit(),fp=TT(),sv=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=ST(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return Jit(e,this.children,r)}allMetadata(){return Kit(this)}findById(e){return kxe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)nir(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof Wg&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof Wg||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Rxe(this,e),e}};nd.GenericMaterializedContainer=sv;var l7=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,ED.once)(async e=>await e.tokenLength({type:fp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};nd.MaterializedChatMessageTextChunk=l7;var Wg=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=Jit(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Rxe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return kxe(e,this)}_tokenCount=(0,ED.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,fp.toMode)(e.mode,r))});_upperBound=(0,ED.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,ED.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===fp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===fp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,fp.toMode)(e.mode,r))});_text=(0,ED.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of zit(this)){if(r instanceof ER||r instanceof _T){e.push(r);continue}if(r instanceof Hg){e.at(-1)instanceof Hg?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:fp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof ER)return{type:fp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Xit(r.src),detail:r.detail}};if(r instanceof _T)return r.value;if(r instanceof Hg)return r.part;throw new Error("Unexpected element type")});if(this.role===fp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===fp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===fp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===fp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};nd.MaterializedChatMessage=Wg;var _T=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&fp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};nd.MaterializedChatMessageOpaque=_T;var Hg=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};nd.MaterializedChatMessageBreakpoint=Hg;var ER=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,ED.once)(async e=>e.tokenLength({type:fp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Xit(this.src),detail:this.detail}}));isEmpty=!1};nd.MaterializedChatMessageImage=ER;function ST(t){return t instanceof sv||t instanceof Wg}s(ST,"isContainerType");function $it(t){return t instanceof l7||t instanceof ER||t instanceof _T||t instanceof Hg}s($it,"isContentType");function nir(t){if(!ST(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(nir,"assertContainerOrChatMessage");function*zit(t,e=!1){for(let r of t.children)r instanceof l7?(yield{content:r,isTextSibling:e},e=!0):r instanceof ER||r instanceof _T||r instanceof Hg?yield{content:r,isTextSibling:!1}:r instanceof _T?yield{content:r,isTextSibling:!0}:(r&&(yield*zit(r,e)),e=!1)}s(zit,"contentChunks");function iir(t,e){let r;function n(i,o){if($it(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");u7(r.node,e)}s(iir,"removeLowestPriorityLegacy");var Wit=new WeakMap;function Yit(t){let e=Wit.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Hg?r=!0:t instanceof Wg?r=t.children.some(n=>n instanceof Hg):t instanceof sv&&(r=t.children.some(Yit)),Wit.set(t,r),r}s(Yit,"hasCachePoint");function oir(t){if(t instanceof Wg)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof Wg)return!1;return!0}s(oir,"shouldLookForCachePointInNode");function Rxe(t,e){let r;if(t instanceof sv&&t.has(1)){iir(t,e);return}let n=oir(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&Yit(l)&&(r=void 0,l instanceof Hg))){if(l instanceof sv&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=Git(r.value);let u=Git(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new Oee(t);$it(r.value)||r.value instanceof sv&&r.value.has(2)||ST(r.value)&&!r.value.children.length?u7(r.value,e):Rxe(r.value,e)}s(Rxe,"removeLowestPriorityChild");var Oee=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof Wg?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};nd.BudgetExceededError=Oee;function Git(t){if(!ST(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(Git,"getLowestPriorityAmongChildren");function*Kit(t){yield*t.metadata;for(let e of t.children)ST(e)?yield*Kit(e):yield*e.metadata}s(Kit,"allMetadata");function Jit(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(ST(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(Jit,"replaceNode");function*jit(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,ST(r)&&e.push(...r.children)}}s(jit,"forEachNode");function sir(t){let e=t;for(;e.parent;)e=e.parent;return e}s(sir,"getRoot");function Vit(t){return t instanceof sv&&t.keepWithId!==void 0}s(Vit,"isKeepWith");var Sxe=new Set;function air(t,e){let r=new Set;for(let n of jit(t))Vit(n)&&!Sxe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Sxe.add(n);try{let n=sir(t);for(let i of jit(n))Vit(i)&&r.has(i.keepWithId)?u7(i,e):i instanceof Wg&&i.toolCalls&&(i.toolCalls=cir(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&u7(i,e))}finally{for(let n of r)Sxe.delete(n)}}s(air,"removeOtherKeepWiths");function kxe(t,e){if(e.id===t)return e;for(let r of e.children)if(ST(r)){let n=kxe(t,r);if(n)return n}}s(kxe,"findNodeById");function u7(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),air(t,e),r.isEmpty?u7(r,e):r.onChunksChange())}s(u7,"removeNode");function Xit(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(Xit,"getEncodedBase64");function cir(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(cir,"filterIfDifferent")});var eot=U(()=>{"use strict";d();function lir(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(lir,"_vscpp");function Zit(){throw new Error("This should not be invoked!")}s(Zit,"_vscppf");Zit.isFragment=!0;globalThis.vscpp=lir;globalThis.vscppf=Zit});var Dxe=U(Qee=>{"use strict";d();Object.defineProperty(Qee,"__esModule",{value:!0});Qee.PromptElement=void 0;eot();var Bxe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Qee.PromptElement=Bxe});var Wxe=U(to=>{"use strict";d();Object.defineProperty(to,"__esModule",{value:!0});to.LogicalWrapper=to.IfEmpty=to.AbstractKeepWith=to.TokenLimit=to.Expandable=to.Chunk=to.LegacyPrioritization=to.ToolResult=to.PrioritizedList=to.Image=to.TextChunk=to.ToolMessage=to.AssistantMessage=to.UserMessage=to.SystemMessage=to.BaseChatMessage=void 0;to.isChatMessagePromptElement=uir;to.useKeepWith=mir;var f7=Gg(),nh=Dxe();function uir(t){return t instanceof Uee||t instanceof qee||t instanceof Hee}s(uir,"isChatMessagePromptElement");var vR=class extends nh.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};to.BaseChatMessage=vR;var Uee=class extends vR{static{s(this,"SystemMessage")}constructor(e){e.role=f7.Raw.ChatRole.System,super(e)}};to.SystemMessage=Uee;var qee=class extends vR{static{s(this,"UserMessage")}constructor(e){e.role=f7.Raw.ChatRole.User,super(e)}};to.UserMessage=qee;var Hee=class extends vR{static{s(this,"AssistantMessage")}constructor(e){e.role=f7.Raw.ChatRole.Assistant,super(e)}};to.AssistantMessage=Hee;var dir=/\s+/g,Nxe=class extends vR{static{s(this,"ToolMessage")}constructor(e){e.role=f7.Raw.ChatRole.Tool,super(e)}};to.ToolMessage=Nxe;var Wee=class extends nh.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?dir:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await fir(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};to.TextChunk=Wee;async function fir(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:f7.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(fir,"getTextContentBelowBudget");var Lxe=class extends nh.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};to.Image=Lxe;var Mxe=class extends nh.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(Wee,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};to.PrioritizedList=Mxe;var Fxe=class extends nh.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};to.ToolResult=Fxe;var Oxe=class extends nh.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};to.LegacyPrioritization=Oxe;var Qxe=class extends nh.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};to.Chunk=Qxe;var Uxe=class extends nh.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};to.Expandable=Uxe;var qxe=class extends nh.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};to.TokenLimit=qxe;var Gee=class extends nh.PromptElement{static{s(this,"AbstractKeepWith")}};to.AbstractKeepWith=Gee;var pir=0;function mir(){let t=pir++;return class extends Gee{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(mir,"useKeepWith");var Hxe=class extends nh.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(d7,null,this.props.alt),vscpp(d7,{flexGrow:1},this.props.children))}};to.IfEmpty=Hxe;var d7=class extends nh.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};to.LogicalWrapper=d7});var rot=U(p7=>{"use strict";d();Object.defineProperty(p7,"__esModule",{value:!0});p7.localize=hir;p7.localize2=gir;p7.getConfiguredDefaultLocale=Air;function tot(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(tot,"_format");function hir(t,e,...r){return tot(e,r)}s(hir,"localize");function gir(t,e,...r){let n=tot(e,r);return{original:n,value:n}}s(gir,"localize2");function Air(t){}s(Air,"getConfiguredDefaultLocale")});var $xe=U(Ut=>{"use strict";d();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isAndroid=Ut.isEdge=Ut.isSafari=Ut.isFirefox=Ut.isChrome=Ut.OS=Ut.setTimeout0=Ut.setTimeout0IsFaster=Ut.translationsConfigFile=Ut.platformLocale=Ut.locale=Ut.Language=Ut.language=Ut.userAgent=Ut.platform=Ut.isCI=Ut.isMobile=Ut.isIOS=Ut.webWorkerOrigin=Ut.isWebWorker=Ut.isWeb=Ut.isElectron=Ut.isNative=Ut.isLinuxSnap=Ut.isLinux=Ut.isMacintosh=Ut.isWindows=Ut.LANGUAGE_DEFAULT=void 0;Ut.PlatformToString=Cir;Ut.isLittleEndian=Eir;Ut.isBigSurOrNewer=vir;var not=rot();Ut.LANGUAGE_DEFAULT="en";var g7=!1,A7=!1,h7=!1,aot=!1,cot=!1,jxe=!1,lot=!1,Vxe=!1,uot=!1,dot=!1,m7,jee=Ut.LANGUAGE_DEFAULT,Gxe=Ut.LANGUAGE_DEFAULT,fot,av,cv=globalThis,pp;typeof cv.vscode<"u"&&typeof cv.vscode.process<"u"?pp=cv.vscode.process:typeof process<"u"&&(pp=process);var pot=typeof pp?.versions?.electron=="string",yir=pot&&pp?.type==="renderer";if(typeof pp=="object"){g7=pp.platform==="win32",A7=pp.platform==="darwin",h7=pp.platform==="linux",aot=h7&&!!pp.env.SNAP&&!!pp.env.SNAP_REVISION,lot=pot,uot=!!pp.env.CI||!!pp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,m7=Ut.LANGUAGE_DEFAULT,jee=Ut.LANGUAGE_DEFAULT;let t=pp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];m7=e.locale,Gxe=e.osLocale,jee=r||Ut.LANGUAGE_DEFAULT,fot=e._translationsConfigFile}catch{}cot=!0}else typeof navigator=="object"&&!yir?(av=navigator.userAgent,g7=av.indexOf("Windows")>=0,A7=av.indexOf("Macintosh")>=0,Vxe=(av.indexOf("Macintosh")>=0||av.indexOf("iPad")>=0||av.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,h7=av.indexOf("Linux")>=0,dot=av?.indexOf("Mobi")>=0,jxe=!0,m7=not.getConfiguredDefaultLocale(not.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Ut.LANGUAGE_DEFAULT,jee=m7,Gxe=navigator.language):console.error("Unable to resolve platform.");function Cir(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Cir,"PlatformToString");var Vee=0;A7?Vee=1:g7?Vee=3:h7&&(Vee=2);Ut.isWindows=g7;Ut.isMacintosh=A7;Ut.isLinux=h7;Ut.isLinuxSnap=aot;Ut.isNative=cot;Ut.isElectron=lot;Ut.isWeb=jxe;Ut.isWebWorker=jxe&&typeof cv.importScripts=="function";Ut.webWorkerOrigin=Ut.isWebWorker?cv.origin:void 0;Ut.isIOS=Vxe;Ut.isMobile=dot;Ut.isCI=uot;Ut.platform=Vee;Ut.userAgent=av;Ut.language=jee;var iot;(function(t){function e(){return Ut.language}s(e,"value"),t.value=e;function r(){return Ut.language.length===2?Ut.language==="en":Ut.language.length>=3?Ut.language[0]==="e"&&Ut.language[1]==="n"&&Ut.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Ut.language==="en"}s(n,"isDefault"),t.isDefault=n})(iot||(Ut.Language=iot={}));Ut.locale=m7;Ut.platformLocale=Gxe;Ut.translationsConfigFile=fot;Ut.setTimeout0IsFaster=typeof cv.postMessage=="function"&&!cv.importScripts;Ut.setTimeout0=(()=>{if(Ut.setTimeout0IsFaster){let t=[];cv.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),cv.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Ut.OS=A7||Vxe?2:g7?1:3;var oot=!0,sot=!1;function Eir(){if(!sot){sot=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,oot=new Uint16Array(t.buffer)[0]===513}return oot}s(Eir,"isLittleEndian");Ut.isChrome=!!(Ut.userAgent&&Ut.userAgent.indexOf("Chrome")>=0);Ut.isFirefox=!!(Ut.userAgent&&Ut.userAgent.indexOf("Firefox")>=0);Ut.isSafari=!!(!Ut.isChrome&&Ut.userAgent&&Ut.userAgent.indexOf("Safari")>=0);Ut.isEdge=!!(Ut.userAgent&&Ut.userAgent.indexOf("Edg/")>=0);Ut.isAndroid=!!(Ut.userAgent&&Ut.userAgent.indexOf("Android")>=0);function vir(t){return parseFloat(t)>=20}s(vir,"isBigSurOrNewer")});var hot=U(TC=>{"use strict";d();Object.defineProperty(TC,"__esModule",{value:!0});TC.arch=TC.platform=TC.env=TC.cwd=void 0;var mot=$xe(),xR,zxe=globalThis.vscode;if(typeof zxe<"u"&&typeof zxe.process<"u"){let t=zxe.process;xR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?xR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:xR={get platform(){return mot.isWindows?"win32":mot.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};TC.cwd=xR.cwd;TC.env=xR.env;TC.platform=xR.platform;TC.arch=xR.arch});var Aot=U(ur=>{"use strict";d();Object.defineProperty(ur,"__esModule",{value:!0});ur.delimiter=ur.sep=ur.toNamespacedPath=ur.parse=ur.format=ur.extname=ur.basename=ur.dirname=ur.relative=ur.resolve=ur.join=ur.isAbsolute=ur.normalize=ur.posix=ur.win32=void 0;var vD=hot(),xir=65,bir=97,Iir=90,Tir=122,PT=46,ql=47,Xf=92,RT=58,wir=63,$ee=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function _ir(t,e){if(t===null||typeof t!="object")throw new $ee(e,"Object",t)}s(_ir,"validateObject");function Va(t,e){if(typeof t!="string")throw new $ee(e,"string",t)}s(Va,"validateString");var Zf=vD.platform==="win32";function yi(t){return t===ql||t===Xf}s(yi,"isPathSeparator");function Yxe(t){return t===ql}s(Yxe,"isPosixPathSeparator");function kT(t){return t>=xir&&t<=Iir||t>=bir&&t<=Tir}s(kT,"isWindowsDeviceRoot");function zee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=ql}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==PT||i.charCodeAt(i.length-2)!==PT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===PT&&c!==-1?++c:c=-1}return i}s(zee,"normalizeString");function got(t,e){_ir(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(got,"_format");ur.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Va(o,"path"),o.length===0)continue}else e.length===0?o=vD.cwd():(o=vD.env[`=${e}`]||vD.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Xf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)yi(f)&&(c=1,u=!0);else if(yi(f))if(u=!0,yi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!yi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else kT(f)&&o.charCodeAt(1)===RT&&(l=o.slice(0,2),c=2,a>2&&yi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=zee(r,!n,"\\",yi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Va(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Yxe(o)?"\\":t;if(yi(o))if(i=!0,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else kT(o)&&t.charCodeAt(1)===RT&&(n=t.slice(0,2),r=2,e>2&&yi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?zee(t.slice(r),!i,"\\",yi):"";return a.length===0&&!i&&(a="."),a.length>0&&yi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Va(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return yi(r)||e>2&&kT(r)&&t.charCodeAt(1)===RT&&yi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];Va(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&yi(r.charCodeAt(0))){++i;let o=r.length;o>1&&yi(r.charCodeAt(1))&&(++i,o>2&&(yi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&yi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ur.win32.normalize(e)},relative(t,e){if(Va(t,"from"),Va(e,"to"),t===e)return"";let r=ur.win32.resolve(t),n=ur.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Xf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Xf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===Xf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===Xf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===Xf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===Xf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===Xf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Xf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===Xf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ur.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Xf){if(e.charCodeAt(1)===Xf){let r=e.charCodeAt(2);if(r!==wir&&r!==PT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(kT(e.charCodeAt(0))&&e.charCodeAt(1)===RT&&e.charCodeAt(2)===Xf)return`\\\\?\\${e}`;return t},dirname(t){Va(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return yi(i)?t:".";if(yi(i)){if(r=n=1,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else kT(i)&&t.charCodeAt(1)===RT&&(r=e>2&&yi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(yi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Va(e,"ext"),Va(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&kT(t.charCodeAt(0))&&t.charCodeAt(1)===RT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(yi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(yi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Va(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===RT&&kT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(yi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===PT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:got.bind(null,"\\"),parse(t){Va(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return yi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(yi(i)){if(n=1,yi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!yi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(kT(i)&&t.charCodeAt(1)===RT){if(r<=2)return e.root=e.dir=t,e;if(n=2,yi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),yi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===PT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var Sir=(()=>{if(Zf){let t=/\\/g;return()=>{let e=vD.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>vD.cwd()})();ur.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Sir();Va(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===ql)}return e=zee(e,!r,"/",Yxe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Va(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,r=t.charCodeAt(t.length-1)===ql;return t=zee(t,!e,"/",Yxe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Va(t,"path"),t.length>0&&t.charCodeAt(0)===ql},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Va(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ur.posix.normalize(e)},relative(t,e){if(Va(t,"from"),Va(e,"to"),t===e||(t=ur.posix.resolve(t),e=ur.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===ql&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===ql)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===ql?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===ql)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Va(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===ql){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Va(e,"ext"),Va(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===ql){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===ql){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Va(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===ql){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===PT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:got.bind(null,"/"),parse(t){Va(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===ql,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===ql){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===PT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ur.posix.win32=ur.win32.win32=ur.win32;ur.posix.posix=ur.win32.posix=ur.posix;ur.normalize=Zf?ur.win32.normalize:ur.posix.normalize;ur.isAbsolute=Zf?ur.win32.isAbsolute:ur.posix.isAbsolute;ur.join=Zf?ur.win32.join:ur.posix.join;ur.resolve=Zf?ur.win32.resolve:ur.posix.resolve;ur.relative=Zf?ur.win32.relative:ur.posix.relative;ur.dirname=Zf?ur.win32.dirname:ur.posix.dirname;ur.basename=Zf?ur.win32.basename:ur.posix.basename;ur.extname=Zf?ur.win32.extname:ur.posix.extname;ur.format=Zf?ur.win32.format:ur.posix.format;ur.parse=Zf?ur.win32.parse:ur.posix.parse;ur.toNamespacedPath=Zf?ur.win32.toNamespacedPath:ur.posix.toNamespacedPath;ur.sep=Zf?ur.win32.sep:ur.posix.sep;ur.delimiter=Zf?ur.win32.delimiter:ur.posix.delimiter});var Iot=U(xD=>{"use strict";d();Object.defineProperty(xD,"__esModule",{value:!0});xD.URI=void 0;xD.isUriComponents=Mir;xD.uriToFsPath=Xee;var yot=Aot(),Kee=$xe(),Rir=/^\w[\w\d+.-]*$/,kir=/^\//,Pir=/^\/\//;function Bir(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Rir.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!kir.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Pir.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Bir,"_validateUri");function Dir(t,e){return!t&&!e?"file":t}s(Dir,"_schemeFix");function Nir(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==jg&&(e=jg+e):e=jg;break}return e}s(Nir,"_referenceResolution");var hs="",jg="/",Lir=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Jee=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||hs,this.authority=e.authority||hs,this.path=e.path||hs,this.query=e.query||hs,this.fragment=e.fragment||hs):(this.scheme=Dir(e,a),this.authority=r||hs,this.path=Nir(this.scheme,n||hs),this.query=i||hs,this.fragment=o||hs,Bir(this,a))}get fsPath(){return Xee(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=hs),n===void 0?n=this.authority:n===null&&(n=hs),i===void 0?i=this.path:i===null&&(i=hs),o===void 0?o=this.query:o===null&&(o=hs),a===void 0?a=this.fragment:a===null&&(a=hs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new BT(r,n,i,o,a)}static parse(e,r=!1){let n=Lir.exec(e);return n?new BT(n[2]||hs,Yee(n[4]||hs),Yee(n[5]||hs),Yee(n[7]||hs),Yee(n[9]||hs),r):new BT(hs,hs,hs,hs,hs)}static file(e){let r=hs;if(Kee.isWindows&&(e=e.replace(/\\/g,jg)),e[0]===jg&&e[1]===jg){let n=e.indexOf(jg,2);n===-1?(r=e.substring(2),e=jg):(r=e.substring(2,n),e=e.substring(n)||jg)}return new BT("file",r,e,hs,hs)}static from(e,r){return new BT(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Kee.isWindows&&e.scheme==="file"?n=t.file(yot.win32.join(Xee(e,!0),...r)).path:n=yot.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return Kxe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new BT(e);return r._formatted=e.external??null,r._fsPath=e._sep===vot?e.fsPath??null:null,r}}else return e}};xD.URI=Jee;function Mir(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Mir,"isUriComponents");var vot=Kee.isWindows?1:void 0,BT=class extends Jee{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Xee(this,!1)),this._fsPath}toString(e=!1){return e?Kxe(this,!0):(this._formatted||(this._formatted=Kxe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=vot),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},xot={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Cot(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=xot[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Cot,"encodeURIComponentFast");function Fir(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=xot[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Fir,"encodeURIComponentMinimal");function Xee(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Kee.isWindows&&(r=r.replace(/\//g,"\\")),r}s(Xee,"uriToFsPath");function Kxe(t,e){let r=e?Fir:Cot,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=jg,n+=jg),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Cot(l,!1,!1)),n}s(Kxe,"_asFormatted");function bot(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+bot(t.substr(3)):t}}s(bot,"decodeURIComponentGraceful");var Eot=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Yee(t){return t.match(Eot)?t.replace(Eot,e=>bot(e)):t}s(Yee,"percentDecode")});var Zxe=U(DT=>{"use strict";d();Object.defineProperty(DT,"__esModule",{value:!0});DT.PromptReference=DT.ChatResponseReferencePartStatusKind=DT.PromptMetadata=void 0;var y7=Iot(),Jxe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};DT.PromptMetadata=Jxe;var Tot;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Tot||(DT.ChatResponseReferencePartStatusKind=Tot={}));var Xxe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?y7.URI.from(n):{uri:y7.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?y7.URI.from(e.iconPath):"light"in e.iconPath?{light:y7.URI.from(e.iconPath.light),dark:y7.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};DT.PromptReference=Xxe});var cbe=U(ID=>{"use strict";d();Object.defineProperty(ID,"__esModule",{value:!0});ID.PromptRenderer=ID.MetadataMap=void 0;var Oir=wxe(),C7=Pxe(),bD=TT(),hc=Wxe(),abe=Zxe(),wot;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(wot||(ID.MetadataMap=wot={}));var tbe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new ete(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=kot(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof hc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:E}of u)p+=E.props.flexBasis??1;let m=0,h=u.map(E=>{if(E.tokenLimit===void 0)return!1;let x=E.element.props.flexBasis??1,b=x/p;return Math.floor(e.remainingTokenBudget*b)<E.tokenLimit?!1:(p-=x,m+=E.tokenLimit,!0)}),g=u.map((E,x)=>{let b=(E.element.props.flexBasis??1)/p;return{tokenBudget:h[x]?E.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:bD.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((E,x)=>({id:E.element.node.id,tokenBudget:g[x].tokenBudget}))}),await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=await Sot(E,()=>x.prepare?.(g[b],n,i));E.node.setState(_)}));let y=await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=g[b];return await Sot(E,()=>x.render(E.node.getState(),_,n,i))}));for(let[E,{element:x,promptElementInstance:b}]of u.entries()){let _=g[E],k=y[E];if(!k)continue;let P=await this._processPromptRenderPiece(new bR(_.tokenBudget,this._endpoint),x,b,k,n,i);b instanceof hc.Expandable&&this._growables.push({initialConsume:P,elem:x.node}),e.consume(P)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=Rot(i),l=new bR(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Qir(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new bR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,bD.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new bR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(m=>{if(!(m instanceof wC))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(tte),p=i.map(m=>{if(!(m instanceof wC)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(tte);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof hc.Expandable))throw new Error("unreachable: expected growable");let c=new ete(null,0,o.elem.id),l=new bR(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:bD.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===hc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Zee(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new wC(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new wC(l));else this._handleIntrinsic(e,c.name,c.props,Zee(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};ID.PromptRenderer=tbe;async function Qir(t,e,r,n){let i=0;if((0,hc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,bD.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:bD.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Qir,"computeTokensConsumedByLiterals");function Rot(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new ibe(String(t))):Uir(t)?Zee(t.children,e):qir(t)?Zee(t,e):typeof t.ctor=="string"?e.push(new rbe(t.ctor,t.props,t.children)):e.push(new nbe(t.ctor,t.props,t.children)),e)}s(Rot,"flattenAndReduce");function Zee(t,e=[]){for(let r of t)Rot(r,e);return e}s(Zee,"flattenAndReduceArr");var rbe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},nbe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},ibe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},bR=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},ete=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new wC(abe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return E7.fromJSON(i,a,o);default:}}).filter(tte),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new hc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,hc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new hc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new hc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof hc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof hc.Chunk&&(this._objFlags|=2),this._obj instanceof hc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new E7(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new E7(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(tte),props:{},references:this._metadata.filter(r=>r instanceof wC).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=ebe(this._obj.props,Oir.jsonRetainedProps)),this._obj instanceof hc.BaseChatMessage)e.ctor=1,Object.assign(e.props,ebe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof hc.Image)return{...e,ctor:3,props:{...e.props,...ebe(this._obj.props,["src","detail"])}};this._obj instanceof hc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof hc.Image)return new C7.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof hc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new C7.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof hc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof hc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new C7.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof hc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof hc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new obe({type:bD.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},obe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new C7.MaterializedChatMessageBreakpoint(e,this.part)}},E7=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new wC(abe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new C7.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof wC).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Uir(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Uir,"isFragmentCtor");function tte(t){return t!==void 0}s(tte,"isDefined");var sbe=class extends abe.PromptMetadata{static{s(this,"InternalMetadata")}},wC=class extends sbe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function qir(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(qir,"isIterable");function ebe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(ebe,"pickProps");function kot(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(kot,"atPath");var _ot=new WeakSet;async function Sot(t,e){try{return await e()}catch(r){throw r instanceof Error&&!_ot.has(r)&&r.constructor.name!=="CancellationError"&&(_ot.add(r),r.message+=` (at tsx element ${kot(t.path)})`),r}}s(Sot,"annotateError")});var Pot=U(rte=>{"use strict";d();Object.defineProperty(rte,"__esModule",{value:!0});rte.VSCodeTokenizer=void 0;var lbe=TT(),ube=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=lbe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==lbe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===lbe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};rte.VSCodeTokenizer=ube});var Bot=U(TD=>{"use strict";d();Object.defineProperty(TD,"__esModule",{value:!0});TD.tracerCss=TD.tracerSrc=void 0;TD.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';TD.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Fot=U(ite=>{"use strict";d();Object.defineProperty(ite,"__esModule",{value:!0});ite.HTMLTracer=void 0;var Dot=Bot(),IR=Pxe(),Hir=TT(),dbe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return fbe.create({epochs:this.epochs,traceData:Lot(this.traceData)})}serveRouter(e){return new nte({baseAddress:e,epochs:this.epochs,traceData:Lot(this.traceData)})}};ite.HTMLTracer=dbe;var nte=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Dot.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Not(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Dot.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Not(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},fbe=class t extends nte{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Not(t,e){return{container:await Mot(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Not,"serializeRenderData");async function Mot(t,e,r){let n={metadata:e.metadata.map(Gir),priority:e.priority};if(e instanceof IR.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof IR.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof IR.MaterializedChatMessageOpaque||e instanceof IR.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Mot(t,o,r||e instanceof IR.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof IR.GenericMaterializedContainer)return{...i,type:0};if(e instanceof IR.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Hir.Raw.ChatRole.display(e.role),text:o}}}Wir(e)}s(Mot,"serializeMaterialized");function Wir(t){throw new Error("unreachable")}s(Wir,"assertNever");function Gir(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Gir,"serializeMetadata");var Lot=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Qot=U(Oot=>{"use strict";d();Object.defineProperty(Oot,"__esModule",{value:!0})});var qot=U(Uot=>{"use strict";d();Object.defineProperty(Uot,"__esModule",{value:!0})});var Wot=U(Hot=>{"use strict";d();Object.defineProperty(Hot,"__esModule",{value:!0})});var Gg=U(Ks=>{"use strict";d();var jir=Ks&&Ks.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TR=Ks&&Ks.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jir(e,t,r)};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.contentType=Ks.PromptRenderer=Ks.MetadataMap=Ks.PromptElement=Ks.JSONTree=void 0;Ks.renderPrompt=zir;Ks.renderElementJSON=Yir;var pbe=TT(),Got=cbe(),Vir=Pot();TR(Fot(),Ks);Ks.JSONTree=wxe();TR(TT(),Ks);TR(Wxe(),Ks);TR(Zxe(),Ks);TR(Qot(),Ks);TR(qot(),Ks);TR(Wot(),Ks);var $ir=Dxe();Object.defineProperty(Ks,"PromptElement",{enumerable:!0,get:s(function(){return $ir.PromptElement},"get")});var jot=cbe();Object.defineProperty(Ks,"MetadataMap",{enumerable:!0,get:s(function(){return jot.MetadataMap},"get")});Object.defineProperty(Ks,"PromptRenderer",{enumerable:!0,get:s(function(){return jot.PromptRenderer},"get")});async function zir(t,e,r,n,i,o,a=pbe.OutputMode.VSCode){let c="countTokens"in n?new Vir.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new Got.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(zir,"renderPrompt");Ks.contentType="application/vnd.codechat.prompt+json.1";function Yir(t,e,r,n){return new Got.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:pbe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===pbe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(Yir,"renderElementJSON")});var yp=U(z7=>{"use strict";d();Object.defineProperty(z7,"__esModule",{value:!0});z7.dedent=void 0;function Vat(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,m;return(m=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+f+m}).join(`
`)),a+=p+n[l+1]}),a}s(Vat,"dedent");z7.dedent=Vat;z7.default=Vat});var ect=U(LIe=>{"use strict";d();Object.defineProperty(LIe,"__esModule",{value:!0});LIe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var sct=U(FIe=>{"use strict";d();Object.defineProperty(FIe,"__esModule",{value:!0});var tct=require("worker_threads"),Gsr=require("v8"),jsr=require("os"),rct=ect(),_re="ready",nct="spawning",Vsr="busy",Sre="off",ict=jsr.cpus().length,oct=process.version.replace("v","").split("."),$sr=parseInt(oct[0]),zsr=parseInt(oct[1]),MIe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=ict,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new tct.Worker(rct.workerFile,{eval:!0});e.status=nct,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=_re,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=Sre,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===Sre).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===_re){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=Vsr;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=Gsr.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=Sre,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=_re,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:ict,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new tct.Worker(rct.workerFile,{eval:!0});this.workers.push({status:nct,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=_re,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=Sre,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if($sr>=12&&zsr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};FIe.default=new MIe});var Rre=U(UR=>{"use strict";d();var Ysr=UR&&UR.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(UR,"__esModule",{value:!0});var Y7=Ysr(sct()),Ksr=`job needs a function.
Try with:
> job(() => {...}, config)`,Jsr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function Xsr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(Ksr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(Jsr));Y7.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(Xsr,"job");UR.job=Xsr;UR.stop=Y7.default.teardown.bind(Y7.default);UR.start=Y7.default.setup.bind(Y7.default)});var bct=U(qR=>{"use strict";d();var OC=qR&&qR.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},$Ie=qR&&qR.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ev,zT;Object.defineProperty(qR,"__esModule",{value:!0});var zIe=class{static{s(this,"AwaitLock")}constructor(){Ev.set(this,!1),zT.set(this,new Set)}get acquired(){return OC(this,Ev,"f")}acquireAsync({timeout:e}={}){if(!OC(this,Ev,"f"))return $Ie(this,Ev,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{OC(this,zT,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),OC(this,zT,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{OC(this,zT,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return OC(this,Ev,"f")?!1:($Ie(this,Ev,!0,"f"),!0)}release(){if(!OC(this,Ev,"f"))throw new Error("Cannot release an unacquired lock");if(OC(this,zT,"f").size>0){let[e]=OC(this,zT,"f");OC(this,zT,"f").delete(e),e()}else $Ie(this,Ev,!1,"f")}};qR.default=zIe;Ev=new WeakMap,zT=new WeakMap});var kwe=U((fYi,Ldt)=>{d();var vQ=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,w0r=typeof AbortController=="function",aie=w0r?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new Bdt}abort(){this.signal.dispatchEvent("abort")}},_0r=typeof AbortSignal=="function",S0r=typeof aie.AbortSignal=="function",Bdt=_0r?AbortSignal:S0r?aie.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},Swe=new Set,Twe=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;cie(r)&&Rwe(r,`${t} option`,`options.${e}`,CN)},"deprecatedOption"),wwe=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(cie(r)){let{prototype:n}=CN,{get:i}=Object.getOwnPropertyDescriptor(n,t);Rwe(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),R0r=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(cie(r)){let{prototype:n}=CN,{get:i}=Object.getOwnPropertyDescriptor(n,t);Rwe(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),Ddt=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),cie=s(t=>!Swe.has(t),"shouldWarn"),Rwe=s((t,e,r,n)=>{Swe.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;Ddt(i,"DeprecationWarning",t,n)},"warn"),KR=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Ndt=s(t=>KR(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?yN:null:null,"getUintArray"),yN=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},_we=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=Ndt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},CN=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:E,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:b}=e,{length:_,maxAge:k,stale:P}=e instanceof t?{}:e;if(r!==0&&!KR(r))throw new TypeError("max option must be a nonnegative integer");let N=r?Ndt(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=E,!this.fetchMethod&&E!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new _we(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!x,this.maxSize!==0){if(!KR(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!P,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=KR(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!KR(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let M="LRU_CACHE_UNBOUNDED";cie(M)&&(Swe.add(M),Ddt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,t))}P&&Twe("stale","allowStale"),k&&Twe("maxAge","ttl"),_&&Twe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new yN(this.max),this.starts=new yN(this.max),this.setItemTTL=(n,i,o=vQ.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?vQ.now():0};let e=0,r=s(()=>{let n=vQ.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new yN(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!KR(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!KR(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return wwe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=vQ.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=vQ.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new aie,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),f=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let E=this.backgroundFetch(e,g,h,p);return r&&E.__staleWhileFetching!==void 0?E.__staleWhileFetching:E.__returned=E}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return wwe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return wwe("reset","clear"),this.clear}get length(){return R0r("length","size"),this.size}static get AbortController(){return aie}static get AbortSignal(){return Bdt}};Ldt.exports=CN});var Dwe=U((hYi,Mdt)=>{"use strict";d();var xQ=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},Pwe=class extends xQ{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},Bwe=class extends xQ{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};Mdt.exports={FetchBaseError:xQ,FetchError:Pwe,AbortError:Bwe}});var wv=U((yYi,Odt)=>{"use strict";d();var{constants:{MAX_LENGTH:k0r}}=require("buffer"),{pipeline:lie,PassThrough:P0r}=require("stream"),{promisify:B0r}=require("util"),{createGunzip:D0r,createInflate:N0r,createBrotliDecompress:L0r,constants:{Z_SYNC_FLUSH:Fdt}}=require("zlib"),M0r=fy()("helix-fetch:utils"),F0r=B0r(lie),O0r=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),Q0r=s((t,e,r,n)=>{if(!O0r(t,e))return r;let i=s(o=>{o&&(M0r(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return lie(r,D0r({flush:Fdt,finishFlush:Fdt}),i);case"deflate":case"x-deflate":return lie(r,N0r(),i);case"br":return lie(r,L0r(),i);default:return r}},"decodeStream"),U0r=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),uie=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?q0r(t,e):H0r(t,e);default:return 0}},"calcSize"),q0r=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:uie(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),H0r=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=uie(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=uie(t[i],e)}),r},"calcObjectSize"),W0r=s(t=>uie(t,new WeakSet),"sizeof"),G0r=s(async t=>{let e=new P0r,r=0,n=[];return e.on("data",i=>{if(r+i.length>k0r)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await F0r(t,e),Buffer.concat(n,r)},"streamToBuffer");Odt.exports={decodeStream:Q0r,isPlainObject:U0r,sizeof:W0r,streamToBuffer:G0r}});var fie=U((vYi,Hdt)=>{"use strict";d();var{PassThrough:Qdt,Readable:_v}=require("stream"),{types:{isAnyArrayBuffer:qdt}}=require("util"),{FetchError:j0r,FetchBaseError:V0r}=Dwe(),{streamToBuffer:$0r}=wv(),z0r=Buffer.alloc(0),uh=Symbol("Body internals"),Y0r=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Udt=s(async t=>{if(t[uh].disturbed)throw new TypeError("Already read");if(t[uh].error)throw new TypeError(`Stream had error: ${t[uh].error.message}`);t[uh].disturbed=!0;let{stream:e}=t[uh];return e===null?z0r:$0r(e)},"consume"),die=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=_v.from(e.toString()):e instanceof _v?r=e:Buffer.isBuffer(e)?r=_v.from(e):qdt(e)?r=_v.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=_v.from(e):r=_v.from(String(e)),this[uh]={stream:r,disturbed:!1,error:null},e instanceof _v&&r.on("error",n=>{let i=n instanceof V0r?n:new j0r(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[uh].error=i})}get body(){return this[uh].stream}get bodyUsed(){return this[uh].disturbed}async buffer(){return Udt(this)}async arrayBuffer(){return Y0r(await this.buffer())}async text(){return(await Udt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(die.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var K0r=s(t=>{if(t[uh].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[uh],r=e;if(e instanceof _v){r=new Qdt;let n=new Qdt;e.pipe(r),e.pipe(n),t[uh].stream=n}return r},"cloneStream"),J0r=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||qdt(t)||t instanceof _v?null:"text/plain; charset=utf-8","guessContentType");Hdt.exports={Body:die,cloneStream:K0r,guessContentType:J0r}});var EN=U((IYi,Vdt)=>{"use strict";d();var{validateHeaderName:Wdt,validateHeaderValue:Gdt}=require("http"),{isPlainObject:X0r}=wv(),Sv=Symbol("Headers internals"),bQ=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof Wdt=="function")Wdt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),jdt=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Gdt=="function")Gdt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),pie=class t{static{s(this,"Headers")}constructor(e={}){if(this[Sv]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(X0r(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Sv].map.set(bQ(e),jdt(r,e))}has(e){return this[Sv].map.has(bQ(e))}get(e){let r=this[Sv].map.get(bQ(e));return r===void 0?null:r}append(e,r){let n=bQ(e),i=jdt(r,e),o=this[Sv].map.get(n);this[Sv].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Sv].map.delete(bQ(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Sv].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Sv].map)}};Object.defineProperties(pie.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Vdt.exports={Headers:pie}});var Nwe=U((_Yi,$dt)=>{"use strict";d();var{EventEmitter:Z0r}=require("events"),sA=Symbol("AbortSignal internals"),vN=class{static{s(this,"AbortSignal")}constructor(){this[sA]={eventEmitter:new Z0r,onabort:null,aborted:!1}}get aborted(){return this[sA].aborted}get onabort(){return this[sA].onabort}set onabort(e){this[sA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[sA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[sA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[sA][n]=="function"&&this[n](r),this[sA].eventEmitter.emit(e,r)}fire(){this[sA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(vN.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var hie=class extends vN{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[sA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[sA].timerId)}};Object.defineProperties(hie.prototype,{clear:{enumerable:!0}});var mie=Symbol("AbortController internals"),gie=class{static{s(this,"AbortController")}constructor(){this[mie]={signal:new vN}}get signal(){return this[mie].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[mie].signal.aborted||this[mie].signal.fire()}};Object.defineProperties(gie.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});$dt.exports={AbortController:gie,AbortSignal:vN,TimeoutSignal:hie}});var IQ=U((kYi,Kdt)=>{"use strict";d();var{randomBytes:epr}=require("crypto"),{Readable:tpr}=require("stream"),Mwe=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),rpr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),zdt=s(t=>`--${t}--\r
\r
`,"getFooter"),Ydt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,Mwe(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*npr(t,e){for(let[r,n]of t)yield Ydt(e,r,n),Mwe(n)?yield*n.stream():yield n,yield`\r
`;yield zdt(e)}s(npr,"formDataIterator");var ipr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(Ydt(e,n,i)),r+=Mwe(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(zdt(e)),r},"getFormDataLength"),Lwe=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=epr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=ipr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return tpr.from(npr(this.fd,this.boundary))}};Kdt.exports={isFormData:rpr,FormDataSerializer:Lwe}});var Xdt=U((NYi,Jdt)=>{"use strict";d();var{AbortSignal:DYi}=Nwe(),{Body:opr,cloneStream:spr,guessContentType:apr}=fie(),{Headers:cpr}=EN(),{isPlainObject:lpr}=wv(),{isFormData:upr,FormDataSerializer:dpr}=IQ(),fpr=20,nw=Symbol("Request internals"),Aie=class t extends opr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?spr(n):null),c=new cpr(r.headers||n&&n.headers||{});if(upr(a)&&!c.has("content-type")){let p=new dpr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(lpr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=apr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[nw]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=fpr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[nw].method}get url(){return this[nw].parsedURL.toString()}get headers(){return this[nw].headers}get redirect(){return this[nw].redirect}get cache(){return this[nw].cache}get signal(){return this[nw].signal}clone(){return new t(this)}get init(){return this[nw].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Aie.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Jdt.exports={Request:Aie}});var Fwe=U((FYi,Zdt)=>{"use strict";d();var{Body:ppr,cloneStream:mpr,guessContentType:hpr}=fie(),{Headers:gpr}=EN(),{isPlainObject:Apr}=wv(),{isFormData:ypr,FormDataSerializer:Cpr}=IQ(),aA=Symbol("Response internals"),yie=class t extends ppr{static{s(this,"Response")}constructor(e=null,r={}){let n=new gpr(r.headers),i=e;if(ypr(i)&&!n.has("content-type")){let o=new Cpr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Apr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=hpr(i);o&&n.set("content-type",o)}super(i),this[aA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[aA].url||""}get status(){return this[aA].status}get statusText(){return this[aA].statusText}get ok(){return this[aA].status>=200&&this[aA].status<300}get redirected(){return this[aA].counter>0}get headers(){return this[aA].headers}get httpVersion(){return this[aA].httpVersion}get decoded(){return this[aA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(mpr(this),{...this[aA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(yie.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Zdt.exports={Response:yie}});var tft=U((qYi,eft)=>{"use strict";d();var Epr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),vpr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),xpr=new Set([500,502,503,504]),bpr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Ipr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function JR(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(JR,"toNumberOrZero");function Tpr(t){return t?xpr.has(t.status):!0}s(Tpr,"isErrorResponse");function Owe(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(Owe,"parseCacheControl");function wpr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(wpr,"formatCacheControl");eft.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Owe(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Owe(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":wpr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&vpr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Epr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Owe(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)bpr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return JR(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return JR(this._rescc["s-maxage"])}if(this._rescc["max-age"])return JR(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+JR(this._rescc["stale-if-error"]),n=e+JR(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+JR(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+JR(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Tpr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Ipr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var oft=U((GYi,ift)=>{"use strict";d();var _pr=tft(),{Headers:Spr}=EN(),rft=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),nft=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Qwe=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new _pr(rft(e),nft(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(rft(e))}responseHeaders(e){return new Spr(this.policy.responseHeaders(nft(e)))}timeToLive(){return this.policy.timeToLive()}};ift.exports=Qwe});var cft=U(($Yi,aft)=>{"use strict";d();var{Readable:Rpr}=require("stream"),{Headers:sft}=EN(),{Response:kpr}=Fwe(),iw=Symbol("CacheableResponse internals"),Ppr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Uwe=class t extends kpr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new sft(r.headers);this[iw]={headers:n,bufferedBody:e}}get headers(){return this[iw].headers}set headers(e){if(e instanceof sft)this[iw].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return Rpr.from(this[iw].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[iw].bufferedBody}async arrayBuffer(){return Ppr(this[iw].bufferedBody)}async text(){return this[iw].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[iw].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},Bpr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new Uwe(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");aft.exports={cacheableResponse:Bpr}});var Cie=U((KYi,lft)=>{"use strict";d();var qwe=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};lft.exports={RequestAbortedError:qwe}});var mft=U((ZYi,pft)=>{"use strict";d();var dft=require("http"),fft=require("https"),{Readable:Dpr}=require("stream"),Rv=fy()("helix-fetch:h1"),{RequestAbortedError:uft}=Cie(),{decodeStream:Npr}=wv(),Lpr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new fft.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new dft.Agent(n),r.httpAgent):void 0},"getAgent"),Mpr=s(t=>{t.h1={}},"setupContext"),Fpr=s(async({h1:t})=>{t.httpAgent&&(Rv("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Rv("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Opr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?Npr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Qpr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?fft:dft,i=Lpr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{Rv(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{Rv(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{Rv(`${o.method} ${e.href}`);let f,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Rv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new uft),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new uft);return}p.addEventListener("abort",m)}f=n(e,o),f.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Rv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(Opr(h,o.decode,u))}),f.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Rv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(Rv(`${o.method} ${e.href} failed with: ${h.message}`),f.abort(),u(h))}),c instanceof Dpr?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");pft.exports={request:Qpr,setupContext:Mpr,resetContext:Fpr}});var yft=U((rKi,Aft)=>{"use strict";d();var{connect:Upr,constants:qpr}=require("http2"),{Readable:Hpr}=require("stream"),Xs=fy()("helix-fetch:h2"),{RequestAbortedError:hft}=Cie(),{decodeStream:Wpr}=wv(),{NGHTTP2_CANCEL:TQ}=qpr,Gpr=5*60*1e3,jpr=5e3,Vpr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),$pr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Xs(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),gft=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?Wpr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),zpr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=jpr}}}=t,u=i[":path"],f=`${e}${u}`;Xs(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(TQ)},"rejectPush")),n.on("push",(p,m)=>{Xs(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{Xs(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(TQ)}),c&&c(f,i,gft(p,n,r))}),n.on("aborted",()=>{Xs(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{Xs(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{Xs(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),Ypr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=Gpr,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:y,socket:E,body:x,decode:b}=h;return E&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let P=u[n];if(!P||P.closed||P.destroyed){let Y=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),G={...l,rejectUnauthorized:Y};E&&!E.inUse&&(G.createConnection=()=>(Xs(`reusing socket #${E.id} (${E.servername})`),E.inUse=!0,E)),P=Upr(n,{...G,settings:{enablePush:!!(p||m)}}),P.setMaxListeners(1e3),P.setTimeout(f,()=>{Xs(`closing session ${n} after ${f} ms of inactivity`),P.close()}),P.once("connect",()=>{Xs(`session ${n} established`),Xs(`caching session ${n}`),u[n]=P}),P.on("localSettings",ce=>{Xs(`session ${n} localSettings: ${JSON.stringify(ce)}`)}),P.on("remoteSettings",ce=>{Xs(`session ${n} remoteSettings: ${JSON.stringify(ce)}`)}),P.once("close",()=>{Xs(`session ${n} closed`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.once("error",ce=>{Xs(`session ${n} encountered error: ${ce}`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.on("frameError",(ce,ie,V)=>{Xs(`session ${n} encountered frameError: type: ${ce}, code: ${ie}, id: ${V}`)}),P.once("goaway",(ce,ie,V)=>{Xs(`session ${n} received GOAWAY frame: errorCode: ${ce}, lastStreamID: ${ie}, opaqueData: ${V?V.toString():void 0}`)}),P.on("stream",(ce,ie,V)=>{zpr(t,n,b,ce,ie,V)})}else E&&E.id!==P.socket.id&&!E.inUse&&(Xs(`discarding redundant socket used for ALPN: #${E.id} ${E.servername}`),E.destroy());Xs(`${g} ${e.host}${c}`);let N,{signal:M}=h,J=s(()=>{M.removeEventListener("abort",J),k(new hft),N&&N.close(TQ)},"onAbortSignal");if(M){if(M.aborted){k(new hft);return}M.addEventListener("abort",J)}let pe=s(Y=>{Xs(`session ${n} encountered error during ${h.method} ${e.href}: ${Y}`),k(Y)},"onSessionError");P.once("error",pe),N=P.request({":method":g,":path":c,...y}),N.once("response",Y=>{P.off("error",pe),M&&M.removeEventListener("abort",J),_(gft(Y,N,h.decode,k))}),N.once("error",Y=>{P.off("error",pe),M&&M.removeEventListener("abort",J),N.rstCode!==TQ&&(Xs(`${h.method} ${e.href} failed with: ${Y.message}`),N.close(TQ),k(Y))}),N.once("frameError",(Y,G,H)=>{P.off("error",pe),Xs(`encountered frameError during ${h.method} ${e.href}: type: ${Y}, code: ${G}, id: ${H}`)}),N.on("push",(Y,G)=>{Xs(`received 'push' event: headers: ${JSON.stringify(Y)}, flags: ${G}`)}),x instanceof Hpr?x.pipe(N):(x&&N.write(x),N.end())})},"request");Aft.exports={request:Ypr,setupContext:Vpr,resetContext:$pr}});var Eft=U((oKi,Cft)=>{"use strict";d();var{EventEmitter:Kpr}=require("events"),Jpr=s(()=>{let t={},e=new Kpr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");Cft.exports=Jpr});var vft=U((cKi,Xpr)=>{Xpr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var wft=U((lKi,Tft)=>{"use strict";d();var{Readable:Zpr}=require("stream"),emr=require("tls"),{types:{isAnyArrayBuffer:tmr}}=require("util"),rmr=kwe(),Hwe=fy()("helix-fetch:core"),{RequestAbortedError:Eie}=Cie(),Wwe=mft(),vie=yft(),nmr=Eft(),{isPlainObject:imr}=wv(),{isFormData:omr,FormDataSerializer:smr}=IQ(),{version:amr}=vft(),Gwe="h2",jwe="h2c",Vwe="http/1.0",XR="http/1.1",cmr=100,lmr=60*60*1e3,umr=[Gwe,XR,Vwe],dmr=`helix-fetch/${amr}`,fmr={method:"GET",compress:!0,decode:!0},xft=0,bft=nmr(),Ift=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Eie;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Eie);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Eie||(Hwe(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=emr.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),xft+=1,o.id=xft,o.secureConnecting=!1,Hwe(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),pmr=s(async(t,e)=>{let r=await bft.acquire(t.origin);try{return r||(r=await Ift(t,e)),r}finally{bft.release(t.origin,r)}},"connect"),mmr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=XR,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=jwe,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await pmr(e,u);return i=f.alpnProtocol,i||(i=XR),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),hmr=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),gmr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await Ift(e,u);return{protocol:f.alpnProtocol||XR,socket:f}}return{protocol:c.alpnProtocol||XR,socket:c}},"getProtocolAndSocketFromFactory"),Amr=s(async(t,e,r)=>{let n=new URL(e),i={...fmr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=hmr(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(omr(i.body)){let u=new smr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":imr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):tmr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Zpr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await gmr(t.socketFactory,n,i,t.alpnProtocols):await mmr(t,n,a);switch(Hwe(`${n.host} -> ${c}`),c){case Gwe:try{return await vie.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case jwe:return vie.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case Vwe:case XR:return Wwe.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),ymr=s(async t=>(t.alpnCache.clear(),Promise.all([Wwe.resetContext(t),vie.resetContext(t)])),"resetContext"),Cmr=s(t=>{let{options:{alpnProtocols:e=umr,alpnCacheTTL:r=lmr,alpnCacheSize:n=cmr,userAgent:i=dmr,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new rmr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,Wwe.setupContext(t),vie.setupContext(t)},"setupContext");Tft.exports={request:Amr,setupContext:Cmr,resetContext:ymr,RequestAbortedError:Eie,ALPN_HTTP2:Gwe,ALPN_HTTP2C:jwe,ALPN_HTTP1_1:XR,ALPN_HTTP1_0:Vwe}});var Sft=U((fKi,_ft)=>{"use strict";d();var Emr=fy()("helix-fetch:core"),{request:vmr,setupContext:xmr,resetContext:bmr,RequestAbortedError:Imr,ALPN_HTTP2:Tmr,ALPN_HTTP2C:wmr,ALPN_HTTP1_1:_mr,ALPN_HTTP1_0:Smr}=wft(),$we=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},xmr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:Imr,ALPN_HTTP2:Tmr,ALPN_HTTP2C:wmr,ALPN_HTTP1_1:_mr,ALPN_HTTP1_0:Smr}}async request(e,r){return vmr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return Emr("resetting context"),bmr(this)}};_ft.exports=new $we().api()});var Dft=U((hKi,Bft)=>{"use strict";d();var{EventEmitter:Rmr}=require("events"),{Readable:wQ}=require("stream"),zwe=fy()("helix-fetch"),kmr=kwe(),{Body:Pmr}=fie(),{Headers:Xwe}=EN(),{Request:ZR}=Xdt(),{Response:Kwe}=Fwe(),{FetchBaseError:Bmr,FetchError:_Q,AbortError:xie}=Dwe(),{AbortController:Dmr,AbortSignal:Nmr,TimeoutSignal:Lmr}=Nwe(),Mmr=oft(),{cacheableResponse:Fmr}=cft(),{sizeof:Omr}=wv(),{isFormData:Qmr}=IQ(),{context:Umr,RequestAbortedError:qmr}=Sft(),Rft=["GET","HEAD"],Hmr=500,Wmr=100*1024*1024,Ywe="push",kft=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof ZR&&typeof r>"u"?e:new ZR(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let P=new xie("The operation was aborted.");throw i.init.body instanceof wQ&&i.init.body.destroy(P),P}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof wQ)&&!Qmr(m)?m:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(P){throw m instanceof wQ&&m.destroy(P),P instanceof TypeError?P:P instanceof qmr?new xie("The operation was aborted."):new _Q(P.message,"system",P)}let g=s(()=>{c.removeEventListener("abort",g);let P=new xie("The operation was aborted.");i.init.body instanceof wQ&&i.init.body.destroy(P),h.readable.emit("error",P)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:y,statusText:E,httpVersion:x,headers:b,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:P}=b,N=P==null?null:new URL(P,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new _Q(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new _Q(`maximum redirect reached at: ${i.url}`,"max-redirect");let M={headers:new Xwe(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof wQ)throw c&&c.removeEventListener("abort",g),new _Q("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(M.method="GET",M.body=void 0,M.headers.delete("content-length")),c&&c.removeEventListener("abort",g),kft(t,new ZR(N,M))}default:}}return c&&(_.once("end",()=>{c.removeEventListener("abort",g)}),_.once("error",()=>{c.removeEventListener("abort",g)})),new Kwe(_,{url:i.url,status:y,statusText:E,headers:b,httpVersion:x,decoded:k,counter:i.counter})},"fetch"),Pft=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!Rft.includes(e.method))return r;let n=new Mmr(e,r,{shared:!1});if(n.storable()){let i=await Fmr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),Gmr=s(async(t,e,r)=>{let n=new ZR(e,r);if(t.options.maxCacheSize!==0&&Rft.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new Xwe(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await kft(t,n);return n.cache!=="no-store"?Pft(t,n,o):o},"cachingFetch"),jmr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),Vmr=s(t=>new Lmr(t),"timeoutSignal"),Jwe=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:Wmr,i=Hmr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>Omr(c),"sizeCalculation");this.cache=new kmr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new Rmr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(x=>x.startsWith(":")).forEach(x=>delete f[x]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:E}=u;this.pushHandler(c,f,new Kwe(y,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:E}))}),this.context=Umr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:Pmr,Headers:Xwe,Request:ZR,Response:Kwe,AbortController:Dmr,AbortSignal:Nmr,FetchBaseError:Bmr,FetchError:_Q,AbortError:xie,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:jmr,timeoutSignal:Vmr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Gmr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Ywe,e)}offPush(e){return this.eventEmitter.off(Ywe,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){zwe(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new ZR(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(zwe(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){zwe(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await Pft(this,new ZR(e,{headers:r}),n);this.eventEmitter.emit(Ywe,e,i)}};Bft.exports=new Jwe().api()});var Lft=U((yKi,Nft)=>{"use strict";d();Nft.exports=Dft()});var wpt=U((yuo,Tpt)=>{d();Tpt.exports=Ipt;Ipt.sync=tyr;var xpt=require("fs");function eyr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(eyr,"checkPathExt");function bpt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:eyr(e,r)}s(bpt,"checkStat");function Ipt(t,e,r){xpt.stat(t,function(n,i){r(n,n?!1:bpt(i,t,e))})}s(Ipt,"isexe");function tyr(t,e){return bpt(xpt.statSync(t),t,e)}s(tyr,"sync")});var Ppt=U((vuo,kpt)=>{d();kpt.exports=Spt;Spt.sync=ryr;var _pt=require("fs");function Spt(t,e,r){_pt.stat(t,function(n,i){r(n,n?!1:Rpt(i,e))})}s(Spt,"isexe");function ryr(t,e){return Rpt(_pt.statSync(t),e)}s(ryr,"sync");function Rpt(t,e){return t.isFile()&&nyr(t,e)}s(Rpt,"checkStat");function nyr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(nyr,"checkMode")});var Dpt=U((Tuo,Bpt)=>{d();var Iuo=require("fs"),Soe;process.platform==="win32"||global.TESTING_WINDOWS?Soe=wpt():Soe=Ppt();Bpt.exports=Y_e;Y_e.sync=iyr;function Y_e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){Y_e(t,e||{},function(o,a){o?i(o):n(a)})})}Soe(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(Y_e,"isexe");function iyr(t,e){try{return Soe.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(iyr,"sync")});var Upt=U((Suo,Qpt)=>{d();var UN=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Npt=require("path"),oyr=UN?";":":",Lpt=Dpt(),Mpt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),Fpt=s((t,e)=>{let r=e.colon||oyr,n=t.match(/\//)||UN&&t.match(/\\/)?[""]:[...UN?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=UN?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=UN?i.split(r):[""];return UN&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),Opt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=Fpt(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p(Mpt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=Npt.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(y,u,0))}),"step"),l=s((u,f,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(f+1));let g=i[p];Lpt(u+g,{pathExt:o},(y,E)=>{if(!y&&E)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),syr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=Fpt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=Npt.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=f+n[p];try{if(Lpt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Mpt(t)},"whichSync");Qpt.exports=Opt;Opt.sync=syr});var Hpt=U((Puo,K_e)=>{"use strict";d();var qpt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");K_e.exports=qpt;K_e.exports.default=qpt});var Vpt=U((Nuo,jpt)=>{"use strict";d();var Wpt=require("path"),ayr=Upt(),cyr=Hpt();function Gpt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=ayr.sync(t.command,{path:r[cyr({env:r})],pathExt:e?Wpt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=Wpt.resolve(i?t.options.cwd:"",a)),a}s(Gpt,"resolveCommandAttempt");function lyr(t){return Gpt(t)||Gpt(t,!0)}s(lyr,"resolveCommand");jpt.exports=lyr});var $pt=U((Fuo,X_e)=>{"use strict";d();var J_e=/([()\][%!^"`<>&|;, *?])/g;function uyr(t){return t=t.replace(J_e,"^$1"),t}s(uyr,"escapeCommand");function dyr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(J_e,"^$1"),e&&(t=t.replace(J_e,"^$1")),t}s(dyr,"escapeArgument");X_e.exports.command=uyr;X_e.exports.argument=dyr});var Ypt=U((Uuo,zpt)=>{"use strict";d();zpt.exports=/^#!(.*)/});var Jpt=U((Huo,Kpt)=>{"use strict";d();var fyr=Ypt();Kpt.exports=(t="")=>{let e=t.match(fyr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Zpt=U((Guo,Xpt)=>{"use strict";d();var Z_e=require("fs"),pyr=Jpt();function myr(t){let r=Buffer.alloc(150),n;try{n=Z_e.openSync(t,"r"),Z_e.readSync(n,r,0,150,0),Z_e.closeSync(n)}catch{}return pyr(r.toString())}s(myr,"readShebang");Xpt.exports=myr});var nmt=U(($uo,rmt)=>{"use strict";d();var hyr=require("path"),emt=Vpt(),tmt=$pt(),gyr=Zpt(),Ayr=process.platform==="win32",yyr=/\.(?:com|exe)$/i,Cyr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Eyr(t){t.file=emt(t);let e=t.file&&gyr(t.file);return e?(t.args.unshift(t.file),t.command=e,emt(t)):t.file}s(Eyr,"detectShebang");function vyr(t){if(!Ayr)return t;let e=Eyr(t),r=!yyr.test(e);if(t.options.forceShell||r){let n=Cyr.test(e);t.command=hyr.normalize(t.command),t.command=tmt.command(t.command),t.args=t.args.map(o=>tmt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(vyr,"parseNonShell");function xyr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:vyr(n)}s(xyr,"parse");rmt.exports=xyr});var smt=U((Kuo,omt)=>{"use strict";d();var eSe=process.platform==="win32";function tSe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(tSe,"notFoundError");function byr(t,e){if(!eSe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=imt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(byr,"hookChildProcess");function imt(t,e){return eSe&&t===1&&!e.file?tSe(e.original,"spawn"):null}s(imt,"verifyENOENT");function Iyr(t,e){return eSe&&t===1&&!e.file?tSe(e.original,"spawnSync"):null}s(Iyr,"verifyENOENTSync");omt.exports={hookChildProcess:byr,verifyENOENT:imt,verifyENOENTSync:Iyr,notFoundError:tSe}});var lmt=U((Zuo,qN)=>{"use strict";d();var amt=require("child_process"),rSe=nmt(),nSe=smt();function cmt(t,e,r){let n=rSe(t,e,r),i=amt.spawn(n.command,n.args,n.options);return nSe.hookChildProcess(i,n),i}s(cmt,"spawn");function Tyr(t,e,r){let n=rSe(t,e,r),i=amt.spawnSync(n.command,n.args,n.options);return i.error=i.error||nSe.verifyENOENTSync(i.status,n),i}s(Tyr,"spawnSync");qN.exports=cmt;qN.exports.spawn=cmt;qN.exports.sync=Tyr;qN.exports._parse=rSe;qN.exports._enoent=nSe});var Uyr={};ra(Uyr,{getTokenizer:()=>ho,getTokenizerAsync:()=>A7e,main:()=>_mt});module.exports=Jht(Uyr);d();d();j2e().install();d();d();var A6="github.copilot",V2e="github-enterprise";d();d();d();d();d();d();var Bs=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var Up=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return Fq(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var qp="X-Copilot-RelatedPluginVersion-",y6=(Q=>(Q.Market="X-MSEdge-Market",Q.CorpNet="X-FD-Corpnet",Q.Build="X-VSCode-Build",Q.ApplicationVersion="X-VSCode-AppVersion",Q.TargetPopulation="X-VSCode-TargetPopulation",Q.ClientId="X-MSEdge-ClientId",Q.ExtensionName="X-VSCode-ExtensionName",Q.ExtensionVersion="X-VSCode-ExtensionVersion",Q.ExtensionRelease="X-VSCode-ExtensionRelease",Q.Language="X-VSCode-Language",Q.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",Q.CopilotEngine="X-Copilot-Engine",Q.CopilotOverrideEngine="X-Copilot-OverrideEngine",Q.CopilotRepository="X-Copilot-Repository",Q.CopilotFileType="X-Copilot-FileType",Q.CopilotUserKind="X-Copilot-UserKind",Q.CopilotDogfood="X-Copilot-Dogfood",Q.CopilotCustomModel="X-Copilot-CustomModel",Q.CopilotOrgs="X-Copilot-Orgs",Q.CopilotCustomModelNames="X-Copilot-CustomModelNames",Q.CopilotTrackingId="X-Copilot-CopilotTrackingId",Q.CopilotClientVersion="X-Copilot-ClientVersion",Q.CopilotRelatedPluginVersionCppTools=qp+"msvscodecpptools",Q.CopilotRelatedPluginVersionCMakeTools=qp+"msvscodecmaketools",Q.CopilotRelatedPluginVersionMakefileTools=qp+"msvscodemakefiletools",Q.CopilotRelatedPluginVersionCSharpDevKit=qp+"msdotnettoolscsdevkit",Q.CopilotRelatedPluginVersionPython=qp+"mspythonpython",Q.CopilotRelatedPluginVersionPylance=qp+"mspythonvscodepylance",Q.CopilotRelatedPluginVersionJavaPack=qp+"vscjavavscodejavapack",Q.CopilotRelatedPluginVersionTypescript=qp+"vscodetypescriptlanguagefeatures",Q.CopilotRelatedPluginVersionTypescriptNext=qp+"msvscodevscodetypescriptnext",Q.CopilotRelatedPluginVersionCSharp=qp+"msdotnettoolscsharp",Q))(y6||{});var Mgt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},g_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=Mgt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();var jn=class{static{s(this,"Fetcher")}getImplementation(){return this}},C6=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Nu(t){return!t||typeof t!="object"?!1:t instanceof C6||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Nu,"isAbortError");var Gk=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},VA=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Fgt=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function E6(t,e=!0){return t instanceof Error?e&&"cause"in t&&E6(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof Gk||t instanceof VA||t?.message?.startsWith("net::")||Fgt.has(t.code??""):!1}s(E6,"isNetworkError");var eb=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new Gk(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new Gk(`Response body truncated: actualLength=${o}`,"Truncated"):new Gk(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function A_(t,e,r,n,i,o,a,c,l){let u={...c,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(As).sessionId,"VScode-MachineId":t.get(As).machineId,...A0(t),"X-GitHub-Api-Version":$A};n&&(u["OpenAI-Intent"]=n);let f={method:"POST",headers:u,json:o,timeout:l},p=t.get(jn);if(a){let h=new AbortController;a.onCancellationRequested(()=>{Rt(t,"networking.cancelRequest",Dr.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),f.signal=h.signal}return p.fetch(e,f).catch(h=>{if(Ogt(h))return Rt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,f));throw h})}s(A_,"postRequest");function Ogt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(Ogt,"isInterruptedNetworkError");d();d();var Jl=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var xH=Ne(nb()),bH=Ne(require("os"));var Qgt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function Ugt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(Qgt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(Ugt,"buildExceptionDetail");function tce(t,e){let r=t.get(nn),n=r.getEditorInfo(),i=t.get(Jl),o={"#editor":n.devName??n.name,"#editor_version":zA({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":zA(r.getEditorPluginInfo()),"#session_id":t.get(As).sessionId,"#machine_id":t.get(As).machineId,"#architecture":bH.arch(),"#os_platform":bH.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(tce,"buildContext");function t5e(t,e){let r=t.get(lo),n=t.get(nn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:tce(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=Ugt(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,xH.SHA256)(xH.enc.Utf16.parse(u.join(`
`))).toString()),o}s(t5e,"buildPayload");d();var x6=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var n5e=Ne(nb());var Or=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},y_=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},TH=class extends Or{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}};var YA=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Or}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var Hp=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:o5e(r,n),verboseLogging:Hgt(r,n),testMode:e,simulation:qgt(n)})}};function Lh(t){return t.get(Hp).flags.testMode}s(Lh,"isRunningInTest");function jk(t){return Lh(t)}s(jk,"shouldFailForDebugPurposes");function b6(t){return t.get(Hp).flags.debug}s(b6,"isDebugEnabled");function i5e(t){return t.get(Hp).flags.verboseLogging}s(i5e,"isVerboseLoggingEnabled");function o5e(t,e){return t.includes("--debug")||rce(e,"DEBUG")}s(o5e,"determineDebugFlag");function qgt(t){return rce(t,"SIMULATION")}s(qgt,"determineSimulationFlag");function wH(t){return t.get(Hp).flags.simulation}s(wH,"isRunningInSimulation");function Hgt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||rce(e,"VERBOSE")||o5e(t,e)}s(Hgt,"determineVerboseLoggingEnabled");function rce(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(rce,"determineEnvFlagEnabled");d();var Za=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var c5e=require("os"),l5e=Ne(require("path"));function I6(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(I6,"redactPaths");var Wgt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),Ggt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function ice(t){if(Wgt.has(t))return t;for(let e of Ggt)if(e.test(t))return t;return I6(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(ice,"redactMessage");function _H(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(_H,"escapeForRegExp");var jgt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+_H((0,c5e.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function nce(t){return t.replace(jgt,"~")}s(nce,"redactHomeDir");var u5e="[\\\\/]?([^:)]*)(?=:\\d)",s5e=new RegExp(_H(l5e.sep),"g"),a5e=new RegExp(_H(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+u5e,"gi");function oce(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(a5e.test(c))i.stack+=`
${I6(c.replace(a5e,(l,u)=>"./"+u.replace(s5e,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${I6(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(_H(f.replace(/[\\/]$/,""))+u5e,"gi");if(p.test(c)){i.stack+=`
${I6(c.replace(p,(m,h)=>u+h.replace(s5e,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${nce(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=nce(o));return t.cause instanceof Error&&(i.cause=oce(t.cause,e,r,n)),i}s(oce,"cloneError");function d5e(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(d5e,"errorMessageWithoutPath");function f5e(t,e){return oce(t,s(function(n){return nce(d5e(n))},"prepareMessage"),!0,e)}s(f5e,"prepareErrorForRestrictedTelemetry");function p5e(t,e,r=!1){return oce(t,s(function(i){if(r)return ice(d5e(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=I6(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(p5e,"redactError");d();d();var Lu={};ra(Lu,{HasPropertyKey:()=>SH,IsArray:()=>ec,IsAsyncIterator:()=>sce,IsBigInt:()=>T6,IsBoolean:()=>w1,IsDate:()=>C_,IsFunction:()=>ace,IsIterator:()=>cce,IsNull:()=>lce,IsNumber:()=>y0,IsObject:()=>Go,IsRegExp:()=>w6,IsString:()=>as,IsSymbol:()=>uce,IsUint8Array:()=>_1,IsUndefined:()=>tc});d();function SH(t,e){return e in t}s(SH,"HasPropertyKey");function sce(t){return Go(t)&&!ec(t)&&!_1(t)&&Symbol.asyncIterator in t}s(sce,"IsAsyncIterator");function ec(t){return Array.isArray(t)}s(ec,"IsArray");function T6(t){return typeof t=="bigint"}s(T6,"IsBigInt");function w1(t){return typeof t=="boolean"}s(w1,"IsBoolean");function C_(t){return t instanceof globalThis.Date}s(C_,"IsDate");function ace(t){return typeof t=="function"}s(ace,"IsFunction");function cce(t){return Go(t)&&!ec(t)&&!_1(t)&&Symbol.iterator in t}s(cce,"IsIterator");function lce(t){return t===null}s(lce,"IsNull");function y0(t){return typeof t=="number"}s(y0,"IsNumber");function Go(t){return typeof t=="object"&&t!==null}s(Go,"IsObject");function w6(t){return t instanceof globalThis.RegExp}s(w6,"IsRegExp");function as(t){return typeof t=="string"}s(as,"IsString");function uce(t){return typeof t=="symbol"}s(uce,"IsSymbol");function _1(t){return t instanceof globalThis.Uint8Array}s(_1,"IsUint8Array");function tc(t){return t===void 0}s(tc,"IsUndefined");function Vgt(t){return t.map(e=>RH(e))}s(Vgt,"ArrayType");function $gt(t){return new Date(t.getTime())}s($gt,"DateType");function zgt(t){return new Uint8Array(t)}s(zgt,"Uint8ArrayType");function Ygt(t){return new RegExp(t.source,t.flags)}s(Ygt,"RegExpType");function Kgt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=RH(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=RH(t[r]);return e}s(Kgt,"ObjectType");function RH(t){return ec(t)?Vgt(t):C_(t)?$gt(t):_1(t)?zgt(t):w6(t)?Ygt(t):Go(t)?Kgt(t):t}s(RH,"Visit");function Ds(t){return RH(t)}s(Ds,"Clone");function Vk(t,e){return e===void 0?Ds(t):Ds({...e,...t})}s(Vk,"CloneType");d();d();d();function kH(t){return Ei(t)&&globalThis.Symbol.asyncIterator in t}s(kH,"IsAsyncIterator");function PH(t){return Ei(t)&&globalThis.Symbol.iterator in t}s(PH,"IsIterator");function dce(t){return Ei(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(dce,"IsStandardObject");function BH(t){return t instanceof globalThis.Promise}s(BH,"IsPromise");function Cd(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Cd,"IsDate");function m5e(t){return t instanceof globalThis.Map}s(m5e,"IsMap");function h5e(t){return t instanceof globalThis.Set}s(h5e,"IsSet");function Wp(t){return globalThis.ArrayBuffer.isView(t)}s(Wp,"IsTypedArray");function $k(t){return t instanceof globalThis.Uint8Array}s($k,"IsUint8Array");function vn(t,e){return e in t}s(vn,"HasPropertyKey");function Ei(t){return t!==null&&typeof t=="object"}s(Ei,"IsObject");function xn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(xn,"IsArray");function Ns(t){return t===void 0}s(Ns,"IsUndefined");function S1(t){return t===null}s(S1,"IsNull");function KA(t){return typeof t=="boolean"}s(KA,"IsBoolean");function Vr(t){return typeof t=="number"}s(Vr,"IsNumber");function DH(t){return globalThis.Number.isInteger(t)}s(DH,"IsInteger");function Xl(t){return typeof t=="bigint"}s(Xl,"IsBigInt");function ro(t){return typeof t=="string"}s(ro,"IsString");function ib(t){return typeof t=="function"}s(ib,"IsFunction");function R1(t){return typeof t=="symbol"}s(R1,"IsSymbol");function C0(t){return Xl(t)||KA(t)||S1(t)||Vr(t)||ro(t)||R1(t)||Ns(t)}s(C0,"IsValueType");var ys;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=Ei(a);return t.AllowArrayObject?c:c&&!xn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Vr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ns(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(ys||(ys={}));d();function Jgt(t){return globalThis.Object.freeze(t).map(e=>_6(e))}s(Jgt,"ImmutableArray");function Xgt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=_6(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=_6(t[r]);return globalThis.Object.freeze(e)}s(Xgt,"ImmutableObject");function _6(t){return ec(t)?Jgt(t):C_(t)?t:_1(t)?t:w6(t)?t:Go(t)?Xgt(t):t}s(_6,"Immutable");function it(t,e){let r=e!==void 0?{...e,...t}:t;switch(ys.InstanceMode){case"freeze":return _6(r);case"clone":return Ds(r);default:return r}}s(it,"CreateType");d();var bn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var oa=Symbol.for("TypeBox.Transform"),Mh=Symbol.for("TypeBox.Readonly"),Zl=Symbol.for("TypeBox.Optional"),Gp=Symbol.for("TypeBox.Hint"),et=Symbol.for("TypeBox.Kind");function zk(t){return Go(t)&&t[Mh]==="Readonly"}s(zk,"IsReadonly");function uf(t){return Go(t)&&t[Zl]==="Optional"}s(uf,"IsOptional");function fce(t){return $i(t,"Any")}s(fce,"IsAny");function pce(t){return $i(t,"Argument")}s(pce,"IsArgument");function Fh(t){return $i(t,"Array")}s(Fh,"IsArray");function E_(t){return $i(t,"AsyncIterator")}s(E_,"IsAsyncIterator");function v_(t){return $i(t,"BigInt")}s(v_,"IsBigInt");function k1(t){return $i(t,"Boolean")}s(k1,"IsBoolean");function Oh(t){return $i(t,"Computed")}s(Oh,"IsComputed");function Qh(t){return $i(t,"Constructor")}s(Qh,"IsConstructor");function Zgt(t){return $i(t,"Date")}s(Zgt,"IsDate");function Uh(t){return $i(t,"Function")}s(Uh,"IsFunction");function qh(t){return $i(t,"Integer")}s(qh,"IsInteger");function va(t){return $i(t,"Intersect")}s(va,"IsIntersect");function x_(t){return $i(t,"Iterator")}s(x_,"IsIterator");function $i(t,e){return Go(t)&&et in t&&t[et]===e}s($i,"IsKindOf");function NH(t){return w1(t)||y0(t)||as(t)}s(NH,"IsLiteralValue");function E0(t){return $i(t,"Literal")}s(E0,"IsLiteral");function v0(t){return $i(t,"MappedKey")}s(v0,"IsMappedKey");function Ls(t){return $i(t,"MappedResult")}s(Ls,"IsMappedResult");function ob(t){return $i(t,"Never")}s(ob,"IsNever");function eAt(t){return $i(t,"Not")}s(eAt,"IsNot");function S6(t){return $i(t,"Null")}s(S6,"IsNull");function Hh(t){return $i(t,"Number")}s(Hh,"IsNumber");function rc(t){return $i(t,"Object")}s(rc,"IsObject");function b_(t){return $i(t,"Promise")}s(b_,"IsPromise");function I_(t){return $i(t,"Record")}s(I_,"IsRecord");function Da(t){return $i(t,"Ref")}s(Da,"IsRef");function mce(t){return $i(t,"RegExp")}s(mce,"IsRegExp");function P1(t){return $i(t,"String")}s(P1,"IsString");function R6(t){return $i(t,"Symbol")}s(R6,"IsSymbol");function x0(t){return $i(t,"TemplateLiteral")}s(x0,"IsTemplateLiteral");function tAt(t){return $i(t,"This")}s(tAt,"IsThis");function To(t){return Go(t)&&oa in t}s(To,"IsTransform");function b0(t){return $i(t,"Tuple")}s(b0,"IsTuple");function B1(t){return $i(t,"Undefined")}s(B1,"IsUndefined");function no(t){return $i(t,"Union")}s(no,"IsUnion");function rAt(t){return $i(t,"Uint8Array")}s(rAt,"IsUint8Array");function nAt(t){return $i(t,"Unknown")}s(nAt,"IsUnknown");function iAt(t){return $i(t,"Unsafe")}s(iAt,"IsUnsafe");function oAt(t){return $i(t,"Void")}s(oAt,"IsVoid");function sb(t){return Go(t)&&et in t&&as(t[et])}s(sb,"IsKind");function sa(t){return fce(t)||pce(t)||Fh(t)||k1(t)||v_(t)||E_(t)||Oh(t)||Qh(t)||Zgt(t)||Uh(t)||qh(t)||va(t)||x_(t)||E0(t)||v0(t)||Ls(t)||ob(t)||eAt(t)||S6(t)||Hh(t)||rc(t)||b_(t)||I_(t)||Da(t)||mce(t)||P1(t)||R6(t)||x0(t)||tAt(t)||b0(t)||B1(t)||no(t)||rAt(t)||nAt(t)||iAt(t)||oAt(t)||sb(t)}s(sa,"IsSchema");var Be={};ra(Be,{IsAny:()=>C5e,IsArgument:()=>E5e,IsArray:()=>v5e,IsAsyncIterator:()=>x5e,IsBigInt:()=>b5e,IsBoolean:()=>I5e,IsComputed:()=>T5e,IsConstructor:()=>w5e,IsDate:()=>_5e,IsFunction:()=>S5e,IsImport:()=>dAt,IsInteger:()=>R5e,IsIntersect:()=>k5e,IsIterator:()=>P5e,IsKind:()=>nke,IsKindOf:()=>ki,IsLiteral:()=>P6,IsLiteralBoolean:()=>fAt,IsLiteralNumber:()=>D5e,IsLiteralString:()=>B5e,IsLiteralValue:()=>N5e,IsMappedKey:()=>L5e,IsMappedResult:()=>M5e,IsNever:()=>F5e,IsNot:()=>O5e,IsNull:()=>Q5e,IsNumber:()=>U5e,IsObject:()=>q5e,IsOptional:()=>uAt,IsPromise:()=>H5e,IsProperties:()=>LH,IsReadonly:()=>lAt,IsRecord:()=>W5e,IsRecursive:()=>pAt,IsRef:()=>G5e,IsRegExp:()=>j5e,IsSchema:()=>Ms,IsString:()=>V5e,IsSymbol:()=>$5e,IsTemplateLiteral:()=>z5e,IsThis:()=>Y5e,IsTransform:()=>K5e,IsTuple:()=>J5e,IsUint8Array:()=>Z5e,IsUndefined:()=>X5e,IsUnion:()=>yce,IsUnionLiteral:()=>mAt,IsUnknown:()=>eke,IsUnsafe:()=>tke,IsVoid:()=>rke,TypeGuardUnknownTypeError:()=>hce});d();var hce=class extends bn{static{s(this,"TypeGuardUnknownTypeError")}},sAt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function g5e(t){try{return new RegExp(t),!0}catch{return!1}}s(g5e,"IsPattern");function gce(t){if(!as(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(gce,"IsControlCharacterFree");function A5e(t){return Ace(t)||Ms(t)}s(A5e,"IsAdditionalProperties");function k6(t){return tc(t)||T6(t)}s(k6,"IsOptionalBigInt");function cs(t){return tc(t)||y0(t)}s(cs,"IsOptionalNumber");function Ace(t){return tc(t)||w1(t)}s(Ace,"IsOptionalBoolean");function jo(t){return tc(t)||as(t)}s(jo,"IsOptionalString");function aAt(t){return tc(t)||as(t)&&gce(t)&&g5e(t)}s(aAt,"IsOptionalPattern");function cAt(t){return tc(t)||as(t)&&gce(t)}s(cAt,"IsOptionalFormat");function y5e(t){return tc(t)||Ms(t)}s(y5e,"IsOptionalSchema");function lAt(t){return Go(t)&&t[Mh]==="Readonly"}s(lAt,"IsReadonly");function uAt(t){return Go(t)&&t[Zl]==="Optional"}s(uAt,"IsOptional");function C5e(t){return ki(t,"Any")&&jo(t.$id)}s(C5e,"IsAny");function E5e(t){return ki(t,"Argument")&&y0(t.index)}s(E5e,"IsArgument");function v5e(t){return ki(t,"Array")&&t.type==="array"&&jo(t.$id)&&Ms(t.items)&&cs(t.minItems)&&cs(t.maxItems)&&Ace(t.uniqueItems)&&y5e(t.contains)&&cs(t.minContains)&&cs(t.maxContains)}s(v5e,"IsArray");function x5e(t){return ki(t,"AsyncIterator")&&t.type==="AsyncIterator"&&jo(t.$id)&&Ms(t.items)}s(x5e,"IsAsyncIterator");function b5e(t){return ki(t,"BigInt")&&t.type==="bigint"&&jo(t.$id)&&k6(t.exclusiveMaximum)&&k6(t.exclusiveMinimum)&&k6(t.maximum)&&k6(t.minimum)&&k6(t.multipleOf)}s(b5e,"IsBigInt");function I5e(t){return ki(t,"Boolean")&&t.type==="boolean"&&jo(t.$id)}s(I5e,"IsBoolean");function T5e(t){return ki(t,"Computed")&&as(t.target)&&ec(t.parameters)&&t.parameters.every(e=>Ms(e))}s(T5e,"IsComputed");function w5e(t){return ki(t,"Constructor")&&t.type==="Constructor"&&jo(t.$id)&&ec(t.parameters)&&t.parameters.every(e=>Ms(e))&&Ms(t.returns)}s(w5e,"IsConstructor");function _5e(t){return ki(t,"Date")&&t.type==="Date"&&jo(t.$id)&&cs(t.exclusiveMaximumTimestamp)&&cs(t.exclusiveMinimumTimestamp)&&cs(t.maximumTimestamp)&&cs(t.minimumTimestamp)&&cs(t.multipleOfTimestamp)}s(_5e,"IsDate");function S5e(t){return ki(t,"Function")&&t.type==="Function"&&jo(t.$id)&&ec(t.parameters)&&t.parameters.every(e=>Ms(e))&&Ms(t.returns)}s(S5e,"IsFunction");function dAt(t){return ki(t,"Import")&&SH(t,"$defs")&&Go(t.$defs)&&LH(t.$defs)&&SH(t,"$ref")&&as(t.$ref)&&t.$ref in t.$defs}s(dAt,"IsImport");function R5e(t){return ki(t,"Integer")&&t.type==="integer"&&jo(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(R5e,"IsInteger");function LH(t){return Go(t)&&Object.entries(t).every(([e,r])=>gce(e)&&Ms(r))}s(LH,"IsProperties");function k5e(t){return ki(t,"Intersect")&&!(as(t.type)&&t.type!=="object")&&ec(t.allOf)&&t.allOf.every(e=>Ms(e)&&!K5e(e))&&jo(t.type)&&(Ace(t.unevaluatedProperties)||y5e(t.unevaluatedProperties))&&jo(t.$id)}s(k5e,"IsIntersect");function P5e(t){return ki(t,"Iterator")&&t.type==="Iterator"&&jo(t.$id)&&Ms(t.items)}s(P5e,"IsIterator");function ki(t,e){return Go(t)&&et in t&&t[et]===e}s(ki,"IsKindOf");function B5e(t){return P6(t)&&as(t.const)}s(B5e,"IsLiteralString");function D5e(t){return P6(t)&&y0(t.const)}s(D5e,"IsLiteralNumber");function fAt(t){return P6(t)&&w1(t.const)}s(fAt,"IsLiteralBoolean");function P6(t){return ki(t,"Literal")&&jo(t.$id)&&N5e(t.const)}s(P6,"IsLiteral");function N5e(t){return w1(t)||y0(t)||as(t)}s(N5e,"IsLiteralValue");function L5e(t){return ki(t,"MappedKey")&&ec(t.keys)&&t.keys.every(e=>y0(e)||as(e))}s(L5e,"IsMappedKey");function M5e(t){return ki(t,"MappedResult")&&LH(t.properties)}s(M5e,"IsMappedResult");function F5e(t){return ki(t,"Never")&&Go(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(F5e,"IsNever");function O5e(t){return ki(t,"Not")&&Ms(t.not)}s(O5e,"IsNot");function Q5e(t){return ki(t,"Null")&&t.type==="null"&&jo(t.$id)}s(Q5e,"IsNull");function U5e(t){return ki(t,"Number")&&t.type==="number"&&jo(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(U5e,"IsNumber");function q5e(t){return ki(t,"Object")&&t.type==="object"&&jo(t.$id)&&LH(t.properties)&&A5e(t.additionalProperties)&&cs(t.minProperties)&&cs(t.maxProperties)}s(q5e,"IsObject");function H5e(t){return ki(t,"Promise")&&t.type==="Promise"&&jo(t.$id)&&Ms(t.item)}s(H5e,"IsPromise");function W5e(t){return ki(t,"Record")&&t.type==="object"&&jo(t.$id)&&A5e(t.additionalProperties)&&Go(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&g5e(r[0])&&Go(e.patternProperties)&&Ms(e.patternProperties[r[0]])})(t)}s(W5e,"IsRecord");function pAt(t){return Go(t)&&Gp in t&&t[Gp]==="Recursive"}s(pAt,"IsRecursive");function G5e(t){return ki(t,"Ref")&&jo(t.$id)&&as(t.$ref)}s(G5e,"IsRef");function j5e(t){return ki(t,"RegExp")&&jo(t.$id)&&as(t.source)&&as(t.flags)&&cs(t.maxLength)&&cs(t.minLength)}s(j5e,"IsRegExp");function V5e(t){return ki(t,"String")&&t.type==="string"&&jo(t.$id)&&cs(t.minLength)&&cs(t.maxLength)&&aAt(t.pattern)&&cAt(t.format)}s(V5e,"IsString");function $5e(t){return ki(t,"Symbol")&&t.type==="symbol"&&jo(t.$id)}s($5e,"IsSymbol");function z5e(t){return ki(t,"TemplateLiteral")&&t.type==="string"&&as(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(z5e,"IsTemplateLiteral");function Y5e(t){return ki(t,"This")&&jo(t.$id)&&as(t.$ref)}s(Y5e,"IsThis");function K5e(t){return Go(t)&&oa in t}s(K5e,"IsTransform");function J5e(t){return ki(t,"Tuple")&&t.type==="array"&&jo(t.$id)&&y0(t.minItems)&&y0(t.maxItems)&&t.minItems===t.maxItems&&(tc(t.items)&&tc(t.additionalItems)&&t.minItems===0||ec(t.items)&&t.items.every(e=>Ms(e)))}s(J5e,"IsTuple");function X5e(t){return ki(t,"Undefined")&&t.type==="undefined"&&jo(t.$id)}s(X5e,"IsUndefined");function mAt(t){return yce(t)&&t.anyOf.every(e=>B5e(e)||D5e(e))}s(mAt,"IsUnionLiteral");function yce(t){return ki(t,"Union")&&jo(t.$id)&&Go(t)&&ec(t.anyOf)&&t.anyOf.every(e=>Ms(e))}s(yce,"IsUnion");function Z5e(t){return ki(t,"Uint8Array")&&t.type==="Uint8Array"&&jo(t.$id)&&cs(t.minByteLength)&&cs(t.maxByteLength)}s(Z5e,"IsUint8Array");function eke(t){return ki(t,"Unknown")&&jo(t.$id)}s(eke,"IsUnknown");function tke(t){return ki(t,"Unsafe")}s(tke,"IsUnsafe");function rke(t){return ki(t,"Void")&&t.type==="void"&&jo(t.$id)}s(rke,"IsVoid");function nke(t){return Go(t)&&et in t&&as(t[et])&&!sAt.includes(t[et])}s(nke,"IsKind");function Ms(t){return Go(t)&&(C5e(t)||E5e(t)||v5e(t)||I5e(t)||b5e(t)||x5e(t)||T5e(t)||w5e(t)||_5e(t)||S5e(t)||R5e(t)||k5e(t)||P5e(t)||P6(t)||L5e(t)||M5e(t)||F5e(t)||O5e(t)||Q5e(t)||U5e(t)||q5e(t)||H5e(t)||W5e(t)||G5e(t)||j5e(t)||V5e(t)||$5e(t)||z5e(t)||Y5e(t)||J5e(t)||X5e(t)||yce(t)||Z5e(t)||eke(t)||tke(t)||rke(t)||nke(t))}s(Ms,"IsSchema");d();var Cce="(true|false)",B6="(0|[1-9][0-9]*)",Ece="(.*)",hAt="(?!.*)",vvr=`^${Cce}$`,JA=`^${B6}$`,XA=`^${Ece}$`,ike=`^${hAt}$`;d();var Wh={};ra(Wh,{Clear:()=>AAt,Delete:()=>yAt,Entries:()=>gAt,Get:()=>vAt,Has:()=>CAt,Set:()=>EAt});d();var Yk=new Map;function gAt(){return new Map(Yk)}s(gAt,"Entries");function AAt(){return Yk.clear()}s(AAt,"Clear");function yAt(t){return Yk.delete(t)}s(yAt,"Delete");function CAt(t){return Yk.has(t)}s(CAt,"Has");function EAt(t,e){Yk.set(t,e)}s(EAt,"Set");function vAt(t){return Yk.get(t)}s(vAt,"Get");var Ed={};ra(Ed,{Clear:()=>bAt,Delete:()=>IAt,Entries:()=>xAt,Get:()=>_At,Has:()=>TAt,Set:()=>wAt});d();var Kk=new Map;function xAt(){return new Map(Kk)}s(xAt,"Entries");function bAt(){return Kk.clear()}s(bAt,"Clear");function IAt(t){return Kk.delete(t)}s(IAt,"Delete");function TAt(t){return Kk.has(t)}s(TAt,"Has");function wAt(t,e){Kk.set(t,e)}s(wAt,"Set");function _At(t){return Kk.get(t)}s(_At,"Get");d();function oke(t,e){return t.includes(e)}s(oke,"SetIncludes");function ske(t){return[...new Set(t)]}s(ske,"SetDistinct");function SAt(t,e){return t.filter(r=>e.includes(r))}s(SAt,"SetIntersect");function RAt(t,e){return t.reduce((r,n)=>SAt(r,n),e)}s(RAt,"SetIntersectManyResolve");function ake(t){return t.length===1?t[0]:t.length>1?RAt(t.slice(1),t[0]):[]}s(ake,"SetIntersectMany");function cke(t){let e=[];for(let r of t)e.push(...r);return e}s(cke,"SetUnionMany");d();function ab(t){return it({[et]:"Any"},t)}s(ab,"Any");d();function Jk(t,e){return it({[et]:"Array",type:"array",items:t},e)}s(Jk,"Array");d();function lke(t){return it({[et]:"Argument",index:t})}s(lke,"Argument");d();function Xk(t,e){return it({[et]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(Xk,"AsyncIterator");d();d();function Cs(t,e,r){return it({[et]:"Computed",target:t,parameters:e},r)}s(Cs,"Computed");d();d();function kAt(t,e){let{[e]:r,...n}=t;return n}s(kAt,"DiscardKey");function xa(t,e){return e.reduce((r,n)=>kAt(r,n),t)}s(xa,"Discard");d();function mi(t){return it({[et]:"Never",not:{}},t)}s(mi,"Never");d();d();function uo(t){return it({[et]:"MappedResult",properties:t})}s(uo,"MappedResult");d();d();function Zk(t,e,r){return it({[et]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(Zk,"Constructor");d();function ZA(t,e,r){return it({[et]:"Function",type:"Function",parameters:t,returns:e},r)}s(ZA,"Function");d();d();d();d();function D6(t,e){return it({[et]:"Union",anyOf:t},e)}s(D6,"UnionCreate");function PAt(t){return t.some(e=>uf(e))}s(PAt,"IsUnionOptional");function uke(t){return t.map(e=>uf(e)?BAt(e):e)}s(uke,"RemoveOptionalFromRest");function BAt(t){return xa(t,[Zl])}s(BAt,"RemoveOptionalFromType");function DAt(t,e){return PAt(t)?Mu(D6(uke(t),e)):D6(uke(t),e)}s(DAt,"ResolveUnion");function ey(t,e){return t.length===1?it(t[0],e):t.length===0?mi(e):DAt(t,e)}s(ey,"UnionEvaluated");d();function wo(t,e){return t.length===0?mi(e):t.length===1?it(t[0],e):D6(t,e)}s(wo,"Union");d();d();d();var MH=class extends bn{static{s(this,"TemplateLiteralParserError")}};function NAt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(NAt,"Unescape");function vce(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(vce,"IsNonEscaped");function N1(t,e){return vce(t,e,"(")}s(N1,"IsOpenParen");function N6(t,e){return vce(t,e,")")}s(N6,"IsCloseParen");function dke(t,e){return vce(t,e,"|")}s(dke,"IsSeparator");function LAt(t){if(!(N1(t,0)&&N6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(N1(t,r)&&(e+=1),N6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(LAt,"IsGroup");function MAt(t){return t.slice(1,t.length-1)}s(MAt,"InGroup");function FAt(t){let e=0;for(let r=0;r<t.length;r++)if(N1(t,r)&&(e+=1),N6(t,r)&&(e-=1),dke(t,r)&&e===0)return!0;return!1}s(FAt,"IsPrecedenceOr");function OAt(t){for(let e=0;e<t.length;e++)if(N1(t,e))return!0;return!1}s(OAt,"IsPrecedenceAnd");function QAt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(N1(t,o)&&(e+=1),N6(t,o)&&(e-=1),dke(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(e4(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(e4(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(QAt,"Or");function UAt(t){function e(i,o){if(!N1(i,o))throw new MH("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(N1(i,c)&&(a+=1),N6(i,c)&&(a-=1),a===0)return[o,c];throw new MH("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(N1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(N1(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(e4(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(e4(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(UAt,"And");function e4(t){return LAt(t)?e4(MAt(t)):FAt(t)?QAt(t):OAt(t)?UAt(t):{type:"const",const:NAt(t)}}s(e4,"TemplateLiteralParse");function t4(t){return e4(t.slice(1,t.length-1))}s(t4,"TemplateLiteralParseExact");var xce=class extends bn{static{s(this,"TemplateLiteralFiniteError")}};function qAt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(qAt,"IsNumberExpression");function HAt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(HAt,"IsBooleanExpression");function WAt(t){return t.type==="const"&&t.const===".*"}s(WAt,"IsStringExpression");function T_(t){return qAt(t)||WAt(t)?!1:HAt(t)?!0:t.type==="and"?t.expr.every(e=>T_(e)):t.type==="or"?t.expr.every(e=>T_(e)):t.type==="const"?!0:(()=>{throw new xce("Unknown expression type")})()}s(T_,"IsTemplateLiteralExpressionFinite");function FH(t){let e=t4(t.pattern);return T_(e)}s(FH,"IsTemplateLiteralFinite");d();var bce=class extends bn{static{s(this,"TemplateLiteralGenerateError")}};function*fke(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of fke(t.slice(1)))yield`${e}${r}`}s(fke,"GenerateReduce");function*GAt(t){return yield*fke(t.expr.map(e=>[...L6(e)]))}s(GAt,"GenerateAnd");function*jAt(t){for(let e of t.expr)yield*L6(e)}s(jAt,"GenerateOr");function*VAt(t){return yield t.const}s(VAt,"GenerateConst");function*L6(t){return t.type==="and"?yield*GAt(t):t.type==="or"?yield*jAt(t):t.type==="const"?yield*VAt(t):(()=>{throw new bce("Unknown expression")})()}s(L6,"TemplateLiteralExpressionGenerate");function r4(t){let e=t4(t.pattern);return T_(e)?[...L6(e)]:[]}s(r4,"TemplateLiteralGenerate");d();d();function zi(t,e){return it({[et]:"Literal",const:t,type:typeof t},e)}s(zi,"Literal");d();function OH(t){return it({[et]:"Boolean",type:"boolean"},t)}s(OH,"Boolean");d();function n4(t){return it({[et]:"BigInt",type:"bigint"},t)}s(n4,"BigInt");d();function jp(t){return it({[et]:"Number",type:"number"},t)}s(jp,"Number");d();function vd(t){return it({[et]:"String",type:"string"},t)}s(vd,"String");function*$At(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield OH():e==="number"?yield jp():e==="bigint"?yield n4():e==="string"?yield vd():yield(()=>{let r=e.split("|").map(n=>zi(n.trim()));return r.length===0?mi():r.length===1?r[0]:ey(r)})()}s($At,"FromUnion");function*zAt(t){if(t[1]!=="{"){let e=zi("$"),r=Ice(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=$At(t.slice(2,e)),n=Ice(t.slice(e+1));return yield*[...r,...n]}yield zi(t)}s(zAt,"FromTerminal");function*Ice(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=zi(t.slice(0,e)),n=zAt(t.slice(e));return yield*[r,...n]}yield zi(t)}s(Ice,"FromSyntax");function pke(t){return[...Ice(t)]}s(pke,"TemplateLiteralSyntax");d();var Tce=class extends bn{static{s(this,"TemplateLiteralPatternError")}};function YAt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(YAt,"Escape");function mke(t,e){return x0(t)?t.pattern.slice(1,t.pattern.length-1):no(t)?`(${t.anyOf.map(r=>mke(r,e)).join("|")})`:Hh(t)?`${e}${B6}`:qh(t)?`${e}${B6}`:v_(t)?`${e}${B6}`:P1(t)?`${e}${Ece}`:E0(t)?`${e}${YAt(t.const.toString())}`:k1(t)?`${e}${Cce}`:(()=>{throw new Tce(`Unexpected Kind '${t[et]}'`)})()}s(mke,"Visit");function wce(t){return`^${t.map(e=>mke(e,"")).join("")}$`}s(wce,"TemplateLiteralPattern");d();function w_(t){let r=r4(t).map(n=>zi(n));return ey(r)}s(w_,"TemplateLiteralToUnion");d();function QH(t,e){let r=as(t)?wce(pke(t)):wce(t);return it({[et]:"TemplateLiteral",type:"string",pattern:r},e)}s(QH,"TemplateLiteral");function KAt(t){return r4(t).map(r=>r.toString())}s(KAt,"FromTemplateLiteral");function JAt(t){let e=[];for(let r of t)e.push(...df(r));return e}s(JAt,"FromUnion");function XAt(t){return[t.toString()]}s(XAt,"FromLiteral");function df(t){return[...new Set(x0(t)?KAt(t):no(t)?JAt(t.anyOf):E0(t)?XAt(t.const):Hh(t)?["[number]"]:qh(t)?["[number]"]:[])]}s(df,"IndexPropertyKeys");d();function ZAt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=cb(t,df(e[i]),r);return n}s(ZAt,"FromProperties");function eyt(t,e,r){return ZAt(t,e.properties,r)}s(eyt,"FromMappedResult");function hke(t,e,r){let n=eyt(t,e,r);return uo(n)}s(hke,"IndexFromMappedResult");function Ake(t,e){return t.map(r=>yke(r,e))}s(Ake,"FromRest");function tyt(t){return t.filter(e=>!ob(e))}s(tyt,"FromIntersectRest");function ryt(t,e){return UH(tyt(Ake(t,e)))}s(ryt,"FromIntersect");function nyt(t){return t.some(e=>ob(e))?[]:t}s(nyt,"FromUnionRest");function iyt(t,e){return ey(nyt(Ake(t,e)))}s(iyt,"FromUnion");function oyt(t,e){return e in t?t[e]:e==="[number]"?ey(t):mi()}s(oyt,"FromTuple");function syt(t,e){return e==="[number]"?t:mi()}s(syt,"FromArray");function ayt(t,e){return e in t?t[e]:mi()}s(ayt,"FromProperty");function yke(t,e){return va(t)?ryt(t.allOf,e):no(t)?iyt(t.anyOf,e):b0(t)?oyt(t.items??[],e):Fh(t)?syt(t.items,e):rc(t)?ayt(t.properties,e):mi()}s(yke,"IndexFromPropertyKey");function M6(t,e){return e.map(r=>yke(t,r))}s(M6,"IndexFromPropertyKeys");function gke(t,e){return ey(M6(t,e))}s(gke,"FromSchema");function cb(t,e,r){if(Da(t)||Da(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!sa(t)||!sa(e))throw new bn(n);return Cs("Index",[t,e])}return Ls(e)?hke(t,e,r):v0(e)?Cke(t,e,r):it(sa(e)?gke(t,df(e)):gke(t,e),r)}s(cb,"Index");function cyt(t,e,r){return{[e]:cb(t,[e],Ds(r))}}s(cyt,"MappedIndexPropertyKey");function lyt(t,e,r){return e.reduce((n,i)=>({...n,...cyt(t,i,r)}),{})}s(lyt,"MappedIndexPropertyKeys");function uyt(t,e,r){return lyt(t,e.keys,r)}s(uyt,"MappedIndexProperties");function Cke(t,e,r){let n=uyt(t,e,r);return uo(n)}s(Cke,"IndexFromMappedKey");d();function i4(t,e){return it({[et]:"Iterator",type:"Iterator",items:t},e)}s(i4,"Iterator");d();function dyt(t){let e=[];for(let r in t)uf(t[r])||e.push(r);return e}s(dyt,"RequiredKeys");function fyt(t,e){let r=dyt(t),n=r.length>0?{[et]:"Object",type:"object",properties:t,required:r}:{[et]:"Object",type:"object",properties:t};return it(n,e)}s(fyt,"_Object");var _o=fyt;d();function qH(t,e){return it({[et]:"Promise",type:"Promise",item:t},e)}s(qH,"Promise");d();d();function pyt(t){return it(xa(t,[Mh]))}s(pyt,"RemoveReadonly");function myt(t){return it({...t,[Mh]:"Readonly"})}s(myt,"AddReadonly");function hyt(t,e){return e===!1?pyt(t):myt(t)}s(hyt,"ReadonlyWithFlag");function ff(t,e){let r=e??!0;return Ls(t)?Eke(t,r):hyt(t,r)}s(ff,"Readonly");function gyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=ff(t[n],e);return r}s(gyt,"FromProperties");function Ayt(t,e){return gyt(t.properties,e)}s(Ayt,"FromMappedResult");function Eke(t,e){let r=Ayt(t,e);return uo(r)}s(Eke,"ReadonlyFromMappedResult");d();function Vp(t,e){return it(t.length>0?{[et]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[et]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Vp,"Tuple");function vke(t,e){return t in e?$p(t,e[t]):uo(e)}s(vke,"FromMappedResult");function yyt(t){return{[t]:zi(t)}}s(yyt,"MappedKeyToKnownMappedResultProperties");function Cyt(t){let e={};for(let r of t)e[r]=zi(r);return e}s(Cyt,"MappedKeyToUnknownMappedResultProperties");function Eyt(t,e){return oke(e,t)?yyt(t):Cyt(e)}s(Eyt,"MappedKeyToMappedResultProperties");function vyt(t,e){let r=Eyt(t,e);return vke(t,r)}s(vyt,"FromMappedKey");function F6(t,e){return e.map(r=>$p(t,r))}s(F6,"FromRest");function xyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=$p(t,e[n]);return r}s(xyt,"FromProperties");function $p(t,e){let r={...e};return uf(e)?Mu($p(t,xa(e,[Zl]))):zk(e)?ff($p(t,xa(e,[Mh]))):Ls(e)?vke(t,e.properties):v0(e)?vyt(t,e.keys):Qh(e)?Zk(F6(t,e.parameters),$p(t,e.returns),r):Uh(e)?ZA(F6(t,e.parameters),$p(t,e.returns),r):E_(e)?Xk($p(t,e.items),r):x_(e)?i4($p(t,e.items),r):va(e)?Fu(F6(t,e.allOf),r):no(e)?wo(F6(t,e.anyOf),r):b0(e)?Vp(F6(t,e.items??[]),r):rc(e)?_o(xyt(t,e.properties),r):Fh(e)?Jk($p(t,e.items),r):b_(e)?qH($p(t,e.item),r):e}s($p,"FromSchemaType");function byt(t,e){let r={};for(let n of t)r[n]=$p(n,e);return r}s(byt,"MappedFunctionReturnType");function xke(t,e,r){let n=sa(t)?df(t):t,i=e({[et]:"MappedKey",keys:n}),o=byt(n,i);return _o(o,r)}s(xke,"Mapped");d();function Iyt(t){return it(xa(t,[Zl]))}s(Iyt,"RemoveOptional");function Tyt(t){return it({...t,[Zl]:"Optional"})}s(Tyt,"AddOptional");function wyt(t,e){return e===!1?Iyt(t):Tyt(t)}s(wyt,"OptionalWithFlag");function Mu(t,e){let r=e??!0;return Ls(t)?bke(t,r):wyt(t,r)}s(Mu,"Optional");function _yt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Mu(t[n],e);return r}s(_yt,"FromProperties");function Syt(t,e){return _yt(t.properties,e)}s(Syt,"FromMappedResult");function bke(t,e){let r=Syt(t,e);return uo(r)}s(bke,"OptionalFromMappedResult");d();function O6(t,e={}){let r=t.every(i=>rc(i)),n=sa(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return it(e.unevaluatedProperties===!1||sa(e.unevaluatedProperties)||r?{...n,[et]:"Intersect",type:"object",allOf:t}:{...n,[et]:"Intersect",allOf:t},e)}s(O6,"IntersectCreate");function Ryt(t){return t.every(e=>uf(e))}s(Ryt,"IsIntersectOptional");function kyt(t){return xa(t,[Zl])}s(kyt,"RemoveOptionalFromType");function Ike(t){return t.map(e=>uf(e)?kyt(e):e)}s(Ike,"RemoveOptionalFromRest");function Pyt(t,e){return Ryt(t)?Mu(O6(Ike(t),e)):O6(Ike(t),e)}s(Pyt,"ResolveIntersect");function UH(t,e={}){if(t.length===1)return it(t[0],e);if(t.length===0)return mi(e);if(t.some(r=>To(r)))throw new Error("Cannot intersect transform types");return Pyt(t,e)}s(UH,"IntersectEvaluated");d();function Fu(t,e){if(t.length===1)return it(t[0],e);if(t.length===0)return mi(e);if(t.some(r=>To(r)))throw new Error("Cannot intersect transform types");return O6(t,e)}s(Fu,"Intersect");d();function zp(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new bn("Ref: $ref must be a string");return it({[et]:"Ref",$ref:e},r)}s(zp,"Ref");function Byt(t,e){return Cs("Awaited",[Cs(t,e)])}s(Byt,"FromComputed");function Dyt(t){return Cs("Awaited",[zp(t)])}s(Dyt,"FromRef");function Nyt(t){return Fu(Tke(t))}s(Nyt,"FromIntersect");function Lyt(t){return wo(Tke(t))}s(Lyt,"FromUnion");function Myt(t){return o4(t)}s(Myt,"FromPromise");function Tke(t){return t.map(e=>o4(e))}s(Tke,"FromRest");function o4(t,e){return it(Oh(t)?Byt(t.target,t.parameters):va(t)?Nyt(t.allOf):no(t)?Lyt(t.anyOf):b_(t)?Myt(t.item):Da(t)?Dyt(t.$ref):t,e)}s(o4,"Awaited");d();d();d();d();function wke(t){let e=[];for(let r of t)e.push(pf(r));return e}s(wke,"FromRest");function Fyt(t){let e=wke(t);return cke(e)}s(Fyt,"FromIntersect");function Oyt(t){let e=wke(t);return ake(e)}s(Oyt,"FromUnion");function Qyt(t){return t.map((e,r)=>r.toString())}s(Qyt,"FromTuple");function Uyt(t){return["[number]"]}s(Uyt,"FromArray");function qyt(t){return globalThis.Object.getOwnPropertyNames(t)}s(qyt,"FromProperties");function Hyt(t){return _ce?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(Hyt,"FromPatternProperties");function pf(t){return va(t)?Fyt(t.allOf):no(t)?Oyt(t.anyOf):b0(t)?Qyt(t.items??[]):Fh(t)?Uyt(t.items):rc(t)?qyt(t.properties):I_(t)?Hyt(t.patternProperties):[]}s(pf,"KeyOfPropertyKeys");var _ce=!1;function L1(t){_ce=!0;let e=pf(t);return _ce=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(L1,"KeyOfPattern");function Wyt(t,e){return Cs("KeyOf",[Cs(t,e)])}s(Wyt,"FromComputed");function Gyt(t){return Cs("KeyOf",[zp(t)])}s(Gyt,"FromRef");function jyt(t,e){let r=pf(t),n=Vyt(r),i=ey(n);return it(i,e)}s(jyt,"KeyOfFromType");function Vyt(t){return t.map(e=>e==="[number]"?jp():zi(e))}s(Vyt,"KeyOfPropertyKeysToRest");function s4(t,e){return Oh(t)?Wyt(t.target,t.parameters):Da(t)?Gyt(t.$ref):Ls(t)?_ke(t,e):jyt(t,e)}s(s4,"KeyOf");function $yt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=s4(t[n],Ds(e));return r}s($yt,"FromProperties");function zyt(t,e){return $yt(t.properties,e)}s(zyt,"FromMappedResult");function _ke(t,e){let r=zyt(t,e);return uo(r)}s(_ke,"KeyOfFromMappedResult");d();function HH(t){let e=pf(t),r=M6(t,e);return e.map((n,i)=>[e[i],r[i]])}s(HH,"KeyOfPropertyEntries");function Yyt(t){let e=[];for(let r of t)e.push(...pf(r));return ske(e)}s(Yyt,"CompositeKeys");function Kyt(t){return t.filter(e=>!ob(e))}s(Kyt,"FilterNever");function Jyt(t,e){let r=[];for(let n of t)r.push(...M6(n,[e]));return Kyt(r)}s(Jyt,"CompositeProperty");function Xyt(t,e){let r={};for(let n of e)r[n]=UH(Jyt(t,n));return r}s(Xyt,"CompositeProperties");function Ske(t,e){let r=Yyt(t),n=Xyt(t,r);return _o(n,e)}s(Ske,"Composite");d();d();function WH(t){return it({[et]:"Date",type:"Date"},t)}s(WH,"Date");d();function GH(t){return it({[et]:"Null",type:"null"},t)}s(GH,"Null");d();function jH(t){return it({[et]:"Symbol",type:"symbol"},t)}s(jH,"Symbol");d();function VH(t){return it({[et]:"Undefined",type:"undefined"},t)}s(VH,"Undefined");d();function $H(t){return it({[et]:"Uint8Array",type:"Uint8Array"},t)}s($H,"Uint8Array");d();function Gh(t){return it({[et]:"Unknown"},t)}s(Gh,"Unknown");function Zyt(t){return t.map(e=>Sce(e,!1))}s(Zyt,"FromArray");function eCt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=ff(Sce(t[r],!1));return e}s(eCt,"FromProperties");function zH(t,e){return e===!0?t:ff(t)}s(zH,"ConditionalReadonly");function Sce(t,e){return sce(t)?zH(ab(),e):cce(t)?zH(ab(),e):ec(t)?ff(Vp(Zyt(t))):_1(t)?$H():C_(t)?WH():Go(t)?zH(_o(eCt(t)),e):ace(t)?zH(ZA([],Gh()),e):tc(t)?VH():lce(t)?GH():uce(t)?jH():T6(t)?n4():y0(t)?zi(t):w1(t)?zi(t):as(t)?zi(t):_o({})}s(Sce,"FromValue");function Rke(t,e){return it(Sce(t,!0),e)}s(Rke,"Const");d();function kke(t,e){return Qh(t)?Vp(t.parameters,e):mi(e)}s(kke,"ConstructorParameters");d();function Pke(t,e){if(tc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>zi(o));return wo(i,{...e,[Gp]:"Enum"})}s(Pke,"Enum");d();d();d();var kce=class extends bn{static{s(this,"ExtendsResolverError")}},ot;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ot||(ot={}));function Yp(t){return t===ot.False?t:ot.True}s(Yp,"IntoBooleanResult");function a4(t){throw new kce(t)}s(a4,"Throw");function xc(t){return Be.IsNever(t)||Be.IsIntersect(t)||Be.IsUnion(t)||Be.IsUnknown(t)||Be.IsAny(t)}s(xc,"IsStructuralRight");function bc(t,e){return Be.IsNever(e)?Oke(t,e):Be.IsIntersect(e)?YH(t,e):Be.IsUnion(e)?Nce(t,e):Be.IsUnknown(e)?Hke(t,e):Be.IsAny(e)?Dce(t,e):a4("StructuralRight")}s(bc,"StructuralRight");function Dce(t,e){return ot.True}s(Dce,"FromAnyRight");function tCt(t,e){return Be.IsIntersect(e)?YH(t,e):Be.IsUnion(e)&&e.anyOf.some(r=>Be.IsAny(r)||Be.IsUnknown(r))?ot.True:Be.IsUnion(e)?ot.Union:Be.IsUnknown(e)||Be.IsAny(e)?ot.True:ot.Union}s(tCt,"FromAny");function rCt(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)?ot.True:ot.False}s(rCt,"FromArrayRight");function nCt(t,e){return Be.IsObject(e)&&KH(e)?ot.True:xc(e)?bc(t,e):Be.IsArray(e)?Yp(Vo(t.items,e.items)):ot.False}s(nCt,"FromArray");function iCt(t,e){return xc(e)?bc(t,e):Be.IsAsyncIterator(e)?Yp(Vo(t.items,e.items)):ot.False}s(iCt,"FromAsyncIterator");function oCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsBigInt(e)?ot.True:ot.False}s(oCt,"FromBigInt");function Mke(t,e){return Be.IsLiteralBoolean(t)||Be.IsBoolean(t)?ot.True:ot.False}s(Mke,"FromBooleanRight");function sCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsBoolean(e)?ot.True:ot.False}s(sCt,"FromBoolean");function aCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsConstructor(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>Yp(Vo(e.parameters[n],r))===ot.True)?Yp(Vo(t.returns,e.returns)):ot.False:ot.False}s(aCt,"FromConstructor");function cCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsDate(e)?ot.True:ot.False}s(cCt,"FromDate");function lCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsFunction(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>Yp(Vo(e.parameters[n],r))===ot.True)?Yp(Vo(t.returns,e.returns)):ot.False:ot.False}s(lCt,"FromFunction");function Fke(t,e){return Be.IsLiteral(t)&&Lu.IsNumber(t.const)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(Fke,"FromIntegerRight");function uCt(t,e){return Be.IsInteger(e)||Be.IsNumber(e)?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):ot.False}s(uCt,"FromInteger");function YH(t,e){return e.allOf.every(r=>Vo(t,r)===ot.True)?ot.True:ot.False}s(YH,"FromIntersectRight");function dCt(t,e){return t.allOf.some(r=>Vo(r,e)===ot.True)?ot.True:ot.False}s(dCt,"FromIntersect");function fCt(t,e){return xc(e)?bc(t,e):Be.IsIterator(e)?Yp(Vo(t.items,e.items)):ot.False}s(fCt,"FromIterator");function pCt(t,e){return Be.IsLiteral(e)&&e.const===t.const?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsString(e)?qke(t,e):Be.IsNumber(e)?Qke(t,e):Be.IsInteger(e)?Fke(t,e):Be.IsBoolean(e)?Mke(t,e):ot.False}s(pCt,"FromLiteral");function Oke(t,e){return ot.False}s(Oke,"FromNeverRight");function mCt(t,e){return ot.True}s(mCt,"FromNever");function Bke(t){let[e,r]=[t,0];for(;Be.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Gh()}s(Bke,"UnwrapTNot");function hCt(t,e){return Be.IsNot(t)?Vo(Bke(t),e):Be.IsNot(e)?Vo(t,Bke(e)):a4("Invalid fallthrough for Not")}s(hCt,"FromNot");function gCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsNull(e)?ot.True:ot.False}s(gCt,"FromNull");function Qke(t,e){return Be.IsLiteralNumber(t)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(Qke,"FromNumberRight");function ACt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsInteger(e)||Be.IsNumber(e)?ot.True:ot.False}s(ACt,"FromNumber");function mf(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(mf,"IsObjectPropertyCount");function Dke(t){return KH(t)}s(Dke,"IsObjectStringLike");function Nke(t){return mf(t,0)||mf(t,1)&&"description"in t.properties&&Be.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Be.IsString(t.properties.description.anyOf[0])&&Be.IsUndefined(t.properties.description.anyOf[1])||Be.IsString(t.properties.description.anyOf[1])&&Be.IsUndefined(t.properties.description.anyOf[0]))}s(Nke,"IsObjectSymbolLike");function Rce(t){return mf(t,0)}s(Rce,"IsObjectNumberLike");function Lke(t){return mf(t,0)}s(Lke,"IsObjectBooleanLike");function yCt(t){return mf(t,0)}s(yCt,"IsObjectBigIntLike");function CCt(t){return mf(t,0)}s(CCt,"IsObjectDateLike");function ECt(t){return KH(t)}s(ECt,"IsObjectUint8ArrayLike");function vCt(t){let e=jp();return mf(t,0)||mf(t,1)&&"length"in t.properties&&Yp(Vo(t.properties.length,e))===ot.True}s(vCt,"IsObjectFunctionLike");function xCt(t){return mf(t,0)}s(xCt,"IsObjectConstructorLike");function KH(t){let e=jp();return mf(t,0)||mf(t,1)&&"length"in t.properties&&Yp(Vo(t.properties.length,e))===ot.True}s(KH,"IsObjectArrayLike");function bCt(t){let e=ZA([ab()],ab());return mf(t,0)||mf(t,1)&&"then"in t.properties&&Yp(Vo(t.properties.then,e))===ot.True}s(bCt,"IsObjectPromiseLike");function Uke(t,e){return Vo(t,e)===ot.False||Be.IsOptional(t)&&!Be.IsOptional(e)?ot.False:ot.True}s(Uke,"Property");function Ou(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)||Be.IsLiteralString(t)&&Dke(e)||Be.IsLiteralNumber(t)&&Rce(e)||Be.IsLiteralBoolean(t)&&Lke(e)||Be.IsSymbol(t)&&Nke(e)||Be.IsBigInt(t)&&yCt(e)||Be.IsString(t)&&Dke(e)||Be.IsSymbol(t)&&Nke(e)||Be.IsNumber(t)&&Rce(e)||Be.IsInteger(t)&&Rce(e)||Be.IsBoolean(t)&&Lke(e)||Be.IsUint8Array(t)&&ECt(e)||Be.IsDate(t)&&CCt(e)||Be.IsConstructor(t)&&xCt(e)||Be.IsFunction(t)&&vCt(e)?ot.True:Be.IsRecord(t)&&Be.IsString(Pce(t))?e[Gp]==="Record"?ot.True:ot.False:Be.IsRecord(t)&&Be.IsNumber(Pce(t))?mf(e,0)?ot.True:ot.False:ot.False}s(Ou,"FromObjectRight");function ICt(t,e){return xc(e)?bc(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Be.IsOptional(e.properties[r]))return ot.False;if(Be.IsOptional(e.properties[r]))return ot.True;if(Uke(t.properties[r],e.properties[r])===ot.False)return ot.False}return ot.True})():ot.False}s(ICt,"FromObject");function TCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&bCt(e)?ot.True:Be.IsPromise(e)?Yp(Vo(t.item,e.item)):ot.False}s(TCt,"FromPromise");function Pce(t){return JA in t.patternProperties?jp():XA in t.patternProperties?vd():a4("Unknown record key pattern")}s(Pce,"RecordKey");function Bce(t){return JA in t.patternProperties?t.patternProperties[JA]:XA in t.patternProperties?t.patternProperties[XA]:a4("Unable to get record value schema")}s(Bce,"RecordValue");function Kp(t,e){let[r,n]=[Pce(e),Bce(e)];return Be.IsLiteralString(t)&&Be.IsNumber(r)&&Yp(Vo(t,n))===ot.True?ot.True:Be.IsUint8Array(t)&&Be.IsNumber(r)||Be.IsString(t)&&Be.IsNumber(r)||Be.IsArray(t)&&Be.IsNumber(r)?Vo(t,n):Be.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(Uke(n,t.properties[i])===ot.False)return ot.False;return ot.True})():ot.False}s(Kp,"FromRecordRight");function wCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Vo(Bce(t),Bce(e)):ot.False}s(wCt,"FromRecord");function _Ct(t,e){let r=Be.IsRegExp(t)?vd():t,n=Be.IsRegExp(e)?vd():e;return Vo(r,n)}s(_Ct,"FromRegExp");function qke(t,e){return Be.IsLiteral(t)&&Lu.IsString(t.const)||Be.IsString(t)?ot.True:ot.False}s(qke,"FromStringRight");function SCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsString(e)?ot.True:ot.False}s(SCt,"FromString");function RCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsSymbol(e)?ot.True:ot.False}s(RCt,"FromSymbol");function kCt(t,e){return Be.IsTemplateLiteral(t)?Vo(w_(t),e):Be.IsTemplateLiteral(e)?Vo(t,w_(e)):a4("Invalid fallthrough for TemplateLiteral")}s(kCt,"FromTemplateLiteral");function PCt(t,e){return Be.IsArray(e)&&t.items!==void 0&&t.items.every(r=>Vo(r,e.items)===ot.True)}s(PCt,"IsArrayOfTuple");function BCt(t,e){return Be.IsNever(t)?ot.True:Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:ot.False}s(BCt,"FromTupleRight");function DCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&KH(e)||Be.IsArray(e)&&PCt(t,e)?ot.True:Be.IsTuple(e)?Lu.IsUndefined(t.items)&&!Lu.IsUndefined(e.items)||!Lu.IsUndefined(t.items)&&Lu.IsUndefined(e.items)?ot.False:Lu.IsUndefined(t.items)&&!Lu.IsUndefined(e.items)||t.items.every((r,n)=>Vo(r,e.items[n])===ot.True)?ot.True:ot.False:ot.False}s(DCt,"FromTuple");function NCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsUint8Array(e)?ot.True:ot.False}s(NCt,"FromUint8Array");function LCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsVoid(e)?OCt(t,e):Be.IsUndefined(e)?ot.True:ot.False}s(LCt,"FromUndefined");function Nce(t,e){return e.anyOf.some(r=>Vo(t,r)===ot.True)?ot.True:ot.False}s(Nce,"FromUnionRight");function MCt(t,e){return t.anyOf.every(r=>Vo(r,e)===ot.True)?ot.True:ot.False}s(MCt,"FromUnion");function Hke(t,e){return ot.True}s(Hke,"FromUnknownRight");function FCt(t,e){return Be.IsNever(e)?Oke(t,e):Be.IsIntersect(e)?YH(t,e):Be.IsUnion(e)?Nce(t,e):Be.IsAny(e)?Dce(t,e):Be.IsString(e)?qke(t,e):Be.IsNumber(e)?Qke(t,e):Be.IsInteger(e)?Fke(t,e):Be.IsBoolean(e)?Mke(t,e):Be.IsArray(e)?rCt(t,e):Be.IsTuple(e)?BCt(t,e):Be.IsObject(e)?Ou(t,e):Be.IsUnknown(e)?ot.True:ot.False}s(FCt,"FromUnknown");function OCt(t,e){return Be.IsUndefined(t)||Be.IsUndefined(t)?ot.True:ot.False}s(OCt,"FromVoidRight");function QCt(t,e){return Be.IsIntersect(e)?YH(t,e):Be.IsUnion(e)?Nce(t,e):Be.IsUnknown(e)?Hke(t,e):Be.IsAny(e)?Dce(t,e):Be.IsObject(e)?Ou(t,e):Be.IsVoid(e)?ot.True:ot.False}s(QCt,"FromVoid");function Vo(t,e){return Be.IsTemplateLiteral(t)||Be.IsTemplateLiteral(e)?kCt(t,e):Be.IsRegExp(t)||Be.IsRegExp(e)?_Ct(t,e):Be.IsNot(t)||Be.IsNot(e)?hCt(t,e):Be.IsAny(t)?tCt(t,e):Be.IsArray(t)?nCt(t,e):Be.IsBigInt(t)?oCt(t,e):Be.IsBoolean(t)?sCt(t,e):Be.IsAsyncIterator(t)?iCt(t,e):Be.IsConstructor(t)?aCt(t,e):Be.IsDate(t)?cCt(t,e):Be.IsFunction(t)?lCt(t,e):Be.IsInteger(t)?uCt(t,e):Be.IsIntersect(t)?dCt(t,e):Be.IsIterator(t)?fCt(t,e):Be.IsLiteral(t)?pCt(t,e):Be.IsNever(t)?mCt(t,e):Be.IsNull(t)?gCt(t,e):Be.IsNumber(t)?ACt(t,e):Be.IsObject(t)?ICt(t,e):Be.IsRecord(t)?wCt(t,e):Be.IsString(t)?SCt(t,e):Be.IsSymbol(t)?RCt(t,e):Be.IsTuple(t)?DCt(t,e):Be.IsPromise(t)?TCt(t,e):Be.IsUint8Array(t)?NCt(t,e):Be.IsUndefined(t)?LCt(t,e):Be.IsUnion(t)?MCt(t,e):Be.IsUnknown(t)?FCt(t,e):Be.IsVoid(t)?QCt(t,e):a4(`Unknown left type operand '${t[et]}'`)}s(Vo,"Visit");function lb(t,e){return Vo(t,e)}s(lb,"ExtendsCheck");d();d();d();function UCt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=c4(t[a],e,r,n,Ds(i));return o}s(UCt,"FromProperties");function qCt(t,e,r,n,i){return UCt(t.properties,e,r,n,i)}s(qCt,"FromMappedResult");function Wke(t,e,r,n,i){let o=qCt(t,e,r,n,i);return uo(o)}s(Wke,"ExtendsFromMappedResult");function HCt(t,e,r,n){let i=lb(t,e);return i===ot.Union?wo([r,n]):i===ot.True?r:n}s(HCt,"ExtendsResolve");function c4(t,e,r,n,i){return Ls(t)?Wke(t,e,r,n,i):v0(t)?it(Gke(t,e,r,n,i)):it(HCt(t,e,r,n),i)}s(c4,"Extends");function WCt(t,e,r,n,i){return{[t]:c4(zi(t),e,r,n,Ds(i))}}s(WCt,"FromPropertyKey");function GCt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...WCt(a,e,r,n,i)}),{})}s(GCt,"FromPropertyKeys");function jCt(t,e,r,n,i){return GCt(t.keys,e,r,n,i)}s(jCt,"FromMappedKey");function Gke(t,e,r,n,i){let o=jCt(t,e,r,n,i);return uo(o)}s(Gke,"ExtendsFromMappedKey");d();function VCt(t){return t.allOf.every(e=>M1(e))}s(VCt,"Intersect");function $Ct(t){return t.anyOf.some(e=>M1(e))}s($Ct,"Union");function zCt(t){return!M1(t.not)}s(zCt,"Not");function M1(t){return t[et]==="Intersect"?VCt(t):t[et]==="Union"?$Ct(t):t[et]==="Not"?zCt(t):t[et]==="Undefined"}s(M1,"ExtendsUndefinedCheck");d();function jke(t,e){return l4(w_(t),e)}s(jke,"ExcludeFromTemplateLiteral");function YCt(t,e){let r=t.filter(n=>lb(n,e)===ot.False);return r.length===1?r[0]:wo(r)}s(YCt,"ExcludeRest");function l4(t,e,r={}){return x0(t)?it(jke(t,e),r):Ls(t)?it(Vke(t,e),r):it(no(t)?YCt(t.anyOf,e):lb(t,e)!==ot.False?mi():t,r)}s(l4,"Exclude");function KCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=l4(t[n],e);return r}s(KCt,"FromProperties");function JCt(t,e){return KCt(t.properties,e)}s(JCt,"FromMappedResult");function Vke(t,e){let r=JCt(t,e);return uo(r)}s(Vke,"ExcludeFromMappedResult");d();d();d();function $ke(t,e){return u4(w_(t),e)}s($ke,"ExtractFromTemplateLiteral");function XCt(t,e){let r=t.filter(n=>lb(n,e)!==ot.False);return r.length===1?r[0]:wo(r)}s(XCt,"ExtractRest");function u4(t,e,r){return x0(t)?it($ke(t,e),r):Ls(t)?it(zke(t,e),r):it(no(t)?XCt(t.anyOf,e):lb(t,e)!==ot.False?t:mi(),r)}s(u4,"Extract");function ZCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=u4(t[n],e);return r}s(ZCt,"FromProperties");function e1t(t,e){return ZCt(t.properties,e)}s(e1t,"FromMappedResult");function zke(t,e){let r=e1t(t,e);return uo(r)}s(zke,"ExtractFromMappedResult");d();function Yke(t,e){return Qh(t)?it(t.returns,e):mi(e)}s(Yke,"InstanceType");d();d();function JH(t){return ff(Mu(t))}s(JH,"ReadonlyOptional");d();function __(t,e,r){return it({[et]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(__,"RecordCreateFromPattern");function Lce(t,e,r){let n={};for(let i of t)n[i]=e;return _o(n,{...r,[Gp]:"Record"})}s(Lce,"RecordCreateFromKeys");function t1t(t,e,r){return FH(t)?Lce(df(t),e,r):__(t.pattern,e,r)}s(t1t,"FromTemplateLiteralKey");function r1t(t,e,r){return Lce(df(wo(t)),e,r)}s(r1t,"FromUnionKey");function n1t(t,e,r){return Lce([t.toString()],e,r)}s(n1t,"FromLiteralKey");function i1t(t,e,r){return __(t.source,e,r)}s(i1t,"FromRegExpKey");function o1t(t,e,r){let n=tc(t.pattern)?XA:t.pattern;return __(n,e,r)}s(o1t,"FromStringKey");function s1t(t,e,r){return __(XA,e,r)}s(s1t,"FromAnyKey");function a1t(t,e,r){return __(ike,e,r)}s(a1t,"FromNeverKey");function c1t(t,e,r){return _o({true:e,false:e},r)}s(c1t,"FromBooleanKey");function l1t(t,e,r){return __(JA,e,r)}s(l1t,"FromIntegerKey");function u1t(t,e,r){return __(JA,e,r)}s(u1t,"FromNumberKey");function XH(t,e,r={}){return no(t)?r1t(t.anyOf,e,r):x0(t)?t1t(t,e,r):E0(t)?n1t(t.const,e,r):k1(t)?c1t(t,e,r):qh(t)?l1t(t,e,r):Hh(t)?u1t(t,e,r):mce(t)?i1t(t,e,r):P1(t)?o1t(t,e,r):fce(t)?s1t(t,e,r):ob(t)?a1t(t,e,r):mi(r)}s(XH,"Record");function ZH(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(ZH,"RecordPattern");function Kke(t){let e=ZH(t);return e===XA?vd():e===JA?jp():vd({pattern:e})}s(Kke,"RecordKey");function eW(t){return t.patternProperties[ZH(t)]}s(eW,"RecordValue");function d1t(t,e){return e.parameters=Q6(t,e.parameters),e.returns=jh(t,e.returns),e}s(d1t,"FromConstructor");function f1t(t,e){return e.parameters=Q6(t,e.parameters),e.returns=jh(t,e.returns),e}s(f1t,"FromFunction");function p1t(t,e){return e.allOf=Q6(t,e.allOf),e}s(p1t,"FromIntersect");function m1t(t,e){return e.anyOf=Q6(t,e.anyOf),e}s(m1t,"FromUnion");function h1t(t,e){return tc(e.items)||(e.items=Q6(t,e.items)),e}s(h1t,"FromTuple");function g1t(t,e){return e.items=jh(t,e.items),e}s(g1t,"FromArray");function A1t(t,e){return e.items=jh(t,e.items),e}s(A1t,"FromAsyncIterator");function y1t(t,e){return e.items=jh(t,e.items),e}s(y1t,"FromIterator");function C1t(t,e){return e.item=jh(t,e.item),e}s(C1t,"FromPromise");function E1t(t,e){let r=I1t(t,e.properties);return{...e,..._o(r)}}s(E1t,"FromObject");function v1t(t,e){let r=jh(t,Kke(e)),n=jh(t,eW(e)),i=XH(r,n);return{...e,...i}}s(v1t,"FromRecord");function x1t(t,e){return e.index in t?t[e.index]:Gh()}s(x1t,"FromArgument");function b1t(t,e){let r=zk(e),n=uf(e),i=jh(t,e);return r&&n?JH(i):r&&!n?ff(i):!r&&n?Mu(i):i}s(b1t,"FromProperty");function I1t(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:b1t(t,e[n])}),{})}s(I1t,"FromProperties");function Q6(t,e){return e.map(r=>jh(t,r))}s(Q6,"FromTypes");function jh(t,e){return Qh(e)?d1t(t,e):Uh(e)?f1t(t,e):va(e)?p1t(t,e):no(e)?m1t(t,e):b0(e)?h1t(t,e):Fh(e)?g1t(t,e):E_(e)?A1t(t,e):x_(e)?y1t(t,e):b_(e)?C1t(t,e):rc(e)?E1t(t,e):I_(e)?v1t(t,e):pce(e)?x1t(t,e):e}s(jh,"FromType");function Jke(t,e){return jh(e,Vk(t))}s(Jke,"Instantiate");d();function Xke(t){return it({[et]:"Integer",type:"integer"},t)}s(Xke,"Integer");d();d();d();function T1t(t,e,r){return{[t]:Vh(zi(t),e,Ds(r))}}s(T1t,"MappedIntrinsicPropertyKey");function w1t(t,e,r){return t.reduce((i,o)=>({...i,...T1t(o,e,r)}),{})}s(w1t,"MappedIntrinsicPropertyKeys");function _1t(t,e,r){return w1t(t.keys,e,r)}s(_1t,"MappedIntrinsicProperties");function Zke(t,e,r){let n=_1t(t,e,r);return uo(n)}s(Zke,"IntrinsicFromMappedKey");function S1t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(S1t,"ApplyUncapitalize");function R1t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(R1t,"ApplyCapitalize");function k1t(t){return t.toUpperCase()}s(k1t,"ApplyUppercase");function P1t(t){return t.toLowerCase()}s(P1t,"ApplyLowercase");function B1t(t,e,r){let n=t4(t.pattern);if(!T_(n))return{...t,pattern:e4e(t.pattern,e)};let a=[...L6(n)].map(u=>zi(u)),c=t4e(a,e),l=wo(c);return QH([l],r)}s(B1t,"FromTemplateLiteral");function e4e(t,e){return typeof t=="string"?e==="Uncapitalize"?S1t(t):e==="Capitalize"?R1t(t):e==="Uppercase"?k1t(t):e==="Lowercase"?P1t(t):t:t.toString()}s(e4e,"FromLiteralValue");function t4e(t,e){return t.map(r=>Vh(r,e))}s(t4e,"FromRest");function Vh(t,e,r={}){return v0(t)?Zke(t,e,r):x0(t)?B1t(t,e,r):no(t)?wo(t4e(t.anyOf,e),r):E0(t)?zi(e4e(t.const,e),r):it(t,r)}s(Vh,"Intrinsic");function r4e(t,e={}){return Vh(t,"Capitalize",e)}s(r4e,"Capitalize");d();function n4e(t,e={}){return Vh(t,"Lowercase",e)}s(n4e,"Lowercase");d();function i4e(t,e={}){return Vh(t,"Uncapitalize",e)}s(i4e,"Uncapitalize");d();function o4e(t,e={}){return Vh(t,"Uppercase",e)}s(o4e,"Uppercase");d();d();d();d();d();function D1t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=ub(t[i],e,Ds(r));return n}s(D1t,"FromProperties");function N1t(t,e,r){return D1t(t.properties,e,r)}s(N1t,"FromMappedResult");function s4e(t,e,r){let n=N1t(t,e,r);return uo(n)}s(s4e,"OmitFromMappedResult");function L1t(t,e){return t.map(r=>Mce(r,e))}s(L1t,"FromIntersect");function M1t(t,e){return t.map(r=>Mce(r,e))}s(M1t,"FromUnion");function F1t(t,e){let{[e]:r,...n}=t;return n}s(F1t,"FromProperty");function O1t(t,e){return e.reduce((r,n)=>F1t(r,n),t)}s(O1t,"FromProperties");function Q1t(t,e){let r=xa(t,[oa,"$id","required","properties"]),n=O1t(t.properties,e);return _o(n,r)}s(Q1t,"FromObject");function U1t(t){let e=t.reduce((r,n)=>NH(n)?[...r,zi(n)]:r,[]);return wo(e)}s(U1t,"UnionFromPropertyKeys");function Mce(t,e){return va(t)?Fu(L1t(t.allOf,e)):no(t)?wo(M1t(t.anyOf,e)):rc(t)?Q1t(t,e):_o({})}s(Mce,"OmitResolve");function ub(t,e,r){let n=ec(e)?U1t(e):e,i=sa(e)?df(e):e,o=Da(t),a=Da(e);return Ls(t)?s4e(t,i,r):v0(e)?a4e(t,e,r):o&&a?Cs("Omit",[t,n],r):!o&&a?Cs("Omit",[t,n],r):o&&!a?Cs("Omit",[t,n],r):it({...Mce(t,i),...r})}s(ub,"Omit");function q1t(t,e,r){return{[e]:ub(t,[e],Ds(r))}}s(q1t,"FromPropertyKey");function H1t(t,e,r){return e.reduce((n,i)=>({...n,...q1t(t,i,r)}),{})}s(H1t,"FromPropertyKeys");function W1t(t,e,r){return H1t(t,e.keys,r)}s(W1t,"FromMappedKey");function a4e(t,e,r){let n=W1t(t,e,r);return uo(n)}s(a4e,"OmitFromMappedKey");d();d();d();function G1t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=db(t[i],e,Ds(r));return n}s(G1t,"FromProperties");function j1t(t,e,r){return G1t(t.properties,e,r)}s(j1t,"FromMappedResult");function c4e(t,e,r){let n=j1t(t,e,r);return uo(n)}s(c4e,"PickFromMappedResult");function V1t(t,e){return t.map(r=>Fce(r,e))}s(V1t,"FromIntersect");function $1t(t,e){return t.map(r=>Fce(r,e))}s($1t,"FromUnion");function z1t(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(z1t,"FromProperties");function Y1t(t,e){let r=xa(t,[oa,"$id","required","properties"]),n=z1t(t.properties,e);return _o(n,r)}s(Y1t,"FromObject");function K1t(t){let e=t.reduce((r,n)=>NH(n)?[...r,zi(n)]:r,[]);return wo(e)}s(K1t,"UnionFromPropertyKeys");function Fce(t,e){return va(t)?Fu(V1t(t.allOf,e)):no(t)?wo($1t(t.anyOf,e)):rc(t)?Y1t(t,e):_o({})}s(Fce,"PickResolve");function db(t,e,r){let n=ec(e)?K1t(e):e,i=sa(e)?df(e):e,o=Da(t),a=Da(e);return Ls(t)?c4e(t,i,r):v0(e)?l4e(t,e,r):o&&a?Cs("Pick",[t,n],r):!o&&a?Cs("Pick",[t,n],r):o&&!a?Cs("Pick",[t,n],r):it({...Fce(t,i),...r})}s(db,"Pick");function J1t(t,e,r){return{[e]:db(t,[e],Ds(r))}}s(J1t,"FromPropertyKey");function X1t(t,e,r){return e.reduce((n,i)=>({...n,...J1t(t,i,r)}),{})}s(X1t,"FromPropertyKeys");function Z1t(t,e,r){return X1t(t,e.keys,r)}s(Z1t,"FromMappedKey");function l4e(t,e,r){let n=Z1t(t,e,r);return uo(n)}s(l4e,"PickFromMappedKey");d();d();function eEt(t,e){return Cs("Partial",[Cs(t,e)])}s(eEt,"FromComputed");function tEt(t){return Cs("Partial",[zp(t)])}s(tEt,"FromRef");function rEt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Mu(t[r]);return e}s(rEt,"FromProperties");function nEt(t){let e=xa(t,[oa,"$id","required","properties"]),r=rEt(t.properties);return _o(r,e)}s(nEt,"FromObject");function u4e(t){return t.map(e=>d4e(e))}s(u4e,"FromRest");function d4e(t){return Oh(t)?eEt(t.target,t.parameters):Da(t)?tEt(t.$ref):va(t)?Fu(u4e(t.allOf)):no(t)?wo(u4e(t.anyOf)):rc(t)?nEt(t):v_(t)||k1(t)||qh(t)||E0(t)||S6(t)||Hh(t)||P1(t)||R6(t)||B1(t)?t:_o({})}s(d4e,"PartialResolve");function d4(t,e){return Ls(t)?f4e(t,e):it({...d4e(t),...e})}s(d4,"Partial");function iEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=d4(t[n],Ds(e));return r}s(iEt,"FromProperties");function oEt(t,e){return iEt(t.properties,e)}s(oEt,"FromMappedResult");function f4e(t,e){let r=oEt(t,e);return uo(r)}s(f4e,"PartialFromMappedResult");d();d();function sEt(t,e){return Cs("Required",[Cs(t,e)])}s(sEt,"FromComputed");function aEt(t){return Cs("Required",[zp(t)])}s(aEt,"FromRef");function cEt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=xa(t[r],[Zl]);return e}s(cEt,"FromProperties");function lEt(t){let e=xa(t,[oa,"$id","required","properties"]),r=cEt(t.properties);return _o(r,e)}s(lEt,"FromObject");function p4e(t){return t.map(e=>m4e(e))}s(p4e,"FromRest");function m4e(t){return Oh(t)?sEt(t.target,t.parameters):Da(t)?aEt(t.$ref):va(t)?Fu(p4e(t.allOf)):no(t)?wo(p4e(t.anyOf)):rc(t)?lEt(t):v_(t)||k1(t)||qh(t)||E0(t)||S6(t)||Hh(t)||P1(t)||R6(t)||B1(t)?t:_o({})}s(m4e,"RequiredResolve");function f4(t,e){return Ls(t)?h4e(t,e):it({...m4e(t),...e})}s(f4,"Required");function uEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=f4(t[n],e);return r}s(uEt,"FromProperties");function dEt(t,e){return uEt(t.properties,e)}s(dEt,"FromMappedResult");function h4e(t,e){let r=dEt(t,e);return uo(r)}s(h4e,"RequiredFromMappedResult");function fEt(t,e){return e.map(r=>Da(r)?Oce(t,r.$ref):I0(t,r))}s(fEt,"DereferenceParameters");function Oce(t,e){return e in t?Da(t[e])?Oce(t,t[e].$ref):I0(t,t[e]):mi()}s(Oce,"Dereference");function pEt(t){return o4(t[0])}s(pEt,"FromAwaited");function mEt(t){return cb(t[0],t[1])}s(mEt,"FromIndex");function hEt(t){return s4(t[0])}s(hEt,"FromKeyOf");function gEt(t){return d4(t[0])}s(gEt,"FromPartial");function AEt(t){return ub(t[0],t[1])}s(AEt,"FromOmit");function yEt(t){return db(t[0],t[1])}s(yEt,"FromPick");function CEt(t){return f4(t[0])}s(CEt,"FromRequired");function EEt(t,e,r){let n=fEt(t,r);return e==="Awaited"?pEt(n):e==="Index"?mEt(n):e==="KeyOf"?hEt(n):e==="Partial"?gEt(n):e==="Omit"?AEt(n):e==="Pick"?yEt(n):e==="Required"?CEt(n):mi()}s(EEt,"FromComputed");function vEt(t,e){return Jk(I0(t,e))}s(vEt,"FromArray");function xEt(t,e){return Xk(I0(t,e))}s(xEt,"FromAsyncIterator");function bEt(t,e,r){return Zk(U6(t,e),I0(t,r))}s(bEt,"FromConstructor");function IEt(t,e,r){return ZA(U6(t,e),I0(t,r))}s(IEt,"FromFunction");function TEt(t,e){return Fu(U6(t,e))}s(TEt,"FromIntersect");function wEt(t,e){return i4(I0(t,e))}s(wEt,"FromIterator");function _Et(t,e){return _o(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:I0(t,e[n])}),{}))}s(_Et,"FromObject");function SEt(t,e){let[r,n]=[I0(t,eW(e)),ZH(e)],i=Vk(e);return i.patternProperties[n]=r,i}s(SEt,"FromRecord");function REt(t,e){return Da(e)?{...Oce(t,e.$ref),[oa]:e[oa]}:e}s(REt,"FromTransform");function kEt(t,e){return Vp(U6(t,e))}s(kEt,"FromTuple");function PEt(t,e){return wo(U6(t,e))}s(PEt,"FromUnion");function U6(t,e){return e.map(r=>I0(t,r))}s(U6,"FromTypes");function I0(t,e){return uf(e)?it(I0(t,xa(e,[Zl])),e):zk(e)?it(I0(t,xa(e,[Mh])),e):To(e)?it(REt(t,e),e):Fh(e)?it(vEt(t,e.items),e):E_(e)?it(xEt(t,e.items),e):Oh(e)?it(EEt(t,e.target,e.parameters)):Qh(e)?it(bEt(t,e.parameters,e.returns),e):Uh(e)?it(IEt(t,e.parameters,e.returns),e):va(e)?it(TEt(t,e.allOf),e):x_(e)?it(wEt(t,e.items),e):rc(e)?it(_Et(t,e.properties),e):I_(e)?it(SEt(t,e)):b0(e)?it(kEt(t,e.items||[]),e):no(e)?it(PEt(t,e.anyOf),e):e}s(I0,"FromType");function BEt(t,e){return e in t?I0(t,t[e]):mi()}s(BEt,"ComputeType");function g4e(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:BEt(t,r)}),{})}s(g4e,"ComputeModuleProperties");var Qce=class{static{s(this,"TModule")}constructor(e){let r=g4e(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:it(this.$defs[e],r)};return it({[et]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function A4e(t){return new Qce(t)}s(A4e,"Module");d();function y4e(t,e){return it({[et]:"Not",not:t},e)}s(y4e,"Not");d();function C4e(t,e){return Uh(t)?Vp(t.parameters,e):mi()}s(C4e,"Parameters");d();var DEt=0;function E4e(t,e={}){tc(e.$id)&&(e.$id=`T${DEt++}`);let r=Vk(t({[et]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,it({[Gp]:"Recursive",...r},e)}s(E4e,"Recursive");d();function v4e(t,e){let r=as(t)?new globalThis.RegExp(t):t;return it({[et]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(v4e,"RegExp");d();function NEt(t){return va(t)?t.allOf:no(t)?t.anyOf:b0(t)?t.items??[]:[]}s(NEt,"RestResolve");function x4e(t){return NEt(t)}s(x4e,"Rest");d();function b4e(t,e){return Uh(t)?it(t.returns,e):mi(e)}s(b4e,"ReturnType");d();var Uce=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new qce(this.schema,e)}},qce=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[oa].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[oa].Decode(a)),"Decode")};return{...r,[oa]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[oa]:n}}Encode(e){return To(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function I4e(t){return new Uce(t)}s(I4e,"Transform");d();function T4e(t={}){return it({[et]:t[et]??"Unsafe"},t)}s(T4e,"Unsafe");d();function w4e(t){return it({[et]:"Void",type:"void"},t)}s(w4e,"Void");d();var Hce={};ra(Hce,{Any:()=>ab,Argument:()=>lke,Array:()=>Jk,AsyncIterator:()=>Xk,Awaited:()=>o4,BigInt:()=>n4,Boolean:()=>OH,Capitalize:()=>r4e,Composite:()=>Ske,Const:()=>Rke,Constructor:()=>Zk,ConstructorParameters:()=>kke,Date:()=>WH,Enum:()=>Pke,Exclude:()=>l4,Extends:()=>c4,Extract:()=>u4,Function:()=>ZA,Index:()=>cb,InstanceType:()=>Yke,Instantiate:()=>Jke,Integer:()=>Xke,Intersect:()=>Fu,Iterator:()=>i4,KeyOf:()=>s4,Literal:()=>zi,Lowercase:()=>n4e,Mapped:()=>xke,Module:()=>A4e,Never:()=>mi,Not:()=>y4e,Null:()=>GH,Number:()=>jp,Object:()=>_o,Omit:()=>ub,Optional:()=>Mu,Parameters:()=>C4e,Partial:()=>d4,Pick:()=>db,Promise:()=>qH,Readonly:()=>ff,ReadonlyOptional:()=>JH,Record:()=>XH,Recursive:()=>E4e,Ref:()=>zp,RegExp:()=>v4e,Required:()=>f4,Rest:()=>x4e,ReturnType:()=>b4e,String:()=>vd,Symbol:()=>jH,TemplateLiteral:()=>QH,Transform:()=>I4e,Tuple:()=>Vp,Uint8Array:()=>$H,Uncapitalize:()=>i4e,Undefined:()=>VH,Union:()=>wo,Unknown:()=>Gh,Unsafe:()=>T4e,Uppercase:()=>o4e,Void:()=>w4e});d();var I=Hce;d();d();function LEt(t){switch(t.errorType){case Xe.ArrayContains:return"Expected array to contain at least one matching value";case Xe.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Xe.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Xe.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Xe.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Xe.ArrayUniqueItems:return"Expected array elements to be unique";case Xe.Array:return"Expected array";case Xe.AsyncIterator:return"Expected AsyncIterator";case Xe.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Xe.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Xe.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Xe.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Xe.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Xe.BigInt:return"Expected bigint";case Xe.Boolean:return"Expected boolean";case Xe.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Xe.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Xe.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Xe.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Xe.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Xe.Date:return"Expected Date";case Xe.Function:return"Expected function";case Xe.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Xe.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Xe.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Xe.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Xe.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Xe.Integer:return"Expected integer";case Xe.IntersectUnevaluatedProperties:return"Unexpected property";case Xe.Intersect:return"Expected all values to match";case Xe.Iterator:return"Expected Iterator";case Xe.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Xe.Never:return"Never";case Xe.Not:return"Value should not match";case Xe.Null:return"Expected null";case Xe.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Xe.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Xe.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Xe.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Xe.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Xe.Number:return"Expected number";case Xe.Object:return"Expected object";case Xe.ObjectAdditionalProperties:return"Unexpected property";case Xe.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Xe.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Xe.ObjectRequiredProperty:return"Expected required property";case Xe.Promise:return"Expected Promise";case Xe.RegExp:return"Expected string to match regular expression";case Xe.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Xe.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Xe.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Xe.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Xe.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Xe.String:return"Expected string";case Xe.Symbol:return"Expected symbol";case Xe.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Xe.Tuple:return"Expected tuple";case Xe.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Xe.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Xe.Uint8Array:return"Expected Uint8Array";case Xe.Undefined:return"Expected undefined";case Xe.Union:return"Expected union value";case Xe.Void:return"Expected void";case Xe.Kind:return`Expected kind '${t.schema[et]}'`;default:return"Unknown error type"}}s(LEt,"DefaultErrorFunction");var MEt=LEt;function _4e(){return MEt}s(_4e,"GetErrorFunction");d();var Wce=class extends bn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function FEt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new Wce(t);return fo(r,e)}s(FEt,"Resolve");function yl(t,e){return!ro(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(yl,"Pushref");function fo(t,e){return t[et]==="This"||t[et]==="Ref"?FEt(t,e):t}s(fo,"Deref");d();var Gce=class extends bn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},T0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(T0||(T0={}));var p4=BigInt("14695981039346656037"),[OEt,QEt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],UEt=Array.from({length:256}).map((t,e)=>BigInt(e)),S4e=new Float64Array(1),R4e=new DataView(S4e.buffer),k4e=new Uint8Array(S4e.buffer);function*qEt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(qEt,"NumberToBytes");function HEt(t){Qu(T0.Array);for(let e of t)m4(e)}s(HEt,"ArrayType");function WEt(t){Qu(T0.Boolean),Qu(t?1:0)}s(WEt,"BooleanType");function GEt(t){Qu(T0.BigInt),R4e.setBigInt64(0,t);for(let e of k4e)Qu(e)}s(GEt,"BigIntType");function jEt(t){Qu(T0.Date),m4(t.getTime())}s(jEt,"DateType");function VEt(t){Qu(T0.Null)}s(VEt,"NullType");function $Et(t){Qu(T0.Number),R4e.setFloat64(0,t);for(let e of k4e)Qu(e)}s($Et,"NumberType");function zEt(t){Qu(T0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())m4(e),m4(t[e])}s(zEt,"ObjectType");function YEt(t){Qu(T0.String);for(let e=0;e<t.length;e++)for(let r of qEt(t.charCodeAt(e)))Qu(r)}s(YEt,"StringType");function KEt(t){Qu(T0.Symbol),m4(t.description)}s(KEt,"SymbolType");function JEt(t){Qu(T0.Uint8Array);for(let e=0;e<t.length;e++)Qu(t[e])}s(JEt,"Uint8ArrayType");function XEt(t){return Qu(T0.Undefined)}s(XEt,"UndefinedType");function m4(t){if(xn(t))return HEt(t);if(KA(t))return WEt(t);if(Xl(t))return GEt(t);if(Cd(t))return jEt(t);if(S1(t))return VEt(t);if(Vr(t))return $Et(t);if(Ei(t))return zEt(t);if(ro(t))return YEt(t);if(R1(t))return KEt(t);if($k(t))return JEt(t);if(Ns(t))return XEt(t);throw new Gce(t)}s(m4,"Visit");function Qu(t){p4=p4^UEt[t],p4=p4*OEt%QEt}s(Qu,"FNV1A64");function fb(t){return p4=BigInt("14695981039346656037"),m4(t),p4}s(fb,"Hash");d();var jce=class extends bn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function ZEt(t){return t[et]==="Any"||t[et]==="Unknown"}s(ZEt,"IsAnyOrUnknown");function Mi(t){return t!==void 0}s(Mi,"IsDefined");function evt(t,e,r){return!0}s(evt,"FromAny");function tvt(t,e,r){return!0}s(tvt,"FromArgument");function rvt(t,e,r){if(!xn(r)||Mi(t.minItems)&&!(r.length>=t.minItems)||Mi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Cl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=fb(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Mi(t.contains)||Vr(t.minContains)||Vr(t.maxContains)))return!0;let n=Mi(t.contains)?t.contains:mi(),i=r.reduce((o,a)=>Cl(n,e,a)?o+1:o,0);return!(i===0||Vr(t.minContains)&&i<t.minContains||Vr(t.maxContains)&&i>t.maxContains)}s(rvt,"FromArray");function nvt(t,e,r){return kH(r)}s(nvt,"FromAsyncIterator");function ivt(t,e,r){return!(!Xl(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(ivt,"FromBigInt");function ovt(t,e,r){return KA(r)}s(ovt,"FromBoolean");function svt(t,e,r){return Cl(t.returns,e,r.prototype)}s(svt,"FromConstructor");function avt(t,e,r){return!(!Cd(r)||Mi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Mi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Mi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Mi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Mi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(avt,"FromDate");function cvt(t,e,r){return ib(r)}s(cvt,"FromFunction");function lvt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cl(i,[...e,...n],r)}s(lvt,"FromImport");function uvt(t,e,r){return!(!DH(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(uvt,"FromInteger");function dvt(t,e,r){let n=t.allOf.every(i=>Cl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(L1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(sa(t.unevaluatedProperties)){let i=new RegExp(L1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Cl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(dvt,"FromIntersect");function fvt(t,e,r){return PH(r)}s(fvt,"FromIterator");function pvt(t,e,r){return r===t.const}s(pvt,"FromLiteral");function mvt(t,e,r){return!1}s(mvt,"FromNever");function hvt(t,e,r){return!Cl(t.not,e,r)}s(hvt,"FromNot");function gvt(t,e,r){return S1(r)}s(gvt,"FromNull");function Avt(t,e,r){return!(!ys.IsNumberLike(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(Avt,"FromNumber");function yvt(t,e,r){if(!ys.IsObjectLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Cl(o,e,r[i])||(M1(o)||ZEt(o))&&!(i in r))return!1}else if(ys.IsExactOptionalProperty(r,i)&&!Cl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Cl(t.additionalProperties,e,r[o])):!0}s(yvt,"FromObject");function Cvt(t,e,r){return BH(r)}s(Cvt,"FromPromise");function Evt(t,e,r){if(!ys.IsRecordLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?Cl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:Cl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(Evt,"FromRecord");function vvt(t,e,r){return Cl(fo(t,e),e,r)}s(vvt,"FromRef");function xvt(t,e,r){let n=new RegExp(t.source,t.flags);return Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(xvt,"FromRegExp");function bvt(t,e,r){return!ro(r)||Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)||Mi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Mi(t.format)?Wh.Has(t.format)?Wh.Get(t.format)(r):!1:!0}s(bvt,"FromString");function Ivt(t,e,r){return R1(r)}s(Ivt,"FromSymbol");function Tvt(t,e,r){return ro(r)&&new RegExp(t.pattern).test(r)}s(Tvt,"FromTemplateLiteral");function wvt(t,e,r){return Cl(fo(t,e),e,r)}s(wvt,"FromThis");function _vt(t,e,r){if(!xn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Cl(t.items[n],e,r[n]))return!1;return!0}s(_vt,"FromTuple");function Svt(t,e,r){return Ns(r)}s(Svt,"FromUndefined");function Rvt(t,e,r){return t.anyOf.some(n=>Cl(n,e,r))}s(Rvt,"FromUnion");function kvt(t,e,r){return!(!$k(r)||Mi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Mi(t.minByteLength)&&!(r.length>=t.minByteLength))}s(kvt,"FromUint8Array");function Pvt(t,e,r){return!0}s(Pvt,"FromUnknown");function Bvt(t,e,r){return ys.IsVoidLike(r)}s(Bvt,"FromVoid");function Dvt(t,e,r){return Ed.Has(t[et])?Ed.Get(t[et])(t,r):!1}s(Dvt,"FromKind");function Cl(t,e,r){let n=Mi(t.$id)?yl(t,e):e,i=t;switch(i[et]){case"Any":return evt(i,n,r);case"Argument":return tvt(i,n,r);case"Array":return rvt(i,n,r);case"AsyncIterator":return nvt(i,n,r);case"BigInt":return ivt(i,n,r);case"Boolean":return ovt(i,n,r);case"Constructor":return svt(i,n,r);case"Date":return avt(i,n,r);case"Function":return cvt(i,n,r);case"Import":return lvt(i,n,r);case"Integer":return uvt(i,n,r);case"Intersect":return dvt(i,n,r);case"Iterator":return fvt(i,n,r);case"Literal":return pvt(i,n,r);case"Never":return mvt(i,n,r);case"Not":return hvt(i,n,r);case"Null":return gvt(i,n,r);case"Number":return Avt(i,n,r);case"Object":return yvt(i,n,r);case"Promise":return Cvt(i,n,r);case"Record":return Evt(i,n,r);case"Ref":return vvt(i,n,r);case"RegExp":return xvt(i,n,r);case"String":return bvt(i,n,r);case"Symbol":return Ivt(i,n,r);case"TemplateLiteral":return Tvt(i,n,r);case"This":return wvt(i,n,r);case"Tuple":return _vt(i,n,r);case"Undefined":return Svt(i,n,r);case"Union":return Rvt(i,n,r);case"Uint8Array":return kvt(i,n,r);case"Unknown":return Pvt(i,n,r);case"Void":return Bvt(i,n,r);default:if(!Ed.Has(i[et]))throw new jce(i);return Dvt(i,n,r)}}s(Cl,"Visit");function Ii(...t){return t.length===3?Cl(t[0],t[1],t[2]):Cl(t[0],[],t[1])}s(Ii,"Check");var Xe;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Xe||(Xe={}));var Vce=class extends bn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function F1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(F1,"EscapeKey");function Fi(t){return t!==void 0}s(Fi,"IsDefined");var pb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function tr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:_4e()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(tr,"Create");function*Nvt(t,e,r,n){}s(Nvt,"FromAny");function*Lvt(t,e,r,n){}s(Lvt,"FromArgument");function*Mvt(t,e,r,n){if(!xn(n))return yield tr(Xe.Array,t,r,n);Fi(t.minItems)&&!(n.length>=t.minItems)&&(yield tr(Xe.ArrayMinItems,t,r,n)),Fi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield tr(Xe.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*El(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=fb(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield tr(Xe.ArrayUniqueItems,t,r,n)),!(Fi(t.contains)||Fi(t.minContains)||Fi(t.maxContains)))return;let i=Fi(t.contains)?t.contains:mi(),o=n.reduce((a,c,l)=>El(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield tr(Xe.ArrayContains,t,r,n)),Vr(t.minContains)&&o<t.minContains&&(yield tr(Xe.ArrayMinContains,t,r,n)),Vr(t.maxContains)&&o>t.maxContains&&(yield tr(Xe.ArrayMaxContains,t,r,n))}s(Mvt,"FromArray");function*Fvt(t,e,r,n){kH(n)||(yield tr(Xe.AsyncIterator,t,r,n))}s(Fvt,"FromAsyncIterator");function*Ovt(t,e,r,n){if(!Xl(n))return yield tr(Xe.BigInt,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.BigIntExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.BigIntExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.BigIntMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.BigIntMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield tr(Xe.BigIntMultipleOf,t,r,n))}s(Ovt,"FromBigInt");function*Qvt(t,e,r,n){KA(n)||(yield tr(Xe.Boolean,t,r,n))}s(Qvt,"FromBoolean");function*Uvt(t,e,r,n){yield*El(t.returns,e,r,n.prototype)}s(Uvt,"FromConstructor");function*qvt(t,e,r,n){if(!Cd(n))return yield tr(Xe.Date,t,r,n);Fi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield tr(Xe.DateExclusiveMaximumTimestamp,t,r,n)),Fi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield tr(Xe.DateExclusiveMinimumTimestamp,t,r,n)),Fi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield tr(Xe.DateMaximumTimestamp,t,r,n)),Fi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield tr(Xe.DateMinimumTimestamp,t,r,n)),Fi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield tr(Xe.DateMultipleOfTimestamp,t,r,n))}s(qvt,"FromDate");function*Hvt(t,e,r,n){ib(n)||(yield tr(Xe.Function,t,r,n))}s(Hvt,"FromFunction");function*Wvt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*El(o,[...e,...i],r,n)}s(Wvt,"FromImport");function*Gvt(t,e,r,n){if(!DH(n))return yield tr(Xe.Integer,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.IntegerExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.IntegerExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.IntegerMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.IntegerMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.IntegerMultipleOf,t,r,n))}s(Gvt,"FromInteger");function*jvt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of El(o,e,r,n))i=!0,yield a;if(i)return yield tr(Xe.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(L1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield tr(Xe.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(L1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=El(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(jvt,"FromIntersect");function*Vvt(t,e,r,n){PH(n)||(yield tr(Xe.Iterator,t,r,n))}s(Vvt,"FromIterator");function*$vt(t,e,r,n){n!==t.const&&(yield tr(Xe.Literal,t,r,n))}s($vt,"FromLiteral");function*zvt(t,e,r,n){yield tr(Xe.Never,t,r,n)}s(zvt,"FromNever");function*Yvt(t,e,r,n){El(t.not,e,r,n).next().done===!0&&(yield tr(Xe.Not,t,r,n))}s(Yvt,"FromNot");function*Kvt(t,e,r,n){S1(n)||(yield tr(Xe.Null,t,r,n))}s(Kvt,"FromNull");function*Jvt(t,e,r,n){if(!ys.IsNumberLike(n))return yield tr(Xe.Number,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.NumberExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.NumberExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.NumberMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.NumberMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.NumberMultipleOf,t,r,n))}s(Jvt,"FromNumber");function*Xvt(t,e,r,n){if(!ys.IsObjectLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield tr(Xe.ObjectRequiredProperty,t.properties[c],`${r}/${F1(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${F1(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*El(t.additionalProperties,e,`${r}/${F1(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*El(l,e,`${r}/${F1(c)}`,n[c]),M1(t)&&!(c in n)&&(yield tr(Xe.ObjectRequiredProperty,l,`${r}/${F1(c)}`,void 0))):ys.IsExactOptionalProperty(n,c)&&(yield*El(l,e,`${r}/${F1(c)}`,n[c]))}}s(Xvt,"FromObject");function*Zvt(t,e,r,n){BH(n)||(yield tr(Xe.Promise,t,r,n))}s(Zvt,"FromPromise");function*ext(t,e,r,n){if(!ys.IsRecordLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*El(o,e,`${r}/${F1(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*El(t.additionalProperties,e,`${r}/${F1(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${F1(c)}`,l)}}s(ext,"FromRecord");function*txt(t,e,r,n){yield*El(fo(t,e),e,r,n)}s(txt,"FromRef");function*rxt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);if(Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield tr(Xe.RegExp,t,r,n)}s(rxt,"FromRegExp");function*nxt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),ro(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))),ro(t.format)&&(Wh.Has(t.format)?Wh.Get(t.format)(n)||(yield tr(Xe.StringFormat,t,r,n)):yield tr(Xe.StringFormatUnknown,t,r,n))}s(nxt,"FromString");function*ixt(t,e,r,n){R1(n)||(yield tr(Xe.Symbol,t,r,n))}s(ixt,"FromSymbol");function*oxt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))}s(oxt,"FromTemplateLiteral");function*sxt(t,e,r,n){yield*El(fo(t,e),e,r,n)}s(sxt,"FromThis");function*axt(t,e,r,n){if(!xn(n))return yield tr(Xe.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield tr(Xe.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield tr(Xe.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*El(t.items[i],e,`${r}/${i}`,n[i])}s(axt,"FromTuple");function*cxt(t,e,r,n){Ns(n)||(yield tr(Xe.Undefined,t,r,n))}s(cxt,"FromUndefined");function*lxt(t,e,r,n){if(Ii(t,e,n))return;let i=t.anyOf.map(o=>new pb(El(o,e,r,n)));yield tr(Xe.Union,t,r,n,i)}s(lxt,"FromUnion");function*uxt(t,e,r,n){if(!$k(n))return yield tr(Xe.Uint8Array,t,r,n);Fi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield tr(Xe.Uint8ArrayMaxByteLength,t,r,n)),Fi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield tr(Xe.Uint8ArrayMinByteLength,t,r,n))}s(uxt,"FromUint8Array");function*dxt(t,e,r,n){}s(dxt,"FromUnknown");function*fxt(t,e,r,n){ys.IsVoidLike(n)||(yield tr(Xe.Void,t,r,n))}s(fxt,"FromVoid");function*pxt(t,e,r,n){Ed.Get(t[et])(t,n)||(yield tr(Xe.Kind,t,r,n))}s(pxt,"FromKind");function*El(t,e,r,n){let i=Fi(t.$id)?[...e,t]:e,o=t;switch(o[et]){case"Any":return yield*Nvt(o,i,r,n);case"Argument":return yield*Lvt(o,i,r,n);case"Array":return yield*Mvt(o,i,r,n);case"AsyncIterator":return yield*Fvt(o,i,r,n);case"BigInt":return yield*Ovt(o,i,r,n);case"Boolean":return yield*Qvt(o,i,r,n);case"Constructor":return yield*Uvt(o,i,r,n);case"Date":return yield*qvt(o,i,r,n);case"Function":return yield*Hvt(o,i,r,n);case"Import":return yield*Wvt(o,i,r,n);case"Integer":return yield*Gvt(o,i,r,n);case"Intersect":return yield*jvt(o,i,r,n);case"Iterator":return yield*Vvt(o,i,r,n);case"Literal":return yield*$vt(o,i,r,n);case"Never":return yield*zvt(o,i,r,n);case"Not":return yield*Yvt(o,i,r,n);case"Null":return yield*Kvt(o,i,r,n);case"Number":return yield*Jvt(o,i,r,n);case"Object":return yield*Xvt(o,i,r,n);case"Promise":return yield*Zvt(o,i,r,n);case"Record":return yield*ext(o,i,r,n);case"Ref":return yield*txt(o,i,r,n);case"RegExp":return yield*rxt(o,i,r,n);case"String":return yield*nxt(o,i,r,n);case"Symbol":return yield*ixt(o,i,r,n);case"TemplateLiteral":return yield*oxt(o,i,r,n);case"This":return yield*sxt(o,i,r,n);case"Tuple":return yield*axt(o,i,r,n);case"Undefined":return yield*cxt(o,i,r,n);case"Union":return yield*lxt(o,i,r,n);case"Uint8Array":return yield*uxt(o,i,r,n);case"Unknown":return yield*dxt(o,i,r,n);case"Void":return yield*fxt(o,i,r,n);default:if(!Ed.Has(o[et]))throw new Vce(t);return yield*pxt(o,i,r,n)}}s(El,"Visit");function ty(...t){let e=t.length===3?El(t[0],t[1],"",t[2]):El(t[0],[],"",t[1]);return new pb(e)}s(ty,"Errors");d();d();var h4=class extends bn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},$ce=class extends bn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function aa(t,e,r){try{return To(t)?t[oa].Decode(r):r}catch(n){throw new $ce(t,e,r,n)}}s(aa,"Default");function mxt(t,e,r,n){return xn(n)?aa(t,r,n.map((i,o)=>$h(t.items,e,`${r}/${o}`,i))):aa(t,r,n)}s(mxt,"FromArray");function hxt(t,e,r,n){if(!Ei(n)||C0(n))return aa(t,r,n);let i=HH(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=$h(p,e,`${r}/${f}`,a[f]));if(!To(t.unevaluatedProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(hxt,"FromIntersect");function gxt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=$h(o,[...e,...i],r,n);return aa(t,r,a)}s(gxt,"FromImport");function Axt(t,e,r,n){return aa(t,r,$h(t.not,e,r,n))}s(Axt,"FromNot");function yxt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=pf(t),o={...n};for(let u of i)vn(o,u)&&(Ns(o[u])&&(!B1(t.properties[u])||ys.IsExactOptionalProperty(o,u))||(o[u]=$h(t.properties[u],e,`${r}/${u}`,o[u])));if(!sa(t.additionalProperties))return aa(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=aa(c,`${r}/${u}`,l[u]));return aa(t,r,l)}s(yxt,"FromObject");function Cxt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=$h(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!sa(t.additionalProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(Cxt,"FromRecord");function Ext(t,e,r,n){let i=fo(t,e);return aa(t,r,$h(i,e,r,n))}s(Ext,"FromRef");function vxt(t,e,r,n){let i=fo(t,e);return aa(t,r,$h(i,e,r,n))}s(vxt,"FromThis");function xxt(t,e,r,n){return xn(n)&&xn(t.items)?aa(t,r,t.items.map((i,o)=>$h(i,e,`${r}/${o}`,n[o]))):aa(t,r,n)}s(xxt,"FromTuple");function bxt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=$h(i,e,r,n);return aa(t,r,o)}return aa(t,r,n)}s(bxt,"FromUnion");function $h(t,e,r,n){let i=yl(t,e),o=t;switch(t[et]){case"Array":return mxt(o,i,r,n);case"Import":return gxt(o,i,r,n);case"Intersect":return hxt(o,i,r,n);case"Not":return Axt(o,i,r,n);case"Object":return yxt(o,i,r,n);case"Record":return Cxt(o,i,r,n);case"Ref":return Ext(o,i,r,n);case"Symbol":return aa(o,r,n);case"This":return vxt(o,i,r,n);case"Tuple":return xxt(o,i,r,n);case"Union":return bxt(o,i,r,n);default:return aa(o,r,n)}}s($h,"Visit");function g4(t,e,r){return $h(t,e,"",r)}s(g4,"TransformDecode");d();var A4=class extends bn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},zce=class extends bn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function eu(t,e,r){try{return To(t)?t[oa].Encode(r):r}catch(n){throw new zce(t,e,r,n)}}s(eu,"Default");function Ixt(t,e,r,n){let i=eu(t,r,n);return xn(i)?i.map((o,a)=>zh(t.items,e,`${r}/${a}`,o)):i}s(Ixt,"FromArray");function Txt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=eu(t,r,n);return zh(o,[...e,...i],r,a)}s(Txt,"FromImport");function wxt(t,e,r,n){let i=eu(t,r,n);if(!Ei(n)||C0(n))return i;let o=HH(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=zh(m,e,`${r}/${p}`,c[p]));if(!To(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=eu(u,`${r}/${p}`,f[p]));return f}s(wxt,"FromIntersect");function _xt(t,e,r,n){return eu(t.not,r,eu(t,r,n))}s(_xt,"FromNot");function Sxt(t,e,r,n){let i=eu(t,r,n);if(!Ei(i))return i;let o=pf(t),a={...i};for(let f of o)vn(a,f)&&(Ns(a[f])&&(!B1(t.properties[f])||ys.IsExactOptionalProperty(a,f))||(a[f]=zh(t.properties[f],e,`${r}/${f}`,a[f])));if(!sa(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=eu(l,`${r}/${f}`,u[f]));return u}s(Sxt,"FromObject");function Rxt(t,e,r,n){let i=eu(t,r,n);if(!Ei(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=zh(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!sa(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=eu(u,`${r}/${p}`,f[p]));return f}s(Rxt,"FromRecord");function kxt(t,e,r,n){let i=fo(t,e),o=zh(i,e,r,n);return eu(t,r,o)}s(kxt,"FromRef");function Pxt(t,e,r,n){let i=fo(t,e),o=zh(i,e,r,n);return eu(t,r,o)}s(Pxt,"FromThis");function Bxt(t,e,r,n){let i=eu(t,r,n);return xn(t.items)?t.items.map((o,a)=>zh(o,e,`${r}/${a}`,i[a])):[]}s(Bxt,"FromTuple");function Dxt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=zh(i,e,r,n);return eu(t,r,o)}for(let i of t.anyOf){let o=zh(i,e,r,n);if(Ii(t,e,o))return eu(t,r,o)}return eu(t,r,n)}s(Dxt,"FromUnion");function zh(t,e,r,n){let i=yl(t,e),o=t;switch(t[et]){case"Array":return Ixt(o,i,r,n);case"Import":return Txt(o,i,r,n);case"Intersect":return wxt(o,i,r,n);case"Not":return _xt(o,i,r,n);case"Object":return Sxt(o,i,r,n);case"Record":return Rxt(o,i,r,n);case"Ref":return kxt(o,i,r,n);case"This":return Pxt(o,i,r,n);case"Tuple":return Bxt(o,i,r,n);case"Union":return Dxt(o,i,r,n);default:return eu(o,r,n)}}s(zh,"Visit");function y4(t,e,r){return zh(t,e,"",r)}s(y4,"TransformEncode");d();function Nxt(t,e){return To(t)||Yc(t.items,e)}s(Nxt,"FromArray");function Lxt(t,e){return To(t)||Yc(t.items,e)}s(Lxt,"FromAsyncIterator");function Mxt(t,e){return To(t)||Yc(t.returns,e)||t.parameters.some(r=>Yc(r,e))}s(Mxt,"FromConstructor");function Fxt(t,e){return To(t)||Yc(t.returns,e)||t.parameters.some(r=>Yc(r,e))}s(Fxt,"FromFunction");function Oxt(t,e){return To(t)||To(t.unevaluatedProperties)||t.allOf.some(r=>Yc(r,e))}s(Oxt,"FromIntersect");function Qxt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return To(t)||Yc(n,[...r,...e])}s(Qxt,"FromImport");function Uxt(t,e){return To(t)||Yc(t.items,e)}s(Uxt,"FromIterator");function qxt(t,e){return To(t)||Yc(t.not,e)}s(qxt,"FromNot");function Hxt(t,e){return To(t)||Object.values(t.properties).some(r=>Yc(r,e))||sa(t.additionalProperties)&&Yc(t.additionalProperties,e)}s(Hxt,"FromObject");function Wxt(t,e){return To(t)||Yc(t.item,e)}s(Wxt,"FromPromise");function Gxt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return To(t)||Yc(n,e)||sa(t.additionalProperties)&&To(t.additionalProperties)}s(Gxt,"FromRecord");function jxt(t,e){return To(t)?!0:Yc(fo(t,e),e)}s(jxt,"FromRef");function Vxt(t,e){return To(t)?!0:Yc(fo(t,e),e)}s(Vxt,"FromThis");function $xt(t,e){return To(t)||!Ns(t.items)&&t.items.some(r=>Yc(r,e))}s($xt,"FromTuple");function zxt(t,e){return To(t)||t.anyOf.some(r=>Yc(r,e))}s(zxt,"FromUnion");function Yc(t,e){let r=yl(t,e),n=t;if(t.$id&&Yce.has(t.$id))return!1;switch(t.$id&&Yce.add(t.$id),t[et]){case"Array":return Nxt(n,r);case"AsyncIterator":return Lxt(n,r);case"Constructor":return Mxt(n,r);case"Function":return Fxt(n,r);case"Import":return Qxt(n,r);case"Intersect":return Oxt(n,r);case"Iterator":return Uxt(n,r);case"Not":return qxt(n,r);case"Object":return Hxt(n,r);case"Promise":return Wxt(n,r);case"Record":return Gxt(n,r);case"Ref":return jxt(n,r);case"This":return Vxt(n,r);case"Tuple":return $xt(n,r);case"Union":return zxt(n,r);default:return To(t)}}s(Yc,"Visit");var Yce=new Set;function O1(t,e){return Yce.clear(),Yc(t,e)}s(O1,"HasTransform");var Kce=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=O1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return ty(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new h4(this.schema,e,this.Errors(e).First());return this.hasTransform?g4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?y4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new A4(this.schema,e,this.Errors(e).First());return r}},Q1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(Q1||(Q1={}));var tW;(function(t){function e(o){return o.length===0?!1:Q1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(Q1.IsAlpha(c)||Q1.IsNumeric(c)||Q1.DollarSign(c)||Q1.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(tW||(tW={}));var Jce;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);Q1.IsNumeric(o)||Q1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(Jce||(Jce={}));var Xce;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(Xce||(Xce={}));var Zce=class extends bn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},rW=class extends bn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},S_;(function(t){function e(a,c,l){return ys.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${tW.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return ys.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return ys.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return ys.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return ys.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(S_||(S_={}));var Fs;(function(t){function e(le){return le[et]==="Any"||le[et]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(le,Ue,ye){yield"true"}s(r,"FromAny");function*n(le,Ue,ye){yield"true"}s(n,"FromArgument");function*i(le,Ue,ye){yield`Array.isArray(${ye})`;let[nt,ee]=[Fe("value","any"),Fe("acc","number")];Vr(le.maxItems)&&(yield`${ye}.length <= ${le.maxItems}`),Vr(le.minItems)&&(yield`${ye}.length >= ${le.minItems}`);let oe=he(le.items,Ue,"value");if(yield`${ye}.every((${nt}) => ${oe})`,Ms(le.contains)||Vr(le.minContains)||Vr(le.maxContains)){let We=Ms(le.contains)?le.contains:mi(),De=he(We,Ue,"value"),xe=Vr(le.minContains)?[`(count >= ${le.minContains})`]:[],Ye=Vr(le.maxContains)?[`(count <= ${le.maxContains})`]:[],st=`const count = value.reduce((${ee}, ${nt}) => ${De} ? acc + 1 : acc, 0)`,yt=["(count > 0)",...xe,...Ye].join(" && ");yield`((${nt}) => { ${st}; return ${yt}})(${ye})`}le.uniqueItems===!0&&(yield`((${nt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(le,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(le,Ue,ye){yield`(typeof ${ye} === 'bigint')`,Xl(le.exclusiveMaximum)&&(yield`${ye} < BigInt(${le.exclusiveMaximum})`),Xl(le.exclusiveMinimum)&&(yield`${ye} > BigInt(${le.exclusiveMinimum})`),Xl(le.maximum)&&(yield`${ye} <= BigInt(${le.maximum})`),Xl(le.minimum)&&(yield`${ye} >= BigInt(${le.minimum})`),Xl(le.multipleOf)&&(yield`(${ye} % BigInt(${le.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(le,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(le,Ue,ye){yield*ne(le.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(le,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Vr(le.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${le.exclusiveMaximumTimestamp}`),Vr(le.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${le.exclusiveMinimumTimestamp}`),Vr(le.maximumTimestamp)&&(yield`${ye}.getTime() <= ${le.maximumTimestamp}`),Vr(le.minimumTimestamp)&&(yield`${ye}.getTime() >= ${le.minimumTimestamp}`),Vr(le.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${le.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(le,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(le,Ue,ye){let nt=globalThis.Object.getOwnPropertyNames(le.$defs).reduce((ee,oe)=>[...ee,le.$defs[oe]],[]);yield*ne(zp(le.$ref),[...Ue,...nt],ye)}s(p,"FromImport");function*m(le,Ue,ye){yield`Number.isInteger(${ye})`,Vr(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),Vr(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),Vr(le.maximum)&&(yield`${ye} <= ${le.maximum}`),Vr(le.minimum)&&(yield`${ye} >= ${le.minimum}`),Vr(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(m,"FromInteger");function*h(le,Ue,ye){let nt=le.allOf.map(ee=>he(ee,Ue,ye)).join(" && ");if(le.unevaluatedProperties===!1){let ee=ke(`${new RegExp(L1(le))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.test(key))`;yield`(${nt} && ${oe})`}else if(Ms(le.unevaluatedProperties)){let ee=ke(`${new RegExp(L1(le))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.test(key) || ${he(le.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${nt} && ${oe})`}else yield`(${nt})`}s(h,"FromIntersect");function*g(le,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(le,Ue,ye){typeof le.const=="number"||typeof le.const=="boolean"?yield`(${ye} === ${le.const})`:yield`(${ye} === '${Xce.Escape(le.const)}')`}s(y,"FromLiteral");function*E(le,Ue,ye){yield"false"}s(E,"FromNever");function*x(le,Ue,ye){yield`(!${he(le.not,Ue,ye)})`}s(x,"FromNot");function*b(le,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*_(le,Ue,ye){yield S_.IsNumberLike(ye),Vr(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),Vr(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),Vr(le.maximum)&&(yield`${ye} <= ${le.maximum}`),Vr(le.minimum)&&(yield`${ye} >= ${le.minimum}`),Vr(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(_,"FromNumber");function*k(le,Ue,ye){yield S_.IsObjectLike(ye),Vr(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),Vr(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let nt=Object.getOwnPropertyNames(le.properties);for(let ee of nt){let oe=tW.Encode(ye,ee),We=le.properties[ee];if(le.required&&le.required.includes(ee))yield*ne(We,Ue,oe),(M1(We)||e(We))&&(yield`('${ee}' in ${ye})`);else{let De=he(We,Ue,oe);yield S_.IsExactOptionalProperty(ye,ee,De)}}if(le.additionalProperties===!1)if(le.required&&le.required.length===nt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${nt.length}`;else{let ee=`[${nt.map(oe=>`'${oe}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.includes(key))`}if(typeof le.additionalProperties=="object"){let ee=he(le.additionalProperties,Ue,`${ye}[key]`),oe=`[${nt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${oe}.includes(key) || ${ee}))`}}s(k,"FromObject");function*P(le,Ue,ye){yield`${ye} instanceof Promise`}s(P,"FromPromise");function*N(le,Ue,ye){yield S_.IsRecordLike(ye),Vr(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),Vr(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let[nt,ee]=Object.entries(le.patternProperties)[0],oe=ke(`${new RegExp(nt)}`),We=he(ee,Ue,"value"),De=Ms(le.additionalProperties)?he(le.additionalProperties,Ue,ye):le.additionalProperties===!1?"false":"true",xe=`(${oe}.test(key) ? ${We} : ${De})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(N,"FromRecord");function*M(le,Ue,ye){let nt=fo(le,Ue);if(me.functions.has(le.$ref))return yield`${Qe(le.$ref)}(${ye})`;yield*ne(nt,Ue,ye)}s(M,"FromRef");function*J(le,Ue,ye){let nt=ke(`${new RegExp(le.source,le.flags)};`);yield`(typeof ${ye} === 'string')`,Vr(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),Vr(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),yield`${nt}.test(${ye})`}s(J,"FromRegExp");function*pe(le,Ue,ye){yield`(typeof ${ye} === 'string')`,Vr(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),Vr(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),le.pattern!==void 0&&(yield`${ke(`${new RegExp(le.pattern)};`)}.test(${ye})`),le.format!==void 0&&(yield`format('${le.format}', ${ye})`)}s(pe,"FromString");function*Y(le,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(Y,"FromSymbol");function*G(le,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${ke(`${new RegExp(le.pattern)};`)}.test(${ye})`}s(G,"FromTemplateLiteral");function*H(le,Ue,ye){yield`${Qe(le.$ref)}(${ye})`}s(H,"FromThis");function*ce(le,Ue,ye){if(yield`Array.isArray(${ye})`,le.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${le.maxItems})`;for(let nt=0;nt<le.items.length;nt++)yield`${he(le.items[nt],Ue,`${ye}[${nt}]`)}`}s(ce,"FromTuple");function*ie(le,Ue,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*V(le,Ue,ye){yield`(${le.anyOf.map(ee=>he(ee,Ue,ye)).join(" || ")})`}s(V,"FromUnion");function*Q(le,Ue,ye){yield`${ye} instanceof Uint8Array`,Vr(le.maxByteLength)&&(yield`(${ye}.length <= ${le.maxByteLength})`),Vr(le.minByteLength)&&(yield`(${ye}.length >= ${le.minByteLength})`)}s(Q,"FromUint8Array");function*z(le,Ue,ye){yield"true"}s(z,"FromUnknown");function*re(le,Ue,ye){yield S_.IsVoidLike(ye)}s(re,"FromVoid");function*fe(le,Ue,ye){let nt=me.instances.size;me.instances.set(nt,le),yield`kind('${le[et]}', ${nt}, ${ye})`}s(fe,"FromKind");function*ne(le,Ue,ye,nt=!0){let ee=ro(le.$id)?[...Ue,le]:Ue,oe=le;if(nt&&ro(le.$id)){let We=Qe(le.$id);if(me.functions.has(We))return yield`${We}(${ye})`;{me.functions.set(We,"<deferred>");let De=tt(We,le,Ue,"value",!1);return me.functions.set(We,De),yield`${We}(${ye})`}}switch(oe[et]){case"Any":return yield*r(oe,ee,ye);case"Argument":return yield*n(oe,ee,ye);case"Array":return yield*i(oe,ee,ye);case"AsyncIterator":return yield*o(oe,ee,ye);case"BigInt":return yield*a(oe,ee,ye);case"Boolean":return yield*c(oe,ee,ye);case"Constructor":return yield*l(oe,ee,ye);case"Date":return yield*u(oe,ee,ye);case"Function":return yield*f(oe,ee,ye);case"Import":return yield*p(oe,ee,ye);case"Integer":return yield*m(oe,ee,ye);case"Intersect":return yield*h(oe,ee,ye);case"Iterator":return yield*g(oe,ee,ye);case"Literal":return yield*y(oe,ee,ye);case"Never":return yield*E(oe,ee,ye);case"Not":return yield*x(oe,ee,ye);case"Null":return yield*b(oe,ee,ye);case"Number":return yield*_(oe,ee,ye);case"Object":return yield*k(oe,ee,ye);case"Promise":return yield*P(oe,ee,ye);case"Record":return yield*N(oe,ee,ye);case"Ref":return yield*M(oe,ee,ye);case"RegExp":return yield*J(oe,ee,ye);case"String":return yield*pe(oe,ee,ye);case"Symbol":return yield*Y(oe,ee,ye);case"TemplateLiteral":return yield*G(oe,ee,ye);case"This":return yield*H(oe,ee,ye);case"Tuple":return yield*ce(oe,ee,ye);case"Undefined":return yield*ie(oe,ee,ye);case"Union":return yield*V(oe,ee,ye);case"Uint8Array":return yield*Q(oe,ee,ye);case"Unknown":return yield*z(oe,ee,ye);case"Void":return yield*re(oe,ee,ye);default:if(!Ed.Has(oe[et]))throw new Zce(le);return yield*fe(oe,ee,ye)}}s(ne,"Visit");let me={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(le,Ue,ye,nt=!0){return`(${[...ne(le,Ue,ye,nt)].join(" && ")})`}s(he,"CreateExpression");function Qe(le){return`check_${Jce.Encode(le)}`}s(Qe,"CreateFunctionName");function ke(le){let Ue=`local_${me.variables.size}`;return me.variables.set(Ue,`const ${Ue} = ${le}`),Ue}s(ke,"CreateVariable");function tt(le,Ue,ye,nt,ee=!0){let[oe,We]=[`
`,st=>"".padStart(st," ")],De=Fe("value","any"),xe=ht("boolean"),Ye=[...ne(Ue,ye,nt,ee)].map(st=>`${We(4)}${st}`).join(` &&${oe}`);return`function ${le}(${De})${xe} {${oe}${We(2)}return (${oe}${Ye}${oe}${We(2)})
}`}s(tt,"CreateFunction");function Fe(le,Ue){let ye=me.language==="typescript"?`: ${Ue}`:"";return`${le}${ye}`}s(Fe,"CreateParameter");function ht(le){return me.language==="typescript"?`: ${le}`:""}s(ht,"CreateReturns");function St(le,Ue,ye){let nt=tt("check",le,Ue,"value"),ee=Fe("value","any"),oe=ht("boolean"),We=[...me.functions.values()],De=[...me.variables.values()],xe=ro(le.$id)?`return function check(${ee})${oe} {
  return ${Qe(le.$id)}(value)
}`:`return ${nt}`;return[...De,...We,xe].join(`
`)}s(St,"Build");function xt(...le){let Ue={language:"javascript"},[ye,nt,ee]=le.length===2&&xn(le[1])?[le[0],le[1],Ue]:le.length===2&&!xn(le[1])?[le[0],[],le[1]]:le.length===3?[le[0],le[1],le[2]]:le.length===1?[le[0],[],Ue]:[null,[],Ue];if(me.language=ee.language,me.variables.clear(),me.functions.clear(),me.instances.clear(),!Ms(ye))throw new rW(ye);for(let oe of nt)if(!Ms(oe))throw new rW(oe);return St(ye,nt,ee)}s(xt,"Code"),t.Code=xt;function Tt(le,Ue=[]){let ye=xt(le,Ue,{language:"javascript"}),nt=globalThis.Function("kind","format","hash",ye),ee=new Map(me.instances);function oe(Ye,st,yt){if(!Ed.Has(Ye)||!ee.has(st))return!1;let qt=Ed.Get(Ye),dr=ee.get(st);return qt(dr,yt)}s(oe,"typeRegistryFunction");function We(Ye,st){return Wh.Has(Ye)?Wh.Get(Ye)(st):!1}s(We,"formatRegistryFunction");function De(Ye){return fb(Ye)}s(De,"hashFunction");let xe=nt(oe,We,De);return new Kce(le,Ue,xe,ye)}s(Tt,"Compile"),t.Compile=Tt})(Fs||(Fs={}));var jW=Ne(nb());d();d();var tu=[];for(let t=0;t<256;++t)tu.push((t+256).toString(16).slice(1));function P4e(t,e=0){return(tu[t[e+0]]+tu[t[e+1]]+tu[t[e+2]]+tu[t[e+3]]+"-"+tu[t[e+4]]+tu[t[e+5]]+"-"+tu[t[e+6]]+tu[t[e+7]]+"-"+tu[t[e+8]]+tu[t[e+9]]+"-"+tu[t[e+10]]+tu[t[e+11]]+tu[t[e+12]]+tu[t[e+13]]+tu[t[e+14]]+tu[t[e+15]]).toLowerCase()}s(P4e,"unsafeStringify");d();var B4e=require("crypto");var iW=new Uint8Array(256),nW=iW.length;function ele(){return nW>iW.length-16&&((0,B4e.randomFillSync)(iW),nW=0),iW.slice(nW,nW+=16)}s(ele,"rng");d();d();var D4e=require("crypto"),tle={randomUUID:D4e.randomUUID};function Yxt(t,e,r){if(tle.randomUUID&&!e&&!t)return tle.randomUUID();t=t||{};let n=t.random??t.rng?.()??ele();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return P4e(n)}s(Yxt,"v4");var cr=Yxt;var VW=Ne(di());function O4(t){return t===1}s(O4,"isRestricted");var Zbt=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],K6=8192,eIt=21;var xl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return O4(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(U4(e))return this.reporterRestricted;if(jk(e))return new x6}getFTReporter(e){if(lDe(e))return this.reporterFT;if(jk(e))return new x6}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},tIt=I.Object({},{additionalProperties:I.String()}),rIt=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),nIt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function iIt(t){return nIt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(iIt,"isOomError");function oIt(t){return E6(t)?"network":iIt(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(oIt,"getErrorType");var Dr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Fs.Compile(tIt)}static{this.validateTelemetryMeasurements=Fs.Compile(rIt)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},la())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=la())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Bt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=zA(e.get(nn).getEditorInfo()),this.properties.editor_plugin_version=zA(e.get(nn).getEditorPluginInfo());let r=e.get(As);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${N_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(nn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=zA(n.getEditorInfo());let i=e.get(jn);this.properties.fetcher=i.name;let o=e.get(nu).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=mDe(e);r["copilot.build"]=hDe(e),r["copilot.buildType"]=sy(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(O4(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>K6){let a=0,c=0;for(;o>0&&c<eIt;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+K6;o<K6&&(u=a+o),r[l]=i.slice(a,u),o-=K6,a+=K6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=cIt(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(jk(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return Jh(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),O4(r)&&Jh(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,uDe(e))}},oy=class t extends Dr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new g_({}),exp:Up.createEmptyConfig()})}};function J6(t,e,r,n){t.get(xl).getReporter(t,e)?.sendTelemetryEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(J6,"sendTelemetryEvent");function sIt(t,e,r,n){t.get(xl).getReporter(t,e)?.sendTelemetryErrorEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(sIt,"sendTelemetryErrorEvent");function aIt(t,e,r,n){t.get(xl).getFTReporter(t)?.sendTelemetryEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(aIt,"sendFTTelemetryEvent");function Q4(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(Q4,"telemetrizePromptLength");function la(){return performance.now()}s(la,"now");function cIt(t){return Math.floor(t/1e3)}s(cIt,"nowSeconds");function U4(t){return t.get(Jl).optedIn}s(U4,"shouldSendRestricted");function lDe(t){return t.get(Jl).ftFlag!==""}s(lDe,"shouldSendFinetuningTelemetry");function Rt(t,e,r,n){return t.get(Za).register(lIt(t,e,la(),r?.extendedBy(),n))}s(Rt,"telemetry");async function lIt(t,e,r,n,i=0){let o=n||Dr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!O4(i)||U4(t))&&J6(t,i,e,o),O4(i)&&Zbt.includes(e)&&lDe(t)&&aIt(t,i,e,o)}s(lIt,"_telemetry");function Fq(t,e){return t.get(Za).register(uIt(t,e,la()))}s(Fq,"telemetryExpProblem");async function uIt(t,e,r){let n="expProblem",i=Dr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),J6(t,0,n,i)}s(uIt,"_telemetryExpProblem");function kue(t,e,r,n){return t.get(Za).register(dIt(t,e,r,n))}s(kue,"telemetryRaw");async function dIt(t,e,r,n){let i={...r,...uDe(t)};J6(t,0,e,{properties:i,measurements:n})}s(dIt,"_telemetryRaw");function uDe(t){let e=t.get(nn),r={unique_id:cr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:zA(e.getEditorInfo())},n=t.get(Jl);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(uDe,"createRequiredProperties");var Rue=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,jW.SHA256)(jW.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ia(t,e,r,n,i){return t.get(Za).register(dDe(t,e,la(),r,{...n},i))}s(Ia,"telemetryException");async function dDe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Nu(a)||a instanceof Bs||a instanceof VW.ConnectionError||a instanceof VW.ResponseError)return}else{if(a=new Rue(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let c=t.get(nn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=U4(t),f=p5e(a,l,u),p=oIt(a),m=p==="exception",h=Dr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=ice(y.value):y.value="[redacted]");if(o??=t5e(t,f),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=f5e(a,l),E=Dr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(E.properties.errno=o.rollup_id),await E.makeReadyForSending(t,1,"IncludeExp",r),E.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=E.properties.unique_id,J6(t,1,`error.${p}`,E)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(YA).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),J6(t,0,`error.${p}`,h)}s(dDe,"_telemetryException");function Wu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await dDe(t,a,la(),r,n)}},"wrapped");return(...o)=>t.get(Za).register(i(...o))}s(Wu,"telemetryCatch");function Jh(t,e,r,n){return t.get(Za).register(fIt(t,e,la(),r?.extendedBy(),n))}s(Jh,"telemetryError");async function fIt(t,e,r,n,i=0){if(O4(i)&&!U4(t))return;let o=n||Dr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),sIt(t,i,e,o)}s(fIt,"_telemetryError");function fDe(t,e,r,n,i){let o=Dr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Rt(t,"engine.completion",o,1)}s(fDe,"logEngineCompletion");function pDe(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Rt(t,"engine.prompt",i,1)}s(pDe,"logEnginePrompt");d();d();var gDe=Ne(di()),ADe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Pue;(r=>(r.method="github/didChangeAuth",r.type=new gDe.ProtocolNotificationType(r.method)))(Pue||={});d();var yDe=Ne(di()),Bue;(r=>(r.method="copilot/ipCodeCitation",r.type=new yDe.NotificationType(r.method)))(Bue||={});d();var CDe=Ne(di()),$W;(r=>(r.method="context/update",r.type=new CDe.ProtocolRequestType(r.method)))($W||={});d();d();var bb="Cancelled";d();var In=Ne(di()),X6=I.String(),Cf=I.Object({uri:X6}),L_=I.Intersect([Cf,I.Object({version:I.Optional(I.Integer())})]),E6r=I.Required(L_),bl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),nc=I.Object({start:bl,end:bl}),Due=I.Union([I.Integer(),I.String()]),v6r=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});d();var EDe=Ne(di()),Nue;(r=>(r.method="textDocument/didFocus",r.type=new EDe.ProtocolNotificationType(r.method)))(Nue||={});d();var pIt=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),mIt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),vDe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),xDe=I.Object({editorInfo:I.Optional(vDe),editorPluginInfo:I.Optional(vDe),relatedPluginInfo:I.Optional(I.Array(mIt)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(pIt)),githubAppId:I.Optional(I.String())});d();var Z6=Ne(di());var zW=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(zW||{}),hIt=I.Enum(zW),gIt=I.Object({triggerKind:hIt,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:nc,tooltipSignature:I.Optional(I.String())}))}),bDe=I.Object({textDocument:L_,position:bl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:gIt,data:I.Optional(I.Unknown())}),Lue;(r=>(r.method="textDocument/inlineCompletion",r.type=new Z6.ProtocolRequestType(r.method)))(Lue||={});var IDe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),TDe=I.Object({item:IDe}),Mue;(r=>(r.method="textDocument/didShowCompletion",r.type=new Z6.ProtocolNotificationType(r.method)))(Mue||={});var wDe=I.Object({item:IDe,acceptedLength:I.Integer({minimum:1})}),Fue;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new Z6.ProtocolNotificationType(r.method)))(Fue||={});d();var _De=Ne(di()),Oue;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new _De.ProtocolRequestType(r.method)))(Oue||={});d();var SDe=Ne(di()),RDe=I.Object({textDocument:L_,position:bl}),AIt=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),kDe=I.Object({item:AIt}),Que;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new SDe.ProtocolNotificationType(r.method)))(Que||={});d();var YW=Ne(di());var PDe=I.Object({textDocument:L_,position:bl,partialResultToken:I.Optional(Due),workDoneToken:I.Optional(Due)}),KW;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new YW.ProtocolRequestType(n.method),n.partialResult=new YW.ProgressType))(KW||={});d();var BDe=Ne(di()),Uue;(r=>(r.method="copilot/related",r.type=new BDe.ProtocolRequestType(r.method)))(Uue||={});d();var DDe=Ne(di()),que;(r=>(r.method="statusNotification",r.type=new DDe.ProtocolNotificationType(r.method)))(que||={});var NDe=Ne(require("events"));var Xh=class{static{s(this,"CopilotTokenNotifier")}#e=new NDe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=Wu(e,n,`event.${r}`);return this.#e.on(r,i),In.Disposable.create(()=>this.#e.off(r,i))}};function ia(t,e){return t.get(Xh).on(t,"CopilotToken",e)}s(ia,"onCopilotToken");function e9(t,e){return t.get(Xh).emitToken(e)}s(e9,"emitCopilotToken");function JW(t){return t.get(Xh).lastToken}s(JW,"getLastCopilotToken");d();var XW=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function Hue(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(Hue,"findKnownOrg");function LDe(t){let e=t.organization_list??[];return Hue(e)??""}s(LDe,"getUserKind");d();d();var M_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(M_||{}),Tc=class{static{s(this,"LogTarget")}},ay=class{static{s(this,"TelemetryLogSender")}},vt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Tc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(ay).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(ay).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},fn=new vt("default");d();var wc=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};d();var iu=class{static{s(this,"UrlOpener")}};var yIt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],MDe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",FDe="https://gh.io/copilot-network-errors",xd=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&yIt.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new vt("certificates").error(e,`${MDe} Please visit ${FDe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(wc).showWarningMessage(MDe,n).then(i=>{if(i?.title===n.title)return e.get(iu).open(FDe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();d();function ZW(){return typeof process>"u"}s(ZW,"isWeb");function t9(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(t9,"isMsBenchModeEnabled");var Wue=class extends VA{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Zp(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...ZW()?{}:A0(t),...n.headers}};let i=await t.get(jn).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new VA(i);if(!i.headers.get("x-github-request-id"))throw new Wue(i);return i}s(Zp,"apiFetch");d();d();var UDe=require("os"),eG=require("path");d();var ODe;(()=>{"use strict";var t={975:G=>{function H(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(H,"e");function ce(V,Q){for(var z,re="",fe=0,ne=-1,me=0,he=0;he<=V.length;++he){if(he<V.length)z=V.charCodeAt(he);else{if(z===47)break;z=47}if(z===47){if(!(ne===he-1||me===1))if(ne!==he-1&&me===2){if(re.length<2||fe!==2||re.charCodeAt(re.length-1)!==46||re.charCodeAt(re.length-2)!==46){if(re.length>2){var Qe=re.lastIndexOf("/");if(Qe!==re.length-1){Qe===-1?(re="",fe=0):fe=(re=re.slice(0,Qe)).length-1-re.lastIndexOf("/"),ne=he,me=0;continue}}else if(re.length===2||re.length===1){re="",fe=0,ne=he,me=0;continue}}Q&&(re.length>0?re+="/..":re="..",fe=2)}else re.length>0?re+="/"+V.slice(ne+1,he):re=V.slice(ne+1,he),fe=he-ne-1;ne=he,me=0}else z===46&&me!==-1?++me:me=-1}return re}s(ce,"r");var ie={resolve:s(function(){for(var V,Q="",z=!1,re=arguments.length-1;re>=-1&&!z;re--){var fe;re>=0?fe=arguments[re]:(V===void 0&&(V=process.cwd()),fe=V),H(fe),fe.length!==0&&(Q=fe+"/"+Q,z=fe.charCodeAt(0)===47)}return Q=ce(Q,!z),z?Q.length>0?"/"+Q:"/":Q.length>0?Q:"."},"resolve"),normalize:s(function(V){if(H(V),V.length===0)return".";var Q=V.charCodeAt(0)===47,z=V.charCodeAt(V.length-1)===47;return(V=ce(V,!Q)).length!==0||Q||(V="."),V.length>0&&z&&(V+="/"),Q?"/"+V:V},"normalize"),isAbsolute:s(function(V){return H(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,Q=0;Q<arguments.length;++Q){var z=arguments[Q];H(z),z.length>0&&(V===void 0?V=z:V+="/"+z)}return V===void 0?".":ie.normalize(V)},"join"),relative:s(function(V,Q){if(H(V),H(Q),V===Q||(V=ie.resolve(V))===(Q=ie.resolve(Q)))return"";for(var z=1;z<V.length&&V.charCodeAt(z)===47;++z);for(var re=V.length,fe=re-z,ne=1;ne<Q.length&&Q.charCodeAt(ne)===47;++ne);for(var me=Q.length-ne,he=fe<me?fe:me,Qe=-1,ke=0;ke<=he;++ke){if(ke===he){if(me>he){if(Q.charCodeAt(ne+ke)===47)return Q.slice(ne+ke+1);if(ke===0)return Q.slice(ne+ke)}else fe>he&&(V.charCodeAt(z+ke)===47?Qe=ke:ke===0&&(Qe=0));break}var tt=V.charCodeAt(z+ke);if(tt!==Q.charCodeAt(ne+ke))break;tt===47&&(Qe=ke)}var Fe="";for(ke=z+Qe+1;ke<=re;++ke)ke!==re&&V.charCodeAt(ke)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+Q.slice(ne+Qe):(ne+=Qe,Q.charCodeAt(ne)===47&&++ne,Q.slice(ne))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(H(V),V.length===0)return".";for(var Q=V.charCodeAt(0),z=Q===47,re=-1,fe=!0,ne=V.length-1;ne>=1;--ne)if((Q=V.charCodeAt(ne))===47){if(!fe){re=ne;break}}else fe=!1;return re===-1?z?"/":".":z&&re===1?"//":V.slice(0,re)},"dirname"),basename:s(function(V,Q){if(Q!==void 0&&typeof Q!="string")throw new TypeError('"ext" argument must be a string');H(V);var z,re=0,fe=-1,ne=!0;if(Q!==void 0&&Q.length>0&&Q.length<=V.length){if(Q.length===V.length&&Q===V)return"";var me=Q.length-1,he=-1;for(z=V.length-1;z>=0;--z){var Qe=V.charCodeAt(z);if(Qe===47){if(!ne){re=z+1;break}}else he===-1&&(ne=!1,he=z+1),me>=0&&(Qe===Q.charCodeAt(me)?--me==-1&&(fe=z):(me=-1,fe=he))}return re===fe?fe=he:fe===-1&&(fe=V.length),V.slice(re,fe)}for(z=V.length-1;z>=0;--z)if(V.charCodeAt(z)===47){if(!ne){re=z+1;break}}else fe===-1&&(ne=!1,fe=z+1);return fe===-1?"":V.slice(re,fe)},"basename"),extname:s(function(V){H(V);for(var Q=-1,z=0,re=-1,fe=!0,ne=0,me=V.length-1;me>=0;--me){var he=V.charCodeAt(me);if(he!==47)re===-1&&(fe=!1,re=me+1),he===46?Q===-1?Q=me:ne!==1&&(ne=1):Q!==-1&&(ne=-1);else if(!fe){z=me+1;break}}return Q===-1||re===-1||ne===0||ne===1&&Q===re-1&&Q===z+1?"":V.slice(Q,re)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(Q,z){var re=z.dir||z.root,fe=z.base||(z.name||"")+(z.ext||"");return re?re===z.root?re+fe:re+"/"+fe:fe}(0,V)},"format"),parse:s(function(V){H(V);var Q={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return Q;var z,re=V.charCodeAt(0),fe=re===47;fe?(Q.root="/",z=1):z=0;for(var ne=-1,me=0,he=-1,Qe=!0,ke=V.length-1,tt=0;ke>=z;--ke)if((re=V.charCodeAt(ke))!==47)he===-1&&(Qe=!1,he=ke+1),re===46?ne===-1?ne=ke:tt!==1&&(tt=1):ne!==-1&&(tt=-1);else if(!Qe){me=ke+1;break}return ne===-1||he===-1||tt===0||tt===1&&ne===he-1&&ne===me+1?he!==-1&&(Q.base=Q.name=me===0&&fe?V.slice(1,he):V.slice(me,he)):(me===0&&fe?(Q.name=V.slice(1,ne),Q.base=V.slice(1,he)):(Q.name=V.slice(me,ne),Q.base=V.slice(me,he)),Q.ext=V.slice(ne,he)),me>0?Q.dir=V.slice(0,me-1):fe&&(Q.dir="/"),Q},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,G.exports=ie}},e={};function r(G){var H=e[G];if(H!==void 0)return H.exports;var ce=e[G]={exports:{}};return t[G](ce,ce.exports,r),ce.exports}s(r,"r"),r.d=(G,H)=>{for(var ce in H)r.o(H,ce)&&!r.o(G,ce)&&Object.defineProperty(G,ce,{enumerable:!0,get:H[ce]})},r.o=(G,H)=>Object.prototype.hasOwnProperty.call(G,H),r.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>Y,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(G,H){if(!G.scheme&&H)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${G.authority}", path: "${G.path}", query: "${G.query}", fragment: "${G.fragment}"}`);if(G.scheme&&!o.test(G.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(G.path){if(G.authority){if(!a.test(G.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(G.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(H){return H instanceof m||!!H&&typeof H.authority=="string"&&typeof H.fragment=="string"&&typeof H.path=="string"&&typeof H.query=="string"&&typeof H.scheme=="string"&&typeof H.fsPath=="string"&&typeof H.with=="function"&&typeof H.toString=="function"}scheme;authority;path;query;fragment;constructor(H,ce,ie,V,Q,z=!1){typeof H=="object"?(this.scheme=H.scheme||u,this.authority=H.authority||u,this.path=H.path||u,this.query=H.query||u,this.fragment=H.fragment||u):(this.scheme=function(re,fe){return re||fe?re:"file"}(H,z),this.authority=ce||u,this.path=function(re,fe){switch(re){case"https":case"http":case"file":fe?fe[0]!==f&&(fe=f+fe):fe=f}return fe}(this.scheme,ie||u),this.query=V||u,this.fragment=Q||u,l(this,z))}get fsPath(){return b(this,!1)}with(H){if(!H)return this;let{scheme:ce,authority:ie,path:V,query:Q,fragment:z}=H;return ce===void 0?ce=this.scheme:ce===null&&(ce=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),V===void 0?V=this.path:V===null&&(V=u),Q===void 0?Q=this.query:Q===null&&(Q=u),z===void 0?z=this.fragment:z===null&&(z=u),ce===this.scheme&&ie===this.authority&&V===this.path&&Q===this.query&&z===this.fragment?this:new g(ce,ie,V,Q,z)}static parse(H,ce=!1){let ie=p.exec(H);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),ce):new g(u,u,u,u,u)}static file(H){let ce=u;if(i&&(H=H.replace(/\\/g,f)),H[0]===f&&H[1]===f){let ie=H.indexOf(f,2);ie===-1?(ce=H.substring(2),H=f):(ce=H.substring(2,ie),H=H.substring(ie)||f)}return new g("file",ce,H,u,u)}static from(H){let ce=new g(H.scheme,H.authority,H.path,H.query,H.fragment);return l(ce,!0),ce}toString(H=!1){return _(this,H)}toJSON(){return this}static revive(H){if(H){if(H instanceof m)return H;{let ce=new g(H);return ce._formatted=H.external,ce._fsPath=H._sep===h?H.fsPath:null,ce}}return H}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(H=!1){return H?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let H={$mid:1};return this._fsPath&&(H.fsPath=this._fsPath,H._sep=h),this._formatted&&(H.external=this._formatted),this.path&&(H.path=this.path),this.scheme&&(H.scheme=this.scheme),this.authority&&(H.authority=this.authority),this.query&&(H.query=this.query),this.fragment&&(H.fragment=this.fragment),H}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function E(G,H,ce){let ie,V=-1;for(let Q=0;Q<G.length;Q++){let z=G.charCodeAt(Q);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||H&&z===47||ce&&z===91||ce&&z===93||ce&&z===58)V!==-1&&(ie+=encodeURIComponent(G.substring(V,Q)),V=-1),ie!==void 0&&(ie+=G.charAt(Q));else{ie===void 0&&(ie=G.substr(0,Q));let re=y[z];re!==void 0?(V!==-1&&(ie+=encodeURIComponent(G.substring(V,Q)),V=-1),ie+=re):V===-1&&(V=Q)}}return V!==-1&&(ie+=encodeURIComponent(G.substring(V))),ie!==void 0?ie:G}s(E,"m");function x(G){let H;for(let ce=0;ce<G.length;ce++){let ie=G.charCodeAt(ce);ie===35||ie===63?(H===void 0&&(H=G.substr(0,ce)),H+=y[ie]):H!==void 0&&(H+=G[ce])}return H!==void 0?H:G}s(x,"y");function b(G,H){let ce;return ce=G.authority&&G.path.length>1&&G.scheme==="file"?`//${G.authority}${G.path}`:G.path.charCodeAt(0)===47&&(G.path.charCodeAt(1)>=65&&G.path.charCodeAt(1)<=90||G.path.charCodeAt(1)>=97&&G.path.charCodeAt(1)<=122)&&G.path.charCodeAt(2)===58?H?G.path.substr(1):G.path[1].toLowerCase()+G.path.substr(2):G.path,i&&(ce=ce.replace(/\//g,"\\")),ce}s(b,"v");function _(G,H){let ce=H?x:E,ie="",{scheme:V,authority:Q,path:z,query:re,fragment:fe}=G;if(V&&(ie+=V,ie+=":"),(Q||V==="file")&&(ie+=f,ie+=f),Q){let ne=Q.indexOf("@");if(ne!==-1){let me=Q.substr(0,ne);Q=Q.substr(ne+1),ne=me.lastIndexOf(":"),ne===-1?ie+=ce(me,!1,!1):(ie+=ce(me.substr(0,ne),!1,!1),ie+=":",ie+=ce(me.substr(ne+1),!1,!0)),ie+="@"}Q=Q.toLowerCase(),ne=Q.lastIndexOf(":"),ne===-1?ie+=ce(Q,!1,!0):(ie+=ce(Q.substr(0,ne),!1,!0),ie+=Q.substr(ne))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58){let ne=z.charCodeAt(1);ne>=65&&ne<=90&&(z=`/${String.fromCharCode(ne+32)}:${z.substr(3)}`)}else if(z.length>=2&&z.charCodeAt(1)===58){let ne=z.charCodeAt(0);ne>=65&&ne<=90&&(z=`${String.fromCharCode(ne+32)}:${z.substr(2)}`)}ie+=ce(z,!0,!1)}return re&&(ie+="?",ie+=ce(re,!1,!1)),fe&&(ie+="#",ie+=H?fe:E(fe,!1,!1)),ie}s(_,"b");function k(G){try{return decodeURIComponent(G)}catch{return G.length>3?G.substr(0,3)+k(G.substr(3)):G}}s(k,"C");let P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(G){return G.match(P)?G.replace(P,H=>k(H)):G}s(N,"w");var M=r(975);let J=M.posix||M,pe="/";var Y;(function(G){G.joinPath=function(H,...ce){return H.with({path:J.join(H.path,...ce)})},G.resolvePath=function(H,...ce){let ie=H.path,V=!1;ie[0]!==pe&&(ie=pe+ie,V=!0);let Q=J.resolve(ie,...ce);return V&&Q[0]===pe&&!H.authority&&(Q=Q.substring(1)),H.with({path:Q})},G.dirname=function(H){if(H.path.length===0||H.path===pe)return H;let ce=J.dirname(H.path);return ce.length===1&&ce.charCodeAt(0)===46&&(ce=""),H.with({path:ce})},G.basename=function(H){return J.basename(H.path)},G.extname=function(H){return J.extname(H.path)}})(Y||(Y={})),ODe=n})();var{URI:Ib,Utils:r9}=ODe;function qDe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+qDe(t.substring(3)):t}}s(qDe,"decodeURIComponentGraceful");var QDe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Gue(t){return t.match(QDe)?t.replace(QDe,e=>qDe(e)):t}s(Gue,"percentDecode");function Kc(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Ib.file(t).toString()}s(Kc,"makeFsUri");function F_(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Ib.parse(e[1]+e[2],!0):Ib.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(F_,"parseUri");function tG(t){return F_(t),t}s(tG,"validateUri");function Jc(t){try{return F_(t).toString()}catch{return t}}s(Jc,"normalizeUri");var HDe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function La(t){let e=F_(t);if(!HDe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,UDe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,eG.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(La,"fsPath");function ls(t){try{return La(t)}catch{return}}s(ls,"getFsPath");function WDe(t){let e=ls(t);if(e)return Ib.file(e).toString()}s(WDe,"getFsUri");function O_(t,...e){let r,n=ls(t);return n?r=Kc((0,eG.resolve)(n,...e)):r=r9.resolvePath(F_(t),...e.map(i=>GDe(i))).toString(),typeof t=="string"?r:{uri:r}}s(O_,"resolveFilePath");function Lo(t,...e){let r=r9.joinPath(F_(t),...e.map(GDe)).toString();return typeof t=="string"?r:{uri:r}}s(Lo,"joinPath");function GDe(t){return CIt(t)?t.replaceAll("\\","/"):t}s(GDe,"pathToURIPath");function CIt(t){return/^[^/\\]*\\/.test(t)}s(CIt,"isWinPath");function Oi(t){return Gue((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Oi,"basename");function Gu(t){let e=r9.dirname(F_(t)),r;return HDe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(Gu,"dirname");function jDe(t){return r9.extname(F_(t))}s(jDe,"extname");var bd=class{static{s(this,"NetworkConfiguration")}};function rG(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!Vue(t)&&r.protocol==="http:")return r.href}catch{}}s(rG,"ensurePermittedUrl");var Q_={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function jue(t,e,r){if(r&&Lh(t)){for(let n of r){let i=vi(t,n);if(i)return i}return}for(let n of e){let i=vi(t,n);if(i)return i}}s(jue,"urlConfigOverride");function EIt(t,e){switch(e){case"api":return jue(t,[kt.DebugOverrideCapiUrl,kt.DebugOverrideCapiUrlLegacy],[kt.DebugTestOverrideCapiUrl,kt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return jue(t,[kt.DebugOverrideProxyUrl,kt.DebugOverrideProxyUrlLegacy],[kt.DebugTestOverrideProxyUrl,kt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Vue(t))return jue(t,[kt.DebugSnippyOverrideUrl])}}s(EIt,"getEndpointOverrideUrl");function cy(t,e,r,...n){let i=EIt(t,r)??e.endpoints[r];return Lo(i,...n)}s(cy,"getEndpointUrl");function q4(t){return JW(t)?.endpoints??Q_}s(q4,"getLastKnownEndpoints");function VDe(t,e){if(e&&!rG(t,e)){t.get(wc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(bd).setConfiguredUrls(t,{serverUrl:e})}s(VDe,"updateServerUrl");var S0=new vt("auth"),YDe=60;function Tb(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Tb,"fillGitHubUrls");function $De(){return Math.floor(Date.now()/1e3)}s($De,"nowSeconds");async function nG(t,e){let r=Dr.createAndMarkAsIssued({},{});Rt(t,"auth.new_login");let n=await vIt(t,e),i=await n.json(),o=i.user_notification;if(zDe(t,o,e),n.status===401){let f="Failed to get copilot token due to 401 status. Please sign out and try again.";return S0.info(t,f),Jh(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:f,envelope:i}}if(!n.ok||!i.token){S0.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),Jh(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let f=i.error_details;return f?.notification_id!=="not_signed_up"&&zDe(t,f,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...f}}let a=i.expires_at;i.expires_at=$De()+i.refresh_in+YDe;let c=await $ue(t,e),l;c.ok&&(l=await c.json());let u=new U_(i,l);return e9(t,u),Rt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:$De()})),{kind:"success",copilotToken:u}}s(nG,"authFromGitHubSession");async function vIt(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Zp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(xd).notifyUser(t,i),i}}s(vIt,"fetchCopilotToken");async function $ue(t,e){let r={"X-GitHub-Api-Version":$A},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Zp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(xd).notifyUser(t,i),i}}s($ue,"fetchCopilotUserInfo");function zDe(t,e,r){e&&t.get(wc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(nn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(iu).open(c)}e.notification_id&&o&&await xIt(t,e.notification_id,r)}).catch(n=>{S0.exception(t,n,"copilotToken.notification")})}s(zDe,"notifyUser");async function xIt(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Zp(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&S0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(xIt,"sendNotificationResultToGitHub");var U_=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new XW(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??Q_}needsRefresh(){return(this.envelope.expires_at-YDe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return Hue(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};d();d();var n9="apps",zue="hosts",q_=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(n9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=Zh,i=await this.persistenceManager.read(n9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Il).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(zue,e);if(r)return{...r,githubAppId:Zh}}async saveAuthRecord(e){await this.persistenceManager.update(n9,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===Zh&&await this.persistenceManager.delete(zue,r),await this.persistenceManager.delete(n9,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(n9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:Zh})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(zue)}authRecordKey(e,r){let n=r.githubAppId??e.get(Il).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();var eNe=Ne(JDe()),tNe=Ne(ZDe()),R0=Ne(require("os"));var H4=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(jn).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{fn.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new tNe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[eNe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=bIt(e),this.commonProperties=IIt(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function bIt(t){let e={},r=t.get(As);e["ai.session.id"]=r.sessionId;let n=t.get(Jl);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${R0.type()} ${R0.release()}`,e["ai.device.osArchitecture"]=R0.arch(),e["ai.device.osPlatform"]=R0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(lo).getVersion(),e}s(bIt,"getTags");function IIt(t){let e={};e.common_os=R0.platform(),e.common_platformversion=R0.release(),e.common_arch=R0.arch(),e.common_cpu=Array.from(new Set(R0.cpus().map(n=>n.model))).join();let r=t.get(As);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(IIt,"getCommonProperties");var TIt="7d7048df-6dd0-4048-bb23-b716c1461f8f",wIt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",_It="f0000000-0000-0000-0000-000000000000";function rNe(t){return new URL(t).hostname==="github.com"?Q_.telemetry:t.replace("://","://copilot-telemetry-service.")}s(rNe,"getEndpointForServerUrl");var Ef=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=rNe(this.serverUrl);this.shuttingDown=new Set;ia(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(xl);i.setReporter(new H4(r,this.namespace,n,TIt)),i.setRestrictedReporter(new H4(r,this.namespace,n,wIt)),i.setFTReporter(new H4(r,this.namespace,n,_It,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(xl).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=rNe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var Dn=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Qr)}get authPersistence(){return this.ctx.get(q_)}getConfiguredUrls(){return this.ctx.get(bd).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof em)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=SIt(this.env)??this.#e;if(r!==null){if(r){let n={...r,...Tb(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&sy(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Zp(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":$A},body:JSON.stringify({restricted_telemetry:this.ctx.get(Ef).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return S0.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function SIt(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(SIt,"getSessionFromEnv");d();var po=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},sG=class extends po{static{s(this,"NoOpStatusReporter")}didChange(){}};var Qr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},em=class extends Bs{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},aG=class extends Qr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new em({reason:"NotSignedIn"});if(!r.accessToken)throw new em({reason:"HTTP401"});let n=await nG(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new em(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(nNe(this.ctx))throw r;S0.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(po).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(po);if(n instanceof em)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Rt(this.ctx,"auth.reset_token_"+r),S0.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):S0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},W4=class extends aG{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Dn).getSession()}};d();var ly=class{static{s(this,"Clock")}now(){return new Date}};d();var eg=class{static{s(this,"ExpConfigMaker")}},i9=class extends eg{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(jn),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return Up.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return Up.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return Ia(r,m,"fetchExperiments"),Up.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let f=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Up(f.Parameters,u.AssignmentContext,p.join(";"))}},cG=class extends eg{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Up.createEmptyConfig())}};d();d();var lG=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},Yue=class extends lG{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},iNe=s(t=>new Yue(t),"DEFAULT_GRANULARITY"),uG=class extends lG{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var oNe="X-Copilot-ClientTimeBucket",dG=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=iNe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new uG(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(oNe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(oNe,o))}}};d();d();d();d();d();d();d();var fG="4.10.2",o9="04b07795-8ddb-461a-bbee-02f9e1bf7b46",sNe="common",H1;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(H1||(H1={}));var s9=H1.AzurePublicCloud,aNe="login.microsoftonline.com",cNe=["*"],lNe="cae",uNe="nocae",dNe="msal.cache";var Kue;var fNe;function RIt(t){var e,r,n,i,o,a,c;let l={cache:{},broker:{isEnabled:(r=(e=t.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!1,enableMsaPassthrough:(i=(n=t.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(o=t.brokerOptions)===null||o===void 0?void 0:o.parentWindowHandle}};if(!((a=t.tokenCachePersistenceOptions)===null||a===void 0)&&a.enabled){if(Kue===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let u=t.tokenCachePersistenceOptions.name||dNe;l.cache.cachePlugin=Kue(Object.assign({name:`${u}.${uNe}`},t.tokenCachePersistenceOptions)),l.cache.cachePluginCae=Kue(Object.assign({name:`${u}.${lNe}`},t.tokenCachePersistenceOptions))}if(!((c=t.brokerOptions)===null||c===void 0)&&c.enabled){if(fNe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));l.broker.nativeBrokerPlugin=fNe.broker}return l}s(RIt,"generatePluginConfiguration");var pNe={generatePluginConfiguration:RIt};d();d();d();d();d();var mNe=require("node:os"),hNe=Ne(require("node:util"),1),gNe=Ne(require("node:process"),1);function ANe(t,...e){gNe.stderr.write(`${hNe.default.format(t,...e)}${mNe.EOL}`)}s(ANe,"log");var yNe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,CNe,Jue=[],Xue=[],pG=[];yNe&&Zue(yNe);var ENe=Object.assign(t=>vNe(t),{enable:Zue,enabled:ede,disable:kIt,log:ANe});function Zue(t){CNe=t,Jue=[],Xue=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Xue.push(new RegExp(`^${n.substr(1)}$`)):Jue.push(new RegExp(`^${n}$`));for(let n of pG)n.enabled=ede(n.namespace)}s(Zue,"enable");function ede(t){if(t.endsWith("*"))return!0;for(let e of Xue)if(e.test(t))return!1;for(let e of Jue)if(e.test(t))return!0;return!1}s(ede,"enabled");function kIt(){let t=CNe||"";return Zue(""),t}s(kIt,"disable");function vNe(t){let e=Object.assign(r,{enabled:ede(t),destroy:PIt,log:ENe.log,namespace:t,extend:BIt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),pG.push(e),e}s(vNe,"createDebugger");function PIt(){let t=pG.indexOf(this);return t>=0?(pG.splice(t,1),!0):!1}s(PIt,"destroy");function BIt(t){let e=vNe(`${this.namespace}:${t}`);return e.log=this.log,e}s(BIt,"extend");var G4=ENe;var bNe=new Set,mG=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,gG,tde=G4("azure");tde.log=(...t)=>{G4.log(...t)};var rde=["verbose","info","warning","error"];mG&&(wNe(mG)?DIt(mG):console.error(`AZURE_LOG_LEVEL set to unknown log level '${mG}'; logging is not enabled. Acceptable values: ${rde.join(", ")}.`));function DIt(t){if(t&&!wNe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${rde.join(",")}`);gG=t;let e=[];for(let r of bNe)TNe(r)&&e.push(r.namespace);G4.enable(e.join(","))}s(DIt,"setLogLevel");function AG(){return gG}s(AG,"getLogLevel");var xNe={verbose:400,info:300,warning:200,error:100};function wb(t){let e=tde.extend(t);return INe(tde,e),{error:hG(e,"error"),warning:hG(e,"warning"),info:hG(e,"info"),verbose:hG(e,"verbose")}}s(wb,"createClientLogger");function INe(t,e){e.log=(...r)=>{t.log(...r)}}s(INe,"patchLogMethod");function hG(t,e){let r=Object.assign(t.extend(e),{level:e});if(INe(t,r),TNe(r)){let n=G4.disable();G4.enable(n+","+r.namespace)}return bNe.add(r),r}s(hG,"createLogger");function TNe(t){return!!(gG&&xNe[t.level]<=xNe[gG])}s(TNe,"shouldEnable");function wNe(t){return rde.includes(t)}s(wNe,"isAzureLogLevel");var k0=wb("identity");function yG(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(yG,"processEnvVars");function Xc(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Xc,"formatSuccess");function ko(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(ko,"formatError");function _Ne(t,e,r=k0){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(_Ne,"credentialLoggerInstance");function oi(t,e=k0){let r=_Ne(t,void 0,e);return Object.assign(Object.assign({},r),{parent:e,getToken:_Ne("=> getToken()",r,e)})}s(oi,"credentialLogger");d();d();d();function NIt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(NIt,"isErrorResponse");var RNe="CredentialUnavailableError",$r=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=RNe}},CG="AuthenticationError",_b=class extends Error{static{s(this,"AuthenticationError")}constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(NIt(r))i=SNe(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=SNe(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=CG}},kNe="AggregateAuthenticationError",a9=class extends Error{static{s(this,"AggregateAuthenticationError")}constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=kNe}};function SNe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(SNe,"convertOAuthErrorResponseToErrorResponse");var tg=class extends Error{static{s(this,"AuthenticationRequiredError")}constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function LIt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(LIt,"createConfigurationErrorMessage");function _c(t,e,r=[],n){var i;let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=(i=e?.tenantId)!==null&&i!==void 0?i:t,t&&o!==t&&!r.includes("*")&&!r.some(a=>a.localeCompare(o)===0)){let a=LIt(o);throw n?.info(a),new $r(a)}return o}s(_c,"processMultiTenantRequest");function ou(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(ko("",r)),r}}s(ou,"checkTenantId");function EG(t,e,r){return e?(ou(t,e),e):(r||(r=o9),r!==o9?"common":"organizations")}s(EG,"resolveTenantId");function Zc(t){return!t||t.length===0?[]:t.includes("*")?cNe:t}s(Zc,"resolveAdditionallyAllowedTenantIds");d();d();d();d();d();var c9="$",j4="_";d();function FIt(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(FIt,"isPrimitiveBody");function OIt(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(OIt,"handleNullableResponseAndWrappableBody");function nde(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return OIt({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:FIt(t.parsedBody,c)})}s(nde,"flattenResponse");var uy={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var dy=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var PNe=require("node:os"),BNe=Ne(require("node:util"),1),DNe=Ne(require("node:process"),1);function NNe(t,...e){DNe.stderr.write(`${BNe.default.format(t,...e)}${PNe.EOL}`)}s(NNe,"log");var LNe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,MNe,ide=[],ode=[],vG=[];LNe&&sde(LNe);var FNe=Object.assign(t=>ONe(t),{enable:sde,enabled:ade,disable:QIt,log:NNe});function sde(t){MNe=t,ide=[],ode=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?ode.push(new RegExp(`^${n.substr(1)}$`)):ide.push(new RegExp(`^${n}$`));for(let n of vG)n.enabled=ade(n.namespace)}s(sde,"enable");function ade(t){if(t.endsWith("*"))return!0;for(let e of ode)if(e.test(t))return!1;for(let e of ide)if(e.test(t))return!0;return!1}s(ade,"enabled");function QIt(){let t=MNe||"";return sde(""),t}s(QIt,"disable");function ONe(t){let e=Object.assign(r,{enabled:ade(t),destroy:UIt,log:FNe.log,namespace:t,extend:qIt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),vG.push(e),e}s(ONe,"createDebugger");function UIt(){let t=vG.indexOf(this);return t>=0?(vG.splice(t,1),!0):!1}s(UIt,"destroy");function qIt(t){let e=ONe(`${this.namespace}:${t}`);return e.log=this.log,e}s(qIt,"extend");var V4=FNe;var cde=["verbose","info","warning","error"],QNe={verbose:400,info:300,warning:200,error:100};function UNe(t,e){e.log=(...r)=>{t.log(...r)}}s(UNe,"patchLogMethod");function qNe(t){return cde.includes(t)}s(qNe,"isTypeSpecRuntimeLogLevel");function HIt(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=V4(t.namespace);i.log=(...f)=>{V4.log(...f)};function o(f){if(f&&!qNe(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${cde.join(",")}`);n=f;let p=[];for(let m of e)a(m)&&p.push(m.namespace);V4.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(qNe(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${cde.join(", ")}.`));function a(f){return!!(n&&QNe[f.level]<=QNe[n])}s(a,"shouldEnable");function c(f,p){let m=Object.assign(f.extend(p),{level:p});if(UNe(f,m),a(m)){let h=V4.disable();V4.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return UNe(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(HIt,"createLoggerContext");var HNe=HIt({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),WIt=HNe.logger;function l9(t){return HNe.createClientLogger(t)}s(l9,"createClientLogger");d();function xG(t){return t.toLowerCase()}s(xG,"normalizeName");function*GIt(t){for(let e of t.values())yield[e.name,e.value]}s(GIt,"headerIterator");var lde=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(xG(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(xG(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(xG(e))}delete(e){this._headersMap.delete(xG(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return GIt(this._headersMap)}};function P0(t){return new lde(t)}s(P0,"createHttpHeaders");d();d();d();d();var WNe=require("node:crypto");var ude,jIt=typeof((ude=globalThis?.crypto)===null||ude===void 0?void 0:ude.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):WNe.randomUUID;function $4(){return jIt()}s($4,"randomUUID");var dde=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:P0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||$4(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function bG(t){return new dde(t)}s(bG,"createPipelineRequest");d();var GNe=new Set(["Deserialize","Serialize","Retry","Sign"]),fde=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!GNe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!GNe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let y=g.policy,E=g.options,x=y.name;if(r.has(x))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:y,dependsOn:new Set,dependants:new Set};E.afterPhase&&(b.afterPhase=f(E.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(x,b),f(E.phase).policies.add(b)}for(let g of this._policies){let{policy:y,options:E}=g,x=y.name,b=r.get(x);if(!b)throw new Error(`Missing node for policy ${x}`);if(E.afterPolicies)for(let _ of E.afterPolicies){let k=r.get(_);k&&(b.dependsOn.add(k),k.dependants.add(b))}if(E.beforePolicies)for(let _ of E.beforePolicies){let k=r.get(_);k&&(k.dependsOn.add(b),b.dependants.add(k))}}function p(g){g.hasRun=!0;for(let y of g.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let E of y.dependants)E.dependsOn.delete(y);r.delete(y.policy.name),g.policies.delete(y)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function IG(){return fde.create()}s(IG,"createEmptyPipeline");d();d();d();function z4(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(z4,"isObject");function H_(t){if(z4(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(H_,"isError");d();var jNe=require("node:util"),VNe=jNe.inspect.custom;d();var pde="REDACTED",VIt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],$It=["api-version"],rg=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=VIt.concat(e),r=$It.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||z4(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,pde);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=pde;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=pde;return r}};var zIt=new rg,su=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,VNe,{value:s(()=>`RestError: ${this.message} 
 ${zIt.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};su.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";su.PARSE_ERROR="PARSE_ERROR";function TG(t){return t instanceof su?!0:H_(t)&&t.name==="RestError"}s(TG,"isRestError");d();function vf(t,e){return Buffer.from(t,e)}s(vf,"stringToUint8Array");d();d();var Y4=Ne(require("node:http"),1),K4=Ne(require("node:https"),1),_G=Ne(require("node:zlib"),1),zNe=require("node:stream");d();var tm=l9("ts-http-runtime");var YIt={};function u9(t){return t&&typeof t.pipe=="function"}s(u9,"isReadableStream");function $Ne(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s($Ne,"isStreamComplete");function YNe(t){return t&&typeof t.byteLength=="number"}s(YNe,"isArrayBuffer");var wG=class extends zNe.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},mde=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new dy("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new rg;tm.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let m=ZIt(f);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(f&&e.onUploadProgress){let x=e.onUploadProgress,b=new wG(x);b.on("error",_=>{tm.error("Error in upload progress",_)}),u9(f)?f.pipe(b):b.end(f),f=b}let m=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let h=KIt(m),y={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),y;p=u?JIt(m,h):m;let E=e.onDownloadProgress;if(E){let x=new wG(E);x.on("error",b=>{tm.error("Error in download progress",b)}),p.pipe(x),p=x}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(y.status)?y.readableStreamBody=p:y.bodyAsText=await XIt(p),y}finally{if(e.abortSignal&&a){let m=Promise.resolve();u9(f)&&(m=$Ne(f));let h=Promise.resolve();u9(p)&&(h=$Ne(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{tm.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?Y4.request(l,u):K4.request(l,u);p.once("error",m=>{var h;f(new su(m.message,{code:(h=m.code)!==null&&h!==void 0?h:su.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new dy("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),f(m)}),n&&u9(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):YNe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(tm.error("Unrecognized body type",n),f(new su("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?Y4.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Y4.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return K4.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:YIt,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(tm.info("No cached TLS Agent exist, creating a new Agent"),a=new K4.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function KIt(t){let e=P0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(KIt,"getResponseHeaders");function JIt(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=_G.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=_G.createInflate();return t.pipe(n),n}return t}s(JIt,"getDecodedResponseStream");function XIt(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new su(`Error reading response as text: ${i.message}`,{code:su.PARSE_ERROR}))})})}s(XIt,"streamToText");function ZIt(t){return t?Buffer.isBuffer(t)?t.length:u9(t)?null:YNe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(ZIt,"getBodyLength");function KNe(){return new mde}s(KNe,"createNodeHttpClient");function SG(){return KNe()}s(SG,"createDefaultHttpClient");d();d();d();d();var hde="logPolicy";function RG(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:tm.info,n=new rg({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:hde,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(RG,"logPolicy");d();var gde="redirectPolicy",JNe=["GET","HEAD"];function kG(t={}){let{maxRetries:e=20}=t;return{name:gde,async sendRequest(r,n){let i=await n(r);return XNe(n,i,e)}}}s(kG,"redirectPolicy");async function XNe(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&JNe.includes(i.method)||o===302&&JNe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return XNe(t,u,r,n+1)}return e}s(XNe,"handleRedirect");d();d();d();function ZNe(){return"User-Agent"}s(ZNe,"getHeaderName");d();function e8e(){return ZNe()}s(e8e,"getUserAgentHeaderName");var T7r=e8e();d();var Ade="decompressResponsePolicy";function PG(){return{name:Ade,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(PG,"decompressResponsePolicy");d();d();d();d();function d9(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(d9,"getRandomIntegerInclusive");function f9(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+d9(0,n/2)}}s(f9,"calculateRetryDelay");d();d();var eTt="The operation was aborted.";function t8e(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new dy(r?.abortErrorMsg?r?.abortErrorMsg:eTt)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(t8e,"delay");function r8e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(r8e,"parseHeaderValueAsNumber");var yde="Retry-After",tTt=["retry-after-ms","x-ms-retry-after-ms",yde];function n8e(t){if(t&&[429,503].includes(t.status))try{for(let i of tTt){let o=r8e(t,i);if(o===0||o)return o*(i===yde?1e3:1)}let e=t.headers.get(yde);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(n8e,"getRetryAfterInMs");function i8e(t){return Number.isFinite(n8e(t))}s(i8e,"isThrottlingRetryResponse");function Cde(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=n8e(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Cde,"throttlingRetryStrategy");var rTt=1e3,nTt=1e3*64;function BG(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:rTt,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:nTt;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=oTt(c),u=l&&t.ignoreSystemErrors,f=iTt(a),p=f&&t.ignoreHttpStatusCodes;return a&&(i8e(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:f9(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(BG,"exponentialRetryStrategy");function iTt(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(iTt,"isExponentialRetryResponse");function oTt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(oTt,"isSystemError");d();var sTt=l9("ts-http-runtime retryPolicy"),aTt="retryPolicy";function Sb(t,e={maxRetries:3}){let r=e.logger||sTt;return{name:aTt,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new dy;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let m=f.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:y}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await t8e(g,void 0,{abortSignal:n.abortSignal});continue e}if(y){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${y}`),n.url=y;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(Sb,"retryPolicy");var Ede="defaultRetryPolicy";function DG(t={}){var e;return{name:Ede,sendRequest:Sb([Cde(),BG(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(DG,"defaultRetryPolicy");d();d();var vde,xde,bde,Ide,o8e=typeof window<"u"&&typeof window.document<"u",s8e=typeof self=="object"&&typeof self?.importScripts=="function"&&(((vde=self.constructor)===null||vde===void 0?void 0:vde.name)==="DedicatedWorkerGlobalScope"||((xde=self.constructor)===null||xde===void 0?void 0:xde.name)==="ServiceWorkerGlobalScope"||((bde=self.constructor)===null||bde===void 0?void 0:bde.name)==="SharedWorkerGlobalScope"),a8e=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",c8e=typeof Bun<"u"&&typeof Bun.version<"u",Rb=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((Ide=globalThis.process.versions)===null||Ide===void 0)&&Ide.node);var l8e=typeof navigator<"u"&&navigator?.product==="ReactNative";var Tde="formDataPolicy";function cTt(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(cTt,"formDataToFormDataMap");function NG(){return{name:Tde,async sendRequest(t,e){if(Rb&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=cTt(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=lTt(t.formData):await uTt(t.formData,t),t.formData=void 0}return e(t)}}}s(NG,"formDataPolicy");function lTt(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(lTt,"wwwFormUrlEncode");async function uTt(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:P0({"Content-Disposition":`form-data; name="${i}"`}),body:vf(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=P0();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(uTt,"prepareFormData");d();var O8e=Ne(P8e(),1),Q8e=Ne(N8e(),1);var lwt="HTTPS_PROXY",uwt="HTTP_PROXY",dwt="ALL_PROXY",fwt="NO_PROXY",Nde="proxyPolicy",L8e=[],U8e=!1,pwt=new Map;function HG(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(HG,"getEnvironmentValue");function mwt(){if(!process)return;let t=HG(lwt),e=HG(dwt),r=HG(uwt);return t||e||r}s(mwt,"loadEnvironmentProxyValue");function hwt(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(hwt,"isBypassed");function gwt(){let t=HG(fwt);return U8e=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(gwt,"loadNoProxy");function Awt(){let t=mwt();return t?new URL(t):void 0}s(Awt,"getDefaultProxySettingsInternal");function M8e(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(M8e,"getUrlFromProxySettings");function F8e(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&tm.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new Q8e.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new O8e.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(F8e,"setProxyAgentOnRequest");function WG(t,e){U8e||L8e.push(...gwt());let r=t?M8e(t):Awt(),n={};return{name:Nde,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!hwt(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:L8e,e?.customNoProxyList?void 0:pwt)?F8e(i,n,r):i.proxySettings&&F8e(i,n,M8e(i.proxySettings)),o(i)}}}s(WG,"proxyPolicy");d();var Lde="agentPolicy";function GG(t){return{name:Lde,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(GG,"agentPolicy");d();var Mde="tlsPolicy";function jG(t){return{name:Mde,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(jG,"tlsPolicy");d();d();function VG(t){return typeof t.stream=="function"}s(VG,"isBlob");d();d();function q8e(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(q8e,"__values");function my(t){return this instanceof my?(this.v=t,this):new my(t)}s(my,"__await");function Fde(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(y){return new Promise(function(E,x){o.push([h,y,E,x])>1||l(h,y)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(y){m(o[0][3],y)}}function u(h){h.value instanceof my?Promise.resolve(h.value.v).then(f,p):m(o[0][2],h)}function f(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(Fde,"__asyncGenerator");function H8e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof q8e=="function"?q8e(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(H8e,"__asyncValues");var $G=require("stream");function W8e(){return Fde(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield my(e.read());if(r)return yield my(void 0);yield yield my(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(W8e,"streamAsyncIterator");function ywt(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=W8e.bind(t)),t.values||(t.values=W8e.bind(t))}s(ywt,"makeAsyncIterable");function G8e(t){return t instanceof ReadableStream?(ywt(t),$G.Readable.fromWeb(t)):t}s(G8e,"ensureNodeStream");function Cwt(t){return t instanceof Uint8Array?$G.Readable.from(Buffer.from(t)):VG(t)?G8e(t.stream()):G8e(t)}s(Cwt,"toStream");async function j8e(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(Cwt);return $G.Readable.from(function(){return Fde(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,H8e(u)),l;l=yield my(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield my(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield my(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(j8e,"concat");function Ewt(){return`----AzSDKFormBoundary${$4()}`}s(Ewt,"generateBoundary");function vwt(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(vwt,"encodeHeaders");function xwt(t){return t instanceof Uint8Array?t.byteLength:VG(t)?t.size===-1?void 0:t.size:void 0}s(xwt,"getLength");function bwt(t){let e=0;for(let r of t){let n=xwt(r);if(n===void 0)return;e+=n}return e}s(bwt,"getTotalLength");async function Iwt(t,e,r){let n=[vf(`--${r}`,"utf-8"),...e.flatMap(o=>[vf(`\r
`,"utf-8"),vf(vwt(o.headers),"utf-8"),vf(`\r
`,"utf-8"),o.body,vf(`\r
--${r}`,"utf-8")]),vf(`--\r
\r
`,"utf-8")],i=bwt(n);i&&t.headers.set("Content-Length",i),t.body=await j8e(n)}s(Iwt,"buildRequestBody");var m9="multipartPolicy",Twt=70,wwt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function _wt(t){if(t.length>Twt)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!wwt.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(_wt,"assertValidBoundary");function zG(){return{name:m9,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?_wt(n):n=Ewt(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await Iwt(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(zG,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function YG(){return IG()}s(YG,"createEmptyPipeline");d();d();d();var hy=wb("core-rest-pipeline");d();d();d();d();function Ude(t={}){return RG(Object.assign({logger:hy.info},t))}s(Ude,"logPolicy");d();function qde(t={}){return kG(t)}s(qde,"redirectPolicy");d();d();d();var rP=Ne(require("node:os"),1),KG=Ne(require("node:process"),1);function V8e(){return"User-Agent"}s(V8e,"getHeaderName");async function $8e(t){if(KG&&KG.versions){let e=KG.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${rP.arch()}-${rP.type()}-${rP.release()})`)}s($8e,"setPlatformSpecificData");d();var JG="1.22.0";function Mwt(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(Mwt,"getUserAgentString");function z8e(){return V8e()}s(z8e,"getUserAgentHeaderName");async function XG(t){let e=new Map;e.set("core-rest-pipeline",JG),await $8e(e);let r=Mwt(e);return t?`${t} ${r}`:r}s(XG,"getUserAgentValue");var Y8e=z8e(),K8e="userAgentPolicy";function Hde(t={}){let e=XG(t.userAgentPrefix);return{name:K8e,async sendRequest(r,n){return r.headers.has(Y8e)||r.headers.set(Y8e,await e),n(r)}}}s(Hde,"userAgentPolicy");d();d();d();d();d();d();d();d();d();var j_=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function Wde(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new j_(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(Wde,"createAbortablePromise");d();var qwt="The delay was aborted.";function Gde(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return Wde(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??qwt})}s(Gde,"delay");d();function nP(t){if(H_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(nP,"getErrorMessage");d();function J8e(t,e){return f9(t,e)}s(J8e,"calculateRetryDelay");function ZG(t){return H_(t)}s(ZG,"isError");var ej=Rb,iP=Rb;var X8e=Symbol("rawContent");function jde(t){return typeof t[X8e]=="function"}s(jde,"hasRawContent");function Z8e(t){return jde(t)?t[X8e]():t}s(Z8e,"getRawContent");var tj=m9;function Vde(){let t=zG();return{name:tj,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)jde(n.body)&&(n.body=Z8e(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(Vde,"multipartPolicy");d();function $de(){return PG()}s($de,"decompressResponsePolicy");d();function zde(t={}){return DG(t)}s(zde,"defaultRetryPolicy");d();function Yde(){return NG()}s(Yde,"formDataPolicy");d();function Kde(t,e){return WG(t,e)}s(Kde,"proxyPolicy");d();var e6e="setClientRequestIdPolicy";function Jde(t="x-ms-client-request-id"){return{name:e6e,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(Jde,"setClientRequestIdPolicy");d();function Xde(t){return GG(t)}s(Xde,"agentPolicy");d();function Zde(t){return jG(t)}s(Zde,"tlsPolicy");d();d();d();d();var oP={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function t6e(t={}){let e=new efe(t.parentContext);return t.span&&(e=e.setValue(oP.span,t.span)),t.namespace&&(e=e.setValue(oP.namespace,t.namespace)),e}s(t6e,"createTracingContext");var efe=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var n6e=Ne(r6e(),1),nj=n6e.state;function Hwt(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(Hwt,"createDefaultTracingSpan");function Wwt(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:Hwt(),tracingContext:t6e({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(Wwt,"createDefaultInstrumenter");function h9(){return nj.instrumenterImplementation||(nj.instrumenterImplementation=Wwt()),nj.instrumenterImplementation}s(h9,"getInstrumenter");d();function g9(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var m;let h=h9().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=f?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,y=h.span;g.getValue(oP.namespace)||(g=g.setValue(oP.namespace,e)),y.setAttribute("az.namespace",g.getValue(oP.namespace));let E=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:y,updatedOptions:E}}s(i,"startSpan");async function o(u,f,p,m){let{span:h,updatedOptions:g}=i(u,f,m);try{let y=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),y}catch(y){throw h.setStatus({status:"error",error:y}),y}finally{h.end()}}s(o,"withSpan");function a(u,f,...p){return h9().withContext(u,f,...p)}s(a,"withContext");function c(u){return h9().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return h9().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(g9,"createTracingClient");d();var sP=su;function A9(t){return TG(t)}s(A9,"isRestError");var i6e="tracingPolicy";function tfe(t={}){let e=XG(t.userAgentPrefix),r=new rg({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=Gwt();return{name:i6e,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=jwt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return $wt(u,p),p}catch(p){throw Vwt(u,p),p}}}}s(tfe,"tracingPolicy");function Gwt(){try{return g9({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:JG})}catch(t){hy.warning(`Error when creating the TracingClient: ${nP(t)}`);return}}s(Gwt,"tryCreateTracingClient");function jwt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){hy.warning(`Skipping creating a tracing span due to an error: ${nP(n)}`);return}}s(jwt,"tryCreateSpan");function Vwt(t,e){try{t.setStatus({status:"error",error:ZG(e)?e:void 0}),A9(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){hy.warning(`Skipping tracing span processing due to an error: ${nP(r)}`)}}s(Vwt,"tryProcessError");function $wt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){hy.warning(`Skipping tracing span processing due to an error: ${nP(r)}`)}}s($wt,"tryProcessResponse");d();d();function ij(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(ij,"wrapAbortSignalLike");var zwt="wrapAbortSignalLikePolicy";function o6e(){return{name:zwt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=ij(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(o6e,"wrapAbortSignalLikePolicy");function rfe(t){var e;let r=YG();return iP&&(t.agent&&r.addPolicy(Xde(t.agent)),t.tlsOptions&&r.addPolicy(Zde(t.tlsOptions)),r.addPolicy(Kde(t.proxyOptions)),r.addPolicy($de())),r.addPolicy(o6e()),r.addPolicy(Yde(),{beforePolicies:[tj]}),r.addPolicy(Hde(t.userAgentOptions)),r.addPolicy(Jde((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(Vde(),{afterPhase:"Deserialize"}),r.addPolicy(zde(t.retryOptions),{phase:"Retry"}),r.addPolicy(tfe(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),iP&&r.addPolicy(qde(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Ude(t.loggingOptions),{afterPhase:"Sign"}),r}s(rfe,"createPipelineFromOptions");d();function nfe(){let t=SG();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?ij(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(nfe,"createDefaultHttpClient");d();function Pb(t){return P0(t)}s(Pb,"createHttpHeaders");d();function ng(t){return bG(t)}s(ng,"createPipelineRequest");d();d();d();d();var Kwt=wb("core-rest-pipeline retryPolicy");function ife(t,e={maxRetries:3}){return Sb(t,Object.assign({logger:Kwt},e))}s(ife,"retryPolicy");d();d();var Jwt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Xwt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await Gde(e),i=await n();return i}s(Xwt,"beginRefresh");function ofe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},Jwt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=Xwt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(ofe,"createTokenCycler");var l6e="bearerTokenAuthenticationPolicy";async function oj(t,e){try{return[await e(t),void 0]}catch(r){if(A9(r)&&r.response)return[r.response,r];throw r}}s(oj,"trySendRequest");async function Zwt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(Zwt,"defaultAuthorizeRequest");function s6e(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(s6e,"isChallengeResponse");async function a6e(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(a6e,"authorizeRequestOnCaeChallenge");function sj(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||hy,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:Zwt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?ofe(i):()=>Promise.resolve(null);return{name:l6e,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await oj(f,p),s6e(m)){let y=c6e(m.headers.get("WWW-Authenticate"));if(y){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await a6e({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await oj(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await oj(f,p)),s6e(m)&&(y=c6e(m.headers.get("WWW-Authenticate")),y))){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await a6e({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await oj(f,p))}}if(h)throw h;return m}}}s(sj,"bearerTokenAuthenticationPolicy");function e_t(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(e_t,"parseChallenges");function c6e(t){var e;return t?(e=e_t(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(c6e,"getCaeChallengeClaims");d();d();d();d();d();d();var d6e=Ne(u6e(),1),sfe=d6e.state;function Bb(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=f6e(t,n);!a.propertyFound&&r&&(a=f6e(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=Bb(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(Bb,"getOperationArgumentValueFromParameter");function f6e(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(f6e,"getPropertyFromParameterPath");var p6e=Symbol.for("@azure/core-client original request");function t_t(t){return p6e in t}s(t_t,"hasOriginalRequest");function W1(t){if(t_t(t))return W1(t[p6e]);let e=sfe.operationRequestMap.get(t);return e||(e={},sfe.operationRequestMap.set(t,e)),e}s(W1,"getOperationRequestInfo");var r_t=["application/json","text/json"],n_t=["application/xml","application/atom+xml"],m6e="deserializationPolicy";function afe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:r_t,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:n_t,f=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:j4}};return{name:m6e,async sendRequest(h,g){let y=await g(h);return s_t(l,u,y,m,f)}}}s(afe,"deserializationPolicy");function i_t(t){let e,r=t.request,n=W1(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(i_t,"getOperationResponseMap");function o_t(t){let e=t.request,r=W1(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(o_t,"shouldDeserializeResponse");async function s_t(t,e,r,n,i){let o=await l_t(t,e,r,n,i);if(!o_t(o))return o;let a=W1(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=i_t(o),{error:u,shouldReturnResponse:f}=c_t(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===uy.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new sP(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(s_t,"deserializeResponseBody");function a_t(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(a_t,"isOperationSpecEmpty");function c_t(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(a_t(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new sP(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(f){let y=m;if(e.isXML&&f.type.name===uy.Sequence){y=[];let E=f.xmlElementName;typeof m=="object"&&E&&(y=m[E])}h=e.serializer.deserialize(f,y,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(c_t,"handleErrorResponse");async function l_t(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||sP.PARSE_ERROR;throw new sP(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(l_t,"parse");d();d();function h6e(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===uy.Stream&&e.add(Number(r))}return e}s(h6e,"getStreamingResponseStatusCodes");function gy(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(gy,"getPathStringFromParameter");var g6e="serializationPolicy";function cfe(t={}){let e=t.stringifyXML;return{name:g6e,async sendRequest(r,n){let i=W1(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(u_t(r,a,o),d_t(r,a,o,e)),n(r)}}}s(cfe,"serializationPolicy");function u_t(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=Bb(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,gy(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||gy(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(u_t,"serializeHeaders");function d_t(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:j4}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=Bb(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:x,xmlNamespacePrefix:b,nullable:_}=m,k=m.type.name;try{if(t.body!==void 0&&t.body!==null||_&&t.body===null||h){let P=gy(r.requestBody);t.body=r.serializer.serialize(m,t.body,P,f);let N=k===uy.Stream;if(r.isXML){let M=b?`xmlns:${b}`:"xmlns",J=f_t(x,M,k,t.body,f);k===uy.Sequence?t.body=n(p_t(J,E||y||g,M,x),{rootName:y||g,xmlCharKey:p}):N||(t.body=n(J,{rootName:y||g,xmlCharKey:p}))}else{if(k===uy.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;N||(t.body=JSON.stringify(t.body))}}}catch(P){throw new Error(`Error "${P.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=Bb(e,m);if(h!=null){let g=m.mapper.serializedName||gy(m);t.formData[g]=r.serializer.serialize(m.mapper,h,gy(m),f)}}}}s(d_t,"serializeRequestBody");function f_t(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o[c9]={[e]:t},o}return n}s(f_t,"getXmlValueWithNamespace");function p_t(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i[c9]={[r]:n},i}s(p_t,"prepareXMLRootList");function lfe(t={}){let e=rfe(t??{});return t.credentialOptions&&e.addPolicy(sj({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(cfe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(afe(t.deserializationOptions),{phase:"Deserialize"}),e}s(lfe,"createClientPipeline");d();var ufe;function A6e(){return ufe||(ufe=nfe()),ufe}s(A6e,"getCachedDefaultHttpClient");d();var m_t={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function C6e(t,e,r,n){let i=h_t(e,r,n),o=!1,a=y6e(t,i);if(e.path){let u=y6e(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),g_t(u)?(a=u,o=!0):a=A_t(a,u)}let{queryParams:c,sequenceParams:l}=y_t(e,r,n);return a=E_t(a,c,l,o),a}s(C6e,"getRequestUrl");function y6e(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(y6e,"replaceAll");function h_t(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=Bb(e,o,r),c=gy(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(h_t,"calculateUrlReplacements");function g_t(t){return t.includes("://")}s(g_t,"isAbsoluteUrl");function A_t(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(A_t,"appendPath");function y_t(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=Bb(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,gy(a));let l=a.collectionFormat?m_t[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||gy(a),c)}}return{queryParams:i,sequenceParams:o}}s(y_t,"calculateQueryParameters");function C_t(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(C_t,"simpleParseQueryParams");function E_t(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=C_t(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(E_t,"appendQueryParams");d();var dfe=wb("core-client");var y9=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&dfe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||A6e(),this.pipeline=e.pipeline||v_t(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=C6e(n,r,e,this),o=ng({url:i});o.method=r.httpMethod;let a=W1(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=h6e(r));try{let u=await this.sendRequest(o),f=nde(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=nde(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function v_t(t){let e=x_t(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return lfe(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(v_t,"createDefaultPipeline");function x_t(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(x_t,"getCredentialScopes");d();d();d();function E6e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(E6e,"getIdentityTokenEndpointSuffix");d();var es=g9({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:fG});d();var v6e="/.default",x6e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function C9(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(v6e)?e.substr(0,e.lastIndexOf(v6e)):e}s(C9,"mapScopesToResource");function b6e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(b6e,"parseExpirationTimestamp");function I6e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(I6e,"parseRefreshTimestamp");var E9="noCorrelationId";function b_t(t){let e=t?.authorityHost;return ej&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??s9}s(b_t,"getIdentityClientAuthorityHost");var G1=class extends y9{static{s(this,"IdentityClient")}constructor(e){var r,n;let i=`azsdk-js-identity/${fG}`,o=!((r=e?.userAgentOptions)===null||r===void 0)&&r.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,a=b_t(e);if(!a.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:o},baseUri:a})),this.allowInsecureConnection=!1,this.authorityHost=a,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){k0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:b6e(n),refreshAfterTimestamp:I6e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return k0.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new _b(r.status,r.bodyAsText);throw k0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;k0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return es.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=E6e(e),p=ng({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:Pb({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return k0.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(f){if(f.name===CG&&f.errorResponse.error==="interaction_required")return k0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw k0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||E9,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(E9)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){var r;let n=(r=e?.body)===null||r===void 0?void 0:r.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||E9}async sendGetRequestAsync(e,r){let n=ng({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:Pb(r?.headers),abortSignal:this.generateAbortSignal(E9)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=ng({url:e,method:"POST",body:r?.body,headers:Pb(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));k0.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){k0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};var IKr=oi("VisualStudioCodeCredential");var TKr={AzureCloud:H1.AzurePublicCloud,AzureChina:H1.AzureChina,AzureGermanCloud:H1.AzureGermany,AzureUSGovernment:H1.AzureGovernment};d();d();var Q0={};ra(Q0,{AuthError:()=>Xn,AuthErrorCodes:()=>uP,AuthErrorMessage:()=>pfe,AzureCloudInstance:()=>K1,ClientApplication:()=>Zb,ClientAssertion:()=>iE,ClientAuthError:()=>Ub,ClientAuthErrorCodes:()=>ts,ClientAuthErrorMessage:()=>hfe,ClientConfigurationError:()=>gP,ClientConfigurationErrorCodes:()=>hP,ClientConfigurationErrorMessage:()=>Efe,ClientCredentialClient:()=>eI,ConfidentialClientApplication:()=>MP,CryptoProvider:()=>by,DeviceCodeClient:()=>DP,DistributedCachePlugin:()=>NV,InteractionRequiredAuthError:()=>M0,InteractionRequiredAuthErrorCodes:()=>Pj,InteractionRequiredAuthErrorMessage:()=>w0e,LogLevel:()=>Ta,Logger:()=>N0,ManagedIdentityApplication:()=>FP,ManagedIdentitySourceNames:()=>Vn,OnBehalfOfClient:()=>LP,PromptValue:()=>Nb,ProtocolMode:()=>ju,PublicClientApplication:()=>NP,ResponseMode:()=>Ay,ServerError:()=>_d,TokenCache:()=>IP,TokenCacheContext:()=>F0,UsernamePasswordClient:()=>BP,internals:()=>_0e,version:()=>ag});d();var _0e={};ra(_0e,{Deserializer:()=>rE,Serializer:()=>Db});d();d();var Db=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var Je={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Jn={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},bf=[Je.OPENID_SCOPE,Je.PROFILE_SCOPE,Je.OFFLINE_ACCESS_SCOPE],ffe=[...bf,Je.EMAIL_SCOPE],vs={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var If={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},V_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Nb={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},cj={PLAIN:"plain",S256:"S256"},aP={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var Ay={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Tf={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},$_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ma={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},mo={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var v9="appmetadata",T6e="client_info",j1="1",cP={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Id={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},el={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Yi={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},yy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},x9={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},b9={username:"username",password:"password"},z_={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},lj={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},us={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var lP=300,cu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var uP={};ra(uP,{postRequestFailed:()=>T9,unexpectedError:()=>I9});d();var I9="unexpected_error",T9="post_request_failed";var uj={[I9]:"Unexpected error in authentication.",[T9]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},pfe={unexpectedError:{code:I9,desc:uj[I9]},postRequestFailed:{code:T9,desc:uj[T9]}},Xn=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||Je.EMPTY_STRING,this.errorMessage=r||Je.EMPTY_STRING,this.subError=n||Je.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function mfe(t,e){return new Xn(t,e?`${uj[t]} ${e}`:uj[t])}s(mfe,"createAuthError");var ts={};ra(ts,{authTimeNotFound:()=>V1,authorizationCodeMissingFromServerResponse:()=>lS,bindingKeyNotRemoved:()=>M9,cannotAppendScopeSet:()=>sS,cannotRemoveEmptyScope:()=>oS,clientInfoDecodingError:()=>Lb,clientInfoEmptyError:()=>Y_,deviceCodeExpired:()=>R9,deviceCodePollingCancelled:()=>S9,deviceCodeUnknownError:()=>k9,emptyInputScopeSet:()=>Ob,endSessionEndpointNotSupported:()=>uS,endpointResolutionError:()=>Td,hashNotDeserialized:()=>Z_,invalidAssertion:()=>D9,invalidCacheEnvironment:()=>z1,invalidCacheRecord:()=>aS,invalidClientCredential:()=>N9,invalidState:()=>ig,keyIdMissing:()=>dS,maxAgeTranspired:()=>rS,methodNotImplemented:()=>Ti,missingTenantIdError:()=>Q9,multipleMatchingAccounts:()=>_9,multipleMatchingAppMetadata:()=>nS,multipleMatchingTokens:()=>w9,nestedAppAuthBridgeDisabled:()=>U9,networkError:()=>J_,noAccountFound:()=>P9,noAccountInSilentRequest:()=>$1,noCryptoObject:()=>Qb,noNetworkConnectivity:()=>F9,nonceMismatch:()=>tS,nullOrEmptyToken:()=>K_,openIdConfigError:()=>X_,requestCannotBeMade:()=>iS,stateMismatch:()=>eS,stateNotFound:()=>Fb,tokenClaimsCnfRequiredForSignedJwt:()=>cS,tokenParsingError:()=>Mb,tokenRefreshRequired:()=>Y1,unexpectedCredentialType:()=>B9,userCanceled:()=>O9,userTimeoutReached:()=>L9});d();var Lb="client_info_decoding_error",Y_="client_info_empty_error",Mb="token_parsing_error",K_="null_or_empty_token",Td="endpoints_resolution_error",J_="network_error",X_="openid_config_error",Z_="hash_not_deserialized",ig="invalid_state",eS="state_mismatch",Fb="state_not_found",tS="nonce_mismatch",V1="auth_time_not_found",rS="max_age_transpired",w9="multiple_matching_tokens",_9="multiple_matching_accounts",nS="multiple_matching_appMetadata",iS="request_cannot_be_made",oS="cannot_remove_empty_scope",sS="cannot_append_scopeset",Ob="empty_input_scopeset",S9="device_code_polling_cancelled",R9="device_code_expired",k9="device_code_unknown_error",$1="no_account_in_silent_request",aS="invalid_cache_record",z1="invalid_cache_environment",P9="no_account_found",Qb="no_crypto_object",B9="unexpected_credential_type",D9="invalid_assertion",N9="invalid_client_credential",Y1="token_refresh_required",L9="user_timeout_reached",cS="token_claims_cnf_required_for_signedjwt",lS="authorization_code_missing_from_server_response",M9="binding_key_not_removed",uS="end_session_endpoint_not_supported",dS="key_id_missing",F9="no_network_connectivity",O9="user_canceled",Q9="missing_tenant_id_error",Ti="method_not_implemented",U9="nested_app_auth_bridge_disabled";var Zn={[Lb]:"The client info could not be parsed/decoded correctly",[Y_]:"The client info was empty",[Mb]:"Token cannot be parsed",[K_]:"The token is null or empty",[Td]:"Endpoints cannot be resolved",[J_]:"Network request failed",[X_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Z_]:"The hash parameters could not be deserialized",[ig]:"State was not the expected format",[eS]:"State mismatch error",[Fb]:"State not found",[tS]:"Nonce mismatch error",[V1]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[rS]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[w9]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[_9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[nS]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[iS]:"Token request cannot be made without authorization code or refresh token.",[oS]:"Cannot remove null or empty scope from ScopeSet",[sS]:"Cannot append ScopeSet",[Ob]:"Empty input ScopeSet cannot be processed",[S9]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[R9]:"Device code is expired.",[k9]:"Device code stopped polling for unknown reasons.",[$1]:"Please pass an account object, silent flow is not supported without account information",[aS]:"Cache record object was null or undefined.",[z1]:"Invalid environment when attempting to create cache entry",[P9]:"No account found in cache for given key.",[Qb]:"No crypto object detected.",[B9]:"Unexpected credential type.",[D9]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[N9]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Y1]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[L9]:"User defined timeout for device code polling reached",[cS]:"Cannot generate a POP jwt if the token_claims are not populated",[lS]:"Server response does not contain an authorization code to proceed",[M9]:"Could not remove the credential's binding key from storage.",[uS]:"The provided authority does not support logout",[dS]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[F9]:"No network connectivity. Check your internet connection.",[O9]:"User cancelled the flow.",[Q9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ti]:"This method has not been implemented",[U9]:"The nested app auth bridge is disabled"},hfe={clientInfoDecodingError:{code:Lb,desc:Zn[Lb]},clientInfoEmptyError:{code:Y_,desc:Zn[Y_]},tokenParsingError:{code:Mb,desc:Zn[Mb]},nullOrEmptyToken:{code:K_,desc:Zn[K_]},endpointResolutionError:{code:Td,desc:Zn[Td]},networkError:{code:J_,desc:Zn[J_]},unableToGetOpenidConfigError:{code:X_,desc:Zn[X_]},hashNotDeserialized:{code:Z_,desc:Zn[Z_]},invalidStateError:{code:ig,desc:Zn[ig]},stateMismatchError:{code:eS,desc:Zn[eS]},stateNotFoundError:{code:Fb,desc:Zn[Fb]},nonceMismatchError:{code:tS,desc:Zn[tS]},authTimeNotFoundError:{code:V1,desc:Zn[V1]},maxAgeTranspired:{code:rS,desc:Zn[rS]},multipleMatchingTokens:{code:w9,desc:Zn[w9]},multipleMatchingAccounts:{code:_9,desc:Zn[_9]},multipleMatchingAppMetadata:{code:nS,desc:Zn[nS]},tokenRequestCannotBeMade:{code:iS,desc:Zn[iS]},removeEmptyScopeError:{code:oS,desc:Zn[oS]},appendScopeSetError:{code:sS,desc:Zn[sS]},emptyInputScopeSetError:{code:Ob,desc:Zn[Ob]},DeviceCodePollingCancelled:{code:S9,desc:Zn[S9]},DeviceCodeExpired:{code:R9,desc:Zn[R9]},DeviceCodeUnknownError:{code:k9,desc:Zn[k9]},NoAccountInSilentRequest:{code:$1,desc:Zn[$1]},invalidCacheRecord:{code:aS,desc:Zn[aS]},invalidCacheEnvironment:{code:z1,desc:Zn[z1]},noAccountFound:{code:P9,desc:Zn[P9]},noCryptoObj:{code:Qb,desc:Zn[Qb]},unexpectedCredentialType:{code:B9,desc:Zn[B9]},invalidAssertion:{code:D9,desc:Zn[D9]},invalidClientCredential:{code:N9,desc:Zn[N9]},tokenRefreshRequired:{code:Y1,desc:Zn[Y1]},userTimeoutReached:{code:L9,desc:Zn[L9]},tokenClaimsRequired:{code:cS,desc:Zn[cS]},noAuthorizationCodeFromServer:{code:lS,desc:Zn[lS]},bindingKeyNotRemovedError:{code:M9,desc:Zn[M9]},logoutNotSupported:{code:uS,desc:Zn[uS]},keyIdMissing:{code:dS,desc:Zn[dS]},noNetworkConnectivity:{code:F9,desc:Zn[F9]},userCanceledError:{code:O9,desc:Zn[O9]},missingTenantIdError:{code:Q9,desc:Zn[Q9]},nestedAppAuthBridgeDisabled:{code:U9,desc:Zn[U9]}},Ub=class t extends Xn{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${Zn[e]}: ${r}`:Zn[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function mt(t,e){return new Ub(t,e)}s(mt,"createClientAuthError");var dP={createNewGuid:s(()=>{throw mt(Ti)},"createNewGuid"),base64Decode:s(()=>{throw mt(Ti)},"base64Decode"),base64Encode:s(()=>{throw mt(Ti)},"base64Encode"),base64UrlEncode:s(()=>{throw mt(Ti)},"base64UrlEncode"),encodeKid:s(()=>{throw mt(Ti)},"encodeKid"),async getPublicKeyThumbprint(){throw mt(Ti)},async removeTokenBindingKey(){throw mt(Ti)},async clearKeystore(){throw mt(Ti)},async signJwt(){throw mt(Ti)},async hashString(){throw mt(Ti)}};d();var Ta;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ta||(Ta={}));var N0=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ta.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ta.Info,this.correlationId=o.correlationId||Je.EMPTY_STRING,this.packageName=r||Je.EMPTY_STRING,this.packageVersion=n||Je.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ta[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var dj="@azure/msal-common",fP="15.8.1";d();var K1={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var tl={};ra(tl,{createAccessTokenEntity:()=>yfe,createIdTokenEntity:()=>Afe,createRefreshTokenEntity:()=>Cfe,generateAppMetadataKey:()=>M_t,generateAuthorityMetadataExpiresAt:()=>mj,generateCredentialKey:()=>W9,isAccessTokenEntity:()=>w_t,isAppMetadataEntity:()=>F_t,isAuthorityMetadataEntity:()=>O_t,isAuthorityMetadataExpired:()=>hj,isCredentialEntity:()=>pj,isIdTokenEntity:()=>__t,isRefreshTokenEntity:()=>S_t,isServerTelemetryEntity:()=>N_t,isThrottlingEntity:()=>L_t,updateAuthorityEndpointMetadata:()=>mP,updateCloudDiscoveryMetadata:()=>G9});d();var fj={};ra(fj,{checkMaxAge:()=>q9,extractTokenClaims:()=>J1,getJWSPayload:()=>w6e});d();function J1(t,e){let r=w6e(t);try{let n=e(r);return JSON.parse(n)}catch{throw mt(Mb)}}s(J1,"extractTokenClaims");function w6e(t){if(!t)throw mt(K_);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw mt(Mb);return r[2]}s(w6e,"getJWSPayload");function q9(t,e){if(e===0||Date.now()-3e5>t+e)throw mt(rS)}s(q9,"checkMaxAge");var Qs={};ra(Qs,{delay:()=>T_t,isTokenExpired:()=>pP,nowSeconds:()=>L0,toDateFromSeconds:()=>H9,toSecondsFromDate:()=>I_t,wasClockTurnedBack:()=>gfe});d();function L0(){return Math.round(new Date().getTime()/1e3)}s(L0,"nowSeconds");function I_t(t){return t.getTime()/1e3}s(I_t,"toSecondsFromDate");function H9(t){return t?new Date(Number(t)*1e3):new Date}s(H9,"toDateFromSeconds");function pP(t,e){let r=Number(t)||0;return L0()+e>r}s(pP,"isTokenExpired");function gfe(t){return Number(t)>L0()}s(gfe,"wasClockTurnedBack");function T_t(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(T_t,"delay");function W9(t){return[R_t(t),k_t(t),P_t(t),B_t(t),D_t(t)].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(W9,"generateCredentialKey");function Afe(t,e,r,n,i){return{credentialType:mo.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(Afe,"createIdTokenEntity");function yfe(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let y={homeAccountId:t,credentialType:mo.ACCESS_TOKEN,secret:r,cachedAt:L0().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||Yi.BEARER};if(p&&(y.userAssertionHash=p),u&&(y.refreshOn=u.toString()),h&&(y.requestedClaims=h,y.requestedClaimsHash=g),y.tokenType?.toLowerCase()!==Yi.BEARER.toLowerCase())switch(y.credentialType=mo.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Yi.POP:let E=J1(r,l);if(!E?.cnf?.kid)throw mt(cS);y.keyId=E.cnf.kid;break;case Yi.SSH:y.keyId=m}return y}s(yfe,"createAccessTokenEntity");function Cfe(t,e,r,n,i,o,a){let c={credentialType:mo.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(Cfe,"createRefreshTokenEntity");function pj(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s(pj,"isCredentialEntity");function w_t(t){return t?pj(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===mo.ACCESS_TOKEN||t.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(w_t,"isAccessTokenEntity");function __t(t){return t?pj(t)&&t.hasOwnProperty("realm")&&t.credentialType===mo.ID_TOKEN:!1}s(__t,"isIdTokenEntity");function S_t(t){return t?pj(t)&&t.credentialType===mo.REFRESH_TOKEN:!1}s(S_t,"isRefreshTokenEntity");function R_t(t){return[t.homeAccountId,t.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(R_t,"generateAccountId");function k_t(t){let e=t.credentialType===mo.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(k_t,"generateCredentialId");function P_t(t){return(t.target||"").toLowerCase()}s(P_t,"generateTarget");function B_t(t){return(t.requestedClaimsHash||"").toLowerCase()}s(B_t,"generateClaimsHash");function D_t(t){return t.tokenType&&t.tokenType.toLowerCase()!==Yi.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(D_t,"generateScheme");function N_t(t,e){let r=t.indexOf(el.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(N_t,"isServerTelemetryEntity");function L_t(t,e){let r=!1;t&&(r=t.indexOf(yy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(L_t,"isThrottlingEntity");function M_t({environment:t,clientId:e}){return[v9,t,e].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(M_t,"generateAppMetadataKey");function F_t(t,e){return e?t.indexOf(v9)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(F_t,"isAppMetadataEntity");function O_t(t,e){return e?t.indexOf(cP.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(O_t,"isAuthorityMetadataEntity");function mj(){return L0()+cP.REFRESH_TIME_SECONDS}s(mj,"generateAuthorityMetadataExpiresAt");function mP(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(mP,"updateAuthorityEndpointMetadata");function G9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(G9,"updateCloudDiscoveryMetadata");function hj(t){return t.expiresAt<=L0()}s(hj,"isAuthorityMetadataExpired");d();d();var hP={};ra(hP,{authorityMismatch:()=>X9,authorityUriInsecure:()=>pS,cannotAllowPlatformBroker:()=>J9,cannotSetOIDCOptions:()=>K9,claimsRequestParsingError:()=>j9,emptyInputScopesError:()=>hS,invalidAuthenticationHeader:()=>Y9,invalidAuthorityMetadata:()=>CS,invalidClaims:()=>qb,invalidCloudDiscoveryMetadata:()=>Hb,invalidCodeChallengeMethod:()=>V9,logoutRequestEmpty:()=>AS,missingNonceAuthenticationHeader:()=>z9,missingSshJwk:()=>X1,missingSshKid:()=>$9,pkceParamsMissing:()=>yS,redirectUriEmpty:()=>fS,tokenRequestEmpty:()=>gS,untrustedAuthority:()=>ES,urlEmptyError:()=>mS,urlParseError:()=>Cy});d();var fS="redirect_uri_empty",j9="claims_request_parsing_error",pS="authority_uri_insecure",Cy="url_parse_error",mS="empty_url_error",hS="empty_input_scopes_error",qb="invalid_claims",gS="token_request_empty",AS="logout_request_empty",V9="invalid_code_challenge_method",yS="pkce_params_missing",Hb="invalid_cloud_discovery_metadata",CS="invalid_authority_metadata",ES="untrusted_authority",X1="missing_ssh_jwk",$9="missing_ssh_kid",z9="missing_nonce_authentication_header",Y9="invalid_authentication_header",K9="cannot_set_OIDCOptions",J9="cannot_allow_platform_broker",X9="authority_mismatch";var Fa={[fS]:"A redirect URI is required for all calls, and none has been set.",[j9]:"Could not parse the given claims request object.",[pS]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Cy]:"URL could not be parsed into appropriate segments.",[mS]:"URL was empty or null.",[hS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[qb]:"Given claims parameter must be a stringified JSON object.",[gS]:"Token request was empty and not found in cache.",[AS]:"The logout request was null or undefined.",[V9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[yS]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Hb]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[CS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ES]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[X1]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[$9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[z9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Y9]:"Invalid authentication header provided",[K9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[J9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[X9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Efe={redirectUriNotSet:{code:fS,desc:Fa[fS]},claimsRequestParsingError:{code:j9,desc:Fa[j9]},authorityUriInsecure:{code:pS,desc:Fa[pS]},urlParseError:{code:Cy,desc:Fa[Cy]},urlEmptyError:{code:mS,desc:Fa[mS]},emptyScopesError:{code:hS,desc:Fa[hS]},invalidClaimsRequest:{code:qb,desc:Fa[qb]},tokenRequestEmptyError:{code:gS,desc:Fa[gS]},logoutRequestEmptyError:{code:AS,desc:Fa[AS]},invalidCodeChallengeMethod:{code:V9,desc:Fa[V9]},invalidCodeChallengeParams:{code:yS,desc:Fa[yS]},invalidCloudDiscoveryMetadata:{code:Hb,desc:Fa[Hb]},invalidAuthorityMetadata:{code:CS,desc:Fa[CS]},untrustedAuthority:{code:ES,desc:Fa[ES]},missingSshJwk:{code:X1,desc:Fa[X1]},missingSshKid:{code:$9,desc:Fa[$9]},missingNonceAuthenticationHeader:{code:z9,desc:Fa[z9]},invalidAuthenticationHeader:{code:Y9,desc:Fa[Y9]},cannotSetOIDCOptions:{code:K9,desc:Fa[K9]},cannotAllowPlatformBroker:{code:J9,desc:Fa[J9]},authorityMismatch:{code:X9,desc:Fa[X9]}},gP=class t extends Xn{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Fa[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function rs(t){return new gP(t)}s(rs,"createClientConfigurationError");d();var ua=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var Sc=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?ua.trimArrayEntries([...e]):[],n=r?ua.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw rs(hS);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||Je.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(Je.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return ffe.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw mt(sS)}}removeScope(e){if(!e)throw mt(oS);this.scopes.delete(e.trim())}removeOIDCScopes(){ffe.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw mt(Ob);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw mt(Ob);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):Je.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function AP(t,e){if(!t)throw mt(Y_);try{let r=e(t);return JSON.parse(r)}catch{throw mt(Lb)}}s(AP,"buildClientInfo");function Ey(t){if(!t)throw mt(Lb);let e=t.split(Ma.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Je.EMPTY_STRING:e[1]}}s(Ey,"buildClientInfoFromHomeAccountId");d();function _6e(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(_6e,"tenantIdMatchesHomeTenant");function Z9(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:_6e(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:_6e(r,t)}}s(Z9,"buildTenantProfile");function gj(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=Z9(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(gj,"updateAccountTenantProfileData");d();var om={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function Aj(t){return t&&(t.tid||t.tfp||t.acr)||null}s(Aj,"getTenantIdFromIdTokenClaims");d();var ju={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var lu=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===om.Adfs?i.authorityType=$_.ADFS_ACCOUNT_TYPE:r.protocolMode===ju.OIDC?i.authorityType=$_.GENERIC_ACCOUNT_TYPE:i.authorityType=$_.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=AP(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw mt(z1);i.environment=a,i.realm=o?.utid||Aj(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=Z9(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||$_.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===om.Adfs||r===om.Dsts)){if(e)try{let a=AP(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var uu={};ra(uu,{getDeserializedResponse:()=>vfe,mapToQueryString:()=>vy,stripLeadingHashOrQuery:()=>S6e});d();function S6e(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(S6e,"stripLeadingHashOrQuery");function vfe(t){if(!t||t.indexOf("=")<0)return null;try{let e=S6e(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw mt(Z_)}return null}s(vfe,"getDeserializedResponse");function vy(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(vy,"mapToQueryString");var wi=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw rs(mS);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return ua.endsWith(r,"?")?r=r.slice(0,-1):ua.endsWith(r,"?/")&&(r=r.slice(0,-2)),ua.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw rs(Cy)}if(!e.HostNameAndPort||!e.PathSegments)throw rs(Cy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw rs(pS)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===If.COMMON||n[0]===If.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw rs(Cy);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw rs(Cy);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===Je.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!vfe(e)}};var k6e={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},xfe=k6e.endpointMetadata,bfe=k6e.instanceDiscoveryMetadata,Ife=new Set;bfe.metadata.forEach(t=>{t.aliases.forEach(e=>{Ife.add(e)})});function P6e(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wi(n).getUrlComponents().HostNameAndPort;r=R6e(i,t.cloudDiscoveryMetadata?.metadata,Id.CONFIG,e)||R6e(i,bfe.metadata,Id.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(P6e,"getAliasesFromStaticSources");function R6e(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=eL(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(R6e,"getAliasesFromMetadata");function B6e(t){return eL(bfe.metadata,t)}s(B6e,"getCloudDiscoveryMetadataFromHardcodedValues");function eL(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(eL,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var Tfe="cache_quota_exceeded",yj="cache_error_unknown";var wfe={[Tfe]:"Exceeded cache storage capacity.",[yj]:"Unexpected error occurred when using cache storage."},tL=class t extends Xn{static{s(this,"CacheError")}constructor(e,r){let n=r||(wfe[e]?wfe[e]:wfe[yj]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function D6e(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new tL(Tfe):new tL(t.name,t.message):new tL(yj)}s(D6e,"createCacheError");var Wb=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(dj,fP),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=J1(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=gj(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw mt(aS);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Xn?i:D6e(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=Sc.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&Sc.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(Ma.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Ma.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(mo.ID_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(mo.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(mo.REFRESH_TOKEN.toLowerCase())>-1){let n=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${this.clientId}${Ma.CACHE_KEY_SEPARATOR}`,i=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${j1}${Ma.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===Yi.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Yi.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=lu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&f.set(h,m)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=Sc.createSearchScopes(r.scopes),c=r.authenticationScheme||Yi.BEARER,l=c&&c.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(W9(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?j1:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw mt(nS);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===j1)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=P6e(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==mo.ACCESS_TOKEN&&e.credentialType!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Sc.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(v9)!==-1}isAuthorityMetadata(e){return e.indexOf(cP.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${cP.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},rL=class extends Wb{static{s(this,"DefaultStorageClass")}async setAccount(){throw mt(Ti)}getAccount(){throw mt(Ti)}async setIdTokenCredential(){throw mt(Ti)}getIdTokenCredential(){throw mt(Ti)}async setAccessTokenCredential(){throw mt(Ti)}getAccessTokenCredential(){throw mt(Ti)}async setRefreshTokenCredential(){throw mt(Ti)}getRefreshTokenCredential(){throw mt(Ti)}setAppMetadata(){throw mt(Ti)}getAppMetadata(){throw mt(Ti)}setServerTelemetry(){throw mt(Ti)}getServerTelemetry(){throw mt(Ti)}setAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadataKeys(){throw mt(Ti)}setThrottlingCache(){throw mt(Ti)}getThrottlingCache(){throw mt(Ti)}removeItem(){throw mt(Ti)}getKeys(){throw mt(Ti)}getAccountKeys(){throw mt(Ti)}getTokenKeys(){throw mt(Ti)}};d();d();var Ve={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},rZr=new Map([[Ve.AcquireTokenByCode,"ATByCode"],[Ve.AcquireTokenByRefreshToken,"ATByRT"],[Ve.AcquireTokenSilent,"ATS"],[Ve.AcquireTokenSilentAsync,"ATSAsync"],[Ve.AcquireTokenPopup,"ATPopup"],[Ve.AcquireTokenRedirect,"ATRedirect"],[Ve.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ve.CryptoOptsSignJwt,"CryptoSignJwt"],[Ve.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ve.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ve.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ve.SsoSilent,"SsoSlt"],[Ve.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ve.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ve.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ve.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ve.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ve.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ve.BrokerHandhshake,"BrokerHandshake"],[Ve.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ve.AcquireTokenByBroker,"ATByBroker"],[Ve.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ve.RefreshTokenClientAcquireToken,"RTClientAT"],[Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ve.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ve.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ve.AcquireTokenFromCache,"ATFromCache"],[Ve.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ve.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ve.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ve.InitializeBaseRequest,"InitBaseReq"],[Ve.InitializeSilentRequest,"InitSltReq"],[Ve.InitializeClientApplication,"InitClientApplication"],[Ve.InitializeCache,"InitCache"],[Ve.ImportExistingCache,"importCache"],[Ve.SetUserData,"setUserData"],[Ve.LocalStorageUpdated,"localStorageUpdated"],[Ve.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ve.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ve.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ve.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ve.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ve.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ve.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ve.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ve.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ve.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ve.HandleCodeResponse,"HandleCodeResp"],[Ve.HandleResponseEar,"HandleRespEar"],[Ve.HandleResponseCode,"HandleRespCode"],[Ve.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ve.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ve.AuthClientAcquireToken,"AuthClientAT"],[Ve.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ve.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ve.PopTokenGenerateCnf,"PopTGenCnf"],[Ve.PopTokenGenerateKid,"PopTGenKid"],[Ve.HandleServerTokenResponse,"HandleServerTRes"],[Ve.DeserializeResponse,"DeserializeRes"],[Ve.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ve.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ve.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ve.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ve.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ve.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ve.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ve.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ve.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ve.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ve.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ve.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ve.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ve.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ve.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ve.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ve.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ve.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ve.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ve.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ve.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ve.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ve.GeneratePkceCodes,"GenPkceCodes"],[Ve.GenerateCodeVerifier,"GenCodeVerifier"],[Ve.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ve.Sha256Digest,"Sha256Digest"],[Ve.GetRandomValues,"GetRandomValues"],[Ve.GenerateHKDF,"genHKDF"],[Ve.GenerateBaseKey,"genBaseKey"],[Ve.Base64Decode,"b64Decode"],[Ve.UrlEncodeArr,"urlEncArr"],[Ve.Encrypt,"encrypt"],[Ve.Decrypt,"decrypt"],[Ve.GenerateEarKey,"genEarKey"],[Ve.DecryptEarResponse,"decryptEarResp"]]),N6e={NotStarted:0,InProgress:1,Completed:2};var Cj=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},vS=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:N6e.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new Cj}}startPerformanceMeasurement(){return new Cj}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Q_t={tokenRenewalOffsetSeconds:lP,preventCorsPreflight:!1},U_t={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info,correlationId:Je.EMPTY_STRING},q_t={claimsBasedCachingEnabled:!1},H_t={async sendGetRequestAsync(){throw mt(Ti)},async sendPostRequestAsync(){throw mt(Ti)}},W_t={sku:Je.SKU,version:fP,cpu:Je.EMPTY_STRING,os:Je.EMPTY_STRING},G_t={clientSecret:Je.EMPTY_STRING,clientAssertion:void 0},j_t={azureCloudInstance:K1.None,tenant:`${Je.DEFAULT_COMMON_TENANT}`},V_t={application:{appName:"",appVersion:""}};function L6e({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:m}){let h={...U_t,...r};return{authOptions:$_t(t),systemOptions:{...Q_t,...e},loggerOptions:h,cacheOptions:{...q_t,...n},storageInterface:i||new rL(t.clientId,dP,new N0(h),new vS),networkInterface:o||H_t,cryptoInterface:a||dP,clientCredentials:c||G_t,libraryInfo:{...W_t,...l},telemetry:{...V_t,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}s(L6e,"buildClientConfiguration");function $_t(t){return{clientCapabilities:[],azureCloudOptions:j_t,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s($_t,"buildAuthOptions");function Ej(t){return t.authOptions.authority.options.protocolMode===ju.OIDC}s(Ej,"isOidcProtocolMode");d();var wd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var rr={};ra(rr,{addApplicationTelemetry:()=>oL,addAuthorizationCode:()=>A0e,addBrokerParameters:()=>tE,addCcsOid:()=>Z1,addCcsUpn:()=>Gb,addClaims:()=>_S,addClientAssertion:()=>cL,addClientAssertionType:()=>lL,addClientCapabilitiesToClaims:()=>M6e,addClientId:()=>TS,addClientInfo:()=>RS,addClientSecret:()=>aL,addCodeChallengeParams:()=>cSt,addCodeVerifier:()=>C0e,addCorrelationId:()=>SS,addDeviceCode:()=>lSt,addDomainHint:()=>m0e,addEARParameters:()=>mSt,addExtraQueryParameters:()=>eE,addGrantType:()=>uL,addIdTokenHint:()=>p0e,addInstanceAware:()=>dL,addLibraryInfo:()=>iL,addLoginHint:()=>CP,addLogoutHint:()=>E0e,addNativeBroker:()=>aSt,addNonce:()=>g0e,addOboAssertion:()=>uSt,addPassword:()=>pSt,addPopToken:()=>fL,addPostLogoutRedirectUri:()=>f0e,addPrompt:()=>h0e,addRedirectUri:()=>wS,addRefreshToken:()=>y0e,addRequestTokenUse:()=>dSt,addResponseMode:()=>d0e,addResponseType:()=>sSt,addScopes:()=>IS,addServerTelemetry:()=>mL,addSid:()=>wj,addSshJwk:()=>pL,addState:()=>sL,addThrottling:()=>hL,addUsername:()=>fSt,instrumentBrokerParams:()=>bS});d();var xS={};ra(xS,{ACCESS_TOKEN:()=>K_t,BROKER_CLIENT_ID:()=>nL,BROKER_REDIRECT_URI:()=>Tj,CCS_HEADER:()=>iSt,CLAIMS:()=>kfe,CLIENT_ASSERTION:()=>e0e,CLIENT_ASSERTION_TYPE:()=>t0e,CLIENT_ID:()=>xy,CLIENT_INFO:()=>tSt,CLIENT_REQUEST_ID:()=>Ufe,CLIENT_SECRET:()=>Zfe,CODE:()=>Mfe,CODE_CHALLENGE:()=>Ffe,CODE_CHALLENGE_METHOD:()=>Ofe,CODE_VERIFIER:()=>Qfe,DEVICE_CODE:()=>Xfe,DOMAIN_HINT:()=>c0e,EAR_JWE_CRYPTO:()=>u0e,EAR_JWK:()=>l0e,ERROR:()=>z_t,ERROR_DESCRIPTION:()=>Y_t,EXPIRES_IN:()=>X_t,FOCI:()=>nSt,GRANT_TYPE:()=>Rfe,ID_TOKEN:()=>J_t,ID_TOKEN_HINT:()=>Jfe,INSTANCE_AWARE:()=>yP,LOGIN_HINT:()=>a0e,LOGOUT_HINT:()=>o0e,NATIVE_BROKER:()=>i0e,NONCE:()=>Nfe,OBO_ASSERTION:()=>r0e,ON_BEHALF_OF:()=>rSt,POST_LOGOUT_URI:()=>Kfe,PROMPT:()=>Lfe,REDIRECT_URI:()=>vj,REFRESH_TOKEN:()=>Bfe,REFRESH_TOKEN_EXPIRES_IN:()=>Z_t,REQUESTED_TOKEN_USE:()=>n0e,REQ_CNF:()=>bj,RESPONSE_MODE:()=>Sfe,RESPONSE_TYPE:()=>_fe,RETURN_SPA_CODE:()=>Ij,SCOPE:()=>Pfe,SESSION_STATE:()=>eSt,SID:()=>s0e,STATE:()=>Dfe,TOKEN_TYPE:()=>xj,X_APP_NAME:()=>zfe,X_APP_VER:()=>Yfe,X_CLIENT_CPU:()=>Gfe,X_CLIENT_CURR_TELEM:()=>jfe,X_CLIENT_EXTRA_SKU:()=>oSt,X_CLIENT_LAST_TELEM:()=>Vfe,X_CLIENT_OS:()=>Wfe,X_CLIENT_SKU:()=>qfe,X_CLIENT_VER:()=>Hfe,X_MS_LIB_CAPABILITY:()=>$fe});d();var xy="client_id",vj="redirect_uri",_fe="response_type",Sfe="response_mode",Rfe="grant_type",kfe="claims",Pfe="scope",z_t="error",Y_t="error_description",K_t="access_token",J_t="id_token",Bfe="refresh_token",X_t="expires_in",Z_t="refresh_token_expires_in",Dfe="state",Nfe="nonce",Lfe="prompt",eSt="session_state",tSt="client_info",Mfe="code",Ffe="code_challenge",Ofe="code_challenge_method",Qfe="code_verifier",Ufe="client-request-id",qfe="x-client-SKU",Hfe="x-client-VER",Wfe="x-client-OS",Gfe="x-client-CPU",jfe="x-client-current-telemetry",Vfe="x-client-last-telemetry",$fe="x-ms-lib-capability",zfe="x-app-name",Yfe="x-app-ver",Kfe="post_logout_redirect_uri",Jfe="id_token_hint",Xfe="device_code",Zfe="client_secret",e0e="client_assertion",t0e="client_assertion_type",xj="token_type",bj="req_cnf",r0e="assertion",n0e="requested_token_use",rSt="on_behalf_of",nSt="foci",iSt="X-AnchorMailbox",Ij="return_spa_code",i0e="nativebroker",o0e="logout_hint",s0e="sid",a0e="login_hint",c0e="domain_hint",oSt="x-client-xtra-sku",nL="brk_client_id",Tj="brk_redirect_uri",yP="instance_aware",l0e="ear_jwk",u0e="ear_jwe_crypto";function bS(t,e,r){if(!e)return;let n=t.get(xy);n&&t.has(nL)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(vj)},e)}s(bS,"instrumentBrokerParams");function sSt(t,e){t.set(_fe,e)}s(sSt,"addResponseType");function d0e(t,e){t.set(Sfe,e||Ay.QUERY)}s(d0e,"addResponseMode");function aSt(t){t.set(i0e,"1")}s(aSt,"addNativeBroker");function IS(t,e,r=!0,n=bf){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new Sc(i);t.set(Pfe,o.printScopes())}s(IS,"addScopes");function TS(t,e){t.set(xy,e)}s(TS,"addClientId");function wS(t,e){t.set(vj,e)}s(wS,"addRedirectUri");function f0e(t,e){t.set(Kfe,e)}s(f0e,"addPostLogoutRedirectUri");function p0e(t,e){t.set(Jfe,e)}s(p0e,"addIdTokenHint");function m0e(t,e){t.set(c0e,e)}s(m0e,"addDomainHint");function CP(t,e){t.set(a0e,e)}s(CP,"addLoginHint");function Gb(t,e){t.set(vs.CCS_HEADER,`UPN:${e}`)}s(Gb,"addCcsUpn");function Z1(t,e){t.set(vs.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(Z1,"addCcsOid");function wj(t,e){t.set(s0e,e)}s(wj,"addSid");function _S(t,e,r){let n=M6e(e,r);try{JSON.parse(n)}catch{throw rs(qb)}t.set(kfe,n)}s(_S,"addClaims");function SS(t,e){t.set(Ufe,e)}s(SS,"addCorrelationId");function iL(t,e){t.set(qfe,e.sku),t.set(Hfe,e.version),e.os&&t.set(Wfe,e.os),e.cpu&&t.set(Gfe,e.cpu)}s(iL,"addLibraryInfo");function oL(t,e){e?.appName&&t.set(zfe,e.appName),e?.appVersion&&t.set(Yfe,e.appVersion)}s(oL,"addApplicationTelemetry");function h0e(t,e){t.set(Lfe,e)}s(h0e,"addPrompt");function sL(t,e){e&&t.set(Dfe,e)}s(sL,"addState");function g0e(t,e){t.set(Nfe,e)}s(g0e,"addNonce");function cSt(t,e,r){if(e&&r)t.set(Ffe,e),t.set(Ofe,r);else throw rs(yS)}s(cSt,"addCodeChallengeParams");function A0e(t,e){t.set(Mfe,e)}s(A0e,"addAuthorizationCode");function lSt(t,e){t.set(Xfe,e)}s(lSt,"addDeviceCode");function y0e(t,e){t.set(Bfe,e)}s(y0e,"addRefreshToken");function C0e(t,e){t.set(Qfe,e)}s(C0e,"addCodeVerifier");function aL(t,e){t.set(Zfe,e)}s(aL,"addClientSecret");function cL(t,e){e&&t.set(e0e,e)}s(cL,"addClientAssertion");function lL(t,e){e&&t.set(t0e,e)}s(lL,"addClientAssertionType");function uSt(t,e){t.set(r0e,e)}s(uSt,"addOboAssertion");function dSt(t,e){t.set(n0e,e)}s(dSt,"addRequestTokenUse");function uL(t,e){t.set(Rfe,e)}s(uL,"addGrantType");function RS(t){t.set(T6e,"1")}s(RS,"addClientInfo");function dL(t){t.has(yP)||t.set(yP,"true")}s(dL,"addInstanceAware");function eE(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(eE,"addExtraQueryParameters");function M6e(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw rs(qb)}return e&&e.length>0&&(r.hasOwnProperty(V_.ACCESS_TOKEN)||(r[V_.ACCESS_TOKEN]={}),r[V_.ACCESS_TOKEN][V_.XMS_CC]={values:e}),JSON.stringify(r)}s(M6e,"addClientCapabilitiesToClaims");function fSt(t,e){t.set(b9.username,e)}s(fSt,"addUsername");function pSt(t,e){t.set(b9.password,e)}s(pSt,"addPassword");function fL(t,e){e&&(t.set(xj,Yi.POP),t.set(bj,e))}s(fL,"addPopToken");function pL(t,e){e&&(t.set(xj,Yi.SSH),t.set(bj,e))}s(pL,"addSshJwk");function mL(t,e){t.set(jfe,e.generateCurrentRequestHeaderValue()),t.set(Vfe,e.generateLastRequestHeaderValue())}s(mL,"addServerTelemetry");function hL(t){t.set($fe,yy.X_MS_LIB_CAPABILITY_VALUE)}s(hL,"addThrottling");function E0e(t,e){t.set(o0e,e)}s(E0e,"addLogoutHint");function tE(t,e,r){t.has(nL)||t.set(nL,e),t.has(Tj)||t.set(Tj,r)}s(tE,"addBrokerParameters");function mSt(t,e){t.set(l0e,encodeURIComponent(e)),t.set(u0e,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(mSt,"addEARParameters");var Sj={};ra(Sj,{createDiscoveredInstance:()=>x0e});d();d();d();function F6e(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(F6e,"isOpenIdConfigResponse");d();function O6e(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(O6e,"isCloudInstanceDiscoveryResponse");d();function Q6e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(Q6e,"isCloudInstanceDiscoveryErrorResponse");d();d();var U6e=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),Ki=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var gL=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=z_.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Je.IMDS_VERSION,i);if(o.status===Jn.SUCCESS&&(n=o.body,r.region_source=z_.IMDS),o.status===Jn.BAD_REQUEST){let a=await Ki(this.getCurrentVersion.bind(this),Ve.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=z_.FAILED_AUTO_DETECTION,null;let c=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Jn.SUCCESS&&(n=c.body,r.region_source=z_.IMDS)}}catch{return r.region_source=z_.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=z_.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,Je.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?format=json`,e);return r.status===Jn.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};gL.IMDS_OPTIONS={headers:{Metadata:"true"}};var og=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new gL(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL))return om.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case Je.ADFS:return om.Adfs;case Je.DSTS:return om.Dsts}return om.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw mt(Td)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw mt(Td)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw mt(Td)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw mt(uS);return this.replacePath(this.metadata.end_session_endpoint)}else throw mt(Td)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw mt(Td)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw mt(Td)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===om.Default&&this.protocolMode!==ju.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wi(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new wi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===om.Adfs||this.protocolMode===ju.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await Ki(this.updateCloudDiscoveryMetadata.bind(this),Ve.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await Ki(this.updateEndpointMetadata.bind(this),Ve.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:mj(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Id.CACHE&&n?.source!==Id.CACHE&&(e.expiresAt=mj(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Id.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);mP(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await Ki(this.getEndpointMetadataFromNetwork.bind(this),Ve.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),mP(e,n,!0),Id.NETWORK;throw mt(X_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),mP(e,r,!1),{source:Id.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return mP(e,i,!1),{source:Id.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=hj(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Id.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw rs(CS)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return F6e(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in xfe?xfe[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==Je.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=lj.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await Ki(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ve.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=lj.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=lj.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await Ki(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return G9(e,n,!0),Id.NETWORK;throw rs(ES)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Je.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),G9(e,r,!1),Id.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=B6e(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),G9(e,i,!1),Id.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=hj(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Id.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===om.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=eL(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),rs(Hb)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${Je.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(O6e(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(Q6e(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===Je.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=eL(a,this.hostnameAndPort)}catch(i){if(i instanceof Xn)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==K1.None){let i=r.tenant?r.tenant:Je.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Je.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw mt(Td)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Ife.has(e)}static isPublicCloudAuthority(e){return Je.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wi(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${Je.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=wi.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wi(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${Je.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};og.reservedTenantDomains=new Set(["{tenant}","{tenantid}",If.COMMON,If.CONSUMERS,If.ORGANIZATIONS]);function q6e(t){let n=new wi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case If.COMMON:case If.ORGANIZATIONS:case If.CONSUMERS:return;default:return n}}s(q6e,"getTenantFromAuthorityString");function _j(t){return t.endsWith(Je.FORWARD_SLASH)?t:`${t}${Je.FORWARD_SLASH}`}s(_j,"formatAuthorityUri");function v0e(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw rs(Hb)}return{canonicalAuthority:t.authority?_j(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(v0e,"buildStaticAuthorityOptions");async function x0e(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ve.AuthorityFactoryCreateDiscoveredInstance,o);let c=og.transformCIAMAuthority(_j(t)),l=new og(c,e,r,n,i,o,a);try{return await Ki(l.resolveEndpointsAsync.bind(l),Ve.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw mt(Td)}}s(x0e,"createDiscoveredInstance");d();d();var _d=class t extends Xn{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function EP(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(EP,"getRequestThumbprint");var AL=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${yy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new _d(o.errorCodes?.join(" ")||Je.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[vs.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(vs.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||yy.DEFAULT_THROTTLE_TIME_SECONDS),n+yy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=EP(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var Rj=class t extends Xn{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var du=class{static{s(this,"BaseClient")}constructor(e,r){this.config=L6e(e),this.logger=new N0(this.config.loggerOptions,dj,fP),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[vs.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case wd.HOME_ACCOUNT_ID:try{let n=Ey(e.credential);r[vs.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case wd.UPN:r[vs.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){AL.preProcess(this.cacheManager,e,i);let o;try{o=await Ki(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ve.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[vs.X_MS_HTTP_VERSION]||"",requestId:a[vs.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof Rj){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[vs.X_MS_HTTP_VERSION]||"",requestId:c[vs.X_MS_REQUEST_ID]||"",contentTypeHeader:c[vs.CONTENT_TYPE]||void 0,contentLengthHeader:c[vs.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof Xn?a:mt(J_)}return AL.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ve.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await x0e(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&tE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&eE(r,e.tokenQueryParameters),SS(r,e.correlationId),bS(r,e.correlationId,this.performanceClient),vy(r)}};d();d();var Pj={};ra(Pj,{badToken:()=>Vb,consentRequired:()=>I0e,interactionRequired:()=>b0e,loginRequired:()=>T0e,nativeAccountUnavailable:()=>yL,noTokensFound:()=>jb,refreshTokenExpired:()=>CL,uxNotAllowed:()=>kj});d();var jb="no_tokens_found",yL="native_account_unavailable",CL="refresh_token_expired",kj="ux_not_allowed",b0e="interaction_required",I0e="consent_required",T0e="login_required",Vb="bad_token";var H6e=[b0e,I0e,T0e,Vb,kj],hSt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Bj={[jb]:"No refresh token found in the cache. Please sign-in.",[yL]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[CL]:"Refresh token has expired.",[Vb]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[kj]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},w0e={noTokensFoundError:{code:jb,desc:Bj[jb]},native_account_unavailable:{code:yL,desc:Bj[yL]},bad_token:{code:Vb,desc:Bj[Vb]}},M0=class t extends Xn{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||Je.EMPTY_STRING,this.traceId=o||Je.EMPTY_STRING,this.correlationId=a||Je.EMPTY_STRING,this.claims=c||Je.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function Dj(t,e,r){let n=!!t&&H6e.indexOf(t)>-1,i=!!r&&hSt.indexOf(r)>-1,o=!!e&&H6e.some(a=>e.indexOf(a)>-1);return n||o||i}s(Dj,"isInteractionRequiredError");function Nj(t){return new M0(t,Bj[t])}s(Nj,"createInteractionRequiredAuthError");d();var Lj=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${Je.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw mt(Qb);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw mt(Qb);if(!r)throw mt(ig);try{let n=r.split(Je.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(Je.RESOURCE_DELIM):Je.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||Je.EMPTY_STRING,libraryState:c}}catch{throw mt(ig)}}};d();var gSt={SW:"sw"},$b=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateCnf,e.correlationId);let n=await Ki(this.generateKid.bind(this),Ve.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:gSt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new wi(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:L0(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var F0=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var ic=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||Je.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Je.NOT_AVAILABLE} - Description: ${e.error_description||Je.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Je.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Je.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new _d(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=Jn.SERVER_ERROR_RANGE_START&&e.status<=Jn.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=Jn.CLIENT_ERROR_RANGE_START&&e.status<=Jn.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw Dj(e.error,e.error_description,e.suberror)?new M0(e.error,e.error_description,e.suberror,e.timestamp||Je.EMPTY_STRING,e.trace_id||Je.EMPTY_STRING,e.correlation_id||Je.EMPTY_STRING,e.claims||Je.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ve.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=J1(e.id_token||Je.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw mt(tS);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw mt(V1);q9(g,i.maxAge)}}this.homeAccountIdentifier=lu.generateHomeAccountId(e.client_info||Je.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=Lj.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,f,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new F0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw mt(z1);let u=Aj(o),f,p;e.id_token&&o&&(f=Afe(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=W6e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let y=e.scope?Sc.fromString(e.scope):new Sc(i.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,x=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=n+E,k=_+x,P=b&&b>0?n+b:void 0;m=yfe(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",y.printScopes(),_,k,this.cryptoObj.base64Decode,P,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+E}h=Cfe(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,y)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=Je.EMPTY_STRING,p=[],m=null,h,g,y=Je.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Yi.POP&&!o.popKid){let _=new $b(e),{secret:k,keyId:P}=n.accessToken;if(!P)throw mt(dS);f=await _.signPopToken(k,P,o)}else f=n.accessToken.secret;p=Sc.fromString(n.accessToken.target).asArray(),m=H9(n.accessToken.expiresOn),h=H9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=H9(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===j1?j1:"");let E=a?.oid||a?.sub||"",x=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?gj(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:E,tenantId:x,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||Je.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||Je.EMPTY_STRING,state:c?c.userRequestState:Je.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||Je.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||Je.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function W6e(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let y=g||lu.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),E=y.tenantProfiles||[],x=l||y.realm;if(x&&!E.find(b=>b.tenantId===x)){let b=Z9(r,y.localAccountId,x,o);E.push(b)}return y.tenantProfiles=E,y}s(W6e,"buildAccountToCache");d();async function Sd(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(Sd,"getClientAssertion");var EL=class extends du{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ve.AuthClientAcquireToken,e.correlationId),!e.code)throw mt(iS);let n=L0(),i=await Ki(this.executeTokenRequest.bind(this),Ve.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[vs.X_MS_REQUEST_ID],a=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),Ki(a.handleServerTokenResponse.bind(a),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw rs(AS);let r=this.createLogoutUrlQueryString(e);return wi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=AP(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ma.CLIENT_INFO_SEPARATOR}${u.utid}`,type:wd.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=EP(this.config.authOptions.clientId,r);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ve.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(TS(r,e.embeddedClientId||e.tokenBodyParameters?.[xy]||this.config.authOptions.clientId),this.includeRedirectUri)wS(r,e.redirectUri);else if(!e.redirectUri)throw rs(fS);if(IS(r,e.scopes,!0,this.oidcDefaultScopes),A0e(r,e.code),iL(r,this.config.libraryInfo),oL(r,this.config.telemetry.application),hL(r),this.serverTelemetryManager&&!Ej(this.config)&&mL(r,this.serverTelemetryManager),e.codeVerifier&&C0e(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&aL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;cL(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lL(r,i.assertionType)}if(uL(r,Tf.AUTHORIZATION_CODE_GRANT),RS(r),e.authenticationScheme===Yi.POP){let i=new $b(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await Ki(i.generateCnf.bind(i),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,fL(r,o)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)pL(r,e.sshJwk);else throw rs(X1);(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_S(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=AP(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${Ma.CLIENT_INFO_SEPARATOR}${i.utid}`,type:wd.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case wd.HOME_ACCOUNT_ID:try{let i=Ey(n.credential);Z1(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case wd.UPN:Gb(r,n.credential);break}return e.embeddedClientId&&tE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&eE(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Ij])&&eE(r,{[Ij]:"1"}),bS(r,e.correlationId,this.performanceClient),vy(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&f0e(r,e.postLogoutRedirectUri),e.correlationId&&SS(r,e.correlationId),e.idTokenHint&&p0e(r,e.idTokenHint),e.state&&sL(r,e.state),e.logoutHint&&E0e(r,e.logoutHint),e.extraQueryParameters&&eE(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&dL(r),vy(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var ASt=300,kS=class extends du{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireToken,e.correlationId);let r=L0(),n=await Ki(this.executeTokenRequest.bind(this),Ve.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[vs.X_MS_REQUEST_ID],o=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),Ki(o.handleServerTokenResponse.bind(o),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw rs(gS);if(this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw mt($1);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof M0&&n.errorCode===jb,o=n instanceof _d&&n.errorCode===x9.INVALID_GRANT_ERROR&&n.subError===x9.CLIENT_MISMATCH_ERROR;if(i||o)return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=U6e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ve.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw Nj(jb);if(n.expiresOn&&pP(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||ASt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Nj(CL);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Yi.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:wd.HOME_ACCOUNT_ID}};try{return await Ki(this.acquireToken.bind(this),Ve.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof M0&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===Vb)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=W9(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(r.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=EP(this.config.authOptions.clientId,e);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ve.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(TS(r,e.embeddedClientId||e.tokenBodyParameters?.[xy]||this.config.authOptions.clientId),e.redirectUri&&wS(r,e.redirectUri),IS(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),uL(r,Tf.REFRESH_TOKEN_GRANT),RS(r),iL(r,this.config.libraryInfo),oL(r,this.config.telemetry.application),hL(r),this.serverTelemetryManager&&!Ej(this.config)&&mL(r,this.serverTelemetryManager),y0e(r,e.refreshToken),this.config.clientCredentials.clientSecret&&aL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;cL(r,await Sd(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lL(r,n.assertionType)}if(e.authenticationScheme===Yi.POP){let n=new $b(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await Ki(n.generateCnf.bind(n),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,fL(r,i)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)pL(r,e.sshJwk);else throw rs(X1);if((!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_S(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case wd.HOME_ACCOUNT_ID:try{let n=Ey(e.ccsCredential.credential);Z1(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case wd.UPN:Gb(r,e.ccsCredential.credential);break}return e.embeddedClientId&&tE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&eE(r,e.tokenBodyParameters),bS(r,e.correlationId,this.performanceClient),vy(r)}};d();var vL=class extends du{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientAcquireCachedToken,e.correlationId);let r=us.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ua.isEmptyObj(e.claims))throw this.setCacheOutcome(us.FORCE_REFRESH_OR_CLAIMS,e.correlationId),mt(Y1);if(!e.account)throw mt($1);let n=e.account.tenantId||q6e(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(gfe(o.cachedAt)||pP(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),mt(Y1);o.refreshOn&&pP(o.refreshOn,0)&&(r=us.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN,e.correlationId),mt(Y1);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ki(this.generateResultFromCacheRecord.bind(this),Ve.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==us.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=J1(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw mt(V1);q9(i,r.maxAge)}return ic.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var xL={};ra(xL,{getAuthorizationCodePayload:()=>ESt,getAuthorizeUrl:()=>CSt,getStandardAuthorizeRequestParameters:()=>ySt,validateAuthorizationResponse:()=>G6e});d();function ySt(t,e,r,n){let i=e.correlationId,o=new Map;TS(o,e.embeddedClientId||e.extraQueryParameters?.[xy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(IS(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),wS(o,e.redirectUri),SS(o,i),d0e(o,e.responseMode),RS(o),e.prompt&&(h0e(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(m0e(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==Nb.SELECT_ACCOUNT)if(e.sid&&e.prompt===Nb.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),wj(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=xSt(e.account),l=bSt(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),CP(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=Ey(e.account.homeAccountId);Z1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===Nb.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),wj(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=Ey(e.account.homeAccountId);Z1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),CP(o,e.loginHint),Gb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),CP(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=Ey(e.account.homeAccountId);Z1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),CP(o,e.loginHint),Gb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&g0e(o,e.nonce),e.state&&sL(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&_S(o,e.claims,t.clientCapabilities),e.embeddedClientId&&tE(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(yP))&&dL(o),o}s(ySt,"getStandardAuthorizeRequestParameters");function CSt(t,e,r,n){let i=vy(e,r,n);return wi.appendQueryString(t.authorizationEndpoint,i)}s(CSt,"getAuthorizeUrl");function ESt(t,e){if(G6e(t,e),!t.code)throw mt(lS);return t}s(ESt,"getAuthorizationCodePayload");function G6e(t,e){if(!t.state||!e)throw t.state?mt(Fb,"Cached State"):mt(Fb,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw mt(ig,t.state)}try{n=decodeURIComponent(e)}catch{throw mt(ig,t.state)}if(r!==n)throw mt(eS);if(t.error||t.error_description||t.suberror){let i=vSt(t);throw Dj(t.error,t.error_description,t.suberror)?new M0(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new _d(t.error||"",t.error_description,t.suberror,i)}}s(G6e,"validateAuthorizationResponse");function vSt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(vSt,"parseServerErrorNo");function xSt(t){return t.idTokenClaims?.sid||null}s(xSt,"extractAccountSid");function bSt(t){return t.idTokenClaims?.login_hint||null}s(bSt,"extractLoginHint");d();var j6e=",",V6e="|";function ISt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(j6e),c.length<4)return e}else c=Array.from({length:4},()=>V6e);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&TSt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(j6e)}s(ISt,"makeExtraSkuString");function TSt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(V6e))}s(TSt,"setSku");var PS=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=us.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Je.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Je.EMPTY_STRING,this.telemetryCacheKey=el.CACHE_KEY+Ma.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${el.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(el.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(el.VALUE_SEPARATOR);return[el.SCHEMA_VERSION,a,i].join(el.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(el.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(el.VALUE_SEPARATOR),o=e.errors.length,a=r<o?el.OVERFLOW_TRUE:el.OVERFLOW_FALSE,c=[o,a].join(el.VALUE_SEPARATOR);return[el.SCHEMA_VERSION,e.cacheHits,n,i,c].join(el.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=el.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Xn?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(el.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||Je.EMPTY_STRING,c=e.failedRequests[2*r+1]||Je.EMPTY_STRING,l=e.errors[r]||Je.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<el.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||Je.EMPTY_STRING),e.push(this.regionSource||Je.EMPTY_STRING),e.push(this.regionOutcome||Je.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return ISt(e)}};var rE=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new lu;Wb.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var $6e="system_assigned_managed_identity",PSt="managed_identity",S0e=`https://login.microsoftonline.com/${PSt}/`,wf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},Rc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Nn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Vn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},wa={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Us={GET:"get",POST:"post"},Mj={SUCCESS_RANGE_START:Jn.SUCCESS_RANGE_START,SUCCESS_RANGE_END:Jn.SUCCESS_RANGE_END,SERVER_ERROR:Jn.SERVER_ERROR},z6e="REGION_NAME",Y6e="MSAL_FORCE_REGION",K6e=32,J6e={SHA256:"sha256"},Fj={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},rl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},nE={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},sm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},Oj={INTERVAL_MS:100,TIMEOUT_MS:5e3},X6e=4096;d();d();d();d();var vP=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var Qj=Ne(require("http"),1),R0e=Ne(require("https"),1);var xP=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?Z6e(e,this.proxyUrl,Us.GET,r,this.customAgentOptions,n):e9e(e,Us.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?Z6e(e,this.proxyUrl,Us.POST,r,this.customAgentOptions):e9e(e,Us.POST,r,this.customAgentOptions)}},Z6e=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new Qj.default.Agent(i));let f="";if(r===Us.POST){let m=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((m,h)=>{let g=Qj.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(y,E)=>{let x=y?.statusCode||Mj.SERVER_ERROR;(x<Mj.SUCCESS_RANGE_START||x>Mj.SUCCESS_RANGE_END)&&(g.destroy(),E.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),E.write(p);let b=[];E.on("data",_=>{b.push(_)}),E.on("end",()=>{let k=Buffer.concat([...b]).toString().split(`\r
`),P=parseInt(k[0].split(" ")[1]),N=k[0].split(" ").slice(2).join(" "),M=k[k.length-1],J=k.slice(1,k.length-2),pe=new Map;J.forEach(ce=>{let ie=ce.split(new RegExp(/:\s(.*)/s)),V=ie[0],Q=ie[1];try{let z=JSON.parse(Q);z&&typeof z=="object"&&(Q=z)}catch{}pe.set(V,Q)});let G=Object.fromEntries(pe),H=vP.getNetworkResponse(G,t9e(P,N,G,M),P);(P<Jn.SUCCESS_RANGE_START||P>Jn.SUCCESS_RANGE_END)&&H.body.error!==rl.AUTHORIZATION_PENDING&&g.destroy(),m(H)}),E.on("error",_=>{g.destroy(),E.destroy(),h(new Error(_.toString()))})}),g.on("error",y=>{g.destroy(),h(new Error(y.toString()))})})},"networkRequestViaProxy"),e9e=s((t,e,r,n,i)=>{let o=e===Us.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...vP.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new R0e.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let m;u.protocol==="http:"?m=Qj.default.request(u):m=R0e.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,y=h.statusCode,E=h.statusMessage,x=[];h.on("data",b=>{x.push(b)}),h.on("end",()=>{let b=Buffer.concat([...x]).toString(),_=g,k=vP.getNetworkResponse(_,t9e(y,E,_,b),y);(y<Jn.SUCCESS_RANGE_START||y>Jn.SUCCESS_RANGE_END)&&k.body.error!==rl.AUTHORIZATION_PENDING&&m.destroy(),f(k)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),t9e=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=Jn.CLIENT_ERROR_RANGE_START&&t<=Jn.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=Jn.SERVER_ERROR_RANGE_START&&t<=Jn.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var Uj="invalid_file_extension",qj="invalid_file_path",zb="invalid_managed_identity_id_type",Hj="invalid_secret",r9e="missing_client_id",n9e="network_unavailable",Wj="platform_not_supported",Gj="unable_to_create_azure_arc",jj="unable_to_create_cloud_shell",Vj="unable_to_create_source",bL="unable_to_read_secret_file",i9e="user_assigned_not_available_at_runtime",$j="www_authenticate_header_missing",zj="www_authenticate_header_unsupported_format",BS={[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Nn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Nn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Nn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var BSt={[Uj]:"The file path in the WWW-Authenticate header does not contain a .key file.",[qj]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[zb]:"More than one ManagedIdentityIdType was provided.",[Hj]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Wj]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[r9e]:"A ManagedIdentityId id was not provided.",[BS.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[BS.IDENTITY_ENDPOINT]:`The Managed Identity's '${Nn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[BS.IMDS_ENDPOINT]:`The Managed Identity's '${Nn.IMDS_ENDPOINT}' environment variable is malformed.`,[BS.MSI_ENDPOINT]:`The Managed Identity's '${Nn.MSI_ENDPOINT}' environment variable is malformed.`,[n9e]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Gj]:"Azure Arc Managed Identities can only be system assigned.",[jj]:"Cloud Shell Managed Identities can only be system assigned.",[Vj]:"Unable to create a Managed Identity source based on environment variables.",[bL]:"Unable to read the secret file.",[i9e]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[$j]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[zj]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},k0e=class t extends Xn{static{s(this,"ManagedIdentityError")}constructor(e){super(e,BSt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function oc(t){return new k0e(t)}s(oc,"createManagedIdentityError");var Yj=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw oc(zb);this.id=r,this.idType=wa.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw oc(zb);this.id=n,this.idType=wa.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw oc(zb);this.id=i,this.idType=wa.USER_ASSIGNED_OBJECT_ID}else this.id=$6e,this.idType=wa.SYSTEM_ASSIGNED}};d();var wl={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},_f=class t extends Xn{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(wl.invalidLoopbackAddressType.code,`${wl.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(wl.unableToLoadRedirectUri.code,`${wl.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(wl.noAuthCodeInResponse.code,`${wl.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(wl.noLoopbackServerExists.code,`${wl.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(wl.loopbackServerAlreadyExists.code,`${wl.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(wl.loopbackServerTimeout.code,`${wl.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(wl.stateNotFoundError.code,wl.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(wl.thumbprintMissing.code,wl.thumbprintMissing.desc)}};var DSt={clientId:Je.EMPTY_STRING,authority:Je.DEFAULT_AUTHORITY,clientSecret:Je.EMPTY_STRING,clientAssertion:Je.EMPTY_STRING,clientCertificate:{thumbprint:Je.EMPTY_STRING,thumbprintSha256:Je.EMPTY_STRING,privateKey:Je.EMPTY_STRING,x5c:Je.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:Je.EMPTY_STRING,authorityMetadata:Je.EMPTY_STRING,clientCapabilities:[],protocolMode:ju.AAD,azureCloudOptions:{azureCloudInstance:K1.None,tenant:Je.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},NSt={claimsBasedCachingEnabled:!1},P0e={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info},LSt={loggerOptions:P0e,networkClient:new xP,proxyUrl:Je.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},MSt={application:{appName:Je.EMPTY_STRING,appVersion:Je.EMPTY_STRING}};function o9e({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...LSt,networkClient:new xP(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||P0e,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw _f.createStateNotFoundError();return{auth:{...DSt,...t},broker:{...e},cache:{...NSt,...r},system:{...o,...n},telemetry:{...MSt,...i}}}s(o9e,"buildAppConfiguration");function s9e({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new Yj(e),i=r?.loggerOptions||P0e,o;return r?.networkClient?o=r.networkClient:o=new xP(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(s9e,"buildManagedIdentityConfiguration");d();d();d();d();var a9e=Ne(require("crypto"));var Jj=new Uint8Array(256),Kj=Jj.length;function B0e(){return Kj>Jj.length-16&&(a9e.default.randomFillSync(Jj),Kj=0),Jj.slice(Kj,Kj+=16)}s(B0e,"rng");d();d();d();var c9e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function FSt(t){return typeof t=="string"&&c9e.test(t)}s(FSt,"validate");var l9e=FSt;var fu=[];for(let t=0;t<256;++t)fu.push((t+256).toString(16).substr(1));function OSt(t,e=0){let r=(fu[t[e+0]]+fu[t[e+1]]+fu[t[e+2]]+fu[t[e+3]]+"-"+fu[t[e+4]]+fu[t[e+5]]+"-"+fu[t[e+6]]+fu[t[e+7]]+"-"+fu[t[e+8]]+fu[t[e+9]]+"-"+fu[t[e+10]]+fu[t[e+11]]+fu[t[e+12]]+fu[t[e+13]]+fu[t[e+14]]+fu[t[e+15]]).toLowerCase();if(!l9e(r))throw TypeError("Stringified UUID is invalid");return r}s(OSt,"stringify");var u9e=OSt;d();function QSt(t,e,r){t=t||{};let n=t.random||(t.rng||B0e)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return u9e(n)}s(QSt,"v4");var D0e=QSt;var bP=class{static{s(this,"GuidGenerator")}generateGuid(){return D0e()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var O0=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(cu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,Je.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,cu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var d9e=Ne(require("crypto"),1);var Yb=class{static{s(this,"HashUtils")}sha256(e){return d9e.default.createHash(J6e.SHA256).update(e).digest()}};var f9e=Ne(require("crypto"),1);var Xj=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new Yb}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%Fj.CV_CHARSET.length;for(;e.length<=K6e;){let i=f9e.default.randomBytes(1)[0];if(i>=r)continue;let o=i%Fj.CV_CHARSET.length;e.push(Fj.CV_CHARSET[o])}let n=e.join(Je.EMPTY_STRING);return O0.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return O0.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}};var by=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new Xj,this.guidGenerator=new bP,this.hashUtils=new Yb}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return O0.base64Encode(e)}base64Decode(e){return O0.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return O0.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}};d();d();var Kb=class extends Wb{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new vS,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof lu)r.accounts[n]=i;else if(tl.isIdTokenEntity(i))r.idTokens[n]=i;else if(tl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(tl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(tl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new lu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return tl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return tl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return tl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return tl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=tl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&tl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&tl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&tl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return rE.deserializeAllCache(rE.deserializeJSONBlob(e))}static generateJsonCache(e){return Db.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=tl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var IL={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},IP=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Db.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=rE.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=Kb.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new by().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new F0(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new F0(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(lu.generateAccountCacheKey(e),r||new bP().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new F0(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...IL.Account,...e.Account},IdToken:{...IL.IdToken,...e.IdToken},AccessToken:{...IL.AccessToken,...e.AccessToken},RefreshToken:{...IL.RefreshToken,...e.RefreshToken},AppMetadata:{...IL.AppMetadata,...e.AppMetadata}}}};d();var WFe=Ne(HFe(),1);var iE=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw mt(ts.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Qs.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?sm.PSS_256:sm.RSA_256},c=this.useSha256?sm.X5T_256:sm.X5T;Object.assign(a,{[c]:O0.base64EncodeUrl(this.thumbprint,cu.HEX)}),this.publicCertificate&&Object.assign(a,{[sm.X5C]:this.publicCertificate});let l={[sm.AUDIENCE]:this.jwtAudience,[sm.EXPIRATION_TIME]:this.expirationTime,[sm.ISSUER]:this.issuer,[sm.SUBJECT]:this.issuer,[sm.NOT_BEFORE]:i,[sm.JWT_ID]:e.createNewGuid()};return this.jwt=WFe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<Qs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,Je.EMPTY_STRING));return n}};d();var wV="@azure/msal-node",ag="3.6.3";d();var BP=class extends du{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Qs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:wd.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addUsername(r,e.username),rr.addPassword(r,e.password),rr.addScopes(r,e.scopes),rr.addResponseType(r,aP.IDTOKEN_TOKEN),rr.addGrantType(r,Tf.RESOURCE_OWNER_PASSWORD_GRANT),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&rr.addCcsUpn(r,e.username),uu.mapToQueryString(r)}};d();function GFe(t,e,r,n){let i=xL.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return rr.addLibraryInfo(i,{sku:rl.MSAL_SKU,version:ag,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==ju.OIDC&&rr.addApplicationTelemetry(i,t.telemetry.application),rr.addResponseType(i,aP.CODE),r.codeChallenge&&r.codeChallengeMethod&&rr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),rr.addExtraQueryParameters(i,r.extraQueryParameters||{}),xL.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(GFe,"getAuthCodeRequestUrl");var Zb=class{static{s(this,"ClientApplication")}constructor(e){this.config=o9e(e),this.cryptoProvider=new by,this.logger=new N0(this.config.system.loggerOptions,wV,ag),this.storage=new Kb(this.logger,this.config.auth.clientId,this.cryptoProvider,v0e(this.config.auth)),this.tokenCache=new IP(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||Ay.QUERY,authenticationScheme:Yi.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return GFe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},i=this.initializeServerTelemetryManager(nE.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new EL(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof Xn&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},n=this.initializeServerTelemetryManager(nE.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new kS(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(nE.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new vL(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof Ub&&c.errorCode===ts.tokenRefreshRequired)return new kS(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...bf]});if(o===us.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new kS(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(nE.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new BP(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw _f.createStateNotFoundError();if(e!==r)throw mt(ts.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:rl.MSAL_SKU,version:ag,cpu:process.arch||Je.EMPTY_STRING,os:process.platform||Je.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=iE.fromAssertion(await Sd(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:rl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Yi.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Yi.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!ua.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...bf],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new PS(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=og.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return Sj.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var jFe=Ne(require("http"),1);var _V=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw _f.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=jFe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===Je.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(_f.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=uu.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(Jn.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw _f.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),_f.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var DP=class extends du{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=Qs.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=wi.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),uu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return rr.addScopes(r,e.scopes),rr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),mt(ts.deviceCodePollingCancelled);if(r&&r<e&&Qs.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),mt(ts.userTimeoutReached);if(Qs.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),mt(ts.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?Qs.nowSeconds()+e.timeout:void 0,l=Qs.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===Je.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Qs.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),mfe(uP.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),mt(ts.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;rr.addScopes(n,e.scopes),rr.addClientId(n,this.config.authOptions.clientId),rr.addGrantType(n,Tf.DEVICE_CODE_GRANT),rr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return rr.addCorrelationId(n,i),rr.addClientInfo(n),rr.addLibraryInfo(n,this.config.libraryInfo),rr.addApplicationTelemetry(n,this.config.telemetry.application),rr.addThrottling(n),this.serverTelemetryManager&&rr.addServerTelemetry(n,this.serverTelemetryManager),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(n)}};var NP=class extends Zb{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=PS.makeExtraSkuString({libraryName:rl.MSAL_SKU,libraryVersion:ag})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(nE.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new DP(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||bf,redirectUri:`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[xS.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new _V,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(k=>{m=k}).catch(k=>{h=k}),y=await this.waitForRedirectUri(p),E={...l,correlationId:r,scopes:e.scopes||bf,redirectUri:y,responseMode:Ay.QUERY,codeChallenge:f,codeChallengeMethod:cj.S256},x=await this.getAuthCodeUrl(E);if(await n(x),await g,h)throw h;if(m.error)throw new _d(m.error,m.error_description,m.suberror);if(!m.code)throw _f.createNoAuthCodeInResponseError();let b=m.client_info,_={code:m.code,codeVerifier:u,clientInfo:b||Je.EMPTY_STRING,...E};return await this.acquireTokenByCode(_)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||bf,redirectUri:`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[xS.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(Oj.TIMEOUT_MS/Oj.INTERVAL_MS<i){clearInterval(o),n(_f.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof Xn&&a.errorCode===wl.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},Oj.INTERVAL_MS)})}};d();d();var eI=class extends du{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===us.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=us.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new F0(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new Sc(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?Qs.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||lP)?(a?.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED),[null,us.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&Qs.isTokenExpired(p.refreshOn.toString(),0)&&(u=us.PROACTIVELY_REFRESHED,a?.setCacheOutcome(us.PROACTIVELY_REFRESHED)),[await ic.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN),[null,us.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:Je.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Sc.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw mt(ts.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=Qs.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:Yi.BEARER}}else{let l=this.createTokenQueryParameters(e),u=wi.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=Qs.nowSeconds();let h=await this.executePostToTokenEndpoint(u,f,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes,!1),rr.addGrantType(r,Tf.CLIENT_CREDENTIALS_GRANT),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}};d();var LP=class extends du{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Sc(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Qs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),mt(ts.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),mt(ts.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=fj.extractTokenClaims(n.secret,O0.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:Je.EMPTY_STRING,localAccountId:a||Je.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ic.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||Yi.BEARER,o={credentialType:n&&n.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,clientId:e,target:Sc.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw mt(ts.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=wi.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=Qs.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes),rr.addGrantType(r,Tf.JWT_BEARER),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),rr.addRequestTokenUse(r,xS.ON_BEHALF_OF),rr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}};var MP=class extends Zb{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw mt(ts.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?iE.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):iE.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw mt(ts.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Sd(e.clientAssertion,this.config.auth.clientId),assertionType:rl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!bf.includes(m))},o={...e,...i,clientAssertion:r},c=new wi(o.authority).getUrlComponents().PathSegments[0];if(Object.values(If).includes(c))throw mt(ts.missingTenantIdError);let l=process.env[Y6e],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[z6e]},p=this.initializeServerTelemetryManager(nE.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new eI(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof Xn&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new LP(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof Xn&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function VFe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(VFe,"isIso8601");d();var SV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Us.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[vs.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.POST,e,r)}};var LS={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Pd=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(VFe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Qs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[Rc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[Rc.XMS_CC]=h}let a=o.headers;a[vs.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new SV(this.networkClient,o.retryPolicy,this.logger),u=Qs.nowSeconds(),f;try{o.httpMethod===Us.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof Xn?h:mt(ts.networkError)}let p=new ic(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case wa.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?LS.MANAGED_IDENTITY_CLIENT_ID_2017:LS.MANAGED_IDENTITY_CLIENT_ID;case wa.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?LS.MANAGED_IDENTITY_RESOURCE_ID_IMDS:LS.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case wa.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),LS.MANAGED_IDENTITY_OBJECT_ID;default:throw oc(zb)}}};Pd.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),oc(BS[t])}};d();d();d();var RV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var QPt=3,UPt=1e3,qPt=[Jn.NOT_FOUND,Jn.REQUEST_TIMEOUT,Jn.TOO_MANY_REQUESTS,Jn.SERVER_ERROR,Jn.SERVICE_UNAVAILABLE,Jn.GATEWAY_TIMEOUT],kV=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new RV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return UPt}async pauseForRetry(e,r,n,i){if(qPt.includes(e)&&r<QPt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var Rf=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new kV}computeUri(){let e=new Map;this.queryParameters&&rr.addExtraQueryParameters(e,this.queryParameters);let r=uu.mapToQueryString(e);return wi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&rr.addExtraQueryParameters(e,this.bodyParameters),uu.mapToQueryString(e)}};var HPt="2019-08-01",ML=class t extends Pd{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Vn.APP_SERVICE} managed identity is unavailable because one or both of the '${Nn.IDENTITY_HEADER}' and '${Nn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,a,Vn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Vn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=HPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var oE=require("fs"),KFe=Ne(require("path"),1);var WPt="2019-11-01",$Fe="http://127.0.0.1:40342/metadata/identity/oauth2/token",zFe="N/A: himds executable exists",YFe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},GPt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},FL=class t extends Pd{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IMDS_ENDPOINT];if(!e||!r){let n=GPt[process.platform];try{(0,oE.accessSync)(n,oE.constants.F_OK|oE.constants.R_OK),e=$Fe,r=zFe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Vn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Nn.IDENTITY_ENDPOINT}' and '${Nn.IMDS_ENDPOINT}' are not defined. ${Vn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===zFe)e.info(`[Managed Identity] ${Vn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Vn.AZURE_ARC} endpoint: ${$Fe}. Creating ${Vn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,Vn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(Nn.IMDS_ENDPOINT,l,Vn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Vn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Vn.AZURE_ARC} managed identity.`)}if(a.idType!==wa.SYSTEM_ASSIGNED)throw oc(Gj);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Rf(Us.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[wf.METADATA_HEADER_NAME]="true",r.queryParameters[Rc.API_VERSION]=WPt,r.queryParameters[Rc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===Jn.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw oc($j);if(!a.includes("Basic realm="))throw oc(zj);let c=a.split("Basic realm=")[1];if(!YFe.hasOwnProperty(process.platform))throw oc(Wj);let l=YFe[process.platform],u=KFe.default.basename(c);if(!u.endsWith(".key"))throw oc(Uj);if(l+u!==c)throw oc(qj);let f;try{f=await(0,oE.statSync)(c).size}catch{throw oc(bL)}if(f>X6e)throw oc(Hj);let p;try{p=(0,oE.readFileSync)(c,cu.UTF8)}catch{throw oc(bL)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[wf.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof Xn?h:mt(ts.networkError)}}return this.getServerTokenResponse(o||e)}};d();var OL=class t extends Pd{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[Nn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Vn.CLOUD_SHELL} managed identity is unavailable because the '${Nn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,c,Vn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Vn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Vn.CLOUD_SHELL} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED)throw oc(jj);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Rf(Us.POST,this.msiEndpoint);return r.headers[wf.METADATA_HEADER_NAME]="true",r.bodyParameters[Rc.RESOURCE]=e,r}};d();d();d();var PV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var jPt=[Jn.NOT_FOUND,Jn.REQUEST_TIMEOUT,Jn.GONE,Jn.TOO_MANY_REQUESTS],VPt=3,$Pt=7,zPt=1e3,YPt=4e3,KPt=2e3,JPt=10*1e3,BV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new PV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return zPt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return YPt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return KPt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return JPt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===Jn.GONE?$Pt:VPt),(jPt.includes(e)||e>=Jn.SERVER_ERROR_RANGE_START&&e<=Jn.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===Jn.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var JFe="/metadata/identity/oauth2/token",XPt=`http://169.254.169.254${JFe}`,ZPt="2018-02-01",DV=class t extends Pd{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Vn.IMDS} returned endpoint: ${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${JFe}`,Vn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Vn.IMDS}, using the default endpoint.`),a=XPt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.METADATA_HEADER_NAME]="true",n.queryParameters[Rc.API_VERSION]=ZPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new BV,n}};d();var e3t="2019-07-01-preview",QL=class t extends Pd{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER],n=process.env[Nn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Vn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Nn.IDENTITY_HEADER}', '${Nn.IDENTITY_ENDPOINT}' or '${Nn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,Vn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${Vn.SERVICE_FABRIC} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Vn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=e3t,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var t3t="2017-09-01",r3t=`Only client id is supported for user-assigned managed identity in ${Vn.MACHINE_LEARNING}.`,UL=class t extends Pd{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[Nn.MSI_ENDPOINT],r=process.env[Nn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Vn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Nn.MSI_ENDPOINT}' and '${Nn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,a,Vn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Vn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Rf(Us.GET,this.msiEndpoint);if(n.headers[wf.METADATA_HEADER_NAME]="true",n.headers[wf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[Rc.API_VERSION]=t3t,n.queryParameters[Rc.RESOURCE]=e,r.idType===wa.SYSTEM_ASSIGNED)n.queryParameters[LS.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[Nn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===wa.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(r3t);return n}};var qL=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(QL.getEnvironmentVariables())?Vn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(ML.getEnvironmentVariables())?Vn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(UL.getEnvironmentVariables())?Vn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(OL.getEnvironmentVariables())?Vn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(FL.getEnvironmentVariables())?Vn.AZURE_ARC:Vn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=QL.tryCreate(e,r,n,i,o,a)||ML.tryCreate(e,r,n,i,o)||UL.tryCreate(e,r,n,i,o)||OL.tryCreate(e,r,n,i,o,a)||FL.tryCreate(e,r,n,i,o,a)||DV.tryCreate(e,r,n,i,o);if(!c)throw oc(Vj);return c}};var n3t=[Vn.SERVICE_FABRIC],FP=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=s9e(e||{}),this.logger=new N0(this.config.system.loggerOptions,wV,ag);let r={canonicalAuthority:Je.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new Kb(this.logger,this.config.managedIdentityId.id,dP,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new by;let n={protocolMode:ju.AAD,knownAuthorities:[S0e],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new og(S0e,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new eI({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new qL(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new Yb}async acquireToken(e){if(!e.resource)throw rs(hP.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&n3t.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(cu.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===us.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return qL.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var NV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>lu.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();var HL=oi("IdentityUtils"),i3t="1.0";function OP(t,e,r){let n=s(i=>(HL.getToken.info(i),new tg({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(OP,"ensureValidMsalToken");function vpe(t){let e=t?.authorityHost;return!e&&iP&&(e=process.env.AZURE_AUTHORITY_HOST),e??s9}s(vpe,"getAuthorityHost");function xpe(t,e){return e||(e=s9),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(xpe,"getAuthority");function XFe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(XFe,"getKnownAuthorities");var LV=s((t,e=ej?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case Q0.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case Q0.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case Q0.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case Q0.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function MV(t){switch(t){case"error":return Q0.LogLevel.Error;case"info":return Q0.LogLevel.Info;case"verbose":return Q0.LogLevel.Verbose;case"warning":return Q0.LogLevel.Warning;default:return Q0.LogLevel.Info}}s(MV,"getMSALLogLevel");function MS(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return HL.info(ko(t,e.message)),new $r(e.message);case"device_code_polling_cancelled":return new j_("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":HL.info(ko(t,`Authentication returned errorCode ${n.errorCode}`));break;default:HL.info(ko(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(HL.info(ko(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new tg({scopes:t,getTokenOptions:r,message:e.message})}s(MS,"handleMsalError");function ZFe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(ZFe,"publicToMsal");function eOe(t,e){var r;return{authority:(r=e.environment)!==null&&r!==void 0?r:aNe,homeAccountId:e.homeAccountId,tenantId:e.tenantId||sNe,username:e.username,clientId:t,version:i3t}}s(eOe,"msalToPublic");d();var o3t=1e3*64;function tOe(t){return ife([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>r?.status!==404?{skipStrategy:!0}:J8e(e,{retryDelayInMs:t.startDelayInMs,maxRetryDelayInMs:o3t}),"retry")}],{maxRetries:t.maxRetries})}s(tOe,"imdsRetryPolicy");d();var sE="ManagedIdentityCredential - IMDS",OS=oi(sE),s3t="http://169.254.169.254",a3t="/metadata/identity/oauth2/token";function c3t(t){var e;if(!C9(t))throw new Error(`${sE}: Multiple scopes are not supported.`);let n=new URL(a3t,(e=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&e!==void 0?e:s3t),i={Accept:"application/json"};return{url:`${n}`,method:"GET",headers:Pb(i)}}s(c3t,"prepareInvalidRequestOptions");var rOe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=C9(e);if(!i)return OS.info(`${sE}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=c3t(i);return es.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=ng(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let f;try{OS.info(`${sE}: Pinging the Azure IMDS endpoint`),f=await r.sendRequest(u)}catch(p){return ZG(p)&&OS.verbose(`${sE}: Caught error ${p.name}: ${p.message}`),OS.info(`${sE}: The Azure IMDS endpoint is unavailable`),!1}return f.status===403&&!((l=f.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(OS.info(`${sE}: The Azure IMDS endpoint is unavailable`),OS.info(`${sE}: ${f.bodyAsText}`),!1):(OS.info(`${sE}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();d();d();var bpe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(bpe||(bpe={}));function FV(t){var e,r;let n=t;return n===void 0&&((r=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||r===void 0?void 0:r.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===bpe.AutoDiscoverRegion?"AUTO_DISCOVER":n}s(FV,"calculateRegionalAuthority");var kf=oi("MsalClient");function b3t(t,e,r={}){var n,i,o;let a=EG((n=r.logger)!==null&&n!==void 0?n:kf,e,t),c=xpe(a,vpe(r)),l=new G1(Object.assign(Object.assign({},r.tokenCredentialOptions),{authorityHost:c,loggingOptions:r.loggingOptions}));return{auth:{clientId:t,authority:c,knownAuthorities:XFe(a,c,r.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:LV((i=r.logger)!==null&&i!==void 0?i:kf),logLevel:MV(AG()),piiLoggingEnabled:(o=r.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}s(b3t,"generateMsalConfiguration");function um(t,e,r={}){var n;let i={msalConfig:b3t(t,e,r),cachedAccount:r.authenticationRecord?ZFe(r.authenticationRecord):null,pluginConfiguration:pNe.generatePluginConfiguration(r),logger:(n=r.logger)!==null&&n!==void 0?n:kf},o=new Map;async function a(P={}){let N=P.enableCae?"CAE":"default",M=o.get(N);if(M)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new NP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),o.set(N,M),M}s(a,"getPublicApp");let c=new Map;async function l(P={}){let N=P.enableCae?"CAE":"default",M=c.get(N);if(M)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new MP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),c.set(N,M),M}s(l,"getConfidentialApp");async function u(P,N,M={}){if(i.cachedAccount===null)throw i.logger.getToken.info("No cached account found in local state."),new tg({scopes:N});M.claims&&(i.cachedClaims=M.claims);let J={account:i.cachedAccount,scopes:N,claims:i.cachedClaims};i.pluginConfiguration.broker.isEnabled&&(J.tokenQueryParameters||(J.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(J.tokenQueryParameters.msal_request_type="consumer_passthrough")),M.proofOfPossessionOptions&&(J.shrNonce=M.proofOfPossessionOptions.nonce,J.authenticationScheme="pop",J.resourceRequestMethod=M.proofOfPossessionOptions.resourceRequestMethod,J.resourceRequestUri=M.proofOfPossessionOptions.resourceRequestUrl),i.logger.getToken.info("Attempting to acquire token silently");try{return await P.acquireTokenSilent(J)}catch(pe){throw MS(N,pe,M)}}s(u,"getTokenSilent");function f(P){return P?.tenantId?xpe(P.tenantId,vpe(r)):i.msalConfig.auth.authority}s(f,"calculateRequestAuthority");async function p(P,N,M,J){var pe,Y;let G=null;try{G=await u(P,N,M)}catch(H){if(H.name!=="AuthenticationRequiredError")throw H;if(M.disableAutomaticAuthentication)throw new tg({scopes:N,getTokenOptions:M,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(G===null)try{G=await J()}catch(H){throw MS(N,H,M)}return OP(N,G,M),i.cachedAccount=(pe=G?.account)!==null&&pe!==void 0?pe:null,i.logger.getToken.info(Xc(N)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(Y=G.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:G.tokenType}}s(p,"withSilentAuthentication");async function m(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:FV(),claims:M?.claims});return OP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw MS(P,Y,M)}}s(m,"getTokenByClientSecret");async function h(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:FV(),claims:M?.claims,clientAssertion:N});return OP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw MS(P,Y,M)}}s(h,"getTokenByClientAssertion");async function g(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:FV(),claims:M?.claims});return OP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw MS(P,Y,M)}}s(g,"getTokenByClientCertificate");async function y(P,N,M={}){i.logger.getToken.info("Attempting to acquire token using device code");let J=await a(M);return p(J,P,M,()=>{var pe,Y;let G={scopes:P,cancel:(Y=(pe=M?.abortSignal)===null||pe===void 0?void 0:pe.aborted)!==null&&Y!==void 0?Y:!1,deviceCodeCallback:N,authority:f(M),claims:M?.claims},H=J.acquireTokenByDeviceCode(G);return M.abortSignal&&M.abortSignal.addEventListener("abort",()=>{G.cancel=!0}),H})}s(y,"getTokenByDeviceCode");async function E(P,N,M,J={}){i.logger.getToken.info("Attempting to acquire token using username and password");let pe=await a(J);return p(pe,P,J,()=>{let Y={scopes:P,username:N,password:M,authority:f(J),claims:J?.claims};return pe.acquireTokenByUsernamePassword(Y)})}s(E,"getTokenByUsernamePassword");function x(){if(i.cachedAccount)return eOe(t,i.cachedAccount)}s(x,"getActiveAccount");async function b(P,N,M,J,pe={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let Y;return J?(i.msalConfig.auth.clientSecret=J,Y=await l(pe)):Y=await a(pe),p(Y,P,pe,()=>Y.acquireTokenByCode({scopes:P,redirectUri:N,code:M,authority:f(pe),claims:pe?.claims}))}s(b,"getTokenByAuthorizationCode");async function _(P,N,M,J={}){var pe;kf.getToken.info("Attempting to acquire token on behalf of another user"),typeof M=="string"?(kf.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=M):typeof M=="function"?(kf.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=M):(kf.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=M);let Y=await l(J);try{let G=await Y.acquireTokenOnBehalfOf({scopes:P,authority:f(J),claims:J.claims,oboAssertion:N});return OP(P,G,J),kf.getToken.info(Xc(P)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(pe=G.refreshOn)===null||pe===void 0?void 0:pe.getTime(),tokenType:G.tokenType}}catch(G){throw MS(P,G,J)}}s(_,"getTokenOnBehalfOf");async function k(P,N={}){kf.getToken.info("Attempting to acquire token interactively");let M=await a(N);async function J(Y){var G;kf.verbose("Authentication will resume through the broker");let H=pe();i.pluginConfiguration.broker.parentWindowHandle?H.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):kf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((G=H.tokenQueryParameters)!==null&&G!==void 0?G:H.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),Y?(H.prompt="none",kf.verbose("Attempting broker authentication using the default broker account")):kf.verbose("Attempting broker authentication without the default broker account"),N.proofOfPossessionOptions&&(H.shrNonce=N.proofOfPossessionOptions.nonce,H.authenticationScheme="pop",H.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,H.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl);try{return await M.acquireTokenInteractive(H)}catch(ce){if(kf.verbose(`Failed to authenticate through the broker: ${ce.message}`),Y)return J(!1);throw ce}}s(J,"getBrokeredToken");function pe(){var Y,G;return{openBrowser:s(async H=>{await(await Promise.resolve().then(()=>(UV(),BOe))).default(H,{wait:!0,newInstance:!0})},"openBrowser"),scopes:P,authority:f(N),claims:N?.claims,loginHint:N?.loginHint,errorTemplate:(Y=N?.browserCustomizationOptions)===null||Y===void 0?void 0:Y.errorMessage,successTemplate:(G=N?.browserCustomizationOptions)===null||G===void 0?void 0:G.successMessage,prompt:N?.loginHint?"login":"select_account"}}return s(pe,"createBaseInteractiveRequest"),p(M,P,N,async()=>{var Y;let G=pe();return i.pluginConfiguration.broker.isEnabled?J((Y=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&Y!==void 0?Y:!1):(N.proofOfPossessionOptions&&(G.shrNonce=N.proofOfPossessionOptions.nonce,G.authenticationScheme="pop",G.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,G.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl),M.acquireTokenInteractive(G))})}return s(k,"getTokenByInteractiveRequest"),{getActiveAccount:x,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:y,getTokenByUsernamePassword:E,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:_,getTokenByInteractiveRequest:k}}s(um,"createMsalClient");var DOe=oi("ClientAssertionCredential"),HP=class{static{s(this,"ClientAssertionCredential")}constructor(e,r,n,i={}){if(!e)throw new $r("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new $r("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new $r("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:DOe,tokenCredentialOptions:this.options}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,DOe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var NOe=require("node:fs/promises");var HS="WorkloadIdentityCredential",I3t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],VL=oi(HS),aE=class{static{s(this,"WorkloadIdentityCredential")}constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let r=yG(I3t).assigned.join(", ");VL.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&ou(VL,i),!o)throw new $r(`${HS}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new $r(`${HS}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new $r(`${HS}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);VL.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new HP(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${HS}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw VL.info(n),new $r(n)}return VL.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new $r(`${HS}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,NOe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new $r(`${HS}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var LOe="ManagedIdentityCredential - Token Exchange",T3t=oi(LOe),Upe={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||T3t.info(`${LOe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new aE(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(r,e)}};var U0=oi("ManagedIdentityCredential"),tI=class{static{s(this,"ManagedIdentityCredential")}constructor(e,r){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let o;typeof e=="string"?(this.clientId=e,o=r??{}):(this.clientId=e?.clientId,o=e??{}),this.resourceId=o?.resourceId,this.objectId=o?.objectId;let a=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(l=>l.value);if(a.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);o.allowInsecureConnection=!0,((n=o.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=o.retryOptions.maxRetries),this.identityClient=new G1(Object.assign(Object.assign({},o),{additionalPolicies:[{policy:tOe(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new FP({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:MV(AG()),piiLoggingEnabled:(i=o.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:LV(U0)}}}),this.isAvailableIdentityClient=new G1(Object.assign(Object.assign({},o),{retryOptions:{maxRetries:0}}));let c=this.managedIdentityApp.getManagedIdentitySource();if(c==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw U0.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(c==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw U0.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r(`ManagedIdentityCredential: ${x6e}`);if(U0.info(`Using ${c} managed identity.`),a.length===1){let{key:l,value:u}=a[0];U0.info(`${c} with ${l}: ${u}`)}}async getToken(e,r={}){U0.getToken.info("Using the MSAL provider for Managed Identity.");let n=C9(e);if(!n)throw new $r(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return es.withSpan("ManagedIdentityCredential.getToken",r,async()=>{var i;try{let o=await Upe.isAvailable(this.clientId),a=this.managedIdentityApp.getManagedIdentitySource(),c=a==="DefaultToImds"||a==="Imds";if(U0.getToken.info(`MSAL Identity source: ${a}`),o){U0.getToken.info("Using the token exchange managed identity.");let u=await Upe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new $r("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(U0.getToken.info("Using the IMDS endpoint to probe for availability."),!await rOe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new $r("Attempted to use the IMDS endpoint, but it is not available.");U0.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),U0.getToken.info(Xc(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:(i=l.refreshOn)===null||i===void 0?void 0:i.getTime(),tokenType:"Bearer"}}catch(o){throw U0.getToken.error(ko(e,o)),o.name==="AuthenticationRequiredError"?o:w3t(o)?new $r(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new $r(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(U0.getToken.info(o),new tg({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function w3t(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(w3t,"isNetworkError");d();d();function rI(t){return Array.isArray(t)?t:[t]}s(rI,"ensureScopes");function WP(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(ko(t,r)),r}}s(WP,"ensureValidScopeForDevTimeCreds");function qV(t){return t.replace(/\/.default$/,"")}s(qV,"getScopeResource");var MOe=Ne(require("child_process"),1);d();function qpe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(ko("",r)),r}}s(qpe,"checkSubscription");var dm=oi("AzureCliCredential"),FOe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(dm.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{MOe.default.execFile("az",["account","get-access-token","--output","json","--resource",t,...i,...o],{cwd:FOe.getSafeWorkingDir(),shell:!0,timeout:n},(l,u,f)=>{a({stdout:u,stderr:f,error:l})})}catch(l){c(l)}})}},$L=class{static{s(this,"AzureCliCredential")}constructor(e){e?.tenantId&&(ou(dm,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(qpe(dm,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(dm,n),this.subscription&&qpe(dm,this.subscription);let i=typeof e=="string"?e:e[0];return dm.getToken.info(`Using the scope ${i}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{WP(i,dm);let u=qV(i),f=await FOe.getAzureCliAccessToken(u,n,this.subscription,this.timeout),p=(o=f.stderr)===null||o===void 0?void 0:o.match("(.*)az login --scope(.*)"),m=((a=f.stderr)===null||a===void 0?void 0:a.match("(.*)az login(.*)"))&&!p;if(((c=f.stderr)===null||c===void 0?void 0:c.match("az:(.*)not found"))||((l=f.stderr)===null||l===void 0?void 0:l.startsWith("'az' is not recognized"))){let g=new $r("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw dm.getToken.info(ko(e,g)),g}if(m){let g=new $r("Please run 'az login' from a command prompt to authenticate before using this credential.");throw dm.getToken.info(ko(e,g)),g}try{let g=f.stdout,y=this.parseRawResponse(g);return dm.getToken.info(Xc(e)),y}catch(g){throw f.stderr?new $r(f.stderr):g}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new $r(u.message||"Unknown error while trying to retrieve the access token");throw dm.getToken.info(ko(e,f)),f}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return dm.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new $r(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();var OOe=Ne(require("child_process"),1);var cE=oi("AzureDeveloperCliCredential"),QOe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(cE.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{OOe.default.execFile("azd",["auth","token","--output","json",...t.reduce((a,c)=>a.concat("--scope",c),[]),...n],{cwd:QOe.getSafeWorkingDir(),timeout:r},(a,c,l)=>{i({stdout:c,stderr:l,error:a})})}catch(a){o(a)}})}},zL=class{static{s(this,"AzureDeveloperCliCredential")}constructor(e){e?.tenantId&&(ou(cE,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(cE,n);let i;return typeof e=="string"?i=[e]:i=e,cE.getToken.info(`Using the scopes ${e}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{i.forEach(m=>{WP(m,cE)});let u=await QOe.getAzdAccessToken(i,n,this.timeout),f=((o=u.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd login` to login"))||((a=u.stderr)===null||a===void 0?void 0:a.match("not logged in, run `azd auth login` to login"));if(((c=u.stderr)===null||c===void 0?void 0:c.match("azd:(.*)not found"))||((l=u.stderr)===null||l===void 0?void 0:l.startsWith("'azd' is not recognized"))||u.error&&u.error.code==="ENOENT"){let m=new $r("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw cE.getToken.info(ko(e,m)),m}if(f){let m=new $r("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw cE.getToken.info(ko(e,m)),m}try{let m=JSON.parse(u.stdout);return cE.getToken.info(Xc(e)),{token:m.token,expiresOnTimestamp:new Date(m.expiresOn).getTime(),tokenType:"Bearer"}}catch(m){throw u.stderr?new $r(u.stderr):m}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new $r(u.message||"Unknown error while trying to retrieve the access token");throw cE.getToken.info(ko(e,f)),f}})}};d();d();var UOe=Ne(require("child_process"),1),qOe={execFile(t,e,r){return new Promise((n,i)=>{UOe.execFile(t,e,r,(o,a,c)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||o?i(c?new Error(c):o):n(a)})})}};var lE=oi("AzurePowerShellCredential"),WOe=process.platform==="win32";function GOe(t){return WOe?`${t}.exe`:t}s(GOe,"formatCommand");async function HOe(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await qOe.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(HOe,"runCommands");var jOe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Hpe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},_3t=s(t=>t.message.match(`(.*)${jOe.login}(.*)`),"isLoginError"),S3t=s(t=>t.message.match(jOe.installed),"isNotInstalledError"),Wpe=[GOe("pwsh")];WOe&&Wpe.push(GOe("powershell"));var YL=class{static{s(this,"AzurePowerShellCredential")}constructor(e){e?.tenantId&&(ou(lE,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...Wpe]){try{await HOe([[i,"/?"]],n)}catch{Wpe.shift();continue}let a=(await HOe([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return R3t(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&ou(lE,n);try{WP(i,lE),lE.getToken.info(`Using the scope ${i}`);let o=qV(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return lE.getToken.info(Xc(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(S3t(o)){let c=new $r(Hpe.installed);throw lE.getToken.info(ko(i,c)),c}else if(_3t(o)){let c=new $r(Hpe.login);throw lE.getToken.info(ko(i,c)),c}let a=new $r(`${o}. ${Hpe.troubleshoot}`);throw lE.getToken.info(ko(i,a)),a}})}};async function R3t(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&lE.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(R3t,"parseJsonToken");d();var Gpe=oi("ChainedTokenCredential"),KL=class{static{s(this,"ChainedTokenCredential")}constructor(...e){this._sources=[],this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return es.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw Gpe.getToken.info(ko(e,l)),l}if(!n&&o.length>0){let c=new a9(o,"ChainedTokenCredential authentication failed.");throw Gpe.getToken.info(ko(e,c)),c}if(Gpe.getToken.info(`Result for ${i.constructor.name}: ${Xc(e)}`),n===null)throw new $r("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();var XL=require("node:crypto");var $Oe=require("node:fs/promises");var JL="ClientCertificateCredential",VOe=oi(JL),ZL=class{static{s(this,"ClientCertificateCredential")}constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${JL}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${JL}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${JL}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:VOe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${JL}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,VOe);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){var e;let r=await k3t(this.certificateConfiguration,(e=this.sendCertificateChain)!==null&&e!==void 0?e:!1),n;return this.certificateConfiguration.certificatePassword!==void 0?n=(0,XL.createPrivateKey)({key:r.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():n=r.certificateContents,{thumbprint:r.thumbprint,thumbprintSha256:r.thumbprintSha256,privateKey:n,x5c:r.x5c}}};async function k3t(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,$Oe.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,XL.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,XL.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(k3t,"parseCertificate");d();var zOe=oi("ClientSecretCredential"),eM=class{static{s(this,"ClientSecretCredential")}constructor(e,r,n,i={}){if(!e)throw new $r("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new $r("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new $r("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:zOe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,zOe);let i=rI(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var P3t=oi("UsernamePasswordCredential"),tM=class{static{s(this,"UsernamePasswordCredential")}constructor(e,r,n,i,o={}){if(!e)throw new $r("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new $r("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new $r("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new $r("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=Zc(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=um(r,this.tenantId,Object.assign(Object.assign({},o),{tokenCredentialOptions:o??{}}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,P3t);let i=rI(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var B3t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function D3t(){var t;return((t=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&t!==void 0?t:"").split(";")}s(D3t,"getAdditionallyAllowedTenants");var HV="EnvironmentCredential",uE=oi(HV);function N3t(){var t;let e=((t=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&t!==void 0?t:"").toLowerCase(),r=e==="true"||e==="1";return uE.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${r}`),r}s(N3t,"getSendCertificateChain");var rM=class{static{s(this,"EnvironmentCredential")}constructor(e){this._credential=void 0;let r=yG(B3t).assigned.join(", ");uE.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=D3t(),c=N3t(),l=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:a,sendCertificateChain:c});if(n&&ou(uE,n),n&&i&&o){uE.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new eM(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){uE.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new ZL(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(uE.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),uE.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new tM(n,i,p,m,l))}async getToken(e,r={}){return es.withSpan(`${HV}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return uE.getToken.info(Xc(e)),i}catch(i){let o=new _b(400,{error:`${HV} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw uE.getToken.info(ko(e,o)),o}throw new $r(`${HV} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};var jpe=oi("DefaultAzureCredential");function L3t(t={}){var e,r,n,i;(e=t.retryOptions)!==null&&e!==void 0||(t.retryOptions={maxRetries:5,retryDelayInMs:800});let o=(r=t?.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID,a=(n=t?.workloadIdentityClientId)!==null&&n!==void 0?n:o,c=t?.managedIdentityResourceId,l=process.env.AZURE_FEDERATED_TOKEN_FILE,u=(i=t?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(c){let f=Object.assign(Object.assign({},t),{resourceId:c});return new tI(f)}if(l&&a){let f=Object.assign(Object.assign({},t),{tenantId:u});return new tI(a,f)}if(o){let f=Object.assign(Object.assign({},t),{clientId:o});return new tI(f)}return new tI(t)}s(L3t,"createDefaultManagedIdentityCredential");function M3t(t){var e,r,n;let i=(e=t?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,o=(r=t?.workloadIdentityClientId)!==null&&r!==void 0?r:i,a=process.env.AZURE_FEDERATED_TOKEN_FILE,c=(n=t?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(a&&o){let l=Object.assign(Object.assign({},t),{tenantId:c,clientId:o,tokenFilePath:a});return new aE(l)}if(c){let l=Object.assign(Object.assign({},t),{tenantId:c});return new aE(l)}return new aE(t)}s(M3t,"createDefaultWorkloadIdentityCredential");function F3t(t={}){let e=t.processTimeoutInMs;return new zL(Object.assign({processTimeoutInMs:e},t))}s(F3t,"createDefaultAzureDeveloperCliCredential");function O3t(t={}){let e=t.processTimeoutInMs;return new $L(Object.assign({processTimeoutInMs:e},t))}s(O3t,"createDefaultAzureCliCredential");function Q3t(t={}){let e=t.processTimeoutInMs;return new YL(Object.assign({processTimeoutInMs:e},t))}s(Q3t,"createDefaultAzurePowershellCredential");function U3t(t={}){return new rM(t)}s(U3t,"createEnvironmentCredential");var Vpe=class{static{s(this,"UnavailableDefaultCredential")}constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return jpe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},GP=class extends KL{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[O3t,Q3t,F3t],i=[U3t,M3t,L3t],o=[];if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;default:{let c=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw jpe.warning(c),new Error(c)}}else o=[...i,...n];let a=o.map(c=>{try{return c(e)}catch(l){return jpe.warning(`Skipped ${c.name} because of an error creating the credential: ${l}`),new Vpe(c.name,l.message)}});super(...a)}};d();var Egn=oi("InteractiveBrowserCredential");d();var kgn=oi("DeviceCodeCredential");d();var q3t="AzurePipelinesCredential",Ugn=oi(q3t);d();var Kgn=oi("AuthorizationCodeCredential");d();var H3t="OnBehalfOfCredential",sAn=oi(H3t);d();function W3t(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(W3t,"getIntegrationId");function nI(t){let e={...A0(t),"X-GitHub-Api-Version":$A},r=W3t(t.get(nn));return r&&(e["Copilot-Integration-Id"]=r),t9()&&(e["ces-proxy-target"]=Q_.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(nI,"getCapiHeaders");function WV(t,e,...r){if(t9()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return cy(t,e,"api",...r)}s(WV,"getCapiUrl");async function WS(t,e){let r=await t.get(Qr).getToken(),n=WV(t,r,e),i=r.token;t9()&&(i=await KOe());let o={Authorization:`Bearer ${i}`,...nI(t)};return await t.get(jn).fetch(new URL(n).href,{method:"GET",headers:o})}s(WS,"fetchCapiUrl");async function YOe(t,e,r){let n=await t.get(Qr).getToken(),i=WV(t,n,e),o=n.token;t9()&&(o=await KOe());let a={Authorization:`Bearer ${o}`,...nI(t)};return await t.get(jn).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(YOe,"postCapiUrl");async function KOe(){let e=await new GP().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(KOe,"getMsBenchToken");d();var JOe=10*60*1e3,pn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},XOe=new Set([pn.O1Ga,pn.O3Mini,pn.O1Mini,pn.Gemini20Pro,pn.Gemini20Flash]);function fm(t){switch(t){case"edits":case"user":case"inline":return[pn.Gpt4o,pn.Gpt4turbo,pn.Gpt4,pn.O1Mini,pn.O1Ga,pn.Claude35Sonnet,pn.O3Mini,pn.Gemini20Flash,pn.Claude37Sonnet,pn.Claude37SonnetThought,pn.Gpt45,pn.Gpt41,pn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt35turbo,pn.Gpt41,pn.CopilotBase];case"gitCommit":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt4,pn.Gpt41,pn.CopilotBase];case"codeReview":return[pn.Gpt4,pn.Gpt4o,pn.Gpt41,pn.CopilotBase];case"nesStubs":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt41,pn.CopilotBase]}}s(fm,"getSupportedModelFamiliesForPrompt");var VV={textEmbedding3Small:"text-embedding-3-small"},G3t=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),j3t=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:G3t,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),ZOe=I.Object({data:I.Array(j3t)}),Bd=class{static{s(this,"ModelMetadataProvider")}},GV=class extends Bd{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ia(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await WS(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){fn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw fn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new VA(r)}await this.processModels(r)}async fetchModel(r){let n=await WS(this.ctx,`/models/${r}`);if(!n.ok){fn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await YOe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){fn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>JOe}},jV=class extends Bd{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<JOe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function e7e(t){let e=vi(t,kt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(e7e,"getUserSelectedModelConfiguration");d();d();d();var jP=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var t7e=Ne(require("node:fs/promises")),$V=Ne(require("node:path"));async function zV(t){return await t7e.readFile($pe(t))}s(zV,"readFile");function $pe(t){return $V.default.resolve($V.default.extname(__filename)!==".ts"?__dirname:$V.default.resolve(__dirname,"../../dist"),t)}s($pe,"locateFile");var VP=Ne(h7e());var e$=new Map;function ho(t="o200k_base"){let e=e$.get(t);return e!==void 0||(e=e$.get("o200k_base"),e!==void 0)?e:new t$}s(ho,"getTokenizer");async function A7e(t="o200k_base"){return await GS,ho(t)}s(A7e,"getTokenizerAsync");async function aBt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await zV(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(aBt,"parseTikTokenNoIndex");var ime=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,VP.createTokenizer)(await aBt(`resources/${e}.tiktoken.noindex`),(0,VP.getSpecialTokensByEncoder)(e),(0,VP.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new jP("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},ome=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},cBt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},nme=4,t$=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,nme)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-nme),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-nme)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?cBt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function g7e(t){try{let e=await ime.create(t);e$.set(t,e)}catch{}}s(g7e,"setTokenizer");var GS=(async()=>{e$.set("mock",new ome),await Promise.all([g7e("cl100k_base"),g7e("o200k_base")])})();d();d();var lBt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},C7e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sme,r$,E7e,ame=class extends bn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),sme.add(this),r$.set(this,void 0),lBt(this,r$,e,"f"),this.error=r}Errors(){return new pb(C7e(this,sme,"m",E7e).call(this))}};r$=new WeakMap,sme=new WeakSet,E7e=s(function*(){this.error&&(yield this.error),yield*C7e(this,r$,"f")},"_AssertError_Iterator");function y7e(t,e,r){if(!Ii(t,e,r))throw new ame(ty(t,e,r))}s(y7e,"AssertValue");function n$(...t){return t.length===3?y7e(t[0],t[1],t[2]):y7e(t[0],[],t[1])}s(n$,"Assert");d();d();d();function uBt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=go(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=go(t[r]);return e}s(uBt,"FromObject");function dBt(t){return t.map(e=>go(e))}s(dBt,"FromArray");function fBt(t){return t.slice()}s(fBt,"FromTypedArray");function pBt(t){return new Map(go([...t.entries()]))}s(pBt,"FromMap");function mBt(t){return new Set(go([...t.entries()]))}s(mBt,"FromSet");function hBt(t){return new Date(t.toISOString())}s(hBt,"FromDate");function go(t){if(xn(t))return dBt(t);if(Cd(t))return hBt(t);if(Wp(t))return fBt(t);if(m5e(t))return pBt(t);if(h5e(t))return mBt(t);if(Ei(t))return uBt(t);if(C0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(go,"Clone");var q0=class extends bn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Ao(t){return ib(t)?t():go(t)}s(Ao,"FromDefault");function gBt(t,e){return vn(t,"default")?Ao(t.default):{}}s(gBt,"FromAny");function ABt(t,e){return{}}s(ABt,"FromArgument");function yBt(t,e){if(t.uniqueItems===!0&&!vn(t,"default"))throw new q0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!vn(t,"default"))throw new q0(t,"Array with the contains constraint requires a default value");return"default"in t?Ao(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Pf(t.items,e)):[]}s(yBt,"FromArray");function CBt(t,e){return vn(t,"default")?Ao(t.default):async function*(){}()}s(CBt,"FromAsyncIterator");function EBt(t,e){return vn(t,"default")?Ao(t.default):BigInt(0)}s(EBt,"FromBigInt");function vBt(t,e){return vn(t,"default")?Ao(t.default):!1}s(vBt,"FromBoolean");function xBt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=Pf(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(xBt,"FromConstructor");function bBt(t,e){return vn(t,"default")?Ao(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(bBt,"FromDate");function IBt(t,e){return vn(t,"default")?Ao(t.default):()=>Pf(t.returns,e)}s(IBt,"FromFunction");function TBt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Pf(n,[...e,...r])}s(TBt,"FromImport");function wBt(t,e){return vn(t,"default")?Ao(t.default):t.minimum!==void 0?t.minimum:0}s(wBt,"FromInteger");function _Bt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=t.allOf.reduce((n,i)=>{let o=Pf(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!Ii(t,e,r))throw new q0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(_Bt,"FromIntersect");function SBt(t,e){return vn(t,"default")?Ao(t.default):function*(){}()}s(SBt,"FromIterator");function RBt(t,e){return vn(t,"default")?Ao(t.default):t.const}s(RBt,"FromLiteral");function kBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"Never types cannot be created. Consider using a default value.")}s(kBt,"FromNever");function PBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"Not types must have a default value")}s(PBt,"FromNot");function BBt(t,e){return vn(t,"default")?Ao(t.default):null}s(BBt,"FromNull");function DBt(t,e){return vn(t,"default")?Ao(t.default):t.minimum!==void 0?t.minimum:0}s(DBt,"FromNumber");function NBt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=Pf(o,e));return n}}s(NBt,"FromObject");function LBt(t,e){return vn(t,"default")?Ao(t.default):Promise.resolve(Pf(t.item,e))}s(LBt,"FromPromise");function MBt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(vn(t,"default"))return Ao(t.default);if(r===XA||r===JA)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=Pf(n,e);return o}}s(MBt,"FromRecord");function FBt(t,e){return vn(t,"default")?Ao(t.default):Pf(fo(t,e),e)}s(FBt,"FromRef");function OBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"RegExp types cannot be created. Consider using a default value.")}s(OBt,"FromRegExp");function QBt(t,e){if(t.pattern!==void 0){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"String types with formats must specify a default value")}else return vn(t,"default")?Ao(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(QBt,"FromString");function UBt(t,e){return vn(t,"default")?Ao(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(UBt,"FromSymbol");function qBt(t,e){if(vn(t,"default"))return Ao(t.default);if(!FH(t))throw new q0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return r4(t)[0]}s(qBt,"FromTemplateLiteral");function HBt(t,e){if(v7e++>KBt)throw new q0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return vn(t,"default")?Ao(t.default):Pf(fo(t,e),e)}s(HBt,"FromThis");function WBt(t,e){return vn(t,"default")?Ao(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Pf(t.items[n],e))}s(WBt,"FromTuple");function GBt(t,e){if(vn(t,"default"))return Ao(t.default)}s(GBt,"FromUndefined");function jBt(t,e){if(vn(t,"default"))return Ao(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Pf(t.anyOf[0],e)}s(jBt,"FromUnion");function VBt(t,e){return vn(t,"default")?Ao(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(VBt,"FromUint8Array");function $Bt(t,e){return vn(t,"default")?Ao(t.default):{}}s($Bt,"FromUnknown");function zBt(t,e){if(vn(t,"default"))return Ao(t.default)}s(zBt,"FromVoid");function YBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new Error("User defined types must specify a default value")}s(YBt,"FromKind");function Pf(t,e){let r=yl(t,e),n=t;switch(n[et]){case"Any":return gBt(n,r);case"Argument":return ABt(n,r);case"Array":return yBt(n,r);case"AsyncIterator":return CBt(n,r);case"BigInt":return EBt(n,r);case"Boolean":return vBt(n,r);case"Constructor":return xBt(n,r);case"Date":return bBt(n,r);case"Function":return IBt(n,r);case"Import":return TBt(n,r);case"Integer":return wBt(n,r);case"Intersect":return _Bt(n,r);case"Iterator":return SBt(n,r);case"Literal":return RBt(n,r);case"Never":return kBt(n,r);case"Not":return PBt(n,r);case"Null":return BBt(n,r);case"Number":return DBt(n,r);case"Object":return NBt(n,r);case"Promise":return LBt(n,r);case"Record":return MBt(n,r);case"Ref":return FBt(n,r);case"RegExp":return OBt(n,r);case"String":return QBt(n,r);case"Symbol":return UBt(n,r);case"TemplateLiteral":return qBt(n,r);case"This":return HBt(n,r);case"Tuple":return WBt(n,r);case"Undefined":return GBt(n,r);case"Union":return jBt(n,r);case"Uint8Array":return VBt(n,r);case"Unknown":return $Bt(n,r);case"Void":return zBt(n,r);default:if(!Ed.Has(n[et]))throw new q0(n,"Unknown type");return YBt(n,r)}}s(Pf,"Visit");var KBt=512,v7e=0;function pm(...t){return v7e=0,t.length===2?Pf(t[0],t[1]):Pf(t[0],[])}s(pm,"Create");var i$=class extends bn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function JBt(t,e,r){if(t[et]==="Object"&&typeof r=="object"&&!S1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[et]==="Literal"&&f.const===r[u]?c:0,m=Ii(f,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return Ii(t,e,r)?1:0}s(JBt,"ScoreUnion");function XBt(t,e,r){let n=t.anyOf.map(a=>fo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=JBt(a,e,r);c>o&&(i=a,o=c)}return i}s(XBt,"SelectUnion");function ZBt(t,e,r){if("default"in t)return typeof r=="function"?t.default:go(t.default);{let n=XBt(t,e,r);return iM(n,e,r)}}s(ZBt,"CastUnion");function eDt(t,e,r){return Ii(t,e,r)?go(r):pm(t,e)}s(eDt,"DefaultClone");function tDt(t,e,r){return Ii(t,e,r)?r:pm(t,e)}s(tDt,"Default");function rDt(t,e,r){if(Ii(t,e,r))return go(r);let n=xn(r)?go(r):pm(t,e),i=Vr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Vr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>cg(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!Ii(t,e,c))throw new i$(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(rDt,"FromArray");function nDt(t,e,r){if(Ii(t,e,r))return pm(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=cg(a,e,r.prototype[o]));return i}s(nDt,"FromConstructor");function iDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return cg(i,[...e,...n],r)}s(iDt,"FromImport");function oDt(t,e,r){let n=pm(t,e),i=Ei(n)&&Ei(r)?{...n,...r}:r;return Ii(t,e,i)?i:pm(t,e)}s(oDt,"FromIntersect");function sDt(t,e,r){throw new i$(t,"Never types cannot be cast")}s(sDt,"FromNever");function aDt(t,e,r){if(Ii(t,e,r))return r;if(r===null||typeof r!="object")return pm(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=cg(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=cg(t.additionalProperties,e,r[a]))}return i}s(aDt,"FromObject");function cDt(t,e,r){if(Ii(t,e,r))return go(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return pm(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=cg(i,e,c);return o}s(cDt,"FromRecord");function lDt(t,e,r){return cg(fo(t,e),e,r)}s(lDt,"FromRef");function uDt(t,e,r){return cg(fo(t,e),e,r)}s(uDt,"FromThis");function dDt(t,e,r){return Ii(t,e,r)?go(r):xn(r)?t.items===void 0?[]:t.items.map((n,i)=>cg(n,e,r[i])):pm(t,e)}s(dDt,"FromTuple");function fDt(t,e,r){return Ii(t,e,r)?go(r):ZBt(t,e,r)}s(fDt,"FromUnion");function cg(t,e,r){let n=ro(t.$id)?yl(t,e):e,i=t;switch(t[et]){case"Array":return rDt(i,n,r);case"Constructor":return nDt(i,n,r);case"Import":return iDt(i,n,r);case"Intersect":return oDt(i,n,r);case"Never":return sDt(i,n,r);case"Object":return aDt(i,n,r);case"Record":return cDt(i,n,r);case"Ref":return lDt(i,n,r);case"This":return uDt(i,n,r);case"Tuple":return dDt(i,n,r);case"Union":return fDt(i,n,r);case"Date":case"Symbol":case"Uint8Array":return eDt(t,e,r);default:return tDt(i,n,r)}}s(cg,"Visit");function iM(...t){return t.length===3?cg(t[0],t[1],t[2]):cg(t[0],[],t[1])}s(iM,"Cast");d();function pDt(t){return sb(t)&&t[et]!=="Unsafe"}s(pDt,"IsCheckable");function mDt(t,e,r){return xn(r)?r.map(n=>Bf(t.items,e,n)):r}s(mDt,"FromArray");function hDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Bf(i,[...e,...n],r)}s(hDt,"FromImport");function gDt(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>Bf(c,e,go(r))).reduce((c,l)=>Ei(l)?{...c,...l}:l,{});if(!Ei(r)||!Ei(o)||!sb(n))return o;let a=pf(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||Ii(n,e,r[c])&&(o[c]=Bf(n,e,r[c]));return o}s(gDt,"FromIntersect");function ADt(t,e,r){if(!Ei(r)||xn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(vn(t.properties,i)){r[i]=Bf(t.properties[i],e,r[i]);continue}if(sb(n)&&Ii(n,e,r[i])){r[i]=Bf(n,e,r[i]);continue}delete r[i]}return r}s(ADt,"FromObject");function yDt(t,e,r){if(!Ei(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=Bf(a,e,r[l]);continue}if(sb(n)&&Ii(n,e,r[l])){r[l]=Bf(n,e,r[l]);continue}delete r[l]}return r}s(yDt,"FromRecord");function CDt(t,e,r){return Bf(fo(t,e),e,r)}s(CDt,"FromRef");function EDt(t,e,r){return Bf(fo(t,e),e,r)}s(EDt,"FromThis");function vDt(t,e,r){if(!xn(r))return r;if(Ns(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=Bf(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(vDt,"FromTuple");function xDt(t,e,r){for(let n of t.anyOf)if(pDt(n)&&Ii(n,e,r))return Bf(n,e,r);return r}s(xDt,"FromUnion");function Bf(t,e,r){let n=ro(t.$id)?yl(t,e):e,i=t;switch(i[et]){case"Array":return mDt(i,n,r);case"Import":return hDt(i,n,r);case"Intersect":return gDt(i,n,r);case"Object":return ADt(i,n,r);case"Record":return yDt(i,n,r);case"Ref":return CDt(i,n,r);case"This":return EDt(i,n,r);case"Tuple":return vDt(i,n,r);case"Union":return xDt(i,n,r);default:return r}}s(Bf,"Visit");function o$(...t){return t.length===3?Bf(t[0],t[1],t[2]):Bf(t[0],[],t[1])}s(o$,"Clean");d();function s$(t){return ro(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(s$,"IsStringNumeric");function bDt(t){return Xl(t)||KA(t)||Vr(t)}s(bDt,"IsValueToString");function oM(t){return t===!0||Vr(t)&&t===1||Xl(t)&&t===BigInt("1")||ro(t)&&(t.toLowerCase()==="true"||t==="1")}s(oM,"IsValueTrue");function sM(t){return t===!1||Vr(t)&&(t===0||Object.is(t,-0))||Xl(t)&&t===BigInt("0")||ro(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(sM,"IsValueFalse");function IDt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(IDt,"IsTimeStringWithTimeZone");function TDt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(TDt,"IsTimeStringWithoutTimeZone");function wDt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(wDt,"IsDateTimeStringWithTimeZone");function _Dt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(_Dt,"IsDateTimeStringWithoutTimeZone");function SDt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(SDt,"IsDateString");function RDt(t,e){let r=b7e(t);return r===e?r:t}s(RDt,"TryConvertLiteralString");function kDt(t,e){let r=I7e(t);return r===e?r:t}s(kDt,"TryConvertLiteralNumber");function PDt(t,e){let r=x7e(t);return r===e?r:t}s(PDt,"TryConvertLiteralBoolean");function BDt(t,e){return ro(t.const)?RDt(e,t.const):Vr(t.const)?kDt(e,t.const):KA(t.const)?PDt(e,t.const):e}s(BDt,"TryConvertLiteral");function x7e(t){return oM(t)?!0:sM(t)?!1:t}s(x7e,"TryConvertBoolean");function DDt(t){let e=s(r=>r.split(".")[0],"truncateInteger");return s$(t)?BigInt(e(t)):Vr(t)?BigInt(Math.trunc(t)):sM(t)?BigInt(0):oM(t)?BigInt(1):t}s(DDt,"TryConvertBigInt");function b7e(t){return R1(t)&&t.description!==void 0?t.description.toString():bDt(t)?t.toString():t}s(b7e,"TryConvertString");function I7e(t){return s$(t)?parseFloat(t):oM(t)?1:sM(t)?0:t}s(I7e,"TryConvertNumber");function NDt(t){return s$(t)?parseInt(t):Vr(t)?Math.trunc(t):oM(t)?1:sM(t)?0:t}s(NDt,"TryConvertInteger");function LDt(t){return ro(t)&&t.toLowerCase()==="null"?null:t}s(LDt,"TryConvertNull");function MDt(t){return ro(t)&&t==="undefined"?void 0:t}s(MDt,"TryConvertUndefined");function FDt(t){return Cd(t)?t:Vr(t)?new Date(t):oM(t)?new Date(1):sM(t)?new Date(0):s$(t)?new Date(parseInt(t)):TDt(t)?new Date(`1970-01-01T${t}.000Z`):IDt(t)?new Date(`1970-01-01T${t}`):_Dt(t)?new Date(`${t}.000Z`):wDt(t)?new Date(t):SDt(t)?new Date(`${t}T00:00:00.000Z`):t}s(FDt,"TryConvertDate");function ODt(t,e,r){return(xn(r)?r:[r]).map(i=>lg(t.items,e,i))}s(ODt,"FromArray");function QDt(t,e,r){return DDt(r)}s(QDt,"FromBigInt");function UDt(t,e,r){return x7e(r)}s(UDt,"FromBoolean");function qDt(t,e,r){return FDt(r)}s(qDt,"FromDate");function HDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return lg(i,[...e,...n],r)}s(HDt,"FromImport");function WDt(t,e,r){return NDt(r)}s(WDt,"FromInteger");function GDt(t,e,r){return t.allOf.reduce((n,i)=>lg(i,e,n),r)}s(GDt,"FromIntersect");function jDt(t,e,r){return BDt(t,r)}s(jDt,"FromLiteral");function VDt(t,e,r){return LDt(r)}s(VDt,"FromNull");function $Dt(t,e,r){return I7e(r)}s($Dt,"FromNumber");function zDt(t,e,r){if(!Ei(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))vn(r,n)&&(r[n]=lg(t.properties[n],e,r[n]));return r}s(zDt,"FromObject");function YDt(t,e,r){if(!Ei(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=lg(o,e,c);return r}s(YDt,"FromRecord");function KDt(t,e,r){return lg(fo(t,e),e,r)}s(KDt,"FromRef");function JDt(t,e,r){return b7e(r)}s(JDt,"FromString");function XDt(t,e,r){return ro(r)||Vr(r)?Symbol(r):r}s(XDt,"FromSymbol");function ZDt(t,e,r){return lg(fo(t,e),e,r)}s(ZDt,"FromThis");function eNt(t,e,r){return xn(r)&&!Ns(t.items)?r.map((i,o)=>o<t.items.length?lg(t.items[o],e,i):i):r}s(eNt,"FromTuple");function tNt(t,e,r){return MDt(r)}s(tNt,"FromUndefined");function rNt(t,e,r){for(let n of t.anyOf){let i=lg(n,e,go(r));if(Ii(n,e,i))return i}return r}s(rNt,"FromUnion");function lg(t,e,r){let n=yl(t,e),i=t;switch(t[et]){case"Array":return ODt(i,n,r);case"BigInt":return QDt(i,n,r);case"Boolean":return UDt(i,n,r);case"Date":return qDt(i,n,r);case"Import":return HDt(i,n,r);case"Integer":return WDt(i,n,r);case"Intersect":return GDt(i,n,r);case"Literal":return jDt(i,n,r);case"Null":return VDt(i,n,r);case"Number":return $Dt(i,n,r);case"Object":return zDt(i,n,r);case"Record":return YDt(i,n,r);case"Ref":return KDt(i,n,r);case"String":return JDt(i,n,r);case"Symbol":return XDt(i,n,r);case"This":return ZDt(i,n,r);case"Tuple":return eNt(i,n,r);case"Undefined":return tNt(i,n,r);case"Union":return rNt(i,n,r);default:return r}}s(lg,"Visit");function a$(...t){return t.length===3?lg(t[0],t[1],t[2]):lg(t[0],[],t[1])}s(a$,"Convert");d();function T7e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Ii(e,r,n))throw new h4(e,n,ty(e,r,n).First());return O1(e,r)?g4(e,r,n):n}s(T7e,"Decode");d();function dE(t,e){let r=vn(t,"default")?t.default:void 0,n=ib(r)?r():go(r);return Ns(e)?n:Ei(e)&&Ei(n)?Object.assign(n,e):e}s(dE,"ValueOrDefault");function cme(t){return sb(t)&&"default"in t}s(cme,"HasDefaultProperty");function nNt(t,e,r){if(xn(r)){for(let i=0;i<r.length;i++)r[i]=Nd(t.items,e,r[i]);return r}let n=dE(t,r);if(!xn(n))return n;for(let i=0;i<n.length;i++)n[i]=Nd(t.items,e,n[i]);return n}s(nNt,"FromArray");function iNt(t,e,r){return Cd(r)?r:dE(t,r)}s(iNt,"FromDate");function oNt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Nd(i,[...e,...n],r)}s(oNt,"FromImport");function sNt(t,e,r){let n=dE(t,r);return t.allOf.reduce((i,o)=>{let a=Nd(o,e,n);return Ei(a)?{...i,...a}:a},{})}s(sNt,"FromIntersect");function aNt(t,e,r){let n=dE(t,r);if(!Ei(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Nd(t.properties[o],e,n[o]);Ns(a)||(n[o]=Nd(t.properties[o],e,n[o]))}if(!cme(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=Nd(t.additionalProperties,e,n[o]));return n}s(aNt,"FromObject");function cNt(t,e,r){let n=dE(t,r);if(!Ei(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&cme(a)&&(n[l]=Nd(a,e,n[l]));if(!cme(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=Nd(i,e,n[l]));return n}s(cNt,"FromRecord");function lNt(t,e,r){return Nd(fo(t,e),e,dE(t,r))}s(lNt,"FromRef");function uNt(t,e,r){return Nd(fo(t,e),e,r)}s(uNt,"FromThis");function dNt(t,e,r){let n=dE(t,r);if(!xn(n)||Ns(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=Nd(i[a],e,n[a]));return n}s(dNt,"FromTuple");function fNt(t,e,r){let n=dE(t,r);for(let i of t.anyOf){let o=Nd(i,e,go(n));if(Ii(i,e,o))return o}return n}s(fNt,"FromUnion");function Nd(t,e,r){let n=yl(t,e),i=t;switch(i[et]){case"Array":return nNt(i,n,r);case"Date":return iNt(i,n,r);case"Import":return oNt(i,n,r);case"Intersect":return sNt(i,n,r);case"Object":return aNt(i,n,r);case"Record":return cNt(i,n,r);case"Ref":return lNt(i,n,r);case"This":return uNt(i,n,r);case"Tuple":return dNt(i,n,r);case"Union":return fNt(i,n,r);default:return dE(i,r)}}s(Nd,"Visit");function c$(...t){return t.length===3?Nd(t[0],t[1],t[2]):Nd(t[0],[],t[1])}s(c$,"Default");d();d();var ug={};ra(ug,{Delete:()=>mNt,Format:()=>aM,Get:()=>gNt,Has:()=>hNt,Set:()=>pNt,ValuePointerRootDeleteError:()=>u$,ValuePointerRootSetError:()=>l$});d();var l$=class extends bn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},u$=class extends bn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function w7e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(w7e,"Escape");function*aM(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield w7e(t.slice(e,r))),e=n+1):r=n;yield w7e(t.slice(e))}s(aM,"Format");function pNt(t,e,r){if(e==="")throw new l$(t,e,r);let[n,i,o]=[null,t,""];for(let a of aM(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(pNt,"Set");function mNt(t,e){if(e==="")throw new u$(t,e);let[r,n,i]=[null,t,""];for(let o of aM(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(mNt,"Delete");function hNt(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of aM(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(hNt,"Has");function gNt(t,e){if(e==="")return t;let r=t;for(let n of aM(e)){if(r[n]===void 0)return;r=r[n]}return r}s(gNt,"Get");d();function ANt(t,e){if(!Ei(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>jS(t[i],e[i]))}s(ANt,"ObjectType");function yNt(t,e){return Cd(e)&&t.getTime()===e.getTime()}s(yNt,"DateType");function CNt(t,e){return!xn(e)||t.length!==e.length?!1:t.every((r,n)=>jS(r,e[n]))}s(CNt,"ArrayType");function ENt(t,e){return!Wp(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>jS(r,e[n]))}s(ENt,"TypedArrayType");function vNt(t,e){return t===e}s(vNt,"ValueType");function jS(t,e){if(Cd(t))return yNt(t,e);if(Wp(t))return ENt(t,e);if(xn(t))return CNt(t,e);if(Ei(t))return ANt(t,e);if(C0(t))return vNt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(jS,"Equal");var xNt=_o({type:zi("insert"),path:vd(),value:Gh()}),bNt=_o({type:zi("update"),path:vd(),value:Gh()}),INt=_o({type:zi("delete"),path:vd()}),S7e=wo([xNt,bNt,INt]),d$=class extends bn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function f$(t,e){return{type:"update",path:t,value:e}}s(f$,"CreateUpdate");function R7e(t,e){return{type:"insert",path:t,value:e}}s(R7e,"CreateInsert");function k7e(t){return{type:"delete",path:t}}s(k7e,"CreateDelete");function _7e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new d$(t,"Cannot diff objects with symbols")}s(_7e,"AssertDiffable");function*TNt(t,e,r){if(_7e(e),_7e(r),!dce(r))return yield f$(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)vn(e,o)||(yield R7e(`${t}/${o}`,r[o]));for(let o of n)vn(r,o)&&(jS(e,r)||(yield*p$(`${t}/${o}`,e[o],r[o])));for(let o of n)vn(r,o)||(yield k7e(`${t}/${o}`))}s(TNt,"ObjectType");function*wNt(t,e,r){if(!xn(r))return yield f$(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*p$(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield R7e(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield k7e(`${t}/${n}`))}s(wNt,"ArrayType");function*_Nt(t,e,r){if(!Wp(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield f$(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*p$(`${t}/${n}`,e[n],r[n])}s(_Nt,"TypedArrayType");function*SNt(t,e,r){e!==r&&(yield f$(t,r))}s(SNt,"ValueType");function*p$(t,e,r){if(dce(e))return yield*TNt(t,e,r);if(xn(e))return yield*wNt(t,e,r);if(Wp(e))return yield*_Nt(t,e,r);if(C0(e))return yield*SNt(t,e,r);throw new d$(e,"Unable to diff value")}s(p$,"Visit");function P7e(t,e){return[...p$("",t,e)]}s(P7e,"Diff");function RNt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(RNt,"IsRootUpdate");function kNt(t){return t.length===0}s(kNt,"IsIdentity");function B7e(t,e){if(RNt(e))return go(e[0].value);if(kNt(e))return go(t);let r=go(t);for(let n of e)switch(n.type){case"insert":{ug.Set(r,n.path,n.value);break}case"update":{ug.Set(r,n.path,n.value);break}case"delete":{ug.Delete(r,n.path);break}}return r}s(B7e,"Patch");d();function D7e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=O1(e,r)?y4(e,r,n):n;if(!Ii(e,r,i))throw new A4(e,i,ty(e,r,i).First());return i}s(D7e,"Encode");d();function m$(t){return Ei(t)&&!xn(t)}s(m$,"IsStandardObject");var h$=class extends bn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function PNt(t,e,r,n){if(!m$(r))ug.Set(t,e,go(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)lme(t,`${e}/${a}`,r[a],n[a])}}s(PNt,"ObjectType");function BNt(t,e,r,n){if(!xn(r))ug.Set(t,e,go(n));else{for(let i=0;i<n.length;i++)lme(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(BNt,"ArrayType");function DNt(t,e,r,n){if(Wp(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else ug.Set(t,e,go(n))}s(DNt,"TypedArrayType");function NNt(t,e,r,n){r!==n&&ug.Set(t,e,n)}s(NNt,"ValueType");function lme(t,e,r,n){if(xn(n))return BNt(t,e,r,n);if(Wp(n))return DNt(t,e,r,n);if(m$(n))return PNt(t,e,r,n);if(C0(n))return NNt(t,e,r,n)}s(lme,"Visit");function N7e(t){return Wp(t)||C0(t)}s(N7e,"IsNonMutableValue");function LNt(t,e){return m$(t)&&xn(e)||xn(t)&&m$(e)}s(LNt,"IsMismatchedValue");function L7e(t,e){if(N7e(t)||N7e(e))throw new h$("Only object and array types can be mutated at the root level");if(LNt(t,e))throw new h$("Cannot assign due type mismatch of assignable values");lme(t,"",t,e)}s(L7e,"Mutate");d();var g$=class extends bn{static{s(this,"ParseError")}constructor(e){super(e)}},ume;(function(t){let e=new Map([["Assert",(o,a,c)=>(n$(o,a,c),c)],["Cast",(o,a,c)=>iM(o,a,c)],["Clean",(o,a,c)=>o$(o,a,c)],["Clone",(o,a,c)=>go(c)],["Convert",(o,a,c)=>a$(o,a,c)],["Decode",(o,a,c)=>O1(o,a)?g4(o,a,c):c],["Default",(o,a,c)=>c$(o,a,c)],["Encode",(o,a,c)=>O1(o,a)?y4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(ume||(ume={}));var M7e=["Clone","Clean","Default","Convert","Assert","Decode"];function MNt(t,e,r,n){return t.reduce((i,o)=>{let a=ume.Get(o);if(Ns(a))throw new g$(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(MNt,"ParseValue");function F7e(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?xn(t[0])?[t[0],t[1],[],t[2]]:[M7e,t[0],t[1],t[2]]:t.length===2?[M7e,t[0],[],t[1]]:(()=>{throw new g$("Invalid Arguments")})();return MNt(e,r,n,i)}s(F7e,"Parse");d();var Sy={};ra(Sy,{Assert:()=>n$,Cast:()=>iM,Check:()=>Ii,Clean:()=>o$,Clone:()=>go,Convert:()=>a$,Create:()=>pm,Decode:()=>T7e,Default:()=>c$,Diff:()=>P7e,Edit:()=>S7e,Encode:()=>D7e,Equal:()=>jS,Errors:()=>ty,Hash:()=>fb,Mutate:()=>L7e,Parse:()=>F7e,Patch:()=>B7e,ValueErrorIterator:()=>pb});d();var FNt="gpt-4o-copilot",mm=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ia(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return FNt}parseModelsResponse(e){try{return Sy.Parse(ZOe,e)}catch(r){fn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await WS(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(fn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=e7e(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&fn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=vi(this._ctx,kt.DebugOverrideEngine)||vi(this._ctx,kt.DebugOverrideEngineLegacy);if(i)return new oI(i,"override");let o=e?this._ctx.get(Bt).customEngine(e):"",a=e?this._ctx.get(Bt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new oI(o,"exp"):new oI(n,"modelpicker"):o?new oI(o,"exp"):this.customModels.length>0?new oI(this.customModels[0],"custommodel"):new oI(r,"default")}},oI=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function aI(t,e=void 0){let r=t.get(mm),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(aI,"getEngineRequestInfo");d();d();var yo=class{static{s(this,"FileSystem")}};var tQe=Ne(eQe());function rQe(t){return t!==void 0&&t!==0}s(rQe,"isRepoInfo");function nQe(t){if(t===void 0||t===0)return"";let e=fE(t);if(e==="github/github")return e;let r=l8t(t)?.toLowerCase();return r!==void 0?r:""}s(nQe,"getDogFood");function fE(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(fE,"tryGetGitHubNWO");function l8t(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(l8t,"tryGetADONWO");function cI(t,e){let r=Gu(e);return u8t(t,r)}s(cI,"extractRepoInfoInBackground");var u8t=m8t(d8t,1e4);async function d8t(t,e){let r=WDe(e);if(!r)return;let n=await f8t(t,r);if(!n)return;let i=t.get(yo),o=Lo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=p8t(a)??"",l=mme(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(d8t,"extractRepoInfo");function mme(t){let e;try{if(e=(0,tQe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(mme,"parseRepoUrl");async function f8t(t,e){let r=e+"_add_to_make_longer",n=t.get(yo);for(;e!=="file:///"&&e.length<r.length;){let i=Lo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=Gu(e)}}s(f8t,"getRepoBaseUri");function p8t(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(p8t,"getRepoUrlFromConfigText");var pme=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function m8t(t,e){let r=new Or(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new pme(u)),n.delete(a)}),0}}s(m8t,"computeInBackgroundAndMemoize");d();var cM=500,iQe=8192-cM,oQe=4,$P=10,sQe=15,aQe=35,h8t={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function lM(t){return t=t.toLowerCase(),h8t[t]??t}s(lM,"normalizeLanguageId");var hme=class{constructor(e){this.ctx=e;this.cache=new Or(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new gme(()=>this.ctx.get(eg).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},gme=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function A8t(t){return"uri"in t}s(A8t,"isCompletionsFiltersInfo");var Bt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new hme(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=Dr.createAndMarkAsIssued(),n=void 0){if(r instanceof oy)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&A8t(e)?cI(this.ctx,e.uri):void 0,o=fE(i)??"",a=nQe(i)??"",c=e?.languageId??"",l=aI(this.ctx).modelId;n??=await this.ctx.get(Qr).getToken();let u=LDe(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},E=this.getGranularityDirectory(),x=this.makeFilterSettings(y),b=E.extendFilters(x),_=await this.getExpConfig(b.newFilterSettings,g);E.update(x,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=E.extendFilters(x),P=k.newFilterSettings,N=await this.getExpConfig(P,g),M=new Promise(J=>setTimeout(J,t.upcomingDynamicFilterCheckDelayMs));for(let J of k.otherFilterSettingsToPrefetch)M=M.then(async()=>{await new Promise(pe=>setTimeout(pe,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(J,g)});return this.prepareForUpcomingFilters(P,g),new oy(r.properties,r.measurements,r.issuedTime,{filters:P,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(As).machineId;this.granularityDirectory=new dG(e,this.ctx.get(ly))}return this.granularityDirectory}makeFilterSettings(e){return new g_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Up.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new g_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=q4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??sQe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??$P}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??iQe+cM}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextPercent(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextpercent??aQe}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}enableSpeculativeRequestsShown(e){return e.filtersAndExp.exp.variables.copilotspeculativerequestsshown??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();var y$=Ne(A$());var yme={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function H0(t){return t in yme&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(H0,"isSupportedLanguageId");function C$(t){if(!(t in yme))throw new Error(`Unrecognized language: ${t}`);return yme[t]}s(C$,"languageIdToWasmLanguage");var Ame=new Map;async function y8t(t){let e;try{e=await zV(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new jP(`Could not load tree-sitter-${t}.wasm`,r):r}return y$.default.Language.load(e)}s(y8t,"loadWasmLanguage");function Eme(t){let e=C$(t);if(!Ame.has(e)){let r=y8t(e);Ame.set(e,r)}return Ame.get(e)}s(Eme,"getLanguage");var Cme=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function pE(t,e){await y$.default.init({locateFile:s(o=>$pe(o),"locateFile")});let r;try{r=new y$.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Cme(`Could not init Parse for language <${t}>`,o):o}let n=await Eme(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(pE,"parseTreeSitter");function cQe(t){switch(C$(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(cQe,"getBlockCloseToken");function C8t(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(C8t,"innerQuery");var E8t=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function lQe(t){return C8t([E8t],t).length==1}s(lQe,"queryPythonIsDocstring");var Ry=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},$u=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return uM.languageIds.has(e)||dM.languageIds.has(e)||fM.languageIds.has(e)||pM.languageIds.has(e)||mM.languageIds.has(e)||hM.languageIds.has(e)||gM.languageIds.has(e)||AM.languageIds.has(e)}static create(e,r,n,i){if(uM.languageIds.has(e))return new uM(e,r,n,i);if(dM.languageIds.has(e))return new dM(e,r,n,i);if(fM.languageIds.has(e))return new fM(e,r,n,i);if(hM.languageIds.has(e))return new hM(e,r,n,i);if(pM.languageIds.has(e))return new pM(e,r,n,i);if(mM.languageIds.has(e))return new mM(e,r,n,i);if(gM.languageIds.has(e))return new gM(e,r,n,i);if(AM.languageIds.has(e))return new AM(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await pE(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},vme=class t extends Ry{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},uM=class extends $u{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new vme(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},xme=class t extends Ry{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},dM=class extends $u{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new xme(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},bme=class t extends Ry{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},fM=class extends $u{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new bme(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Ime=class t extends Ry{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},pM=class extends $u{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Ime(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Tme=class t extends Ry{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},mM=class extends $u{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Tme(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},wme=class t extends Ry{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},hM=class extends $u{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new wme(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},_me=class t extends Ry{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},gM=class extends $u{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new _me(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},Sme=class t extends Ry{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},AM=class extends $u{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new Sme(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};d();function v8t(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(v8t,"getProxyFromEnvironment");function x8t(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(x8t,"getRejectUnauthorizedFromEnvironment");var uQe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function dQe(t){let e=v8t(t),r=yM({proxy:e,proxyStrictSSL:x8t(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(dQe,"getHttpSettingsFromEnvironment");function yM(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||b8t(n,i)}}catch{return{...t,proxy:""}}}s(yM,"normalizeHttpSettings");function b8t(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(b8t,"getAuth");var pQe=Ne(require("events"));var Rme={};ra(Rme,{activationEvents:()=>W8t,badges:()=>H8t,browser:()=>G8t,bugs:()=>N8t,build:()=>S8t,buildType:()=>R8t,categories:()=>U8t,contributes:()=>kme,default:()=>J8t,dependencies:()=>Y8t,description:()=>w8t,devDependencies:()=>z8t,displayName:()=>T8t,enabledApiProposals:()=>V8t,engines:()=>Q8t,extensionPack:()=>O8t,homepage:()=>B8t,icon:()=>M8t,keywords:()=>q8t,license:()=>D8t,main:()=>j8t,name:()=>I8t,overrides:()=>K8t,preview:()=>P8t,pricing:()=>F8t,publisher:()=>k8t,qna:()=>L8t,scripts:()=>$8t,version:()=>_8t});var I8t="copilot",T8t="GitHub Copilot",w8t="Your AI pair programmer",_8t="1.348.0",S8t="1695",R8t="prod",k8t="GitHub",P8t=!1,B8t="https://github.com/features/copilot?editor=vscode",D8t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",N8t={url:"https://github.com/microsoft/vscode/issues"},L8t="https://github.com/github-community/community/discussions/categories/copilot",M8t="assets/Copilot-App-Icon.png",F8t="Trial",O8t=["GitHub.copilot-chat","GitHub.copilot"],Q8t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},U8t=["AI","Chat","Programming Languages","Machine Learning"],q8t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],H8t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],W8t=["onStartupFinished"],G8t="./dist/web",j8t="./dist/extension",V8t=["inlineCompletionsAdditions"],kme={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},$8t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},z8t={"@azure/identity":"^4.10.1","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.15.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},Y8t={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},K8t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},J8t={name:I8t,displayName:T8t,description:w8t,version:_8t,build:S8t,buildType:R8t,publisher:k8t,preview:P8t,homepage:B8t,license:D8t,bugs:N8t,qna:L8t,icon:M8t,pricing:F8t,extensionPack:O8t,engines:Q8t,categories:U8t,keywords:q8t,badges:H8t,activationEvents:W8t,browser:G8t,main:j8t,enabledApiProposals:V8t,contributes:kme,scripts:$8t,devDependencies:z8t,dependencies:Y8t,overrides:K8t};var kt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",EnableSpeculativeRequestsShown:"internal.enableSpeculativeRequestsShown",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function mQe(t){return["server","parsingandserver"].includes(t)}s(mQe,"shouldDoServerTrimming");var dg=class{static{s(this,"BlockModeConfig")}},YP=class extends dg{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Bt).overrideBlockMode(n);if(i)return fQe(i,r);let o=e.get(Bt).enableProgressiveReveal(n);return vi(e,kt.AlwaysRequestMultiline)??o?fQe("moremultiline",r):r=="ruby"?"parsing":H0(r)?"parsingandserver":"server"}};function X8t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(X8t,"blockModeRequiresTreeSitter");function fQe(t,e){return t==="moremultiline"&&$u.isSupported(e)?t:X8t(t)&&!H0(e)?"server":t}s(fQe,"toApplicableBlockMode");var nu=class{static{s(this,"ConfigProvider")}},KP=class extends nu{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return e6t(e)}getOptionalConfig(e){return t6t(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},VS=class extends nu{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.emitter=new pQe.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=yM(r);this.httpSettings=n,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(r){return this.emitter.on("didChangeHttpSettings",r),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",r)},"dispose")}}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[kt.ShowEditorCompletions,kt.EnableAutoCompletions,kt.DelayCompletions,kt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function Z8t(t){return t?.type==="object"&&"properties"in t}s(Z8t,"isContributesObject");function hQe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(hQe,"getConfigKeyRecursively");function e6t(t){if(zP.has(t))return zP.get(t);throw new Error(`Missing config default value: ${A6}.${t}`)}s(e6t,"getConfigDefaultForKey");function t6t(t){return zP.get(t)}s(t6t,"getOptionalConfigDefaultForKey");var zP=new Map([[kt.DebugOverrideCppHeadersEnableSwitch,!1],[kt.RelatedFilesVSCodeCSharp,!1],[kt.RelatedFilesVSCodeTypeScript,!1],[kt.RelatedFilesVSCode,!1],[kt.IncludeNeighboringFiles,!1],[kt.ExcludeRelatedFiles,!1],[kt.ContextProviders,[]],[kt.DebugUseEditorFetcher,null],[kt.DebugUseElectronFetcher,null],[kt.DebugOverrideLogLevels,{}],[kt.DebugSnippyOverrideUrl,""],[kt.FetchStrategy,"auto"],[kt.UseSubsetMatching,null],[kt.ContextProviderTimeBudget,void 0],[kt.DebugOverrideCapiUrl,""],[kt.DebugTestOverrideCapiUrl,""],[kt.DebugOverrideProxyUrl,""],[kt.DebugTestOverrideProxyUrl,""],[kt.DebugOverrideEngine,""],[kt.EnableSpeculativeRequests,void 0],[kt.EnableSpeculativeRequestsShown,void 0],[kt.AlwaysRequestMultiline,void 0],[kt.ModelAlwaysTerminatesSingleline,void 0],[kt.TrimCompletionsAggressively,void 0],[kt.CompletionsDebounce,void 0],[kt.NESXTab,void 0],[kt.UseWorkspaceContextCoordinator,void 0],[kt.ShowWorkspaceContextDebugger,!1],[kt.CompletionsDelay,void 0],[kt.UseSplitContextPrompt,void 0],[kt.UseCompletionsComparisonPanel,!1],[kt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[kt.ComparisonPanelRandomizedMode,!1],[kt.ShowEditorCompletions,void 0],[kt.EnableAutoCompletions,void 0],[kt.DelayCompletions,void 0],[kt.FilterCompletions,void 0]]);for(let t of Object.values(kt)){let e=kme.configuration[0],r=[],n=`${A6}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(Z8t(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(zP.has(t))throw new Error(`Duplicate config default value ${A6}.${t}`);zP.set(t,i.default)}}if(!zP.has(t))throw new Error(`Missing config default value ${A6}.${t}`)}function vi(t,e){return t.get(nu).getConfig(e)}s(vi,"getConfig");function mDe(t){return t.get(nu).dumpForTelemetry()}s(mDe,"dumpForTelemetry");var lo=class{constructor(){this.packageJson=Rme}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function Vue(t){return t.get(lo).isProduction()}s(Vue,"isProduction");function nNe(t){return t.get(lo).getBuildType()==="dev"}s(nNe,"isDevBuild");function sy(t){return t.get(lo).getBuildType()}s(sy,"getBuildType");function hDe(t){return t.get(lo).getBuild()}s(hDe,"getBuild");function N_(t){return t.get(lo).getVersion()}s(N_,"getVersion");var As=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function zA({name:t,version:e}){return`${t}/${e}`}s(zA,"formatNameAndVersion");var nn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},$A="2025-05-01";function A0(t){let e=t.get(nn);return{"Editor-Version":zA(e.getEditorInfo()),"Editor-Plugin-Version":zA(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":N_(t)}}s(A0,"editorVersionHeaders");var Zh="Iv1.b507a08c87ecfe98",Il=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??Zh}};d();var lI=require("fs"),gQe=require("os"),AQe=Ne(require("path")),JP=require("process");var pu=class{static{s(this,"PersistenceManager")}},Pme=class extends pu{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await lI.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await lI.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await lI.promises.rm(i):await lI.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await lI.promises.rm(n)}catch{}}async listSettings(){try{return(await lI.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await lI.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function Bme(){return JP.env.XDG_CONFIG_HOME&&AQe.isAbsolute(JP.env.XDG_CONFIG_HOME)?JP.env.XDG_CONFIG_HOME+"/github-copilot":(0,gQe.platform)()==="win32"?JP.env.USERPROFILE+"\\AppData\\Local\\github-copilot":JP.env.HOME+"/.config/github-copilot"}s(Bme,"getXdgConfigPath");function yQe(){return new Pme(Bme())}s(yQe,"makeXdgPersistenceManager");d();d();d();var mE={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var CQe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],EQe={".php":[".blade"]},$S=Object.keys(mE).flatMap(t=>mE[t].extensions);var Dme=Ne(require("node:path"));var ZP=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},CM=class{static{s(this,"LanguageDetection")}},Nme=new Map,XP=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(mE)){for(let n of e)Nme.set(n,[...Nme.get(n)??[],t]);for(let n of r??[])XP.set(n,[...XP.get(n)??[],t])}var Lme=class extends CM{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Oi(e.uri),n=Dme.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new ZP(o.languageId,o.isGuess,a):new ZP(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(CQe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=Dme.extname(n).toLowerCase();if(i.length>0&&$S.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=EQe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(XP.has(e))return{languageId:XP.get(e)[0],isGuess:!1};let n=Nme.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),XP.has(e))return{languageId:XP.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},Mme=class extends CM{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new ZP("cpp",n.isGuess,n.fileExtension):n}},Fme=class extends CM{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new ZP(r.languageId,!0,""):this.delegate.detectLanguage(r)}},r6t=new Mme(new Fme(new Lme));function e3({uri:t,languageId:e}){let r=r6t.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(e3,"detectLanguage");d();d();d();d();function hE(t){if(t.isCancellationRequested)throw new E$}s(hE,"throwIfCancellationRequested");function x$(t){return t instanceof E$?!0:t instanceof Error&&t.name===Ome&&t.message===Ome}s(x$,"isCancellationError");var E$=class extends Error{static{s(this,"CancellationError")}constructor(){super(Ome),this.name=this.message}},Ome="Canceled",v$=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function zS(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(zS,"isTypeDefinition");var bs=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=xQe(e,e.length,i),vQe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=xQe(e,e.length,++i),vQe(n,r)):i++;return n.join("")}};function vQe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(vQe,"appendIndent");function xQe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(xQe,"consumeIndent");var hm=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Bc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await pE(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new v$,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=null,g=null;for(let x=0;x<i.length;x++){let b=i[x].name;b==="name"?(u=i[x].node.startIndex,f=i[x].node.endIndex):b==="reference"?(u=i[x].node.startIndex,f=i[x].node.endIndex,c=i[x].node.startIndex,l=i[x].node.endIndex,h=b):b==="body"?(p=i[x].node.startIndex,m=i[x].node.endIndex):b==="comment"?(o=o===0?i[x].node.startIndex:Math.min(o,i[x].node.startIndex),a=Math.max(a,i[x].node.endIndex)):b==="receiver"?g=bs.fromBounds(i[x].node.startIndex,i[x].node.endIndex).getText(n):(c=i[x].node.startIndex,l=i[x].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let y=bs.fromBounds(c,l),E=c>0||l>0||u>0||f>0?new hm(r,"","",bs.fromBounds(o,a),bs.fromBounds(u,f),bs.fromBounds(p,m),y,t.kindFromString(h),0):null;if(E){t.updateScopesForSymbol(e,E);let x=E.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new hm(r,b,x.substring(x.lastIndexOf(".")+1),E.commentRange,E.nameRange,E.bodyRange,E.extentRange,E.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var b$=class extends Bc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,n6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},I$=class extends Bc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,o6t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,s6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},T$=class extends Bc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,i6t),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new bs(f,p-f),h=new bs(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=bs.empty,y=bs.empty,E=u.substring(u.lastIndexOf("/")+1);i.add(new hm(e,u,E,g,m,y,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},n6t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,i6t=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,o6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,s6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var _$=class extends Bc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,a6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},S$=class extends Bc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,l6t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,u6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},R$=class extends Bc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,c6t)).filter(i=>i.kind===0)}},a6t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,c6t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,l6t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,u6t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var d6t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),k$=class extends Bc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,f6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},P$=class extends Bc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,p6t)).filter(i=>!d6t.has(i.unqualifiedName))}};var f6t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,p6t=`
(call_expression function: (_) @name) @reference
`;d();var m6t=new Set(["int","str","float","bool","list","dict","tuple","set"]),B$=class extends Bc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,h6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},D$=class extends Bc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,g6t)).filter(i=>!m6t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,y6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},N$=class extends Bc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,A6t),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new bs(f.node.startIndex,u.node.endIndex-f.node.endIndex),m=new bs(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=bs.empty,g=bs.empty,y=f.node.text,E=y.split(".").pop()||y,x;a?x=`${l.node.text}.${a.node.text}`:x=l.node.text,i.add(new hm(e,x,E,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},h6t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,g6t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,A6t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,y6t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var C6t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),t3=class extends Bc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,E6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},r3=class extends Bc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,v6t)).filter(i=>!C6t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var E6t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,v6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var x6t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),L$=class extends t3{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,b6t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},M$=class extends r3{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,I6t),super.extractReferences(e,r)]);return[...n.filter(o=>!x6t.has(o.unqualifiedName)),...i]}},b6t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,I6t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var EM=[{symbolExtractor:new _$,referenceExtractor:new S$,importExtractor:new R$,languageId:"java"},{symbolExtractor:new b$,referenceExtractor:new I$,importExtractor:new T$,languageId:"go"},{symbolExtractor:new B$,referenceExtractor:new D$,importExtractor:new N$,languageId:"python"},{symbolExtractor:new t3,referenceExtractor:new r3,languageId:"typescript"},{symbolExtractor:new L$,referenceExtractor:new M$,languageId:"typescriptreact"},{symbolExtractor:new k$,referenceExtractor:new P$,languageId:"javascript"}];function bQe(t){let e=e3({uri:t});if(e&&EM.some(r=>e===r.languageId))return e}s(bQe,"getSupportedLanguageIdForMultiLanguageProvider");var IQe=new Map(EM.map(t=>[t.languageId,t.referenceExtractor])),F$=new Map(EM.map(t=>[t.languageId,t.symbolExtractor])),TQe=new Map(EM.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),Qme=EM.map(t=>mE[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function Ume(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Ume,"virtualNode");function wQe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(wQe,"lineNode");function qme(t){return{type:"blank",lineNumber:t,subs:[]}}s(qme,"blankNode");function O$(t){return{type:"top",indentation:-1,subs:t??[]}}s(O$,"topNode");function mu(t){return t.type==="blank"}s(mu,"isBlank");function YS(t){return t.type==="line"}s(YS,"isLine");function KS(t){return t.type==="virtual"}s(KS,"isVirtual");d();function _Qe(t,e){return zu(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(_Qe,"clearLabelsIf");function JS(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>JS(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>JS(r,e)),label:t.label?e(t.label):void 0}}}s(JS,"mapLabels");function zu(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(zu,"visitTree");function Hme(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),zu(t,o,n),i}s(Hme,"foldTree");function Q$(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:O$()}s(Q$,"rebuildTree");d();function w6t(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[wQe(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>f);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(qme(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(qme(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return O$(a)}s(w6t,"parseRaw");function vM(t,e){function r(n){if(YS(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),zu(t,r,"bottomUp")}s(vM,"labelLines");function U$(t){function e(r){if(KS(r)&&r.label===void 0){let n=r.subs.filter(i=>!mu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),zu(t,e,"bottomUp")}s(U$,"labelVirtualInherited");function xM(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(xM,"buildLabelRules");function Wme(t){let r=Q$(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&YS(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(YS(c)||KS(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&mu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),m=o.subs.slice(f),h=m.length>0?[Ume(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),mu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return _Qe(t,n=>n==="newVirtual"),r}s(Wme,"combineClosersAndOpeners");function SQe(t,e=mu,r){return Q$(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=Ume(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),mu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(SQe,"groupBlocks");function XS(t){return Q$(t,s(function(r){return KS(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&KS(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(XS,"flattenVirtual");var _6t={opener:/^[[({]/,closer:/^[\])}]/},S6t=xM(_6t),RQe={};function Gme(t,e){RQe[t]=e}s(Gme,"registerLanguageSpecificParser");function ZS(t,e){let r=w6t(t),n=RQe[e??""];return n?n(r):(vM(r,S6t),Wme(r))}s(ZS,"parseTree");var R6t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},k6t=xM(R6t);function kQe(t){let e=t;return vM(e,k6t),e=Wme(e),e=XS(e),U$(e),zu(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!mu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(kQe,"processJava");d();var P6t={heading:/^# /,subheading:/^## /,subsubheading:/### /},B6t=xM(P6t);function PQe(t){let e=t;if(vM(e,B6t),mu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||mu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=SQe(e),e=XS(e),U$(e),e}s(PQe,"processMarkdown");d();function BQe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(BQe,"deparseLine");Gme("markdown",PQe);Gme("java",kQe);var D6t={worthUp:.9,worthSibling:.88,worthDown:.8};function jme(t,e,r=ho(),n=D6t){let i=JS(t,o=>o?1:void 0);return zu(i,o=>{if(mu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),zu(i,o=>{if(mu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),N6t(i,e,r)}s(jme,"fromTreeWithFocussedLines");function N6t(t,e,r=ho()){let n=Hme(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[BQe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Nt(n,e,r)}s(N6t,"fromTreeWithValuedLines");function W0(t,e=!0,r=!0,n,i=ho()){let o=typeof t=="string"?ZS(t):ZS(t.source,t.languageId);XS(o);let a=JS(o,c=>e&&c!=="closer");return zu(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&zu(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&zu(a,c=>{c.label||=(YS(c)||mu(c))&&c.lineNumber==0},"topDown"),jme(a,n,i)}s(W0,"elidableTextForSourceCode");d();var bM=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>ho().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Nt=class t{constructor(e,r,n=ho()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new bM(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&W0(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>ho().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=M6t(this.lines,i);if(l<=e)return Vme(c);F6t(u,a);let f=l;for(;f>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?O6t(c,m):"",y=DQe(g,r,o,h);c[m]=y,f-=h.cost,f+=y.cost;let E=m+1;if(E<c.length){let b=c[E];q$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let x=m-1;if(x>=0){let b=c[x];q$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return Vme([DQe("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)q$(p[m],r)&&q$(p[m-1],r)&&p.splice(m,1);return Vme(p)}};function L6t(t){return t?.text.match(/^\s*/)?.[0]??""}s(L6t,"getIndentation");function q$(t,e){return t?.text.trim()===e.trim()}s(q$,"isEllipsis");function Vme(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(Vme,"produceElidedText");function M6t(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(M6t,"initializeElisionContext");function F6t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(F6t,"sortPriorityQueue");function O6t(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=L6t(i);break}}return r}s(O6t,"getClosestIndentation");function DQe(t,e,r,n){let i=t+e;return new bM(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(DQe,"getNewEllipsis");d();d();function fg(){}s(fg,"Diff");fg.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function c(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(c,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,u=e.length,f=1,p=l+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=l)return c(NQe(a,g[0].lastComponent,r,e,a.useLongestToken));var E=-1/0,x=1/0;function b(){for(var k=Math.max(E,-f);k<=Math.min(x,f);k+=2){var P=void 0,N=g[k-1],M=g[k+1];N&&(g[k-1]=void 0);var J=!1;if(M){var pe=M.oldPos-k;J=M&&0<=pe&&pe<l}var Y=N&&N.oldPos+1<u;if(!J&&!Y){g[k]=void 0;continue}if(!Y||J&&N.oldPos<M.oldPos?P=a.addToPath(M,!0,!1,0,i):P=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(P,r,e,k,i),P.oldPos+1>=u&&y+1>=l)return c(NQe(a,P.lastComponent,r,e,a.useLongestToken));g[k]=P,P.oldPos+1>=u&&(x=Math.min(x,k-1)),y+1>=l&&(E=Math.max(E,k+1))}f++}if(s(b,"execEditLength"),o)s(function k(){setTimeout(function(){if(f>p||Date.now()>h)return o();b()||k()},0)},"exec")();else for(;f<=p&&Date.now()<=h;){var _=b();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,c=n.length,l=e.oldPos,u=l-i,f=0;u+1<a&&l+1<c&&this.equals(n[l+1],r[u+1],o);)u++,l++,f++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!o.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function NQe(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var c=0,l=o.length,u=0,f=0;c<l;c++){var p=o[c];if(p.removed)p.value=t.join(n.slice(f,f+p.count)),f+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[f+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(f+=p.count)}}return o}s(NQe,"buildValues");var TTn=new fg;function LQe(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(LQe,"longestCommonPrefix");function MQe(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(MQe,"longestCommonSuffix");function $me(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s($me,"replacePrefix");function zme(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(zme,"replaceSuffix");function IM(t,e){return $me(t,e,"")}s(IM,"removePrefix");function H$(t,e){return zme(t,e,"")}s(H$,"removeSuffix");function FQe(t,e){return e.slice(0,Q6t(t,e))}s(FQe,"maximumOverlap");function Q6t(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var c=r;c<t.length;c++){for(;o>0&&t[c]!=e[o];)o=i[o];t[c]==e[o]&&o++}return o}s(Q6t,"overlapCount");var W$="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",U6t=new RegExp("[".concat(W$,"]+|\\s+|[^").concat(W$,"]"),"ug"),G$=new fg;G$.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};G$.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(U6t)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};G$.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};G$.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&OQe(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&OQe(r,i,n,null),t};function OQe(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],c=r.value.match(/\s*$/)[0];if(t){var l=LQe(i,a);t.value=zme(t.value,a,l),e.value=IM(e.value,l),r.value=IM(r.value,l)}if(n){var u=MQe(o,c);n.value=$me(n.value,c,u),e.value=H$(e.value,u),r.value=H$(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var f=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=LQe(f,p);e.value=IM(e.value,h);var g=MQe(IM(f,h),m);e.value=H$(e.value,g),n.value=$me(n.value,f,g),t.value=zme(t.value,f,f.slice(0,f.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],E=e.value.match(/\s*$/)[0],x=FQe(E,y);e.value=H$(e.value,x)}else if(t){var b=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=FQe(b,_);e.value=IM(e.value,k)}}s(OQe,"dedupeWhitespaceInChangeObjects");var q6t=new fg;q6t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(W$,"]+|[^\\S\\n\\r]+|[^").concat(W$,"]"),"ug");return t.match(e)||[]};var Xme=new fg;Xme.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};Xme.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),fg.prototype.equals.call(this,t,e,r)};var H6t=new fg;H6t.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var W6t=new fg;W6t.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Yme(t){"@babel/helpers - typeof";return Yme=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yme(t)}s(Yme,"_typeof");var TM=new fg;TM.useLongestToken=!0;TM.tokenize=Xme.tokenize;TM.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(Kme(t,null,null,i),i,"  ")};TM.equals=function(t,e,r){return fg.prototype.equals.call(TM,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function Kme(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=Kme(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),Yme(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var c=[],l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&c.push(l);for(c.sort(),o=0;o<c.length;o+=1)l=c[o],a[l]=Kme(t[l],e,r,n,l);e.pop(),r.pop()}else a=t;return a}s(Kme,"canonicalize");var Jme=new fg;Jme.tokenize=function(t){return t.slice()};Jme.join=Jme.removeEmpty=function(t){return t};var QQe=require("fs");async function UQe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of f){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,E)=>y+E.node.extentRange.length,0);for(let y of m){if(c<=5)return u;hE(i);let E=y.node.extentRange.length/g,x=Math.min(c,E*l),b=(await j6t([y])).elide(x).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(UQe,"symbolRangesToCodeSnippets");async function j6t(t){if(t.length===0)return new Nt([]);let e=t[0].node.fileName,r=[],n="";try{let i=ls(e);i&&(n=(await QQe.promises.readFile(i)).toString())}catch{}for(let i of t)qQe(i,n).forEach(o=>r.push(o));return new Nt(r)}s(j6t,"sameFileSymbolRangeToElidableText");function qQe(t,e){let n=[],i=t.node,o=e.substring(Zme(e,i.commentRange.start),i.commentRange.end);n.push([ehe(o),1-3e-4]);let a=Zme(e,i.bodyRange.start),c=Zme(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(zS(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([ehe(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...qQe(u,e));else{let u=1-(zS(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([ehe(f),u])}return zS(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(qQe,"prepareForElidableText");function Zme(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(Zme,"shiftLeftToNearestLineEndingOrAlphanumeric");function ehe(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(ehe,"trimLineEndingsAndTrailingWhitespace");var the=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},uI=class extends the{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];hE(a);let l=await c.extractReferences(e,r);hE(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let f=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>zS(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),f.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let f=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(f.length+m.length>r.mlcpMaxContextItems){f.push(...m.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...m)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(hE(r),zS(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},j$=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new uI(e,r,!0,!0)),this.strategies.set("java",new uI(e,r,!0,!0)),this.strategies.set("python",new uI(e,r,!0,!1)),this.strategies.set("typescript",new uI(e,r,!0,!0)),this.strategies.set("typescriptreact",new uI(e,r,!0,!0)),this.strategies.set("javascript",new uI(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);hE(c);let u=ho();return UQe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var e2={Id:"id"},G0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Ji={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var V$=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new rhe(e2.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},wM=class t extends V${constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${G0.FilePath}');`]);this.fields=[new RM(G0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Df(G0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},_M=class t extends V${constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Ji.DocumentId}', '${Ji.ExtentStart}', '${Ji.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Ji.UnqualifiedName}');`],`FOREIGN KEY(${Ji.DocumentId}) REFERENCES Document(${e2.Id}) ON DELETE CASCADE`);this.fields=[new Df(Ji.DocumentId),new RM(Ji.FullyQualifiedName,{notNull:!0}),new RM(Ji.UnqualifiedName,{notNull:!0}),new Df(Ji.CommentStart,{notNull:!0}),new Df(Ji.CommentLength,{notNull:!0}),new Df(Ji.NameStart,{notNull:!0}),new Df(Ji.NameLength,{notNull:!0}),new Df(Ji.BodyStart,{notNull:!0}),new Df(Ji.BodyLength,{notNull:!0}),new Df(Ji.ExtentStart,{notNull:!0}),new Df(Ji.ExtentLength,{notNull:!0}),new Df(Ji.SymbolKind,{notNull:!0}),new Df(Ji.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},SM=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},RM=class extends SM{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},Df=class extends SM{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},rhe=class extends SM{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var $$=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?gm(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return gm(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${e2.Id} = ?`,[e])}},gE=class t extends $${static{s(this,"DocumentTable")}static{this.tableName=wM.tableName}createQueryGenerator(){return new wM}async updateTimestamp(e,r){let n=await this.init;n&&await gm(n,`UPDATE ${t.tableName} SET ${G0.LastWriteTimeUtc} = ? WHERE ${G0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await gm(r,`DELETE FROM ${t.tableName} WHERE ${G0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?gm(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${G0.FilePath} = ?`,[e]):[]}},Dc=class t extends $${static{s(this,"SymbolTable")}static{this.tableName=_M.tableName}createQueryGenerator(){return new _M}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return gm(r,`DELETE FROM ${t.tableName} WHERE ${Ji.DocumentId} = ?`,[e])}};async function gm(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(gm,"runPromisifiedDBQuery");var K$=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${gE.tableName} ON ${Dc.tableName}.${Ji.DocumentId} = ${gE.tableName}.${e2.Id}`;this.db=this.initDb(e),this.documentTable=new gE(this.db),this.symbolTable=new Dc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(ZQe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await gm(n,"pragma journal_mode=wal",[]),await gm(n,"pragma synchronous=normal",[]),await gm(n,"pragma optimize=0x10002",[]),await gm(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Ji.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${gE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} <= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${gE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} >= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) <= ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${gE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.FullyQualifiedName} LIKE ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,gm(n,e,r)):[]}};var J$=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new K$(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return o3(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),hE(n)}return o3(i)}async getDefinitionsAsync(e){return o3(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return o3(n)}async findSymbolsContainedByRangeAsync(e,r,n){return o3(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return o3(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function o3(t){return t.map(e=>new hm(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new bs(e.commentStart,e.commentLength),new bs(e.nameStart,e.nameLength),new bs(e.bodyStart,e.bodyLength),new bs(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(o3,"symbolsToSymbolRanges");var Z$=Ne(require("fs/promises"));var X$=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new J$(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=ls(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await Z$.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await Z$.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);f=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function che(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>X6t(r))}s(che,"isIndexWorkerData");var PM=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},dI=class extends PM{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},ez=class extends PM{constructor(r){super(Yu.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},Yu={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},tz=class extends dI{constructor(r,n,i){super(r,Yu.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},rz=class extends dI{constructor(r,n){super(r,Yu.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},nz=class extends dI{constructor(r,n,i){super(r,Yu.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},iz=class extends dI{constructor(r,n){super(r,Yu.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},oz=class extends dI{constructor(r,n,i,o,a,c){super(r,Yu.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},sz=class extends dI{static{s(this,"ExitRequest")}constructor(e){super(e,Yu.Exit)}},pg=class extends PM{constructor(r,n,i){super(Yu.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function X6t(t){return"databaseFilePath"in t&&"rootPath"in t}s(X6t,"isIndexableWorkspaceFolder");var eUe=Ne(di()),fI=require("worker_threads");var az=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new X$(e,F$,TQe,r),this.contextRetreival=new j$(this.index.reader,IQe)}},lhe=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=La(i.rootPath);this.indices.set(o,new az(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new eUe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case Yu.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case Yu.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case Yu.Cancel:n.get(e.id)?.cancel(),o=new pg(e.id,void 0,void 0);break;case Yu.Exit:o=await this.dispatchExit(e,r,i.token);break;case Yu.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case Yu.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case Yu.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new pg(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=La(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new pg(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new pg(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new pg(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new pg(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new az(e.databaseFilePath)),new pg(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new pg(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function tUe(){return che(fI.workerData)}s(tUe,"isIndexWorker");function rUe(){let t=fI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!che(fI.workerData))throw new Error("Worker data must provide a valid database path.");let e=fI.workerData.cwd;process.cwd=()=>e,new lhe(t,fI.workerData.indexWorkspaceRoots,fI.workerData.params)}s(rUe,"runIndexWorker");d();var BM=Ne(require("util"));function nUe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(sy(t)==="dev")return t.get(Tc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",BM.format(...i)))},e.dir=(n,i)=>r(4,BM.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(BM.format(...n));i.name="Trace",e.log(i)},e}s(nUe,"createConsole");var Lv=Ne(require("fs/promises")),Tmt=Ne(require("os")),KQ=Ne(require("path")),ph=Ne(hg()),wmt=require("worker_threads");d();d();var jz=require("assert");d();d();var dLt={right:gLt,center:ALt},fLt=0,Oz=1,pLt=2,Qz=3,Lhe=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&j0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),j0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=j0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>j0.stringWidth(a)&&(f+=" ".repeat(u-j0.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=dLt[e[c].align];f=m(f,u),j0.stringWidth(f)<u&&(f+=" ".repeat((l||0)-j0.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[Qz]&&(o+=" ".repeat(p[Qz])),o+=JUe(e[c],f,"| "),o+=f,o+=JUe(e[c],f," |"),p[Oz]&&(o+=" ".repeat(p[Oz])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=j0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=j0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[fLt]||0).fill("")),i.push(...new Array(o.padding[pLt]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[Qz]||0)+(e.padding[Oz]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||j0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,mLt(e[c])):a)}};function JUe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(JUe,"addBorder");function mLt(t){let e=t.padding||[],r=1+(e[Qz]||0)+(e[Oz]||0);return t.border?r+4:r}s(mLt,"_minWidth");function hLt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(hLt,"getWindowWidth");function gLt(t,e){t=t.trim();let r=j0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(gLt,"alignRight");function ALt(t,e){t=t.trim();let r=j0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(ALt,"alignCenter");var j0;function XUe(t,e){return j0=e,new Lhe({width:t?.width||hLt(),wrap:t?.wrap})}s(XUe,"cliui");d();var ZUe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Mhe(t){return t.replace(ZUe,"")}s(Mhe,"stripAnsi");function eqe(t,e){let[r,n]=t.match(ZUe)||["",""];t=Mhe(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(eqe,"wrap");function Fhe(t){return XUe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:Mhe,wrap:eqe})}s(Fhe,"ui");d();var l3=require("path"),Uz=require("fs");function Ohe(t,e){let r=(0,l3.resolve)(".",t),n;for((0,Uz.statSync)(r).isDirectory()||(r=(0,l3.dirname)(r));;){if(n=e(r,(0,Uz.readdirSync)(r)),n)return(0,l3.resolve)(r,n);if(r=(0,l3.dirname)(n=r),n===r)break}}s(Ohe,"default");var gqe=require("util"),Aqe=require("fs"),yqe=require("url");d();var oqe=require("util"),Gz=require("path");d();function i2(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(i2,"camelCase");function qz(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(qz,"decamelize");function Hz(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(Hz,"looksLikeNumber");d();d();function tqe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(tqe,"tokenizeArgString");d();var xm;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(xm||(xm={}));var AE,Wz=class{static{s(this,"YargsParser")}constructor(e){AE=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=tqe(e),o=typeof e=="string",a=yLt(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||AE.format,E={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},x=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(ee){let oe=typeof ee=="object"?ee.key:ee,We=Object.keys(ee).map(function(De){return{boolean:"bools",string:"strings",number:"numbers"}[De]}).filter(Boolean).pop();We&&(E[We][oe]=!0),E.arrays[oe]=!0,E.keys.push(oe)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(ee){E.bools[ee]=!0,E.keys.push(ee)}),[].concat(n.string||[]).filter(Boolean).forEach(function(ee){E.strings[ee]=!0,E.keys.push(ee)}),[].concat(n.number||[]).filter(Boolean).forEach(function(ee){E.numbers[ee]=!0,E.keys.push(ee)}),[].concat(n.count||[]).filter(Boolean).forEach(function(ee){E.counts[ee]=!0,E.keys.push(ee)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(ee){E.normalize[ee]=!0,E.keys.push(ee)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([ee,oe])=>{typeof oe=="number"&&(E.nargs[ee]=oe,E.keys.push(ee))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([ee,oe])=>{typeof oe=="function"&&(E.coercions[ee]=oe,E.keys.push(ee))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(ee){E.configs[ee]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([ee,oe])=>{(typeof oe=="boolean"||typeof oe=="function")&&(E.configs[ee]=oe)})),Qe(n.key,a,n.default,E.arrays),Object.keys(l).forEach(function(ee){(E.aliases[ee]||[]).forEach(function(oe){l[oe]=l[ee]})});let _=null;nt();let k=[],P=Object.assign(Object.create(null),{_:[]}),N={};for(let ee=0;ee<i.length;ee++){let oe=i[ee],We=oe.replace(/^-{3,}/,"---"),De,xe,Ye,st,yt,qt;if(oe!=="--"&&/^-/.test(oe)&&St(oe))M(oe);else if(We.match(/^---+(=|$)/)){M(oe);continue}else if(oe.match(/^--.+=/)||!c["short-option-groups"]&&oe.match(/^-.+=/))st=oe.match(/^--?([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&(ke(st[1],E.arrays)?ee=pe(ee,st[1],i,st[2]):ke(st[1],E.nargs)!==!1?ee=J(ee,st[1],i,st[2]):Y(st[1],st[2],!0));else if(oe.match(b)&&c["boolean-negation"])st=oe.match(b),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],Y(xe,ke(xe,E.arrays)?[!1]:!1));else if(oe.match(/^--.+/)||!c["short-option-groups"]&&oe.match(/^-[^-]+/))st=oe.match(/^--?(.+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],ke(xe,E.arrays)?ee=pe(ee,xe,i):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i):(yt=i[ee+1],yt!==void 0&&(!yt.match(/^-/)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(Y(xe,yt),ee++):Y(xe,Tt(xe))));else if(oe.match(/^-.\..+=/))st=oe.match(/^-([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&Y(st[1],st[2]);else if(oe.match(/^-.\..+/)&&!oe.match(x))yt=i[ee+1],st=oe.match(/^-(.\..+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],yt!==void 0&&!yt.match(/^-/)&&!ke(xe,E.bools)&&!ke(xe,E.counts)?(Y(xe,yt),ee++):Y(xe,Tt(xe)));else if(oe.match(/^-[^-]+/)&&!oe.match(x)){Ye=oe.slice(1,-1).split(""),De=!1;for(let dr=0;dr<Ye.length;dr++){if(yt=oe.slice(dr+2),Ye[dr+1]&&Ye[dr+1]==="="){qt=oe.slice(dr+3),xe=Ye[dr],ke(xe,E.arrays)?ee=pe(ee,xe,i,qt):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i,qt):Y(xe,qt),De=!0;break}if(yt==="-"){Y(Ye[dr],yt);continue}if(/[A-Za-z]/.test(Ye[dr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(yt)&&ke(yt,E.bools)===!1){Y(Ye[dr],yt),De=!0;break}if(Ye[dr+1]&&Ye[dr+1].match(/\W/)){Y(Ye[dr],yt),De=!0;break}else Y(Ye[dr],Tt(Ye[dr]))}xe=oe.slice(-1)[0],!De&&xe!=="-"&&(ke(xe,E.arrays)?ee=pe(ee,xe,i):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i):(yt=i[ee+1],yt!==void 0&&(!/^(-|--)[^-]/.test(yt)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(Y(xe,yt),ee++):Y(xe,Tt(xe))))}else if(oe.match(/^-[0-9]$/)&&oe.match(x)&&ke(oe.slice(1),E.bools))xe=oe.slice(1),Y(xe,Tt(xe));else if(oe==="--"){k=i.slice(ee+1);break}else if(c["halt-at-non-option"]){k=i.slice(ee);break}else M(oe)}z(P,!0),z(P,!1),ie(P),Q(),ne(P,E.aliases,l,!0),re(P),c["set-placeholder-key"]&&fe(P),Object.keys(E.counts).forEach(function(ee){me(P,ee.split("."))||Y(ee,0)}),p&&k.length&&(P[m]=[]),k.forEach(function(ee){P[m].push(ee)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(P).filter(ee=>ee!=="--"&&ee.includes("-")).forEach(ee=>{delete P[ee]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(ee=>a[ee])).forEach(ee=>{c["camel-case-expansion"]&&ee.includes("-")&&delete P[ee.split(".").map(oe=>i2(oe)).join(".")],delete P[ee]});function M(ee){let oe=ce("_",ee);(typeof oe=="string"||typeof oe=="number")&&P._.push(oe)}s(M,"pushPositional");function J(ee,oe,We,De){let xe,Ye=ke(oe,E.nargs);if(Ye=typeof Ye!="number"||isNaN(Ye)?1:Ye,Ye===0)return ye(De)||(_=Error(y("Argument unexpected for: %s",oe))),Y(oe,Tt(oe)),ee;let st=ye(De)?0:1;if(c["nargs-eats-options"])We.length-(ee+1)+st<Ye&&(_=Error(y("Not enough arguments following: %s",oe))),st=Ye;else{for(xe=ee+1;xe<We.length&&(!We[xe].match(/^-[^0-9]/)||We[xe].match(x)||St(We[xe]));xe++)st++;st<Ye&&(_=Error(y("Not enough arguments following: %s",oe)))}let yt=Math.min(st,Ye);for(!ye(De)&&yt>0&&(Y(oe,De),yt--),xe=ee+1;xe<yt+ee+1;xe++)Y(oe,We[xe]);return ee+yt}s(J,"eatNargs");function pe(ee,oe,We,De){let xe=[],Ye=De||We[ee+1],st=ke(oe,E.nargs);if(ke(oe,E.bools)&&!/^(true|false)$/.test(Ye))xe.push(!0);else if(ye(Ye)||ye(De)&&/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)){if(l[oe]!==void 0){let yt=l[oe];xe=Array.isArray(yt)?yt:[yt]}}else{ye(De)||xe.push(H(oe,De,!0));for(let yt=ee+1;yt<We.length&&!(!c["greedy-arrays"]&&xe.length>0||st&&typeof st=="number"&&xe.length>=st||(Ye=We[yt],/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)));yt++)ee=yt,xe.push(H(oe,Ye,o))}return typeof st=="number"&&(st&&xe.length<st||isNaN(st)&&xe.length===0)&&(_=Error(y("Not enough arguments following: %s",oe))),Y(oe,xe),ee}s(pe,"eatArray");function Y(ee,oe,We=o){if(/-/.test(ee)&&c["camel-case-expansion"]){let Ye=ee.split(".").map(function(st){return i2(st)}).join(".");G(ee,Ye)}let De=H(ee,oe,We),xe=ee.split(".");he(P,xe,De),E.aliases[ee]&&E.aliases[ee].forEach(function(Ye){let st=Ye.split(".");he(P,st,De)}),xe.length>1&&c["dot-notation"]&&(E.aliases[xe[0]]||[]).forEach(function(Ye){let st=Ye.split("."),yt=[].concat(xe);yt.shift(),st=st.concat(yt),(E.aliases[ee]||[]).includes(st.join("."))||he(P,st,De)}),ke(ee,E.normalize)&&!ke(ee,E.arrays)&&[ee].concat(E.aliases[ee]||[]).forEach(function(st){Object.defineProperty(N,st,{enumerable:!0,get(){return oe},set(yt){oe=typeof yt=="string"?AE.normalize(yt):yt}})})}s(Y,"setArg");function G(ee,oe){E.aliases[ee]&&E.aliases[ee].length||(E.aliases[ee]=[oe],h[oe]=!0),E.aliases[oe]&&E.aliases[oe].length||G(oe,ee)}s(G,"addNewAlias");function H(ee,oe,We){We&&(oe=CLt(oe)),(ke(ee,E.bools)||ke(ee,E.counts))&&typeof oe=="string"&&(oe=oe==="true");let De=Array.isArray(oe)?oe.map(function(xe){return ce(ee,xe)}):ce(ee,oe);return ke(ee,E.counts)&&(ye(De)||typeof De=="boolean")&&(De=Qhe()),ke(ee,E.normalize)&&ke(ee,E.arrays)&&(Array.isArray(oe)?De=oe.map(xe=>AE.normalize(xe)):De=AE.normalize(oe)),De}s(H,"processValue");function ce(ee,oe){return!c["parse-positional-numbers"]&&ee==="_"||!ke(ee,E.strings)&&!ke(ee,E.bools)&&!Array.isArray(oe)&&(Hz(oe)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${oe}`)))||!ye(oe)&&ke(ee,E.numbers))&&(oe=Number(oe)),oe}s(ce,"maybeCoerceNumber");function ie(ee){let oe=Object.create(null);ne(oe,E.aliases,l),Object.keys(E.configs).forEach(function(We){let De=ee[We]||oe[We];if(De)try{let xe=null,Ye=AE.resolve(AE.cwd(),De),st=E.configs[We];if(typeof st=="function"){try{xe=st(Ye)}catch(yt){xe=yt}if(xe instanceof Error){_=xe;return}}else xe=AE.require(Ye);V(xe)}catch(xe){xe.name==="PermissionDenied"?_=xe:ee[We]&&(_=Error(y("Invalid JSON config file: %s",De)))}})}s(ie,"setConfig");function V(ee,oe){Object.keys(ee).forEach(function(We){let De=ee[We],xe=oe?oe+"."+We:We;typeof De=="object"&&De!==null&&!Array.isArray(De)&&c["dot-notation"]?V(De,xe):(!me(P,xe.split("."))||ke(xe,E.arrays)&&c["combine-arrays"])&&Y(xe,De)})}s(V,"setConfigObject");function Q(){typeof u<"u"&&u.forEach(function(ee){V(ee)})}s(Q,"setConfigObjects");function z(ee,oe){if(typeof f>"u")return;let We=typeof f=="string"?f:"",De=AE.env();Object.keys(De).forEach(function(xe){if(We===""||xe.lastIndexOf(We,0)===0){let Ye=xe.split("__").map(function(st,yt){return yt===0&&(st=st.substring(We.length)),i2(st)});(oe&&E.configs[Ye.join(".")]||!oe)&&!me(ee,Ye)&&Y(Ye.join("."),De[xe])}})}s(z,"applyEnvVars");function re(ee){let oe,We=new Set;Object.keys(ee).forEach(function(De){if(!We.has(De)&&(oe=ke(De,E.coercions),typeof oe=="function"))try{let xe=ce(De,oe(ee[De]));[].concat(E.aliases[De]||[],De).forEach(Ye=>{We.add(Ye),ee[Ye]=xe})}catch(xe){_=xe}})}s(re,"applyCoercions");function fe(ee){return E.keys.forEach(oe=>{~oe.indexOf(".")||typeof ee[oe]>"u"&&(ee[oe]=void 0)}),ee}s(fe,"setPlaceholderKeys");function ne(ee,oe,We,De=!1){Object.keys(We).forEach(function(xe){me(ee,xe.split("."))||(he(ee,xe.split("."),We[xe]),De&&(g[xe]=!0),(oe[xe]||[]).forEach(function(Ye){me(ee,Ye.split("."))||he(ee,Ye.split("."),We[xe])}))})}s(ne,"applyDefaultsAndAliases");function me(ee,oe){let We=ee;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(xe){We=We[xe]||{}});let De=oe[oe.length-1];return typeof We!="object"?!1:De in We}s(me,"hasKey");function he(ee,oe,We){let De=ee;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(qt){qt=rqe(qt),typeof De=="object"&&De[qt]===void 0&&(De[qt]={}),typeof De[qt]!="object"||Array.isArray(De[qt])?(Array.isArray(De[qt])?De[qt].push({}):De[qt]=[De[qt],{}],De=De[qt][De[qt].length-1]):De=De[qt]});let xe=rqe(oe[oe.length-1]),Ye=ke(oe.join("."),E.arrays),st=Array.isArray(We),yt=c["duplicate-arguments-array"];!yt&&ke(xe,E.nargs)&&(yt=!0,(!ye(De[xe])&&E.nargs[xe]===1||Array.isArray(De[xe])&&De[xe].length===E.nargs[xe])&&(De[xe]=void 0)),We===Qhe()?De[xe]=Qhe(De[xe]):Array.isArray(De[xe])?yt&&Ye&&st?De[xe]=c["flatten-duplicate-arrays"]?De[xe].concat(We):(Array.isArray(De[xe][0])?De[xe]:[De[xe]]).concat([We]):!yt&&!!Ye==!!st?De[xe]=We:De[xe]=De[xe].concat([We]):De[xe]===void 0&&Ye?De[xe]=st?We:[We]:yt&&!(De[xe]===void 0||ke(xe,E.counts)||ke(xe,E.bools))?De[xe]=[De[xe],We]:De[xe]=We}s(he,"setKey");function Qe(...ee){ee.forEach(function(oe){Object.keys(oe||{}).forEach(function(We){E.aliases[We]||(E.aliases[We]=[].concat(a[We]||[]),E.aliases[We].concat(We).forEach(function(De){if(/-/.test(De)&&c["camel-case-expansion"]){let xe=i2(De);xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].concat(We).forEach(function(De){if(De.length>1&&/[A-Z]/.test(De)&&c["camel-case-expansion"]){let xe=qz(De,"-");xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].forEach(function(De){E.aliases[De]=[We].concat(E.aliases[We].filter(function(xe){return De!==xe}))}))})})}s(Qe,"extendAliases");function ke(ee,oe){let We=[].concat(E.aliases[ee]||[],ee),De=Object.keys(oe),xe=We.find(Ye=>De.includes(Ye));return xe?oe[xe]:!1}s(ke,"checkAllAliases");function tt(ee){let oe=Object.keys(E);return[].concat(oe.map(De=>E[De])).some(function(De){return Array.isArray(De)?De.includes(ee):De[ee]})}s(tt,"hasAnyFlag");function Fe(ee,...oe){return[].concat(...oe).some(function(De){let xe=ee.match(De);return xe&&tt(xe[1])})}s(Fe,"hasFlagsMatching");function ht(ee){if(ee.match(x)||!ee.match(/^-[^-]+/))return!1;let oe=!0,We,De=ee.slice(1).split("");for(let xe=0;xe<De.length;xe++){if(We=ee.slice(xe+2),!tt(De[xe])){oe=!1;break}if(De[xe+1]&&De[xe+1]==="="||We==="-"||/[A-Za-z]/.test(De[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||De[xe+1]&&De[xe+1].match(/\W/))break}return oe}s(ht,"hasAllShortFlags");function St(ee){return c["unknown-options-as-args"]&&xt(ee)}s(St,"isUnknownOptionAsArg");function xt(ee){return ee=ee.replace(/^-{3,}/,"--"),ee.match(x)||ht(ee)?!1:!Fe(ee,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(xt,"isUnknownOption");function Tt(ee){return!ke(ee,E.bools)&&!ke(ee,E.counts)&&`${ee}`in l?l[ee]:le(Ue(ee))}s(Tt,"defaultValue");function le(ee){return{[xm.BOOLEAN]:!0,[xm.STRING]:"",[xm.NUMBER]:void 0,[xm.ARRAY]:[]}[ee]}s(le,"defaultForType");function Ue(ee){let oe=xm.BOOLEAN;return ke(ee,E.strings)?oe=xm.STRING:ke(ee,E.numbers)?oe=xm.NUMBER:ke(ee,E.bools)?oe=xm.BOOLEAN:ke(ee,E.arrays)&&(oe=xm.ARRAY),oe}s(Ue,"guessType");function ye(ee){return ee===void 0}s(ye,"isUndefined");function nt(){Object.keys(E.counts).find(ee=>ke(ee,E.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",ee)),!0):ke(ee,E.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",ee)),!0):!1)}return s(nt,"checkConfiguration"),{aliases:Object.assign({},E.aliases),argv:Object.assign(N,P),configuration:c,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function yLt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(yLt,"combineAliases");function Qhe(t){return t!==void 0?t+1:1}s(Qhe,"increment");function rqe(t){return t==="__proto__"?"___proto___":t}s(rqe,"sanitizeKey");function CLt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(CLt,"stripQuotes");var sqe=require("fs");var Uhe,qhe,Hhe,nqe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,iqe=(qhe=(Uhe=process==null?void 0:process.versions)===null||Uhe===void 0?void 0:Uhe.node)!==null&&qhe!==void 0?qhe:(Hhe=process==null?void 0:process.version)===null||Hhe===void 0?void 0:Hhe.slice(1);if(iqe&&Number(iqe.match(/^([^.]+)/)[1])<nqe)throw Error(`yargs parser supports a minimum Node.js version of ${nqe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var ELt=process?process.env:{},aqe=new Wz({cwd:process.cwd,env:s(()=>ELt,"env"),format:oqe.format,normalize:Gz.normalize,resolve:Gz.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,sqe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),QM=s(function(e,r){return aqe.parse(e.slice(),r).argv},"Parser");QM.detailed=function(t,e){return aqe.parse(t.slice(),e)};QM.camelCase=i2;QM.decamelize=qz;QM.looksLikeNumber=Hz;var cqe=QM;var Ag=require("path");d();function vLt(){return xLt()?0:1}s(vLt,"getProcessArgvBinIndex");function xLt(){return bLt()&&!process.defaultApp}s(xLt,"isBundledElectronApp");function bLt(){return!!process.versions.electron}s(bLt,"isElectronApp");function lqe(){return process.argv[vLt()]}s(lqe,"getProcessArgvBin");d();var Hs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var u3=require("fs"),uqe=require("util"),dqe=require("path");var fqe={fs:{readFileSync:u3.readFileSync,writeFile:u3.writeFile},format:uqe.format,resolve:dqe.resolve,exists:s(t=>{try{return(0,u3.statSync)(t).isFile()}catch{return!1}},"exists")};d();var gg,Whe=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),gg.format.apply(gg.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),gg.format.apply(gg.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);gg.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{gg.fs.readFileSync&&(e=JSON.parse(gg.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=gg.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=gg.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return gg.exists(e)}};function pqe(t,e){gg=e;let r=new Whe(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(pqe,"y18n");var ILt=s(t=>pqe(t,fqe),"y18n"),mqe=ILt;var TLt="require is not supported by ESM",hqe="loading a directory of commands is not supported yet for ESM",UM;try{UM=(0,yqe.fileURLToPath)(importMetaUrlShim)}catch{UM=process.cwd()}var wLt=UM.substring(0,UM.lastIndexOf("node_modules")),Cqe={assert:{notStrictEqual:jz.notStrictEqual,strictEqual:jz.strictEqual},cliui:Fhe,findUp:Ohe,getEnv:s(t=>process.env[t],"getEnv"),inspect:gqe.inspect,getCallerFile:s(()=>{throw new Hs(hqe)},"getCallerFile"),getProcessArgvBin:lqe,mainFilename:wLt||process.cwd(),Parser:cqe,path:{basename:Ag.basename,dirname:Ag.dirname,extname:Ag.extname,relative:Ag.relative,resolve:Ag.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:Aqe.readFileSync,require:s(()=>{throw new Hs(TLt)},"require"),requireDirectory:s(()=>{throw new Hs(hqe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:mqe({directory:(0,Ag.resolve)(UM,"../../../locales"),updateFiles:!1})};d();d();d();function Md(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Md,"assertNotStrictEqual");function Ghe(t,e){e.assert.strictEqual(typeof t,"string")}s(Ghe,"assertSingleKey");function d3(t){return Object.keys(t)}s(d3,"objectKeys");d();function Ws(t){return!!t&&!!t.then&&typeof t.then=="function"}s(Ws,"isPromise");d();d();d();function gI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(gI,"parseCommand");var _Lt=["first","second","third","fourth","fifth","sixth"];function br(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[gI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Hs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new Hs(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=Eqe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&vqe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=Eqe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&vqe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(br,"argsert");function Eqe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(Eqe,"guessType");function vqe(t,e,r){throw new Hs(`Invalid ${_Lt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(vqe,"argumentTypeError");var Vz=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(br("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function xqe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(xqe,"commandMiddlewareFactory");function o2(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(Ws(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return Ws(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(o2,"applyMiddleware");d();function s2(t,e,r=n=>{throw n}){try{let n=SLt(t)?t():t;return Ws(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(s2,"maybeAsyncResult");function SLt(t){return typeof t=="function"}s(SLt,"isFunction");d();function jhe(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(jhe,"whichModule");var f3=/(^\*)|(^\$0)/,Vhe=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=xqe(o);if(i=i||(()=>{}),Array.isArray(e))if(RLt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(PLt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(bqe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=gI(e);c=c.map(m=>gI(m).cmd);let f=!1,p=[u.cmd].concat(c).filter(m=>f3.test(m)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(f3,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return Ws(p)?p.then(m=>this.applyMiddlewareAndGetResult(f,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if($z(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(Ws(p))return p.then(m=>(f=Tqe(m)?m:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else kLt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return Ws(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=f3.test(r.original)?r.original.replace(f3,"").trim():r.original,i=e.filter(o=>!f3.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=s2(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=o2(n,a,c,!1),n=s2(n,f=>{let p=r.handler(f);return Ws(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Ws(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=o2(n,c,u,!0);return Ws(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=gI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=f3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if($z(r))return r(e,!0);bqe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=jhe(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Md(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Md(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Iqe(t,e,r,n){return new Vhe(t,e,r,n)}s(Iqe,"command");function bqe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(bqe,"isCommandBuilderDefinition");function RLt(t){return t.every(e=>typeof e=="string")}s(RLt,"isCommandAndAliases");function $z(t){return typeof t=="function"}s($z,"isCommandBuilderCallback");function kLt(t){return typeof t=="object"}s(kLt,"isCommandBuilderOptionDefinitions");function PLt(t){return typeof t=="object"&&!Array.isArray(t)}s(PLt,"isCommandHandlerDefinition");d();d();function AI(t={},e=()=>!0){let r={};return d3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(AI,"objFilter");d();function yI(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(yI,"setBlocking");function BLt(t){return typeof t=="boolean"}s(BLt,"isBoolean");function _qe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(H){i.push(H)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(H=!0,ce){let[ie,V]=typeof H=="string"?[!0,H]:[H,ce];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,c=ie,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(H,ce){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let Q=i[V];if(BLt(Q)){if(ce)throw ce;if(H)throw Error(H)}else Q(H,ce,n)}else{if(t.getExitProcess()&&yI(!0),!l){l=!0,c&&(t.showHelp("error"),ie.error()),(H||ce)&&ie.error(H||ce);let V=o||a;V&&((H||ce)&&ie.error(""),ie.error(V))}if(ce=ce||new Hs(H),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ce);throw ce}},"fail");let u=[],f=!1;n.usage=(G,H)=>G===null?(f=!0,u=[],n):(f=!1,u.push([G,H||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(G,H)=>{p.push([G,H||""])};let m=[];n.command=s(function(H,ce,ie,V,Q=!1){ie&&(m=m.map(z=>(z[2]=!1,z))),m.push([H,ce||"",ie,V,Q])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(H,ce){Array.isArray(H)?H.forEach(ie=>{n.describe(ie,ce)}):typeof H=="object"?Object.keys(H).forEach(ie=>{n.describe(ie,H[ie])}):h[H]=ce},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=G=>{g.push(G)};let y=!1,E;n.wrap=G=>{y=!0,E=G},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(E=J(),y=!0),E);let x="__yargsString__:";n.deferY18nLookup=G=>x+G,n.help=s(function(){if(k)return k;_();let H=t.customScriptName?t.$0:e.path.basename(t.$0),ce=t.getDemandedOptions(),ie=t.getDemandedCommands(),V=t.getDeprecatedOptions(),Q=t.getGroups(),z=t.getOptions(),re=[];re=re.concat(Object.keys(h)),re=re.concat(Object.keys(ce)),re=re.concat(Object.keys(ie)),re=re.concat(Object.keys(z.default)),re=re.filter(N),re=Object.keys(re.reduce((Fe,ht)=>(ht!=="_"&&(Fe[ht]=!0),Fe),{}));let fe=n.getWrap(),ne=e.cliui({width:fe,wrap:!!fe});if(!f){if(u.length)u.forEach(Fe=>{ne.div({text:`${Fe[0].replace(/\$0/g,H)}`}),Fe[1]&&ne.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),ne.div();else if(m.length){let Fe=null;ie._?Fe=`${H} <${r("command")}>
`:Fe=`${H} [${r("command")}]
`,ne.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){ne.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),ht=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((xt,Tt)=>xt[0].localeCompare(Tt[0])));let St=H?`${H} `:"";m.forEach(xt=>{let Tt=`${St}${ht}${xt[0].replace(/^\$0 ?/,"")}`;ne.span({text:Tt,padding:[0,2,0,2],width:b(m,fe,`${H}${ht}`)+4},{text:xt[1]});let le=[];xt[2]&&le.push(`[${r("default")}]`),xt[3]&&xt[3].length&&le.push(`[${r("aliases:")} ${xt[3].join(", ")}]`),xt[4]&&(typeof xt[4]=="string"?le.push(`[${r("deprecated: %s",xt[4])}]`):le.push(`[${r("deprecated")}]`)),le.length?ne.div({text:le.join(" "),padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}let me=(Object.keys(z.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);re=re.filter(Fe=>!t.parsed.newAliases[Fe]&&me.every(ht=>(z.alias[ht]||[]).indexOf(Fe)===-1));let he=r("Options:");Q[he]||(Q[he]=[]),P(re,z.alias,Q,he);let Qe=s(Fe=>/^--/.test(zz(Fe)),"isLongSwitch"),ke=Object.keys(Q).filter(Fe=>Q[Fe].length>0).map(Fe=>{let ht=Q[Fe].filter(N).map(St=>{if(me.includes(St))return St;for(let xt=0,Tt;(Tt=me[xt])!==void 0;xt++)if((z.alias[Tt]||[]).includes(St))return Tt;return St});return{groupName:Fe,normalizedKeys:ht}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ht})=>{let St=ht.reduce((xt,Tt)=>(xt[Tt]=[Tt].concat(z.alias[Tt]||[]).map(le=>Fe===n.getPositionalGroupName()?le:(/^[0-9]$/.test(le)?z.boolean.includes(Tt)?"-":"--":le.length>1?"--":"-")+le).sort((le,Ue)=>Qe(le)===Qe(Ue)?0:Qe(le)?1:-1).join(", "),xt),{});return{groupName:Fe,normalizedKeys:ht,switches:St}});if(ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ht})=>!Fe.every(St=>Qe(ht[St])))&&ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ht})=>{Fe.forEach(St=>{Qe(ht[St])&&(ht[St]=DLt(ht[St],4))})}),ke.forEach(({groupName:Fe,normalizedKeys:ht,switches:St})=>{ne.div(Fe),ht.forEach(xt=>{let Tt=St[xt],le=h[xt]||"",Ue=null;le.includes(x)&&(le=r(le.substring(x.length))),z.boolean.includes(xt)&&(Ue=`[${r("boolean")}]`),z.count.includes(xt)&&(Ue=`[${r("count")}]`),z.string.includes(xt)&&(Ue=`[${r("string")}]`),z.normalize.includes(xt)&&(Ue=`[${r("string")}]`),z.array.includes(xt)&&(Ue=`[${r("array")}]`),z.number.includes(xt)&&(Ue=`[${r("number")}]`);let ye=s(oe=>typeof oe=="string"?`[${r("deprecated: %s",oe)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),nt=[xt in V?ye(V[xt]):null,Ue,xt in ce?`[${r("required")}]`:null,z.choices&&z.choices[xt]?`[${r("choices:")} ${n.stringifiedValues(z.choices[xt])}]`:null,M(z.default[xt],z.defaultDescription[xt])].filter(Boolean).join(" ");ne.span({text:zz(Tt),padding:[0,2,0,2+wqe(Tt)],width:b(St,fe)+4},le);let ee=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;nt&&!ee?ne.div({text:nt,padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}),p.length&&(ne.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,H)}),p.forEach(Fe=>{Fe[1]===""?ne.div({text:Fe[0],padding:[0,2,0,2]}):ne.div({text:Fe[0],padding:[0,2,0,2],width:b(p,fe)+4},{text:Fe[1]})}),ne.div()),g.length>0){let Fe=g.map(ht=>ht.replace(/\$0/g,H)).join(`
`);ne.div(`${Fe}
`)}return ne.toString().replace(/\s*$/,"")},"help");function b(G,H,ce){let ie=0;return Array.isArray(G)||(G=Object.values(G).map(V=>[V])),G.forEach(V=>{ie=Math.max(e.stringWidth(ce?`${ce} ${zz(V[0])}`:zz(V[0]))+wqe(V[0]),ie)}),H&&(ie=Math.min(ie,parseInt((H*.5).toString(),10))),ie}s(b,"maxWidth");function _(){let G=t.getDemandedOptions(),H=t.getOptions();(Object.keys(H.alias)||[]).forEach(ce=>{H.alias[ce].forEach(ie=>{h[ie]&&n.describe(ce,h[ie]),ie in G&&t.demandOption(ce,G[ie]),H.boolean.includes(ie)&&t.boolean(ce),H.count.includes(ie)&&t.count(ce),H.string.includes(ie)&&t.string(ce),H.normalize.includes(ie)&&t.normalize(ce),H.array.includes(ie)&&t.array(ce),H.number.includes(ie)&&t.number(ce)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function P(G,H,ce,ie){let V=[],Q=null;return Object.keys(ce).forEach(z=>{V=V.concat(ce[z])}),G.forEach(z=>{Q=[z].concat(H[z]),Q.some(re=>V.indexOf(re)!==-1)||ce[ie].push(z)}),V}s(P,"addUngroupedKeys");function N(G){return t.getOptions().hiddenOptions.indexOf(G)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=G=>{let H=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:H[G])(n.help())},n.functionDescription=G=>["(",G.name?e.Parser.decamelize(G.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(H,ce){let ie="",V=ce||", ",Q=[].concat(H);return!H||!Q.length||Q.forEach(z=>{ie.length&&(ie+=V),ie+=JSON.stringify(z)}),ie},"stringifiedValues");function M(G,H){let ce=`[${r("default:")} `;if(G===void 0&&!H)return null;if(H)ce+=H;else switch(typeof G){case"string":ce+=`"${G}"`;break;case"object":ce+=JSON.stringify(G);break;default:ce+=G}return`${ce}]`}s(M,"defaultString");function J(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(J,"windowWidth");let pe=null;n.version=G=>{pe=G},n.showVersion=G=>{let H=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:H[G])(pe)},n.reset=s(function(H){return o=null,l=!1,u=[],f=!1,g=[],p=[],m=[],h=AI(h,ce=>!H[ce]),n},"reset");let Y=[];return n.freeze=s(function(){Y.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(H=!1){let ce=Y.pop();ce&&(H?(h={...ce.descriptions,...h},m=[...ce.commands,...m],u=[...ce.usages,...u],p=[...ce.examples,...p],g=[...ce.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h}=ce)},"unfreeze"),n}s(_qe,"usage");function $he(t){return typeof t=="object"}s($he,"isIndentedText");function DLt(t,e){return $he(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(DLt,"addIndentation");function wqe(t){return $he(t)?t.indentation:0}s(wqe,"getIndentation");function zz(t){return $he(t)?t.text:t}s(zz,"getText");d();d();var Sqe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Rqe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var zhe=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if($z(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=gI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(x=>{let b=h[x];return typeof b=="string"&&b.length>0}),y=g?h[g]:void 0,E=(l=(c=h[e])!==null&&c!==void 0?c:y)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${E.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!f(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Md(this.customCompletionFunction,null,this.shim),LLt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return Ws(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return MLt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return Ws(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?Rqe:Sqe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function kqe(t,e,r,n){return new zhe(t,e,r,n)}s(kqe,"completion");function LLt(t){return t.length<3}s(LLt,"isSyncCompletionFunction");function MLt(t){return t.length>3}s(MLt,"isFallbackCompletionFunction");d();d();function Pqe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(Pqe,"levenshtein");var Bqe=["$0","--","_"];function Dqe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let E of Object.keys(h)){let x=h[E];x&&g.indexOf(x)<0&&g.push(x)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var E;let x=t.getInternalMethods().getCommandInstance().getCommands(),b=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!Bqe.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&b.push(k)}),y&&(_.commands.length>0||x.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{x.includes(""+k)||b.push(""+k)}),y){let P=((E=t.getDemandedCommands()._)===null||E===void 0?void 0:E.max)||0,N=_.commands.length+P;N<p._.length&&p._.slice(N).forEach(M=>{M=String(M),!_.commands.includes(M)&&!b.includes(M)&&b.push(M)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(E=>{Bqe.indexOf(E)===-1&&Object.prototype.hasOwnProperty.call(m.choices,E)&&[].concat(p[E]).forEach(x=>{m.choices[E].indexOf(x)===-1&&x!==void 0&&(h[E]=(h[E]||[]).concat(x))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(E=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",E,e.stringifiedValues(h[E]),e.stringifiedValues(m.choices[E]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){br("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Md(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let E=g,x=y;E=c(p,E),y=c(p,y),E&&!y&&m.push(` ${g} -> ${x}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){br("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((E,x)=>x.length-E.length);let g=null,y=1/0;for(let E=0,x;(x=m[E])!==void 0;E++){let b=Pqe(p,x);b<=3&&b<y&&(y=b,g=x)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=AI(a,m=>!p[m]),l=AI(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Md(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(Dqe,"validation");d();var Yhe=[],qM;function Yz(t,e,r,n){qM=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=OLt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}FLt(a),Yhe.push(a),i=o?JSON.parse(qM.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=Yz(i,qM.path.dirname(a),r,qM)}return Yhe=[],r?Nqe(i,t):Object.assign({},i,t)}s(Yz,"applyExtends");function FLt(t){if(Yhe.indexOf(t)>-1)throw new Hs(`Circular extended configurations: '${t}'.`)}s(FLt,"checkForCircularExtends");function OLt(t,e){return qM.path.resolve(t,e)}s(OLt,"getPathToDefaultConfig");function Nqe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=Nqe(t[i],e[i]):r[i]=e[i];return r}s(Nqe,"mergeDeep");var _r=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},de=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sc,a2,HM,bm,V0,Kz,CI,c2,Jz,Im,Xz,Tm,ky,$0,wm,Zz,p3,_l,Gr,eY,tY,z0,l2,m3,u2,EI,rY,Un,d2,f2,p2,ei,nY,Py,Oa;function eHe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new sge(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(eHe,"YargsFactory");var Lqe=Symbol("copyDoubleDash"),Mqe=Symbol("copyDoubleDash"),Khe=Symbol("deleteFromParserHintObject"),Fqe=Symbol("emitWarning"),Oqe=Symbol("freeze"),Qqe=Symbol("getDollarZero"),m2=Symbol("getParserConfiguration"),Uqe=Symbol("getUsageConfiguration"),Jhe=Symbol("guessLocale"),qqe=Symbol("guessVersion"),Hqe=Symbol("parsePositionalNumbers"),Xhe=Symbol("pkgUp"),vI=Symbol("populateParserHintArray"),h3=Symbol("populateParserHintSingleValueDictionary"),Zhe=Symbol("populateParserHintArrayDictionary"),ege=Symbol("populateParserHintDictionary"),tge=Symbol("sanitizeKey"),rge=Symbol("setKey"),nge=Symbol("unfreeze"),Wqe=Symbol("validateAsync"),Gqe=Symbol("getCommandInstance"),jqe=Symbol("getContext"),Vqe=Symbol("getHasOutput"),$qe=Symbol("getLoggerInstance"),zqe=Symbol("getParseContext"),Yqe=Symbol("getUsageInstance"),Kqe=Symbol("getValidationInstance"),iY=Symbol("hasParseCallback"),Jqe=Symbol("isGlobalContext"),h2=Symbol("postProcess"),Xqe=Symbol("rebase"),ige=Symbol("reset"),WM=Symbol("runYargsParserAndExecuteCommands"),oge=Symbol("runValidation"),Zqe=Symbol("setHasOutput"),g2=Symbol("kTrackManuallySetKeys"),sge=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,sc.set(this,void 0),a2.set(this,void 0),HM.set(this,{commands:[],fullCommands:[]}),bm.set(this,null),V0.set(this,null),Kz.set(this,"show-hidden"),CI.set(this,null),c2.set(this,!0),Jz.set(this,{}),Im.set(this,!0),Xz.set(this,[]),Tm.set(this,void 0),ky.set(this,{}),$0.set(this,!1),wm.set(this,null),Zz.set(this,!0),p3.set(this,void 0),_l.set(this,""),Gr.set(this,void 0),eY.set(this,void 0),tY.set(this,{}),z0.set(this,null),l2.set(this,null),m3.set(this,{}),u2.set(this,{}),EI.set(this,void 0),rY.set(this,!1),Un.set(this,void 0),d2.set(this,!1),f2.set(this,!1),p2.set(this,!1),ei.set(this,void 0),nY.set(this,{}),Py.set(this,null),Oa.set(this,void 0),_r(this,Un,i,"f"),_r(this,EI,e,"f"),_r(this,a2,r,"f"),_r(this,eY,n,"f"),_r(this,Tm,new Vz(this),"f"),this.$0=this[Qqe](),this[ige](),_r(this,sc,de(this,sc,"f"),"f"),_r(this,ei,de(this,ei,"f"),"f"),_r(this,Oa,de(this,Oa,"f"),"f"),_r(this,Gr,de(this,Gr,"f"),"f"),de(this,Gr,"f").showHiddenOpt=de(this,Kz,"f"),_r(this,p3,this[Mqe](),"f")}addHelpOpt(e,r){let n="help";return br("[string|boolean] [string]",[e,r],arguments.length),de(this,wm,"f")&&(this[Khe](de(this,wm,"f")),_r(this,wm,null,"f")),e===!1&&r===void 0?this:(_r(this,wm,typeof e=="string"?e:n,"f"),this.boolean(de(this,wm,"f")),this.describe(de(this,wm,"f"),r||de(this,ei,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(br("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:de(this,Kz,"f");return this.boolean(n),this.describe(n,r||de(this,ei,"f").deferY18nLookup("Show hidden options")),de(this,Gr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return br("<object|string|array> [string|array]",[e,r],arguments.length),this[Zhe](this.alias.bind(this),"alias",e,r),this}array(e){return br("<array|string>",[e],arguments.length),this[vI]("array",e),this[g2](e),this}boolean(e){return br("<array|string>",[e],arguments.length),this[vI]("boolean",e),this[g2](e),this}check(e,r){return br("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>s2(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&de(this,ei,"f").fail(o.toString(),o):de(this,ei,"f").fail(de(this,Un,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(de(this,ei,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return br("<object|string|array> [string|array]",[e,r],arguments.length),this[Zhe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(br("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Hs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Hs("coerce callback must be provided");return de(this,Gr,"f").key[e]=!0,de(this,Tm,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?s2(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Hs(c.message)}):n},e),this}conflicts(e,r){return br("<string|object> [string|array]",[e,r],arguments.length),de(this,Oa,"f").conflicts(e,r),this}config(e="config",r,n){return br("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=Yz(e,de(this,a2,"f"),this[m2]()["deep-merge-config"]||!1,de(this,Un,"f")),de(this,Gr,"f").configObjects=(de(this,Gr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||de(this,ei,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{de(this,Gr,"f").config[i]=n||!0}),this)}completion(e,r,n){return br("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),_r(this,V0,e||de(this,V0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(de(this,V0,"f"),r),n&&de(this,bm,"f").registerFunction(n),this}command(e,r,n,i,o,a){return br("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),de(this,sc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){br("<string> [object]",[e,r],arguments.length);let n=de(this,eY,"f")||de(this,Un,"f").require;return de(this,sc,"f").addDirectory(e,n,de(this,Un,"f").getCallerFile(),r),this}count(e){return br("<array|string>",[e],arguments.length),this[vI]("count",e),this[g2](e),this}default(e,r,n){return br("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Ghe(e,de(this,Un,"f")),de(this,Gr,"f").defaultDescription[e]=n),typeof r=="function"&&(Ghe(e,de(this,Un,"f")),de(this,Gr,"f").defaultDescription[e]||(de(this,Gr,"f").defaultDescription[e]=de(this,ei,"f").functionDescription(r)),r=r.call()),this[h3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return br("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),de(this,Gr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Md(n,!0,de(this,Un,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Md(n,!0,de(this,Un,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Md(n,!0,de(this,Un,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return br("<object|string|array> [string]",[e,r],arguments.length),this[h3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return br("<string> [string|boolean]",[e,r],arguments.length),de(this,Gr,"f").deprecatedOptions[e]=r,this}describe(e,r){return br("<object|string|array> [string]",[e,r],arguments.length),this[rge](e,!0),de(this,ei,"f").describe(e,r),this}detectLocale(e){return br("<boolean>",[e],arguments.length),_r(this,c2,e,"f"),this}env(e){return br("[string|boolean]",[e],arguments.length),e===!1?delete de(this,Gr,"f").envPrefix:de(this,Gr,"f").envPrefix=e||"",this}epilogue(e){return br("<string>",[e],arguments.length),de(this,ei,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return br("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):de(this,ei,"f").example(e,r),this}exit(e,r){_r(this,$0,!0,"f"),_r(this,CI,r,"f"),de(this,Im,"f")&&de(this,Un,"f").process.exit(e)}exitProcess(e=!0){return br("[boolean]",[e],arguments.length),_r(this,Im,e,"f"),this}fail(e){if(br("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Hs("Invalid first argument. Expected function or boolean 'false'");return de(this,ei,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return br("<array> [function]",[e,r],arguments.length),r?de(this,bm,"f").getCompletion(e,r):new Promise((n,i)=>{de(this,bm,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return br([],0),de(this,Gr,"f").demandedOptions}getDemandedCommands(){return br([],0),de(this,Gr,"f").demandedCommands}getDeprecatedOptions(){return br([],0),de(this,Gr,"f").deprecatedOptions}getDetectLocale(){return de(this,c2,"f")}getExitProcess(){return de(this,Im,"f")}getGroups(){return Object.assign({},de(this,ky,"f"),de(this,u2,"f"))}getHelp(){if(_r(this,$0,!0,"f"),!de(this,ei,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[WM](de(this,EI,"f"),void 0,void 0,0,!0);if(Ws(r))return r.then(()=>de(this,ei,"f").help())}let e=de(this,sc,"f").runDefaultBuilderOn(this);if(Ws(e))return e.then(()=>de(this,ei,"f").help())}return Promise.resolve(de(this,ei,"f").help())}getOptions(){return de(this,Gr,"f")}getStrict(){return de(this,d2,"f")}getStrictCommands(){return de(this,f2,"f")}getStrictOptions(){return de(this,p2,"f")}global(e,r){return br("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?de(this,Gr,"f").local=de(this,Gr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{de(this,Gr,"f").local.includes(n)||de(this,Gr,"f").local.push(n)}),this}group(e,r){br("<string|array> <string>",[e,r],arguments.length);let n=de(this,u2,"f")[r]||de(this,ky,"f")[r];de(this,u2,"f")[r]&&delete de(this,u2,"f")[r];let i={};return de(this,ky,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return br("<string>",[e],arguments.length),de(this,Gr,"f").hiddenOptions.push(e),this}implies(e,r){return br("<string|object> [number|string|array]",[e,r],arguments.length),de(this,Oa,"f").implies(e,r),this}locale(e){return br("[string]",[e],arguments.length),e===void 0?(this[Jhe](),de(this,Un,"f").y18n.getLocale()):(_r(this,c2,!1,"f"),de(this,Un,"f").y18n.setLocale(e),this)}middleware(e,r,n){return de(this,Tm,"f").addMiddleware(e,!!r,n)}nargs(e,r){return br("<string|object|array> [number]",[e,r],arguments.length),this[h3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return br("<array|string>",[e],arguments.length),this[vI]("normalize",e),this}number(e){return br("<array|string>",[e],arguments.length),this[vI]("number",e),this[g2](e),this}option(e,r){if(br("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[g2](e),de(this,Py,"f")&&(e==="version"||r?.alias==="version")&&this[Fqe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),de(this,Gr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(de(this,Gr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=de(this,ei,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){br("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[Oqe](),typeof e>"u"&&(e=de(this,EI,"f")),typeof r=="object"&&(_r(this,l2,r,"f"),r=n),typeof r=="function"&&(_r(this,z0,r,"f"),r=!1),r||_r(this,EI,e,"f"),de(this,z0,"f")&&_r(this,Im,!1,"f");let i=this[WM](e,!!r),o=this.parsed;return de(this,bm,"f").setParsed(this.parsed),Ws(i)?i.then(a=>(de(this,z0,"f")&&de(this,z0,"f").call(this,de(this,CI,"f"),a,de(this,_l,"f")),a)).catch(a=>{throw de(this,z0,"f")&&de(this,z0,"f")(a,this.parsed.argv,de(this,_l,"f")),a}).finally(()=>{this[nge](),this.parsed=o}):(de(this,z0,"f")&&de(this,z0,"f").call(this,de(this,CI,"f"),i,de(this,_l,"f")),this[nge](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Ws(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Ws(i))throw new Hs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return br("<object>",[e],arguments.length),_r(this,tY,e,"f"),this}pkgConf(e,r){br("<string> [string]",[e,r],arguments.length);let n=null,i=this[Xhe](r||de(this,a2,"f"));return i[e]&&typeof i[e]=="object"&&(n=Yz(i[e],r||de(this,a2,"f"),this[m2]()["deep-merge-config"]||!1,de(this,Un,"f")),de(this,Gr,"f").configObjects=(de(this,Gr,"f").configObjects||[]).concat(n)),this}positional(e,r){br("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=AI(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=de(this,HM,"f").fullCommands[de(this,HM,"f").fullCommands.length-1],o=i?de(this,sc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return d3(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,de(this,ei,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return br("[boolean]",[e],arguments.length),_r(this,rY,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return br("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&de(this,Gr,"f").narg[e]?this:(this[h3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return br("[string] [string]",[e,r],arguments.length),e=e||this.$0,de(this,p3,"f").log(de(this,bm,"f").generateCompletionScript(e,r||de(this,V0,"f")||"completion")),this}showHelp(e){if(br("[string|function]",[e],arguments.length),_r(this,$0,!0,"f"),!de(this,ei,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[WM](de(this,EI,"f"),void 0,void 0,0,!0);if(Ws(n))return n.then(()=>{de(this,ei,"f").showHelp(e)}),this}let r=de(this,sc,"f").runDefaultBuilderOn(this);if(Ws(r))return r.then(()=>{de(this,ei,"f").showHelp(e)}),this}return de(this,ei,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return br("[boolean|string] [string]",[e,r],arguments.length),de(this,ei,"f").showHelpOnFail(e,r),this}showVersion(e){return br("[string|function]",[e],arguments.length),de(this,ei,"f").showVersion(e),this}skipValidation(e){return br("<array|string>",[e],arguments.length),this[vI]("skipValidation",e),this}strict(e){return br("[boolean]",[e],arguments.length),_r(this,d2,e!==!1,"f"),this}strictCommands(e){return br("[boolean]",[e],arguments.length),_r(this,f2,e!==!1,"f"),this}strictOptions(e){return br("[boolean]",[e],arguments.length),_r(this,p2,e!==!1,"f"),this}string(e){return br("<array|string>",[e],arguments.length),this[vI]("string",e),this[g2](e),this}terminalWidth(){return br([],0),de(this,Un,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return br("<object>",[e],arguments.length),_r(this,c2,!1,"f"),de(this,Un,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(br("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Md(e,null,de(this,Un,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Hs(".usage() description must start with $0 if being used as alias for .command()")}else return de(this,ei,"f").usage(e),this}usageConfiguration(e){return br("<object>",[e],arguments.length),_r(this,nY,e,"f"),this}version(e,r,n){let i="version";if(br("[boolean|string] [string] [string]",[e,r,n],arguments.length),de(this,Py,"f")&&(this[Khe](de(this,Py,"f")),de(this,ei,"f").version(void 0),_r(this,Py,null,"f")),arguments.length===0)n=this[qqe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return _r(this,Py,typeof e=="string"?e:i,"f"),r=r||de(this,ei,"f").deferY18nLookup("Show version number"),de(this,ei,"f").version(n||void 0),this.boolean(de(this,Py,"f")),this.describe(de(this,Py,"f"),r),this}wrap(e){return br("<number|null|undefined>",[e],arguments.length),de(this,ei,"f").wrap(e),this}[(sc=new WeakMap,a2=new WeakMap,HM=new WeakMap,bm=new WeakMap,V0=new WeakMap,Kz=new WeakMap,CI=new WeakMap,c2=new WeakMap,Jz=new WeakMap,Im=new WeakMap,Xz=new WeakMap,Tm=new WeakMap,ky=new WeakMap,$0=new WeakMap,wm=new WeakMap,Zz=new WeakMap,p3=new WeakMap,_l=new WeakMap,Gr=new WeakMap,eY=new WeakMap,tY=new WeakMap,z0=new WeakMap,l2=new WeakMap,m3=new WeakMap,u2=new WeakMap,EI=new WeakMap,rY=new WeakMap,Un=new WeakMap,d2=new WeakMap,f2=new WeakMap,p2=new WeakMap,ei=new WeakMap,nY=new WeakMap,Py=new WeakMap,Oa=new WeakMap,Lqe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[Mqe](){return{log:s((...e)=>{this[iY]()||console.log(...e),_r(this,$0,!0,"f"),de(this,_l,"f").length&&_r(this,_l,de(this,_l,"f")+`
`,"f"),_r(this,_l,de(this,_l,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[iY]()||console.error(...e),_r(this,$0,!0,"f"),de(this,_l,"f").length&&_r(this,_l,de(this,_l,"f")+`
`,"f"),_r(this,_l,de(this,_l,"f")+e.join(" "),"f")},"error")}}[Khe](e){d3(de(this,Gr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=de(this,Gr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete de(this,ei,"f").getDescriptions()[e]}[Fqe](e,r,n){de(this,Jz,"f")[n]||(de(this,Un,"f").process.emitWarning(e,r),de(this,Jz,"f")[n]=!0)}[Oqe](){de(this,Xz,"f").push({options:de(this,Gr,"f"),configObjects:de(this,Gr,"f").configObjects.slice(0),exitProcess:de(this,Im,"f"),groups:de(this,ky,"f"),strict:de(this,d2,"f"),strictCommands:de(this,f2,"f"),strictOptions:de(this,p2,"f"),completionCommand:de(this,V0,"f"),output:de(this,_l,"f"),exitError:de(this,CI,"f"),hasOutput:de(this,$0,"f"),parsed:this.parsed,parseFn:de(this,z0,"f"),parseContext:de(this,l2,"f")}),de(this,ei,"f").freeze(),de(this,Oa,"f").freeze(),de(this,sc,"f").freeze(),de(this,Tm,"f").freeze()}[Qqe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(de(this,Un,"f").process.argv()[0])?r=de(this,Un,"f").process.argv().slice(1,2):r=de(this,Un,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[Xqe](de(this,a2,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),de(this,Un,"f").getEnv("_")&&de(this,Un,"f").getProcessArgvBin()===de(this,Un,"f").getEnv("_")&&(e=de(this,Un,"f").getEnv("_").replace(`${de(this,Un,"f").path.dirname(de(this,Un,"f").process.execPath())}/`,"")),e}[m2](){return de(this,tY,"f")}[Uqe](){return de(this,nY,"f")}[Jhe](){if(!de(this,c2,"f"))return;let e=de(this,Un,"f").getEnv("LC_ALL")||de(this,Un,"f").getEnv("LC_MESSAGES")||de(this,Un,"f").getEnv("LANG")||de(this,Un,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[qqe](){return this[Xhe]().version||"unknown"}[Hqe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)de(this,Un,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Xhe](e){let r=e||"*";if(de(this,m3,"f")[r])return de(this,m3,"f")[r];let n={};try{let i=e||de(this,Un,"f").mainFilename;!e&&de(this,Un,"f").path.extname(i)&&(i=de(this,Un,"f").path.dirname(i));let o=de(this,Un,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});Md(o,void 0,de(this,Un,"f")),n=JSON.parse(de(this,Un,"f").readFileSync(o,"utf8"))}catch{}return de(this,m3,"f")[r]=n||{},de(this,m3,"f")[r]}[vI](e,r){r=[].concat(r),r.forEach(n=>{n=this[tge](n),de(this,Gr,"f")[e].push(n)})}[h3](e,r,n,i){this[ege](e,r,n,i,(o,a,c)=>{de(this,Gr,"f")[o][a]=c})}[Zhe](e,r,n,i){this[ege](e,r,n,i,(o,a,c)=>{de(this,Gr,"f")[o][a]=(de(this,Gr,"f")[o][a]||[]).concat(c)})}[ege](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of d3(n))e(a,n[a]);else o(r,this[tge](n),i)}[tge](e){return e==="__proto__"?"___proto___":e}[rge](e,r){return this[h3](this[rge].bind(this),"key",e,r),this}[nge](){var e,r,n,i,o,a,c,l,u,f,p,m;let h=de(this,Xz,"f").pop();Md(h,void 0,de(this,Un,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,m=this,{options:{set value(y){_r(e,Gr,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){_r(r,Im,y,"f")}}.value,groups:{set value(y){_r(n,ky,y,"f")}}.value,output:{set value(y){_r(i,_l,y,"f")}}.value,exitError:{set value(y){_r(o,CI,y,"f")}}.value,hasOutput:{set value(y){_r(a,$0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){_r(c,d2,y,"f")}}.value,strictCommands:{set value(y){_r(l,f2,y,"f")}}.value,strictOptions:{set value(y){_r(u,p2,y,"f")}}.value,completionCommand:{set value(y){_r(f,V0,y,"f")}}.value,parseFn:{set value(y){_r(p,z0,y,"f")}}.value,parseContext:{set value(y){_r(m,l2,y,"f")}}.value}=h,de(this,Gr,"f").configObjects=g,de(this,ei,"f").unfreeze(),de(this,Oa,"f").unfreeze(),de(this,sc,"f").unfreeze(),de(this,Tm,"f").unfreeze()}[Wqe](e,r){return s2(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[Gqe].bind(this),getContext:this[jqe].bind(this),getHasOutput:this[Vqe].bind(this),getLoggerInstance:this[$qe].bind(this),getParseContext:this[zqe].bind(this),getParserConfiguration:this[m2].bind(this),getUsageConfiguration:this[Uqe].bind(this),getUsageInstance:this[Yqe].bind(this),getValidationInstance:this[Kqe].bind(this),hasParseCallback:this[iY].bind(this),isGlobalContext:this[Jqe].bind(this),postProcess:this[h2].bind(this),reset:this[ige].bind(this),runValidation:this[oge].bind(this),runYargsParserAndExecuteCommands:this[WM].bind(this),setHasOutput:this[Zqe].bind(this)}}[Gqe](){return de(this,sc,"f")}[jqe](){return de(this,HM,"f")}[Vqe](){return de(this,$0,"f")}[$qe](){return de(this,p3,"f")}[zqe](){return de(this,l2,"f")||{}}[Yqe](){return de(this,ei,"f")}[Kqe](){return de(this,Oa,"f")}[iY](){return!!de(this,z0,"f")}[Jqe](){return de(this,Zz,"f")}[h2](e,r,n,i){return n||Ws(e)||(r||(e=this[Lqe](e)),(this[m2]()["parse-positional-numbers"]||this[m2]()["parse-positional-numbers"]===void 0)&&(e=this[Hqe](e)),i&&(e=o2(e,this,de(this,Tm,"f").getMiddleware(),!1))),e}[ige](e={}){_r(this,Gr,de(this,Gr,"f")||{},"f");let r={};r.local=de(this,Gr,"f").local||[],r.configObjects=de(this,Gr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(de(this,u2,"f"),Object.keys(de(this,ky,"f")).reduce((a,c)=>{let l=de(this,ky,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),_r(this,ky,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(de(this,Gr,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=AI(de(this,Gr,"f")[a],c=>!n[c])}),r.envPrefix=de(this,Gr,"f").envPrefix,_r(this,Gr,r,"f"),_r(this,ei,de(this,ei,"f")?de(this,ei,"f").reset(n):_qe(this,de(this,Un,"f")),"f"),_r(this,Oa,de(this,Oa,"f")?de(this,Oa,"f").reset(n):Dqe(this,de(this,ei,"f"),de(this,Un,"f")),"f"),_r(this,sc,de(this,sc,"f")?de(this,sc,"f").reset():Iqe(de(this,ei,"f"),de(this,Oa,"f"),de(this,Tm,"f"),de(this,Un,"f")),"f"),de(this,bm,"f")||_r(this,bm,kqe(this,de(this,ei,"f"),de(this,sc,"f"),de(this,Un,"f")),"f"),de(this,Tm,"f").reset(),_r(this,V0,null,"f"),_r(this,_l,"","f"),_r(this,CI,null,"f"),_r(this,$0,!1,"f"),this.parsed=!1,this}[Xqe](e,r){return de(this,Un,"f").path.relative(e,r)}[WM](e,r,n,i=0,o=!1){let a=!!n||o;e=e||de(this,EI,"f"),de(this,Gr,"f").__=de(this,Un,"f").y18n.__,de(this,Gr,"f").configuration=this[m2]();let c=!!de(this,Gr,"f").configuration["populate--"],l=Object.assign({},de(this,Gr,"f").configuration,{"populate--":!0}),u=de(this,Un,"f").Parser.detailed(e,Object.assign({},de(this,Gr,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,de(this,l2,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(f).forEach(y=>{y===de(this,wm,"f")&&f[y]?h=!0:y===de(this,Py,"f")&&f[y]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&de(this,ei,"f").clearCachedHelpMessage();try{if(this[Jhe](),r)return this[h2](f,c,!!n,!1);de(this,wm,"f")&&[de(this,wm,"f")].concat(m[de(this,wm,"f")]||[]).filter(_=>_.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),h=!0),_r(this,Zz,!1,"f");let y=de(this,sc,"f").getCommands(),E=de(this,bm,"f").completionKey in f,x=h||E||o;if(f._.length){if(y.length){let b;for(let _=i||0,k;f._[_]!==void 0;_++)if(k=String(f._[_]),y.includes(k)&&k!==de(this,V0,"f")){let P=de(this,sc,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[h2](P,c,!!n,!1)}else if(!b&&k!==de(this,V0,"f")){b=k;break}!de(this,sc,"f").hasDefaultCommand()&&de(this,rY,"f")&&b&&!x&&de(this,Oa,"f").recommendCommands(b,y)}de(this,V0,"f")&&f._.includes(de(this,V0,"f"))&&!E&&(de(this,Im,"f")&&yI(!0),this.showCompletionScript(),this.exit(0))}if(de(this,sc,"f").hasDefaultCommand()&&!x){let b=de(this,sc,"f").runCommand(null,this,u,0,o,h||g||o);return this[h2](b,c,!!n,!1)}if(E){de(this,Im,"f")&&yI(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${de(this,bm,"f").completionKey}`)+1);return de(this,bm,"f").getCompletion(b,(_,k)=>{if(_)throw new Hs(_.message);(k||[]).forEach(P=>{de(this,p3,"f").log(P)}),this.exit(0)}),this[h2](f,!c,!!n,!1)}if(de(this,$0,"f")||(h?(de(this,Im,"f")&&yI(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(de(this,Im,"f")&&yI(!0),a=!0,de(this,ei,"f").showVersion("log"),this.exit(0))),!a&&de(this,Gr,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>de(this,Gr,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new Hs(u.error.message);if(!E){let b=this[oge](m,{},u.error);n||(p=o2(f,this,de(this,Tm,"f").getMiddleware(),!0)),p=this[Wqe](b,p??f),Ws(p)&&!n&&(p=p.then(()=>o2(f,this,de(this,Tm,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof Hs)de(this,ei,"f").fail(y.message,y);else throw y}return this[h2](p??f,c,!!n,!0)}[oge](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Hs(n.message);de(this,Oa,"f").nonOptionCount(a),de(this,Oa,"f").requiredArguments(a,o);let c=!1;de(this,f2,"f")&&(c=de(this,Oa,"f").unknownCommands(a)),de(this,d2,"f")&&!c?de(this,Oa,"f").unknownArguments(a,e,r,!!i):de(this,p2,"f")&&de(this,Oa,"f").unknownArguments(a,e,{},!1,!1),de(this,Oa,"f").limitedChoices(a),de(this,Oa,"f").implications(a),de(this,Oa,"f").conflicting(a)}}[Zqe](){_r(this,$0,!0,"f")}[g2](e){if(typeof e=="string")de(this,Gr,"f").key[e]=!0;else for(let r of e)de(this,Gr,"f").key[r]=!0}};function Tqe(t){return!!t&&typeof t.getInternalMethods=="function"}s(Tqe,"isYargsInstance");var QLt=eHe(Cqe),tHe=QLt;d();d();d();var rHe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function nHe(t,e,r){let n=Dr.createAndMarkAsIssued({authSource:e,authType:r});return Rt(t,rHe.NewGitHubLogin,n)}s(nHe,"telemetryNewGitHubLogin");function iHe(t,e){let r=Dr.createAndMarkAsIssued({authType:e});return Rt(t,rHe.GitHubLoginSuccess,r)}s(iHe,"telemetryGitHubLoginSuccess");var age=class extends Bs{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function ULt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...A0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(jn).fetch(o,n)}catch(a){throw a instanceof Error&&E6(a)?new Bs(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new Bs(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(ULt,"requestDeviceFlowStage1");async function qLt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...A0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(jn).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new age(a):new Bs(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(qLt,"requestDeviceFlowStage2");async function HLt(t,e){iHe(t,"deviceFlow");let n=await(await Zp(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new Bs(`Error retrieving user information: ${String(n.errors)}`);return n}s(HLt,"requestUserInfo");var A2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(xd).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){nHe(e,"unknown","deviceFlow");let i=await ULt(e,r,n),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(f=>setTimeout(f,1e3*l));let u=await qLt(e,i.device_code,r,n);if(a-=l,c=u.access_token,c){let f=await HLt(e,{...n,accessToken:c});return{...n,githubAppId:r,login:f.login,accessToken:c}}l=u.interval??l}throw new Bs("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};d();var Fd=class{static{s(this,"CitationManager")}},oY=class extends Fd{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var WLt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},ds=class{constructor(){this.capabilities={...WLt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};d();d();d();d();function cge(t,e){let r=yg(t,e);return r===-1?void 0:t[r]}s(cge,"findLastMonotonous");function yg(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(yg,"findLastIdxMonotonous");function g3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(g3,"findFirstIdxMonotonousOrArrLen");var oHe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=yg(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var lge=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?sY.isErrorNoTelemetry(e)?new sY(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},sHe=new lge;function y2(t){sHe.onUnexpectedError(t)}s(y2,"onBugIndicatingError");function A3(t){GLt(t)||sHe.onUnexpectedError(t)}s(A3,"onUnexpectedError");var uge="Canceled";function GLt(t){return t instanceof By?!0:t instanceof Error&&t.name===uge&&t.message===uge}s(GLt,"isCancellationError");var By=class extends Error{static{s(this,"CancellationError")}constructor(){super(uge),this.name=this.message}};function GM(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(GM,"illegalArgument");function aHe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(aHe,"illegalState");var sY=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},dn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function jM(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(jM,"equals");function*VM(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(VM,"groupAdjacentBy");function lHe(t){return t.filter(e=>!!e)}s(lHe,"coalesce");var uHe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(uHe||={});function xI(t,e){return(r,n)=>e(t(r),t(n))}s(xI,"compareBy");var bI=s((t,e)=>t-e,"numberComparator");var aY=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},cHe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||uHe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function dHe(t,e){return t.reduce((r,n)=>r+e(n),0)}s(dHe,"sumBy");d();function hHe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(hHe,"groupBy");var pHe,mHe,fHe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[pHe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(mHe=Symbol.iterator,pHe=Symbol.toStringTag,mHe)](){return this.values()}};d();function dge(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(dge,"createSingleCallFunction");d();var fge;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let P=k.length-1;P>=0;P--)yield k[P]}_.reverse=a,s(a,"reverse");function c(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=c,s(c,"isEmpty");function l(k){return k[Symbol.iterator]().next().value}_.first=l,s(l,"first");function u(k,P){let N=0;for(let M of k)if(P(M,N++))return!0;return!1}_.some=u,s(u,"some");function f(k,P){for(let N of k)if(P(N))return N}_.find=f,s(f,"find");function*p(k,P){for(let N of k)P(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,P){let N=0;for(let M of k)yield P(M,N++)}_.map=m,s(m,"map");function*h(k,P){let N=0;for(let M of k)yield*P(M,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let P of k)yield*P}_.concat=g,s(g,"concat");function y(k,P,N){let M=N;for(let J of k)M=P(M,J);return M}_.reduce=y,s(y,"reduce");function*E(k,P,N=k.length){for(P<-k.length&&(P=0),P<0&&(P+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);P<N;P++)yield k[P]}_.slice=E,s(E,"slice");function x(k,P=Number.POSITIVE_INFINITY){let N=[];if(P===0)return[N,k];let M=k[Symbol.iterator]();for(let J=0;J<P;J++){let pe=M.next();if(pe.done)return[N,_.empty()];N.push(pe.value)}return[N,{[Symbol.iterator](){return M}}]}_.consume=x,s(x,"consume");async function b(k){let P=[];for await(let N of k)P.push(N);return Promise.resolve(P)}_.asyncToArray=b,s(b,"asyncToArray")})(fge||={});d();var pge=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function VLt(t){return Array.isArray(t)}s(VLt,"isEntries");var AHe,cY=class t{constructor(e,r){this[AHe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(VLt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new pge(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(AHe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},yHe,gHe=class{constructor(e,r){this[yHe]="ResourceSet";!e||typeof e=="function"?this._map=new cY(e):(this._map=new cY(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(yHe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var CHe,mge=class{constructor(){this[CHe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(CHe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},hge=class extends mge{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},lY=class extends hge{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var uY=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var $Lt=!1,y3=null;var EHe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new uY;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(xI(l=>l.idx,bI));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=hHe([...g].map(E=>i(E)[p]),E=>E);delete y[u[p]];for(let[E,x]of Object.entries(y))f.unshift(`    - stacktraces of ${x.length} other leaks continue with ${E}`);f.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function zLt(t){y3=t}s(zLt,"setDisposableTracker");if($Lt){let t="__is_disposable_tracked__";zLt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==ps.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==ps.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function C3(t){return y3?.trackDisposable(t),t}s(C3,"trackDisposable");function E3(t){y3?.markAsDisposed(t)}s(E3,"markAsDisposed");function gge(t,e){y3?.setParent(t,e)}s(gge,"setParentOfDisposable");function YLt(t,e){if(y3)for(let r of t)y3.setParent(r,e)}s(YLt,"setParentOfDisposables");function vHe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(vHe,"isDisposable");function dY(t){if(fge.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(dY,"dispose");function xHe(...t){let e=ac(()=>dY(t));return YLt(t,e),e}s(xHe,"combinedDisposable");function ac(t){let e=C3({dispose:dge(()=>{E3(e),t()})});return e}s(ac,"toDisposable");var hu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;C3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(E3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{dY(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return gge(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),gge(e,null))}},ps=class{constructor(){this._store=new hu;C3(this),gge(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){E3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var _m=class extends ps{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var bHe=Ne(require("events"));var fY="CompletionRequested",Dy=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new bHe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(fY,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Wu(this.ctx,e,`event.${fY}`);return this.#e.on(fY,r),In.Disposable.create(()=>this.#e.off(fY,r))}};d();var Age=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},v3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Age(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var pY=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=wHe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=IHe(n.text,!1,o);if(l-c===f.length)for(let m=0,h=f.length;m<h;m++)u[m+c+1]=f[m];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+f.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=IHe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&THe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},II;(function(t){function e(i,o,a,c){return new pY(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof pY)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=yge(o.map(KLt),(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(II||(II={}));function yge(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);yge(n,e),yge(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(yge,"mergeSort");function IHe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);THe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(IHe,"computeLineOffsets");function THe(t){return t===13||t===10}s(THe,"isEOL");function wHe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(wHe,"getWellformedRange");function KLt(t){let e=wHe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(KLt,"getWellformedEdit");d();var _He;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(_He||(_He={}));var Cge;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Cge||(Cge={}));var SHe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(SHe||(SHe={}));var mY;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(mY||(mY={}));var Ju;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=mY.MAX_VALUE),i===Number.MAX_VALUE&&(i=mY.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.line)&&$e.uinteger(i.character)}s(r,"is"),t.is=r})(Ju||(Ju={}));var Is;(function(t){function e(n,i,o,a){if($e.uinteger(n)&&$e.uinteger(i)&&$e.uinteger(o)&&$e.uinteger(a))return{start:Ju.create(n,i),end:Ju.create(o,a)};if(Ju.is(n)&&Ju.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Ju.is(i.start)&&Ju.is(i.end)}s(r,"is"),t.is=r})(Is||(Is={}));var hY;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&($e.string(i.uri)||$e.undefined(i.uri))}s(r,"is"),t.is=r})(hY||(hY={}));var RHe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.targetRange)&&$e.string(i.targetUri)&&Is.is(i.targetSelectionRange)&&(Is.is(i.originSelectionRange)||$e.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(RHe||(RHe={}));var Ege;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.numberRange(i.red,0,1)&&$e.numberRange(i.green,0,1)&&$e.numberRange(i.blue,0,1)&&$e.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Ege||(Ege={}));var kHe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&Ege.is(i.color)}s(r,"is"),t.is=r})(kHe||(kHe={}));var PHe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.undefined(i.textEdit)||b3.is(i))&&($e.undefined(i.additionalTextEdits)||$e.typedArray(i.additionalTextEdits,b3.is))}s(r,"is"),t.is=r})(PHe||(PHe={}));var BHe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(BHe||(BHe={}));var DHe;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return $e.defined(o)&&(u.startCharacter=o),$e.defined(a)&&(u.endCharacter=a),$e.defined(c)&&(u.kind=c),$e.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.startLine)&&$e.uinteger(i.startLine)&&($e.undefined(i.startCharacter)||$e.uinteger(i.startCharacter))&&($e.undefined(i.endCharacter)||$e.uinteger(i.endCharacter))&&($e.undefined(i.kind)||$e.string(i.kind))}s(r,"is"),t.is=r})(DHe||(DHe={}));var vge;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&hY.is(i.location)&&$e.string(i.message)}s(r,"is"),t.is=r})(vge||(vge={}));var NHe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(NHe||(NHe={}));var LHe;(function(t){t.Unnecessary=1,t.Deprecated=2})(LHe||(LHe={}));var MHe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&$e.string(n.href)}s(e,"is"),t.is=e})(MHe||(MHe={}));var gY;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return $e.defined(o)&&(u.severity=o),$e.defined(a)&&(u.code=a),$e.defined(c)&&(u.source=c),$e.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return $e.defined(o)&&Is.is(o.range)&&$e.string(o.message)&&($e.number(o.severity)||$e.undefined(o.severity))&&($e.integer(o.code)||$e.string(o.code)||$e.undefined(o.code))&&($e.undefined(o.codeDescription)||$e.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&($e.string(o.source)||$e.undefined(o.source))&&($e.undefined(o.relatedInformation)||$e.typedArray(o.relatedInformation,vge.is))}s(r,"is"),t.is=r})(gY||(gY={}));var x3;(function(t){function e(n,i,...o){let a={title:n,command:i};return $e.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.title)&&$e.string(i.command)}s(r,"is"),t.is=r})(x3||(x3={}));var b3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return $e.objectLiteral(a)&&$e.string(a.newText)&&Is.is(a.range)}s(i,"is"),t.is=i})(b3||(b3={}));var xge;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&($e.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(xge||(xge={}));var I3;(function(t){function e(r){let n=r;return $e.string(n)}s(e,"is"),t.is=e})(I3||(I3={}));var FHe;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return b3.is(a)&&(xge.is(a.annotationId)||I3.is(a.annotationId))}s(i,"is"),t.is=i})(FHe||(FHe={}));var bge;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Sge.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(bge||(bge={}));var Ige;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&$e.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||I3.is(i.annotationId))}s(r,"is"),t.is=r})(Ige||(Ige={}));var Tge;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&$e.string(i.oldUri)&&$e.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||I3.is(i.annotationId))}s(r,"is"),t.is=r})(Tge||(Tge={}));var wge;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&$e.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||$e.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||$e.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||I3.is(i.annotationId))}s(r,"is"),t.is=r})(wge||(wge={}));var _ge;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>$e.string(i.kind)?Ige.is(i)||Tge.is(i)||wge.is(i):bge.is(i)))}s(e,"is"),t.is=e})(_ge||(_ge={}));var OHe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)}s(r,"is"),t.is=r})(OHe||(OHe={}));var QHe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.integer(i.version)}s(r,"is"),t.is=r})(QHe||(QHe={}));var Sge;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&(i.version===null||$e.integer(i.version))}s(r,"is"),t.is=r})(Sge||(Sge={}));var UHe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.string(i.languageId)&&$e.integer(i.version)&&$e.string(i.text)}s(r,"is"),t.is=r})(UHe||(UHe={}));var Rge;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(Rge||(Rge={}));var $M;(function(t){function e(r){let n=r;return $e.objectLiteral(r)&&Rge.is(n.kind)&&$e.string(n.value)}s(e,"is"),t.is=e})($M||($M={}));var qHe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(qHe||(qHe={}));var HHe;(function(t){t.PlainText=1,t.Snippet=2})(HHe||(HHe={}));var WHe;(function(t){t.Deprecated=1})(WHe||(WHe={}));var GHe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.newText)&&Is.is(i.insert)&&Is.is(i.replace)}s(r,"is"),t.is=r})(GHe||(GHe={}));var jHe;(function(t){t.asIs=1,t.adjustIndentation=2})(jHe||(jHe={}));var VHe;(function(t){function e(r){let n=r;return n&&($e.string(n.detail)||n.detail===void 0)&&($e.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(VHe||(VHe={}));var $He;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})($He||($He={}));var zHe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(zHe||(zHe={}));var AY;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return $e.string(i)||$e.objectLiteral(i)&&$e.string(i.language)&&$e.string(i.value)}s(r,"is"),t.is=r})(AY||(AY={}));var YHe;(function(t){function e(r){let n=r;return!!n&&$e.objectLiteral(n)&&($M.is(n.contents)||AY.is(n.contents)||$e.typedArray(n.contents,AY.is))&&(r.range===void 0||Is.is(r.range))}s(e,"is"),t.is=e})(YHe||(YHe={}));var KHe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(KHe||(KHe={}));var JHe;(function(t){function e(r,n,...i){let o={label:r};return $e.defined(n)&&(o.documentation=n),$e.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(JHe||(JHe={}));var XHe;(function(t){t.Text=1,t.Read=2,t.Write=3})(XHe||(XHe={}));var ZHe;(function(t){function e(r,n){let i={range:r};return $e.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(ZHe||(ZHe={}));var eWe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(eWe||(eWe={}));var tWe;(function(t){t.Deprecated=1})(tWe||(tWe={}));var rWe;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(rWe||(rWe={}));var nWe;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(nWe||(nWe={}));var iWe;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.name)&&$e.number(i.kind)&&Is.is(i.range)&&Is.is(i.selectionRange)&&(i.detail===void 0||$e.string(i.detail))&&(i.deprecated===void 0||$e.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(iWe||(iWe={}));var oWe;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(oWe||(oWe={}));var yY;(function(t){t.Invoked=1,t.Automatic=2})(yY||(yY={}));var sWe;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.typedArray(i.diagnostics,gY.is)&&(i.only===void 0||$e.typedArray(i.only,$e.string))&&(i.triggerKind===void 0||i.triggerKind===yY.Invoked||i.triggerKind===yY.Automatic)}s(r,"is"),t.is=r})(sWe||(sWe={}));var aWe;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):x3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.title)&&(i.diagnostics===void 0||$e.typedArray(i.diagnostics,gY.is))&&(i.kind===void 0||$e.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||x3.is(i.command))&&(i.isPreferred===void 0||$e.boolean(i.isPreferred))&&(i.edit===void 0||_ge.is(i.edit))}s(r,"is"),t.is=r})(aWe||(aWe={}));var cWe;(function(t){function e(n,i){let o={range:n};return $e.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(i.range)&&($e.undefined(i.command)||x3.is(i.command))}s(r,"is"),t.is=r})(cWe||(cWe={}));var lWe;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.uinteger(i.tabSize)&&$e.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(lWe||(lWe={}));var uWe;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(i.range)&&($e.undefined(i.target)||$e.string(i.target))}s(r,"is"),t.is=r})(uWe||(uWe={}));var dWe;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(dWe||(dWe={}));var fWe;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(fWe||(fWe={}));var pWe;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(pWe||(pWe={}));var mWe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(mWe||(mWe={}));var hWe;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&$e.string(i.text)}s(r,"is"),t.is=r})(hWe||(hWe={}));var gWe;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&$e.boolean(i.caseSensitiveLookup)&&($e.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(gWe||(gWe={}));var AWe;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&($e.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(AWe||(AWe={}));var yWe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(n.stoppedLocation)}s(r,"is"),t.is=r})(yWe||(yWe={}));var kge;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(kge||(kge={}));var Pge;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&(i.tooltip===void 0||$e.string(i.tooltip)||$M.is(i.tooltip))&&(i.location===void 0||hY.is(i.location))&&(i.command===void 0||x3.is(i.command))}s(r,"is"),t.is=r})(Pge||(Pge={}));var CWe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Ju.is(i.position)&&($e.string(i.label)||$e.typedArray(i.label,Pge.is))&&(i.kind===void 0||kge.is(i.kind))&&i.textEdits===void 0||$e.typedArray(i.textEdits,b3.is)&&(i.tooltip===void 0||$e.string(i.tooltip)||$M.is(i.tooltip))&&(i.paddingLeft===void 0||$e.boolean(i.paddingLeft))&&(i.paddingRight===void 0||$e.boolean(i.paddingRight))}s(r,"is"),t.is=r})(CWe||(CWe={}));var EWe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(EWe||(EWe={}));var vWe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(vWe||(vWe={}));var xWe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(xWe||(xWe={}));var bWe;(function(t){t.Invoked=0,t.Automatic=1})(bWe||(bWe={}));var IWe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(IWe||(IWe={}));var TWe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(TWe||(TWe={}));var wWe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&Cge.is(n.uri)&&$e.string(n.name)}s(e,"is"),t.is=e})(wWe||(wWe={}));var _We;(function(t){function e(o,a,c,l){return new Bge(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!($e.defined(a)&&$e.string(a.uri)&&($e.undefined(a.languageId)||$e.string(a.languageId))&&$e.uinteger(a.lineCount)&&$e.func(a.getText)&&$e.func(a.positionAt)&&$e.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,m=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[m++]=l[f++]:o[m++]=u[p++];for(;f<l.length;)o[m++]=l[f++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(_We||(_We={}));var Bge=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Ju.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Ju.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},$e;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(h){return e.call(h)==="[object Function]"}s(f,"func"),t.func=f;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})($e||($e={}));var ns=class{static{s(this,"LocationFactory")}static{this.range=Is.create.bind(Is)}static{this.position=Ju.create.bind(Ju)}},yE=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=II.create(e.clientUri,e.clientLanguageId,n,e.getText());return II.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=II.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return II.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=e3({uri:e,languageId:r})){return new t(Jc(e),II.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Is.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Is.create(Ju.create(r,0),Ju.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var zM={isBlocked:!1,reason:"VALID_FILE"},CY={isBlocked:!1,reason:"NO_MATCHING_POLICY"},SWe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},C2={all:"all",repo:"repo"},TI=new vt("contentExclusion");d();d();var EY=class{static{s(this,"PolicyEvaluator")}};d();d();d();var RWe=new vt("repository"),E2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},Cg=class{static{s(this,"GitConfigLoader")}},vY=class extends Cg{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var kWe=require("os");var xY=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Ib.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Ib.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,kWe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var bY=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(Cg).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new xY(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var JLt=100,Dge=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},CE=class t{constructor(e){this.ctx=e;this.remoteResolver=new bY;this.cache=new Or(JLt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=Gu(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Dge(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(yo),i=Lo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=Lo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=O_(r,o[1]),c=Lo(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=Lo(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=Lo(a,"commondir");a=O_(a,(await e.readFileString(u)).trimEnd());let f=Lo(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var v2=s((t,e)=>{if(Sy.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...Sy.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var TY=new WeakMap;function wY(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&TY.has(t))return TY.get(t);switch(TY.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=wY(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+wY(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+wY(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return TY.set(t,n),n}s(wY,"t");function _Y(t){return wY(t,0)}s(_Y,"r");var Nge=new WeakMap;function PWe(t,e,r=_Y(e)){let n,i,o=Nge.get(t);o||(Nge.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(m){for(;u=n[f++];u.r(m));}s(p,"o"),Nge.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[f++],f<=m.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(PWe,"n");var BWe=new WeakMap;function XLt(t,e,r,n=_Y(r)){if(e||(e=BWe.get(t)),e||BWe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=PWe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(XLt,"n");function DWe(t,e){return function(r,n){return XLt(t,e,r,n)}}s(DWe,"o");d();var eGe=Ne(VWe(),1);d();var KM=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var sMt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},JM=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),aMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),$We=s(t=>t.join(""),"rangesToString"),zWe=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!l){f=o+1;break}if(a=!0,y==="\\"&&!l){l=!0,o++;continue}if(y==="["&&!l){for(let[E,[x,b,_]]of Object.entries(sMt))if(t.startsWith(E,o)){if(p)return["$.",!1,t.length-r,!0];o+=E.length,_?i.push(x):n.push(x),c=c||b;continue e}}if(l=!1,p){y>p?n.push(JM(p)+"-"+JM(y)):y===p&&n.push(JM(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(JM(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(JM(y)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[aMt(y),!1,f-r,!1]}let m="["+(u?"^":"")+$We(n)+"]",h="["+(u?"":"^")+$We(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,f-r,!0]},"parseClass");d();var wI=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var cMt=new Set(["!","?","+","*","@"]),YWe=s(t=>cMt.has(t),"isExtglobType"),lMt="(?!(?:^|/)\\.\\.?(?:$|/))",SY="(?!\\.)",uMt=new Set(["[","."]),dMt=new Set(["..","."]),fMt=new Set("().*{}+?[]^$\\!"),pMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Fge="[^/]",KWe=Fge+"*?",JWe=Fge+"+?",T3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===c+1?(y==="^"||y==="!")&&(l=!0):y==="]"&&!(h===c+2&&l)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,c=h,l=!1,g+=y;continue}if(!i.noext&&YWe(y)&&e.charAt(h)==="("){r.push(g),g="";let E=new t(y,r);h=t.#u(e,E,h,i),r.push(E);continue}g+=y}return r.push(g),h}let u=n+1,f=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(YWe(h)&&e.charAt(u)==="("){f.push(m),m="";let g=new t(h,f);f.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){f.push(m),m="",p.push(f),f=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),f.push(m),m="",r.push(...p,f),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,E,x]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||E,this.#i=this.#i||x,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&dMt.has(this.#n[0]))){let g=uMt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),E=!r&&!e&&g.has(u.charAt(0));f=y?lMt:E?SY:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,wI(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,wI(this.toString()),!1,!1]}let a=!n||e||r||!SY?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?SY:"")+JWe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?SY:"")+KWe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,wI(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(fMt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,m]=zWe(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=JWe:o+=KWe,r=!0;continue}if(l==="?"){o+=Fge,r=!0;continue}o+=pMt(l)}return[o,wI(e),!!r,a]}};d();var Oge=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var cc=s((t,e,r={})=>(KM(e),!r.nocomment&&e.charAt(0)==="#"?!1:new w3(e,r).match(t)),"minimatch"),mMt=/^\*+([^+@!?\*\[\(]*)$/,hMt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),gMt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),AMt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),yMt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),CMt=/^\*+\.\*+$/,EMt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),vMt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),xMt=/^\.\*+$/,bMt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),IMt=/^\*+$/,TMt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),wMt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),_Mt=/^\?+([^+@!?\*\[\(]*)?$/,SMt=s(([t,e=""])=>{let r=tGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),RMt=s(([t,e=""])=>{let r=rGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),kMt=s(([t,e=""])=>{let r=rGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),PMt=s(([t,e=""])=>{let r=tGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),tGe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),rGe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),nGe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",XWe={win32:{sep:"\\"},posix:{sep:"/"}},BMt=nGe==="win32"?XWe.win32.sep:XWe.posix.sep;cc.sep=BMt;var Rm=Symbol("globstar **");cc.GLOBSTAR=Rm;var DMt="[^/]",NMt=DMt+"*?",LMt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",MMt="(?:(?!(?:\\/|^)\\.).)*?",FMt=s((t,e={})=>r=>cc(r,t,e),"filter");cc.filter=FMt;var Sm=s((t,e={})=>Object.assign({},t,e),"ext"),OMt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return cc;let e=cc;return Object.assign(s((n,i,o={})=>e(n,i,Sm(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Sm(t,o))}static defaults(i){return e.defaults(Sm(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Sm(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Sm(t,o))}},unescape:s((n,i={})=>e.unescape(n,Sm(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Sm(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Sm(t,i)),"filter"),defaults:s(n=>e.defaults(Sm(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Sm(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Sm(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Sm(t,o)),"match"),sep:e.sep,GLOBSTAR:Rm})},"defaults");cc.defaults=OMt;var iGe=s((t,e={})=>(KM(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,eGe.default)(t)),"braceExpand");cc.braceExpand=iGe;var QMt=s((t,e={})=>new w3(t,e).makeRe(),"makeRe");cc.makeRe=QMt;var UMt=s((t,e,r={})=>{let n=new w3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");cc.match=UMt;var ZWe=/[?*]|[+@!]\(.*?\)|\[|\]/,qMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),w3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){KM(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||nGe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!ZWe.test(o[2]))&&!ZWe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),x=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!x&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=E?3:y?0:void 0,k=b?3:x?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[P,N]=[e[_],r[k]];P.toLowerCase()===N.toLowerCase()&&(r[k]=P,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===Rm){this.debug("GLOBSTAR",[r,f,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let y;if(typeof f=="string"?(y=p===f,this.debug("string match",f,p,y)):(y=f.test(p),this.debug("pattern match",f,p,y)),!y)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return iGe(this.pattern,this.options)}parse(e){KM(e);let r=this.options;if(e==="**")return Rm;if(e==="")return"";let n,i=null;(n=e.match(IMt))?i=r.dot?wMt:TMt:(n=e.match(mMt))?i=(r.nocase?r.dot?yMt:AMt:r.dot?gMt:hMt)(n[1]):(n=e.match(_Mt))?i=(r.nocase?r.dot?RMt:SMt:r.dot?kMt:PMt)(n):(n=e.match(CMt))?i=r.dot?vMt:EMt:(n=e.match(xMt))&&(i=bMt);let o=T3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?NMt:r.dot?LMt:MMt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?qMt(f):f===Rm?Rm:f._src});return u.forEach((f,p)=>{let m=u[p+1],h=u[p-1];f!==Rm||h===Rm||(h===void 0?m!==void 0&&m!==Rm?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==Rm&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=Rm))}),u.filter(f=>f!==Rm).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return cc.defaults(e).Minimatch}};cc.AST=T3;cc.Minimatch=w3;cc.escape=Oge;cc.unescape=wI;var Qge="contentExclusion",RY=class extends EY{static{s(this,"CopilotContentExclusion")}#e;#t=new Or(1e4);#i=new Or(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=O_(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??C2.all);if(!i)return CY;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return TI.exception(this.#e,n,`${Qge}.evaluate`),SWe}return zM}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=zM,a,c=Gue(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(cc(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=Uge(l,"FILE_BLOCKED_PATH"),a=u;break e}return TI.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return zM;let a=this.evaluateFileContent(i,o,n);return TI.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>oGe(a)).some(a=>a.test(n)))return Uge(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>oGe(a)).some(a=>a.test(n)))return Uge(i,"FILE_BLOCKED_TEXT_BASED");return zM}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ia(this.#e,e,`${Qge}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=DWe(async e=>{let r=await this.#e.get(Qr).getGitHubSession();if(!r)throw new Bs("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(C2.all);e.filter(u=>u!==C2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==C2.all).join(",")),i.searchParams.set("scope",o?C2.all:C2.repo);let c=await Zp(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new VA(c)}return this.#s("fetch.success"),v2(jMt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(CE).getRepo(Gu(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Rt(this.#e,`${Qge}.${e}`,Dr.createAndMarkAsIssued(r,n))}};function oGe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(oGe,"stringToRegex");function Uge(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(Uge,"fileBlockedEvaluationResult");var HMt=I.Object({name:I.String(),type:I.String()}),WMt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:HMt}),qge=I.Array(WMt),GMt=I.Object({rules:qge,last_updated_at:I.String(),scope:I.String()}),jMt=I.Array(GMt);var Mc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new RY(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(pr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(pr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=Date.now(),p=await u.evaluate(e,r),m=Date.now();return i.push({key:l,result:p,elapsedMs:m-f}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){TI.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(po).setInactive(r??"Copilot is disabled"):this.ctx.get(po).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===CY.reason)return TI.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={elapsedMs:i};return Rt(this.ctx,e,Dr.createAndMarkAsIssued(c,l)),Rt(this.ctx,e,Dr.createAndMarkAsIssued({...c,path:r},l),1),TI.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function EE(t,e,r){let n=await t.get(Mc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(EE,"isDocumentValid");var pr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await EE(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Jc(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return EE(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(yo).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(yo).readFileString(e)}getWorkspaceFolder(e){let r=Jc(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Jc(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Jc(e.uri);for(let n of this.getWorkspaceFolders()){let i=Jc(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Oi(r)}};function Gs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(Gs,"statusFromTextDocumentResult");var mn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(pr).getRelativePath(e)??Oi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(pr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await EE(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:yE.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(yo).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(yo).stat(e)).size/1024/1024}};d();d();var Od=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function Ny(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(Ny,"delay");d();var Hge=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},kY=class extends Hge{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var Lf=class{constructor(e){this.ctx=e;this.#e=new vt("AsyncCompletionManager");this.requests=new Or(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(Wge(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new kY;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Bt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Od,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(Wge(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:m}=f.choice;if(!m.startsWith(p)||m.length<=p.length){l(f.headerRequestId)();return}m=m.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...f.choice,completionText:m},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)Wge(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function Wge(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(Wge,"isCandidate");d();d();var ZM=class{constructor(e){this.maxSize=e;this.root=new XM;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new XM;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new XM;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},XM=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Eg=class{constructor(){this.cache=new ZM(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new ZM(100)}};d();d();d();var Ly=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return $u.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=Rae(n,$u.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{kae(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var PY=class extends Ly{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function sGe(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=Rae(c,$u.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{kae(c,u,f)}}s(sGe,"getBlockPositionType");d();d();var vE={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function aGe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let E;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?E=.003325460510319164:E=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?E=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?E=.0697359767152808:t[230]>1e-35?E=.06513506845651572:E=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?E=.013616385013146277:E=.04171540100223404:E=-.04360396575094823:t[212]>1e-35?E=.025945477945627522:E=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?E=-.07856453318384411:E=-.014803893522351739:t[39]>1e-35?E=-.09185452630751932:t[149]>1e-35?E=-.07122426086157027:t[134]>1e-35?E=-.04231052091434186:t[227]>1e-35?E=-.029815824273994197:t[50]>1e-35?E=-.15736496271211153:t[222]>1e-35?E=-.02360285356956629:t[128]>1e-35?E=-.03922080193836443:t[136]>1e-35?E=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?E=-.0029736170756835783:E=-.06482902102259112:t[84]>1e-35?E=-.11340924635708383:t[94]>1e-35?E=-.03635703457792193:t[118]>1e-35?E=-.058181913914186034:t[126]>1e-35?E=-.062030576241517366:t[116]>1e-35?E=-.045086301850604006:t[25]>1e-35?E=-.031665223656767286:t[203]>1e-35?E=-.009444685731407691:E=.0112265153772187;let x;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?x=.022717227245241684:x=-.049700413274686266:x=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?x=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?x=-.12263724050601095:x=.0070743478891288035:t[288]>1e-35?x=-.050439138582109:x=.0255701593657891:x=-.005812703740580558:t[6]>49.50000000000001?x=-.008542694147899113:x=.035147383686665:x=-.0960461939274094:t[32]>1e-35?x=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?x=-.01800870272656664:x=-.07817304234604389:t[30]>1e-35?x=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?x=.08778416018479411:x=-.026563982720830256:x=-.05296139548112329:t[50]>1e-35?x=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?x=-.036572140520852024:t[183]>1e-35?x=-.10766853736801459:x=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?x=.09513215942486053:x=-.03641865277445567:t[10]>59.50000000000001?x=.03177172388687933:t[39]>1e-35?x=-.10234241303898953:t[243]>1e-35?x=-.02966738115984321:t[190]>1e-35?x=-.04312785336449181:t[118]>1e-35?x=-.05808521194081524:x=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let P;t[131]>1e-35?P=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?P=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?P=-.022305242912035072:P=.024792895826340516:P=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?P=.2080083584805785:P=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?P=.060783227455868206:P=-.056904865557409035:P=-.03278952553107572:t[192]>1e-35?P=.13117402617043625:P=.01647119888257836:P=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?P=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?P=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?P=-.11083976837572328:t[146]>1e-35?P=-.03359294484446772:P=-.0042815953591236475:t[190]>1e-35?P=-.09264239592903775:t[10]>1e-35?P=.022282638485105657:P=-.0205994057928458:t[5]>4918.500000000001?P=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?P=.08935072241972036:P=-.03781647876237494:P=.0062655753179671515:t[31]>1e-35?P=.008603500300349887:t[230]>1e-35?P=.03350056932774173:t[23]>1e-35?t[241]>1e-35?P=.10277555508503314:P=.0017901817172993888:t[2]>98.50000000000001?P=-.05920081229672715:P=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let M;t[131]>1e-35?M=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?M=.07473600489975568:t[0]>93.50000000000001?M=-.021596848506011502:M=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?M=.10264284346448256:M=.031042487183181262:M=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?M=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?M=.006271403149804702:M=-.030013637555715046:t[0]>4449.500000000001?M=-.06556876058654929:M=.06437994816903034:t[32]>1e-35?M=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?M=-.09349726304052086:t[210]>1e-35?M=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?M=-.029188394315052574:M=.017219308333820193:M=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?M=-.04428555753857688:M=.0001456106867817353:t[5]>213.50000000000003?M=.01740292726636365:M=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?M=.03410288911259329:t[121]>1e-35?M=-.06056527462120627:t[8]>2592.5000000000005?M=.12166808844363577:t[191]>1e-35?M=.11669879218998758:M=-.001664858391716235:M=-.01262927450503166:M=-.04506589951879664:t[227]>1e-35?M=-.08548904959752329:M=.02156080776537726;let J;t[306]>1e-35?t[149]>1e-35?J=-.1389218965136736:J=-.032218642644416894:t[13]>1e-35?J=.006465035217331847:t[50]>1e-35?J=-.1381687930130022:t[179]>1e-35?J=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?J=-.03262719498763048:J=.023342916702125613:t[191]>1e-35?J=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?J=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?J=-.09989343595668776:J=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?J=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?J=-.09165257825246746:t[9]>32.50000000000001?J=.02484870392366004:J=-.008499493096971395:t[8]>24.500000000000004?J=.02459679192828244:J=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?J=.0015644546318714849:J=-.06579524865022705:J=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?J=.03331853632960164:J=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?J=-.019091477207111116:J=.037878468575478504:t[94]>1e-35?J=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?J=.16919658785098224:t[243]>1e-35?J=-.06580584936754524:J=.01567555159935563:t[129]>1e-35?J=.06721746994993226:t[10]>32.50000000000001?J=-.046394462507797975:J=-.006436180519584767;let pe;t[131]>1e-35?pe=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?pe=.019122095523977856:t[298]>1e-35?pe=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?pe=-.026094309429557913:t[204]>1e-35?pe=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?pe=.012643810980689466:pe=-.07884161741497837:pe=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?pe=.04493082949897325:pe=.18046359750455776:t[7]>18.500000000000004?pe=-.018667348656891496:pe=.02584325784698236:pe=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?pe=.04749240016989375:pe=-.0333334578246718:t[5]>3276.5000000000005?pe=.11330554740098908:t[7]>94.50000000000001?pe=.1296600395033268:pe=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?pe=-.13787130789142835:t[0]>1847.5000000000002?pe=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?pe=.028856848462727104:pe=-.11197632885851168:pe=.08169801342016791:t[1]>22.500000000000004?pe=-.021052888644970163:pe=.019048604298876753:t[7]>4.500000000000001?pe=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?pe=.03432638833359197:pe=-.0036767863082454973:t[1]>48.50000000000001?pe=.03087375270128195:t[2]>3.5000000000000004?pe=-.04219917149740248:pe=.018818493993207935;let Y;t[306]>1e-35?Y=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?Y=-.09091897542577475:Y=.04042943082645558:t[218]>1e-35?Y=.056254985867151:Y=-.053848117950183044:Y=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?Y=.021581808008986944:Y=-.05639286496176611:Y=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?Y=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?Y=.023885302967553288:Y=.1617794086125622:t[212]>1e-35?Y=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?Y=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?Y=.01894935813286188:Y=-.06449356357429188:Y=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?Y=-.034718828212885515:Y=.0898976288814321:t[1]>17.500000000000004?Y=-.15440137451988326:Y=-.03864183216821465:Y=.009988507307006308:Y=-.08540311947043305:t[50]>1e-35?Y=-.13323659732101975:t[134]>1e-35?Y=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?Y=.08082476177379844:Y=-.041665761903645876:t[179]>1e-35?Y=-.12405023987936657:t[39]>1e-35?Y=-.06247416524997478:t[138]>1e-35?Y=-.10724031753676487:Y=-.0005423122305122404;let G;t[308]>1e-35?G=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?G=.023223358334607133:G=-.04383410185346742:G=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?G=.023406489302867494:G=-.085521220804058:G=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?G=.028120059780969632:G=-.04211009474298743:t[294]>1e-35?G=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?G=-.0993035220737934:G=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?G=.029770210551187937:G=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?G=.06421359317599738:G=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?G=.024368404612215164:G=-.04045232374803373:t[131]>1e-35?G=.017372701982485795:t[120]>1e-35?G=.08812710275150198:t[18]>1e-35?t[90]>1e-35?G=.18451364351180236:t[7]>33.50000000000001?G=-.03850813130183531:t[195]>1e-35?G=.06966114053446336:t[3]>16.500000000000004?G=-.0012869181693341211:t[0]>4242.500000000001?G=-.054625548611291035:G=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?G=.006302103427145562:G=.13967622319898698:t[121]>1e-35?G=-.038798585213145644:t[5]>4544.500000000001?G=-.08050498033009466:G=-.002986974112681435;let H;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?H=-.03461119351456781:H=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?H=-.12404435523286539:H=-.0034376913880382956:H=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?H=.0037507103585310234:H=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?H=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?H=-.04832024079663151:t[37]>1e-35?H=-.037103393468366934:H=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?H=.032539071163832034:t[5]>1643.5000000000002?H=.036408625378035665:t[0]>1500.5000000000002?H=-.1346358322854993:H=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?H=-.1133991164577881:t[9]>52.50000000000001?H=-.024478640359723122:H=.03673777861098756:H=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?H=.002583438691776944:H=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?H=-.02141222346712401:H=.06392462314316179:t[4]>12.500000000000002?H=.08700122294434816:t[8]>267.50000000000006?H=.056923170082743224:H=-.07716309825583327:t[32]>1e-35?H=-.03961343943752142:H=.002674914122888783:t[1]>42.50000000000001?H=-.05217539654421676:t[145]>1e-35?H=.09553630282946368:H=-.009424791262477729;let ce;t[183]>1e-35?ce=-.05753337139158443:t[308]>1e-35?ce=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ce=-.10477869875380448:ce=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ce=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ce=-.04442302951713574:ce=.00012409888451734224:ce=-.092199119633697:t[225]>1e-35?ce=.13773072450201831:t[0]>2882.5000000000005?ce=.0028540012229920533:t[298]>1e-35?ce=.07134486044361629:ce=.014297412329837425:t[145]>1e-35?ce=.05608385321902638:t[92]>1e-35?ce=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ce=-.0039957800609801315:ce=.0776927564241081:t[203]>1e-35?ce=-.05502900859432093:t[105]>1e-35?ce=.06062892720841595:ce=-.009574839629252128:t[31]>1e-35?ce=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ce=.08818126313644752:t[8]>161.50000000000003?ce=.014353968957885408:ce=-.022240738532827903:t[210]>1e-35?ce=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ce=-.043902062079383485:ce=-.014741559220396223:ce=-.00934935734853194:t[6]>32.50000000000001?ce=.1514593126307404:ce=.010771222510801532:t[10]>22.500000000000004?ce=.01412495209334078:ce=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let Q;t[0]>384.50000000000006?t[84]>1e-35?Q=-.06088131453064195:t[147]>1e-35?Q=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?Q=.04219361472548491:Q=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?Q=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?Q=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?Q=-.11431764534511478:Q=.013549717238356157:Q=-.020987333767091276:t[6]>2.5000000000000004?Q=-.02914877855133127:Q=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?Q=-.10087072787978416:t[37]>1e-35?Q=-.030467397753331196:t[229]>1e-35?Q=-.1017559811057469:t[4]>20.500000000000004?Q=-.00413177742240167:t[20]>1e-35?Q=.05213315982685969:Q=.0037921635866823133:t[8]>51.50000000000001?Q=.07327913092421544:t[6]>49.50000000000001?Q=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?Q=.02744420891894289:Q=.11288946357194463:Q=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?Q=-.012329314369909049:Q=.026816658655600168:Q=-.0872405354618811:Q=.007872673500247845:t[1]>42.50000000000001?Q=-.04309044198258254:t[145]>1e-35?Q=.07572529147860785:t[7]>5.500000000000001?Q=-.013837187093264945:t[1]>17.500000000000004?Q=.04208698439539668:Q=-.06284346769019863;let z;t[294]>1e-35?z=-.0384794324818203:t[266]>1e-35?z=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?z=.07432960094940501:z=-.035248735855751855:t[134]>1e-35?z=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?z=-.01706896375068821:z=.08212247914968074:t[2]>59.50000000000001?z=-.09546478958824225:t[6]>53.50000000000001?z=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?z=.02816463285971267:z=.15449139016588445:z=-.10199787406123524:z=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?z=-.13924786681478077:z=-.0072772442570213335:t[39]>1e-35?z=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?z=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?z=-.11174465335620831:z=.00013144040097180107:z=-.08493919336681105:t[42]>1e-35?z=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?z=-.015540659878839153:z=-.14442609417300142:t[21]>1e-35?z=-.025251979447574083:z=.0023698372645272847:t[18]>1e-35?z=.07269739695712212:t[8]>2592.5000000000005?z=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?z=-.01835130329646532:t[9]>45.50000000000001?z=.02023047454629885:z=.16469378262221102:z=-.042975030085836426;let re;t[8]>2915.5000000000005?t[297]>1e-35?re=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?re=-.01034964686484714:re=-.07357437440667927:re=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?re=-.09476398869062203:t[9]>72.50000000000001?re=-.0757383854264379:re=.02806542779508718:re=-.05147742568418084:re=.10212721564444344:re=.0518263760642861:re=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?re=-.10669213185972036:re=.027050434286384796:t[302]>1e-35?re=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?re=.06354599160071946:t[1]>67.50000000000001?re=.05317447949011187:re=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?re=-.09369289448773599:t[0]>2215.5000000000005?re=.04077965380363924:t[0]>807.5000000000001?re=-.0591771776458298:re=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?re=-.016323380219241672:re=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?re=.03720704290087811:re=-.008730548158766654:t[4]>80.50000000000001?re=-.05346644687473197:re=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?re=.019984510398089086:re=-.03917825025861855:t[9]>170.50000000000003?re=-.09759719821334525:re=-.0023586682752856298;let fe;t[183]>1e-35?t[17]>1e-35?fe=.030100940443356424:t[10]>1.5000000000000002?fe=-.10861112216742408:fe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?fe=-.032062878390325456:fe=-.10808232631806887:t[8]>1641.5000000000002?fe=-.06147013392655731:t[4]>12.500000000000002?fe=.03324767551088266:t[145]>1e-35?fe=.028851633810612017:fe=-.054871239091792784:t[134]>1e-35?fe=-.023813968121342108:t[266]>1e-35?fe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?fe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?fe=-.025350325484720576:fe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?fe=.056817276537534815:fe=-.07674158463557636:fe=-.06335553143454145:t[1]>56.50000000000001?fe=.16390494217299284:fe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?fe=.041717597065890205:fe=-.10357913492269129:t[10]>29.500000000000004?fe=.1365512866715726:fe=.020600048310575665:fe=.09708785634773187:fe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?fe=-.03146213719547347:fe=.11784024316238083:fe=-.050940520532045355:fe=-.047988344143075616:t[191]>1e-35?fe=.028764654731460032:fe=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let me;t[8]>1014.5000000000001?t[9]>137.50000000000003?me=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?me=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?me=.07211107542565391:me=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?me=-.0751486415451188:t[1]>59.50000000000001?me=.13459005084554104:me=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?me=.06715575425741895:me=-.005895690393702183:t[8]>2915.5000000000005?me=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?me=-.00029068886245881074:me=.0613467393188786:t[148]>1e-35?me=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?me=.003887223773199377:me=-.08553893131979015:me=.025654192706396767:me=-.05651733979610658:me=-.02039913645229667:t[2]>7.500000000000001?me=-.1058450646728524:me=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?me=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?me=.1283258201586378:me=-.01718135372229775:me=-.07702452408491414:t[125]>1e-35?me=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?me=.04273051857848212:me=-.04533122948101463:t[2]>196.50000000000003?me=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?me=.0231032972703664:me=-.04807386814498683:me=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let ke;t[131]>1e-35?t[1]>93.50000000000001?ke=-.05706887458825395:t[2]>1.5000000000000002?ke=.011446637886629108:ke=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?ke=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?ke=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?ke=.026278724448495064:ke=.17053138400480508:t[0]>4463.500000000001?ke=-.06482289890096041:ke=.03026516489536295:ke=-.031785170717683144:ke=.1312690622980455:t[13]>1e-35?ke=.14336922540461444:ke=.03523850945454039:ke=-.015407465968975714:t[39]>1e-35?ke=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?ke=-.0659975068798723:ke=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?ke=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?ke=.057409156184759516:ke=.2024322059866388:ke=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?ke=.010648654146284154:t[308]>1e-35?ke=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?ke=.12364025998551711:ke=-.02247495081065243:t[1]>22.500000000000004?ke=-.0726295464624251:ke=.03481895086048152:t[0]>4331.500000000001?ke=-.04775443357020673:ke=.07172377425057568:t[2]>89.50000000000001?ke=-.11782645274716962:ke=.00010092665257989378;let tt;t[147]>1e-35?tt=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?tt=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?tt=-.016101990375700172:t[0]>2579.5000000000005?tt=-.13045089661551845:tt=-.02874367814784938:tt=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?tt=.17084176915326055:tt=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?tt=.10591712319944074:tt=-.024082167264285:tt=.16497698867036126:tt=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?tt=-.021012910475524206:tt=-.13058422554298485:t[0]>1102.5000000000002?tt=.10955864175201457:tt=-.03566689354348996:t[1]>11.500000000000002?tt=-.02093884208606101:tt=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?tt=-.013861861436128482:tt=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?tt=.10163873449625677:tt=-.02779270277623805:t[1]>26.500000000000004?tt=-.08035058228527389:tt=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?tt=-.007028075523033826:tt=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?tt=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?tt=-.0032075580718124892:tt=-.04442829143298883:tt=-.06597073245775804:tt=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ht;t[179]>1e-35?ht=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ht=-.07595415373151816:ht=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ht=.022822510448266862:ht=.17491569312933697:ht=-.058362287133533565:t[2]>2.5000000000000004?ht=-.03633895806364428:ht=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ht=-.07294848747514579:ht=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ht=-.07009535282685533:t[8]>2640.0000000000005?ht=-.051761240111316276:t[131]>1e-35?ht=-.06245774419231631:ht=.03495606662854905:ht=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ht=.0015036626973581122:ht=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ht=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ht=.022343994371919224:ht=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ht=.07724450228328664:t[0]>3853.5000000000005?ht=-.15671707454435677:t[10]>28.500000000000004?ht=-.10179090671841723:ht=.014878216919760927:ht=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ht=.14054154485273487:ht=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ht=-.08632985141410315:ht=.005524157938954954:ht=-.08802502622523681:ht=-.0004649168897260341;let St;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?St=-.007458687464321174:St=-.09444966249102484:t[1]>23.500000000000004?St=.08564129697360716:St=-.07105002902845851:St=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?St=-.10326216566705966:t[1]>26.500000000000004?St=.0050539832484585365:St=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?St=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?St=.05783632021087773:t[10]>17.500000000000004?St=-.06720598671764105:t[1]>47.50000000000001?St=.097495825172558:St=-.013372242800584872:St=-.06463226787713715:t[42]>1e-35?St=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?St=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?St=.11051270080118503:St=.027719462817590454:t[8]>597.5000000000001?St=-.08441503592016869:St=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?St=-.12190088985091102:St=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?St=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?St=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?St=.016585157185448045:St=-.11032043771149425:St=.01586986028570486:t[8]>388.50000000000006?St=-.10592413013261853:St=.04930703248769364:t[13]>1e-35?St=.003621937787920821:St=-.0013786331198611841;let xt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?xt=.009769895322846493:xt=-.10620052926943656:t[9]>19.500000000000004?xt=.03781202525403449:t[9]>14.500000000000002?xt=-.11485785321365344:t[9]>6.500000000000001?xt=.07677177833073881:t[0]>4342.500000000001?xt=-.07079285609687631:t[49]>1e-35?xt=.06156814809246001:xt=-.014788509042554625:xt=-.032659201618470655:t[5]>5207.500000000001?xt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?xt=-.03094160322187924:t[1]>29.500000000000004?xt=.09474646043921069:xt=.023445783928231618:xt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?xt=-.07164443768784848:t[1]>29.500000000000004?xt=.089473622509272:t[8]>597.5000000000001?xt=-.08155349903101317:xt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?xt=-.004003900679358653:t[190]>1e-35?xt=-.09236113461485262:t[8]>3198.5000000000005?xt=-.0124130160451179:xt=.018453070064009328:t[15]>1e-35?xt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?xt=-.0009580759587680961:xt=-.03227283036698222:xt=.01369287669536875:t[1]>50.50000000000001?xt=-.04213060332500437:t[35]>1e-35?xt=-.11508095777767471:t[190]>1e-35?xt=-.08611884672400155:t[297]>1e-35?xt=.05723551879433584:xt=-.004829340082311461;let Tt;t[183]>1e-35?Tt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?Tt=-.11753465135886734:Tt=-.007515490299047085:Tt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?Tt=-.12371142493530439:t[1]>36.50000000000001?Tt=.032189417575190435:Tt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?Tt=-.0784518658439288:t[2]>54.50000000000001?Tt=.12477882322370665:Tt=.000313468482399738:Tt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?Tt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?Tt=.0353146070135579:Tt=-.06327619611098285:Tt=.02813577701641991:Tt=-.12354390728506215:t[34]>1e-35?Tt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?Tt=-.01245803535276381:Tt=-.07169472553475001:t[1]>11.500000000000002?Tt=.12989984824561698:Tt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?Tt=.010390226893521422:t[10]>14.500000000000002?Tt=.16790888126487719:Tt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?Tt=-.043398307129729134:Tt=.09963544907820426:t[9]>30.500000000000004?Tt=-.13540713124984502:t[9]>17.500000000000004?Tt=.0509435850590757:Tt=-.04761897852404613:t[4]>78.50000000000001?Tt=.09197086656470652:Tt=.0006771050176682337;let le;t[122]>1e-35?t[6]>36.50000000000001?le=.05686884451670743:le=-.05334759543084309:t[266]>1e-35?le=-.08603579519816038:t[157]>1e-35?le=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?le=-.0499592651503952:t[0]>725.5000000000001?le=.11780353905132664:le=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?le=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?le=-.03190157229022304:le=.07985197845805492:le=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?le=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?le=-.027174047777029083:le=.057117284879796476:t[3]>43.50000000000001?le=-.0016147040913107311:le=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?le=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?le=-.01466076988151239:le=.13375695925484857:le=-.04885873081899647:t[0]>5566.500000000001?le=.11086813028591343:t[8]>992.5000000000001?le=-.07622304217072383:le=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?le=.03285858361708423:le=-.12354858211764992:le=.0672788301823281:t[15]>1e-35?le=.08658836986585006:le=-.02741484278509758:t[290]>1e-35?le=-.08161310335133287:t[135]>1e-35?le=-.04824156054814152:le=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let nt;t[189]>1e-35?t[0]>5269.500000000001?nt=-.103183298350443:t[2]>51.50000000000001?nt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?nt=-.05186168947388339:nt=.0496996365539082:t[10]>23.500000000000004?nt=.1404445738719:t[93]>1e-35?nt=.0027146310074558505:t[5]>3821.5000000000005?nt=.002153033152069652:t[4]>2.5000000000000004?nt=.007663539551317215:nt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?nt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?nt=-.021479467709980358:nt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?nt=.021660293256233334:nt=-.0927396152303864:nt=.0665074081601698:t[0]>1550.5000000000002?nt=.08972407105958534:nt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?nt=.06761927942466854:nt=-.015762168112653286:t[17]>1e-35?nt=.10311304131145381:nt=-.017672785252336027:nt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?nt=-.10638321435298535:nt=.0007073011744385905:t[18]>1e-35?nt=-.027056185501334325:t[145]>1e-35?nt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?nt=.09762140519655171:t[9]>110.50000000000001?nt=-.06581942957595835:t[6]>54.50000000000001?nt=.04959634035251596:nt=.0022616298654554207:nt=-.007437620924990854;let ee;t[179]>1e-35?ee=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?ee=.1470294450403005:ee=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?ee=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?ee=.07965955447707423:t[10]>10.500000000000002?ee=-.09236156404262426:ee=.03396273196231458:ee=-.13246465021467432:ee=.07092822261735353:ee=-.08753829085942:ee=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?ee=.004705878789890202:ee=.13775378964952867:ee=-.04770928980587811:t[10]>29.500000000000004?ee=.011221519891071544:t[0]>3853.5000000000005?ee=.06365381191628273:ee=.15506252245336827:t[1]>37.50000000000001?ee=-.07254777021042061:ee=.026514587757252385:t[308]>1e-35?ee=.04115804816617256:t[10]>26.500000000000004?ee=.02077721353011946:t[5]>3548.5000000000005?ee=-.1280907116663952:ee=-.021974774274438:t[306]>1e-35?ee=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?ee=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?ee=-.005710865560475598:t[94]>1e-35?ee=-.06751507982853555:ee=.027250040757588703:t[9]>52.50000000000001?ee=.07060357924595577:ee=-.030297760713011795:ee=-.0006005400085266517;let oe;t[113]>1e-35?oe=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?oe=-.06996356565314456:oe=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?oe=-.08317707559926495:t[21]>1e-35?oe=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?oe=-.010538203005984922:oe=.08454819465349446:t[9]>124.50000000000001?oe=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?oe=-.08542251249346582:t[9]>50.50000000000001?oe=-.023428882537657472:oe=.010042500833979073:oe=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?oe=.03006025206979096:t[9]>108.50000000000001?oe=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?oe=.04222035773042132:oe=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?oe=-.07209095448054853:oe=.028065954981903313:oe=.08714651929917122:oe=-.006678820669279169:t[10]>40.50000000000001?oe=.006982396294941626:oe=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?oe=-.09351114982645548:t[4]>3.5000000000000004?oe=-.004837550129223451:oe=-.08324141237464677:t[303]>1e-35?oe=.10703037493990825:t[9]>156.50000000000003?oe=-.10803018621648303:t[116]>1e-35?oe=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?oe=.10261721665006701:oe=.018994509090668264:oe=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let De;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?De=.08396556264106572:De=-.0562516995099192:De=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?De=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?De=.0052017514017035915:De=-.11194119432743639:De=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?De=-.025692451287403446:De=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?De=-.11892250746801664:t[10]>22.500000000000004?De=.07548493166973796:De=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?De=.13750699058082427:t[18]>1e-35?De=.06535408879552801:De=-.054118179035040674:De=.1344282838979622:t[0]>3982.5000000000005?De=-.10409582202467015:t[19]>1e-35?De=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?De=.012705935670766466:De=.14149359442527545:De=-.047977876173706004:t[20]>1e-35?De=.057945228080337946:t[0]>3642.5000000000005?De=-.008726535792122467:De=-.08424769891378858:t[34]>1e-35?De=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?De=.01196849566739346:De=.1614642278429876:De=-.043022338150701625:t[3]>5.500000000000001?De=-.03907848255033881:De=.018280601026175593:De=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let Ye;t[120]>1e-35?Ye=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Ye=-.042799574885345304:Ye=.07412430171193245:Ye=-.11248270469336048:t[193]>1e-35?Ye=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?Ye=.028911612178122104:Ye=.12326369727728437:t[0]>4091.5000000000005?Ye=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ye=.1159839898100149:Ye=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?Ye=-.0216343737351583:Ye=-.1220272260878369:t[2]>18.500000000000004?Ye=.09152924475072398:t[8]>55.50000000000001?Ye=.039508716651005665:Ye=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?Ye=.06793009902674053:Ye=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?Ye=-.04391068849624096:Ye=.04009967593394672:t[8]>1085.5000000000002?Ye=-.024773826356034825:Ye=-.13919707884246582:Ye=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?Ye=-.11567917501901476:Ye=-.006813640337684114:t[3]>7.500000000000001?Ye=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?Ye=-.001754586408351048:Ye=-.055422422450722056:Ye=-.06090032532532226:t[0]>5269.500000000001?Ye=.11787981735983527:Ye=-.00198119768540783:Ye=.00210412924303036;let st;t[294]>1e-35?t[10]>50.50000000000001?st=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?st=-.06063239096209816:st=.03317022411417386:st=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?st=-.013608609329298802:st=.09078000157330264:t[99]>1e-35?st=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?st=-.07536137260189814:st=.006253266595455118:t[10]>28.500000000000004?st=-.006106041147592768:t[9]>156.50000000000003?st=-.11828932797811101:t[94]>1e-35?st=-.02566078479505714:t[303]>1e-35?st=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?st=-.08401252789168523:t[5]>4244.500000000001?st=.026372887658499107:t[1]>16.500000000000004?st=-.027836756345634026:st=.09205362097909099:st=.00934612788718244:t[203]>1e-35?st=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?st=-.09580979052540028:t[1]>50.50000000000001?st=-.06402211827281554:st=.08342858760095972:t[2]>36.50000000000001?st=.008114897658204584:t[92]>1e-35?st=.09541587072672864:st=-.022342147210555434:st=-.01660492519175128:st=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?st=.15846731118501817:st=.039498507912023195:t[245]>1e-35?st=.07008718676813333:st=.0019806389728814727;let yt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?yt=-.01192072916082109:yt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?yt=.06874032717466054:t[4]>40.50000000000001?yt=-.07752510020707537:t[1]>76.50000000000001?yt=-.09944032260703917:t[8]>1381.5000000000002?yt=-.054466635810800745:t[1]>32.50000000000001?yt=.05974084520839573:yt=-.0384718740755954:yt=-.11374190719134032:t[0]>2151.5000000000005?yt=-.13703645155803298:yt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?yt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?yt=.013539805885738608:yt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?yt=.09941880179344399:yt=-.01608127391210995:yt=.08025226531247417:t[9]>67.50000000000001?yt=.13525448212444113:t[6]>61.50000000000001?yt=-.05511099182158894:t[94]>1e-35?yt=-.06821509831783572:t[128]>1e-35?yt=.11361314817714643:yt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?yt=-.09954181329804547:t[197]>1e-35?yt=.10102833149755386:t[188]>1e-35?yt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?yt=-.03781554214742005:yt=.09927933385592314:yt=-.020006000056720083:yt=-.10520473615957895:yt=-.12006990846253787:yt=-.00026111570975317574;let qt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?qt=-.019188245509744628:qt=-.13354864350075848:t[0]>2461.5000000000005?qt=.051885477468354396:qt=-.0833581968852119:qt=.08233441701532287:qt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?qt=.09926337893072812:qt=-.027753610497327715:t[0]>1972.5000000000002?qt=-.09780045823152517:qt=.032380915168504935:qt=.11502632261226381:t[17]>1e-35?qt=-.06094965899579662:t[10]>40.50000000000001?qt=-.07500475582440802:qt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?qt=-.09584538995220808:qt=-.00908705814304442:qt=.03203281520813893:t[10]>49.50000000000001?qt=-.03146271513986384:t[2]>63.50000000000001?qt=.13172001315536286:t[224]>1e-35?qt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?qt=.09521549382082259:qt=-.04414925613522197:t[0]>1847.5000000000002?qt=-.09118580379557353:qt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?qt=.03525144509943896:qt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?qt=-.04766112322938157:t[2]>10.500000000000002?qt=.0728516504357201:qt=-.05049625965272536:qt=-.10868663055825774:qt=.0005382613419948969;let dr;t[147]>1e-35?t[1]>53.50000000000001?dr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?dr=-.030504020655417463:dr=.07102458639110094:dr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?dr=.055304563442710876:t[1]>53.50000000000001?dr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?dr=-.1568835288372895:dr=-.0279829124400056:dr=.04493843959601833:dr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?dr=-.054133834303687026:t[9]>48.50000000000001?dr=.11263810289007213:t[9]>9.500000000000002?dr=-.02202034562838259:t[4]>45.50000000000001?dr=-.03410927569045158:dr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?dr=-.029687297407295893:dr=.10673602850001934:t[4]>42.50000000000001?dr=.0036275562945108117:dr=-.0760789221330622:dr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?dr=.08274426793676076:dr=-.07076234425516396:dr=.13890177606150175:dr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?dr=-.09250637750836187:dr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?dr=-.01897867921812603:dr=.04890781705365262:dr=-.11569892307597907:t[2]>106.50000000000001?dr=.09032697440623969:dr=.00047935919155035045;let Ft;t[115]>1e-35?Ft=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ft=-.10131179514695865:t[8]>938.5000000000001?Ft=.10203729808015481:Ft=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ft=.03574015165562999:Ft=-.07763042506449493:Ft=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ft=.0665706259130275:Ft=-.06586817559309924:Ft=.11925564412287476:Ft=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ft=.046017146627455346:Ft=-.08623321630086885:t[8]>1765.5000000000002?Ft=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ft=.11143827902215087:Ft=-.01817808730473413:Ft=.16980985030210127:Ft=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ft=.010168994879727824:Ft=-.09099594488792513:t[9]>1.5000000000000002?Ft=.0533459678147928:Ft=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ft=-.062346959148773695:t[1]>47.50000000000001?Ft=-.0021578343835599316:t[2]>27.500000000000004?Ft=.19567373210166172:Ft=.07851555379116423:t[18]>1e-35?Ft=.03711549097804649:t[8]>359.50000000000006?Ft=.012492346746905587:t[4]>20.500000000000004?Ft=.047511695735697544:Ft=-.07999269063948773:Ft=6802045404471004e-20;let Yr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Yr=.0011484728213539738:Yr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Yr=-.09828874964938798:t[8]>1586.5000000000002?Yr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Yr=.011938269926919522:Yr=.17541983715953954:t[19]>1e-35?Yr=.023002786011088672:Yr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Yr=.06508934844183291:Yr=-.10168553534835639:Yr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Yr=.021140806225203937:Yr=-.1167833342453639:t[2]>33.50000000000001?Yr=.13163585734056618:Yr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Yr=.06314479201263888:Yr=-.09639088327091713:t[10]>29.500000000000004?Yr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Yr=40577156464836036e-21:Yr=.12322387121810757:Yr=-.03697224045046014:t[1]>22.500000000000004?Yr=.016474835887320276:Yr=.16919298733903063:Yr=.07633203630214054:Yr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Yr=.14150493354700563:Yr=-.01831155354975749:t[1]>28.500000000000004?Yr=-.07952557178685365:t[10]>28.500000000000004?Yr=.0665695554984927:Yr=-.053640139319277094:Yr=.0004754840665898665;let en;t[76]>1e-35?en=-.06814884255939921:t[179]>1e-35?en=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?en=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?en=.004193658608848433:en=-.1066968975983452:t[8]>302.50000000000006?en=.05476730110440451:en=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?en=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?en=.013555772109446666:en=-.09856116699770784:en=.0284329611813383:t[2]>52.50000000000001?en=.04008708444763762:t[9]>29.500000000000004?en=-.1289599546008197:en=-.018566534248335896:t[8]>747.5000000000001?en=.02236484980076122:en=.1148871655157582:t[8]>3084.0000000000005?en=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?en=.03164751204281298:en=.11752140436184891:t[9]>42.50000000000001?en=-.07180559595410106:t[22]>1e-35?en=.09325040416256854:en=-.016041122807939914:en=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?en=-.010718250133458515:en=.09818827994853763:en=.010180038981174032:en=-.039472162599295535:t[9]>170.50000000000003?en=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?en=-.08674788057474031:en=.02077653508548371:en=-.0003536561382007414;let yn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?yn=.018337297491457794:yn=-.05926206443180149:yn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?yn=.10747078482128616:t[126]>1e-35?yn=-.10550625192391357:t[7]>71.50000000000001?yn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?yn=.1317396472229434:yn=-.025035791351328947:yn=-.0728334305864372:t[8]>963.5000000000001?yn=.023642201723096064:yn=.183010326734258:t[128]>1e-35?yn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?yn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?yn=-.1088876900335281:yn=.02758317023002635:yn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?yn=-.01928020117446408:yn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?yn=.07893723375925096:yn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?yn=-.10301657587280551:yn=.005787463140224318:yn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?yn=-.019296977889522397:yn=-.07274529751752634:t[1]>30.500000000000004?yn=-.050368901143148286:yn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?yn=.0015332402792773946:yn=.09930153676749967:yn=-.06370844564357069:yn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Et;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Et=-.10504730480402079:t[5]>3341.5000000000005?Et=.11087894671081754:Et=-.0406668834674614:Et=.03308382165616109:t[8]>104.50000000000001?Et=-.10431436764549162:Et=.0073928337244891455:t[4]>34.50000000000001?Et=-.10571751512748416:Et=-.006081128814142983:t[13]>1e-35?Et=.1299673566095023:t[4]>60.50000000000001?Et=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Et=.04857126072645073:Et=-.03431365358104773:t[4]>16.500000000000004?Et=.04101865986596709:Et=.16480274980378218:t[10]>26.500000000000004?Et=.03673978504199255:t[10]>9.500000000000002?Et=-.10996402743800027:t[308]>1e-35?Et=.0553693735082498:Et=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Et=.010902983761213922:Et=.1325118659895645:Et=-.064362945508595:t[1]>66.50000000000001?Et=.033416767779331176:Et=-.054080316225040496:t[42]>1e-35?Et=-.07762364337810815:t[10]>1089.5000000000002?Et=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Et=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Et=.0220102041325908:Et=-.06516708740003069:Et=.012833498905748267:t[224]>1e-35?Et=-.007038418272997865:Et=.00037666304316290967;let Zt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Zt=.07554189644995735:Zt=-.052089349455904946:Zt=-.10148206848169845:t[113]>1e-35?Zt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Zt=.07172653627995676:Zt=-.07602959317610998:Zt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Zt=-.0399322883690891:Zt=.06523495517476098:Zt=-.10358715295743802:t[193]>1e-35?Zt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Zt=.015928764772252406:Zt=.1341513061552287:Zt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Zt=-.033592997607280156:Zt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Zt=-.08402551858097379:Zt=.017401984506038796:t[1]>25.500000000000004?Zt=.13337205393591278:Zt=-.01160208350090984:Zt=.06708317942315471:t[8]>227.50000000000003?Zt=-.08486943882418681:Zt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Zt=-.10496268177586783:Zt=-.020921489532370493:Zt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Zt=.11639296062157028:Zt=-.004275784356569115:t[32]>1e-35?Zt=-.07297384970166025:Zt=.006026841626381599:Zt=.002034611134960428;let Vt;t[248]>1e-35?Vt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Vt=-.06455513326540585:t[1]>29.500000000000004?Vt=.07718474591552532:t[4]>7.500000000000001?Vt=.040139336931404826:Vt=-.09685734690563386:Vt=.00015327283570347363:t[9]>88.50000000000001?Vt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Vt=-.04077257804338707:Vt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Vt=.03778141591008941:Vt=-.06459919920634845:Vt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Vt=.14063930759326346:t[0]>179.50000000000003?Vt=.07287482250668585:t[8]>1180.5000000000002?Vt=-.14419393112726253:t[10]>28.500000000000004?Vt=-.07993142770099469:t[17]>1e-35?Vt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Vt=.05527969663610186:Vt=-.10824385941441346:t[3]>11.500000000000002?Vt=.12358502961047915:Vt=-.017509147119622873:t[0]>74.50000000000001?Vt=-.014907705458730486:t[8]>95.50000000000001?Vt=-.02225118168342062:Vt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Vt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Vt=.04962819555610421:Vt=-.07213577821855309:Vt=.09139529824708481:t[19]>1e-35?Vt=.013439401088345224:Vt=-.049274647207292056:Vt=.10531673719686951;let vr;t[40]>1e-35?t[0]>1937.5000000000002?vr=-.06421671152073961:vr=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?vr=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?vr=-.03520420769287065:t[8]>1085.5000000000002?vr=-.019817352506127633:vr=.11444439424520964:vr=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?vr=-.010490117519863269:vr=.08104430117757461:t[121]>1e-35?t[243]>1e-35?vr=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?vr=.06619344145920268:t[0]>4091.5000000000005?vr=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?vr=.10016091391222309:vr=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?vr=-.019511460451434884:vr=-.11643672465055221:t[2]>18.500000000000004?vr=.07848228087333317:t[8]>55.50000000000001?vr=.032583027899956235:vr=-.11209832692153521:t[11]>1e-35?vr=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?vr=-.09996887746328006:t[9]>2.5000000000000004?vr=.02157682011863397:vr=-.05247727848991843:vr=.07409150201483244:t[1]>38.50000000000001?vr=-.11378466075449625:t[224]>1e-35?vr=-.10741749127732923:t[1]>26.500000000000004?vr=.07343136534146562:vr=-.07013573628594773:t[25]>1e-35?vr=-.04626669734164317:vr=.05518333197956482:vr=.00032434010867555516;let Ir;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?Ir=.026313251010808853:Ir=-.08997339150292381:Ir=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?Ir=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?Ir=.0905155504503746:t[8]>1049.5000000000002?Ir=-.062312558183394054:t[8]>719.5000000000001?Ir=.09583836191410239:t[0]>3719.5000000000005?Ir=-.0778097309430818:Ir=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?Ir=-.12920865648544927:t[0]>2699.5000000000005?Ir=-.07086587879041864:Ir=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?Ir=-.11377786322600797:Ir=-.009486325820117998:t[1]>55.50000000000001?Ir=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?Ir=-.07938291201004219:t[2]>36.50000000000001?Ir=.01520046732530246:Ir=.13649854049662832:Ir=-.07145015938528873:t[8]>407.50000000000006?Ir=-.00350257360822279:Ir=.11332047082193297:Ir=-.10060624458629897:Ir=.05429496612497562:t[8]>1446.5000000000002?Ir=.006073419197482838:Ir=-.08718676350883998:Ir=-.11532497988252638:Ir=.10766270463068293:t[34]>1e-35?Ir=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?Ir=-.0004109812623829506:Ir=.021601073497455662:Ir=-7343540098965853e-20;let zt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?zt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?zt=.05995640200798119:t[0]>3443.5000000000005?zt=-.14698883458733583:zt=-.030039164579240187:t[189]>1e-35?zt=-.06086763220538141:t[1]>86.50000000000001?zt=-.05096727866142538:t[4]>64.50000000000001?zt=.11240554253834577:t[4]>45.50000000000001?zt=-.030279760168394117:t[6]>45.50000000000001?zt=.10161088917815142:t[10]>77.50000000000001?zt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?zt=-.06672020005240323:zt=.08831457502630258:t[8]>2592.5000000000005?zt=-.052617701047376654:t[10]>29.500000000000004?zt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?zt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?zt=-.064099222705728:zt=.044332487521538365:t[0]>2882.5000000000005?zt=.031099546885005065:zt=.12938467051623853:t[0]>4221.500000000001?zt=-.0928676413498701:t[9]>30.500000000000004?zt=-.05781824812803708:zt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?zt=-.06648105454098469:zt=.05985487552383097:zt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?zt=.05282385499619401:t[1]>66.50000000000001?zt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?zt=.027885690791379255:zt=-.08407126408362446:zt=.014432924125571093:zt=-9903435845205118e-20;let ir;t[76]>1e-35?ir=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?ir=.013633653464240465:ir=-.10164319411983509:ir=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?ir=.00632864847804078:ir=-.08393000368134668:ir=.07870508617440916:t[284]>1e-35?ir=.1092302727710421:ir=-.0025505047582483234:t[248]>1e-35?ir=.07101822393621864:t[274]>1e-35?ir=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?ir=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?ir=.025081789181021243:ir=-.014813325803582618:t[9]>33.50000000000001?ir=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?ir=.11926990418060353:ir=.01852125513565268:ir=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?ir=-.1178464984373743:t[283]>1e-35?ir=.043370859226927405:t[5]>4320.500000000001?ir=-.01103141226366587:t[8]>1104.5000000000002?ir=-.023053423988095886:ir=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?ir=.000579145585864887:ir=.03389152834202143:t[128]>1e-35?ir=-.14527722052568462:t[210]>1e-35?ir=-.08915971541902741:t[7]>9.500000000000002?ir=-.03307314577076116:t[18]>1e-35?ir=-.05521712302023565:ir=.009315605032770029:ir=.0036332551852289933;let Xt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Xt=-.07583539600416284:t[188]>1e-35?Xt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Xt=-.011038193049597113:Xt=.08154028164397753:t[1]>85.50000000000001?Xt=.10259361975201933:Xt=.011640408330521594:Xt=-.00023319159023748508:t[92]>1e-35?Xt=.13771692859530546:Xt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Xt=.09967230141007705:t[30]>1e-35?Xt=-.08888529037551285:Xt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Xt=.08284665960761373:Xt=-.029292565021289504:t[7]>7.500000000000001?Xt=-.09945093355204493:Xt=-.008381393701708593:t[20]>1e-35?Xt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Xt=.07585582641438211:t[8]>284.50000000000006?Xt=-.029387993239886723:Xt=.07716738177321587:t[1]>18.500000000000004?Xt=.026745348497993746:Xt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Xt=.02337306890530338:Xt=-.10390355904767366:Xt=.07390521199638532:Xt=-.06788247515155237:Xt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Xt=-.06360325615644084:Xt=.04342192339836601:Xt=-.10598779152030145:Xt=.05253384605768211;let Sr;t[3]>7.500000000000001?t[157]>1e-35?Sr=-.07514182877923786:Sr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Sr=.028692053800951845:Sr=.14081686716133598:Sr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Sr=.0037139292567243084:Sr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Sr=.01202688580305612:Sr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Sr=.043935495082738626:Sr=-.05639305759669704:t[247]>1e-35?Sr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Sr=.10331836202616368:Sr=.0006926658459781341:t[96]>1e-35?Sr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Sr=-.0741403257305367:Sr=.022900127535540854:t[7]>3.5000000000000004?Sr=.038110741403836294:Sr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Sr=-.09552842289807008:t[1]>27.500000000000004?Sr=.012505935885798007:Sr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Sr=-.1046104767723845:Sr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Sr=.023466328488582572:Sr=.11730925774586994:Sr=-.04771965631104874:Sr=.17059689880751394:Sr=-.08181850955999449:t[26]>1e-35?Sr=-.12727482696678769:Sr=-.014343123272734182;let qr;t[147]>1e-35?t[1]>53.50000000000001?qr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?qr=-.02763546051134888:qr=.06423344777499343:qr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?qr=.049825139823021586:t[7]>22.500000000000004?qr=-.01131680751379858:t[0]>2579.5000000000005?qr=-.10673674485369694:qr=-.015387212937189957:qr=.04347325151148724:t[179]>1e-35?qr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?qr=.0650355590939066:qr=-.0473332870892226:qr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?qr=.11139543329789044:t[126]>1e-35?qr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?qr=.06370903833231022:t[10]>29.500000000000004?qr=.03415223859607161:t[10]>3.5000000000000004?qr=-.07415518117873297:qr=-.0014119203473324082:qr=.12617652343819508:t[9]>41.50000000000001?qr=-.10311145857176976:t[8]>2757.5000000000005?qr=-.08106484219011428:t[7]>71.50000000000001?qr=-.09783384432091176:t[1]>88.50000000000001?qr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?qr=-.008884084501608536:qr=.061339437777743616:qr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?qr=.01526664064166223:qr=.13534828515415498:qr=-.06985484465894776:qr=.0005758961943178744;let tn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?tn=-.029152732370514342:tn=.07173628916139178:t[1]>36.50000000000001?tn=-.08859111297255318:tn=.0018030071815630785:tn=.13652461563759322:tn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?tn=-.07145140450454163:t[21]>1e-35?tn=-.07422841663493233:tn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?tn=.11864240653986852:t[3]>33.50000000000001?tn=-.08821209591953476:tn=.05706392280054726:tn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?tn=.01953613016837112:tn=-.059781039130025006:t[148]>1e-35?tn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?tn=.07207826841738371:t[202]>1e-35?tn=.08163917539410503:tn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?tn=-.06858280496900336:tn=-.1781828899516648:tn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?tn=.018232649414147116:tn=-.04419781124222661:tn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?tn=.11452368095776105:tn=-.036496437259924026:tn=-.040445338739465486:tn=.0816572651001145:tn=-.08968914517368663:tn=.0002826343082585516;let zn;t[189]>1e-35?t[0]>5269.500000000001?zn=-.08839493050459957:t[10]>85.50000000000001?zn=.10046908365702462:t[8]>2592.5000000000005?zn=-.09632233975926387:t[8]>2000.5000000000002?zn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?zn=.035504970430426296:t[1]>31.500000000000004?zn=-.1133764813142531:zn=-.01138280942244812:t[8]>1125.5000000000002?zn=.09800530246229806:zn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?zn=.07316772160107896:zn=-.059095014819051765:zn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?zn=-.09150209066166894:t[8]>3084.0000000000005?zn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?zn=-.04449234460408263:zn=.05568837973347338:zn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?zn=.12741077850267066:zn=.007372371864985329:t[2]>39.50000000000001?zn=.02295917234617787:zn=.14966532083907075:t[1]>39.50000000000001?zn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?zn=-.02511861881285652:t[1]>27.500000000000004?zn=.08683660011672288:zn=.02956214835267301:t[9]>15.500000000000002?zn=-.016538805462996232:zn=.04352738094981517:zn=-.05561856645643868:t[9]>170.50000000000003?zn=-.07996752635874248:t[179]>1e-35?zn=-.09065975936933919:zn=-.00042817975060427177;let ai;t[39]>1e-35?t[4]>25.500000000000004?ai=.03443173196222934:ai=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?ai=-.0013415395759330318:ai=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?ai=.002297618040307216:ai=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?ai=-.015297257305397608:ai=.09651828834062742:ai=-.06636003334371929:t[10]>11.500000000000002?ai=.17631616138309397:t[0]>1639.5000000000002?ai=3804386478092585e-20:ai=-.09099296398683193:ai=-.06874415876172972:t[0]>2151.5000000000005?ai=-.1311264883406766:ai=.00809052010141122:t[253]>1e-35?ai=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?ai=.045038497754638605:ai=-.07770167665661752:ai=-.08596294280650517:ai=.08538655727027213:ai=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?ai=.054627956617973275:t[1]>61.50000000000001?ai=-.11994465088415499:t[4]>8.500000000000002?ai=.06676200239406452:ai=-.027503148069376867:t[8]>676.5000000000001?ai=-.10363964928357075:t[4]>8.500000000000002?ai=-.07589816227175682:ai=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?ai=.009093153189012338:ai=-.06119765876605404:ai=.0004668642103528348;let Hn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Hn=-.10100794502567233:Hn=.08000205636470442:Hn=-.11945419826856896:t[113]>1e-35?Hn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Hn=.1224302423880318:Hn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Hn=.0019277012166729114:t[1]>28.500000000000004?Hn=-.054445821715687494:Hn=.045645722976713245:t[30]>1e-35?Hn=.13402660155331655:Hn=.008921176001777645:Hn=-.058547426505451076:Hn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Hn=-.13526418192218206:Hn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Hn=.0007263224246135398:Hn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Hn=-.11575657261278308:Hn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Hn=-.01995960178292952:Hn=.11216586049153021:Hn=-.10050961087149474:Hn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hn=.10303451081526649:Hn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Hn=-.043799548968209395:Hn=-.12451444314954115:t[4]>12.500000000000002?Hn=-.03838117361958468:Hn=.06504990789767144:t[57]>1e-35?Hn=.06890006938293915:Hn=.0003914274695562949;let ri;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ri=.004271749009686975:ri=-.10523878297127605:ri=.04633982158107851:ri=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ri=-.08655730561951676:t[8]>919.5000000000001?ri=-.0676453705610183:t[7]>18.500000000000004?ri=-.027787974193650575:ri=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ri=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ri=-.03473877164537313:t[8]>719.5000000000001?ri=.10471053866934404:ri=.008236107678382981:t[4]>57.50000000000001?ri=.09412219478825269:t[10]>66.50000000000001?ri=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ri=-.040681323751002293:ri=.06374650297561021:ri=.12884615227401788:t[10]>5.500000000000001?ri=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ri=-.05474068967150784:ri=.03744700650806603:ri=-.07846396348680855:t[1]>42.50000000000001?ri=.018972315810821302:ri=.10953621007604744:t[5]>4439.500000000001?ri=.010999776705494586:t[1]>40.50000000000001?ri=-.12394200059775967:t[10]>2.5000000000000004?ri=.013528093962849453:ri=-.09222088417048682:ri=-.12662967149701485:ri=.09327296405849603:t[3]>99.50000000000001?ri=-.013581954439986752:ri=.0005526498251862075;let ln;t[187]>1e-35?t[243]>1e-35?ln=-.08392792551692502:t[10]>68.50000000000001?ln=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?ln=-.0825306209711224:ln=.049559996084532945:ln=-.1064938580886302:ln=.03353240732240275:ln=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?ln=.16966001471529374:t[1]>57.50000000000001?ln=-.005772777673676247:ln=.09383677041525058:t[8]>747.5000000000001?ln=.054068175469351235:ln=-.049968216310277036:t[8]>753.5000000000001?ln=-.0679383555784074:t[4]>8.500000000000002?ln=-.059757341189735386:ln=.05701083682780414:ln=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?ln=.05820296128730006:ln=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?ln=.15340611616954566:ln=.04385036188666874:t[0]>4449.500000000001?ln=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?ln=.004840354641006495:ln=.09967827580276283:ln=.11605363537391578:t[9]>19.500000000000004?ln=-.0735831692725717:ln=.019973331823355176:t[306]>1e-35?t[149]>1e-35?ln=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?ln=-.02442182361342386:ln=.10334853004243093:ln=-.030431948680167104:ln=-956078595250818e-19;let ni;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?ni=-.040232505718244854:t[0]>3030.5000000000005?ni=.0634109586813073:ni=-.04043617034245621:ni=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?ni=-.007859096946435131:ni=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?ni=.05515771679628051:ni=-.04214471312668263:ni=-.09589322222261765:t[193]>1e-35?ni=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?ni=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?ni=-.08152604001147906:t[11]>1e-35?ni=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?ni=.13100930780107503:t[10]>25.500000000000004?ni=.05921074710011526:ni=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?ni=.0009447118243153454:ni=-.09820565036865991:ni=.057146909749745546:t[0]>2115.5000000000005?ni=-.12331216726611678:ni=.007281983677694285:t[2]>56.50000000000001?ni=.012310154675612615:ni=-.08873665774670461:t[6]>25.500000000000004?ni=.134708740821879:t[9]>5.500000000000001?ni=-.0805901581148979:t[224]>1e-35?ni=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?ni=.10842593386554122:t[2]>13.500000000000002?ni=.06466798320378395:ni=-.08578130788886655:ni=-.03590892078300114:ni=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let W;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?W=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?W=.020637047900190317:W=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?W=-.04632587527094407:W=.08603684785510396:W=-.05101401015448496:W=.025466432054358498:W=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?W=.020385355430046367:W=.12032592051335252:W=-.012387370292173013:t[2]>23.500000000000004?W=-.12568545484492677:W=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?W=.043528764484784536:W=.14352071657196003:W=-.009332833816977268:W=.11186782227735846:W=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?W=-.05649104643152564:W=.03884200719305747:t[42]>1e-35?W=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?W=-.04103416502526736:W=.04881823954656287:t[4]>15.500000000000002?W=.009342724662897898:t[0]>3969.5000000000005?W=-.025637309961309498:W=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?W=-.08185697075265091:t[0]>2215.5000000000005?W=.030063975892297354:t[0]>807.5000000000001?W=-.03924325550733229:W=.0415330999189793:W=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let te;t[7]>17.500000000000004?t[115]>1e-35?te=.08741852531696623:t[167]>1e-35?te=.10078975495600809:te=-.0018324767784017562:t[290]>1e-35?te=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?te=.1379733311640402:te=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?te=-.09360083033774169:te=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?te=-.015599362579530679:t[0]>4593.500000000001?te=-.12029549262691491:te=-.018917032256501397:te=.04632831686576592:te=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?te=-.05894883236412263:te=.05213944998315824:te=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?te=.07577412405680808:te=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?te=-.0277076900736147:t[1]>65.50000000000001?te=-.023587471585763506:te=.10184896592433082:te=-.057699270527916825:te=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?te=.06566902102799584:t[10]>25.500000000000004?te=-.07033633753181047:te=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?te=-.08108035861059537:te=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?te=-.12431182772561139:te=.01886235886984271:te=.0025579594894418116;let O;t[8]>2915.5000000000005?t[101]>1e-35?O=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?O=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?O=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?O=.0687641681341721:t[10]>102.50000000000001?O=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?O=-.06762578396473291:t[10]>65.50000000000001?O=-.05226727783610509:t[282]>1e-35?O=.09911438410640917:t[19]>1e-35?O=.06915156336429933:O=-.006565637886508241:O=-.08344300251849307:O=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?O=.19428463865406298:O=.016073883020956765:t[13]>1e-35?O=.06864077097923665:O=-.01388867527034731:t[0]>1847.5000000000002?O=.004655280608161356:t[1]>40.50000000000001?O=.031406054057765996:O=.12798062439212832:O=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?O=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?O=-.0706095614785733:O=.04227164041372561:O=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?O=-.07139533369873902:O=.008952586782921625:O=.06086212582180936:O=-.0816938490403437:O=-.051224901945956025:O=-.10525399124186095:O=.000270924147208224;let Re;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Re=.029186512383291244:t[7]>1.5000000000000002?Re=-.14984127276725573:t[1]>40.50000000000001?Re=.032757060730648144:Re=-.07675575422749602:t[6]>8.500000000000002?Re=.10599766037117893:Re=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Re=-.051394622947855385:Re=.03237141302699347:Re=.12526173027943244:Re=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Re=-.07383912482657777:t[0]>5147.500000000001?Re=.07008813937042091:t[10]>38.50000000000001?Re=-.06779203808365307:Re=-.013782769999524498:Re=.0880038869117715:Re=-.12846294176070952:t[281]>1e-35?Re=-.06810806903850834:t[10]>227.50000000000003?Re=-.08937977001661111:t[10]>130.50000000000003?Re=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Re=.011036530162093841:Re=-.11500797478569702:Re=.03702229366129399:Re=.07242026683784307:t[189]>1e-35?Re=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Re=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Re=-.02608892716555304:Re=.09609599320761308:t[9]>105.50000000000001?Re=-.06848127135991534:Re=.0023675721254089715:t[86]>1e-35?Re=-.11049635625500497:Re=-.004847764219432233;let ze;t[125]>1e-35?t[0]>3969.5000000000005?ze=-.09462233499115416:ze=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ze=-.030700661288166148:ze=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ze=.03149547314036763:ze=-.08166208257451366:t[0]>5850.500000000001?ze=-.10228136324773157:t[102]>1e-35?ze=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ze=.01782894842128785:t[13]>1e-35?ze=.002680190260979968:ze=.1773965720476949:t[2]>72.50000000000001?ze=.09090831938627947:t[1]>59.50000000000001?ze=-.12297206702816128:t[0]>4977.500000000001?ze=.09899015653118268:ze=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ze=-.0675900954187773:ze=.012336403425364092:ze=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ze=-.02671721777458802:ze=-.09242452991958029:t[284]>1e-35?ze=-.08585691288582491:ze=.013332890564324447:t[4]>14.500000000000002?ze=-.005245022074799553:t[23]>1e-35?ze=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ze=-.09289852307936758:t[116]>1e-35?ze=-.09686573010015055:t[8]>804.5000000000001?ze=.03812547148215318:ze=.005162744968176633:t[9]>43.50000000000001?ze=-.059246106396159376:ze=.050370113808135275:ze=.000794041852811028;let Gt;t[3]>7.500000000000001?Gt=.0004981426543104341:t[9]>114.50000000000001?Gt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Gt=-.019061766497948867:Gt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Gt=-.006044199577160493:Gt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Gt=.11486607015912494:t[9]>16.500000000000004?Gt=-.08686820858087294:Gt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Gt=-.022230207980026437:Gt=.1056683690528792:Gt=-.05859530800943035:Gt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Gt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Gt=-.05177544573528314:Gt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Gt=.15159657923771555:Gt=-.0060542654587671055:t[9]>5.500000000000001?Gt=-.042808028205051786:t[1]>48.50000000000001?Gt=-.010449538258110742:Gt=.10026907521968294:Gt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Gt=-.02272452389409874:Gt=-.11202691218244319:t[5]>1809.5000000000002?Gt=-.04460413584255906:Gt=.08196329474205256:t[10]>69.50000000000001?Gt=.10221481166238167:Gt=.0004063052701699382:t[243]>1e-35?Gt=-.07563941678849846:t[18]>1e-35?Gt=.02563513231103432:Gt=-.004740081147303786;let Pr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pr=.057446442918106:Pr=-.04404018270156349:Pr=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Pr=-.05930486238817954:t[1]>29.500000000000004?Pr=.06955866121256543:t[8]>597.5000000000001?Pr=-.06538593556505168:Pr=.06212512595497445:Pr=.00021102929959182257:t[9]>90.50000000000001?Pr=.0958061289119631:t[102]>1e-35?Pr=.07172059675638813:t[1]>47.50000000000001?Pr=-.03879798603977766:t[297]>1e-35?Pr=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Pr=.003805910996312012:Pr=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Pr=.11252376801858695:t[288]>1e-35?Pr=-.10293901912180432:Pr=.014669268837893872:t[1]>42.50000000000001?Pr=-.05988274123836837:t[145]>1e-35?Pr=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Pr=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Pr=-.03366718308159971:Pr=.11936550608549797:t[1]>31.500000000000004?Pr=-.07454716789539667:Pr=.027859650621164217:t[10]>10.500000000000002?Pr=-.11806374092321247:Pr=-.03506042229223101:Pr=-.0007080765837654515:t[10]>6.500000000000001?Pr=-.028077713664996503:t[2]>7.500000000000001?Pr=.15803724124216814:Pr=.0351381284833169:Pr=-.07877953381054767;let Ar;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?Ar=.14144941521975005:Ar=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?Ar=.10514088112381886:t[7]>18.500000000000004?Ar=-.10370643555956745:Ar=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?Ar=-.0508129468802936:t[224]>1e-35?Ar=-.037816066368733595:t[10]>43.50000000000001?Ar=.07793408602607932:Ar=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?Ar=.036972453794202324:Ar=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?Ar=.09475302525132188:Ar=-.03580104945898193:Ar=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?Ar=-.1282448778804823:Ar=-.014395808269207212:Ar=-.008940927190750592:Ar=-.1459118815453748:t[0]>4897.500000000001?Ar=-.09733068457286576:t[1]>57.50000000000001?Ar=.06575271409540207:Ar=-.019556422817450115:Ar=-.10623959222984136:t[18]>1e-35?Ar=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?Ar=.008125645893104896:Ar=-.11084368630465868:Ar=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?Ar=-.05854904579626861:t[4]>5.500000000000001?Ar=.02985784951394175:Ar=-.03247600140149334:Ar=-.11152899295304973:Ar=-.00035424577714215764;let gn;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?gn=-.06563670567578264:gn=.067656954313663:gn=-.10388217548685377:t[8]>2302.5000000000005?gn=.07190621943790435:t[4]>67.50000000000001?gn=.060020507643618604:t[4]>38.50000000000001?gn=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?gn=-.06568134366461277:t[8]>1075.5000000000002?gn=-.004768057709758692:gn=.11785959165999467:gn=-.05080221682879267:gn=.14814206127494542:gn=-.07241946332311736:t[253]>1e-35?gn=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?gn=-.02471195342450034:gn=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?gn=-.10741850739482771:gn=.010051635824944:gn=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?gn=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?gn=-.08992396138178163:gn=.010944365997007212:gn=.06221307021813793:gn=.1286024087559141:t[127]>1e-35?gn=.06568148624531012:t[10]>40.50000000000001?gn=-.07567979134643352:t[5]>5647.500000000001?gn=.07594672895572069:gn=-.018158016446439187:t[6]>55.50000000000001?gn=.009293422430111872:t[4]>45.50000000000001?gn=-.017749818406964022:t[2]>46.50000000000001?gn=.01714136511113982:gn=-724762291423549e-19;let Cn;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?Cn=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?Cn=.07084726276890757:Cn=-.11232323677722932:Cn=.04812773089510436:Cn=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?Cn=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?Cn=.0879462816013881:Cn=-.002966662093626573:t[306]>1e-35?Cn=-.04588085188342676:Cn=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?Cn=-.006600332774461143:Cn=.1272481351557754:Cn=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?Cn=.011884312066620044:Cn=.11678751052403374:t[4]>8.500000000000002?Cn=.03627129613273813:Cn=-.12132783497902287:Cn=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Cn=-.06830131718398992:t[0]>5147.500000000001?Cn=.062360406249609306:t[4]>4.500000000000001?Cn=-.013162203864592055:Cn=-.07153029184927609:Cn=.07628618062271557:Cn=-.12085065687320373:t[190]>1e-35?Cn=-.045816889524231186:t[137]>1e-35?Cn=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?Cn=.025895337822752502:Cn=-.06503949350616421:t[10]>227.50000000000003?Cn=-.09989456525790491:t[10]>130.50000000000003?Cn=.08616651057030683:Cn=.0001234981796706021;let Tr;t[8]>1014.5000000000001?t[9]>137.50000000000003?Tr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Tr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Tr=-.141732381961068:Tr=-.0317152307496497:Tr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Tr=.12191801556691254:Tr=-.0003444689085397977:Tr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Tr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Tr=-.05676033995381961:Tr=.10933961076803381:t[4]>26.500000000000004?Tr=-.11667582544549814:t[8]>1765.5000000000002?Tr=.032174455312047705:Tr=-.0755016390126608:t[293]>1e-35?Tr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Tr=.026571311956824436:t[15]>1e-35?Tr=.06175459479851121:Tr=-.018778084411148754:t[9]>40.50000000000001?Tr=-.09420232889965811:Tr=-.004578248021263184:t[2]>1.5000000000000002?Tr=.005453714644971445:Tr=-.03907138175699279:Tr=-.055296364182154736:t[23]>1e-35?Tr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Tr=-.09358146510580179:Tr=.060524657996178094:Tr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Tr=-.12698331085931538:Tr=.006059605604079918:t[2]>196.50000000000003?Tr=-.09451315810804783:Tr=.0011390147031687425;let $t;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?$t=.05517359070460923:$t=-.04758751221404857:$t=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?$t=.1040436595565776:t[9]>21.500000000000004?$t=.04032250517675179:t[107]>1e-35?$t=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?$t=.1192453009230486:t[1]>51.50000000000001?$t=.0443376336292195:$t=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?$t=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?$t=-.08999822408398037:$t=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?$t=-.061850439226075:$t=.08849196353361093:$t=.10536348167793089:t[92]>1e-35?$t=.04894947712119185:t[9]>16.500000000000004?$t=.05900227903883853:t[9]>5.500000000000001?$t=-.11946594348916476:$t=-.03652096348071964:t[1]>41.50000000000001?$t=-.07411603110840567:$t=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?$t=.08493634342741495:t[11]>1e-35?$t=-.10899097825564363:$t=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?$t=.08356655906359918:t[7]>25.500000000000004?$t=-.09475076526194888:t[10]>5.500000000000001?$t=-.01999406228763778:$t=.06696212545889428:t[6]>20.500000000000004?$t=.14713592661393468:$t=.0459917279002218:$t=.00027445928493734093;let Wn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Wn=-.06904501553217077:Wn=.05696231672035904:Wn=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Wn=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Wn=-.011419256378538392:t[0]>3830.5000000000005?Wn=.140315841503076:Wn=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Wn=-.04027822909411164:Wn=.03176085103667189:Wn=.06779515865838849:t[4]>15.500000000000002?Wn=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Wn=.06124039747298539:Wn=-.04312732764434027:Wn=.09161522761808062:Wn=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Wn=.11211681010488772:t[13]>1e-35?Wn=.06725735814960367:Wn=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Wn=.11743605068905603:Wn=-.011309033539148687:Wn=-.07896094707523052:Wn=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Wn=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Wn=.02836295848998302:Wn=.12210680366745175:Wn=-.058302317470509096:t[5]>4144.500000000001?Wn=.06123341960495106:Wn=-.03840046906926525:Wn=-.05221474543453495:Wn=.03988215485860711:Wn=-.00033074684693083496;let ga=VMt(e+r+n+i+o+a+c+l+u+f+p+m+h+g+y+E+x+b+_+k+P+N+M+J+pe+Y+G+H+ce+ie+V+Q+z+re+fe+ne+me+he+Qe+ke+tt+Fe+ht+St+xt+Tt+le+Ue+ye+nt+ee+oe+We+De+xe+Ye+st+yt+qt+dr+Ft+Yr+en+yn+Ae+Ge+ft+Et+Zt+Vt+vr+Ir+zt+ir+Xt+Sr+qr+tn+zn+ai+Hn+ri+ln+ni+_e+W+ge+ve+te+O+Re+ze+Gt+Pr+Ar+gn+Cn+Tr+$t+Wn);return[1-ga,ga]}s(aGe,"multilineModelPredict");function VMt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(VMt,"sigmoid");var $Mt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},cGe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function lGe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return($Mt[r]??[]).some(c=>o.includes(c))}s(lGe,"hasComment");var BY=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=lGe(e,-2,r),this.rstripSecondToLastLineHasComment=lGe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},Gge=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new BY(e,n),this.suffixFeatures=new BY(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(cGe).length+1).fill(0);r[cGe[this.language]??0]=1;let n=new Array(Object.keys(vE).length+1).fill(0);n[vE[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(vE).length+1).fill(0);i[vE[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(vE).length+1).fill(0);o[vE[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(vE).length+1).fill(0);return a[vE[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function zMt(t,e){return new Gge(t.prefix,t.suffix,e)}s(zMt,"constructMultilineFeatures");function uGe(t,e){let r=zMt(t,e).constructFeatures();return aGe(r)[1]}s(uGe,"requestMultilineScore");d();d();d();d();async function*xE(t,e){for await(let r of t)yield e(r)}s(xE,"asyncIterableMap");async function*dGe(t,e){for await(let r of t)await e(r)&&(yield r)}s(dGe,"asyncIterableFilter");async function*eF(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(eF,"asyncIterableMapFilter");async function*fGe(...t){for(let e of t)yield*e}s(fGe,"asyncIterableConcat");d();async function tF(t,e,r,n){let i=Dr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Bt).updateExPValuesAndAssignments(n,i)}s(tF,"createTelemetryWithExpWithId");function lc(t,{turn:e,conversation:r}={},n){return tF(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(lc,"createTelemetryWithExpWithTurn");function rF(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(YMt(c))),a=a.extendedBy(u,f),a}s(rF,"extendUserMessageTelemetryData");function YMt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(YMt,"mapSkillResolutionsForTelemetry");function pGe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),DY(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(pGe,"createUserMessageTelemetryData");function mGe(t,e,r,n,i,o,a,c){let l=JMt(n);return DY(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:n.length,numCodeBlocks:l.length,numTokens:i},c).properties.messageId}s(mGe,"createModelMessageTelemetryData");function hGe(t,e,r,n,i,o,a){DY(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(hGe,"createOffTopicMessageTelemetryData");function gGe(t,e,r,n,i,o,a,c,l){let u=DY(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return KMt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(gGe,"createSuggestionMessageTelemetryData");var AGe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function yGe(t,e,r){let n=await lc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Qd(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(yGe,"telemetryIndexCodesearch");function DY(t,e,r,n,i,o,a){let c=a??Dr.createAndMarkAsIssued(),l={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in c.properties)){let m=cr();i.messageId=m,l.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=c.extendedBy(i,o),f=c.extendedBy(l),p=Sl(r);return Rt(t,`${p}.message`,u),Rt(t,`${p}.messageText`,f,1),u}s(DY,"telemetryMessage");function CGe(t,e,r,n){Qd(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(CGe,"createSuggestionShownTelemetryData");function KMt(t,e,r,n,i,o,a,c){Qd(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(KMt,"createSuggestionSelectedTelemetryData");function Qd(t,e,r,n,i,o){let a=o??Dr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Rt(t,i,c),c}s(Qd,"telemetryUserAction");function S3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Rt(t,"engine.messages",n,1)}s(S3,"logEngineMessages");function Sl(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(Sl,"telemetryPrefixForUiKind");function JMt(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(JMt,"getCodeBlocks");function EGe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(EGe,"uiKindToIntent");function _I(t){return t==="inline"?"conversationInline":"conversationPanel"}s(_I,"conversationSourceToUiKind");function vGe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};bGe(t,"round",i.extendedBy(o,a))}s(vGe,"createAgentRoundTelemetryData");function xGe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};bGe(t,"toolCall",c.extendedBy(l,u))}s(xGe,"createToolInvocationTelemetryData");function bGe(t,e,r){return Rt(t,`${Sl("agentPanel")}.${e}`,r)}s(bGe,"logAgenticEvent");function XMt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(XMt,"truncateContentIfNeeded");function IGe(t,e,r,n,i,o,a){let c=`${Sl(e)}.${a}`,l=o.extendedBy(r,n);Rt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=XMt(i.currentFileContent));let f=o.extendedBy(u,n);Rt(t,`${c}.restricted`,f,1)}s(IGe,"telemetryEditSurvivalTracking");d();d();function bE(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(bE,"toString");var Y0=new vt("streamChoices"),jge=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new zge;this.tool_calls=[];this.function_call=new $ge;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new Vge),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function ZMt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(ZMt,"splitChunk");var Vge=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},$ge=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},zge=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},SI=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=x2(this.response);this.stats=new Yge;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Y0.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Y0.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Y0.debug(this.ctx,"chunk",a.toString());let[c,l]=ZMt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{Y0.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&eFt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Y0.error(this.ctx,"Error in response:",p.error.message):Y0.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Y0.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new jge);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),E=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||E){let b=g.text.join("");if(y=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>nF(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let x=h.finish_reason??"client-trimmed";if(Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:x,engineName:i??"",engineChoiceSource:aI(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Y0.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Y0.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>nF(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Y0.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function NY(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Y0.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Y0.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Y0.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=nF(e.solution);return LY(t,n,o,e.index,e.requestId,i,r)}s(NY,"prepareSolutionForReturn");function nF(t){let e=t.text.join(""),r=tFt(t),n=rFt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(nF,"convertToAPIJsonData");function eFt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(eFt,"isCopilotConfirmation");function TGe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${bE(n)}. Input: '${t}'`)}}s(TGe,"parseCallArguments");function tFt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=TGe(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(tFt,"extractToolCalls");function rFt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=TGe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(rFt,"extractFunctionCall");var Yge=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new Kge,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},Kge=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function MY(t,e){return t!==null&&typeof t=="object"&&e in t}s(MY,"hasKey");function Ud(t,e){return MY(t,e)?t[e]:void 0}s(Ud,"getKey");var _Ge=Ne(di());var _a=new vt("fetchCompletions");function x2(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(x2,"getRequestId");function R3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(R3,"getProcessingTime");function SGe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(SGe,"uiKindToIntent");var Mf=class{static{s(this,"OpenAIFetcher")}};function nFt(t,e,r,n){return cy(t,e,"proxy","v1/engines",r,n)}s(nFt,"getProxyEngineUrl");function FY(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(FY,"sanitizeRequestOptionTelemetry");async function wGe(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(po),m=nFt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},Q4(e));FY(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Rt(t,"request.sent",h);let g=la(),y=SGe(c);return A_(t,m,a.token,y,i,o,u,f).then(E=>{let x=x2(E);h.extendWithRequestId(x);let b=la()-g;return h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> finished with ${E.status} status after ${b}ms`),h.properties.status=String(E.status),_a.debug(t,"request.response properties",h.properties),_a.debug(t,"request.response measurements",h.measurements),_a.debug(t,"prompt:",e),Rt(t,"request.response",h),E}).catch(E=>{if(Nu(E))throw Rt(t,"request.cancel",h),E;p.setWarning(Ud(E,"message")??"");let x=h.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",x),h.properties.message=String(Ud(E,"name")??""),h.properties.code=String(Ud(E,"code")??""),h.properties.errno=String(Ud(E,"errno")??""),h.properties.type=String(Ud(E,"type")??"");let b=la()-g;throw h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> rejected with ${String(E)} after ${b}ms`),_a.debug(t,"request.error properties",h.properties),_a.debug(t,"request.error measurements",h.measurements),Rt(t,"request.error",h),E}).finally(()=>{pDe(t,e,h)})}s(wGe,"fetchWithInstrumentation");async function iFt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});FY(o,f,["messages"]),f.properties.headerRequestId=i,Rt(t,"request.sent",f);let p=la(),m=SGe(c),h={...nI(t)};try{let g=await A_(t,n,a.token,m,i,o,u,h),y=x2(g);f.extendWithRequestId(y);let E=la()-p;return f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${E}ms`),_a.debug(t,"request.response properties",f.properties),_a.debug(t,"request.response measurements",f.measurements),_a.debug(t,"messages:",JSON.stringify(e)),Rt(t,"request.response",f),g}catch(g){if(Nu(g))throw Rt(t,"request.cancel",f),g;let y=f.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",y),f.properties.message=String(Ud(g,"name")??""),f.properties.code=String(Ud(g,"code")??""),f.properties.errno=String(Ud(g,"errno")??""),f.properties.type=String(Ud(g,"type")??"");let E=la()-p;throw f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${E}ms`),_a.debug(t,"request.error properties",f.properties),_a.debug(t,"request.error measurements",f.measurements),Rt(t,"request.error",f),g}finally{S3(t,e,f)}}s(iFt,"fetchChatWithInstrumentation");function Jge(t){return dGe(t,e=>e.completionText.trim().length>0)}s(Jge,"postProcessChoices");var oFt="github.copilot.completions.quotaExceeded",iF=class extends Mf{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="completions",l=await e.get(Qr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){_a.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=SI.create(e,r.count,u,n,[],o).processSSE(i),m=xE(p,h=>NY(e,h,n));return{type:"success",choices:Jge(m),getProcessingTime:s(()=>R3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:f,model:c.name}),h=e.get(po),g=await e.get(Qr).getToken(),y=await iFt(e,r,c.id,f,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){_a.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=Dr.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let x=SI.create(e,1,y,m,[],_Ge.CancellationToken.None).processSSE(),b=xE(x,_=>NY(e,_,n));return{type:"success",choices:Jge(b),getProcessingTime:s(()=>R3(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="speculation",l=await e.get(Qr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:cr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){_a.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let m=SI.create(e,1,f,n,[],o).processSSE(i),h=xE(m,g=>NY(e,g,n));return{type:"success",choices:Jge(h),getProcessingTime:s(()=>R3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return Dr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await Ny(0),a?.isCancellationRequested?"not-sent":await wGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Bt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:QY(e),temperature:k3(e,n.count),top_p:OY(e),n:n.count,stop:RGe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=fE(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await Ny(0),a?.isCancellationRequested?"not-sent":await wGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:oFt,title:"Learn More"});let l=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),_a.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;_a.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(_a.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Rt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Qr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",_a.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(_a.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(_a.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function LY(t,e,r,n,i,o,a){return fDe(t,e,r,i,n),{completionText:e,meanLogProb:sFt(t,r),meanAlternativeLogProb:aFt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:cr(),finishReason:r.finish_reason}}s(LY,"convertToAPIChoice");function sFt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){fn.exception(t,r,"Error calculating mean prob")}}s(sFt,"calculateMeanLogProb");function aFt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){fn.exception(t,r,"Error calculating mean prob")}}s(aFt,"calculateMeanAlternativeLogProb");function k3(t,e){return Lh(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(k3,"getTemperatureForSamples");var cFt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function RGe(t,e){return cFt[e??""]??[`


`,"\n```"]}s(RGe,"getStops");function OY(t){return 1}s(OY,"getTopP");function QY(t){return cM}s(QY,"getMaxSolutionTokens");var Xge=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},UY=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Xge(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new PY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=LY(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var km=class{constructor(){this.cache=new Or(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var qY=new vt("getCompletions");function HY(t,e,r){(vi(t,kt.EnableSpeculativeRequestsShown)??t.get(Bt).enableSpeculativeRequestsShown(r.telemetry))&&t.get(km).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=P3(r.resultType),Rt(t,`${e}.shown`,r.telemetry)}s(HY,"telemetryShown");function kGe(t,e,r){let n=e+".accepted";Rt(t,n,r)}s(kGe,"telemetryAccepted");function PGe(t,e,r){let n=e+".rejected";Rt(t,n,r)}s(PGe,"telemetryRejected");function RI(t,e={}){return{...e,telemetryBlob:t}}s(RI,"mkCanceledResultTelemetry");function Qa(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Qa,"mkBasicResultTelemetry");function BGe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=la()-e.telemetryBlob.issuedTime,n=P3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return qY.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),kue(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(qY.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Rt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}kue(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(BGe,"handleGhostTextResultTelemetry");function P3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(P3,"resultTypeToString");d();d();d();d();d();d();var Rl=class{constructor(e=()=>new Zge){this.createStatistics=e;this.statistics=new Or(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},Zge=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function DGe(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(DGe,"componentStatisticsToPromptMatcher");d();var NGe=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),LGe=I.Intersect([I.Object({name:I.String(),value:I.String()}),NGe]),MGe=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),NGe]),lFt=[LGe,MGe],uFt=I.Union(lFt),dFt=new Map([["Trait",Fs.Compile(LGe)],["CodeSnippet",Fs.Compile(MGe)]]),fFt=s(t=>t,"ensureTypesAreEqual");fFt(!0);var pFt=I.Object({contextItems:I.Array(uFt)}),mFt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),eAe=I.Object({id:I.String()}),hFt=I.Intersect([eAe,mFt]),gFt=I.Intersect([eAe,pFt]),FGe=I.Object({providers:I.Array(hFt)}),OGe=I.Object({providers:I.Array(eAe)}),tAe=I.Object({providers:I.Array(gFt),updating:I.Optional(I.Array(I.String()))}),WY=I.Intersect([bDe,I.Object({contextItems:I.Optional(tAe)})]);function GY(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(GY,"filterContextItemsByType");function QGe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of dFt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(QGe,"filterSupportedContextItems");function AFt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(AFt,"validateContextItemId");function UGe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??cr();if(!AFt(o)){let a=cr();fn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=cr();fn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(UGe,"addOrValidateContextItemsIDs");var yFt="content_excluded";async function qGe(t,e,r,n){let i=GY(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:f.providerId,data:p}))),c=t.get(pr),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get(Rl).getStatisticsForCompletion(e);return a.filter(f=>{let m=[f.data.uri,...f.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,yFt]]),m}).map(f=>f.data)}s(qGe,"getCodeSnippetsFromContextItems");function HGe(t,e){let r=t.get(pr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(HGe,"addRelativePathToCodeSnippets");d();function Ua(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Ua,"Text");function kI(t){return t.children}s(kI,"Chunk");d();function Mr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Mr,"functionComponentFunction");function vg(t){return{type:"f",children:t}}s(vg,"fragmentFunction");vg.isFragmentFunction=!0;var jY=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Ff,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=HGe(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push(Mr(Ua,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{f.push(Mr(Ua,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&f.push(Mr(Ua,{children:"---"}))}),Mr(kI,{children:f})})},"CodeSnippets");d();function rAe(t){return t.children}s(rAe,"CompletionsContext");function nAe(t){return t.children}s(nAe,"StableCompletionsContext");function iAe(t){return t.children}s(iAe,"AdditionalCompletionsContext");function VY(t){return t.name===rAe.name||t.name===nAe.name||t.name===iAe.name}s(VY,"isContextNode");d();d();d();function $Y(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s($Y,"findEditDistanceScore");var oF=50;function oAe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(oAe,"approximateMaxCharacters");function sF(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Ff,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=oAe(a);return Mr(vg,{children:[Mr(b2,{document:r,position:i,maxCharacters:m}),Mr(zY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})]})}s(sF,"CurrentFile");function b2(t){if(t.document===void 0||t.position===void 0)return Mr(Ua,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Mr(Ua,{children:e})}s(b2,"BeforeCursor");function zY(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Mr(Ua,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Mr(Ua,{});if(r===o)return Mr(Ua,{children:r});let a=o;if(r!==""){let c=ho(t.tokenizer),l=c.takeFirstTokens(o,oF);l.tokens.length>0&&100*$Y(l.tokens,c.takeFirstTokens(r,oF).tokens)?.score<(t.suffixMatchThreshold??$P)*l.tokens.length&&(a=r)}return a!==r&&n(a),Mr(Ua,{children:a})}s(zY,"AfterCursor");function WGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(Ff,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=oAe(a);return Mr(b2,{document:r,position:i,maxCharacters:l})}s(WGe,"DocumentPrefix");function GGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Ff,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=oAe(a);return Mr(zY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})}s(GGe,"DocumentSuffix");d();var YY=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===f.componentPath&&h.line!=="").map(h=>h.line).join(""),m=f.tokens;return p!==f.value&&(m=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function jGe(t){return t.map(e=>e.elidedValue).join("")}s(jGe,"makePrompt");function VGe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(VGe,"makePrefixPrompt");function $Ge(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s($Ge,"makeContextPrompt");d();var D3=class{constructor(e,r=sAe()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function sAe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===kI.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(sAe,"defaultTransformers");d();var aF={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},aAe={};for(let[t,e]of Object.entries(aF))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)aAe[r]=t;else aAe[t]=t;function YGe(t){return aAe[t]}s(YGe,"mdCodeBlockLangToLanguageId");var CFt={start:"//",end:""},EFt=["php","plaintext"],cAe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function KGe(t){return Object.values(cAe).includes(t.trim())}s(KGe,"isShebangLine");function vFt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(vFt,"hasLanguageMarker");function xFt(t,e){let r=aF[e]?aF[e].lineComment:CFt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(xFt,"comment");function My(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>xFt(o,e)).join(`
`);return r?i+`
`:i}s(My,"commentBlockAsSingles");function KY(t){let{languageId:e}=t;return EFt.indexOf(e)===-1&&!vFt(t)?e in cAe?cAe[e]:`Language: ${e}`:""}s(KY,"getLanguageMarker");function JY(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(JY,"getPathMarker");function cF(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(cF,"newLineEnded");function JGe(t){return zGe(typeof t=="string"?t:"plaintext")}s(JGe,"getLanguage");function zGe(t){return aF[t]!==void 0?{languageId:t,...aF[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(zGe,"_getLanguage");var bFt=5,N3=class{constructor(){this.renderId=0;this.formatPrefix=jGe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new YY,{blocks:[y,...E]}=g.elide(l,p,u,m,ho(c)),x=performance.now(),b=this.formatPrefix(E),_=this.formatContext?this.formatContext(E):void 0,k=y.elidedValue,P=E.reduce((N,M)=>N+M.elidedTokens,0);return f.push(...IFt([...E,y])),{prefix:b,prefixTokens:P,suffix:k,suffixTokens:y.elidedTokens,context:_,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:x-h,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((N,M)=>N+(M.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-bFt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new D3(e,lAe).walkSnapshot((f,p,m)=>{if(f===e||(f.name===sF.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:lF(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,y=g;m.type==="prefix"?y=f.value:KGe(f.value)?y=g:y=My(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:lF(y),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${sF.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},lAe=[...sAe(),(t,e,r)=>VY(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===b2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===zY.name?{...r,type:"suffix"}:r];function IFt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(IFt,"computeComponentStatistics");function lF(t){return t.replace(/\r\n?/g,`
`)}s(lF,"normalizeLineEndings");d();var XY=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Ff,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(pr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Mr(TFt,{docInfo:a}):Mr(wFt,{docInfo:a})}},"DocumentMarker"),TFt=s(t=>Mr(Ua,{children:JY(t.docInfo)}),"PathMarker"),wFt=s(t=>Mr(Ua,{children:KY(t.docInfo)}),"LanguageMarker");d();d();d();d();function uF(t,e="Unreachable"){throw new Error(e)}s(uF,"assertNever");function kl(t,e="unexpected state"){if(!t)throw new dn(`Assertion Failed: ${e}`)}s(kl,"assert");function xg(t){if(!t()){debugger;t(),A3(new dn("Assertion Failed"))}}s(xg,"assertFn");function I2(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(I2,"checkAdjacentItems");d();d();d();d();d();var IE=s((t,e)=>t===e,"strictEquals");d();d();var js=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},dF=class{constructor(){this._first=js.Undefined;this._last=js.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===js.Undefined}clear(){let e=this._first;for(;e!==js.Undefined;){let r=e.next;e.prev=js.Undefined,e.next=js.Undefined,e=r}this._first=js.Undefined,this._last=js.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new js(e);if(this._first===js.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==js.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==js.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==js.Undefined&&e.next!==js.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===js.Undefined&&e.next===js.Undefined?(this._first=js.Undefined,this._last=js.Undefined):e.next===js.Undefined?(this._last=this._last.prev,this._last.next=js.Undefined):e.prev===js.Undefined&&(this._first=this._first.next,this._first.prev=js.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==js.Undefined;)yield e.element,e=e.next}};d();var _Ft=globalThis.performance&&typeof globalThis.performance.now=="function",L3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=_Ft&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var XGe=!1,SFt=!1,T2;(ie=>{ie.None=s(()=>ps.None,"None");function e(V){if(SFt){let{onDidAddListener:Q}=V,z=fF.create(),re=0;V.onDidAddListener=()=>{++re===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),z.print()),Q?.()}}}s(e,"_addLeakageTraceLogic");function r(V,Q){return h(V,()=>{},0,void 0,!0,void 0,Q)}ie.defer=r,s(r,"defer");function n(V){return(Q,z=null,re)=>{let fe=!1,ne;return ne=V(me=>{if(!fe)return ne?ne.dispose():fe=!0,Q.call(z,me)},null,re),fe&&ne.dispose(),ne}}ie.once=n,s(n,"once");function i(V,Q){return ie.once(ie.filter(V,Q))}ie.onceIf=i,s(i,"onceIf");function o(V,Q,z){return p((re,fe=null,ne)=>V(me=>re.call(fe,Q(me)),null,ne),z)}ie.map=o,s(o,"map");function a(V,Q,z){return p((re,fe=null,ne)=>V(me=>{Q(me),re.call(fe,me)},null,ne),z)}ie.forEach=a,s(a,"forEach");function c(V,Q,z){return p((re,fe=null,ne)=>V(me=>Q(me)&&re.call(fe,me),null,ne),z)}ie.filter=c,s(c,"filter");function l(V){return V}ie.signal=l,s(l,"signal");function u(...V){return(Q,z=null,re)=>{let fe=xHe(...V.map(ne=>ne(me=>Q.call(z,me))));return m(fe,re)}}ie.any=u,s(u,"any");function f(V,Q,z,re){let fe=z;return o(V,ne=>(fe=Q(fe,ne),fe),re)}ie.reduce=f,s(f,"reduce");function p(V,Q){let z,re={onWillAddFirstListener(){z=V(fe.fire,fe)},onDidRemoveLastListener(){z?.dispose()}};Q||e(re);let fe=new K0(re);return Q?.add(fe),fe.event}s(p,"snapshot");function m(V,Q){return Q instanceof Array?Q.push(V):Q&&Q.add(V),V}s(m,"addAndReturnDisposable");function h(V,Q,z=100,re=!1,fe=!1,ne,me){let he,Qe,ke,tt=0,Fe,ht={leakWarningThreshold:ne,onWillAddFirstListener(){he=V(xt=>{tt++,Qe=Q(Qe,xt),re&&!ke&&(St.fire(Qe),Qe=void 0),Fe=s(()=>{let Tt=Qe;Qe=void 0,ke=void 0,(!re||tt>1)&&St.fire(Tt),tt=0},"doFire"),typeof z=="number"?(clearTimeout(ke),ke=setTimeout(Fe,z)):ke===void 0&&(ke=0,queueMicrotask(Fe))})},onWillRemoveListener(){fe&&tt>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,he.dispose()}};me||e(ht);let St=new K0(ht);return me?.add(St),St.event}ie.debounce=h,s(h,"debounce");function g(V,Q=0,z){return ie.debounce(V,(re,fe)=>re?(re.push(fe),re):[fe],Q,void 0,!0,void 0,z)}ie.accumulate=g,s(g,"accumulate");function y(V,Q=(re,fe)=>re===fe,z){let re=!0,fe;return c(V,ne=>{let me=re||!Q(ne,fe);return re=!1,fe=ne,me},z)}ie.latch=y,s(y,"latch");function E(V,Q,z){return[ie.filter(V,Q,z),ie.filter(V,re=>!Q(re),z)]}ie.split=E,s(E,"split");function x(V,Q=!1,z=[],re){let fe=z.slice(),ne=V(Qe=>{fe?fe.push(Qe):he.fire(Qe)});re&&re.add(ne);let me=s(()=>{fe?.forEach(Qe=>he.fire(Qe)),fe=null},"flush"),he=new K0({onWillAddFirstListener(){ne||(ne=V(Qe=>he.fire(Qe)),re&&re.add(ne))},onDidAddFirstListener(){fe&&(Q?setTimeout(me):me())},onDidRemoveLastListener(){ne&&ne.dispose(),ne=null}});return re&&re.add(he),he.event}ie.buffer=x,s(x,"buffer");function b(V,Q){return s((re,fe,ne)=>{let me=Q(new k);return V(function(he){let Qe=me.evaluate(he);Qe!==_&&re.call(fe,Qe)},void 0,ne)},"fn")}ie.chain=b,s(b,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(Q){return this.steps.push(Q),this}forEach(Q){return this.steps.push(z=>(Q(z),z)),this}filter(Q){return this.steps.push(z=>Q(z)?z:_),this}reduce(Q,z){let re=z;return this.steps.push(fe=>(re=Q(re,fe),re)),this}latch(Q=(z,re)=>z===re){let z=!0,re;return this.steps.push(fe=>{let ne=z||!Q(fe,re);return z=!1,re=fe,ne?fe:_}),this}evaluate(Q){for(let z of this.steps)if(Q=z(Q),Q===_)break;return Q}}function P(V,Q,z=re=>re){let re=s((...he)=>me.fire(z(...he)),"fn"),fe=s(()=>V.on(Q,re),"onFirstListenerAdd"),ne=s(()=>V.removeListener(Q,re),"onLastListenerRemove"),me=new K0({onWillAddFirstListener:fe,onDidRemoveLastListener:ne});return me.event}ie.fromNodeEventEmitter=P,s(P,"fromNodeEventEmitter");function N(V,Q,z=re=>re){let re=s((...he)=>me.fire(z(...he)),"fn"),fe=s(()=>V.addEventListener(Q,re),"onFirstListenerAdd"),ne=s(()=>V.removeEventListener(Q,re),"onLastListenerRemove"),me=new K0({onWillAddFirstListener:fe,onDidRemoveLastListener:ne});return me.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function M(V,Q){return new Promise(z=>n(V)(z,null,Q))}ie.toPromise=M,s(M,"toPromise");function J(V){let Q=new K0;return V.then(z=>{Q.fire(z)},()=>{Q.fire(void 0)}).finally(()=>{Q.dispose()}),Q.event}ie.fromPromise=J,s(J,"fromPromise");function pe(V,Q){return V(z=>Q.fire(z))}ie.forward=pe,s(pe,"forward");function Y(V,Q,z){return Q(z),V(re=>Q(re))}ie.runAndSubscribe=Y,s(Y,"runAndSubscribe");class G{constructor(Q,z){this._observable=Q;this._counter=0;this._hasChanged=!1;let re={onWillAddFirstListener:s(()=>{Q.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{Q.removeObserver(this)},"onDidRemoveLastListener")};z||e(re),this.emitter=new K0(re),z&&z.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(Q){this._counter++}handlePossibleChange(Q){}handleChange(Q,z){this._hasChanged=!0}endUpdate(Q){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(V,Q){return new G(V,Q).emitter.event}ie.fromObservable=H,s(H,"fromObservable");function ce(V){return(Q,z,re)=>{let fe=0,ne=!1,me={beginUpdate(){fe++},endUpdate(){fe--,fe===0&&(V.reportChanges(),ne&&(ne=!1,Q.call(z)))},handlePossibleChange(){},handleChange(){ne=!0}};V.addObserver(me),V.reportChanges();let he={dispose(){V.removeObserver(me)}};return re instanceof hu?re.add(he):Array.isArray(re)&&re.push(he),he}}ie.fromObservableLight=ce,s(ce,"fromObservableLight")})(T2||={});var uAe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new L3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},ZGe=-1;var dAe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new fAe(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},fF=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},fAe=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},pAe=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},RFt=0,M3=class{constructor(e){this.value=e;this.id=RFt++}static{s(this,"UniqueContainer")}},kFt=2,PFt=s((t,e)=>{if(t instanceof M3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),K0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=ZGe>0||this._options?.leakWarningThreshold?new dAe(e?.onListenerError??A3,this._options?.leakWarningThreshold??ZGe):void 0,this._perfMon=this._options?._profName?new uAe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(XGe){let e=this._listeners;queueMicrotask(()=>{PFt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new pAe(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||A3)(f),ps.None}if(this._disposed)return ps.None;r&&(e=e.bind(r));let i=new M3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=fF.create(),o=this._leakageMon.check(i.stack,this._size+1)),XGe&&(i.stack=a??fF.create()),this._listeners?this._listeners instanceof M3?(this._deliveryQueue??=new mAe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=ac(()=>{o?.(),this._removeListener(i)});return n instanceof hu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*kFt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||A3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof M3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var mAe=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var qd=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return nje(e,this)}},eje=new Map,hAe=new WeakMap;function nje(t,e){let r=hAe.get(t);if(r)return r;let n=BFt(t,e);if(n){let i=eje.get(n)??0;i++,eje.set(n,i);let o=i===1?n:`${n}#${i}`;return hAe.set(t,o),o}}s(nje,"getDebugName");function BFt(t,e){let r=hAe.get(t);if(r)return r;let n=e.owner?NFt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=ZY(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=DFt(e.owner,t);if(c!==void 0)return n+c}}s(BFt,"computeDebugName");function DFt(t,e){for(let r in t)if(t[r]===e)return r}s(DFt,"findKey");var tje=new Map,rje=new WeakMap;function NFt(t){let e=rje.get(t);if(e)return e;let r=LFt(t),n=tje.get(r)??0;n++,tje.set(r,n);let i=n===1?r:`${r}#${n}`;return rje.set(t,i),i}s(NFt,"formatOwner");function LFt(t){let e=t.constructor;return e?e.name:"Object"}s(LFt,"getClassName");function ZY(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(ZY,"getFunctionName");d();var w2;function tK(t){w2?w2 instanceof eK?w2.loggers.push(t):w2=new eK([w2,t]):w2=t}s(tK,"addLogger");function da(){return w2}s(da,"getLogger");var gAe;function ije(t){gAe=t}s(ije,"setLogObservableFn");function oje(t){gAe&&gAe(t)}s(oje,"logObservable");var eK=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var sje;function aje(t){sje=t}s(aje,"_setRecomputeInitiallyAndOnChange");var cje;function lje(t){cje=t}s(lje,"_setKeepObserved");var AAe;function uje(t){AAe=t}s(uje,"_setDerivedOpts");var rK=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return AAe({owner:n,debugName:s(()=>{let o=ZY(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return AAe({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(sje(this,r)),this}keepObserved(e){return e.add(cje(this)),this}get debugValue(){return this.get()}},PI=class extends rK{constructor(){super();this.observers=new Set;da()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&da()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&da()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!da();return oje(this),r||da()?.handleObservableCreated(this),this}};function iK(t,e){let r=new F3(t,e);try{t(r)}finally{r.finish()}}s(iK,"transaction");function yAe(t,e,r){t?e(t):iK(e,r)}s(yAe,"subtransaction");var F3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];da()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():ZY(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,da()?.handleEndTransaction(this)}};function bg(t,e){let r;return typeof t=="string"?r=new qd(void 0,t,void 0):r=new qd(t,void 0,void 0),new nK(r,e,IE)}s(bg,"observableValue");var nK=class extends PI{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,da()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new F3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),da()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function _2(t){return new O3(new qd(void 0,void 0,t),t,void 0,void 0)}s(_2,"autorun");function CAe(t,e){return new O3(new qd(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(CAe,"autorunOpts");function oK(t,e){return new O3(new qd(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(oK,"autorunHandleChanges");function EAe(t,e){let r=new hu,n=oK({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return ac(()=>{n.dispose(),r.dispose()})}s(EAe,"autorunWithStoreHandleChanges");function vAe(t){let e=new hu,r=CAe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return ac(()=>{r.dispose(),e.dispose()})}s(vAe,"autorunWithStore");var O3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),da()?.handleAutorunCreated(this),this._runIfNeeded(),C3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),da()?.handleAutorunDisposed(this),E3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){da()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){y2(n)}finally{this._isRunning=!1}}}finally{this.disposed||da()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}xg(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){da()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){y2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new dn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=O3)(_2||={});d();function sK(t,e){return new S2(new qd(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??IE)}s(sK,"derivedOpts");uje(sK);var S2=class extends PI{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,da()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),da()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){y2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new dn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}xg(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){da()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){y2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new dn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function xAe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new BI(new qd(e,void 0,n),r,n,()=>BI.globalTransaction,IE)}s(xAe,"observableFromEvent");var BI=class extends PI{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,yAe(this._getTransaction(),c=>{da()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||da()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=BI;function e(n,i){let o=!1;BI.globalTransaction===void 0&&(BI.globalTransaction=n,o=!0);try{i()}finally{o&&(BI.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(xAe||={});function fje(t){let e=new aK(!1,void 0);return t.addObserver(e),ac(()=>{t.removeObserver(e)})}s(fje,"keepObserved");lje(fje);function pje(t,e){let r=new aK(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),ac(()=>{t.removeObserver(r)})}s(pje,"recomputeInitiallyAndOnChange");aje(pje);var aK=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Pm(t,e,r,n){let i=new cK(r,n);return sK({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new cK(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Pm,"mapObservableArrayCached");var cK=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new hu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function bAe(t,e){let r;return EAe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(bAe,"runOnChange");d();d();d();var mje=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),lK;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof Q3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:T2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:mje})})(lK||={});var Q3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?mje:(this._emitter||(this._emitter=new K0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},TE=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Q3),this._token}cancel(){this._token?this._token instanceof Q3&&this._token.cancel():this._token=lK.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Q3&&this._token.dispose():this._token=lK.None}};d();var uK;function hje(t){uK||(uK=new mF,tK(uK)),uK.addFilteredObj(t)}s(hje,"logObservableToConsole");var mF=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return MFt([U3(QFt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[U3(" "),Bm(pF(e.oldValue,70),{color:"red",strikeThrough:!0}),U3(" "),Bm(pF(e.newValue,60),{color:"green"})]:[U3(" (unchanged)")]:[U3(" "),Bm(pF(e.newValue,60),{color:"green"}),U3(" (initial)")]}handleObservableCreated(e){if(e instanceof S2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof S2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([q3("observable value changed"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Bm(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([q3("derived recomputed"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("derived cleared"),Bm(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("observable from event triggered"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("autorun"),Bm(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("transaction"),Bm(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function MFt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(MFt,"consoleTextToArgs");function U3(t){return Bm(t,{color:"black"})}s(U3,"normalText");function q3(t){return Bm(UFt(`${t}: `,10),{color:"black",bold:!0})}s(q3,"formatKind");function Bm(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Bm,"styled");function pF(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?FFt(t,e):OFt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(pF,"formatValue");function FFt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${pF(i,e-r.length)}`}return r+=" ]",r}s(FFt,"formatArray");function OFt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${pF(o,e-r.length)}`}return r+=" }",r}s(OFt,"formatObject");function QFt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(QFt,"repeat");function UFt(t,e){for(;t.length<e;)t+=" ";return t}s(UFt,"padStr");ije(hje);var qFt=!1;qFt&&tK(new mF);d();var R2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(R2||={});d();d();d();function gje(t){return t}s(gje,"identity");var dK=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=gje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},wE=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=gje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var Dm=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function k2(t){return t<0?0:t>4294967295?4294967295:t|0}s(k2,"toUint32");function IAe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(IAe,"escapeRegExpCharacters");function Nm(t){return t.split(/\r\n|\r|\n/)}s(Nm,"splitLines");function DI(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(DI,"commonPrefixLength");function _E(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(_E,"commonSuffixLength");var WFt=/^[\t\n\r\x20-\x7E]*$/;function TAe(t){return WFt.test(t)}s(TAe,"isBasicASCII");var kMn=String.fromCharCode(65279);var Aje=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=GFt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function GFt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(GFt,"getGraphemeBreakRawData");var yje=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Dm(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new dK({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let m=0;m<f.length;m+=2)p.set(f[m],f[m+1]);return p}s(r,"arrayToMap");function n(f,p){let m=new Map(f);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(f,p){if(!f)return p;let m=new Map;for(let[h,g]of f)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Dm(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},Cje=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Ht=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new dn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new dn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new dn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new dn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var rn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var lr=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new rn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new rn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var zr=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new pK(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new pK(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new dn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new dn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new lr(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new lr(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Ht(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},pK=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=g3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=yg(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=cge(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=cge(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new zr(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=g3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=yg(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new zr(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new zr(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Pl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new lr(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new lr(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new lr(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return zr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new rn(e.lineNumber,e.column+this.columnCount):new rn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return lr.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Bl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new wAe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Nm(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},wAe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=yg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new rn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Ig=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var mK=class extends ps{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=bg(this,n),this.selection=bg(this,i),this.languageId=bg(this,o),this._register(ac(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function SE(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return oK({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(SE,"autorunWithChanges");d();var Fy=class extends ps{static{s(this,"RecentEditsProvider")}};function jFt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(jFt,"editIsTooCloseToCursor");var hK=s((t,e)=>{let[r,n]=e.useState();return e.useData(Ff,async i=>{if(!i.document)return;let o=t.ctx.get(Fy);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(pr),f=[];for(let m=c.length-1;m>=0&&!(f.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let E=h.file===i.document?.uri,x=E?i.position.line:void 0;if(jFt(h,E,x,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){l.add(h.file);let k=u.getRelativePath({uri:h.file});f.unshift(cF(`File: ${k}`)+cF(_))}}if(f.length===0){n(void 0);return}let p=cF("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+cF("End of recent edits");n(p)}),r?Mr(kI,{children:Mr(Ua,{children:r})}):void 0},"RecentEdits");d();d();d();d();d();d();var VFt={tokenizerName:"o200k_base"};function $Ft(t){return{...VFt,...t}}s($Ft,"cursorContextOptions");function hF(t,e={}){let r=$Ft(e),n=ho(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(hF,"getCursorContext");d();d();var zFt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function Eje(t){let e=zFt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(Eje,"announceSnippet");var _Ae=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var SAe=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=XFt.get(e.languageId)??JFt}tokenize(e){return new Set(YFt(e).filter(r=>!this.stopsForLanguage.has(r)))}},vje=new _Ae(20),H3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new SAe(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=vje.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(y=>y.forEach(E=>g.add(E),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:f,endLine:p})}return c&&vje.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function YFt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(YFt,"splitIntoWords");var KFt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),JFt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...KFt]),XFt=new Map([]);d();function gK(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(gK,"getBasicWindowDelineations");var AK=class t extends H3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return gK(this.windowLength,e)}_getCursorContextInfo(e){return hF(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return ZFt(e,r)}};function ZFt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(ZFt,"computeScore");d();var yK=class t extends H3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return gK(this.windowLength,e)}_getCursorContextInfo(e){return hF(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):hF(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return eOt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await pE(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function eOt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(eOt,"computeScore");var tOt=0,rOt=60,nOt=4,iOt=1,oOt=20,sOt=1e4,xje={snippetLength:rOt,threshold:tOt,maxTopSnippets:nOt,maxCharPerFile:sOt,maxNumberOfFiles:oOt,maxSnippetsPerFile:iOt,useSubsetMatching:!1};var RAe={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function aOt(t,e){return(e.useSubsetMatching?yK.FACTORY(e.snippetLength):AK.FACTORY(e.snippetLength)).to(t)}s(aOt,"getMatcher");async function bje(t,e,r){let n=aOt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(bje,"getSimilarSnippets");function Ije(t,e){return{...RAe,useSubsetMatching:kAe(t,e)}}s(Ije,"getCppSimilarFilesOptions");function Tje(t){return RAe.maxTopSnippets}s(Tje,"getCppNumberOfSnippets");var cOt=new Map([["cpp",Ije]]);function CK(t,e,r){let n=cOt.get(r);return n?n(t,e):{...xje,useSubsetMatching:kAe(t,e)}}s(CK,"getSimilarFilesOptions");var lOt=new Map([["cpp",Tje]]);function wje(t,e){let r=lOt.get(e);return r?r(t):oQe}s(wje,"getNumberOfSnippets");function kAe(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||vi(t,kt.UseSubsetMatching))??!1}s(kAe,"useSubsetMatching");d();d();d();var EK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Ff,a=>{a.traits!==r&&n(a.traits);let c=lM(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Mr(vg,{children:[Mr(Ua,{children:`Consider this related information:
`}),...r.map(a=>Mr(Ua,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function _je(t,e){return vi(t,kt.UseSplitContextPrompt)??t.get(Bt).enablePromptContextProxyField(e)}s(_je,"shouldUseSplitContextPrompt");function Sje(t){return Mr(vg,{children:[Mr(nAe,{children:[Mr(XY,{ctx:t,weight:.7}),Mr(EK,{weight:.6}),Mr(jY,{ctx:t,weight:.9}),Mr(vK,{ctx:t,weight:.8})]}),Mr(GGe,{weight:1}),Mr(iAe,{children:Mr(hK,{ctx:t,weight:.99})}),Mr(WGe,{weight:1})]})}s(Sje,"splitContextCompletionsPrompt");d();d();d();var PAe=new Or;function Rje(t){return[...t].sort((e,r)=>{let n=PAe.get(e.uri)??0;return(PAe.get(r.uri)??0)-n})}s(Rje,"sortByAccessTimes");var kje=s(t=>t.get(pr).onDidFocusTextDocument(e=>{e&&PAe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var xK=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>P2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&bK(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(Rje(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function Pje(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(Pje,"shortCircuit");d();function dOt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(dOt,"defaultHash");function BAe(t,e={}){let{hash:r=dOt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(BAe,"memoize");var Bje={entries:[],traits:[]},IK={entries:new Map,traits:[]},DAe=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},nl=new vt("relatedFiles"),fOt=1e3,TK=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},B2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{nl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){nl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){nl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){nl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(yo).readFileString(e)}catch(r){nl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Mc).evaluate(e,r)).isBlocked}catch(n){nl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},pOt=3,Dje=new DAe(fOt);async function Nje(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){nl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(Dje.bumpRetryCount(e.uri)>=pOt?a=IK:a=void 0);let c=performance.now()-o;if(nl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new TK;return a}s(Nje,"getRelatedFiles");var NAe=BAe(Nje,{cache:Dje,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});NAe=Pje(NAe,200,IK);async function wK(t,e,r,n,i,o=!1){let a=t.get(B2),c=IK;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await Nje(t,l,r,n,a):await NAe(t,l,r,n,a)}catch(l){c=IK,l instanceof TK&&Rt(t,"getRelatedFilesList",r)}return nl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(wK,"getRelatedFilesAndTraits");function bK(t,e){return lM(t)===lM(e)}s(bK,"considerNeighborFile");var P2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(pr);t.instance===void 0&&(t.instance=new xK(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(mOt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await wK(e,f,i,o,a,c);return m.entries.size===0?(nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((E,x)=>{let b=t.getRelativePath(x,p.uri);if(!b||u.docs.has(x))return;let _={relativePath:b,uri:x,source:E};y.unshift(_),u.docs.set(x,_)}),y.length>0&&u.neighborSource.set(g,y.map(E=>E.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function mOt(t,e){return t.get(Bt).excludeRelatedFiles(e)||vi(t,kt.ExcludeRelatedFiles)}s(mOt,"isExcludeRelatedFilesActive");function Lje(t,e){return t.get(Bt).includeNeighboringFiles(e)||vi(t,kt.IncludeNeighboringFiles)}s(Lje,"isIncludeNeighborFilesActive");var _K=10,SK={type:"contextTooShort"},RK={type:"copilotContentExclusion"},W3={type:"promptError"},Oy={type:"promptCancelled"},Mje={type:"promptTimeout"};function NI(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(NI,"trimLastLine");function G3(t,e,r,n,i,o={}){let c=t.get(pr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=gOt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=_je(t,n);return t.get(RE).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(G3,"extractPrompt");function hOt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:My(n,e)}s(hOt,"addNeighboringCellsToPrompt");function gOt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&bK(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>hOt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(gOt,"applyEditsForNotebook");function j3(t,e,r){let i=t.get(Bt).maxPromptCompletionTokens(e)-QY(t),o=wje(e,r),a=CK(t,e,r),c=t.get(Bt).suffixPercent(e),l=t.get(Bt).suffixMatchThreshold(e),u=t.get(Bt).workspaceContextPercent(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`workspaceContextPercent must be between 0 and 100, but was ${u}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l,workspaceContextPercent:u}}s(j3,"getPromptOptions");var vK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(Ff,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=P2.defaultEmptyResult();l.turnOffSimilarFiles||(u=await P2.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let m=j3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...Eje(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,m){let h=l.similarFilesOptions||CK(t.ctx,u,f.detectedLanguageId),y=t.ctx.get(pr).getRelativePath(f),E={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:y,languageId:f.detectedLanguageId};return await bje(E,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Mr(vg,{children:[...i.map((l,u)=>Mr(AOt,{snippet:l}))]})},"SimilarFiles"),AOt=s((t,e)=>Mr(kI,{children:[Mr(Ua,{children:t.snippet.headline}),Mr(Ua,{children:t.snippet.snippet})]}),"SimilarFile");d();var Fje=0;function yOt(){Fje=0}s(yOt,"resetContextIndex");function COt(){return Fje++}s(COt,"getNextContextIndex");var kK=class extends N3{constructor(){super(...arguments);this.formatPrefix=VGe;this.formatContext=$Ge}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(yOt(),new D3(r,EOt).walkSnapshot((f,p,m)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===b2.name&&(c=!0),f.value===void 0||f.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:lF(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let y=g==="prefix",E=y||f.value.endsWith(n)?f.value:f.value+n;i.push({type:y?"prefix":"context",value:lF(E),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source,index:y?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${b2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},EOt=[...lAe,(t,e,r)=>VY(t)?{...r,index:COt()}:r];d();d();async function vOt(t){if(t.isCancellationRequested)return;let e=new Od,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(vOt,"cancellationTokenToPromise");async function Oje(t,e){if(e){let r=vOt(e);await Promise.race([t,r])}else await t}s(Oje,"raceCancellation");function LAe(t){return Array.isArray(t)}s(LAe,"isArrayOfT");async function Qje(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await xOt(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(Qje,"resolveAll");async function xOt(t,e){let r;return t instanceof Promise?r=await bOt(t,e):r=await IOt(t,e),r}s(xOt,"resolve");async function bOt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:LAe(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await Oje(i,e),n.resolutionTime=performance.now()-r,n}s(bOt,"resolvePromise");async function IOt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await Oje(i,e),n.resolutionTime=performance.now()-r,n}s(IOt,"resolveIterable");d();var TOt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},wOt="ms-vscode.cpptools",_Ot="CppCompletionContextProvider";function Uje(t,e,r,n){(e.includes(_Ot)||e.length===1&&e[0]==="*")&&Hje(t,r,n)}s(Uje,"fillInCppVSActiveExperiments");function qje(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(wOt))&&Hje(t,r,n)}s(qje,"fillInCppVSCodeActiveExperiments");function Hje(t,e,r){try{let n=TOt,i=t.get(Bt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){fn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){fn.exception(t,n,"fillInCppActiveExperiments")}}s(Hje,"addActiveExperiments");d();function PK(t,e,r){try{let n=t.get(Bt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return fn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(PK,"fillInCSharpActiveExperiments");d();var LI="fallbackContextProvider",BK={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function Wje(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(LI))&&SOt(t,r,n)}s(Wje,"fillInMultiLanguageActiveExperiments");function SOt(t,e,r){try{let n=ROt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){fn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(SOt,"addActiveExperiments");function ROt(t,e){let r=BK,n=t.get(Bt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){fn.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(ROt,"getMultiLanguageContextProviderParamsFromExp");function Gje(t){let e={...BK};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(Gje,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var kOt="typescript-ai-context-provider";function jje(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(kOt)))return!1;try{let i=t.get(Bt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return fn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(jje,"fillInTsActiveExperiments");var Vje=Ne(di());var uc=class{static{s(this,"ContextProviderRegistry")}},Qy=class{static{s(this,"DefaultContextProviders")}},V3=class extends Qy{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},MAe=class extends uc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return fn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;PK(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(k=>k[1]>0);if(f.filter(k=>k[1]<=0).forEach(([k,P])=>{let N={providerId:k.id,matchScore:P,resolution:"none",resolutionTimeMs:0,data:[]};u.push(N)}),p.length===0)return u;if(a?.isCancellationRequested)return fn.debug(this.ctx,"Resolving context providers cancelled"),[];qje(this.ctx,p.map(k=>k[0].id),l,o),Wje(this.ctx,p.map(k=>k[0].id),l,o),jje(this.ctx,p.map(k=>k[0].id),l,o);let h=new Vje.CancellationTokenSource;if(a){let k=a.onCancellationRequested(P=>{h.cancel(),k.dispose()})}let g=b6(this.ctx)&&!wH(this.ctx)?0:POt(this.ctx,o),y=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,E;g>0&&(E=setTimeout(()=>{h.cancel(),h.dispose()},g));let x=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:y,data:c};for(let[k]of p){let P=this.ctx.get(Rl).getPreviousStatisticsForCompletion(r)?.get(k.id);P&&(b.previousUsageStatistics=P);let N=k.resolver.resolve(b,h.token);x.set(k.id,N)}let _=await Qje(x,h.token);E&&clearTimeout(E);for(let[k,P]of p){let N=_.get(k.id);if(N){if(N.status==="error")x$(N.reason)||fn.error(this.ctx,`Error resolving context from ${k.id}: `,N.reason),u.push({providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:[]});else{let M=[...N.value??[]];if((N.status==="none"||N.status==="partial")&&(fn.info(this.ctx,`Context provider ${k.id} exceeded time budget of ${g}ms`),k.resolver.resolveOnTimeout))try{let H=k.resolver.resolveOnTimeout(b);LAe(H)?M.push(...H):H&&M.push(H),M.length>0&&(N.status="partial")}catch(H){fn.error(this.ctx,`Error in fallback logic for context provider ${k.id}: `,H)}let[J,pe]=QGe(M);pe&&fn.error(this.ctx,`Dropped ${pe} context items from ${k.id} due to invalid schema`);let Y=UGe(this.ctx,J),G={providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:Y};u.push(G)}this.ctx.get(Rl).getStatisticsForCompletion(r).setLastResolution(k.id,N.status)}else fn.error(this.ctx,`Context provider ${k.id} not found in results`)}return u.sort((k,P)=>P.matchScore-k.matchScore)}async matchProviders(r,n){let i=NK(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},FAe=class extends uc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Or(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function DK(t,e){return new FAe(new MAe(t,e))}s(DK,"getContextProviderRegistry");function $je(t,e,r){let n=t.get(Rl).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="full"||E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s($je,"telemetrizeContextItems");function zje(t){return t.matchScore>0&&t.resolution!=="error"}s(zje,"matchContextItems");function NK(t,e){let r=OAe(t,e),n=vi(t,kt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(Qy).getIds();return Array.from(new Set([...i,...r,...n]))}s(NK,"getActiveContextProviders");function OAe(t,e){return b6(t)?["*"]:t.get(Bt).contextProviders(e)}s(OAe,"getExpContextProviders");function QAe(t,e){return NK(t,e).length>0}s(QAe,"useContextProviderAPI");function POt(t,e){let r=vi(t,kt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Bt).contextProviderTimeBudget(e)}s(POt,"getContextProviderTimeBudget");d();function Yje(t,e,r){let n=GY(r,"Trait");for(let o of n)BOt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(Yje,"getTraitsFromContextItems");function BOt(t,e,r,n){let i=t.get(Rl).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(BOt,"setupExpectationsForTraits");var DOt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function Kje(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=DOt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Rt(e,t,c)}}s(Kje,"ReportTraitsTelemetry");d();d();d();var LK=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},MK=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var FK=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(NOt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new qAe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new UAe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},UAe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},qAe=class{constructor(e){this.lifecycleData=e;this.stateHook=new LK(e.state),this.dataHook=new MK(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function NOt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(NOt,"isFragmentFunction");var gF=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new FK(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function Ff(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Ff,"isCompletionRequestData");var HAe={default:{promptFunction:Jje,renderer:N3},splitContext:{promptFunction:Sje,renderer:kK}};function Jje(t){return Mr(vg,{children:[Mr(rAe,{children:[Mr(XY,{ctx:t,weight:.7}),Mr(EK,{weight:.6}),Mr(jY,{ctx:t,weight:.9}),Mr(vK,{ctx:t,weight:.8}),Mr(hK,{ctx:t,weight:.99})]}),Mr(sF,{weight:1})]})}s(Jje,"defaultCompletionsPrompt");var OK=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new gF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=j3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let f=i?.separateContext?"splitContext":"default";this.setPromptOrdering(f);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:y}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return Oy;let E=this.virtualPrompt.snapshot(o),x=E.status;if(x==="cancelled")return Oy;if(x==="error")return this.errorPrompt(E.error);let b=this.renderer.render(E.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return Oy;if(b.status==="error")return this.errorPrompt(b.error);let[_,k]=NI(b.prefix),P={...b,prefix:_},N;if(QAe(this.ctx,n)){let J=DGe(b.metadata.componentStatistics);this.ctx.get(Rl).getStatisticsForCompletion(e).computeMatch(J),N=$je(this.ctx,e,y),fn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(N)}'`)}let M=performance.now();return this.resetIfEmpty(b),this.successPrompt(P,M,p,k,N)}async updateComponentData(e,r,n,i,o,a,c,l,u={},f,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,f,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(QAe(this.ctx,n)){a=await this.ctx.get(Lm).resolution(e);let{textDocument:f}=r,p=a.filter(zje);MOt(this.ctx,f.detectedLanguageId,p,n)||(u=!0),c=Yje(this.ctx,e,p),Kje("contextProvider.traits",this.ctx,c,f.detectedLanguageId,f.detectedLanguageId,n),l=await qGe(this.ctx,e,p,f.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Oy;if((await this.ctx.get(Mc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return RK;if((n>0?e.getText().length:e.offsetAt(r))<_K)return SK}createRequestData(e,r,n,i,o,a,c,l,u,f,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:f,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return Ia(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),W3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new gF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(HAe[this.promptOrdering]?.promptFunction??Jje)(this.ctx)}getRenderer(){let e=HAe[this.promptOrdering]??HAe.default;return new e.renderer}};function MOt(t,e,r,n){let i=["cpp","c"];return Lje(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(MOt,"similarFilesEnabled");d();d();d();var FOt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function OOt(t){return FOt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(OOt,"isOomError");function MI(t,e,r,n=fn){if(!Nu(e)){if(e instanceof Error){let i=e;OOt(i)?t.get(po).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(po).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(po).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(po).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(po).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(MI,"handleException");function Xje(t){process.addListener("uncaughtException",r=>{MI(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,MI(t,r,"unhandledRejection")}finally{e=!1}})}s(Xje,"registerDefaultHandlers");d();d();d();var D2="[...]",QOt=0,Uy=-1;function qy(){return QOt++}s(qy,"getAvailableNodeId");function Zje(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(Zje,"elideChildren");function eVe(t,e=D2){return r=>t.tokenLength(Zje(r,e))}s(eVe,"getTokenizerCostFunction");function tVe(t=D2){return e=>Zje(e,t).length-(e.elisionMarker??t).length}s(tVe,"getBasicCostFunction");d();var $3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){let r=this.heap[e],n=this.heap.length-1;for(;e<n;){let i=e,o=2*e+1,a=o+1;if(o<=n&&this.heap[o].priority>this.heap[i].priority&&(i=o),a<=n&&this.heap[a].priority>this.heap[i].priority&&(i=a),i===e)break;this.heap[e]=this.heap[i],e=i}this.heap[e]=r}};var AF=class{constructor(e,r,n,i,o=0,a=!1,c=D2){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.cost=Math.max(i,1),this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/this.cost}render(e=void 0,r=[],n){let i=new Set(Array.isArray(r)?r:[r]);if((e??this.cost)<this.cost||i.has(this.id))return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length};if(e===void 0){let f=s(h=>i.has(h.id),"elider"),p=[];this.recursivelyRender(p,f);let m=p.join("");return{rendered:m,cost:n?n(m):m.length}}let o=new Set,a=[],c=[],l=new $3([{item:this,priority:this.value}]),u=e;for(;u>0&&l.size>0;){let{item:f}=l.pop();if(!i.has(f.id)&&f.cost<=u){u-=f.cost,o.add(f.id),a.push(f);for(let p of f.children)l.insert(p,p.value);f.requireRenderedChild&&c.push(f)}}for(let f=c.length-1;f>=0;f--){let p=c[f];p.children.some(m=>o.has(m.id))||o.delete(p.id)}for(;o.size>0;){let f=[],p=s(g=>!o.has(g.id),"elider");this.recursivelyRender(f,p);let m=f.join("");if(n===void 0)return{rendered:m,cost:m.length};let h=n(m);if(h<=e)return{rendered:m,cost:h};for(;a.length>0&&h>e;){let g=a.pop();h-=g.cost,o.delete(g.id)}if(a.length===0)return{rendered:this.elisionMarker,cost:n(this.elisionMarker)}}return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length}}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRender(e,r,n=!1){if(r(this))return e.length>=2&&(n||e[e.length-2]===this.elisionMarker&&e[e.length-1].trim().length===0)?(e.pop(),!0):(e.push(this.elisionMarker),!0);let i=!1;for(let[o,a]of this.children.entries())e.push(this.text[o]??""),i=a.recursivelyRender(e,r,a.canMerge&&i);return e.push(this.text[this.text.length-1]??""),!1}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new $3([]);let i=new $3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.requireRenderedChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.requireRenderedChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}findNode(e){if(this.id===e)return this;for(let r of this.children){let n=r.findNode(e);if(n!==void 0)return n}}};function WAe(t,e,r=D2,n){if(n?.has(t.id))return n.get(t.id);let i=t.children.map(c=>WAe(c,e,r));r=t.elisionMarker??r;let o=e(t),a=new AF(t.id,t.text,i,o,0,t.canMerge,r);return n?.set(a.id,a),a}s(WAe,"snapshot");d();d();d();function yF(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(yF,"setDefault");function UOt(t){return t.id!==void 0}s(UOt,"isNodeItem");function qOt(t){return!("uri"in t)&&!("id"in t)}s(qOt,"isNullItem");var HOt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},FI="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",z3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==Uy),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},QK=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=HOt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new z3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new z3(r.items):new z3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(Uy);if(c!==void 0&&c>0){o.delete(Uy);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),f=c/u.length;for(let p of u)o.set(p,f)}else for(let[u,f]of[...o.entries()])o.set(u,f+c*(f/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new z3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(qOt(r))return{weight:r.weight,uri:FI,id:Uy};let n=UOt(r)?r.id:Uy,i=r.uri??this.activeContext.getUri(n)??FI;return i===FI&&(n=Uy),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0)continue;let l=yF(r,o,()=>new Map),u=Uy;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let f=l!==FI?this.activeContext.normalizeUri(l)??FI:FI;for(let[p,m]of u.entries())l===FI||p===Uy?n.set(f,(n.get(f)??0)+m):r.push({uri:f,id:p,weight:m}),i+=m}if(i<=0)return[];n.delete(FI),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:Uy,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};d();d();var J0=class{static{s(this,"FileSearch")}};d();d();var UK=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*nVe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},qK=class{constructor(e,r,n){this._parsedDocument=e;this.minSize=r;this.updateId=qy();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(r,1),this.maxSize=Math.max(n??2*this.minSize,this.minSize+1),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.parsedDocument.document.uri}get version(){return this.updateId}get parsedDocument(){return this._parsedDocument}get document(){return this.parsedDocument.document}get rootId(){return this._root.id}get root(){return this._root}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this.parsedDocument.findNode(e,r);for(;!this.syntaxToAbstract.has(n.id);){if(n.parent===null)return this.root;n=n.parent}let i=this.syntaxToAbstract.get(n.id);if(r===void 0)return i;let o=i;for(;o!==void 0;)i=o,o=i.findChild(e,r);return i}dispose(){this._parsedDocument.dispose()}update(e,r){if(this.uri!==e.document.uri)throw new Error("Can't update ContextDocument using mismatched URI");let n=this._parsedDocument;this._parsedDocument=e;try{this.recursivelyRemapNodes(this.root,r),this._root=this.buildTree()}finally{n.dispose()}this.updateId=qy()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:f}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:f})}let o=i[0].root.parent,a=e.parts[0].root.parent;if(o?.canMergeChildren!==a?.canMergeChildren)return this.invalidateNode(e),!1;let c=rVe(i,this._parsedDocument.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e),!1;let l=new UK(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=rVe(e,this.document),i=new UK(qy(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}isValidRoot(e){return e.length===1&&e[0].root.id===this.parsedDocument.root.id}buildTree(){let e=this.parsedDocument.root,r=this.buildRecursively(e);return this.createNode([{root:e,children:r}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(e.canMergeChildren){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);o.canBeNode&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let y=g.endOffset-g.startOffset;h-=y,r-=y}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let f=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);f.push(this.createNode(h,p)),p=!0}return f}};function rVe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(rVe,"buildText");function*nVe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*nVe(r,e))}s(nVe,"walk");d();d();d();function iVe(t){return t.search(/^[a-zA-Z_]{3,}\w*$/)>=0}s(iVe,"isSymbol");var HK=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.text="",this.range={start:m,end:m};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)},this.text=a.getText(this.range)}static{s(this,"IndentationNode")}get type(){return this.raw.type}get isLeaf(){return this.children.length===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return!1}get isText(){return!0}findNode(e,r){let n=0,i=this.children.length-1,o;for(;n<=i;){let a=Math.floor((n+i)/2);if(o=this.children[a],o.startOffset<=e&&o.endOffset>=r)break;o.endOffset<e?n=a+1:i=a-1}return o===void 0||i<n?this:o.findNode(e,r)}},GAe=class{constructor(e,r){this.document=e;this.root=r}static{s(this,"IndentationParsedDocument")}findNode(e,r){return this.root.findNode(e,r??e)}dispose(){}};function jAe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:jAe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=jAe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new HK(qy(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(jAe,"recursivelyBuildNode");function oVe(t){let e=ZS(t.getText(),t.detectedLanguageId),r=jAe(e,t.lineCount,t)??new HK(qy(),e,[],0,t.lineCount-1,t);return new GAe(t,r)}s(oVe,"parse");function WOt(t,e){return{document:oVe(e),remapper:s(()=>{},"remapper")}}s(WOt,"update");var sVe={parse:oVe,update:WOt,dispose:s(function(){},"dispose")};d();d();var cVe=Ne(A$());function aVe(t){return{line:t.row,character:t.column}}s(aVe,"asPosition");var Mm=class t{constructor(e){this.node=e}static{s(this,"TreeSitterNode")}get raw(){return this.node}get id(){return this.node.id}get type(){return this.node.type}get text(){return this.node.text}get startOffset(){return this.node.startIndex}get endOffset(){return this.node.endIndex}get range(){return{start:aVe(this.node.startPosition),end:aVe(this.node.endPosition)}}get parent(){let e=this.node.parent;return e!==null?this.createNode(e):null}get children(){return this.node.namedChildren.map(e=>this.createNode(e))}get isLeaf(){return this.node.namedChildCount===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return this.isLeaf&&iVe(this.text)}get isText(){return this.isLeaf&&this.text.search(/\s/)>=0}createNode(e){return new t(e)}},CF=class{constructor(e,r,n){this.textDocument=e;this.syntaxTree=r;this.nodeFactory=n}static{s(this,"TreeSitterDocument")}get document(){return this.textDocument}get root(){return this.nodeFactory(this.syntaxTree.rootNode)}findNode(e,r){let n=r===void 0?this.syntaxTree.rootNode.namedDescendantForIndex(e):this.syntaxTree.rootNode.namedDescendantForIndex(e,r);return this.nodeFactory(n)}dispose(){this.syntaxTree.delete()}},OI=class{constructor(e,r){this.language=e;this.nodeFactory=r;this.parser=new cVe.default;this.parser.setLanguage(e)}static{s(this,"TreeSitterParser")}parse(e){let r=this.parser.parse(e.getText());return new CF(e,r,this.nodeFactory)}update(e,r){if(!(e instanceof CF))throw new Error("Can only update documents created from this parser");let n=this.parser.parse(r.getText());return{document:new CF(r,n,this.nodeFactory),remapper:s(()=>{},"remapper")}}dispose(){this.parser.delete()}};var GOt=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),jOt=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),WK=class t extends Mm{static{s(this,"CPPNode")}get canBeNode(){return GOt.has(this.type)}get canMergeChildren(){return jOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var VOt=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),$Ot=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),GK=class t extends Mm{static{s(this,"JavaNode")}get canBeNode(){return VOt.has(this.type)}get canMergeChildren(){return $Ot.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string_literal"||this.type==="line_comment"||this.type==="block_comment"}createNode(e){return new t(e)}};d();var zOt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),YOt=new Set(["module","block","parameters","dictionary","list"]),jK=class t extends Mm{static{s(this,"PythonNode")}get canBeNode(){return zOt.has(this.type)}get canMergeChildren(){return YOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var KOt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),JOt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),VK=class t extends Mm{static{s(this,"TypeScriptNode")}get canBeNode(){return KOt.has(this.type)}get canMergeChildren(){return JOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};var lVe=Ne(A$());async function uVe(t){await lVe.default.init();try{let e=await Eme(t);switch(t){case"python":return new OI(e,r=>new jK(r));case"typescript":return new OI(e,r=>new VK(r));case"java":return new OI(e,r=>new GK(r));case"cpp":return new OI(e,r=>new WK(r));default:return new OI(e,r=>new Mm(r))}}catch{return sVe}}s(uVe,"getParser");d();var XOt=new vt("WorkspaceContextManager"),$Ae=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},$K=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},zK=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.cachedDocuments=new TH;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Or(5e3);this.allowedExtensions=new Set($S);this.invalidDocumentCache=new y_(this.config.MaxActiveNodes,this.config.InvalidCacheTime)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(pr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>mE[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if(tG(e),r=Jc(e),!(this.ctx.get(pr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(jDe(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.activeDocuments.values())e.dispose();this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new $Ae(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new $K(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Od;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&(this.isStarted()?this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new $K(n,i=>this.disposeDocument(i)))):n.dispose()),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let{document:c,remapper:l}=i.update(r.parsedDocument,n),u=new Set(r.getAllIds());r.update(c,l);let f=new Set(r.getAllIds()),p=[...f].filter(h=>!u.has(h)),m=[...u].filter(h=>!f.has(h));return this.recordDocumentChanges(e,{created:p,invalidated:m}),r}let o=i.parse(n),a=new qK(o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:a.getAllIds(),invalidated:[]}),a}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()}),e.dispose()}recordDocumentChanges(e,r){let n=yF(this.createdNodes,e,()=>new Set),i=yF(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await uVe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(pr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(J0).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){XOt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,60*60*1e3);return}let o=await this.ctx.get(mn).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};d();var YK=class{constructor(e){this.ctx=e;this.documents=new Map;this.elisionMarker=D2;this.nodeCache=new Or(1e4);this.costFunction=tVe(this.elisionMarker),this.root=this.createRootNode()}static{s(this,"WorkspacePromptComponent")}getRoot(){return this.root}setCostFunction(e){this.costFunction=e}snapshot(e,r){this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=WAe(o,this.costFunction,this.elisionMarker,this.nodeCache);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new AF(qy(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:qy(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(pr).getRelativePath({uri:e});return My(`Related portions of ${i??e}:
`,r)}};var dVe=Ne(require("events"));var ZOt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},Fm=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Od;this.config=ZOt;this.emitter=new dVe.default;this.forceUpdateInterrupt=new Od;this.emitter.setMaxListeners(27),this.contextManager=new zK(e,this.config),this.coordinator=new QK(this.contextManager,this.config),this.promptComponent=new YK(e),this.tokenEventDisposable=ia(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=vi(this.ctx,kt.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return vi(this.ctx,kt.UseWorkspaceContextCoordinator)??this.ctx.get(Bt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.promptComponent.setCostFunction(eVe(ho())),this.deferredStart.resolve(),this.forceUpdateInterrupt=new Od,this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}getPromptComponent(){return this.promptComponent.getRoot()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),In.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),In.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async forceUpdate(){return this.forceUpdateInterrupt.promise}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights();this.promptComponent.snapshot(e,this.contextManager);let r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),await this.contextManager.flushUpdates(),this.forceUpdateInterrupt.resolve(),this.forceUpdateInterrupt=new Od,this.isActive()){this.promptComponent.snapshot(e,this.contextManager);let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await Ny(n)}}}catch(e){MI(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};var KK=class{constructor(e){this.ctx=e;this.renderId=0;this.cachedSuffix=""}static{s(this,"WorkspaceContextPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionState:e,telemetryData:r,promptOpts:n},i){this.renderId++;let{maxPromptLength:o,suffixPercent:a,suffixMatchThreshold:c,workspaceContextPercent:l}=j3(this.ctx,r,e.textDocument.detectedLanguageId),u=await this.failFastPrompt(e.textDocument,e.position,a,i);if(u)return u;let f=performance.now(),{beforeCursor:p,afterCursor:m}=this.getBeforeAfterCursor(e),h=this.getPathMarker(e),g=this.checkSuffixCache(m,c,n),y=this.producePrompt(o,a,l,h,p,g,e.textDocument.detectedLanguageId,n);if(y.status==="cancelled")return Oy;if(y.status==="error")return this.errorPrompt(y.error);let[E,x]=NI(y.prefix),b={...y,prefix:E},_=performance.now();return this.successPrompt(b,_,f,x)}producePrompt(e,r,n,i,o,a,c,l){let u=performance.now(),f=ho(l?.tokenizer);a.length==0&&(r=0);let p=f.tokenLength(i),m=Math.floor(e*r/100),h=Math.floor(e*n/100),g=e-m-h-p;if(g<=0)throw new Error(`Prefix tokens must be positive, was ${g}`);let y=performance.now(),x=this.ctx.get(Fm).getPromptComponent(),{rendered:b,cost:_}=x.render(h,void 0,G=>f.tokenLength(G)),k=performance.now()-y,P=f.takeFirstTokens(a,m),N=Math.max(m-P.tokens.length,0),M=f.takeLastLinesTokens(o,g+N),J=l?.separateContext?M:My(b,c)+`
`+M,pe=f.tokenLength(M),Y=P.tokens.length;return{status:"ok",prefix:i+`
`+J,prefixTokens:p+_+pe,suffix:P.text,suffixTokens:Y,context:l?.separateContext?[b]:void 0,metadata:{renderId:this.renderId,rendererName:"w",tokenizer:l?.tokenizer??"o200k_base",elisionTimeMs:k,renderTimeMs:performance.now()-u,updateDataTimeMs:0,componentStatistics:[{componentPath:"workspace",actualTokens:_},{componentPath:"prefix",actualTokens:p+pe},{componentPath:"suffix",actualTokens:Y}]}}}getBeforeAfterCursor(e){let r=e.textDocument.getText({start:{line:0,character:0},end:e.position}),n=e.textDocument.getText({start:e.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});return{beforeCursor:r,afterCursor:n}}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(pr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?My(JY(o),o.languageId):My(KY(o),o.languageId)}checkSuffixCache(e,r,n){let i=e.replace(/^.*/,"").trimStart();if(i==="")return"";if(this.cachedSuffix===i)return this.cachedSuffix;let o=i;if(this.cachedSuffix!==""){let a=ho(n?.tokenizer),c=a.takeFirstTokens(i,oF);c.tokens.length>0&&100*$Y(c.tokens,a.takeFirstTokens(this.cachedSuffix,oF).tokens)?.score<(r??$P)*c.tokens.length&&(o=this.cachedSuffix)}return o!==this.cachedSuffix&&(this.cachedSuffix=o),o}successPrompt(e,r,n,i){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Oy;if((await this.ctx.get(Mc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return RK;if((n>0?e.getText().length:e.offsetAt(r))<_K)return SK}errorPrompt(e){return Ia(this.ctx,e,"WorkspaceContextPromptFactory"),W3}};var fVe=Ne(di());var RE=class{static{s(this,"CompletionsPromptFactory")}};function JK(t,e,r){return new zAe(new YAe(new KAe(t,new OK(t,e,r),new KK(t),JAe)))}s(JK,"createCompletionsPromptFactory");var zAe=class extends RE{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Oy;try{return await this.delegate.prompt(r,n)}catch{return W3}}},e7t=1200,YAe=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new fVe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(Mje)},e7t)})])}},KAe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function JAe(t,e){let r=t.get(Fm);return r.isEnabled(e)&&r.isActive()}s(JAe,"workspaceContextEnabledAndActive");var Lm=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Or(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){if(JAe(this.ctx,i))return;let c=this.ctx.get(uc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var XK=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await pE(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},ZK=class extends XK{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=mVe(r,n),this.isBlockStart(t7t(r,n))&&this.isBlockBodyEmpty(r,n)}};function t7t(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(t7t,"getLineAtOffset");function mVe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(mVe,"rewindToNearestNonWs");function pVe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(pVe,"indent");function r7t(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=pVe(t,r),i=pVe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(r7t,"outdented");var Hy=class extends XK{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&lQe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=mVe(r,n);let i=await pE(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&r7t(f,p,r)?!0:!f.children.find(h=>h.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(h=>this.startKeywords.includes(h.type)),m=f.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=f.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=f.find(E=>E.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=f.find(E=>E.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(E=>E.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=f.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},n7t={python:new Hy("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Hy("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Hy("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Hy("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new ZK("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new ZK("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Hy("csharp",{},new Map([]),[],"block",null,!0),java:new Hy("java",{},new Map([]),[],"block",null,!0),php:new Hy("php",{},new Map([]),[],"block",null,!0),cpp:new Hy("cpp",{},new Map([]),[],"block",null,!0)};function XAe(t){if(!H0(t))throw new Error(`Language ${t} is not supported`);return n7t[C$(t)]}s(XAe,"getBlockParser");async function hVe(t,e,r){return H0(t)?XAe(t).isEmptyBlockStart(e,r):!1}s(hVe,"isEmptyBlockStart");async function gVe(t,e,r,n){if(H0(t))return XAe(t).isBlockBodyFinished(e,r,n)}s(gVe,"isBlockBodyFinished");async function AVe(t,e,r){if(H0(t))return XAe(t).getNodeStart(e,r)}s(AVe,"getNodeStart");var pjn=new vt("parseBlock");function EF(t,e,r){let n=e.getText(ns.range(ns.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>gVe(o,n,a,i)}s(EF,"parsingBlockFinished");function tJ(t,e){return hVe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(tJ,"isEmptyBlockStartUtil");async function yVe(t,e,r,n){let o=e.getText(ns.range(ns.position(0,0),r))+n,a=await AVe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(yVe,"getNodeStartUtil");var i7t=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),o7t=new RegExp(`^(${i7t.join("|")})`);function s7t(t){return o7t.test(t.trimLeft().toLowerCase())}s(s7t,"isContinuationLine");function eJ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(eJ,"indentationOfLine");function rJ(t,e){let r=t.getText(),n=t.offsetAt(e);return ZAe(r,n,t.detectedLanguageId)}s(rJ,"contextIndentation");function ZAe(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<f.length;)g=eJ(f[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let E=f[h].trim();if(E.endsWith('"""')){if(!(E.startsWith('"""')&&E!=='"""'))for(h--;h>=0&&!f[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=eJ(f[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=eJ(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(ZAe,"contextIndentationFromText");var a7t=!1;function c7t(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&a7t&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=eJ(u);if(f!==void 0&&(f<c||f===c&&!s7t(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(c7t,"completionCutOrContinue");function CVe(t,e){return async r=>{let n=c7t(r,t,e);return n==="continue"?void 0:n}}s(CVe,"indentationBlockFinished");d();d();var EVe=2.98410452738298,vVe=-.838732736843507,xVe=1.50314646255716,bVe=-.237798634012662,nJ={python:.314368072478742},IVe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var l7t={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function u7t(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(u7t,"linearInterpolation");var Y3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},eye=class{constructor(e,r,n){this.link=l7t;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return u7t(n,this.logitsToQuantiles)}},TVe=new eye(EVe,[new Y3("compCharLen",vVe,t=>Math.log(1+t)),new Y3("meanLogProb",xVe),new Y3("meanAlternativeLogProb",bVe)].concat(Object.entries(nJ).map(t=>new Y3(t[0],t[1]))),IVe);function wVe(t,e){let r={...e.measurements};return Object.keys(nJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),TVe.predict(t,r)}s(wVe,"ghostTextScoreConfidence");function _Ve(t,e){let r={...e.measurements};return Object.keys(nJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),TVe.quantile(t,r)}s(_Ve,"ghostTextScoreQuantile");d();d();var d7t=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function iJ(t){let e=t.slice();return e.reverse(),SVe(e)||SVe(e.filter(r=>r.trim().length>0))}s(iJ,"isRepetitive");function SVe(t){let e=f7t(t);for(let r of d7t){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(SVe,"isRepeatedPattern");function f7t(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(f7t,"kmp_prefix_function");function p7t(t,e,r,n){let i="}";try{i=cQe(e.detectedLanguageId)??"}"}catch{}return m7t({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(p7t,"maybeSnipCompletion");function m7t(t,e,r,n){let i=h7t(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let y=e.line+1+f+l;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+f+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(m7t,"maybeSnipCompletionImpl");function h7t(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(h7t,"splitByNewLine");function g7t(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(g7t,"matchesNextLine");function vF(t,e,r,n,i,o){if(iJ(n.tokens)){let c=Dr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Rt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(g7t(e,r,a.completionText,!i)){let c=Dr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Rt(t,"completion.alreadyInDocument",c),Rt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=p7t(t,e,r,a.completionText),a.completionText?a:void 0}s(vF,"postProcessChoiceInContext");function RVe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(RVe,"checkSuffix");var DVe=Ne(nb());var Yo=new vt("ghostText");var y7t=200,kVe=20;async function NVe(t,e,r,n,i,o,a){Yo.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=k3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:mQe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l,code_annotations:!1},p=vi(t,kt.ModelAlwaysTerminatesSingleline)??t.get(Bt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&Ly.isSupported(e.languageId)&&!p;!e.multiline&&!m?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},E=await t.get(Mf).fetchAndStreamCompletions(t,y,r,i,n);return E.type==="failed"?{type:"failed",reason:E.reason,telemetryData:Qa(r)}:E.type==="canceled"?(Yo.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:E.reason,telemetryData:RI(r)}):a(h,E.getProcessingTime(),E.choices)}catch(y){if(Nu(y))return{type:"canceled",reason:"network request aborted",telemetryData:RI(r,{cancelledNetworkRequest:!0})};if(Yo.exception(t,y,"Error on ghost text request"),t.get(xd).notifyUser(t,y),jk(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Qa(r)}}}s(NVe,"genericGetCompletionsFromNetwork");function tye(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(tye,"postProcessChoices");async function C7t(t,e,r,n,i){return NVe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return Yo.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Qa(r)};if(n?.isCancellationRequested)return Yo.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:RI(r)};let f=u.value;if(f===void 0)return Yo.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Qa(r)};MVe(t,"performance",f,o,a),Yo.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=tye(f,e);p&&(oJ(t,e,p),Yo.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;Yo.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=tye(g,e,h);y&&(h.push(y),oJ(t,e,y))}})();return Lh(t)&&await m,p?{type:"success",value:[rye(p,{forceSingleLine:!1}),m],telemetryData:Qa(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Qa(r)}})}s(C7t,"getCompletionsFromNetwork");async function E7t(t,e,r,n,i){return NVe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return Yo.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:RI(r)};let f=tye(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)oJ(t,e,u);MVe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:Qa(r),telemetryBlob:r,resultType:3}})}s(E7t,"getAllCompletionsFromNetwork");function rye(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(rye,"makeGhostAPIChoice");function PVe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(PVe,"takeNLines");async function v7t(t,e,r,n,i,o,a,c){let l=t.get(Bt).multilineAfterAcceptLines(c),u=t.get(dg).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:PVe(l),stop:[`

`],maxTokens:kVe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(f=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let f;try{f=await k7t(t,u,e.textDocument,e.position,o,a,n)}catch{f={requestMultiline:!1}}if(!a&&f.requestMultiline&&t.get(Bt).singleLineUnlessAccepted(c)&&(f.requestMultiline=!1),f.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=ns.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...BVe(t,u,e.textDocument,p,f.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:PVe(l),stop:[`

`],maxTokens:kVe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...BVe(t,u,e.textDocument,e.position,f.blockPosition,r,!1,n.prompt,c)}}}}s(v7t,"getGhostTextStrategy");function BVe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&Ly.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Bt).longLookaheadSize(l):t.get(Bt).shortLookaheadSize(l);return{finishedCb:new UY(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};oJ(t,h,m)}).getFinishedCallback(),maxTokens:y7t}}return{finishedCb:a?EF(t,r,n):u=>{}}}s(BVe,"buildFinishedCallback");var x7t={isCycling:!1,promptOnly:!1,isSpeculative:!1};function b7t(t,e,r){let n=vi(t,kt.CompletionsDebounce)??t.get(Bt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=la()-r.issuedTime;return Math.max(0,n-i)}s(b7t,"getRemainingDebounceMs");function xF(t,e,r){return r?.isCancellationRequested||e!==t.get(Of).currentRequestId}s(xF,"inlineCompletionRequestCancelled");async function I7t(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(E){let x=la();c.push([E,x-a]),a=x}s(l,"recordPerformance"),l("telemetry");let u=t.get(Bt);if(xF(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Qa(n)};let f=w7t(e.textDocument,e.position);if(f===void 0)return Yo.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Qa(n)};let p=aI(t,n),m={...x7t,...o,tokenizer:p.tokenizer},h=await G3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return Yo.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Qa(n)};if(h.type==="contextTooShort")return Yo.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Qa(n)};if(h.type==="promptError")return Yo.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Qa(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return Yo.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Qa(n)};if(h.type==="promptTimeout")return Yo.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Qa(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return Yo.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Qa(n)};let g=b7t(t,m,n);return g>0&&(Yo.debug(t,`Debouncing ghost text request for ${g}ms`),await Ny(g),xF(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:Qa(n)}:t.get(po).withProgress(async()=>{let[E]=NI(e.textDocument.getText(ns.range(ns.position(0,0),e.position))),x=t.get(Of).hasAcceptedCurrentCompletion(E,h.prompt.suffix),b=h.prompt,_=await v7t(t,e,E,h,m.isCycling,f,x,n);l("strategy");let k=T7t(t,E,b,_.requestMultiline);l("cache");let P=cI(t,e.textDocument.uri),N={blockMode:_.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:P,engineModelId:p.modelId,ourRequestId:r,prefix:E,prompt:h.prompt,multiline:_.requestMultiline,indentation:rJ(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:_.stop,maxTokens:_.maxTokens,afterAccept:x};N.headers={...N.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let M=L7t(t,e.textDocument,N,e.position,h,n,p,m);if(k===void 0&&!m.isCycling&&t.get(Lf).shouldWaitForAsyncCompletions(E,h.prompt)){let Q=await t.get(Lf).getFirstMatchingRequestWithTimeout(r,E,h.prompt,m.isSpeculative,M);if(l("asyncWait"),Q){let z=!_.requestMultiline;k=[[rye(Q[0],{forceSingleLine:z})],4]}if(xF(t,r,i))return Yo.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Qa(M)}}let J=_.blockMode==="moremultiline"&&Ly.isSupported(e.textDocument.detectedLanguageId);if(k!==void 0&&(k[0]=k[0].map(Q=>vF(t,e.textDocument,e.position,Q,J,Yo)).filter(Q=>Q!==void 0)),k!==void 0&&k[0].length===0)return Yo.debug(t,`Found empty inline suggestions locally via ${P3(k[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Qa(M)};if(k!==void 0&&k[0].length>0&&(!m.isCycling||k[0].length>1))Yo.debug(t,`Found inline suggestions locally via ${P3(k[1])}`);else{if(m.isCycling){let Q=await E7t(t,N,M,i,_.finishedCb);if(Q.type==="success"){let z=k?.[0]??[];Q.value[0].forEach(re=>{z.findIndex(fe=>fe.completionText.trim()===re.completionText.trim())===-1&&z.push(re)}),k=[z,3]}else if(k===void 0)return Q}else{let Q=s((ne,me)=>(t.get(Lf).updateCompletion(r,ne),_.finishedCb(ne,me)),"finishedCb"),z=new In.CancellationTokenSource,re=C7t(t,N,M,z.token,Q);t.get(Lf).queueCompletionRequest(r,E,h.prompt,z,re);let fe=await t.get(Lf).getFirstMatchingRequest(r,E,h.prompt,m.isSpeculative);if(fe===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Qa(M)};k=[[fe[0]],4]}l("network")}if(k===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Qa(M)};let[pe,Y]=k,G=pe.map(Q=>vF(t,e.textDocument,e.position,Q,J,Yo)).filter(Q=>Q!==void 0),H=vi(t,kt.CompletionsDelay)??u.completionsDelay(n),ce=la()-n.issuedTime,ie=Math.max(H-ce,0);if(Y!==2&&!m.isCycling&&ie>0&&(Yo.debug(t,`Waiting ${ie}ms before returning completion`),await Ny(ie),xF(t,r,i)))return Yo.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:RI(M)};let V=[];for(let Q of G){let z=N7t(t,e.textDocument,N,Q,M),re=f?RVe(e.textDocument,e.position,Q):0,ne={completion:P7t(Q.choiceIndex,Q.completionText,h.trailingWs),telemetry:z,isMiddleOfTheLine:f,suffixCoverage:re,copilotAnnotations:Q.copilotAnnotations,clientCompletionId:Q.clientCompletionId};V.push(ne)}return M.properties.clientCompletionId=V[0]?.clientCompletionId,M.measurements.foundOffset=V?.[0]?.telemetry?.measurements?.foundOffset??-1,Yo.debug(t,`Produced ${V.length} results from ${P3(Y)} at ${M.measurements.foundOffset} offset`),xF(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:RI(M)}:(m.isSpeculative||t.get(Of).setGhostText(E,h.prompt.suffix,G,Y),l("complete"),{type:"success",value:[V,Y],telemetryData:Qa(M),telemetryBlob:M,resultType:Y,performanceMetrics:c})})}s(I7t,"getGhostTextWithoutAbortHandling");async function nye(t,e,r,n){let i=cr();t.get(Of).currentRequestId=i;let o=await D7t(t,e.textDocument,i,n);await GS.catch(()=>{});try{return t.get(Lm).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(Dy).notifyRequest(e,i,o,r,n),await I7t(t,e,i,o,r,n)}catch(a){if(Nu(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:RI(o,{cancelledNetworkRequest:!0})};throw a}}s(nye,"getGhostText");function T7t(t,e,r,n){let i=t.get(Of).getCompletionsForUserTyping(e,r.suffix),o=B7t(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(T7t,"getLocalInlineSuggestion");function w7t(t,e){let r=_7t(e,t),n=S7t(e,t);return r&&!n?void 0:r&&n}s(w7t,"isInlineSuggestion");function _7t(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(_7t,"isMiddleOfTheLine");function S7t(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(S7t,"isValidMiddleOfTheLinePosition");function R7t(t,e){return e.lineAt(t).text.trim().length===0}s(R7t,"isNewLine");var kE=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function k7t(t,e,r,n,i,o,a){if(t.get(kE).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Rt(t,"ghostText.longFileMultilineSkip",Dr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&Ly.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await sGe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&R7t(n,r))return{requestMultiline:!0};let l=!1;return!i&&H0(r.detectedLanguageId)?l=await tJ(r,n):i&&H0(r.detectedLanguageId)&&(l=await tJ(r,n)||await tJ(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=uGe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(k7t,"shouldRequestMultiline");function oJ(t,e,r){t.get(Eg).append(e.prefix,e.prompt.suffix,r)}s(oJ,"appendToCache");function P7t(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(P7t,"adjustLeadingWhitespace");function B7t(t,e,r,n){let i=t.get(Eg).findAll(e,r);return i.length===0?(Yo.debug(t,"Found no completions in cache"),[]):(Yo.debug(t,`Found ${i.length} completions in cache`),i.map(o=>rye(o,{forceSingleLine:!n})))}s(B7t,"getCompletionsFromCache");async function D7t(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=Dr.createAndMarkAsIssued(i);return await t.get(Bt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(D7t,"createTelemetryWithExp");function N7t(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,LVe(l,e),l.extendWithRequestId(o),l.measurements.confidence=wVe(t,l),l.measurements.quantile=_Ve(t,l),Yo.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(N7t,"telemetryWithAddData");function L7t(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);LVe(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(ns.range(p.range.start,n)),h=e.getText(ns.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(_=>(0,DVe.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},E={...Q4(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let x=u.extendedBy(y,E);return Rt(t,"ghostText.issued",x),u}s(L7t,"telemetryIssued");function LVe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(LVe,"addDocumentTelemetry");function MVe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Rt(t,`ghostText.${e}`,c)}s(MVe,"telemetryPerformance");var Of=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&FVe(this.choices[0].completionText,n))return M7t(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function M7t(t,e){return t.filter(r=>FVe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(M7t,"adjustChoicesStart");function FVe(t,e){return t.startsWith(e)&&t.length>e.length}s(FVe,"startsWithAndExceeds");d();d();d();var N2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(pr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var iye=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??In.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function Wy(t,e){return new iye(t,e)}s(Wy,"createCompletionState");d();d();d();d();d();d();var OVe="code-referencing";var Qf=new vt(OVe);var F7t=3e3,oye=2,QVe=256,UVe=Math.log(QVe)/Math.log(oye)/oye,Tg={connection:"disabled",maxAttempts:UVe,retryAttempts:0,initialWait:!1},sJ,aJ=[];function O7t(){if(sJ)return sJ;function t(x){return aJ.push(x),()=>{let b=aJ.indexOf(x);b!==-1&&aJ.splice(b,1)}}s(t,"subscribe");function e(){for(let x of aJ)x()}s(e,"afterUpdateConnection");function r(x){Tg.connection!==x&&(Tg.connection=x,e())}s(r,"updateConnection");function n(){return Tg.connection==="connected"}s(n,"isConnected");function i(){return Tg.connection==="disconnected"}s(i,"isDisconnected");function o(){return Tg.connection==="retry"}s(o,"isRetrying");function a(){return Tg.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function f(){r("disabled")}s(f,"setDisabled");function p(x){Tg.initialWait!==x&&(Tg.initialWait=x)}s(p,"setInitialWait");function m(x,b=F7t){o()||(u(),p(!0),g(x,b))}s(m,"enableRetry");function h(){return Tg.initialWait}s(h,"isInitialWait");async function g(x,b){Qf.info(x,`Attempting to reconnect in ${b}ms.`),await y(b),p(!1);let _=x.get(jn);async function k(P,N){if(P>QVe){Qf.info(N,"Max retry time reached, disabling."),f();return}let M=s(async()=>{Tg.retryAttempts=Math.min(Tg.retryAttempts+1,UVe);try{Qf.info(N,`Pinging service after ${P} second(s)`);let J=await _.fetch(new URL("_ping",q4(N)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(J.status!==200||!J.ok)await k(P**2,N);else{Qf.info(N,"Successfully reconnected."),c();return}}catch{await k(P**2,N)}},"tryAgain");setTimeout(()=>void M(),P*1e3)}s(k,"succeedOrRetry"),Qf.info(x,"Attempting to reconnect."),await k(oye,x)}s(g,"attemptToPing");let y=s(x=>new Promise(b=>setTimeout(b,x)),"timeout");function E(x){return{dispose:t(x)}}return s(E,"listen"),sJ={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:f,enableRetry:m,listen:E,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},sJ}s(O7t,"registerConnectionState");var L2=O7t();d();var Dl={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},bF={[Dl.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[Dl.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[Dl.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function sye(t){return t===401?Dl.Unauthorized:t===400?Dl.BadArguments:t===404?Dl.NotFound:t===429?Dl.RateLimit:t>=500&&t<600?Dl.InternalError:t>=600?Dl.ConnectionError:Dl.Unknown}s(sye,"getErrorType");function Gy(t,e,r={}){return{kind:"failure",reason:sye(Number(t)),code:Number(t),msg:e,meta:r}}s(Gy,"createErrorResponse");d();var Q7t=/^[1-6][0-9][0-9]$/,U7t=/([A-Z][a-z]+)/,q7t="code_referencing",IF=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[q7t,this.baseKey,...e].join(".")}},aye=class extends IF{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Dr.createAndMarkAsIssued();Rt(e,r,n)}handleFocus({context:e}){let r=Dr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Rt(e,n,r)}handleWrite({context:e}){let r=Dr.createAndMarkAsIssued(),n=this.buildKey("write","count");Rt(e,n,r)}},a$n=new aye,cye=class extends IF{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Dr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Rt(e,i,n)}handleDismiss({context:e,actor:r}){let n=Dr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Rt(e,i,n)}},c$n=new cye,lye=class extends IF{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=Dr.createAndMarkAsIssued({origin:r,reason:n});Jh(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=Dr.createAndMarkAsIssued({origin:r,reason:n});Jh(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(Q7t)){Qf.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(U7t).filter(c=>!!c).join("_").toLowerCase(),a=Dr.createAndMarkAsIssued({message:i});Jh(e,this.buildKey(o,r),a)}},cJ=new lye;var H7t="twirp/github.snippy.v1.SnippyAPI";async function uye(t,e,r,n){let i;try{i=await t.get(Qr).getToken()}catch{return L2.setDisconnected(),Gy(401,bF[Dl.Unauthorized])}if(Qf.info(t,`Calling ${e}`),L2.isRetrying())return Gy(600,"Attempting to reconnect to the public code matching service.");if(L2.isDisconnected())return Gy(601,"The public code matching service is offline.");let o;try{o=await t.get(jn).fetch(cy(t,i,"origin-tracker",`${H7t}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...A0(t)},signal:n})}catch{return L2.enableRetry(t),Gy(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let y=g.message;throw cJ.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:y}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:f}=c,p=Number(l),m=sye(p),h=u||"unknown error";switch(m){case Dl.Unauthorized:return Gy(l,bF[Dl.Unauthorized],f);case Dl.BadArguments:return Gy(l,h,f);case Dl.RateLimit:return L2.enableRetry(t,60*1e3),Gy(l,bF.RateLimitError,f);case Dl.InternalError:return L2.enableRetry(t),Gy(l,bF[Dl.InternalError],f);default:return Gy(l,h,f)}}s(uye,"call");d();var lJ=I.Object({kind:I.Literal("failure"),reason:I.String(),code:I.Number(),msg:I.String(),meta:I.Optional(I.Any())}),G7t=I.Object({matched_source:I.String(),occurrences:I.String(),capped:I.Boolean(),cursor:I.String(),github_url:I.String()}),qVe=I.Object({source:I.String()}),j7t=I.Object({snippets:I.Array(G7t)}),HVe=I.Union([j7t,lJ]),WVe=I.Object({cursor:I.String()}),V7t=I.Object({commit_id:I.String(),license:I.String(),nwo:I.String(),path:I.String(),url:I.String()}),$7t=I.Object({has_next_page:I.Boolean(),cursor:I.String()}),z7t=I.Object({count:I.Record(I.String(),I.String())}),Y7t=I.Object({file_matches:I.Array(V7t),page_info:$7t,license_stats:z7t}),GVe=I.Union([Y7t,lJ]);async function jVe(t,e,r){let n=await uye(t,"Match",{method:"POST",body:v2(qVe,{source:e})},r);return v2(HVe,n)}s(jVe,"Match");async function VVe(t,{cursor:e},r){let n=await uye(t,"FilesForMatch",{method:"POST",body:v2(WVe,{cursor:e})},r);return v2(GVe,n)}s(VVe,"FilesForMatch");d();var TF=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),uJ=65;function X7t(t){let e=0,r;TF.lastIndex=0;do if(r=TF.exec(t),r&&(e+=1),e>=uJ)break;while(r);return e}s(X7t,"lexemeLength");function Z7t(t,e){let r=0,n;TF.lastIndex=0;do if(n=TF.exec(t),n&&(r+=1,r>=e))return TF.lastIndex;while(n);return t.length}s(Z7t,"offsetFirstLexemes");function $Ve(t,e){let r=t.split("").reverse().join(""),n=Z7t(r,e);return r.length-n}s($Ve,"offsetLastLexemes");function wF(t){return X7t(t)>=uJ}s(wF,"hasMinLexemeLength");function tQt(t){return Sy.Check(lJ,t)}s(tQt,"isError");async function zVe(t,e){let r=await e();if(tQt(r)){cJ.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(zVe,"snippyRequest");function YVe(t){return"kind"in t&&t.kind==="failure"}s(YVe,"isMatchError");async function KVe(t,e,r,n){let o=await t.get(pr).getTextDocument({uri:e});if(!o){Qf.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!wF(a)||!wF(a))return;let c=r;if(!wF(r)){let h=a.slice(0,n),g=$Ve(h,uJ);c=a.slice(g,n+r.length)}if(!wF(c))return;let l=await zVe(t,()=>jVe(t,c));if(!l||YVe(l)||!l.snippets.length){Qf.info(t,"No match found");return}Qf.info(t,"Match found");let{snippets:u}=l,f=u.map(async h=>{let g=await zVe(t,()=>VVe(t,{cursor:h.cursor}));if(!g||YVe(g))return;let y=g.file_matches,E=g.license_stats;return{match:h,files:y,licenseStats:E}}),m=(await Promise.all(f)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let y=Array.from(g).sort(),E=n,x=n+h.match.matched_source.length,b=o.positionAt(E),_=o.positionAt(x);await t.get(Fd).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:E,offsetEnd:x,version:o.version,location:{start:b,end:_},matchingText:c,details:y.map(k=>({license:k,url:h.match.github_url}))})}}s(KVe,"fetchCitations");d();function dye(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(dye,"editDistance");function rQt(){return new Map}s(rQt,"emptyLexDictionary");function nQt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(nQt,"reverseLexDictionary");function*iQt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(iQt,"lexGeneratorWords");function JVe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(JVe,"lexicalAnalyzer");function XVe(t){return t!==" "}s(XVe,"notSingleSpace");function ZVe(t,e,r=iQt){let[n,i]=JVe(t,rQt(),r,XVe),[o,a]=JVe(e,i,r,XVe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=nQt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(y,E,x,b){if(b===0||b===l-1){let _=c[n[x][0]];return b==0&&_.endsWith(u)||b==l-1&&_.startsWith(f)?0:1}else return y===E?0:1}s(p,"compare");let m=dye(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(ZVe,"lexEditDistance");d();function e$e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(e$e,"computeCompCharLen");function t$e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(t$e,"computeCompletionText");function r$e(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(r$e,"computePartialLength");var QI=new vt("postInsertion"),n$e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],i$e=50,oQt=1500,sQt=.5,aQt=500,fye={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function o$e(t,e,r,n,i){let o=await t.get(mn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return QI.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await G3(t,r.properties.headerRequestId,Wy(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=ZAe(l,n,a.detectedLanguageId),y=await CVe(h,void 0)(m),E=Math.min(c.length,n+(y?y*2:aQt)),x=c.substring(n,E);return{prompt:p,capturedCode:x,terminationOffset:y??-1}}}s(o$e,"captureCode");function dJ(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{QI.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),PGe(t,e,u)});let o=new N2(t,n,r-1),a=new N2(t,n,r),c=s(async l=>{QI.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:m}=await o$e(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});QI.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Rt(t,e+".capturedAfterRejected",g,1)},"checkInCode");n$e.filter(l=>l.captureRejection).map(l=>o.push(Wu(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(dJ,"postRejectionTasks");function M2(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:e$e(a,r)});QI.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),kGe(t,e,l);let u=r;r=t$e(r,a);let f=r.trim(),p=new N2(t,i,n),m=new N2(t,i,n+r.length),h=s(async g=>{await dQt(t,e,f,n,i,g,l,p,m)},"stillInCodeCheck");if(fye.triggerPostInsertionSynchroneously&&Lh(t)){let g=h({seconds:0,captureCode:fye.captureCode,captureRejection:fye.captureRejection});t.get(Za).register(g)}else n$e.map(g=>p.push(Wu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Wu(t,cQt,"post insertion citation check")(t,i,u,r,n,c)}s(M2,"postInsertionTasks");async function cQt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(JW(t)?.getTokenValue("sn")==="1")return;await KVe(t,e,n,i);return}let a=await t.get(pr).getTextDocument({uri:e});if(a){let c=pye(a.getText(),n,i$e,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=lQt(r.length,n.length,c.start_offset);if(l===void 0){QI.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+uQt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=f&&m?a?.getText({start:f,end:m}):"<unknown>";await t.get(Fd).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&m?{start:f,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(cQt,"citationCheck");function lQt(t,e,r){if(!(e<t&&r>e))return r}s(lQt,"computeCitationStart");function uQt(t,e,r){return e<t?Math.min(r,e):r}s(uQt,"computeCitationEnd");function pye(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=ZVe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=dye(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=sQt?1:0}}s(pye,"find");async function dQt(t,e,r,n,i,o,a,c,l){let u=await t.get(mn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=pye(p,r,i$e,c.offset);m.stillInCodeHeuristic||(m=pye(p,r,oQt,c.offset)),QI.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Rt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:E}=await o$e(t,i,h,c.offset,l.offset),x={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...x,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:E});QI.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Rt(t,e+".capturedAfterAccepted",b,1)}}}s(dQt,"checkStillInCode");var mye=new vt("ghostText"),Hd=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function fQt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(fQt,"computeRejectedCompletions");function hye(t,e){let r=t.get(Hd);if(!r.position||!r.uri)return;let n=fQt(r);n.length>0&&dJ(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(hye,"rejectLastShown");function s$e(t,e,r,n){let i=t.get(Hd);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&hye(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(s$e,"setLastShown");function a$e(t,e){let r=t.get(Hd);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;mye.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,HY(t,"ghostText",e)}}s(a$e,"handleGhostTextShown");function fJ(t,e){let r=t.get(Hd);r.resetState(),mye.debug(t,"Ghost text post insert");let n={compType:"full"};return r.resetPartialAcceptanceState(),M2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(fJ,"handleGhostTextPostInsert");function c$e(t,e,r,n=0){let i=t.get(Hd);mye.debug(t,"Ghost text partial post insert");let o=r$e(e,r,n);if(o)return i.partiallyAcceptedLength=r,M2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(c$e,"handlePartialGhostTextPostInsert");function l$e(t){let e=new v3;return e.set(nu,t),e.set(ly,new ly),e.set(lo,new lo),e.set(Eg,new Eg),e.set(Xh,new Xh),e.set(Bt,new Bt(e)),e.set(YA,new YA),e.set(Jl,new Jl(e)),e.set(xl,new xl),e.set(xd,new xd),e.set(Mf,new iF),e.set(dg,new YP),e.set(eg,new i9),e.set(Za,new Za),e.set(Dy,new Dy(e)),e.set(mn,new mn(e)),e.set(Fm,new Fm(e)),e.set(RE,JK(e)),e.set(Hd,new Hd),e.set(Of,new Of),e.set(kE,kE.default),e.set(CE,new CE(e)),e.set(mm,new mm(e)),e.set(Il,new Il),e.set(Lf,new Lf(e)),e.set(ds,new ds),e.set(_m,new _m(e)),e.set(km,new km),e}s(l$e,"createCommonContext");d();d();var pJ=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var K3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var hYn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),_F=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=await this.ctx.get(Mf).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new pJ(a.reason);case"failed":throw new K3(a.reason)}}};d();d();var u$e=Ne(require("node:util"));function d$e(t,...e){return`[${t}] ${pQt(e)}`}s(d$e,"formatLogMessage");function pQt(t){return u$e.default.formatWithOptions({maxStringLength:1/0},...t)}s(pQt,"format");function mJ(t){return i5e(t)}s(mJ,"verboseLogging");var hJ=class extends Tc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||mJ(r))&&this.console.warn(`[${i}]`,...o)}};d();var f$e=require("node:util");var J3=class extends ay{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){Jh(e,"log",Dr.createAndMarkAsIssued({context:r,level:M_[1],message:mQt(...n)}),1)}sendException(e,r,n){Ia(e,r,n)}};function mQt(...t){return t.map(e=>(0,f$e.inspect)(e)).join(" ")}s(mQt,"telemetryMessage");d();var Snt=Ne(require("crypto")),Rnt=Ne(require("fs")),$Z=Ne(wnt()),knt=require("tls"),Pnt=Ne(_nt());var sD=new vt("certificates"),Uc=class{static{s(this,"RootCertificateReader")}};function zZ(t,e=process.platform){return new Uve(t,[new qve,new Hve,grr(t,e)])}s(zZ,"getRootCertificateReader");function grr(t,e){switch(e){case"linux":return new Wve(t);case"darwin":return new Gve(t);case"win32":return new jve(t);default:return new Vve}}s(grr,"createPlatformReader");var Qve=class extends Uc{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return sD.warn(this.ctx,"Failed to read root certificates:",r),[]}}},Uve=class extends Uc{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new Qve(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new Snt.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return sD.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&sD.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},qve=class extends Uc{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return knt.rootCertificates}},Hve=class extends Uc{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await Bnt(e):[]}},Wve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await Bnt(n);sD.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},Gve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=$Z.get({excludeBundled:!1,format:$Z.Format.pem});return sD.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},jve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=Pnt.all();return sD.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},Vve=class extends Uc{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function Bnt(t){let e;try{e=await Rnt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(Bnt,"readCertsFromFile");d();var Gnt=Ne(require("http"));var qrr=407,vu=new vt("proxySocketFactory"),fC=class{static{s(this,"ProxySocketFactory")}},hR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function YZ(t){return new Yve(t,new Kve(t))}s(YZ,"getProxySocketFactory");var Yve=class extends fC{constructor(r,n,i=new VO,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Or(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(vu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof hR&&i.code===`ProxyStatusCode${qrr}`){vu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return vu.debug(this.ctx,"Proxy authorization successful, caching result"),Rt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(vu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(vu.debug(this.ctx,"Proxy authorization successful, received token"),i)return vu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){vu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);vu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);vu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return vu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return vu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return vu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},Kve=class extends fC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(lo).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{vu.debug(this.ctx,"Attempting to establish connection to proxy");let c=Gnt.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{vu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new hR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new hR(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(vu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{vu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new hR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{vu.debug(this.ctx,"Proxy socket connection timeout"),a(new hR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},VO=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(Wnt()))}};d();var znt=require("node:os");var Hrr=new vt("repository"),gR="\\\\",Ynt="(?:[#;].*)",lD=`(?:[^"${gR}]|${gR}.)`,Wrr="[0-9A-Za-z-]",jnt=`[A-Za-z]${Wrr}*`,Knt=`\\s*${Ynt}?$`,Jnt=`(?:[^"${gR};#]|${gR}.)`,Grr=`(?:"${lD}*"|"${lD}*(?<strCont>${gR})$)`,jrr=`(?:${Jnt}|${Grr})+`,Vrr=`(?:(?<cont>${gR})$)`,Xnt=`(?<value>${jrr})${Vrr}?${Knt}`,Vnt=new RegExp(`^${Xnt}`),$rr=new RegExp(`^(?<value>${lD}*(?:(?<strCont>${gR})$|(?<quote>")))`),zrr=new RegExp(`^\\s*(?:(?<key>${jnt})\\s*=\\s*${Xnt}|(?<soloKey>${jnt})${Knt})`),Yrr=new RegExp(`(?<value>${Jnt}+)|"(?<string>${lD}*)"`,"g"),$nt="[-.0-9A-Za-z]+",Krr=`\\s+"(?<ext>${lD}*)"`,Jrr=`\\s+"(?<extOnly>${lD}*)"`,Xrr=new RegExp(`^\\s*\\[(?:(?<simple>${$nt})${Krr}|${Jrr}|(?<simpleOnly>${$nt}))\\]`),Zrr=new RegExp(`^\\s*${Ynt}$`),Jve=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(Xrr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(zrr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match($rr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Vnt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Vnt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Yrr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Zrr.test(this.line)&&(this.line="")}},KZ=class extends Cg{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await CE.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new E2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new Jve(i),a=new E2;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(yo).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&Hrr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=Lo(this.xdgConfigUri(),"git","config"),o=Lo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Oi(r).toLowerCase()!=="config.worktree")return;let n=Gu(r),i=Lo(n,"commondir");try{let o=(await e.get(yo).readFileString(i)).trimEnd();return Lo(O_(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Kc(process.env.XDG_CONFIG_HOME):Lo(this.homeUri(),".config")}homeUri(){return Kc((0,znt.homedir)())}};d();var Znt=require("child_process");var JZ=class extends Cg{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Znt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){RWe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=ls(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new E2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var tit=Ne(require("node:events"));var eit="onWorkspaceChanged",cp=class{constructor(){this.emitter=new tit.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(eit,e)}emit(e){this.emitter.emit(eit,e)}};function rit(t){let e=l$e(t);return enr(e),e.set(Uc,zZ(e)),e.set(fC,YZ(e)),e.set(Cg,new vY([new JZ,new KZ])),e.set(cp,new cp),e.set(_F,new _F(e)),e}s(rit,"createProductionContext");function enr(t){t.set(Hp,Hp.fromEnvironment(!1)),t.set(ay,new J3),t.set(Tc,new hJ(console))}s(enr,"setupRudimentaryLogging");var eii=new vt("context");d();d();var Ur=new vt("chat");d();d();var ol=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(ol||{});function Xr(t){return t?(t=lp(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Xr,"getTextPart");var nit=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),iit=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function AT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(AT,"parseToolCallArguments");function oit(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(oit,"toOpenAIToolCall");function sit(t,e,r,n,i,o,a,c){let l=JSON.parse(JSON.stringify(e));return r.tool_calls&&(l.tool_calls=r.tool_calls),S3(t,[l],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c}}s(sit,"convertToChatCompletion");function $O(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s($O,"isChatCompletionContentPartArray");function XZ(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(XZ,"isChatMessageArray");function lp(t){if(typeof t=="string")return t;if($O(t))return t;if(XZ(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(lp,"resolveAsChatMessageContent");function zO(t,e){return(typeof t=="string"||$O(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(zO,"appendChatMessageContent");function Xve(t,e){if(t){if(typeof t=="string"||$O(t))return[{role:"assistant",content:t}];if(XZ(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(Xve,"resolveResponseAsChatMessages");d();var Zve=new vt("streamMessages");function ait(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Zve.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Zve.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Zve.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=nF(e.solution),a={role:"assistant",content:n};return sit(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(ait,"prepareChatCompletionForReturn");var Xm=new vt("fetchChat"),ZZ=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let c=a.body();try{c.destroy()}catch(l){Xm.exception(e,l,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let c=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,c,a)}if(e.get(_m).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let c=await a.text(),l=JSON.parse(c),u=l.choices!=null?l.choices[0].message:{role:"assistant",content:""},f=a.headers.get("X-Request-ID")??cr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Xr(u.content).split(" "),requestId:{headerRequestId:f,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=Xr(u.content);return await i(m,{text:m,copilotReferences:l.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>R3(a),"getProcessingTime")}}else{let l=SI.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:xE(l,f=>ait(e,f,n)),getProcessingTime:s(()=>R3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return Dr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:k3(e,n.count),top_p:OY(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=fE(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await tnr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Xm.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Rt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Qr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Xm.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Xm.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Qr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Xm.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function tnr(t,e,r,n,i,o,a,c,l,u,f,p){let m=Lo(r,n,i);if(!c)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:l});FY(a,h,["messages"]),h.properties.headerRequestId=o,Rt(t,"request.sent",h);let g=la(),y=EGe(l),E={...nI(t),...f.toCapiHeaders()};return a.messages?.some(x=>Array.isArray(x.content)?x.content.some(b=>"image_url"in b):!1)&&(E["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(x=>{rnr(x)&&x.tool_calls&&(x.tool_calls=x.tool_calls.map(b=>oit(b)))}),A_(t,m,c,y,o,a,p,E).then(x=>{let b=x2(x);h.extendWithRequestId(b);let _=la()-g;return h.measurements.totalTimeMs=_,Xm.info(t,`Request ${o} at <${m}> finished with ${x.status} status after ${_}ms`),Xm.debug(t,"request.response properties",h.properties),Xm.debug(t,"request.response measurements",h.measurements),Xm.debug(t,"messages:",JSON.stringify(e)),Rt(t,"request.response",h),x}).catch(x=>{if(Nu(x))throw x;let b=h.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",b),h.properties.message=String(Ud(x,"name")??""),h.properties.code=String(Ud(x,"code")??""),h.properties.errno=String(Ud(x,"errno")??""),h.properties.type=String(Ud(x,"type")??"");let _=la()-g;throw h.measurements.totalTimeMs=_,Xm.info(t,`Request ${o} at <${m}> rejected with ${String(x)} after ${_}ms`),Xm.debug(t,"request.error properties",h.properties),Xm.debug(t,"request.error measurements",h.measurements),Rt(t,"request.error",h),x}).finally(()=>{S3(t,e,h)})}s(tnr,"fetchWithInstrumentation");function rnr(t){return"tool_calls"in t}s(rnr,"isChatMessageWithToolCalls");var ka=class{constructor(e){this.ctx=e;this.fetcher=new ZZ}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=cr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(Qr).getToken(),u=cy(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions",p=e.authToken??l.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return c&&(m.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=eF(r.chatCompletions,l=>this.postProcess(l,i));Ur.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Ur.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:Xr(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:Xr(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>Xr(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return iJ(e.tokens)?(r.extendWithRequestId(e.requestId),Rt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Ur.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Nu(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Ur.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var pC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var yT=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var nnr=".github/copilot-instructions.md",inr=".github/git-commit-instructions.md",onr="global-copilot-instructions",snr="global-git-commit-instructions",mC=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:onr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:snr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=Lo(r.uri,n),l=(await e.get(yo).readFileString(c)).trim();if(!l)return;(await EE(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,nnr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,inr,void 0,i,0)),c});return await Promise.all(o),i}};d();var xu=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},eee=class extends xu{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};d();d();d();function tee(){return cr()}s(tee,"uuidV4");d();var CT=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var hC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var YO="filepath:",sl="...existing code...",exe="copilot-edited-file";d();function uD(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(uD,"getFenceForCodeBlock");var up=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=uD(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${YO} ${La(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var txe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},KO=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=Xr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=Xr(a.content).endsWith(`
`)?Xr(a.content):`${Xr(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${exe}>.
</SYSTEM>


`}return o+Xr(a.content)},"")+`


The resulting document:
<${exe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${sl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new up({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new txe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new up({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var YE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(mn).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var gC=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=yg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new rn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var rxe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new rn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new gC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Nm(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var ree=class extends rxe{constructor(r){super();this.value=r;this._t=new gC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();var JO=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new dn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let E=u.slice(Ht.emptyAt(p),new Ht(0,m));o.push(E)}if(!f)throw new dn("Invariant violation: lastIntersecting is undefined");let h=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let E=f.slice(Ht.ofStartAndLength(f.replaceRange.endExclusive,0),new Ht(f.getNewLength()-h,f.getNewLength()));i.unshift(E),a-=E.getNewLength()-E.replaceRange.length}let g=new Ht(p,c.replaceRange.endExclusive-a),y=c.slice(g,new Ht(0,c.getNewLength()));o.push(y)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Ht(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return dHe(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}},nee=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Ht(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Ht(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},cit=class t extends JO{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var iee=class extends JO{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(Yd.replace(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new dp(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new Yd(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new Yd(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new dp(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new dp(r)}normalizeEOL(e){return new dp(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=Yd.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?dp.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new ree(this.apply(e.value))}mapData(e){return new nxe(this.replacements.map(r=>new dD(r.replaceRange,r.newText,e(r))))}},oee=class extends nee{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=DI(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,_E(n,this.newText)),a=new Ht(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new Yd(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new Yd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=DI(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Ht(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=_E(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Ht(0,this.newText.length-i))}toEdit(){return new dp([this])}},dp=class t extends iee{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new Yd(e,r)])}static insert(e,r){return new t([new Yd(Ht.emptyAt(e),r)])}static delete(e){return new t([new Yd(e,"")])}static fromJson(e){return new t(e.map(Yd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},Yd=class t extends oee{static{s(this,"StringReplacement")}static insert(e,r){return new t(Ht.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var nxe=class t extends iee{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new dD(e,r,n)])}static insert(e,r,n){return new t([new dD(Ht.emptyAt(e),r,n)])}static delete(e,r){return new t([new dD(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new dp(this.replacements.map(e=>new Yd(e.replaceRange,e.newText)))}},dD=class t extends oee{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Ht.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};var fD=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=dp.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=anr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),m=f.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),y=ixe(g,m),E=ixe(m,p),x=ixe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${y.toFixed(2)} noRevert:(${E.toFixed(2)},${x.toFixed(2)})`),E!==1){let b=1-Math.max(x-E,0)/(1-E);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*y,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function ixe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(ixe,"compute4GramTextSimilarity");function anr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(anr,"applyEditsToRanges");d();d();var XO=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new rn(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function see(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new XO(t),a=new XO(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(f,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),y=new Ht(h,g);c.push(new Yd(y,m))}return new dp(c)}s(see,"stringEditFromDiff");d();d();var lit=require("worker_threads");var oxe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function cnr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(cnr,"createRpcProxy");var aee=class{constructor(e,r,n){this.responseHandler=new oxe;this.worker=new lit.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=cnr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();d();d();var lee=!1,uee=!1,cee=!1,lnr=!1,unr=!1,uit=!1,dnr=!1,fnr=!1,pnr=!1,mnr=!1;var KE,JE=globalThis,Zm;typeof JE.vscode<"u"&&typeof JE.vscode.process<"u"?Zm=JE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Zm=process);var dit=typeof Zm?.versions?.electron=="string",hnr=dit&&Zm?.type==="renderer";typeof Zm=="object"?(lee=Zm.platform==="win32",uee=Zm.platform==="darwin",cee=Zm.platform==="linux",lnr=cee&&!!Zm.env.SNAP&&!!Zm.env.SNAP_REVISION,dnr=dit,pnr=!!Zm.env.CI||!!Zm.env.BUILD_ARTIFACTSTAGINGDIRECTORY,unr=!0):typeof navigator=="object"&&!hnr?(KE=navigator.userAgent,lee=KE.indexOf("Windows")>=0,uee=KE.indexOf("Macintosh")>=0,fnr=(KE.indexOf("Macintosh")>=0||KE.indexOf("iPad")>=0||KE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,cee=KE.indexOf("Linux")>=0,mnr=KE?.indexOf("Mobi")>=0,uit=!0):console.error("Unable to resolve platform.");var sxe=0;uee?sxe=1:lee?sxe=3:cee&&(sxe=2);var AR=lee,fit=uee;var gnr=uit&&typeof JE.importScripts=="function",fai=gnr?JE.origin:void 0;var AC=KE;var Anr=typeof JE.postMessage=="function"&&!JE.importScripts,pai=(()=>{if(Anr){let t=[];JE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),JE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var ynr=!!(AC&&AC.indexOf("Chrome")>=0),mai=!!(AC&&AC.indexOf("Firefox")>=0),hai=!!(!ynr&&AC&&AC.indexOf("Safari")>=0),gai=!!(AC&&AC.indexOf("Edg/")>=0),Aai=!!(AC&&AC.indexOf("Android")>=0);var yR,axe=globalThis.vscode;if(typeof axe<"u"&&typeof axe.process<"u"){let t=axe.process;yR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?yR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:yR={get platform(){return AR?"win32":fit?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var ZO=yR.cwd,pit=yR.env,mit=yR.platform,bai=yR.arch;var Enr=65,vnr=97,xnr=90,bnr=122,xT=46,Ul=47,Yf=92,ET=58,Inr=63,dee=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Tnr(t,e){if(t===null||typeof t!="object")throw new dee(e,"Object",t)}s(Tnr,"validateObject");function Ga(t,e){if(typeof t!="string")throw new dee(e,"string",t)}s(Ga,"validateString");var Kf=mit==="win32";function Ai(t){return t===Ul||t===Yf}s(Ai,"isPathSeparator");function cxe(t){return t===Ul}s(cxe,"isPosixPathSeparator");function vT(t){return t>=Enr&&t<=xnr||t>=vnr&&t<=bnr}s(vT,"isWindowsDeviceRoot");function fee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Ul}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==xT||i.charCodeAt(i.length-2)!==xT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===xT&&c!==-1?++c:c=-1}return i}s(fee,"normalizeString");function wnr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(wnr,"formatExt");function hit(t,e){Tnr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${wnr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(hit,"_format");var ja={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Ga(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=ZO():(o=pit[`=${e}`]||ZO(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Yf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ai(f)&&(c=1,u=!0);else if(Ai(f))if(u=!0,Ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else vT(f)&&o.charCodeAt(1)===ET&&(l=o.slice(0,2),c=2,a>2&&Ai(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=fee(r,!n,"\\",Ai),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Ga(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return cxe(o)?"\\":t;if(Ai(o))if(i=!0,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else vT(o)&&t.charCodeAt(1)===ET&&(n=t.slice(0,2),r=2,e>2&&Ai(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?fee(t.slice(r),!i,"\\",Ai):"";return a.length===0&&!i&&(a="."),a.length>0&&Ai(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Ga(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ai(r)||e>2&&vT(r)&&t.charCodeAt(1)===ET&&Ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];Ga(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ai(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ai(r.charCodeAt(1))&&(++i,o>2&&(Ai(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ja.normalize(e)},relative(t,e){if(Ga(t,"from"),Ga(e,"to"),t===e)return"";let r=ja.resolve(t),n=ja.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Yf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Yf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===Yf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===Yf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===Yf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===Yf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===Yf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Yf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===Yf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ja.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Yf){if(e.charCodeAt(1)===Yf){let r=e.charCodeAt(2);if(r!==Inr&&r!==xT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(vT(e.charCodeAt(0))&&e.charCodeAt(1)===ET&&e.charCodeAt(2)===Yf)return`\\\\?\\${e}`;return t},dirname(t){Ga(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ai(i)?t:".";if(Ai(i)){if(r=n=1,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else vT(i)&&t.charCodeAt(1)===ET&&(r=e>2&&Ai(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ai(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Ga(e,"suffix"),Ga(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&vT(t.charCodeAt(0))&&t.charCodeAt(1)===ET&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ai(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ai(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Ga(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===ET&&vT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ai(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===xT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:hit.bind(null,"\\"),parse(t){Ga(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ai(i)){if(n=1,Ai(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ai(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(vT(i)&&t.charCodeAt(1)===ET){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ai(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ai(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===xT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},_nr=(()=>{if(Kf){let t=/\\/g;return()=>{let e=ZO().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>ZO()})(),pc={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:_nr();Ga(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Ul)}return e=fee(e,!r,"/",cxe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Ga(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=t.charCodeAt(t.length-1)===Ul;return t=fee(t,!e,"/",cxe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Ga(t,"path"),t.length>0&&t.charCodeAt(0)===Ul},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Ga(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":pc.normalize(e)},relative(t,e){if(Ga(t,"from"),Ga(e,"to"),t===e||(t=pc.resolve(t),e=pc.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Ul&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Ul)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Ul?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Ul)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Ga(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Ul){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Ga(e,"ext"),Ga(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Ul){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ul){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Ga(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Ul){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===xT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:hit.bind(null,"/"),parse(t){Ga(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Ul,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Ul){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===xT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};pc.win32=ja.win32=ja;pc.posix=ja.posix=pc;var Tai=Kf?ja.normalize:pc.normalize,wai=Kf?ja.isAbsolute:pc.isAbsolute,lxe=Kf?ja.join:pc.join,_ai=Kf?ja.resolve:pc.resolve,Sai=Kf?ja.relative:pc.relative,Rai=Kf?ja.dirname:pc.dirname,git=Kf?ja.basename:pc.basename,Ait=Kf?ja.extname:pc.extname,kai=Kf?ja.format:pc.format,Pai=Kf?ja.parse:pc.parse,Bai=Kf?ja.toNamespacedPath:pc.toNamespacedPath,Dai=Kf?ja.sep:pc.sep,Nai=Kf?ja.delimiter:pc.delimiter;d();var pee=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();d();var uxe=class t{constructor(e){this.edits=e;xg(()=>I2(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new yC(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new yC(e,r)])}static insert(e,r){return new t([new yC(lr.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new yC(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Pl.ofText(o.text);if(e.isBefore(c)){let u=new rn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return mee(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new rn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof rn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof rn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return mee(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new rn(1,1);for(let o of this.edits){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=mee(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=mee(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new fxe(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new yC(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=Pl.ofText(o.text),c=rn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new dn;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let c=this.edits[o+1],l=lr.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new yC(lr.fromPositions(r,n),i)}equals(e){return jM(this.edits,e.edits,(r,n)=>r.equals(n))}},yC=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new dn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new uxe([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=DI(r,n),o=Pl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=lr.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=DI(r,n);r=r.substring(i),n=n.substring(i);let o=_E(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function mee(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return lr.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new dn("start must be before end");return new lr(t.lineNumber,t.column,e.lineNumber,e.column)}s(mee,"rangeFromPositions");var dxe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new rn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new gC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Nm(e)}};var fxe=class extends dxe{constructor(r){super();this.value=r;this._t=new gC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};var e7=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new zr(o,l.original.startLineNumber),new zr(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new zr(o,r+1),new zr(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new CC(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new dn("not a valid diff");return new CC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new CC(new lr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new lr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(Cit(this.original.endLineNumberExclusive,e)&&Cit(this.modified.endLineNumberExclusive,r))return new CC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new CC(lr.fromPositions(new rn(this.original.startLineNumber,1),pD(new rn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(new rn(this.modified.startLineNumber,1),pD(new rn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new CC(lr.fromPositions(pD(new rn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),pD(new rn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(pD(new rn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),pD(new rn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new dn}};function pD(t,e){if(t.lineNumber<1)return new rn(1,1);if(t.lineNumber>e.length)return new rn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new rn(t.lineNumber,r.length+1):t}s(pD,"normalizePosition");function Cit(t,e){return t>=1&&t<=e.length}s(Cit,"isValidLineNumber");var hee=class t extends e7{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=zr.join(e.map(i=>zr.fromRangeInclusive(i.originalRange))),n=zr.join(e.map(i=>zr.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},CC=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new dn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new dn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new yC(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var vit=require("fs");var Jf=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new Dm(()=>{let e=Snr([lxe(__dirname,"diffWorker.js"),lxe(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new aee(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:Eit(i.changes),moves:i.moves.map(a=>new pee(new e7(new zr(a[0],a[1]),new zr(a[2],a[3])),Eit(a[4])))}}};function Eit(t){return t.map(e=>new hee(new zr(e[0],e[1]),new zr(e[2],e[3]),e[4]?.map(r=>new CC(new lr(r[0],r[1],r[2],r[3]),new lr(r[4],r[5],r[6],r[7])))))}s(Eit,"toLineRangeMappings");function Snr(t){for(let e of t)if((0,vit.existsSync)(e))return e}s(Snr,"firstExistingPath");d();d();var Rnr=Symbol("MicrotaskDelay");function knr(t){let e=new TE,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new By)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(knr,"createCancelablePromise");function XE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new By)})}):knr(r=>XE(t,r))}s(XE,"timeout");var mD=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new dn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new dn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var t7=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new By)}},Pnr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Pnr||={});var r7=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new K0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await T2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var gee=class{constructor(e){this._deferred=new t7;this._asyncIterable=new r7(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};d();var yee=new vt("repository"),ZE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},eh=class{static{s(this,"GitBranchLoader")}},Aee=class extends eh{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var Cee=new vt("editSurvivalReporter"),pxe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new hu;this._editSurvivalTracker=new fD(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs);this._sendTelemetryEvent(r)}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=Gu(this._document.uri),r=this.ctx.get(eh);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){Cee.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=Gu(this._document.uri),n=await this.ctx.get(eh).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return Cee.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i){let o=e.computeTrackedEditsSurvivalScore(),a=await this.checkBranchChange();return{fourGram:o.fourGram,noRevert:o.noRevert,timeDelayMs:r,didBranchChange:a,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(mn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new dn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await see(r,n,e.get(Jf)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var Eee=class extends pxe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c)}scheduleReport(e,r){let n=new mD(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{Cee.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new fD(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new fD(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw Cee.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var xit=new vt("editSurvivalTrackerService"),EC=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){xit.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await see(r,n,this.ctx.get(Jf));i=new Eee(this.ctx,e,r,n,a,o)}catch(a){xit.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${bE(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var mc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var Bnr=1e3,Dnr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:pn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},hD=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new vt("codeMapper")}async mapCode(e,r,n,i,o,a=!1){if(!e.resource)throw new hC("No uri found in code block");if(i.isCancellationRequested)throw new CT;e.code.includes(sl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let c=await this.ctx.get(mn).getOrReadTextDocument({uri:e.resource});if(c.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(c.status==="invalid"){let b=`Failed to find file ${e.resource} with status ${c.status} and reason ${c.reason}`,_=new hC(b);throw this.logger.error(this.ctx,b,_),_}let l=c.document.getText();if(l.length===0&&!e.code.includes(sl))return o&&await this.reportCodeBlock(e,o),{code:e.code};let u=new KO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new YE(this.ctx)}),f=this.ctx.get(EC),p=await u.render();p=u.transformToFastApplyMessage(p),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock});let m=await this.ctx.get(Bt).updateExPValuesAndAssignments(),h=tee(),g=[],y=0,E=0,x=l.length+e.code.length+Bnr;for(;;){let b={copilotApiProvider:"proxy",modelConfiguration:Dnr,messages:p,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${h} in iteration ${E} with params: ${JSON.stringify(b,null,2)}`);let k=await this.ctx.get(ka).fetchResponse(b,i,m);if(this.logger.debug(this.ctx,`Received map code response ${h} in iteration ${E} with result: ${JSON.stringify(k,null,2)}`),y=this.calculateResponseLength(k,g,y),k.type==="length"){if(y>x)throw new hC(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${l.length}, Code block length ${e.code.length}`);p=await new KO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new YE(this.ctx),inProgressRewriteContent:k.truncatedValue}).render()}else if(k.type==="success"){let P=g.join("");if(P){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Oi(e.resource),partialText:P,languageId:c.document.detectedLanguageId,markdownCodeFence:uD(P)});let N=f.initialize(c.document,l,P);return{code:P,editSurvivalTrackingSession:N,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:k.requestId}}}else{let N=`No valid completion found for uri ${e.resource}`;throw new hC(N)}}else{if(k.type==="canceled")throw new mc;{let P=`Failed to map code for uri ${e.resource} with result type ${k.type}`;throw this.logger.error(this.ctx,P,k),new hC(P)}}E+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Oi(e.resource)})}};d();var td=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var bT=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var vee=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var IT=class{constructor(e,r){this.request=e;this.id=cr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},mxe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},xee=class{constructor(e=[],r="panel",n="en"){this._id=cr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new mxe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new vee(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var bee=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new td({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:bb,type:"user"},new td({message:bb});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new td({message:bT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new td({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new td({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new td({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new td({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new td({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new td({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new td({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new td({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*Iit(t){yield t}s(Iit,"stringToAsyncIterable");d();d();var vC=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(mC),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),c=[...o,...a];return this.processInstructions(c,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};d();var ev=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Kc(r)}static uriToPath(e){let r=ls(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var Iee=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await vC.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(ev.posixFilePathToUri(e))}getFilePath(e){return ev.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${YO} ${this.exampleFilePath}`,`// ${sl}`,"{ changed code }",`// ${sl}`,"{ changed code }",`// ${sl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${YO} ${this.tsExampleFilePath}`,"class Person {",`   // ${sl}`,"   age: number;",`   // ${sl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new up({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${sl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var Tee=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var hxe="<file>",n7="```",o7="###",Lnr=/^(`+)([^ \n]*)/,i7="filepath:";async function*wit(t,e){let r=new Tee(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(n7.length,hxe.length,o7.length));if(y.startsWith(hxe)||y.startsWith(n7))break;if(y.startsWith(o7)){let E=await r.readLineIncludingLF(),x=E.substring(o7.length).trim();await e(x)?n.length=0:n.push(E)}else await Tit(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(hxe);for(;!r.endOfStream&&!i.startsWith(n7);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Lnr),c=a?a[2]:void 0,l=JGe(c?YGe(c):void 0),u=[`${l.lineComment.start} ${i7}`,`:: ${i7}`,`<!-- ${i7}`,`// ${i7}`,`# ${i7}`],f=Math.max(...u.map(y=>y.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(n7.length,f));if(y.startsWith(n7)){let E=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(E);continue}}if(!h&&u.some(E=>y.startsWith(E))){let E=await r.readLineIncludingLF(),x=u.reduce((b,_)=>y.startsWith(_)?E.substring(_.length):b,E);x=x.split("-->")[0].trim(),x.endsWith(p)&&(x=x.substring(0,x.length-p.length)),x=x.trim(),h=await e(x);continue}await Tit(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(wit,"getCodeBlocksFromResponse");async function Tit(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Tit,"pipeOneLine");function _it(t){if(t.startsWith(`${o7} `))return"";let e=t.indexOf(`
${o7} `);return e===-1?"":t.substring(0,e)+`
`}s(_it,"parseOverallDescription");d();d();var wee=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Mnr=new vt("CopilotEditsConversations"),qc=class{constructor(e){this.editConversations=new Or(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new xee([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Mnr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new wee(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};d();d();var Pa=class{static{s(this,"ModelConfigurationProvider")}},_ee=class extends Pa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Ur.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Bd).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Bd).getMetadata(),i=Onr(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===pn.Gpt35turbo||r===pn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Axe(6144,i),maxResponseTokens:gxe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===pn.Gpt4||r===pn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Axe(10240,i),maxResponseTokens:gxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===pn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await Fnr(this.ctx,i),maxResponseTokens:gxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case VV.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function Fnr(t,e){let r=t.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),Axe(i,e)}s(Fnr,"getExpRequestTokens");function Axe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Axe,"getRequestTokens");function gxe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(gxe,"getResponseTokens");function Onr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(Onr,"filterModelsByCapabilities");var Oo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(Pa).getBestChatModelConfig([n]);if(e.get(_m).quotaExhausted&&!(await e.get(Qr).getToken()).userInfo?.isFreeUser){let o=await e.get(Bd).getFallbackModel();if(o)return e.get(Pa).getBestChatModelConfig([o?.id])}return e.get(Pa).getBestChatModelConfig(fm(r),i)}static transformMessages(e,r){return r===pn.O1Ga||r===pn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var tv=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ka(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=bee.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof CT)await this.reportEnd(e,{message:bb});else if(n instanceof td)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Bt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await Oo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Oo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await Oo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new Iee({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new YE(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:bb,type:"user"},new CT;this.ctx.get(qc).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Iit(r),o=new hD(this.ctx),a=s(async u=>ev.pathToUri(e,u),"createUri"),c=[],l=_it(r);l&&await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),await this.abortIfCancelled(e,n);for await(let u of wit(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async f=>{await this.ctx.get(xu).reportTurn(e,f)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof hC||i instanceof K3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof CT)e.currentTurn.status="cancelled",e.currentTurn.response={message:bb,type:"user"},await this.reportEnd(e,{message:bb});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};d();var gD=class extends bd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Qr).resetToken(),r.get(Ef).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Tb({serverUrl:rG(r,n.serverUrl),apiUrl:rG(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var rfi=new vt("exp");function Sit(t){let e=t.get(Bt);e.registerStaticFilters(qnr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>vi(t,kt.DebugOverrideEngine)||vi(t,kt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>ZW()?"copilot-web":t.get(nn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>yxe(!t.get(lo).isProduction()&&t.get(nn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(nn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Qnr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(nn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>yxe(t.get(nn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Unr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(nn).getRelatedPluginInfo()){let i=qp+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(y6).includes(i)){Fq(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=yxe(n.version)}return r})}s(Sit,"setupExperimentationService");function Qnr(t){let e=t.get(nn).getEditorPluginInfo();return e.name==="copilot"&&sy(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Qnr,"getPluginRelease");function Unr(t){let e=t.get(nn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Unr,"getTargetPopulation");function qnr(t){return Hnr(t)}s(qnr,"createAllFilters");function Hnr(t){let e=t.get(As);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(lo).isProduction()?N_(t):"1.999.0"}}s(Hnr,"createDefaultFilters");function yxe(t){return t.split("-")[0]}s(yxe,"trimVersionSuffix");d();var s7=(r=>(r.enabled="enabled",r.disabled="disabled",r))(s7||{}),rv=Symbol("onMCPToolsListChanged"),th=class{static{s(this,"McpManager")}};d();var Qg=class{static{s(this,"McpRuntimeNotifier")}},See=class extends Qg{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var AD=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var Cxe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},Ree=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Cxe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=f.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var Jo;(n=>{function t(i){return new Exe(i)}n.ok=t,s(t,"ok");function e(i){return new vxe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Jo||={});var Exe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},vxe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();d();var Rit=-1;function yD(){return Rit!==-1?Rit:Date.now()}s(yD,"now");function kit(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(kit,"lineRangeDistance");d();d();var rh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new dn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Hc.fromJson))}static from(e){let r=e.map(i=>new Hc(Ht.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new Hc(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Hc(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return Wnr(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Hc(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new Hc(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new Hc(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},Hc=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=DI(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,_E(r,this.newText)),o=new Ht(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Wnr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new Hc(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Hc(Ht.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Ht(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new Hc(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new rh(n).normalize()}s(Wnr,"joinEdits");var Ys=class t{constructor(e){this.edits=e;kl(I2(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>ma.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([ma.replace(e,r)])}static insert(e,r){return new t([ma.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>ma.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new rh(this.edits.map(e=>new Hc(e.range,e.newText)))}compose(e){return Gnr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=ma.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=ma.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(ma.replaceWithData(Ht.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new kee(i)}if(this.edits.length!==e.arrayLength)throw GM(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=ma.replaceWithData(Ht.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new kee(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Ht(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(ma.replace(Ht.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(ma.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(ma.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function Gnr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(ma.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(ma.replaceWithData(Ht.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let m=ma.replaceWithData(Ht.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Ht(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(ma.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return Ys.create(n).normalize()}s(Gnr,"joinEdits");var ma=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Ht(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Ht(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Ht(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Ys.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=jnr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Vnr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function jnr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(jnr,"commonPrefixLength");function Vnr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(Vnr,"commonSuffixLength");var rd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return xg(()=>null.base.equals(this.base.apply(e))),xg(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return bC.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},kee=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Ys.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new xC(this.edits.map(e=>e.toEdit()))}},xC=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Ys.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=Ys.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Ys.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=Xo.fromEdit(new rd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();var CD=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new nv(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>ma.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Ys.create(r)}mapEdits(e){return new t(this.edits.map(e))}},nv=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new dn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return ma.replace(n,this.newText)}};var Xo=class t{constructor(e){this.edits=e;kl(I2(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Ug.deserialize(r)))}static fromEdit(e){let r=CD.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=nv.joinEdits(o,r);o.length=0;let f=Ug.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(xI(n=>n.lineRange.startLineNumber,bI)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return Ys.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(zr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new zr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Ug(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of VM(this.edits,(l,u)=>kit(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Ug(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Ug=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(zr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Nm(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(lr.fromPositions(new rn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(lr.fromPositions(e.range.getEndPosition(),new rn(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new zr(i,a),n)}toLineEdit(){return new Xo([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new rn(o,a)}else n=new rn(1,1);let i=r.addToPosition(new rn(1,1));return new nv(lr.fromPositions(n,i),"")}else return new nv(new lr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new nv(lr.fromPositions(new rn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new lr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new nv(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return ma.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new zr(r,n),this.newLines.slice(i,this.newLines.length-o))}},$nr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})($nr||={});var bC=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=Xo.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new rd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Xo(r))}};d();var Pee=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw GM(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw GM(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var v7=Ne(Gg());function Vot(t){return t.map(Kir).join(`
`)}s(Vot,"stringifyChatMessages");function Kir({role:t,content:e}){if(t!==v7.Raw.ChatRole.User&&t!==v7.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===v7.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==v7.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(Kir,"stringifyMessage");d();d();var Jir=/^\w[\w\d+.-]*$/,Xir=/^\//,Zir=/^\/\//;function eor(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Jir.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Xir.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Zir.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(eor,"_validateUri");function tor(t,e){return!t&&!e?"file":t}s(tor,"_schemeFix");function ror(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Vg&&(e=Vg+e):e=Vg;break}return e}s(ror,"_referenceResolution");var gs="",Vg="/",nor=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,LT=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||gs,this.authority=e.authority||gs,this.path=e.path||gs,this.query=e.query||gs,this.fragment=e.fragment||gs):(this.scheme=tor(e,a),this.authority=r||gs,this.path=ror(this.scheme,n||gs),this.query=i||gs,this.fragment=o||gs,eor(this,a))}get fsPath(){return mbe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=gs),n===void 0?n=this.authority:n===null&&(n=gs),i===void 0?i=this.path:i===null&&(i=gs),o===void 0?o=this.query:o===null&&(o=gs),a===void 0?a=this.fragment:a===null&&(a=gs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new NT(r,n,i,o,a)}static parse(e,r=!1){let n=nor.exec(e);return n?new NT(n[2]||gs,ote(n[4]||gs),ote(n[5]||gs),ote(n[7]||gs),ote(n[9]||gs),r):new NT(gs,gs,gs,gs,gs)}static file(e){let r=gs;if(AR&&(e=e.replace(/\\/g,Vg)),e[0]===Vg&&e[1]===Vg){let n=e.indexOf(Vg,2);n===-1?(r=e.substring(2),e=Vg):(r=e.substring(2,n),e=e.substring(n)||Vg)}return new NT("file",r,e,gs,gs)}static from(e,r){return new NT(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return AR&&e.scheme==="file"?n=t.file(ja.join(mbe(e,!0),...r)).path:n=pc.join(e.path,...r),e.with({path:n})}toString(e=!1){return hbe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new NT(e);return r._formatted=e.external??null,r._fsPath=e._sep===Yot?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var Yot=AR?1:void 0,NT=class extends LT{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=mbe(this,!1)),this._fsPath}toString(r=!1){return r?hbe(this,!0):(this._formatted||(this._formatted=hbe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=Yot),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Kot={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function $ot(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Kot[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s($ot,"encodeURIComponentFast");function ior(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Kot[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(ior,"encodeURIComponentMinimal");function mbe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,AR&&(r=r.replace(/\//g,"\\")),r}s(mbe,"uriToFsPath");function hbe(t,e){let r=e?ior:$ot,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Vg,n+=Vg),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:$ot(l,!1,!1)),n}s(hbe,"_asFormatted");function Jot(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Jot(t.substr(3)):t}}s(Jot,"decodeURIComponentGraceful");var zot=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ote(t){return t.match(zot)?t.replace(zot,e=>Jot(e)):t}s(ote,"percentDecode");d();var $g=class t{constructor(e){this.uri=e;this._uri=LT.parse(Jc(this.uri))}static{s(this,"DocumentId")}static{this._cache=new wE({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return git(this.uri)}get extension(){return Ait(this.uri)}toUri(){return this._uri}};var x7=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},ste=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new TE;this.liveDependentants=0;this.fetchIssued=!1;this._result=new t7;kl(r.length>0),kl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>b7.deserialize(r)),e.activeDocumentIdx,[],x7.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},b7=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,m,h=i.length,g=new zr(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:zr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Bl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t($g.create(e.id),e.workspaceRoot?LT.parse(e.workspaceRoot):void 0,R2.create(e.languageId),e.documentLinesBeforeEdit,Xo.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?lr.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Bl(e.documentBeforeEdits),xC.deserialize(e.recentEdits),new Bl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,zr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Hi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Jo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Jo.ok(e),i=r.build(n);return new t(n,i)}},MT=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?Vot(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:uF(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,kl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function oor(t,...e){let r=t;for(let n of e)r=n(r);return r}s(oor,"chainStatelessNextEditProviders");var wD=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=oor(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},_D=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Hi(Jo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=Pee.createSortPermutation(a,xI(u=>u.lineRange.startLineNumber,bI)),l=new Xo(c.apply(a));return new Hi(Jo.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},SD=class extends _D{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},RD=class extends _D{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var sor=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),aor=new Map(Object.entries(sor).map(([t,e])=>[t,{languageId:t,...e}]));function Zot(t){return gbe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(Zot,"getLanguage");function gbe(t){return aor.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(gbe,"_getLanguage");d();var kD=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?e0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new e0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new e0(new Ho(0,0),new Ho(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!e0.isRange(e))throw FT("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw FT("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw FT("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Ho=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw FT("line must be non-negative");if(r<0)throw FT("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw FT();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw FT();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},e0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Ho.isPosition(e.start)&&Ho.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new Ho(e,r),a=new Ho(n,i)):Ho.isPosition(e)&&Ho.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Ho.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=Ho.Max(e.start,this._start),n=Ho.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=Ho.Min(e.start,this._start),n=Ho.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw FT();let n;return e?Ho.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return cor(this)}};function FT(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(FT,"illegalArgument");function cor(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(cor,"getDebugDescriptionOfRange");d();function est(t){let r=t.split(/\r?\n/).map(lor),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(est,"looksLikeCode");function lor(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),TAe(t)||(e+=1);{TAe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(lor,"guessLineType");var PD;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(PD||={});function uor(t){return t.replace(/^\s+/g,"")}s(uor,"trimLeadingWhitespace");function Abe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(Abe,"isImportStatement");var dor=new wE(t=>{let e=Zot(t),{start:r,end:n}=e.lineComment,i=`(?:${IAe(r)})`,o=n?`(?:${IAe(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function ybe(t,e){let r=t.match(dor.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=uor(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(ybe,"extractEndLineComment");function cte(t,e){let r=ybe(t,e);if(!(r&&r.content.trim().length>0&&est(r.commentWithoutTokens)))return r}s(cte,"extractExplicativeEndLineComment");var BD=class t extends _D{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>Abe(i,r))||por(e,n).some(i=>Abe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function por(t,e){return lHe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(por,"getOldLines");d();var Ebe=Ne(Gg());d();d();d();var zg;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(zg||={});var _C=t0("instantiationService");function mor(t,e,r){e[zg.DI_TARGET]===e?e[zg.DI_DEPENDENCIES].push({id:t,index:r}):(e[zg.DI_DEPENDENCIES]=[{id:t,index:r}],e[zg.DI_TARGET]=e)}s(mor,"storeServiceDependency");function t0(t){if(zg.serviceIds.has(t))return zg.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");mor(e,r,i)},"id");return e.toString=()=>t,zg.serviceIds.set(t,e),e}s(t0,"createDecorator");d();d();var mp=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var Cbe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},I7=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new Cbe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var wR=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var hor=!1,lte=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},ute=class t{constructor(e=new wR,r=!1,n,i=hor){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(_C,this),this._globalGraph=i?n?._globalGraph??new I7(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,dY(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)vHe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=T7.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw aHe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof mp?(n=T7.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=T7.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=zg.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof mp)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof mp?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new I7(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new lte(i);for(let u of zg.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof mp){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new lte(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof mp){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof mp)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var T7=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var dte=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new wR(...e):e??new wR}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new ute(this._collection,!0)}};var pte=t0("ITelemetrySender"),Yg=t0("IChatMLFetcher");var fte=class{constructor(){this._stream=new gee;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},mte=t0("IEndpointProvider");d();var lv=t0("IParserService");d();var DD=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},w7=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},_7=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},OT=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},QT=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var hte=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DD(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},S7=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(OT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new DD(e,0,n,i-n+1)]):e<=r?(OT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new DD(e,r-e+1,n,0)]):(OT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),OT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,m,h,g,y,E,x){let b=null,_=null,k=new hte,P=r,N=n,M=h[0]-E[0]-i,J=-1073741824,pe=this.m_forwardHistory.length-1;do{let Y=M+e;Y===P||Y<N&&u[Y-1]<u[Y+1]?(p=u[Y+1],g=p-M-i,p<J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g),M=Y+1-e):(p=u[Y-1]+1,g=p-M-i,p<J&&k.MarkNextChange(),J=p-1,k.AddOriginalElement(p,g+1),M=Y-1-e),pe>=0&&(u=this.m_forwardHistory[pe],e=u[0],P=1,N=u.length-1)}while(--pe>=-1);b=k.getReverseChanges(),k=new hte,P=a,N=c,M=h[0]-E[0]-l,J=1073741824,pe=x?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let Y=M+o;Y===P||Y<N&&f[Y-1]>=f[Y+1]?(p=f[Y+1]-1,g=p-M-l,p>J&&k.MarkNextChange(),J=p+1,k.AddOriginalElement(p+1,g+1),M=Y+1-o):(p=f[Y-1],g=p-M-l,p>J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g+1),M=Y-1-o),pe>=0&&(f=this.m_reverseHistory[pe],o=f[0],P=1,N=f.length-1)}while(--pe>=-1);return _=k.getChanges(),this.ConcatenateChanges(b,_)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),E=new Int32Array(g),x=i-n,b=r-e,_=e-n,k=r-i,N=(b-x)%2===0;y[x]=e,E[b]=r;for(let M=1;M<=h/2+1;M++){let J=0,pe=0;u=this.ClipDiagonalBound(x-M,M,x,g),f=this.ClipDiagonalBound(x+M,M,x,g);for(let Y=u;Y<=f;Y+=2){Y===u||Y<f&&y[Y-1]<y[Y+1]?c=y[Y+1]:c=y[Y-1]+1,l=c-(Y-x)-_;let G=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(y[Y]=c,c+l>J+pe&&(J=c,pe=l),!N&&Math.abs(Y-b)<=M-1&&c>=E[Y])return o[0]=c,a[0]=l,G<=E[Y]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}p=this.ClipDiagonalBound(b-M,M,b,g),m=this.ClipDiagonalBound(b+M,M,b,g);for(let Y=p;Y<=m;Y+=2){Y===p||Y<m&&E[Y-1]>=E[Y+1]?c=E[Y+1]-1:c=E[Y-1],l=c-(Y-b)-k;let G=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(E[Y]=c,N&&Math.abs(Y-x)<=M&&c<=y[Y])return o[0]=c,a[0]=l,G>=y[Y]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}if(M<=1447){let Y=new Int32Array(f-u+2);Y[0]=x-u+1,QT.Copy2(y,u,Y,1,f-u+1),this.m_forwardHistory.push(Y),Y=new Int32Array(m-p+2),Y[0]=b-p+1,QT.Copy2(E,p,Y,1,m-p+1),this.m_reverseHistory.push(Y)}}return this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return QT.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],QT.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return QT.Copy(e,0,i,0,e.length),QT.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(OT.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),OT.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new DD(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();d();function tst(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(tst,"isObject");function gte(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(gte,"assertType");function rst(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(tst(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(rst,"safeStringify");var Ate=!1,bbe=!0,gor=200,R7=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new MT(e),i=e.getActiveDocument(),o=_R(i);if(!o||!o.isEmpty())return Hi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let _ of e.documents)_.id!==i.id&&(l.push(`RELATED DOC: ${_.getDisplayPath()}`),l.push("```patch"),l.push(...vor(_)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new zr(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=f.endLineNumberExclusive){let _=p<c.length;l.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),_&&(l.push(u),m={editRange:new zr(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let h=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Hi.noEdit({kind:"fetchFailure",error:new Error(rst(g.err))},n);let{result:y,ttft:E}=g.val;if(E!==void 0&&n.setTtft(E),y.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},n);let x=yte(i.languageId,c,f,void 0,y,m),b=await wbe(this._parserService,x,i,{requireEditWithinNLines:5});if(b){let _=new Xo([b]);return Hi.edit({edit:_},n)}else return Hi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};R7=yd([na(1,lv)],R7);var ND=class extends R7{constructor(r,n){super(ND.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Jo.error({kind:"cancel"});let o=await Ibe(this.ID,this._chatMLFetcher,[{role:Ebe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:Ebe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),Jo.ok({ignored:a,result:c,ttft:l})}};ND=yd([na(0,lv),na(1,Yg)],ND);async function Ibe(t,e,r,n,i){let o=new fte,a=!1,c,l=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=yor(l,n),f=e.fetchOne(r,async(y,E,x)=>(typeof c>"u"&&(c=Date.now()),o.update(y,x),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await f;return g.type!=="success"?Jo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Jo.ok({ttft:c,ignored:p,result:m})}s(Ibe,"fetchUntilConvergence");function _R(t){let e=new Ht(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:Aor(t)}s(_R,"getOrDeduceSelectionFromLastEdit");function Aor(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new lr(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=_E(a,o),l=o.length-c+1;return new lr(i,l,i,l)}s(Aor,"deduceSelectionFromLastEdit");async function yor(t,e){let r=Cor(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,f[m.index]=f[m.index]??"",f[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let x=f[m.index].substring(f[m.index].length-o);if(a.indexOf(x)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(yor,"fetchCompletionUntilConvergence");function Cor(t,e){let r=[],n=[];return new r7(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(Cor,"getTextAfterFirstPattern");function Eor(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new Ug(new zr(n,i),o)}s(Eor,"createReducedLineEdit");var LD=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Eor(r,n,i);let o=new Xo([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),E=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),x=y.join(`
`),b=E.join(`
`),{editDistance:_}=f(x,b);return new vbe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new w7(this.oldLines,n),o=new w7(this.newLines,n),a=new S7(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(jM(this.newLines,u))return new xbe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return ist(this.languageId,this.oldLines,u);function f(p,m){let h=new _7(p),g=new _7(m),E=new S7(h,g).ComputeDiff(),x=0,b=0;for(let N of E)x+=N.originalLength,b+=N.modifiedLength;let _=p.length,k=m.length,P=x+b;return{aChanged:x,bChanged:b,aLength:_,bLength:k,editDistance:P}}}},vbe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},xbe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Xo([this.edit]);{let r=this.groupInHunks();return new Xo(r.map(n=>{let i=n[0],o=n[n.length-1];return new Ug(new zr(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!bbe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>gor&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!Tbe(new zr(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new Xo([this.edit]),i=r(n);this.parseErrorCount=await k7(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=cte(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>cte(l,this.languageId)),i=r.map(l=>cte(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return ist(this.languageId,this.oldLines,e)}};function Tbe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Tbe,"editIsInsideEditWindow");function ist(t,e,r){let i=e.length+1,o=r.slice(0);return new LD(t,e,new zr(1,i),o).resolveDiff()}s(ist,"createPossibleEditFromLines");function yte(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=PD.fromString(i.trimEnd()),c=o?a.some(E=>E.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((E,x)=>{l.push(new LD(t,e,E,x))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let x=new zr(r.endLineNumberExclusive,e.length+1);x.length>a.length+5||u(x,a)}s(p,"generateEditAllDoc");function m(){for(let E=1;E<a.length;E++){let b=a.slice(a.length-E).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let P=e.slice(_,_+E).join(`
`);b===P&&u(new zr(r.endLineNumberExclusive,_+1),a.slice(0,a.length-E))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let E=[];for(let x of a){if(x.indexOf(o.omittedMessage)>=0){u(o.editRange,E.map(b=>b));return}E.push(x)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),f(),h(),p(),m(),!i.endsWith(`
`)){let E=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...yte(t,e,r,n,E,o))}return g(l);function g(E){return y(E,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function y(E,x){let b=new Set,_=[];for(let k of E){let P=x(k);b.has(P)||(b.add(P),_.push(k))}return _}}s(yte,"generatePossibleEdits");async function wbe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Ate?await k7(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Ate){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>f(p)-f(m)),u.length>0?u[0].edit:null}s(wbe,"selectBestEdit");function vor(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(vor,"summariseDocDiff");function ost(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(ost,"summarizeEditsAsUnifiedDiff");async function k7(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(k7,"getParseErrorCount");d();var uv=Ne(Gg());d();var P7=t0("ITokenizerProvider");var UT=class extends uv.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(P7);return new UT(n,i,o,c,r,a.get(Yg))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===uv.Raw.ChatRole.System&&f.role===uv.Raw.ChatRole.System){let p=f.content.at(-1),m=u.content.at(0);p&&m&&p.type===uv.Raw.ChatCompletionContentPartKind.Text&&m.type===uv.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:uv.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==uv.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};UT=yd([na(3,P7),na(4,_C),na(5,Yg)],UT);d();var sst=Ne(Gg());var Cte=class extends sst.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var _be=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Ht(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new e0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},Kg=class extends _be{constructor(r){super();this.value=r;this._transformer=new gC(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new rn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return xor(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(bor(r))}_validatePosition(r){if(r.line<0)return new Ho(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new Ho(n-1,o)}if(r.character<0)return new Ho(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new Ho(r.line,i):r}};function xor(t){return new Ho(t.lineNumber-1,t.column-1)}s(xor,"corePositionToVSCodePosition");function bor(t){return new rn(t.line+1,t.character+1)}s(bor,"vsCodePositionToCorePosition");d();d();function ast(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(ast,"min");d();function Sbe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>Sbe(n,e))}}s(Sbe,"toAstNode");function cst(t,e){let r=g3(e,a=>a.endExclusive>=t.start),n=yg(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Ht(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Ht(o,t.endExclusive)),i}s(cst,"subtractRange");d();d();d();var Ete=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=k2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=k2(e),r=k2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=k2(e),r=k2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=k2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Rbe(i,e-a)}};var Rbe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var B7=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Nm(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new Ete(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Nm(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Ho(r.index,Math.min(r.remainder,n))}toRange(e){return new e0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Ht(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new kD(this.validateRange(n.range),n.newText));return new rh(r.map(n=>new Hc(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new kD(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof Ho))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Ho(r,n):e}validateRange(e){return new e0(this.validatePosition(e.start),this.validatePosition(e.end))}};var vte=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Dm(()=>new B7(this.text));this._originalPositionOffsetTransformer=new Dm(()=>new B7(this.originalText));this._text=new Dm(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var kbe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},RR=class extends vte{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function bte(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),m=f?l.rangeToOffsetRange(f):void 0,h=lst(u,l),g=Pbe.fromRootNode(h,p),y=Bbe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(M=>M.node.range.intersectsOrTouches(m)?(M.node.children.length===0&&M.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let E=s(M=>m?M.range.endExclusive<m.start?m.start-M.range.endExclusive:M.range.start>m.endExclusive?3*(M.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),x=new wE(M=>m?M.children.length===0?M.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:ast(M.children.map(J=>x.get(J)))+1:0),b=new wE(M=>{let J=M.parent?b.get(M.parent):Number.MAX_SAFE_INTEGER,pe=x.get(M);return Math.min(J,pe)}),_=!!e.tryPreserveTypeChecking,k=s(M=>_&&M.node?.kind==="import_statement"?0:100*b.get(M)+M.depth+10*(E(M)/p.length),"costFn"),P=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(P!==void 0){let M=k;k=s(J=>{let pe=M(J);return pe===!1?!1:J.node?P(J.node,pe,l):pe},"costFn")}let N=y.getDescendantsAndSelf();for(let M of N){if(!M.node.node)continue;let J=k(M.node);J!==!1&&o.push({idx:c,node:M,cost:J})}}o.sort(xI(c=>c.cost,bI));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new RR(u,l.toTextEditFromOriginal(u.getText().length)),p=f,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:cst(Ht.ofLength(f.originalText.length),f.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:Sbe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(f)}return a}s(bte,"summarizeDocumentsSyncImpl");function lst(t,e,r=void 0){let n=new Ht(t.startIndex,t.endIndex),i=[],o=new kbe(r,t,n,i,e);for(let a of t.children)i.push(lst(a,e,o));return o}s(lst,"createRemovableNodeFromOverlayNode");var Pbe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Ht(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Ht(0,e.range.start),o=new Ht(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Ht(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Ht(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return Ior(this.document,this.range)}getTrailingWs(){return Tor(this.document,this.range)}};function Ior(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(Ior,"getLeadingWs");function Tor(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(Tor,"getTrailingWs");var Bbe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new qT(this.node.range,this.node.document);if(!this._surviving)return new SR("");let e=Array.from(VM(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof qT&&c.fragment instanceof qT){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new SR(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new SR(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)wor(r,i.fragment);return xte.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},D7=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new Hc(new Ht(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof xte)for(let l of c.fragments)a(l);else c instanceof SR?i+=c.text:c instanceof qT&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new rh(r)}},SR=class extends D7{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},qT=class t extends D7{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Ht(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Ht(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Ht(this.range.start,r.range.endExclusive),this.originalText):null}},xte=class t extends D7{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new SR(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function wor(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof qT&&e instanceof qT){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(wor,"pushFragment");d();var Ite=Ne(Gg());function N7(t){if(Array.isArray(t))return t.map(r=>N7(r));let e=(0,Ite.toMode)(Ite.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(N7,"rawMessageToCAPI");d();d();var Tte=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new dn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new dn("Invalid child startIndex");if(a.endIndex>r)throw new dn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function dst(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=_or(o,e),[c]=fst(t,a,void 0);return c.adjust(t,pst(e)),c.toOverlayNode(t,!0)}catch{return new wte(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(dst,"getStructureUsingIndentation");function fst(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=fst(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new dn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new dn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new wte(n,i,o),r]}s(fst,"createFoldingRangeTree");var wte=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new dn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=Dbe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Dbe(e,o,o,"LINE",[]);a&&n.push(a)}return Dbe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Dbe(t,e,r,n,i){let o=t.getOffsetAtPosition(new Ho(e-1,0)),a=r<t.getLineCount()?new Ho(r,0):new Ho(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new Tte(o,c,n,i)}s(Dbe,"createOverlayNode");function _or(t,e){return Sor(t,pst(e))}s(_or,"generateFoldingRegions");function pst(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(pst,"isOffSide");function Sor(t,e){let r=t.getOptions().tabSize,n=new Nbe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=kor(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(Sor,"_computeRanges");var Ror=65535,kR=16777215,ust=4278190080,Nbe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>kR||r>kR)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new Lbe(e,r)}};function kor(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(kor,"computeIndentLevel");var Lbe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>kR||a>kR)throw new Error("startLineNumber or endLineNumber must not exceed "+kR);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&kR}getEndLineNumber(e){return this._endIndexes[e]&kR}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&ust)>>>24)+((this._endIndexes[e]&ust)>>>16);return r===Ror?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function PR(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(PR,"fromUnknown");var al=Ne(Gg());var _te="current-version",hp="next-version",hst=2,gst=10,Ast=.7,Por=/```[^\n]*\n/,HT=class extends wD{constructor(r,n,i){super(HT.ID,[o=>new BD(o),o=>new SD(o),o=>new RD(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new Ree}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=_R(a),u=l?Mbe(a,l):null,f=_R(c),p=f?Mbe(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(hst,gst)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new MT(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return Hi.noEdit({kind:"unexpected",error:PR(l)},i)}let c=o.getArtificalDelay();return c>0&&await XE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Hi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Hi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Hi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Hi.noEdit(k,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:E}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let x=await Ibe(this.ID,this.fetcher,N7(p),{convergence:g,ignoreReplyTextBefore:Por,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(x.isOk()?"success":x.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),x.isOk()&&typeof x.val.ttft=="number"&&o.setTtft(x.val.ttft),i.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(x.isError())return x.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Hi.noEdit({kind:"fetchFailure",error:PR(x.err.err)},o);let b=x.val.result;if(b.length===0){let k=`<${hp}>
`,P=x.val.ignored.indexOf(k);P>=0&&(b=x.val.ignored.substring(P+k.length))}if(b=Bor(b),b.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},o);let _;if(c&&l&&u){let k=Dor(y,c,l,b);if(!k||k.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let P=Nor(c,k);if(P.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Ate){let J=await k7(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),pe=P.apply(y.documentAfterEditsNoShortening.value);if(await k7(this._parserService,y.languageId,pe)>J)return Hi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=Lor(y,P);let N=_.edits[0].lineRange.startLineNumber,M=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Tbe(new zr(N,M),u))return Hi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=yte(y.languageId,E,m,h,b,void 0),P=await wbe(this._parserService,k,y,{requireEditWithinNLines:100});if(!P)return Hi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Xo([P])}return Mor(y,_)?Hi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):For(y,_)?Hi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):Oor(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Qor(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Hi.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await XE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=_R(i);if(l===null)return;let u=Mbe(i,l),f=new Kg(i.documentAfterEditsNoShortening.value),p=await Hor(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let pe=Uor(i.documentAfterEditsLines,l.startLineNumber),Y=Math.max(1,Math.min(pe,l.startLineNumber-hst)),G=l.startLineNumber-Y,H=Math.min(c.length,l.endLineNumber+gst),ce=H-l.endLineNumber,ie=u.line-G,V=u.line+ce,Q=new e0(ie,0,V,f.getLineLength(V));return{firstEditableLineInShortenedDocument:Y,lastEditableLineInShortenedDocument:H,editWindow:Q}}(),y=bte(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],E=new zr(1,m),x=new zr(m,h+1),b=y.text,{messages:_,prediction:k,editWindowIsInPrompt:P}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),N=b.split(/\r\n|\r|\n/).length,M=y.projectRange(g),J=y.positionOffsetTransformer.toOffsetRange(M);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new zr(M.start.line+1,M.end.line+2),allowedEditLineRange:new zr(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:P,activeDocument:i,activeDocumentLines:c,completionPrefixRange:E,completionRange:x,convergence:b,expectedConvergencePrefix:J.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await UT.create(this._instantiationService,Obe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(Bte)?.prediction,c=!!o.metadata.get(Rte);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};HT=yd([na(0,Yg),na(1,lv),na(2,_C)],HT);function Bor(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${hp}>`,`
`),t=e(t,`\`\`\`
</${hp}>`,`
`),t=e(t,`</${hp}>`,`
`),t}s(Bor,"removeSuffixFromReply");function Mbe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new Kg(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Mbe,"getCursorPositionInOuterDocument");function Dor(t,e,r,n){let i=PD.fromString(e.text),o=PD.fromString(n.trimEnd()),c=new LD(t.languageId,i,new zr(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=bbe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Dor,"generateSummarizedEditWindowEdit");function Nor(t,e){let r=e.toEdit(new Bl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Nor,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Lor(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return ma.replace(new Ht(a,a+i.replaceRange.length),i.newText)}),n=new rd(t.documentAfterEdits,Ys.create(r));return Xo.fromEdit(n)}s(Lor,"convertOuterDocumentEditToProjectedEdit");function Mor(t,e){let r=e.toEdit(t.documentAfterEdits),n=yst(t.documentAfterEdits.value,r),i=new Ste,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(yst(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Mor,"editWouldUndo");function For(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!bst(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(For,"editWouldDeleteWhatWasJustInserted");function Oor(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!bst(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(ybe(i,t.languageId))return!0}return!1}s(Oor,"editWouldDeleteAComment");function Qor(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Fbe(o,i)/i.size>.8}s(Qor,"editWouldDuplicateExistingLines");function bst(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(bst,"editIsDeletion");function Uor(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(Uor,"findLineNumberAboveWithContent");var Ste=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Est(this.inserted,e.inserted),Est(this.deleted,e.deleted))}isUndoneBy(e){let r=vst(e.inserted,e.deleted),n=vst(e.deleted,e.inserted),i=Fbe(n,this.inserted),o=Fbe(r,this.deleted);return n.size>6&&i/n.size>Ast||r.size>6&&o/r.size>Ast}};function yst(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of Cst(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of Cst(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(qor(c.newText,l.newText)))}return new Ste(r,n)}s(yst,"getInformationDelta");function qor(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(qor,"trimOverlap");function Cst(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(Cst,"to4grams");function Est(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Est,"setUnion");function vst(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(vst,"setMinus");function Fbe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Fbe,"setIntersectionCount");async function Hor(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||dst(new Kg(e.getText()),e.languageId,void 0)}s(Hor,"getStructure");var Obe=class extends al.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${hp}>`,`\`\`\`${o}`,`${i}`,"```",`</${hp}>`].join(`
`),c=(0,al.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Bte(a)}),vscpp(al.SystemMessage,{priority:1e3},vscpp(Cte,null),this._getInstructions()),vscpp(al.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp(kte,{doc:l}))):vscpp(al.Chunk,{priority:100+u},vscpp(kte,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp(Pte,{doc:l}))):vscpp(al.Chunk,{priority:200+u},vscpp(Pte,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Rte}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",_te,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",_te,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",_te,"> and </",_te,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",hp,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",hp,">IDENTICAL</",hp,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",hp,">.")}}},Rte=class extends al.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},kte=class extends al.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Pte=class extends al.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...ost(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Bte=class extends al.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function Ist(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(Ist,"findIndexes");function Wor(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=Ist(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=Ist(t,e[c]).slice(-n).reverse();for(let p of f){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(Wor,"deduplicateEditRegion");function Tst(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:Wor(i,r.split(/\r?\n/),o).join(`
`)}}s(Tst,"postProcessUpdatedEditWindow");d();var Dte=Ne(Gg());function wst(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Dte.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Dte.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(wst,"getTextPart");function Gor(t){return{type:Dte.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Gor,"toTextPart");function Qbe(t){return[Gor(t)]}s(Qbe,"toTextParts");d();var Nte=t0("IDiffService");var Gbe=Ne(Gg());d();var Lte="<|cursor|>",BR="<|code_to_edit|>",MD="<|/code_to_edit|>",Sst="<|area_around_code_to_edit|>",Rst="<|/area_around_code_to_edit|>",jor="<|current_file_content|>",Vor="<|/current_file_content|>",$or="<|edit_diff_history|>",zor="<|/edit_diff_history|>",Yor="<|recently_viewed_code_snippets|>",Kor="<|/recently_viewed_code_snippets|>",Jor="<|recently_viewed_code_snippet|>",Xor="<|/recently_viewed_code_snippet|>",kst=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${BR} and ${MD} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Lte}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${BR} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${BR} and ${MD} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${BR} or ${MD} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Pst(t,e,r,n){let i=t.getActiveDocument(),o=tsr(t,n),a=Zor(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${Yor}
${o}
${Kor}

${jor}
current_file_path: ${c}
${e}
${Vor}

${$or}
${a}
${zor}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Lte}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${BR}\` and \`${MD}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Pst,"getUserPrompt");function Zor(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=esr(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(Zor,"getEditDiffHistory");function esr(t){let e=[],r=Xo.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(esr,"generateDocDiff");function _st(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[Jor,n,e,Xor].join(`
`)}s(_st,"formatCodeSnippet");function tsr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((E,x)=>`${x+1}|${E}`));let m=p.map(E=>e(E)+1),h=e(_st(f.path,"",!0)),g=m.reduce((E,x)=>E+x,0)+h,y=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(l+=g,c.push(_st(f.path,p.join(`
`),y)))}return c.join(`

`)}s(tsr,"getRecentCodeSnippets");function Ube(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Ube,"truncateCode");var Bst=2,Dst=10,qbe=15,Hbe=1e3,Wbe=2e3;var ih=class extends wD{constructor(r,n,i){super(ih.ID,[o=>new BD(o),o=>new SD(o),o=>new RD(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new MT(r);try{if(r.xtabEditHistory.length===0)return Hi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Hi(o,i.build(o))}catch(o){return Hi.noEdit({kind:"unexpected",error:PR(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=_R(o);if(a===null)return Jo.error({kind:"uncategorized",error:PR(new Error("NoSelection"))});let c=s(fe=>Math.floor(fe.length/4),"computeTokens"),l=new rn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+Lte+f.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-qbe),y=Math.min(h.length,m+qbe+1),E=Bst,x=Dst,b=Math.max(0,m-E),_=Math.min(h.length,m+x+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new lr(b,0,_,0)),P;P=f.split(/\r?\n/).slice(b,_);let N=[b,_],M=h.slice(b,_),J=[Sst,...h.slice(g,b),BR,...M,MD,...h.slice(_,y),Rst].join(`
`),pe=J,Y;{let fe=c(J),ne=0;if(fe>=Wbe)Y=J,ne=g;else{let me=Math.floor((Wbe-fe)/2),[he]=Ube(h.slice(0,g),!0,me),[,Qe]=Ube(h.slice(y),!1,me);ne=Math.max(he,m-Hbe);let ke=Math.min(Qe+y,m+Hbe+1);Y=[...h.slice(ne,g),J,...h.slice(y,ke)].join(`
`)}}let G=Pst(r,Y,pe,c),H=[{role:Gbe.Raw.ChatRole.System,content:Qbe(kst)},{role:Gbe.Raw.ChatRole.User,content:Qbe(G)}];if(i.setPrompt(H),await this.debounce(i),n.isCancellationRequested)return Jo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let ce=new L3;i.setFetchStartedAt();let ie,V=await this._endpointProvider.getEndpointInfo(this.ID),Q=await this._chatMLFetcher.fetchOne(N7(H),async(fe,ne,me)=>{ie===void 0&&(ie=ce.elapsed())},{id:V.id,name:V.name},{temperature:0},n);if(Q.type==="canceled")return Jo.error({kind:"gotCancelled",message:"afterFetchCall"});if(Q.type==="quotaExceeded")return Jo.error({kind:"quotaExceeded"});if(Q.type!=="success")return Jo.error({kind:"fetchFailure",error:PR(Q)});ie&&i.setTtft(ie),i.setResponse(Q.value);let z=ih.getBacktickSection(Q.value);return await this.generateReturnEditFormat(o,k,P.join(`
`),z,N,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Tst(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(m=>new Ug(new zr(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),f.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Jo.error({kind:"noSuggestions"}):Jo.ok({editWindow:n,edit:new Xo(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,ih.DEBOUNCE_MS-n);r.setDebounceTime(i),await XE(i)}};ih=yd([na(0,Nte),na(1,Yg),na(2,mte)],ih);d();var Mte=class t extends ps{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new dF,Pm(this,r.openDocuments,(i,o)=>{o.add(SE(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;kl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new rd(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,m=Xo.fromEdit(p),h=Xo.fromEdit(f);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),y=new rd(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var jbe=Ne(require("crypto"));var L7=jbe.randomUUID.bind(jbe);var Hst=Ne(Gg()),Kbe=Ne(a7());d();var Fte=t0("ISnippyService");d();d();var M7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Ote=65;function nsr(t){let e=0,r;M7.lastIndex=0;do if(r=M7.exec(t),r&&(e+=1),e>=Ote)break;while(r);return e}s(nsr,"lexemeLength");function isr(t,e){let r=0,n;M7.lastIndex=0;do if(n=M7.exec(t),n&&(r+=1,r>=e))return M7.lastIndex;while(n);return t.length}s(isr,"offsetFirstLexemes");function Nst(t,e){let r=t.split("").reverse().join(""),n=isr(r,e);return r.length-n}s(Nst,"offsetLastLexemes");function Vbe(t){return nsr(t)>=Ote}s(Vbe,"hasMinLexemeLength");d();d();var Lst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Lst||={});var $be;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})($be||={});var Mst;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Lst.is)}e.is=t,s(t,"is")})(Mst||={});var zbe;(e=>{function t(r){if($be.is(r))return Jo.error(r);if(Mst.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})(zbe||={});var Fst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Fst||={});var Ost;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Ost||={});var Qst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Qst||={});var Ust;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Fst.is)&&"page_info"in r&&Ost.is(r.page_info)&&"license_stats"in r&&Qst.is(r.license_stats)}e.is=t,s(t,"is")})(Ust||={});var Ybe;(e=>{function t(r){if($be.is(r))return Jo.error(r);if(Ust.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})(Ybe||={});var Qte=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,zbe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,Ybe.to)}async fetch(e,r,n){let i=this.ctx.get(jn),o=await this.ctx.get(Qr).getToken(),a=cy(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...A0(this.ctx),"X-GitHub-Api-Version":$A},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var qst=new vt("[CODE REFERENCING]"),FD=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Qte,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(pr).getTextDocument({uri:e.toString()});if(!a){qst.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:E}=g.val;return{match:h,files:y,licenseStats:E}}),m=(await Promise.all(f)).filter(h=>!!h);if(m.length===0){qst.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),E=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,x={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:E,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:y.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(Fd).handleIPCodeCitation(this.ctx,x)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Ys.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!Vbe(l)){let m=a.value.slice(0,o.start),h=Nst(m,Ote);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!Vbe(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};FD=yd([na(1,_C)],FD);async function Wst(t){let e=new dte;return e.define(pte,new Jbe(t)),e.define(Nte,new Jf),e.define(lv,new mp(Xbe,[!0])),e.define(Fte,new mp(FD,[t])),e.define(Yg,await eIe.Create(t)),e.define(P7,new mp(tIe)),e.define(mte,new Zbe(t)),e.seal()}s(Wst,"createInstantiationService");var Jbe=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=Dr.createAndMarkAsIssued(i,o);Rt(this.ctx,e,a)}},Xbe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},Zbe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==ih.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();return{id:this.ctx.get(Bt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},eIe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Oo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=L7(),l=await this.ctx.get(Mf).fetchAndStreamChat(this.ctx,a,oy.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:wst(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},tIe=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Ute("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Ute(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Ute=class{constructor(e){this.mode=Hst.OutputMode.Raw;this.tokenizer=ho(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===Kbe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===Kbe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var qte=class extends ps{constructor(r){super();this.workspace=r;this._garbageCollector=new iIe(20);this._documentCaches=new Map;Pm(this,r.openDocuments,(n,i)=>{let o=new rIe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(SE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(ac(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},rIe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new nIe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},nIe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},iIe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var F7=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},Hte=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new F7("",null),this._tail=new F7("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new F7(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var Wte=class extends ps{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new Hte(50);Pm(this,r.openDocuments,(n,i)=>{let o=new oIe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(SE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(ac(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},oIe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var Gte=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},OD=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:E,isShown:x,acceptance:b,logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,isDefaultEndpoint:pe,hadLowLogProbSuggestion:Y,nonTerminatingError:G,nEditsSuggested:H,kthEditPicked:ce,lineDistanceToMostRecentEdit:ie,debounceTime:V,hasNextEdit:Q,nextEditLogprob:z,maxLinesPerEdit:re,noNextEditReasonKind:fe,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchTime:Qe,fetchResult:ke,fetchError:tt,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:G,noNextEditReasonKind:fe,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchResult:ke,fetchError:tt},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(pe),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(E),isShown:this._boolToNum(x),logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,hadLowLogProbSuggestion:this._boolToNum(Y),nEditsSuggested:H,kthEditPicked:ce,lineDistanceToMostRecentEdit:ie,debounceTime:V,fetchStartedAfterMs:Fe,fetchTime:Qe,hasNextEdit:this._boolToNum(Q),nextEditLogprob:z,maxLinesPerEdit:re})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};OD=yd([na(0,pte)],OD);d();var QD=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var DR=!1,Gst=300,UD=class extends ps{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new qte(this._workspace);this._nextEditCache=new Wte(this._workspace);this._recentlyShownCache=new cIe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Pm(this,this._workspace.openDocuments,(u,f)=>{f.add(bAe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(OD)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new Gte(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??L7());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,m,h;if(l)f=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await XE(Gst);else if(u)f=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await XE(Gst);else{h=new aIe,c.setHeaderRequestId(h.headerRequestId);let E=o.value.get();p=E;let x=await this.fetchNextEdit(h,r,c,i),b=E.value!==o.value.get().value;if(x.isError())switch(x.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=x.err.error;break;default:uF(x.err)}else if(!b){let _=x.val;_.isEmpty()||(f=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!f)return this._telemetrySender.sendTelemetry(c),new QD(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new QD(void 0);kl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new QD({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=Ys.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=sIe(r.lastEdits.swap(c)),f=l.compose(),p=new RR(new Kg(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new Bl(o.text),g=bC.fromEdit(new rd(m,f)).removeCommonSuffixPrefixLines(),y=l.edits.at(-1)?.getNewRanges().at(0),E;y&&(E=new Bl(p.text).getTransformer().getRange(y));let x=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),_=s(M=>{let pe=new bC(new Bl(p.text),M).toEdit();return jst(pe,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(M=>p.projectBack(M),"toOffsetOnDocumentAfterEditsNoShortening"),P=s(M=>p.project(M),"toProjectedOffset"),N=new b7(r.docId,b,r.languageId,g.base.getLines(),g.edit,E,m,l,i,_,k,P,r.lastEdit.base.getTextLength().lineCount,a,x);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Jo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=sIe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(M=>this._shortenDocument(M,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new ste(r.headerRequestId,u.map(M=>M.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,DR&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let M=this._hookupCancellation(g,o);try{y=await g.result}finally{M.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let M=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let J=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(pe){throw g.setResultError(pe),pe}finally{J.dispose(),M()}}i.setStatelessNextEditTelemetry(y.telemetry);let E=y.nextEdit;if(E.isError())return E;let x=E.val.edit;if(x.edits.length===0)return Jo.error({kind:"noSuggestions"});let _=new bC(new Bl(f.projectedDocument.text),x).toEdit(),k=jst(_,f.projectedDocument),P=_.edits.length===k.edits.length?E.val.permutation:void 0,N=k.decompose(P);return Jo.ok(N)}_hookupCancellation(r,n){let i=new hu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new mD);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){DR&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){DR&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){DR&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}DR&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(ac(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){gte(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new RR(new Kg(r.base.value),new rh([])),clippedRange:new zr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Ht(0,0)),o=zr.fromRange(i);function a(p,m){return new zr(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new zr(1,n.textLength.lineCount+1),l=sIe(c.intersect(a(o,100))),u=zr.subtract(c,l);return{document:new RR(new Kg(r.base.value),new rh(u.map(p=>Hc.delete(n.getOffsetRange(new lr(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new x7("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await csr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new Kg(n.base.value),a=n.edit.edits.at(0)?.range??new Ht(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Ht(h.range.start,g.range.endExclusive))}let l=Vst(o.offsetRangeToRange(a)),u=bte(200*50,{costFnOverride:s((h,g,y)=>{let E=Vst(y.offsetRangeToRange(h.range)),x=asr(l,E);return x>100?!1:x},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,m=new zr(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};UD=yd([na(4,lv),na(5,_C),na(6,Fte)],UD);function jst(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Ys.fromOffsetEdit(r)}s(jst,"projectBackEdit");function Vst(t){return new zr(t.start.line+1,t.end.line+1)}s(Vst,"lineRangeFromVSCodeRange");function asr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(asr,"lineRangeDist");async function csr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(csr,"getStructure");function sIe(t){if(!t)throw new dn("expected value to be defined, but it was not");return t}s(sIe,"assertDefined");var aIe=class{constructor(){this.headerRequestId=L7()}static{s(this,"NextEditFetchRequest")}},cIe=class{constructor(){this._cache=new lY(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};d();d();d();d();var NR=0;function jte(t){return t===0}s(jte,"lengthIsZero");var gp=2**26;function qD(t,e){return t*gp+e}s(qD,"toLength");function dv(t){let e=t,r=Math.floor(e/gp),n=e-r*gp;return new Pl(r,n)}s(dv,"lengthToObj");function O7(t,e){let r=t+e;return e>=gp&&(r=r-t%gp),r}s(O7,"lengthAdd");function $st(t,e){return t.reduce((r,n)=>O7(r,e(n)),NR)}s($st,"sumLengths");function lIe(t,e){return t===e}s(lIe,"lengthEquals");function Q7(t,e){let r=t,n=e;if(n-r<=0)return NR;let o=Math.floor(r/gp),a=Math.floor(n/gp),c=n-a*gp;if(o===a){let l=r-o*gp;return qD(0,c-l)}else return qD(a-o,c)}s(Q7,"lengthDiffNonNegative");function zst(t,e){let r=t,n=Math.floor(r/gp),i=r-n*gp,o=e,a=Math.floor(o/gp),c=o-a*gp;return new lr(n+1,i+1,a+1,c+1)}s(zst,"lengthsToRange");d();var HD=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${dv(this.startOffset)}...${dv(this.endOffset)}) -> ${dv(this.newLength)}`}};function Kst(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new aY(Yst(t)),n=Yst(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!jte(u);){let[p,m]=i.splitAt(u);f.push(p),u=Q7(p.lengthAfter,u),i=m??r.dequeue()}return jte(u)||f.push(new U7(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&lIe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new HD(m.startOffset,f,O7(m.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=NR;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=$st(f,h=>h.lengthBefore),m=O7(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of f){let m=l;l=O7(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(Kst,"combineTextEditInfos");var U7=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=Q7(e,this.lengthAfter);return lIe(r,NR)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,NR,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${dv(this.lengthBefore)} -> ${dv(this.lengthAfter)}`}};function Yst(t){let e=[],r=NR;for(let n of t){let i=Q7(r,n.startOffset);jte(i)||e.push(new U7(!1,i,i));let o=Q7(n.startOffset,n.endOffset);e.push(new U7(!0,o,n.newLength)),r=n.endOffset}return e}s(Yst,"toLengthMapping");var q7=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Vte(n.range,Pl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=dv(n.newLength);return new Vte(zst(n.startOffset,n.endOffset),new Pl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new HD(qD(e.range.startLineNumber-1,e.range.startColumn-1),qD(e.range.endLineNumber-1,e.range.endColumn-1),qD(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=Kst(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return lr.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Vte=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var $te=class{constructor(e){this.documents=e;kl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},zte=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new rd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var Yte=class extends ps{constructor(){super();this.branch=bg("branchName",void 0);this._register(vAe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var Jte=class extends ps{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new dIe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Yte;this._register(_2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=yD(),this._documentState.forEach(o=>o.applyAllEdits()))})),Pm(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new uIe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(SE(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(ac(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new $te(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=yD()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},uIe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Bl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=CD.fromEdit(e,this._currentValue),i=q7.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return Kte(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&lsr(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=yD(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:yD()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new xC(this._edits.map(o=>o.edit));return{history:new zte(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=Ys.empty,o=q7.empty,a,c=0,l=Ys.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(yD()-u.instant>10*60*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();gte(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=Kte(u.textLengthEdit.edits,P=>P.range.endLineNumber-P.range.startLineNumber+P.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||Kte(u.edit.edits,P=>P.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Kte(u.edit.edits,P=>P.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let P=Ys.trySwap(u.edit,l);if(P)l=P.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let E=u.edit.inverseOnString(n.value);n=n.apply(E);let x=u.edit.compose(i),b=Xo.fromEdit(new rd(n,x)),k=new bC(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;c=k,i=x,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new xC(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Kte(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Kte,"sum");function lsr(t,e){let r=e.getNewRanges();return t.edits.every(n=>usr(n.range,r))}s(lsr,"editExtends");function usr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(usr,"doesTouch");var dIe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var Jst=10,Jg=class{constructor(e){this.lastResultsById=new Or(Jst);this.lastResultsByUri=new Or(Jst);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=$g.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(pr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=cr(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Wst(this.ctx),r=!1;try{let a=await this.ctx.get(Bt).updateExPValuesAndAssignments();r=dsr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?ih:HT),i=this.ctx.get(Ig),o=new Jte(i);return await GS.catch(()=>{}),e.createInstance(UD,i,n,o,new Mte(i))}};function dsr(t,e){let r=vi(t,kt.NESXTab);return r!==void 0?r:t.get(Bt).enableNESXTab(e)}s(dsr,"shouldUseXTab");d();var Xst=Ne(di());var Xte=class extends Ig{constructor(r){super();this._openDocuments=bg(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(pr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=$g.create(r);return this.addDocument({id:o,initialValue:i,languageId:R2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=$g.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=$g.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=$g.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new fIe(r.id,new Bl(r.initialValue??""),[],r.languageId??R2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(pr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},fIe=class extends mK{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new rn(e.lineNumber+1,e.column+1));this.updateSelection([new Ht(r,r)])}editFromLspContentChanges(e){return new xC(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(Xst.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new rn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new rn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new dn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return Ys.replace(new Ht(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var Zst=require("crypto"),SC=Ne(require("fs/promises")),eat=require("os"),fv=Ne(require("path"));var pv=class{constructor(e){this.ctx=e;this.logger=new vt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=fv.extname(__filename)===".ts"?fv.resolve(__dirname,"../../../packages/ripgrep/bin"):fv.resolve(__dirname,"./bin"),o=fv.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await SC.readFile(o),c=(0,Zst.createHash)("sha256").update(a).digest("hex"),l=fv.join((0,eat.homedir)(),".cache/pkg",c);await SC.mkdir(l,{recursive:!0});let u=Oi(Kc(o)),f=fv.join(l,u);try{await SC.stat(f)}catch{await SC.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await SC.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var tat=require("child_process"),pIe=require("perf_hooks");var mv=new vt("ripgrepProcessManager"),Xg=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,mv.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){mv.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){mv.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){mv.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){mv.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}mv.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:tee(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);mv.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=pIe.performance.now();mv.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,tat.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=pIe.performance.now()-r;mv.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var WD=class extends Fy{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var rat=100,nat=1e3*60*5;function iat(t){let e=new mIe(t);t.get(uc).registerContextProvider(e),t.get(Qy).add(e.id)}s(iat,"registerRelatedFilesShim");var mIe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new y_(rat,nat);this.relatedFilesCache=new y_(rat,nat);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await wK(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){MI(this.ctx,o,"relatedFilesShim")}}};d();d();d();var oat=Ne(require("node:events"));var Zte="onWorkspaceWatcherChanged";var ere=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new oat.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Zte,Wu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Zte,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Zte,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Zte,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var id=class{constructor(e){this.ctx=e;this.watchers=new Or(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Ur.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var GD=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},fsr="workspaceLifecycleManager",od=new vt(fsr),RC=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ia(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?od.debug(this.ctx,`listener ${e.constructor.name} is already started`):(od.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):od.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);od.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(cp).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(pr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){od.debug(r,"No workspaces to add.");return}od.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];od.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));od.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));od.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));od.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){od.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(id).terminateWatching(c);for(let u of this.activeListeners)od.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.onWorkspaceRemoved(c)}for(let c of o){if(!c.uri)continue;od.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(id);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){od.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.onWorkspaceSubfoldersTerminated(c,u)}for(let f of this.activeListeners)od.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.onFileChange.bind(f))}}for(let c of this.activeListeners)for(let l of o)od.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.onWorkspaceAdded(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(id).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function tre(t){t.set(RC,new RC(t))}s(tre,"setupWorkspaceLifecycleListener");d();var aat=require("child_process");var rre=class extends eh{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,aat.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){yee.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=ls(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?ZE.branch(o):ZE.detachedHead()}}extraArgs(){return[]}};d();var nre=class extends eh{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(yo),i=Lo(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;yee.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return ZE.branch(r)}else return this.isCommitSha(e)?ZE.detachedHead():ZE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};d();d();var ire=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var psr=64;var GT={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},kC={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},hIe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,psr)}},WT=class extends hIe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Bi=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},LR=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},MR=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var oo=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},cat=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),ore=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(ore||{}),lat=I.Object({result:I.Enum(ore)});var oh=class extends WT{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:GT,type:"shared"})}};d();var msr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),hsr=new Map;for(let[t,e]of msr)hsr.set(e,t);d();function jD(t){return`[${Oi(t)}](${t})`}s(jD,"formatUriForFileWidget");function PC(t){let e=gsr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(PC,"resolvePathInput");function gsr(t){if(t.startsWith("/")||dat()&&ysr(t)||dat()&&t.startsWith("\\\\"))return Kc(t)}s(gsr,"resolveFsUri");function dat(){return process.platform==="win32"}s(dat,"isWindows");function Asr(t){return t>=65&&t<=90||t>=97&&t<=122}s(Asr,"isWindowsDriveLetter");function ysr(t){return Asr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(ysr,"hasDriveLetter");function H7(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Bi?r.value:r instanceof MR?"":r instanceof LR?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(H7,"parseToolResultToString");function sre(t){let{content:e}=t;return{message:H7(e)}}s(sre,"formatToolErrorResult");function fat(t){let{content:e}=t;return{data:e.map(r=>r instanceof Bi?{type:"text",value:r.value}:r instanceof MR?{type:"text",value:"<unsupported>"}:r instanceof LR?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(fat,"formatToolSuccessResult");var are=class extends oh{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=PC(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new hD(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(sd).getToolByNameAndProvider("insert_edit_into_file",kC);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(sd).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;if(i){let f=await lc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,o)})}let a=H7(n.content),c=e3({uri:PC(r.input.filePath),languageId:"UNKNOWN"}),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new up({code:a,languageId:c,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new oo([new Bi(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i){IGe(e.ctx,"agentPanel",{requestSource:i?.requestSource??"",chatRequestModel:i?.chatRequestModel??"",mapper:i?.mapper??"",headerRequestId:i?.headerRequestId??""},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=PC(n.filePath);return{progressMessage:`Editing ${jD(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var pat=new vt("findFilesTool"),cre=class t extends oh{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(pv).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new oo([new Bi("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(Xg),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{pat.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await l.execute(i,["--files","-g",o],n,{cwd:La(g.uri)},t.timeOutInSeconds*1e3);pat.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(E=>E.trim()).filter(E=>E.length>0).map(E=>`${La(Lo(g.uri,E))}`)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${E}`)}});try{await Promise.all(f)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new oo([new Bi(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new oo([new Bi(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var mat=new vt("findTextInFilesTool"),lre=class t extends oh{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(pv).resolvePath()}catch(E){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(E)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new oo([new Bi("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(Xg),p={},m=u.map(async E=>{if(n.isCancellationRequested)throw new Error("Canceled");try{mat.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${E.uri.toString()}`);let x=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",La(E.uri)],b=await f.execute(i,x,n,{cwd:La(E.uri)},t.timeOutInSeconds*1e3);mat.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${E.uri.toString()} with results: ${b}`),p[E.uri.toString()]=b.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(x){let b=x instanceof Error?x.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${E.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(E){let x=E instanceof Error?E.message:"An unknown error occurred";return new oo([new Bi(x)],"error")}let h=[],g=l;for(;g>0;){let E=!1;for(let x in p)p[x].length>0&&g>0&&(h.push(p[x].shift()),g--,E=!0);if(!E)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new oo([new Bi(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var ure=class extends oh{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=PC(i),c=await e.ctx.get(yo).readDirectory(o.toString());return c.length===0?new oo([new Bi("Folder is empty")],"success"):new oo([new Bi(c.map(([l,u])=>`${l}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=PC(e.input.path);return{progressMessage:`Reading directory ${jD(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var dre=class extends oh{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=PC(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(mn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new up({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new oo([new Bi(f.renderAsString(`
`))],"success")}else return new oo([new Bi(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=PC(n.filePath);return{progressMessage:`Reading file ${jD(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function hat(){return[new ure,new dre,new are,new cre,new lre]}s(hat,"getAllClsTools");var sd=class{constructor(e){this.ctx=e;this._toolRegistry=new ire;for(let r of hat())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new oo([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(GT.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(GT.id)?.splice(e.get(GT.id)?.indexOf(r)??0,1);let n=e.get(kC.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(kC.id)?.splice(e.get(kC.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(kC.id)??[],a=e.get(GT.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==GT.id&&l!==kC.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var FR=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var yat=require("crypto"),gIe=require("fs"),AIe=Ne(require("path"));var gat="symbolDatabaseLookup",Aat="multiLanguageContextProviderDocumentSymbols",OR=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(gat,e);return r||(r=await this.createDBFile(e)),AIe.default.join(this.persistenceManager.directory,Aat,r)}async init(){let e=AIe.default.join(this.persistenceManager.directory,Aat);await this.createIfNotExists(e)}async dirExists(e){try{return await gIe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await gIe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,yat.randomUUID)()}.db`;return await this.persistenceManager.update(gat,e,r),r}async deleteDBFile(e){}};d();d();var W7=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var fre=Ne(require("path")),Cat=require("worker_threads");function Eat(t,e){return new Cat.Worker(fre.default.resolve(fre.default.extname(__filename)!==".ts"?__dirname:fre.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(Eat,"createWorker");d();var pre=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var vat=Ne(di());var mre="main.js",hre=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=Eat(mre,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new pre(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new sz(this.id++),vat.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new nz(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new iz(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new oz(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new tz(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new rz(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new ez(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(mre+"'")&&(r=new Error(`Failed to load ${mre}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${mre} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var G7=Ne(di());var Ap=new vt(LI),QR=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){Ap.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,G7.CancellationToken.None);return}Ap.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new hre(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{Ap.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await Esr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,G7.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Ap.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Ap.debug(this.ctx,`indexing workspace ${e}`);let r=Qme.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${Qme.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(J0),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,G7.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));Ap.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),Ap.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Ap.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,G7.CancellationToken.None)}catch(n){Ap.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return bQe(e)}};async function Esr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(Esr,"createIndexableWorkspaceFolder");d();d();var xat=100,vsr=5e3,gre=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new In.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>xat)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>vsr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>xat&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:cr(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Are=class{constructor(e){this.id=LI;this.selector=Array.from(F$.keys()).map(e=>({language:e}));try{this.documentManager=e.get(pr),this.resolver=new yIe(this.documentManager,e)}catch(r){throw Ap.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},yIe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new gre}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(FR).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=Wy(o,a);l=l.applyEdits(c);let u=Gje(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return Ap.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(x$(o))return[];throw Ap.error(this.ctx,"Failed to get context",o),o}}};var j7=class extends GD{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(RC).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(uc).providers.some(r=>r.id===LI)){let r=this.ctx.get(OR);this.fileWatcher=new CIe([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new QR(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new EIe(this.ctx),this.ctx.set(W7,this.fileWatcher),this.ctx.set(J0,this.fileSearch),this.ctx.set(QR,this.multiLanguageContextIndexWatcher),this.ctx.get(uc).registerContextProvider(new Are(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Bt).updateExPValuesAndAssignments(),n=NK(this.ctx,r);return n.includes(LI)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},CIe=class extends W7{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},EIe=class extends J0{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(id).getWatchedFiles(n)).map(a=>this.ctx.get(pr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var vIe=class extends FR{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new j7(e),e.set(j7,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function bat(t){let e=t.get(pu),r=new OR(e);t.set(OR,r),t.set(FR,new vIe(t))}s(bat,"setupMultiLanguageContextProviderFeature");d();d();d();async function Iat(t){try{await GS}catch(e){MI(t,e,"initializeTokenizers")}}s(Iat,"waitForTokenizers");d();var BC=new Map;BC.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});BC.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});BC.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});BC.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});BC.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});BC.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var bsr=new vt("sdk");function yre(t,e){BC.has(t.get(nn).getEditorPluginInfo().name)||bsr.warn(t,...e)}s(yre,"deprecationWarning");var x0t=Ne(PP()),cA=Ne(hg());d();d();d();var cn={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var bu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(Tat(e))}};function at(t,e){let r=Fs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=Tat(r.Errors(o));return[null,{code:cn.InvalidParams,message:a}]}return e(n,i,o)}}s(at,"addMethodHandlerValidation");function Tat(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(Tat,"createErrorMessage");d();var xIe=Ne(di());d();var DC=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Cre="github.copilot.finishDeviceFlow",bIe=class extends DC{constructor(){super(...arguments);this.name=Cre;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(Dn).pendingSignIn;if(!i)throw new xIe.ResponseError(cn.InvalidRequest,"No pending sign in");try{await this.ctx.get(iu).open(i.verificationUri)}catch(o){S0.warn(this.ctx,"Failed to open",i.verificationUri),S0.exception(this.ctx,o,Cre)}try{return await i.status}catch(o){throw new xIe.ResponseError(cn.DeviceFlowFailed,String(o))}finally{this.ctx.get(Dn).pendingSignIn=void 0}}},wat=[bIe];d();d();var Ss=class extends Or{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var V7="github.copilot.didAcceptCompletionItem",IIe=class extends DC{constructor(){super(...arguments);this.name=V7;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(Ss).get(n);return o?(fJ(this.ctx,o),!0):!1}},_at=[IIe];d();var Isr="github.copilot.didAcceptNextEditSuggestionItem",TIe=class extends DC{constructor(){super(...arguments);this.name=Isr;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(Jg).handleAcceptance(n),!0}},Sat=[TIe];d();var _Ie="github.copilot.didAcceptPanelCompletionItem",wIe=class extends DC{constructor(){super(...arguments);this.name=_Ie;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(Ss).get(i);return a?(M2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},Rat=[wIe];var Tsr=[...wat,..._at,...Sat,...Rat];function kat(t,e){let r=new Map;for(let n of Tsr){let i=new n(t),o=Fs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=gv(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new bu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(kat,"registerCommands");d();var Pat=Ne(require("node:events"));var Zg=class extends VS{constructor(r){super(new KP,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${wsr(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(kt[n],this.env[o]),this.setConfig(kt[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new Pat.default),this.emitters.get(r)?.on("change",n)}};function wsr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(wsr,"camelCaseToSnakeCaseAllCaps");var _sr="unknown-editor",Bat="unknown-editor-plugin",Ere=class extends nn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:_sr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:Bat,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function Dat(t){return t.getEditorPluginInfo().name!==Bat}s(Dat,"hasValidInfo");d();var Lat=require("node:events");var Nat="initialize",Av=class{constructor(){this.emitter=new Lat.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(Nat,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(Nat)}};d();var yv=Ne(hg());var Ssr=new Map([[4,yv.MessageType.Log],[3,yv.MessageType.Info],[2,yv.MessageType.Warning],[1,yv.MessageType.Error]]),vre=class extends Tc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!mJ(e)&&n!=="console")return;let o={type:Ssr.get(r),message:d$e(n,...i)},a=e.get(xr).connection;try{a.sendNotification(new yv.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof yv.ConnectionError)return;throw c}}};d();var Mat=Ne(Lc());var xre=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(xr).connection.sendNotification(new Mat.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function Fat(t){let e=t.get(xl),r=e.deactivate();e.setReporter(new xre(t)),e.setRestrictedReporter(new xre(t,!0)),await r}s(Fat,"setupRedirectingTelemetryReporters");d();d();var bre=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Rt(e,"installed.reinstall"):Rt(e,"installed.new")}handleUpgrade(e){Rt(e,"installed.upgrade")}handleUninstall(e){Rt(e,"uninstalled")}};var $7=Ne(PP());var $D=class extends bre{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(nn).getEditorPluginInfo();return await e.get(pu).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(pu).listSettings()).length>0}async markInstalled(e){let r=e.get(nn).getEditorPluginInfo();await e.get(pu).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(nn).getEditorPluginInfo(),n=await e.get(pu).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,$7.gt)((0,$7.coerce)(r.version),(0,$7.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(nn).getEditorPluginInfo();await e.get(pu).delete("versions",r.name),(await e.get(pu).listKeys("versions")).length===0&&await e.get(pu).deleteSetting("versions")}};d();var Oat=require("events"),RIe=Ne(require("path")),Ire=Ne(Lc());var SIe="didChangeWatchedFiles",Rsr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},eA=class t{constructor(e){this.ctx=e;this.emitter=new Oat.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new Ire.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(xr).connection}init(){this.ctx.get(ds).getCapabilities().watchedFiles&&this.connection.onNotification(Ire.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(ds).getCapabilities().watchedFiles)return Rsr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=RIe.extname(l).toLowerCase();if(!$S.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}onDidChangeWatchedFiles(e){this.emitter.on(SIe,e)}offDidChangeWatchedFiles(e){this.emitter.off(SIe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=RIe.extname(o.uri).toLowerCase();if(!$S.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.emitter.emit(SIe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(mn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var ksr=I.Object({uri:I.String({minLength:1})});async function Psr(t,e,r){let n=await t.get(mn).getOrReadTextDocument(r);return[{status:Gs(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Psr,"handleCheckFileStatusChecked");var Qat=at(ksr,Psr);d();var Bsr=I.Object({});function Uat(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Uat,"calculatePercentRemaining");async function Dsr(t,e,r){let n=await t.get(Dn).getSession();if(n){let i=await $ue(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Uat(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Uat(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:cn.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:cn.InternalError,message:"Not signed in"}]}s(Dsr,"handleCheckQuotaChecked");var qat=at(Bsr,Dsr);d();var Nsr=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Lsr(t,e,r){return[await t.get(Dn).checkAndUpdateStatus(r.options),null]}s(Lsr,"handleCheckStatusChecked");var Hat=at(Nsr,Lsr);d();d();d();d();d();d();function Wat(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Wat,"filterUnsupportedReferences");function Gat(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(Gat,"convertToCopilotReferences");var jat=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var jT=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Wat(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var Wc=class{static{s(this,"ConversationInspector")}};d();var kIe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Js=class{constructor(e){this.ctx=e;this.progressEntries=new Or(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Ur.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var NC=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Dn).getSession({authAuthority:n});if(!i&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${r}`,i?.apiUrl||`https://api.${n}`).href;return this.ctx.get(jn).fetch(a,{method:"GET",headers:o})}};d();d();d();var $at=Ne(yp());var LC=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Nt([(0,$at.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Nt(u.filter(([p,m])=>!zD(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:W0(h),m]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||zD(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Nt([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function zD(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(zD,"isEmptyRange");var zat=Ne(require("path"));var Yat=I.Object({uri:I.String(),visibleRange:I.Optional(nc),selection:I.Optional(nc)}),PIe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument(e),i=Gs(n);if(await this.turnContext.collectFile(ad,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new LC(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Nt([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(zD(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Nt([...l,...u])}else if(n.status==="invalid")return new Nt([`The currently open file \`${zat.basename(e.uri)}\` is content excluded.`])}},ad="current-editor",Tre=class{constructor(e){this._resolver=e;this.id=ad;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new PIe(e)}};d();d();var cl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},BIe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},DIe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Hl=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new BIe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new DIe(this._processor(e),this.id)}};var Kat=I.Object({name:I.String(),url:I.String()}),Jat=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(Kat)})),remotes:I.Optional(I.Array(Kat))}),NIe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(MC,"git repository information");let r=[];return r.push([new Nt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Nt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Nt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Nt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Nt([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Nt(r)}},MC="git-metadata",wre=class extends Hl{static{s(this,"GitMetadataSkill")}constructor(e){super(MC,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new NIe(r))}};async function Xat(t){let e=await t.skillResolver.resolve(ad);if(e){let a=e.uri,c=cI(t.ctx,a);if(rQe(c))return{repoInfo:c,skillUsed:ad}}let r=await t.skillResolver.resolve(MC);if(!r||!r.remotes||r.remotes.length===0){Ur.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=mme(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:MC}}s(Xat,"extractRepoInfo");async function Zat(t){let e=[];return await Msr(t,e),await Fsr(t,e),await Osr(t,e),e}s(Zat,"skillsToReference");async function Msr(t,e){let r=await Qsr(t);r&&e.push(r)}s(Msr,"addRepositoryReference");async function Fsr(t,e){let r=await Usr(t);r&&e.push(r)}s(Fsr,"addSelectionReference");async function Osr(t,e){let r=[],n=await Hsr(t);n&&r.push(n),r.push(...await Wsr(t)),r.length>0&&e.push(...r)}s(Osr,"addFileReferences");async function Qsr(t){let e=await Xat(t);if(e){let r=t.ctx.get(NC),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Qsr,"gitMetadataToReference");async function Usr(t){let e=await t.skillResolver.resolve(ad);if(e&&e.selection){let n=await t.ctx.get(mn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return qsr(e,n.document)}}s(Usr,"currentEditorToSelectionReference");function qsr(t,e){if(t.selection&&!zD(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(qsr,"extractSelection");async function Hsr(t){let e=await t.skillResolver.resolve(ad);if(e){let n=await t.ctx.get(mn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(Hsr,"currentEditorToFileReference");async function Wsr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(mn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=Gs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(Wsr,"fileReferenceToPlatformFileReference");d();d();d();d();var act=Ne(Rre()),OIe=Ne(require("path"));var cct=500,Zsr=Math.floor(.25*cct),kre=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=OIe.default.extname(__filename)===".ts"?OIe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await act.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,y=[],E=0;for(;E<g;){let x=E+u>=g,b=x?g:E+u,_=h.slice(E,b),k=m.detokenize(_),P=o.indexOf(k);y.push({id:`${a.toString()}#${E}`,chunk:k,tokenCount:_.length,range:{start:P,end:P+k.length}}),E=x?b:b-f}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:cct,overlap:Zsr}}),n}};var ear="fixedSize",tar=new Map([["fixedSize",kre]]);function lct(t){let e=t==="default"?ear:t,r=tar.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(lct,"getChunkingAlgorithm");d();d();var Pre=Ne(nb()),FC=Ne(require("fs")),uct=require("os"),sh=Ne(require("path")),YD=require("process");var QIe=5e4,rar=new vt("workspaceChunks"),Bre=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Oi(r.uri),i=(0,Pre.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=sh.join(nar(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Pre.SHA256)(e).toString().substring(0,this.pathHashLength),n=sh.basename(e);return sh.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await FC.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await FC.promises.mkdir(sh.dirname(n),{recursive:!0}),await FC.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){rar.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await FC.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await FC.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=sh.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(sh.join(this.cacheRootPath,n))}}async getFileHash(e){let r=ls(e),n="";return r&&(n=await FC.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Pre.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=ls(e);if(!i)return;async function o(p){try{return(await FC.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=Kc(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=ls(e);if(!r)return[];let n;try{n=await FC.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=Kc(sh.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await FC.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function nar(){return YD.env.XDG_CACHE_HOME&&sh.isAbsolute(YD.env.XDG_CACHE_HOME)?YD.env.XDG_CACHE_HOME+"/github-copilot":(0,uct.platform)()==="win32"?YD.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":YD.env.HOME+"/.cache/github-copilot"}s(nar,"getXdgCachePath");var UIe=1e4;var Dre=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new HIe;this.status="notStarted",this.workspaceChunks=new Bre(e,r),this.cancellationToken=new qIe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(id).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>UIe&&(this._fileCountExceeded=!0,n=n.slice(0,UIe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ia(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>QIe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ia(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>QIe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>UIe&&(this._fileCountExceeded=!0),fGe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Oo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},qIe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},HIe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var $a=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=lct(r),i=new n;return new Dre(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=Dr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Rt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=Dr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Rt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function Lre(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(Lre,"toChatModeEnum");var VT=class{constructor(e,r){this.request=e;this.telemetryId=cr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}},Nre=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=cr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var dct={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},fct="Alright, This response contains a code citation.";d();var pct=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var mct=Ne(require("fs")),Kd=Ne(require("path"));var WIe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],GIe="test_",K7={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},J7=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Oi(e),n=Kd.extname(r).replace(".",""),i=K7[n]??{location:"sameFolder",prefix:GIe,suffix:WIe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=ls(Gu(e)),c===void 0)return}else{let u=ls(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=Kd.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=Kc(c);if(await this.fileExists(l))return Lo(l,o[0])}parseTestFilePath(e){try{return Kc(e)}catch(r){fn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Oi(e),n=Kd.extname(r).replace(".",""),i=K7[n]??{location:"sameFolder",prefix:GIe,suffix:WIe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=Gu(e):c=this.determineImplFolder(e);for(let l of o){let u=Lo(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=ls(e);if(r===void 0)return;let n=Kd.extname(Oi(e)).replace(".",""),i,o=K7[n]?.location??"sameFolder";o==="sameFolder"?i=Kd.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,K7[n]);if(a.length>0)return Kc(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${Kd.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return mct.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&ls(this.baseUri))??"",i=Kd.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(Kd.sep)}getRelativeTestFolder(e,r,n,i){let o=Kd.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=Kd.extname(Oi(e)).replace(".",""),n=Gu(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function X7(t){let e=Oi(t),r=Kd.extname(e),n=K7[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(WIe.some(o=>e.endsWith(o+r))||e.startsWith(GIe))}s(X7,"isTestFile");d();var hct=["indexed","indexing","not_indexed"],$T=class{constructor(){this._cache=new Or(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Zp(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=fE(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function gct(t,e,r,n){let i=ho(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(Qr).getToken(),l=WV(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),m=await iar(t,l,u,e.modelId,p,n);a.push(...m||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(gct,"fetchEmbeddings");async function iar(t,e,r,n,i,o){let a=cr(),c=i.map(u=>u.text),l=await A_(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,nI(t));if(l.status!==200||o.isCancellationRequested){Ia(t,new Cv(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(iar,"sendEmbeddingsRequest");d();d();var Mre=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var oar="cosine",sar=new Map([["cosine",Mre]]);function Act(t){let e=t==="default"?oar:t,r=sar.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(Act,"getScoringAlgorithm");d();var Cp=class{constructor(){this.workspaceScoringProviders=new Or(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=Act(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var yct={modelFamily:VV.textEmbedding3Small,scoringType:"default",dimensions:null};async function Cct(t,e,r,n,i,o,a,c=yct){let l={...yct,...c},u=car(t,e,r,n);Ur.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(Pa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await gct(t,f,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(P=>P.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let E=performance.now(),x=lar(t,e,m,y,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-E);let _=x.slice(0,i);return Ur.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(P=>u.find(N=>N.id===P.id).id)}s(Cct,"rerankSnippets");function car(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(car,"formatEmbeddingsInput");function lar(t,e,r,n,i){let o=t.get(Cp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(lar,"scoreEmbeddings");d();d();d();var VIe=Ne(Rre());var uar=.75,dar=1.2,far=47,Fre=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Ore();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,far),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get($a).getChunks(this.workspaceFolder),n=xE(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=xE(n,o=>o.chunk);return await par(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get($a).getChunks(this.workspaceFolder),a=new jIe(i);for await(let c of o){let l=await mar({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function par(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=VIe.job(({snippet:f,keywords:p})=>p.map(h=>f.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(par,"calculateIDFValues");async function mar(t,e,r,n){return{score:await VIe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,E=g*(y*(f+1)),x=y+f*(1-p+p*c/l);m+=E/x}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:dar,b:uar}}),...t}}s(mar,"calculateBM25Score");var jIe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var gar="bm25",Aar=new Map([["bm25",Fre]]);function Ect(t){let e=t==="default"?gar:t,r=Aar.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(Ect,"getRankingAlgorithm");var Iu=class{constructor(){this.workspaceRankingProviders=new Or(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=Ect(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function vct(t,e){let r=t.ctx,n=await Oo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(Tu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new ka(r),l=await lc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(Ur.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";Ia(r,new Cv(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(vct,"parseUserQuery");var xct=Ne(yp());var Cv=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},Qre=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get($a),o=i.status(e.turn.workspaceFolder),a=n.get(Iu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get($a).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await vct(e,e.cancelationToken)}catch(g){let y=new Cv(g);Ia(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(Iu),p=[],m=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let y=new Cv(g);Ia(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Xr(e.turn.request.message),c=[];try{c=await Cct(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new Cv(f);Ia(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(mn);for(let f of c){let p=f.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===f);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),E=ns.range(g,y);l.push({uri:m.document.uri,range:E,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...AGe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Ur.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get($a).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return xct.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var Ict=Ne(bct()),Hre=Ne(Rre()),Tct=Ne(require("os")),wct=Ne(yp());var Ear=Math.min(Math.max(Math.ceil(Tct.cpus().length/2),1),10),Z7=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new Ict.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await Hre.start({maxWorkers:Ear})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await Hre.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Ore=Z7.startWorkerPool.bind(Z7);var X4i=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),YIe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(KD);return}let r=[],n=this.turnContext.ctx.get(mn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new LC(u.document,l,l),p=new Nt([c]),h=X7(a)?.5:.8;r.push([`Code excerpt from file \`${ls(a)}\`:`,1],[f.wrapInTicks(p,h),1]),await this.turnContext.collectFile(JD,a,Gs(u),l)}}if(r.length>0)return r.unshift([new Nt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Nt(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},KD="collect-project-context",Ure=class extends GD{constructor(r,n=[new Qre]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(RC).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await Ore(),!r.uri))return;let n=this.ctx.get($a),i=this.ctx.get(id),o=this.ctx.get(Iu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get($a);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Iu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Iu).terminateRanking(this.ctx,r),this.ctx.get(Cp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await Z7.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get($a),o=this.ctx.get(Iu),a=this.ctx.get(Cp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await Ore();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get($a),c=this.ctx.get(Iu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(KD,"Collecting relevant project context"),await r.info(wct.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of hct){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await yGe(r,a.providerType,l),c.length===0){await r.steps.error(KD,"No project context found");return}return await r.steps.finish(KD),c}case"indexing":{await r.steps.error(KD,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(KD,"No project context available");return}}}},JD="project-context",qre=class extends Hl{static{s(this,"ProjectContextSkill")}constructor(e){super(JD,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new YIe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var _ct=I.Object({labels:I.Array(I.String())}),KIe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Nt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Nt([`- ${n}`]),.9]),this.turnContext.collectLabel(tA,n)}),new Nt(r)}},tA="project-labels",Wre=class{constructor(e){this._resolver=e;this.id=tA;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new KIe(e)}};d();var Gre=Ne(yp());var Rct={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},kct=Gre.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Pct=Gre.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,xar=Gre.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,JIe=`

`,Sct=kct+JIe+Pct;function Bct(t){let e=1;if(t.length===0)return{reply:Sct,vulnerabilities:e};if(t==="0")return{reply:Sct,vulnerabilities:0};if(t==="help")return{reply:xar,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=kct+JIe:i==="c"&&(n+=Pct+JIe);return{reply:n.trimEnd(),vulnerabilities:e}}s(Bct,"parseVulnerabilitiesInstructions");var Dct=Ne(yp());var bar="Oops, your response got filtered. Vote down if you think this shouldn't have happened",Iar="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",XIe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},Tar=new XIe,ZIe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Wl(Iar,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},war=new ZIe,eTe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Wl("Alright, I'm producing a notification",void 0,[],o)}},_ar=new eTe,tTe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Wl(bar,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},Sar=new tTe,rTe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Wl(await Lct(e))}},Rar=new rTe,nTe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[tA,ad]}instructions(e,r){return"Create a function that prints a christmas tree"}},kar=new nTe,iTe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Wl(Xr(e.turn.request.message))}},Par=new iTe,oTe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Gl).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=Dct.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Wl(i)}return new Wl("No prompt available")}},Bar=new oTe,sTe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Wl(await Mct(e,n,i))}},Dar=new sTe,aTe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=Bct(r);for(let o=0;o<i;o++)e.turn.annotations.push(Rct);return new Wl(n,void 0,e.turn.annotations)}},Nar=new aTe,cTe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(dct),new Wl(fct,void 0,e.turn.annotations)}},Lar=new cTe,lTe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Wl(pct)}},Mar=new lTe,uTe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Far=new uTe,dTe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[JD]}},Oar=new dTe,fTe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Wl("Alright, I'm producing a notification",void 0,[],[],[],e)}},Qar=new fTe;function Nct(){return[Tar,war,_ar,Sar,kar,Rar,Par,Bar,Dar,Nar,Lar,Qar,Mar,Far,Oar]}s(Nct,"getDebugTemplates");d();d();function YT(t,e){if(t.length==0)return new Nt([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Nt(r)}s(YT,"weighElidableList");var Fct=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:nc}))}),pTe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(KT,e.uri,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(KT,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(KT,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Nt([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),YT(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Nt([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Nt([["```"+c,1],[W0(a),.8],["```",1]]))}return new Nt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Oo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},KT="problems-in-active-document",jre=class extends Hl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(KT,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new pTe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var Vre=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(pr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new J7(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=X7(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!X7(e))return;let n=this.turnContext.ctx.get(pr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new J7(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Uar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${qar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Har} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(rA,e,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[W0(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(yo).stat(e),!0}catch{return!1}}}},Uar="Code excerpt from the implementation source file",qar="Code excerpt from the test file",Har="Code excerpt from an example test file";var Oct=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),hTe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=new Vre(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rA,e.testFileUri,Gs(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rA,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rA,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rA,e.testFileUri,Gs(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},rA="test-context",$re=class extends Hl{static{s(this,"TestContextSkill")}constructor(e){super(rA,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new hTe(r))}};d();var Qct=Ne(yp());var Uct=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:nc}))}),gTe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(HR,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Nt(["The latest test run produced the following failures and errors:"]);return new Nt([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(mn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(HR,o,Gs(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Nt(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Nt([Qct.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Nt(n)}appendCode(e,r,n){let i=[new Nt([`
The code of file \`${r}\` is:
`]),.6],o=[new Nt([["```"+n.detectedLanguageId,1],[W0(n.getText()),.9],["```",1]]),.7];return new Nt([[e,1],i,o])}},HR="test-failures",zre=class extends Hl{static{s(this,"TestFailuresSkill")}constructor(e){super(HR,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new gTe(r))}};var ah=Ne(yp());var Wl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},WR=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},War=new WR("tests","Generate unit tests","Generate Tests",ah.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[rA,HR],["chat-panel","editor"]),Gar=new WR("simplify","Simplify the code","Simplify This",ah.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],ah.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),jar=new WR("fix","Fix problems and compile errors","Fix This",ah.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[KT],["editor","chat-panel","inline"],ah.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),Var=new WR("explain","Explain how the code works","Explain This",ah.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],ah.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),$ar=new WR("doc","Document the current selection of code","Generate Docs",ah.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],ah.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),ATe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=ETe(e.conversation),n=ah.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Wl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Wl(n)}},zar=new ATe,yTe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=CTe(e.ctx).filter(i=>i!=this),n=ah.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Wl(n)}},Yar=new yTe;function eQ(){return[War,Gar,jar,Var,$ar,zar,Yar,...Nct()]}s(eQ,"getPromptTemplates");function CTe(t){let e=eQ();return!b6(t)&&!Lh(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(CTe,"getUserFacingPromptTemplates");var vTe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Wi=class{constructor(e){this.ctx=e;this.conversations=new Or(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new Nre([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(cl).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new vTe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&Xr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Xr(r.request.message),"@");(await QC(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(Xr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Xr(r.request.message),"/"),o=eQ().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(cl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function rlt(t){return typeof t>"u"||t===null}s(rlt,"isNothing");function Kar(t){return typeof t=="object"&&t!==null}s(Kar,"isObject");function Jar(t){return Array.isArray(t)?t:rlt(t)?[]:[t]}s(Jar,"toArray");function Xar(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(Xar,"extend");function Zar(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(Zar,"repeat");function ecr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(ecr,"isNegativeZero");var tcr=rlt,rcr=Kar,ncr=Jar,icr=Zar,ocr=ecr,scr=Xar,ll={isNothing:tcr,isObject:rcr,toArray:ncr,repeat:icr,isNegativeZero:ocr,extend:scr};function nlt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(nlt,"formatError");function rQ(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=nlt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(rQ,"YAMLException$1");rQ.prototype=Object.create(Error.prototype);rQ.prototype.constructor=rQ;rQ.prototype.toString=s(function(e){return this.name+": "+nlt(this,e)},"toString");var r0=rQ;function xTe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(xTe,"getLine");function bTe(t,e){return ll.repeat(" ",e-t.length)+t}s(bTe,"padStart");function acr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=xTe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=ll.repeat(" ",e.indent)+bTe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=xTe(t.buffer,n[a],i[a],t.position,p),c+=ll.repeat(" ",e.indent)+bTe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=ll.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=xTe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=ll.repeat(" ",e.indent)+bTe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(acr,"makeSnippet");var ccr=acr,lcr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ucr=["scalar","sequence","mapping"];function dcr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(dcr,"compileStyleAliases");function fcr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(lcr.indexOf(r)===-1)throw new r0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=dcr(e.styleAliases||null),ucr.indexOf(this.kind)===-1)throw new r0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(fcr,"Type$1");var cd=fcr;function qct(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(qct,"compileList");function pcr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(pcr,"compileMap");function TTe(t){return this.extend(t)}s(TTe,"Schema$1");TTe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof cd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new r0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof cd))throw new r0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new r0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new r0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof cd))throw new r0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(TTe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=qct(i,"implicit"),i.compiledExplicit=qct(i,"explicit"),i.compiledTypeMap=pcr(i.compiledImplicit,i.compiledExplicit),i},"extend");var mcr=TTe,hcr=new cd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),gcr=new cd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),Acr=new cd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),ycr=new mcr({explicit:[hcr,gcr,Acr]});function Ccr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(Ccr,"resolveYamlNull");function Ecr(){return null}s(Ecr,"constructYamlNull");function vcr(t){return t===null}s(vcr,"isNull");var xcr=new cd("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ccr,construct:Ecr,predicate:vcr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function bcr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(bcr,"resolveYamlBoolean");function Icr(t){return t==="true"||t==="True"||t==="TRUE"}s(Icr,"constructYamlBoolean");function Tcr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(Tcr,"isBoolean");var wcr=new cd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:bcr,construct:Icr,predicate:Tcr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function _cr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(_cr,"isHexCode");function Scr(t){return 48<=t&&t<=55}s(Scr,"isOctCode");function Rcr(t){return 48<=t&&t<=57}s(Rcr,"isDecCode");function kcr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!_cr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Scr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Rcr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(kcr,"resolveYamlInteger");function Pcr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(Pcr,"constructYamlInteger");function Bcr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ll.isNegativeZero(t)}s(Bcr,"isInteger");var Dcr=new cd("tag:yaml.org,2002:int",{kind:"scalar",resolve:kcr,construct:Pcr,predicate:Bcr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ncr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Lcr(t){return!(t===null||!Ncr.test(t)||t[t.length-1]==="_")}s(Lcr,"resolveYamlFloat");function Mcr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Mcr,"constructYamlFloat");var Fcr=/^[-+]?[0-9]+e/;function Ocr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ll.isNegativeZero(t))return"-0.0";return r=t.toString(10),Fcr.test(r)?r.replace("e",".e"):r}s(Ocr,"representYamlFloat");function Qcr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ll.isNegativeZero(t))}s(Qcr,"isFloat");var Ucr=new cd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Lcr,construct:Mcr,predicate:Qcr,represent:Ocr,defaultStyle:"lowercase"}),qcr=ycr.extend({implicit:[xcr,wcr,Dcr,Ucr]}),Hcr=qcr,ilt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),olt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Wcr(t){return t===null?!1:ilt.exec(t)!==null||olt.exec(t)!==null}s(Wcr,"resolveYamlTimestamp");function Gcr(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,m;if(e=ilt.exec(t),e===null&&(e=olt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(Gcr,"constructYamlTimestamp");function jcr(t){return t.toISOString()}s(jcr,"representYamlTimestamp");var Vcr=new cd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Wcr,construct:Gcr,instanceOf:Date,represent:jcr});function $cr(t){return t==="<<"||t===null}s($cr,"resolveYamlMerge");var zcr=new cd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$cr}),kTe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ycr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=kTe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(Ycr,"resolveYamlBinary");function Kcr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=kTe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(Kcr,"constructYamlBinary");function Jcr(t){var e="",r=0,n,i,o=t.length,a=kTe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(Jcr,"representYamlBinary");function Xcr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(Xcr,"isBinary");var Zcr=new cd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ycr,construct:Kcr,predicate:Xcr,represent:Jcr}),elr=Object.prototype.hasOwnProperty,tlr=Object.prototype.toString;function rlr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,tlr.call(i)!=="[object Object]")return!1;for(o in i)if(elr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(rlr,"resolveYamlOmap");function nlr(t){return t!==null?t:[]}s(nlr,"constructYamlOmap");var ilr=new cd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:rlr,construct:nlr}),olr=Object.prototype.toString;function slr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],olr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(slr,"resolveYamlPairs");function alr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(alr,"constructYamlPairs");var clr=new cd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:slr,construct:alr}),llr=Object.prototype.hasOwnProperty;function ulr(t){if(t===null)return!0;var e,r=t;for(e in r)if(llr.call(r,e)&&r[e]!==null)return!1;return!0}s(ulr,"resolveYamlSet");function dlr(t){return t!==null?t:{}}s(dlr,"constructYamlSet");var flr=new cd("tag:yaml.org,2002:set",{kind:"mapping",resolve:ulr,construct:dlr}),slt=Hcr.extend({implicit:[Vcr,zcr],explicit:[Zcr,ilr,clr,flr]}),XT=Object.prototype.hasOwnProperty,Yre=1,alt=2,clt=3,Kre=4,ITe=1,plr=2,Hct=3,mlr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,hlr=/[\x85\u2028\u2029]/,glr=/[,\[\]\{\}]/,llt=/^(?:!|!!|![a-z\-]+!)$/i,ult=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Wct(t){return Object.prototype.toString.call(t)}s(Wct,"_class");function UC(t){return t===10||t===13}s(UC,"is_EOL");function jR(t){return t===9||t===32}s(jR,"is_WHITE_SPACE");function n0(t){return t===9||t===32||t===10||t===13}s(n0,"is_WS_OR_EOL");function ZD(t){return t===44||t===91||t===93||t===123||t===125}s(ZD,"is_FLOW_INDICATOR");function Alr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(Alr,"fromHexCode");function ylr(t){return t===120?2:t===117?4:t===85?8:0}s(ylr,"escapedHexLen");function Clr(t){return 48<=t&&t<=57?t-48:-1}s(Clr,"fromDecimalCode");function Gct(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(Gct,"simpleEscapeSequence");function Elr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(Elr,"charFromCodepoint");var dlt=new Array(256),flt=new Array(256);for(GR=0;GR<256;GR++)dlt[GR]=Gct(GR)?1:0,flt[GR]=Gct(GR);var GR;function vlr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||slt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(vlr,"State$1");function plt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=ccr(r),new r0(e,r)}s(plt,"generateError");function Zr(t,e){throw plt(t,e)}s(Zr,"throwError");function Jre(t,e){t.onWarning&&t.onWarning.call(null,plt(t,e))}s(Jre,"throwWarning");var jct={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&Zr(e,"duplication of %YAML directive"),n.length!==1&&Zr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Zr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Zr(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Jre(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&Zr(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],llt.test(i)||Zr(e,"ill-formed tag handle (first argument) of the TAG directive"),XT.call(e.tagMap,i)&&Zr(e,'there is a previously declared suffix for "'+i+'" tag handle'),ult.test(o)||Zr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Zr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function JT(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||Zr(t,"expected valid JSON character");else mlr.test(c)&&Zr(t,"the stream contains non-printable characters");t.result+=c}}s(JT,"captureSegment");function Vct(t,e,r,n){var i,o,a,c;for(ll.isObject(r)||Zr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],XT.call(e,o)||(e[o]=r[o],n[o]=!0)}s(Vct,"mergeMappings");function eN(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Zr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Wct(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Wct(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)Vct(t,e,o[u],r);else Vct(t,e,o,r);else!t.json&&!XT.call(r,i)&&XT.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,Zr(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(eN,"storeMappingPair");function PTe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Zr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(PTe,"readLineBreak");function Gc(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;jR(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(UC(i))for(PTe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Jre(t,"deficient indentation"),n}s(Gc,"skipSeparationSpace");function ene(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||n0(r)))}s(ene,"testDocumentSeparator");function BTe(t,e){e===1?t.result+=" ":e>1&&(t.result+=ll.repeat(`
`,e-1))}s(BTe,"writeFoldedLines");function xlr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),n0(h)||ZD(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),n0(i)||r&&ZD(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),n0(i)||r&&ZD(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),n0(n))break}else{if(t.position===t.lineStart&&ene(t)||r&&ZD(h))break;if(UC(h))if(l=t.line,u=t.lineStart,f=t.lineIndent,Gc(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(JT(t,o,a,!1),BTe(t,t.line-l),o=a=t.position,c=!1),jR(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return JT(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(xlr,"readPlainScalar");function blr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(JT(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else UC(r)?(JT(t,n,i,!0),BTe(t,Gc(t,!1,e)),n=i=t.position):t.position===t.lineStart&&ene(t)?Zr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Zr(t,"unexpected end of the stream within a single quoted scalar")}s(blr,"readSingleQuotedScalar");function Ilr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return JT(t,r,t.position,!0),t.position++,!0;if(c===92){if(JT(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),UC(c))Gc(t,!1,e);else if(c<256&&dlt[c])t.result+=flt[c],t.position++;else if((a=ylr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=Alr(c))>=0?o=(o<<4)+a:Zr(t,"expected hexadecimal character");t.result+=Elr(o),t.position++}else Zr(t,"unknown escape sequence");r=n=t.position}else UC(c)?(JT(t,r,n,!0),BTe(t,Gc(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ene(t)?Zr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Zr(t,"unexpected end of the stream within a double quoted scalar")}s(Ilr,"readDoubleQuotedScalar");function Tlr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,m,h,g=Object.create(null),y,E,x,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,h=!1,c=[];else if(b===123)f=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(Gc(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&Zr(t,"expected the node content, but found ','"):Zr(t,"missed comma between flow collection entries"),E=y=x=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),n0(u)&&(p=m=!0,t.position++,Gc(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,tN(t,e,Yre,!1,!0),E=t.tag,y=t.result,Gc(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),Gc(t,!0,e),tN(t,e,Yre,!1,!0),x=t.result),h?eN(t,c,g,E,y,x,n,i,o):p?c.push(eN(t,null,g,E,y,x,n,i,o)):c.push(y),Gc(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}Zr(t,"unexpected end of the stream within a flow collection")}s(Tlr,"readFlowCollection");function wlr(t,e){var r,n,i=ITe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)ITe===i?i=p===43?Hct:plr:Zr(t,"repeat of a chomping mode identifier");else if((f=Clr(p))>=0)f===0?Zr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Zr(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(jR(p)){do p=t.input.charCodeAt(++t.position);while(jR(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!UC(p)&&p!==0)}for(;p!==0;){for(PTe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),UC(p)){l++;continue}if(t.lineIndent<c){i===Hct?t.result+=ll.repeat(`
`,o?1+l:l):i===ITe&&o&&(t.result+=`
`);break}for(n?jR(p)?(u=!0,t.result+=ll.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=ll.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=ll.repeat(`
`,l):t.result+=ll.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!UC(p)&&p!==0;)p=t.input.charCodeAt(++t.position);JT(t,r,t.position,!1)}return!0}s(wlr,"readBlockScalar");function $ct(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Zr(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!n0(a))));){if(c=!0,t.position++,Gc(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,tN(t,e,clt,!1,!0),o.push(t.result),Gc(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)Zr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s($ct,"readBlockSequence");function _lr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,E=!1,x=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!E&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Zr(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&n0(n))b===63?(E&&(eN(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!0,i=!0):E?(E=!1,i=!0):Zr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!tN(t,r,alt,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);jR(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),n0(b)||Zr(t,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(eN(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!1,i=!1,h=t.tag,g=t.result;else if(x)Zr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(x)Zr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(E&&(a=t.line,c=t.lineStart,l=t.position),tN(t,e,Kre,!0,i)&&(E?g=t.result:y=t.result),E||(eN(t,p,m,h,g,y,a,c,l),h=g=y=null),Gc(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)Zr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return E&&eN(t,p,m,h,g,null,a,c,l),x&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),x}s(_lr,"readBlockMapping");function Slr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Zr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Zr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!n0(a);)a===33&&(n?Zr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),llt.test(i)||Zr(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),glr.test(o)&&Zr(t,"tag suffix cannot contain flow indicator characters")}o&&!ult.test(o)&&Zr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Zr(t,"tag name is malformed: "+o)}return r?t.tag=o:XT.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Zr(t,'undeclared tag handle "'+i+'"'),!0}s(Slr,"readTagProperty");function Rlr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Zr(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!n0(r)&&!ZD(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Zr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(Rlr,"readAnchorProperty");function klr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!n0(n)&&!ZD(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Zr(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),XT.call(t.anchorMap,r)||Zr(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Gc(t,!0,-1),!0}s(klr,"readAlias");function tN(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,m,h,g,y,E;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=Kre===r||clt===r,n&&Gc(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Slr(t)||Rlr(t);)Gc(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||Kre===r)&&(Yre===r||alt===r?y=e:y=e+1,E=t.position-t.lineStart,l===1?c&&($ct(t,E)||_lr(t,E,y))||Tlr(t,y)?f=!0:(a&&wlr(t,y)||blr(t,y)||Ilr(t,y)?f=!0:klr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&Zr(t,"alias node should not have any properties")):xlr(t,y,Yre===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&$ct(t,E))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Zr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(XT.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||Zr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&Zr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Zr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(tN,"composeNode");function Plr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Gc(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!n0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Zr(t,"directive name must not be less than one character in length");a!==0;){for(;jR(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!UC(a));break}if(UC(a))break;for(r=t.position;a!==0&&!n0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&PTe(t),XT.call(jct,n)?jct[n](t,n,i):Jre(t,'unknown document directive "'+n+'"')}if(Gc(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Gc(t,!0,-1)):o&&Zr(t,"directives end mark is expected"),tN(t,t.lineIndent-1,Kre,!1,!0),Gc(t,!0,-1),t.checkLineBreaks&&hlr.test(t.input.slice(e,t.position))&&Jre(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ene(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Gc(t,!0,-1));return}if(t.position<t.length-1)Zr(t,"end of the stream or a document separator is expected");else return}s(Plr,"readDocument");function mlt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new vlr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Zr(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Plr(r);return r.documents}s(mlt,"loadDocuments");function Blr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=mlt(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(Blr,"loadAll$1");function Dlr(t,e){var r=mlt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new r0("expected a single document in the stream, but found more")}}s(Dlr,"load$1");var Nlr=Blr,Llr=Dlr,hlt={loadAll:Nlr,load:Llr},glt=Object.prototype.toString,Alt=Object.prototype.hasOwnProperty,DTe=65279,Mlr=9,nQ=10,Flr=13,Olr=32,Qlr=33,Ulr=34,wTe=35,qlr=37,Hlr=38,Wlr=39,Glr=42,ylt=44,jlr=45,Xre=58,Vlr=61,$lr=62,zlr=63,Ylr=64,Clt=91,Elt=93,Klr=96,vlt=123,Jlr=124,xlt=125,ld={};ld[0]="\\0";ld[7]="\\a";ld[8]="\\b";ld[9]="\\t";ld[10]="\\n";ld[11]="\\v";ld[12]="\\f";ld[13]="\\r";ld[27]="\\e";ld[34]='\\"';ld[92]="\\\\";ld[133]="\\N";ld[160]="\\_";ld[8232]="\\L";ld[8233]="\\P";var Xlr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Zlr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function eur(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&Alt.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(eur,"compileStyleMap");function tur(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new r0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ll.repeat("0",n-e.length)+e}s(tur,"encodeHex");var rur=1,iQ=2;function nur(t){this.schema=t.schema||slt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ll.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=eur(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?iQ:rur,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(nur,"State");function zct(t,e){for(var r=ll.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(zct,"indentString");function _Te(t,e){return`
`+ll.repeat(" ",t.indent*e)}s(_Te,"generateNextLine");function iur(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(iur,"testImplicitResolving");function Zre(t){return t===Olr||t===Mlr}s(Zre,"isWhitespace");function oQ(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==DTe||65536<=t&&t<=1114111}s(oQ,"isPrintable");function Yct(t){return oQ(t)&&t!==DTe&&t!==Flr&&t!==nQ}s(Yct,"isNsCharOrWhitespace");function Kct(t,e,r){var n=Yct(t),i=n&&!Zre(t);return(r?n:n&&t!==ylt&&t!==Clt&&t!==Elt&&t!==vlt&&t!==xlt)&&t!==wTe&&!(e===Xre&&!i)||Yct(e)&&!Zre(e)&&t===wTe||e===Xre&&i}s(Kct,"isPlainSafe");function our(t){return oQ(t)&&t!==DTe&&!Zre(t)&&t!==jlr&&t!==zlr&&t!==Xre&&t!==ylt&&t!==Clt&&t!==Elt&&t!==vlt&&t!==xlt&&t!==wTe&&t!==Hlr&&t!==Glr&&t!==Qlr&&t!==Jlr&&t!==Vlr&&t!==$lr&&t!==Wlr&&t!==Ulr&&t!==qlr&&t!==Ylr&&t!==Klr}s(our,"isPlainSafeFirst");function sur(t){return!Zre(t)&&t!==Xre}s(sur,"isPlainSafeLast");function tQ(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(tQ,"codePointAt");function blt(t){var e=/^\n* /;return e.test(t)}s(blt,"needIndentIndicator");var Ilt=1,STe=2,Tlt=3,wlt=4,XD=5;function aur(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,m=!1,h=n!==-1,g=-1,y=our(tQ(t,0))&&sur(tQ(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=tQ(t,l),!oQ(u))return XD;y=y&&Kct(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=tQ(t,l),u===nQ)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!oQ(u))return XD;y=y&&Kct(u,f,c),f=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?Ilt:o===iQ?XD:STe:r>9&&blt(t)?XD:a?o===iQ?XD:STe:m?wlt:Tlt}s(aur,"chooseScalarStyle");function cur(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===iQ?'""':"''";if(!t.noCompatMode&&(Xlr.indexOf(e)!==-1||Zlr.test(e)))return t.quotingType===iQ?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return iur(t,u)}switch(s(l,"testAmbiguity"),aur(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case Ilt:return e;case STe:return"'"+e.replace(/'/g,"''")+"'";case Tlt:return"|"+Jct(e,t.indent)+Xct(zct(e,o));case wlt:return">"+Jct(e,t.indent)+Xct(zct(lur(e,a),o));case XD:return'"'+uur(e)+'"';default:throw new r0("impossible error: invalid scalar style")}}()}s(cur,"writeScalar");function Jct(t,e){var r=blt(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(Jct,"blockHeader");function Xct(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Xct,"dropEndingNewline");function lur(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Zct(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+Zct(l,e),i=o}return n}s(lur,"foldString");function Zct(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(Zct,"foldLine");function uur(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=tQ(t,i),n=ld[r],!n&&oQ(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||tur(r);return e}s(uur,"escapeString");function dur(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(vv(t,e,c,!1,!1)||typeof c>"u"&&vv(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(dur,"writeFlowSequence");function elt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(vv(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&vv(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=_Te(t,e)),t.dump&&nQ===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(elt,"writeBlockSequence");function fur(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),vv(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),vv(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(fur,"writeFlowMapping");function pur(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new r0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=_Te(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),vv(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&nQ===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=_Te(t,e)),vv(t,e+1,f,!0,p)&&(t.dump&&nQ===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(pur,"writeBlockMapping");function tlt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,glt.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(Alt.call(c.represent,l))n=c.represent[l](e,l);else throw new r0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(tlt,"detectType");function vv(t,e,r,n,i,o,a){t.tag=null,t.dump=r,tlt(t,r,!1)||tlt(t,r,!0);var c=glt.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,m;if(f&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(pur(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(fur(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?elt(t,e-1,t.dump,i):elt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(dur(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&cur(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new r0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(vv,"writeNode");function mur(t,e){var r=[],n=[],i,o;for(RTe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(mur,"getDuplicateReferences");function RTe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)RTe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)RTe(t[n[i]],e,r)}s(RTe,"inspectNode");function hur(t,e){e=e||{};var r=new nur(e);r.noRefs||mur(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),vv(r,0,n,!0,!0)?r.dump+`
`:""}s(hur,"dump$1");var gur=hur,Aur={dump:gur};function NTe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(NTe,"renamed");var j3i=hlt.load,V3i=hlt.loadAll,LTe=Aur.dump;var $3i=NTe("safeLoad","load"),z3i=NTe("safeLoadAll","loadAll"),Y3i=NTe("safeDump","dump");var VR=Ne(yp());var MTe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Gl=class{constructor(){this.dump=new Or(25);this.promptsDump=new Or(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new MTe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function _lt(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(_lt,"filterConversationTurns");function ETe(t){return _lt(t).getLastTurn()?.id}s(ETe,"getLastTurnId");async function Lct(t){let e=_lt(t.conversation),r=ETe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Gl).getDump(r),o=Eur(i,e.turns);fn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await vur(i,t.ctx);return VR.default`
        ${Cur(t.conversation,r)}
        ${yur(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Lct,"getConversationDump");function yur(t){let e=t.get(nn);return VR.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(yur,"getEditorInfoDumpMessage");function Cur(t,e){return VR.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(Cur,"getInfoDumpMessage");async function Mct(t,e,r){let n=t.ctx.get(cl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Wi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Xr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Xr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=VR.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=VR.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${LTe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=VR.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Mct,"getSkillsDump");function Eur(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:Xr(n.request.message)};return n.response&&(o.response=Xr(n.response.message)),o})};return LTe(r)}s(Eur,"toSimulationFormat");async function vur(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(mn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();fn.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(vur,"fileDump");d();function FTe(t,e){let r=ho(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(Xr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(FTe,"countMessagesTokens");d();function Slt(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(Slt,"chatBasePrompt");d();d();d();d();d();function Rlt(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([W0(i.join(`
`)),1]),i=[],r.push([new Nt([o]),1])):r.push([new Nt([o]),1]),n=!n):n?i.push(o):r.push([new Nt([o]),.8]);return n&&(r.push([W0(i.join(`
`)),1]),r.push([new Nt(["```"]),1])),new Nt(r)}s(Rlt,"fromMessage");function rN(t){let e=OTe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=klt(i.request,n+1),a=i.response&&i.response?.type!=="meta"?klt(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(Rlt(c))}return r.length>0?new Nt([[new Nt(["Consider the following conversation history:"]),1],[YT(r,"inverseLinear"),1]]):null}s(rN,"fromHistory");var xur=5;function OTe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&Xr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,xur).reverse()}s(OTe,"filterTurns");function klt(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=Xr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${Xr(t.message)}`}s(klt,"formatTurnMessage");d();d();d();var bur=4,QTe={skillIds:[]},tne=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Oo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(Tu).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,f);return m.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(Wc).inspectFetchResult(m),this.handleResult(m,f,Xr(a),o,u.toolConfig)}else return QTe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),QTe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,bur);else return Ur.error(this.ctx,"Missing tool call in meta prompt response"),QTe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Rt(this.ctx,`${Sl(i)}.metaPrompt`,l,0),Rt(this.ctx,`${Sl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Rt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var rne=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return ue(e,r,"org.springframework.boot","Spring Boot"),ue(e,r,"jakarta.jakartaee-api","Jakarta EE"),ue(e,r,"javax:javaee-api","Java EE"),ue(e,r,"org.apache.struts:struts2-core","Apache Struts"),ue(e,r,"org.hibernate:hibernate-core","Hibernate"),ue(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),ue(e,r,"javax.faces:jsf-api","JSF"),ue(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"com.google.guava","Google Guava"),ue(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),ue(e,r,"org.apache.commons:commons-io","Apache Commons IO"),ue(e,r,"joda-time:joda-time","Joda-Time"),ue(e,r,"com.google.code.gson:gson","Google Gson"),ue(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),ue(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),ue(e,r,"org.apache.commons:commons-net","Apache Commons Net"),ue(e,r,"org.apache.poi:poi","Apache POI"),ue(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),ue(e,r,"junit:junit","JUnit"),ue(e,r,"org.testng:testng","TestNG"),ue(e,r,"org.spockframework:spock-core","Spock"),ue(e,r,"io.cucumber:cucumber-java","Cucumber"),ue(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"org.mockito","Mockito"),ue(e,r,"org.assertj","AssertJ"),ue(e,r,"org.hamcrest","Hamcrest"),ue(e,r,"org.powermock","PowerMock"),ue(e,r,"org.jmock","JMock"),ue(e,r,"org.easymock","EasyMock"),ue(e,r,"org.jmockit:jmockit","JMockit"),ue(e,r,"com.github.tomakehurst:wiremock","WireMock"),ue(e,r,"org.dbunit:dbunit","DBUnit"),ue(e,r,"com.icegreen:greenmail","GreenMail"),ue(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ue(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),ue(e,r,"io.rest-assured:rest-assured","Rest-Assured"),ue(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ue(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},nne=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"@types/node","Node.js"),ue(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||ue(e,r,"react","React"),ue(e,r,"angular","Angular"),ue(e,r,"vue","Vue.js"),ue(e,r,"ember","Ember.js"),ue(e,r,"backbone","Backbone.js"),ue(e,r,"meteor","Meteor"),ue(e,r,"polymer","Polymer"),ue(e,r,"aurelia","Aurelia"),ue(e,r,"knockout","Knockout.js"),ue(e,r,"dojo","Dojo Toolkit"),ue(e,r,"mithril","Mithril.js"),ue(e,r,"marionette","Marionette.js"),ue(e,r,"marko","Marko.js"),ue(e,r,"svelte","Svelte"),ue(e,r,"hyperapp","Hyperapp"),ue(e,r,"inferno","Inferno.js"),ue(e,r,"preact","Preact"),ue(e,r,"riot","Riot.js"),ue(e,r,"moon","Moon.js"),ue(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"lodash","Lodash"),ue(e,r,"moment","Moment.js"),ue(e,r,"axios","Axios"),ue(e,r,"redux","Redux"),ue(e,r,"recoil","Recoil"),ue(e,r,"jquery","jQuery"),ue(e,r,"d3","D3.js"),ue(e,r,"underscore","Underscore.js"),ue(e,r,"ramda","Ramda"),ue(e,r,"immutable","Immutable.js"),ue(e,r,"rxjs","RxJS"),ue(e,r,"three","Three.js"),ue(e,r,"socket.io","Socket.IO"),ue(e,r,"express","Express.js"),ue(e,r,"next","Next.js"),ue(e,r,"puppeteer","Puppeteer"),ue(e,r,"cheerio","Cheerio"),ue(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"jest","Jest"),ue(e,r,"mocha","Mocha"),ue(e,r,"jasmine","Jasmine"),ue(e,r,"ava","AVA"),ue(e,r,"qunit","QUnit"),ue(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"chai","Chai"),ue(e,r,"sinon","Sinon"),ue(e,r,"enzyme","Enzyme"),ue(e,r,"protractor","Protractor"),ue(e,r,"supertest","Supertest"),ue(e,r,"nock","Nock"),ue(e,r,"cypress","Cypress"),ue(e,r,"@testing-library/react","React Testing Library"),r}},ine=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"github.com/gorilla/mux","Gorilla Mux"),ue(e,r,"github.com/go-chi/chi","Chi"),ue(e,r,"github.com/gin-gonic/gin","Gin"),ue(e,r,"github.com/labstack/echo","Echo"),ue(e,r,"github.com/revel/revel","Revel"),ue(e,r,"github.com/astaxie/beego","Beego"),ue(e,r,"github.com/go-martini/martini","Martini"),ue(e,r,"github.com/gobuffalo/buffalo","Buffalo"),ue(e,r,"github.com/goji/goji","Goji"),ue(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"net/http","net/http"),ue(e,r,"fmt","fmt"),ue(e,r,"io","io"),ue(e,r,"time","time"),ue(e,r,"math","math"),ue(e,r,"strconv","strconv"),ue(e,r,"strings","strings"),ue(e,r,"sort","sort"),ue(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"github.com/onsi/ginkgo","ginkgo"),ue(e,r,"github.com/onsi/gomega","gomega"),ue(e,r,"github.com/stretchr/testify","testify"),ue(e,r,"gopkg.in/check.v1","gocheck"),ue(e,r,"github.com/franela/goblin","goblin"),ue(e,r,"github.com/DATA-DOG/godog","godog"),ue(e,r,"github.com/stesla/gospec","gospec"),ue(e,r,"github.com/rjeczalik/gotest","gotest"),ue(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"github.com/stretchr/testify","Testify"),ue(e,r,"github.com/smartystreets/goconvey","GoConvey"),ue(e,r,"github.com/onsi/ginkgo","Ginkgo"),ue(e,r,"github.com/golang/mock","GoMock"),ue(e,r,"gopkg.in/check.v1","GoCheck"),ue(e,r,"github.com/franela/goblin","Goblin"),ue(e,r,"github.com/DATA-DOG/godog","GoDog"),ue(e,r,"github.com/onsi/gomega","Gomega"),ue(e,r,"github.com/stesla/gospec","GoSpec"),ue(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},one=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flask","Flask"),ue(e,r,"django","Django"),ue(e,r,"pyramid","Pyramid"),ue(e,r,"tornado","Tornado"),ue(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"requests","requests"),ue(e,r,"numpy","numpy"),ue(e,r,"pandas","pandas"),ue(e,r,"scipy","scipy"),ue(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"pytest","Pytest"),ue(e,r,"unittest","Unittest"),ue(e,r,"doctest","Doctest"),ue(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mock","Mock"),ue(e,r,"hypothesis","Hypothesis"),ue(e,r,"behave","Behave"),ue(e,r,"lettuce","Lettuce"),ue(e,r,"testify","Testify"),ue(e,r,"pyhamcrest","PyHamcrest"),r}},sne=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"laravel/framework","Laravel"),ue(e,r,"symfony/symfony","Symfony"),ue(e,r,"slim/slim","Slim"),ue(e,r,"cakephp/cakephp","CakePHP"),ue(e,r,"yiisoft/yii2","Yii"),ue(e,r,"zendframework/zendframework","Zend Framework"),ue(e,r,"phalcon/cphalcon","Phalcon"),ue(e,r,"bcosca/fatfree","Fat-Free"),ue(e,r,"fuel/fuel","FuelPHP"),ue(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"monolog/monolog","Monolog"),ue(e,r,"vlucas/phpdotenv","PHP dotenv"),ue(e,r,"symfony/console","Symfony Console"),ue(e,r,"guzzlehttp/guzzle","GuzzleHttp"),ue(e,r,"ramsey/uuid","Ramsey UUID"),ue(e,r,"doctrine/orm","Doctrine ORM"),ue(e,r,"php-di/php-di","PHP-DI"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"symfony/finder","Symfony Finder"),ue(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"phpunit/phpunit","PHPUnit"),ue(e,r,"behat/behat","Behat"),ue(e,r,"phpspec/phpspec","PHPSpec"),ue(e,r,"codeception/codeception","Codeception"),ue(e,r,"atoum/atoum","Atoum"),ue(e,r,"pestphp/pest","PestPHP"),ue(e,r,"kahlan/kahlan","Kahlan"),ue(e,r,"peridot-php/peridot","Peridot"),ue(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockery/mockery","Mockery"),ue(e,r,"php-mock/php-mock","PHP-Mock"),ue(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ue(e,r,"padraic/mockery","Padraic Mockery"),ue(e,r,"phpspec/prophecy","PHPSpec Prophecy"),ue(e,r,"phpunit/php-invoker","PHPUnit Invoker"),ue(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),ue(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},ane=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"Microsoft.NETCore.App",".NET Core"),ue(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"EntityFramework","Entity Framework"),ue(e,r,"Newtonsoft.Json","Newtonsoft.Json"),ue(e,r,"AutoMapper","AutoMapper"),ue(e,r,"Serilog","Serilog"),ue(e,r,"Dapper","Dapper"),ue(e,r,"Polly","Polly"),ue(e,r,"FluentValidation","FluentValidation"),ue(e,r,"MediatR","MediatR"),ue(e,r,"Hangfire","Hangfire"),ue(e,r,"RabbitMQ.Client","RabbitMQ.Client"),ue(e,r,"MassTransit","MassTransit"),ue(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ue(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ue(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ue(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"xunit","xUnit"),ue(e,r,"NUnit","NUnit"),ue(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"Moq","Moq"),ue(e,r,"FluentAssertions","FluentAssertions"),ue(e,r,"Bogus","Bogus"),ue(e,r,"RestSharp","RestSharp"),ue(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},cne=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flutter","Flutter"),ue(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"dartx","dartx"),ue(e,r,"provider","Provider"),ue(e,r,"rxdart","RxDart"),ue(e,r,"dio","Dio"),ue(e,r,"json_serializable","json_serializable"),ue(e,r,"freezed","Freezed"),ue(e,r,"moor","Moor"),ue(e,r,"hive","Hive"),ue(e,r,"http","http"),ue(e,r,"path","path"),ue(e,r,"intl","intl"),ue(e,r,"equatable","equatable"),ue(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test","test"),ue(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockito","mockito"),ue(e,r,"bloc_test","bloc_test"),r}},lne=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"rails","Rails"),ue(e,r,"sinatra","Sinatra"),ue(e,r,"hanami","Hanami"),ue(e,r,"grape","Grape"),ue(e,r,"roda","Roda"),ue(e,r,"padrino","Padrino"),ue(e,r,"cuba","Cuba"),ue(e,r,"ramaze","Ramaze"),ue(e,r,"nyara","Nyara"),ue(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"active_record","ActiveRecord"),ue(e,r,"sequel","Sequel"),ue(e,r,"rom","ROM"),ue(e,r,"datamapper","DataMapper"),ue(e,r,"mongoid","Mongoid"),ue(e,r,"neo4j","Neo4j"),ue(e,r,"redis","Redis"),ue(e,r,"cassandra","Cassandra"),ue(e,r,"couchrest","CouchRest"),ue(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"rspec","RSpec"),ue(e,r,"minitest","Minitest"),ue(e,r,"cucumber","Cucumber"),ue(e,r,"spinach","Spinach"),ue(e,r,"turnip","Turnip"),ue(e,r,"bacon","Bacon"),ue(e,r,"shoulda","Shoulda"),ue(e,r,"test-unit","Test::Unit"),ue(e,r,"wrong","Wrong"),ue(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"factory_bot","FactoryBot"),ue(e,r,"faker","Faker"),ue(e,r,"ffaker","FFaker"),ue(e,r,"fabrication","Fabrication"),ue(e,r,"machinist","Machinist"),ue(e,r,"mocha","Mocha"),ue(e,r,"flexmock","FlexMock"),ue(e,r,"rr","RR"),ue(e,r,"bourne","Bourne"),ue(e,r,"not_a_mock","NotAMock"),r}},une=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"tokio","tokio"),ue(e,r,"async-std","async-std"),ue(e,r,"hyper","hyper"),ue(e,r,"actix-web","actix-web"),ue(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"serde","serde"),ue(e,r,"regex","regex"),ue(e,r,"rand","rand"),ue(e,r,"log","log"),ue(e,r,"lazy_static","lazy_static"),ue(e,r,"libc","libc"),ue(e,r,"futures","futures"),ue(e,r,"rayon","rayon"),ue(e,r,"reqwest","reqwest"),ue(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test-case","test-case"),ue(e,r,"proptest","proptest"),ue(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockall","mockall"),ue(e,r,"double","double"),ue(e,r,"rstest","rstest"),ue(e,r,"mockiato","mockiato"),ue(e,r,"mock_derive","mock_derive"),ue(e,r,"mocktopus","mocktopus"),ue(e,r,"mockers","mockers"),ue(e,r,"mock_it","mock_it"),r}},dne=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function ue(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(ue,"addFromLibraries");var fne=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Blt(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(Blt,"determineProgrammingLanguage");var Plt=[new rne,new nne,new ine,new one,new sne,new ane,new cne,new lne,new une,new dne];function Dlt(t){let e=Plt.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new fne(t,Plt);return new UTe(e)}s(Dlt,"getMetadataLookup");var UTe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Nlt=I.Object({name:I.String(),version:I.Optional(I.String())}),Llt=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(Nlt),buildTools:I.Array(Nlt)}),qTe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Nt([`The user is working on a project with the following characteristics:
`]),1]);let n=Dlt(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Nt(r)}addProgrammingLanguage(e,r){let n=Blt(e);this.turnContext.collectLabel(qC,n),r.push([new Nt([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(qC,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Nt([`${r}
${i}`]),1])}}},qC="project-metadata",pne=class{constructor(e){this._resolver=e;this.id=qC;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new qTe(e)}};d();var Mlt=Ne(require("path"));var HTe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Nt(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Nt(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=Gs(n);if(await this.turnContext.collectFile(hne,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new LC(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Nt([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Nt([`The referenced file \`${Mlt.basename(r.uri)}\` is content excluded.`]),1]]}},WTe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},hne="references",mne=class{constructor(){this.id=hne;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new WTe}processor(e){return new HTe(e)}};var $R=s(()=>[qC,tA,hne,ad],"mandatorySkills"),gne=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new tne(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!$R().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!$R().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!$R().includes(u)))}return c.push(...$R()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(Wi).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Wi).getSupportedSkills(r.id),a=e.get(cl).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await QC(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...$R(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var Ane=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Ur.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Ur.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var yne=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Ur.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var Iur="X-Initiator",Tur="X-Interaction-ID",wur="X-Interaction-Type";var Cne=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},GTe=class extends Cne{static{s(this,"User")}static id(){return"user"}},jTe=class extends Cne{static{s(this,"Agent")}static id(){return"agent"}},VTe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[Iur]:this.initiator,[Tur]:this.interactionId,[wur]:this.interactionType.toString()}}},i0=class t extends VTe{static{s(this,"LlmInteraction")}static user(e,r){return new t(GTe,e,r)}static agent(e,r){return new t(jTe,e,r)}};var ZT=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new $Te(this),this.steps=new yne(e,r,n,e.get(Js)),this.collector=new zTe(r,n,e.get(Js)),this.agentToolCalls=new Ane(e,r,n,e.get(Js))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return i0.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?i0.agent(e,this.turn.telemetryId):i0.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(Js).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},Ene=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},sQ=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},$Te=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Wi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Gl).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Ene(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(cl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Gl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof Ene||i instanceof sQ)throw i;Ur.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},zTe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function Flt(t,e){let[r,n,i]=await Sur(t,e);return i.push(...Pur(t)),r.length>0||n.length>0?[new Nt([[new Nt(["Consider the additional context:"]),1],[YT(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(Flt,"fromSkills");async function Sur(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await Bur(t,a.skillId,e?.languageId??""))continue;let[c,l]=await Rur(t,a.skillId);c&&($R().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(Sur,"handleSkillsInReverse");async function Rur(t,e){let n=t.ctx.get(cl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await kur(t,n,c,u,a,f):[void 0,await xne(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await xne(t,n,"unresolvable",void 0,a)]}catch(i){if(Ur.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof sQ)throw i;return[void 0,await xne(t,n,"failed")]}}s(Rur,"safelyProcessSkill");async function kur(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Nt([[n,1]]):a=n,[[a,r?.value()||0],await xne(t,e,"resolved",a,i,o)]}s(kur,"handleProcessedSkill");async function xne(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(Pa).getBestChatModelConfig(fm("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=ho(u.tokenizer).tokenLength(f)}return t.ctx.get(Gl).addResolution(t.turn.id,l),l}s(xne,"determineResolution");function Pur(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(Pur,"handleIgnoredSkills");async function Bur(t,e,r){if(e!==qC&&e!==tA)return!0;let n=t.ctx.get(Bt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===qC:e===tA}s(Bur,"includeSkill");var Olt=Ne(yp());var zR=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=rN(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Nt(n),a]}async elidableSkills(e,r){return await Flt(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await vC.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=lp(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[c,l]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:c},{role:"system",content:this.suffix(e)},{role:"user",content:a}],l]}},bne=class extends zR{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Olt.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var Qlt=Ne(yp());var Ine=class extends zR{static{s(this,"InlineUserPromptStrategy")}suffix(e){return Qlt.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var YTe=Ne(yp());var Tne=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=rN(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return YTe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=nit(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:AT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:YTe.default`
                    This is the user's question: 
                    ${Xr(i).trim()} 
                `.trim()}],[]]}};d();var Ult=Ne(yp());var wne=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=AT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Ult.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=rN(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var Dur=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],_ne=class extends zR{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=lp(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:Dur,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=AT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!MY(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!MY(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var KTe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function aQ(t,e,r){return new KTe(t,e,r)}s(aQ,"descriptor");var qlt=[aQ("user",fm("user"),()=>new bne),aQ("inline",fm("inline"),()=>new Ine),aQ("meta",fm("meta"),()=>new Tne),aQ("suggestions",fm("suggestions"),()=>new wne),aQ("synonyms",fm("synonyms"),()=>new _ne)],Sne=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=qlt.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return qlt}};var Wlt=require("console");var Tu=class{constructor(e,r=new Sne){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Dn).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(Wc).inspectPrompt({type:r.promptType,prompt:Hlt(c),tokens:l}),this.ctx.get(Gl).addPrompt(e.turn.id,Hlt(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,Wlt.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:Nur(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,FTe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),FTe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(nn).getEditorInfo().readableName??this.ctx.get(nn).getEditorInfo().name,i=Lur(process.platform);return Slt(this.ctx,n,r?.login,i,e)}};function Nur(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(Nur,"processResultOfElidableText");function Hlt(t){return t.map(e=>Xr(e.content)).join(`

`)}s(Hlt,"debugChatMessages");function Lur(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(Lur,"mapPlatformToOs");var nN=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Oo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(Tu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){Ur.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){Ur.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){Ur.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){Ur.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Ur.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var iN=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(pGe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get($a).workspaceCount})),await this.turnContext.ctx.get(Wc).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Xr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:bT.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},mGe(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Xr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new nN(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Ur.debug(this.turnContext.ctx,"Computed followup",c),Ur.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:cr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return CGe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",hGe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var Rne=I.Union([I.String(),I.Number()]),YR=I.Union([I.String(),I.Number()]),Mur=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),kne=I.Object({uri:I.String(),position:I.Optional(bl)}),cQ=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(nc),selection:I.Optional(nc),status:I.Optional(Mur),range:I.Optional(nc)}),Fur=I.Object({type:I.Literal("directory"),uri:I.String()}),oN=I.Union([cQ,Fur,jat]),ch=I.Union([I.Literal("panel"),I.Literal("inline")]),Our=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),JTe=I.Union([I.String(),I.Array(Our)]),Glt=I.Object({request:JTe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(YR),model:I.Optional(I.String())});function Pne(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(Pne,"convertToMessageContent");function Bne(t,e){if(t=lp(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(Bne,"appendToMessage");var Dne=I.Union([I.Literal("Ask"),I.Literal("Agent")]),Qur=I.Object({type:I.String(),description:I.String()}),jlt=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),Qur),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),Nne=I.Object({uri:I.String(),name:I.String()});var XTe="generate-response",Lne=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},lQ=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(r.ctx),this.postProcessor=new iN(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof Lne?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await lc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(Wc).inspectPrompt(c),await n.steps.start(XTe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:lp(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return cr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return OTe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:lp(r.request.message)}),r.response&&r.response.type==="model"){let i=Gat(r.response.references);n.push({role:"assistant",content:lp(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Zat(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new jT((p,m,h,g,y)=>{let E=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(x=>({message:x.message,severity:"warning"})),confirmationRequest:E}),this.turn.response?(this.turn.response.message=Bne(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),E&&(this.turn.confirmationRequest=E)}),l=await this.turnContext.ctx.get(Qr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Xr(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Xr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Lne("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return rF(this.conversation,"conversationPanel",Xr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(XTe,e.error.message):await r.steps.finish(XTe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var uQ=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new lQ(this,e)}},Mne=class extends uQ{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new lQ(this,e)}};d();var Uur="github",nA=class{static{s(this,"RemoteAgentRegistry")}},Fne=class extends nA{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await WS(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(fn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||fn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||fn.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Uur).map(i=>new uQ(i.id,i.slug,i.name,i.description,i.avatar_url))}};var ZTe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[JD]}};async function QC(t){let e=[];return e.push(new Mne),e.push(...await t.get(nA).agents()),e.push(new ZTe),e}s(QC,"getAgents");var qur=I.Object({});async function Hur(t,e,r){return[(await QC(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(Hur,"handleConversationAgentsChecked");var Vlt=at(qur,Hur);d();d();var dQ=Ne(Lc());function Wur(t,e,r){let n=Dr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Rt(t,"getCompletions.docVersionMismatch",n)}s(Wur,"telemetryVersionMismatch");async function iA(t,e,r){let i=t.get(pr).getTextDocumentUnsafe(e);if(!i)throw new dQ.ResponseError(cn.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await EE(t,e,i.getText());if(o.status==="invalid")throw t.get(po).setInactive(o.reason),new dQ.ResponseError(cn.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(Wur(t,i,e.version),wu.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new dQ.ResponseError(cn.ContentModified,"Document Version Mismatch");return i}s(iA,"getTextDocument");async function HC(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await iA(t,n,r)}catch(i){if(i instanceof dQ.ResponseError&&i.code===cn.CopilotNotAvailable)return;throw i}}s(HC,"getTextDocumentIfAvailable");var Gur=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),jur=I.Object({turnId:YR,codeBlockIndex:I.Number(),source:Gur,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(kne),textDocument:I.Optional(Cf),position:I.Optional(bl),conversationSource:I.Optional(ch)});async function Vur(t,e,r){let n=await HC(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=_I(r.conversationSource),c=t.get(Wi).findByTurnId(r.turnId),l=await lc(t,c,{languageId:n?.detectedLanguageId??""});return Qd(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault().toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Sl(a)}.acceptedCopy`,l),["OK",null]}s(Vur,"handleConversationCodeCopyChecked");var $lt=at(jur,Vur);d();var $ur=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),zur=I.Object({turnId:YR,source:$ur,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(kne),textDocument:I.Optional(Cf),position:I.Optional(bl),conversationSource:I.Optional(ch)});async function Yur(t,e,r){let n=await HC(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=_I(r.conversationSource),c=t.get(Wi).findByTurnId(r.turnId),l=await lc(t,c,{languageId:n?.detectedLanguageId??""});return Qd(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault().toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Sl(a)}.acceptedInsert`,l),["OK",null]}s(Yur,"handleConversationCodeInsertChecked");var zlt=at(zur,Yur);d();d();var One=I.Array(nc);function Qne(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Qne,"resolveAsActiveEditor");d();var Ylt=Ne(Lc());var Une=new Ylt.ProgressType,ewe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(xr).connection.sendProgress(Une,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(xr).connection.sendProgress(Une,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(xr).connection.sendProgress(Une,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(xr).connection.sendProgress(Une,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function sN(t){return new ewe(t.workDoneToken)}s(sN,"createProgressHandler");d();d();d();var _u=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var xv=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var aN=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var Klt="```",fQ=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,Kur=String.raw`${Klt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Klt}`,Jur=new RegExp(fQ+`
`+Kur,"gs"),twe=["replace","delete"];function rwe(t,e){let r=t.matchAll(Jur),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!twe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((y,E)=>{f[E]=y.slice(p.length)});let m={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},h=nwe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(rwe,"extractEditsFromTaggedCodeblocks");function nwe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(nwe,"applyEditsToDocument");d();d();d();d();var bv=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new up({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var Xur=new vt("activeEditorPrompt");async function Jlt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new mc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&Zur(n.selection)){let o=new bv(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Oi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new bv(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new bv(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Oi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new bv(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else Xur.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Jlt,"processActiveEditor");function Zur(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(Zur,"notEmptySelection");d();d();function Xlt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Xlt,"partsLength");async function eut(t,e=1/0,r){let n=Zlt(0,t,e),i=e-Xlt(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return edr();let u=Zlt(c.level+1,l,i-1);u.length&&(o=!0,i-=Xlt(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(eut,"visualFileTree");function Zlt(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Zlt,"toParts");var edr=s(()=>({tree:"",files:[]}),"emptyTree");var tdr=new vt("fileReferencesPrompt");async function tut(t,e,r,n){let i=await rut(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=uD(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(tut,"generateWorkspaceStructurePrompt");async function rut(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await eut(await nut(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(rut,"generateWorkspaceStructure");async function nut(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(yo).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=Lo(e,o);return r.excludeDotFiles&&o.startsWith(".")||idr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>nut(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(nut,"buildFileList");var rdr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],ndr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function idr(t){return!!(ndr.includes(Oi(t).toLowerCase())||ls(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>rdr.includes(r)))}s(idr,"shouldAlwaysIgnoreFile");async function qne(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Oi(a.uri)})),i=await rut(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${La(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return tdr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(qne,"processDirectoryReferences");var odr=new vt("fileReferencesPrompt");async function iut(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new mc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new bv(h,void 0,[]);g&&m.push(...g.render())}else odr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),Jlt(t,e),qne(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(iut,"processFileReferences");var sut=new vt("editAgentPrompt"),Hne=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=Xve(this.currentTurn.response?.message,!0),o=await vC.appendToUserMessage(this.ctx,this.props.workspaceFolders,Xr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return $O(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(c=>c.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:lp(n.request.message)}),n.response){let i=Xve(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):sut.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=zO(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+H7(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(XZ(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){sut.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=zO(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${sl}`),o.push("changed code"),o.push(`// ${sl}`),o.push("changed code"),o.push(`// ${sl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${sl}`),o.push("	age: number;"),o.push(`	// ${sl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await iut({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${sl}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${ls(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await tut(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var aut=15,cut=128,cN=new vt("toolCallingLoop"),Wne=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Js),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(sd),this.prompt=new Hne(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new YE(this.turnContext.ctx)}),this.requestId=cr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(vGe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new jT((u,f,p,m)=>{let h=u.trim().match(fQ)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:f,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...f??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),cN.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,f)=>o.isFinishedAfter(u,f));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),cN.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new _u({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new mc;case"failed":throw this.turn.status="error",new _u({message:bT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new _u({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new _u({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new _u({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new _u({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new _u({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new _u({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new _u({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new _u({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=AT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=fat(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=sre(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof xv||l instanceof mc)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new oo([new Bi("")],"cancelled"),e.id),new xv(l.message);{cN.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${bE(l)}`,l),c="error";let u=new oo([new Bi(bE(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let f=sre(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;xGe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;cN.error(this.turnContext.ctx,a);let c=new oo([new Bi(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=sre(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new mc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new xv("Cancelled by user");case"accept":return Promise.resolve();default:throw new xv(`Invalid confirmation result ${u.result}`)}}else cN.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>aut)throw cN.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${aut} for turn ${this.turn.id}`),new aN}checkChatPayload(e){if(e.messages.length===0)throw new _u({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>cut)throw new _u({message:`You may not include more than ${cut} tools in your request.`,responseIsFiltered:!1})}};var Gne=new vt("agenticTurnProcessor"),jne=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.turnSuggestions=new nN(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(c),await this.endProgress({error:{message:c,code:kIe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await lc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Gne.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let l=await Oo.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(l),await new Wne(this.turnContext,this.chatFetcher,l,c).run(r);let f={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(r,c.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(f.suggestedTitle=p)}await this.endProgress(f)}catch(l){if(l instanceof xv)Gne.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,l),this.turn.status="cancelled",await this.cancelProgress();else if(l instanceof mc)Gne.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,l),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(l instanceof aN)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:{message:l.message,code:kIe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(l instanceof _u)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:l.conversationError});else throw Gne.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,l),l}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Ur.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=zO(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var iwe="collect-context",owe="generate-response",Vne=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.postProcessor=new iN(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:c,type:"meta"},await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await lc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(c=c.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let l=eQ().find(m=>m.id===this.turn.template?.templateId);if(l?.response){await this.handleTemplateResponse(l,this.turn.template.userQuestion,r);return}let u=(await QC(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(iwe,"Collecting context"),await this.collectContext(n,r,c,this.strategy.uiKind,l,u);let f=a?(await this.turnContext.ctx.get(Pa).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,f);if(!p)await n.steps.error(iwe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(iwe),await n.steps.start(owe,"Generating response");let m=this.augmentTelemetry(p,c,l,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,c.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Ur.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new gne(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let c="",l=0,u=new jT((g,y,E,x)=>{let b=g.trim().match(fQ)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:g,annotations:y,references:E,hideText:b,notifications:x.map(_=>({severity:"warning",message:_.message}))}),this.turn.response?this.turn.response.message=Bne(this.turn.response.message,g):this.turn.response={message:g,type:"model"},this.turn.annotations.push(...y??[]),c+=g,this.strategy.currentDocument){let _=this.strategy.extractEditsFromResponse(c,this.strategy.currentDocument);_&&_.length>0&&(c="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:_}),l+=_.length)}}),f=await Oo.getModelConfiguration(this.turnContext.ctx,"user",a);e=Oo.transformMessages(e,f.modelFamily),this.turnContext.setResolvedModelConfiguration(f);let p=this.turn.getResolvedModelId();p&&(i=i.extendedBy({modelId:p}));let m={modelConfiguration:f,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Xr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},h=await this.chatFetcher.fetchResponse(m,r,n,(g,y)=>u.isFinishedAfter(g,y));return i=i.extendedBy(void 0,{numCodeEdits:l}),await this.postProcessor.postProcess(h,r,u.appliedText,n,i,Xr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",gGe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Xr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=rF(this.conversation,this.strategy.uiKind,Xr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=rF(this.conversation,this.strategy.uiKind,Xr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(owe,e.error.message):await r.steps.finish(owe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var $ne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Oo.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(Tu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},zne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(Pa).getBestChatModelConfig(fm(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(Tu).toPrompt(e,l)}async processResponse(e){let r=[],n=Xr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(ad);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(mn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=rwe(e,r).filter(a=>twe.includes(a.mode)),o=nwe(i,r);if(o)return await this.ctx.get(Wc).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return rwe(e,r)}};d();d();var lut=Ne(Lc()),uut=Ne(hg());var Jd=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new lut.ProtocolRequestType("conversation/context");this.typeCheck=Fs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(xr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new uut.ResponseError(c.code,c.message,c.data);Ur.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Ur.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new bu(this.typeCheck.Errors(i));return i}}};var swe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Iv=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new swe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},Yne=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(Js)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Wi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Jd(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await Ny(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:cr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Tv=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(Iv).get(r);if(i)return new Yne(e,i);let a=(await QC(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new zne(e.ctx):c=new $ne(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new jne(e,c):new Vne(e,c)}};d();var dut=Ne(Lc());var lN=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new dut.ResponseError(cn.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function Kne(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Oi(t.uri)}]}s(Kne,"resolveAsWorkspaceFolders");d();d();var sdr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),o0=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?sdr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Xd=class{constructor(){this.tokens=new Or(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new In.CancellationTokenSource,i=new o0([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var adr=I.Object({conversationId:I.Optional(Rne),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(Glt,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(Cf),textDocument:I.Optional(Cf),selection:I.Optional(nc),visibleRanges:I.Optional(One),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(oN)),source:I.Optional(ch),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Nne)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(Dne),needToolCallConfirmation:I.Optional(I.Boolean())});async function cdr(t,e,r){lN.validate(r.workspaceFolders);let n=await HC(t,r,e),i=t.get(Wi).create(r);await ldr(t,i,r,n);let o=i.turns[i.turns.length-1],a=sN(r),c=t.get(Xd).add(a.progressToken,e),l=new ZT(t,i,o,c);return await(await t.get(Tv).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(cdr,"handleConversationCreateChecked");async function ldr(t,e,r,n){for(let i of r.turns){let o=Pne(i.request),a=new VT({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=Lre(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Kne(c),u=Qne({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Wi).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(ldr,"addTurns");var fut=at(adr,cdr);d();var udr=I.Object({conversationId:I.String()});function ddr(t,e,r){return t.get(Wi).destroy(r.conversationId),["OK",null]}s(ddr,"handleConversationDestroyChecked");var put=at(udr,ddr);d();var fdr=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),pdr=new vt("conversationNotifyCodeAcceptance");async function mdr(t,e,r){let n=t.get(Wi).findByTurnId(r.turnId);if(!n)return pdr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await lc(t,n,{languageId:""});return Qd(t,void 0,{},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Sl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(mdr,"handleConversationNotifyCodeAcceptanceChecked");var mut=at(fdr,mdr);d();var hdr=I.Object({});function gdr(t,e,r){return[{path:t.get(pu).directory},null]}s(gdr,"handleConversationPersistenceChecked");var hut=at(hdr,gdr);d();d();var Aut=Ne(require("node:events"));var awe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Dn).getSession(),n=e.get(Il);return r&&r.githubAppId&&r.githubAppId!==Zh?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},cwe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Qr).getToken()).envelope.chat_enabled?"ok":"failed"}}},Adr=[new awe,new cwe],gut="onPreconditionsChanged",lh=class{constructor(e,r=Adr){this.ctx=e;this.checks=r;this.emitter=new Aut.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(gut,e)}emit(e){this.emitter.emit(gut,e)}};var ydr=I.Object({forceCheck:I.Optional(I.Boolean())});async function Cdr(t,e,r){let n=r.forceCheck??!1;return[await t.get(lh).check(n),null]}s(Cdr,"handleConversationPreconditionsChecked");var yut=at(ydr,Cdr);d();var Edr=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(Cf),textDocument:I.Optional(Cf),source:I.Optional(ch)});async function vdr(t,e,r){let n=await HC(t,r,e),i=_I(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Qd(t,n,{rating:o,uiKind:i},{},`${Sl(i)}.messageRating`,a),["OK",null]}s(vdr,"handleConversationRatingChecked");var Cut=at(Edr,vdr);d();d();var Jne=class extends WT{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:kC,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(yT).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(pC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var xdr=I.Object({tools:I.Array(jlt)});function bdr(t,e,r){return r.tools.forEach(n=>{t.get(sd).registerTool(new Jne({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(bdr,"conversationRegisterToolsChecked");var Eut=at(xdr,bdr);d();var Idr=I.Object({});function Tdr(t,e,r){return[CTe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(Tdr,"handleConversationTemplatesChecked");var vut=at(Idr,Tdr);d();var wdr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:Rne,turnId:I.Optional(YR),message:JTe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(Cf),textDocument:I.Optional(Cf),selection:I.Optional(nc),visibleRanges:I.Optional(One),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(oN)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Nne)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:iit,model:I.Optional(I.String()),chatMode:I.Optional(Dne),needToolCallConfirmation:I.Optional(I.Boolean())});async function _dr(t,e,r){lN.validate(r.workspaceFolders);let n=await HC(t,r,e),i=t.get(Wi),o=i.get(r.conversationId),a=Pne(r.message),c=new VT({message:a,type:"user"},r.turnId);c.chatMode=Lre(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Kne(l),f=Qne({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=sN(r),m=t.get(Xd).add(p.progressToken,e),h=new ZT(t,o,c,m);return await(await t.get(Tv).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model},null]}s(_dr,"handleConversationTurnChecked");var xut=at(wdr,_dr);d();var Sdr=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(ch)});async function Rdr(t,e,r){t.get(Wi).deleteTurn(r.conversationId,r.turnId);let i=_I(r.source),o=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:""});return Qd(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Sl(i)}.messageDelete`,o),["OK",null]}s(Rdr,"handleConversationTurnDeleteChecked");var but=at(Sdr,Rdr);d();var kdr=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function Pdr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(Pdr,"buildSystemMessage");function Bdr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Bdr,"buildUserMessage");function Ddr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),E=g.trimEnd().length,x={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:E}},message:m.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(x)}return r}s(Ddr,"parseReviewComments");async function Ndr(t,e,r){if(!r.document.text)return[null,{code:cn.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:cn.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:cn.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:cn.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:cn.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ka),o=await Oo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:Pdr()},{role:"user",content:Bdr(r)}],c=await t.get(Bt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:i0.user("code-review",cr())},e,c);if(l.type!=="success")return[null,{code:cn.InternalError,message:"Failed to generate code review"}];let u=Ddr(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(Ndr,"handleCopilotCodeReviewChecked");var Iut=at(kdr,Ndr);d();d();var ew=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,ev.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return i0.user("conversation-edits",this.editTurnId)}};d();async function Xne(t,e,r,n){let o=t.get(qc).create("panel","en"),a=new IT({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new ew(t,o,a,n,pn.Gpt4o),u=t.get(xu);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Xne,"streamMockedResult");d();var Ldr=I.Object({enableMock:I.Boolean()}),WC=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Mdr(t,e,r){return t.get(WC).setMockEnabled(r.enableMock),["OK",null]}s(Mdr,"handleTestingSetCopilotEditsResponseChecked");var Tut=at(Ldr,Mdr);var Fdr=I.Object({request:I.String(),response:I.Optional(I.String())}),Odr=I.Union([I.Literal("panel")]),Qdr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(Fdr,{minItems:1}),workingSet:I.Optional(I.Array(cQ)),source:I.Optional(Odr),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Udr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new IT({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(Udr,"buildEditConversation");async function qdr(t,e,r){if(t.get(WC).isMockEnabled())return await Xne(t,cr(),cr(),r.partialResultToken),[[],null];let n=Udr(t.get(qc),r),i=n.getLastTurn(),o=new ew(t,n,i,r.partialResultToken,r.model),a=t.get(Xd).add(r.partialResultToken,e);return[await t.get(tv).createOrContinueEditConversation(o,a),null]}s(qdr,"handleEditConversationCreateChecked");var wut=at(Qdr,qdr);d();var Hdr=I.Object({editConversationId:I.String()});function Wdr(t,e,r){return t.get(qc).destroy(r.editConversationId),["OK",null]}s(Wdr,"handleEditConversationDestroyChecked");var _ut=at(Hdr,Wdr);d();var Gdr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(cQ)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function jdr(t,e,r){let n=t.get(e),i=new IT({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(jdr,"buildEditConversation");async function Vdr(t,e,r){if(t.get(WC).isMockEnabled())return await Xne(t,r.editConversationId,cr(),r.partialResultToken),[[],null];let n=t.get(qc),i=jdr(n,r.editConversationId,r),o=i.getLastTurn(),a=new ew(t,i,o,r.partialResultToken,r.model),c=t.get(Xd).add(r.partialResultToken,e);return[await t.get(tv).createOrContinueEditConversation(a,c),null]}s(Vdr,"handleEditConversationTurnChecked");var Sut=at(Gdr,Vdr);d();var $dr=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(ch)});async function zdr(t,e,r){t.get(qc).deleteTurn(r.editConversationId,r.editTurnId);let i=await tF(t,r.editTurnId,r.editConversationId,{languageId:""});return Qd(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Sl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(zdr,"handleEditConversationTurnDeleteChecked");var Rut=at($dr,zdr);d();var Ydr=I.Object({}),Kdr=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(s7)}))}))});function Jdr(t,e,r){return[t.get(th).getAllTools(),null]}s(Jdr,"handleGetMCPToolsChecked");function Xdr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(th).updateMCPToolStatus(i,a,c);return[t.get(th).getAllTools(),null]}s(Xdr,"handleUpdateMCPToolsStatusChecked");var kut=at(Ydr,Jdr),Put=at(Kdr,Xdr);d();var Zdr=I.Object({});async function efr(t,e,r){let n=await t.get(Qr).getToken();return[tfr(await t.get(Bd).getMetadata(),n),null]}s(efr,"handleCopilotModelsChecked");function tfr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=mm.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!XOe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(tfr,"filterModels");var But=at(Zdr,efr);d();var rfr=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function nfr(t,e,r){return r.model&&r.status==="enabled"?await t.get(Bd).acceptModelPolicy(r.model)?["OK",null]:[null,{code:cn.InternalError,message:"Failed to accept model policy"}]:[null,{code:cn.InvalidRequest,message:"Invalid model or status"}]}s(nfr,"handleCopilotModelsPolicyChecked");var Dut=at(rfr,nfr);d();d();d();d();function ifr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(ifr,"panelPositionForDocument");async function*Nut(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Nut,"trimChoices");var uN=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=ifr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function lwe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await lwe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(lwe,"reportSolutions");async function uwe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:uwe(t,e)}}s(uwe,"generateSolutionsStream");function Zne(t){return t.replace(/\s+/g,"")}s(Zne,"normalizeCompletionText");async function Lut(t,e,r,n,i){let o=e.targetPosition,a=e.textDocument,c=cI(t,a.uri),l=cr(),u=Dr.createAndMarkAsIssued({headerRequestId:l,languageId:a.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Bt).updateExPValuesAndAssignments({uri:a.uri,languageId:a.detectedLanguageId},u),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i}));let f=await G3(t,l,Wy(a,o),e.savedTelemetryData);if(f.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(f.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(f.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(f.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(f.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let p=f.prompt,m=f.trailingWs;return m.length>0&&(e.startPosition=ns.position(e.startPosition.line,e.startPosition.character-m.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...Q4(p),solutionCount:e.solutionCountTarget,promptEndPos:a.offsetAt(o)}),n.debug(t,"prompt:",p),Rt(t,"solution.requested",e.savedTelemetryData),{prompt:p,trailingWs:m,telemetryData:e.savedTelemetryData,repoInfo:c,ourRequestId:l}}s(Lut,"setupPromptAndTelemetry");function Mut(t,e,r,n,i,o){let a=t.get(dg).forLanguage(t,e.detectedLanguageId,o),c=H0(e.detectedLanguageId),l=rJ(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=aI(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?EF(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?EF(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:m,engineInfo:p}}s(Mut,"setupCompletionParams");var dwe=new vt("solutions");async function ofr(t,e){let r=e.targetPosition,n=e.textDocument,i=await Lut(t,e,"open copilot",dwe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:m,engineInfo:h}=Mut(t,n,r,o,e,c),g=e.cancellationToken,y={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:f},E=await t.get(Mf).fetchAndStreamCompletions(t,y,c.extendedBy(),m,g);if(E.type==="failed"||E.type==="canceled")return{status:"FinishedWithError",error:`${E.type}: ${E.reason}`};let x=E.choices;x=Nut(x),x=eF(x,k=>vF(t,n,r,k,!1,dwe));let b=eF(x,async k=>{let P=k.completionText;dwe.info(t,`Open Copilot completion: [${k.completionText}]`);let N=await yVe(t,n,r,k.completionText)??ns.position(r.line,0),[M]=NI(n.getText(ns.range(N,r)));P=M+P;let J=k.completionText;a.length>0&&J.startsWith(a)&&(J=J.substring(a.length));let pe=k.meanLogProb,Y=pe!==void 0?Math.exp(pe):0,G=c.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:J,insertText:P,range:ns.range(N,r),meanProb:Y,meanLogProb:pe||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:G,copilotAnnotations:k.copilotAnnotations}});return uwe(g,b[Symbol.asyncIterator]())}s(ofr,"launchSolutions");async function eie(t,e,r){return t.get(po).withProgress(async()=>{let i=ofr(t,e);return await lwe(i,r)})}s(eie,"runSolutions");var Out=Ne(nb()),mQ=Ne(Lc());d();d();function tie(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(tie,"parseChallengeDoc");var sfr=I.Object({text:I.String(),score:I.Number()}),afr=I.Object({documents:I.Array(sfr),options:I.Optional(I.Object({}))});async function rie(t,e,r){let n=cr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=tie(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:oy.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(rie,"runTestSolutions");var oA=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function cfr(t,e,r){return t.forceSet(oA,new oA(r.documents)),["OK",null]}s(cfr,"handleTestingSetPanelCompletionDocumentsChecked");var Fut=at(afr,cfr);var Qut=KW.type;function lfr(t,e,r,n,i){let o=Zne(n.completionText),a=(0,Out.SHA256)(o).toString();return t.get(Ss).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:_Ie,title:`Accept completion ${i}`,arguments:[a]}}}s(lfr,"makeCompletion");function pwe(t,e){return`${t}/${e}`}s(pwe,"progressMessage");var fwe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(xr)}async onSolution(e){this.count+=1;let r=lfr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(mQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:pwe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return ufr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(mQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function ufr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(mQ.WorkDoneProgress.type,t,{kind:"end",message:pwe(r,10)})}s(ufr,"reportDone");var pQ;async function dfr(t,e,r){let n=await iA(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(xr).connection.sendProgress(mQ.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:pwe(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(xr).connection.sendProgress(KW.partialResult,c,{items:[f]})},"onCompletion"));let l=new fwe(t,r,a),u=t.get(oA);if(u.documents){let f=u.documents;await rie(i,f,l)}else{l.offset=n.offsetAt(i);let f=new uN(n,i,e,10);await eie(t,f,l)}return l.error!==void 0?[null,{code:cn.InternalError,message:l.error}]:[{items:o},null]}s(dfr,"handleChecked");async function ffr(t,e,r){pQ&&(pQ.cancel(),pQ.dispose()),pQ=new In.CancellationTokenSource;let n=pQ.token,i=new o0([e,n]);try{return await dfr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:cn.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(ffr,"handleCheckedWithAbort");var Uut=at(PDe,ffr);d();d();d();function mfr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(bd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(mfr,"urlsToCheck");async function qut(t,e,r=q4(t),n,i){let o=mfr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await hfr(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(qut,"checkReachability");async function hfr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(hfr,"determineReachability");var Ep=Ne(require("os")),dN=Ne(require("tls"));async function Wut(t,e){let r=await t.get(jn).getImplementation(),n=await t.get(Qr).getGitHubSession(),i=await t.get(Qr).getToken().catch(()=>{});return{sections:[Afr(t),gfr(t,n),yfr(t,r),await Cfr(t,r,i?.endpoints,n,e)]}}s(Wut,"collectDiagnostics");function Gut(t){return t.sections.map(Efr).join(Ep.EOL+Ep.EOL)+Ep.EOL}s(Gut,"formatDiagnosticsAsMarkdown");function gfr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:N_(t),"GitHub Account":n,"Session ID":t.get(As).sessionId,"Send Restricted Telemetry":U4(t)?"enabled":"disabled","Content Exclusion":t.get(Mc).enabled?"enabled":"unavailable"}}}s(gfr,"collectCopilotSection");function Afr(t){let e={Plugin:xfr(t),Editor:vfr(t),"Operating System":`${Ep.type()} ${Ep.release()} (${Ep.arch()})`};return GC(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(Afr,"collectEnvironmentSection");function yfr(t,e){let r=t.get(nu).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":dN.rootCertificates.length,"TLS Default Min Version":dN.DEFAULT_MIN_VERSION,"TLS Default Max Version":dN.DEFAULT_MAX_VERSION};return GC(n,"http_proxy"),GC(n,"https_proxy"),GC(n,"no_proxy"),GC(n,"SSL_CERT_FILE"),GC(n,"SSL_CERT_DIR"),GC(n,"OPENSSL_CONF"),GC(n,"NODE_EXTRA_CA_CERTS"),GC(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(yfr,"collectNetworkConfigSection");async function Cfr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await qut(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(Cfr,"collectReachabilitySection");function Hut(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(Hut,"quoteCode");function GC(t,e){let r=process.env[e];r&&(t[Hut(e)]=Hut(r)),r!==process.env[e.toUpperCase()]&&GC(t,e.toUpperCase())}s(GC,"addEnvironmentVariable");function Efr(t){return`## ${t.name}`+Ep.EOL+Ep.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Ep.EOL)}s(Efr,"formatSectionAsMarkdown");function vfr(t){let e=t.get(nn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(vfr,"getEditorDisplayVersion");function xfr(t){let e=t.get(nn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(xfr,"getPluginDisplayVersion");var bfr=I.Object({});async function Ifr(t,e){return[{report:Gut(await Wut(t,e))},null]}s(Ifr,"handleDiagnosticsChecked");var jut=at(bfr,Ifr);d();d();d();d();function Vut(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(Vut,"normalizeIndentCharacter");function $ut(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=ns.range(ns.position(i.line,0),ns.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=Vut(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=ns.range(f.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:cr(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s($ut,"completionsFromGhostTextResults");async function mwe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await nye(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=s$e(t,e.textDocument,e.position,c),u=$ut(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let f=t.get(Bt),p=(vi(t,kt.AlwaysRequestMultiline)??f.enableProgressiveReveal(o.telemetryBlob))&&Ly.isSupported(e.textDocument.detectedLanguageId),m=vi(t,kt.EnableSpeculativeRequests),h=f.enableSpeculativeRequests(o.telemetryBlob),g=p||(m??h),y=vi(t,kt.EnableSpeculativeRequestsShown)??f.enableSpeculativeRequestsShown(o.telemetryBlob);if(g&&c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let x={isSpeculative:!0,opportunityId:n.opportunityId},b=s(()=>nye(t,e,void 0,x),"fn");y?t.get(km).set(u[0].clientCompletionId,b):Promise.resolve().then(b)}let E=u.map(x=>{let{start:b,end:_}=x.range,k=In.Range.create(b,In.Position.create(_.line,_.character-i));return{...x,range:k}});return{...o,value:E}}s(mwe,"getInlineCompletionsResult");async function nie(t,e,r,n,i={}){Tfr(t,e,r);let o=await mwe(t,Wy(e,r),n,i);return BGe(t,o)}s(nie,"getInlineCompletions");function Tfr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});qY.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(Tfr,"logCompletionLocation");var Zut=Ne(Lc());d();var zut=require("crypto");var fN=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new gwe(e,this.id)}},gwe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(xr),o=(0,zut.randomUUID)(),a=i.connection.onProgress($W.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest($W.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function pN(t,e,r){try{let n=t.get(uc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof fN&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof fN&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){fn.error(t,"Failed to set context items on context providers",n)}}s(pN,"setContextItems");var hwe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function Yut(t,e,r){return e.map(i=>{try{if(typeof i=="string")return cc(r.uri,i,hwe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=cc(r.uri,i.scheme||"",hwe)),"pattern"in i&&(o&&=cc(r.uri,i.pattern||"",hwe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Yut,"match");d();var wfr=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),rw=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function _fr(t,e,r){return t.forceSet(rw,new rw(r.documents,r.basename||"")),["OK",null]}s(_fr,"handleTestingSetCompletionDocumentsChecked");var Kut=new vt("setCompletionDocuments"),Xut=at(wfr,_fr);function iie(t,e,r,n){let i=t.get(rw);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Kut.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=Sfr(i,r);return a&&a.length>0?Jut(a,o,e):void 0}else return Kut.debug(t,"Returning completions for all pre-set documents"),Jut(i.documents,o,e)}}s(iie,"getTestCompletions");function Jut(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=tie(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(Jut,"sliceAndMapCompletions");function Sfr(t,e){return t.basename===Oi(e)?t.documents||[]:[]}s(Sfr,"getFilteredDocs");var edt=I.Object({doc:I.Object({position:bl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:X6,version:I.Number()}),contextItems:I.Optional(tAe)}),hQ;async function tdt(t,e,r,n){hQ&&(hQ.cancel(),hQ.dispose()),hQ=new In.CancellationTokenSource;let i=new o0([e,hQ.token]);r.contextItems&&pN(t,r.contextItems);let o=iie(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:cr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await iA(t,r.doc,i)}catch(p){if(!(p instanceof Zut.ResponseError))throw p;switch(p.code){case cn.CopilotNotAvailable:case cn.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await nie(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(Ss);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(tdt,"handleGetCompletionsHelper");var rdt=at(edt,(t,e,r)=>tdt(t,e,r,!1)),ndt=at(edt,(t,e,r)=>tdt(t,e,r,!0));d();var idt=Ne(nb()),mN=Ne(Lc());var Rfr=I.Object({doc:I.Object({position:bl,uri:X6,version:I.Number()}),panelId:I.String()});function kfr(t,e,r,n,i){let o=Zne(i.completionText),a=(0,idt.SHA256)(o).toString();return t.get(Ss).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(kfr,"makeSolution");var Awe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(xr)}onSolution(e){return this.service.connection.sendNotification(new mN.NotificationType("PanelSolution"),kfr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return odt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new mN.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function odt(t,e){return e.connection.sendNotification(new mN.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(odt,"reportDone");var gQ;async function Pfr(t,e,r){gQ&&(gQ.cancel(),gQ.dispose()),gQ=new In.CancellationTokenSource;let n=new o0([e,gQ.token]),i=r.doc.position,o=ns.range(i,i),a=new Awe(t,r,o),c=t.get(oA);if(c.documents){let l=c.documents;rie(i,l,a)}else{let l;try{l=await iA(t,r.doc,n)}catch(f){if(!(f instanceof mN.ResponseError))throw f;switch(f.code){case cn.CopilotNotAvailable:case cn.ContentModified:return Bfr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new uN(l,i,n,10);eie(t,u,a)}return[{solutionCountTarget:10},null]}s(Pfr,"handleGetPanelCompletionsChecked");async function Bfr(t,e){return await odt(e.panelId,t.get(xr)),[{solutionCountTarget:0},null]}s(Bfr,"produceEmptySolutions");var sdt=at(Rfr,Pfr);d();var Dfr=I.Object({});function Nfr(t,e,r){return[{version:t.get(lo).getDisplayVersion(),buildType:sy(t),runtimeVersion:`node/${process.versions.node}`},null]}s(Nfr,"handleGetVersionChecked");var adt=at(Dfr,Nfr);d();var Lfr=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function Mfr(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(Mfr,"buildSystemMessage");function Ffr(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(Ffr,"buildUserMessage");async function Ofr(t,e,r){if(r.changes.length===0)return[null,{code:cn.InvalidRequest,message:"No changes provided"}];let n=new ka(t),i=await Oo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:Kc(process.cwd())}],a=await vC.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),c=t.get(Wi),l=c.create({capabilities:{skills:[MC]}}),u=new VT({message:"",type:"user"});await c.addTurn(l.id,u);let f=sN({workDoneToken:cr()});await t.get(Js).begin(l,u,f);let h=(await new ZT(t,l,u,e).skillResolver.resolve(MC))?.head?.name,g=[{role:"system",content:await Mfr(r.userLanguage,h)},{role:"user",content:Ffr(r,a)}],y=await t.get(Bt).updateExPValuesAndAssignments(),E=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:i0.user("git-commit",cr())},e,y);if(E.type!=="success")return[null,{code:cn.InternalError,message:"Failed to generate commit message"}];let x=E.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:x?x[1].trim():E.value.trim()},null]}s(Ofr,"handleGitCommitGenerateChecked");var cdt=at(Lfr,Ofr);d();var udt=Lue.type,AQ;function ldt(t){return{title:"Completion Accepted",command:V7,arguments:[t]}}s(ldt,"makeCommand");async function Qfr(t,e,r){AQ&&(AQ.cancel(),AQ.dispose());let n=r.context.triggerKind===1;AQ=new In.CancellationTokenSource;let i=AQ.token,o=new o0([e,i]);r.contextItems&&pN(t,r.contextItems,r.data);let a=iie(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:ldt(cr()),...h}))},null];let c=await iA(t,r.textDocument,o),l=r.position,u=await nie(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:cn.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:cn.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get(Ss);for(let m of u)f.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:ldt(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(Qfr,"handleChecked");var ddt=at(WY,(t,e,r)=>Qfr(t,e,r));d();var fdt=Oue.type,yQ;async function qfr(t,e,r){yQ&&(yQ.cancel(),yQ.dispose());let n=r.context.triggerKind===1;yQ=new In.CancellationTokenSource;let i=yQ.token,o=new o0([e,i]);r.contextItems&&pN(t,r.contextItems);let a=await iA(t,r.textDocument,o),c=await mwe(t,Wy(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(qfr,"handleChecked");var pdt=at(WY,(t,e,r)=>qfr(t,e,r));d();d();function ywe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return hN(i)}s(ywe,"asReadableCert");function hN(t){return t.replace(/\s/g,"")}s(hN,"normalizeNewlines");var Wfr=I.Object({});async function Gfr(t){return[{certificates:(await t.get(Uc).getAllRootCAs()).map(hN)},null]}s(Gfr,"handleListCertificatesChecked");var mdt=at(Wfr,Gfr);d();async function jfr(t,e,r){let n=t.get(Jg);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Jc(r.textDocument.uri);t.get(Ig).onUserPositionChange(i,new rn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:V7,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(jfr,"handleChecked");var hdt=at(RDe,jfr);d();var Vfr=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function $fr(t,e,r){let n=t.get(Ss),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=zfr(r,i);M2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s($fr,"notifyAcceptedChecked");function zfr(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(zfr,"getSuggestionStatus");var gdt=at(Vfr,$fr);d();var Yfr=I.Object({uuids:I.Array(I.String())});function Kfr(t,e,r){let n=t.get(Ss),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));dJ(t,"ghostText",o.offset,o.uri,a),t.get(Hd).resetState()}return["OK",null]}s(Kfr,"notifyRejectedChecked");var Adt=at(Yfr,Kfr);d();var Jfr=I.Object({uuid:I.String({minLength:1})});function Xfr(t,e,r){let i=t.get(Ss).get(r.uuid);return i&&HY(t,i.triggerCategory,i),["OK",null]}s(Xfr,"notifyShownChecked");var ydt=at(Jfr,Xfr);d();var Zfr=FGe;function e0r(t,e,r){let n=t.get(uc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new fN(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(e0r,"registerContextProviders");var Cdt=at(Zfr,e0r);d();d();var t0r=I.Object({uri:I.Optional(I.String())}),r0r=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),vdt=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[V2e]:I.Optional(t0r),http:I.Optional(uQe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),Ewe=Object.keys(vdt.properties).filter(t=>t!=="github"),n0r=I.Intersect([vdt,r0r]),i0r=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),Edt=Fs.Compile(i0r),Cwe=Fs.Compile(n0r);async function xdt(t,e){if(!Edt.Check(e))throw new bu(Edt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&vwe(t,r),await CQ(t,r)}s(xdt,"notifyChangeConfiguration");function vwe(t,e){for(let i of Cwe.Errors(e)){let o=i.path.split("/")?.[1];wu.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Cwe.Check(e))throw new bu(Cwe.Errors(e));let r=t.get(Zg);r.setConfig(kt.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(kt.DelayCompletions,e.delayCompletions),r.setConfig(kt.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(kt.FilterCompletions,e.filterCompletions),e.http&&xwe(t,e.http);let n=e["github-enterprise"];n&&VDe(t,n.uri),e.github?.copilot&&o0r(t,e.github.copilot)}s(vwe,"applySettingsToConfiguration");function o0r(t,e){let r=t.get(Zg);for(let n of Object.values(kt)){let i=hQe(e,n);r.setConfig(n,i)}typeof e.mcp=="string"&&c0r(t,e.mcp),s0r(t,e.globalCopilotInstructions||""),a0r(t,e.globalGitCommitInstructions||"")}s(o0r,"applyCopilotConfiguration");function s0r(t,e){try{t.get(mC).setGlobalCopilotInstructions(e)}catch(r){wu.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(s0r,"applyGlobalCopilotInstructionsConfiguration");function a0r(t,e){try{t.get(mC).setGlobalGitCommitInstructions(e)}catch(r){wu.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(a0r,"applyGlobalGitCommitInstructionsConfiguration");function xwe(t,e){let r=t.get(Zg);e.proxy===void 0&&(e=dQe(r.env));try{r.setHttpSettings(yM(e))}catch(n){if(!(n instanceof TypeError))throw n;wu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(xwe,"applyHttpConfiguration");async function c0r(t,e){try{let r=JSON.parse(e||"{}");await t.get(th).updateMCPServers(r)}catch(r){wu.error(t,"Failed to apply MCP configuration",r)}}s(c0r,"applyMCPConfiguration");async function CQ(t,e){if(!t.get(ds).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Ef).initialize(r)}await t.get(Qr).primeToken()}s(CQ,"initializePostConfigurationDependencies");var bdt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),l0r=I.Object({editorInfo:bdt,editorPluginInfo:bdt,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function u0r(t,e,r){return t.get(nn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),yre(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&vwe(t,r.editorConfiguration),await CQ(t,r.editorConfiguration),["OK",null]}s(u0r,"handleSetEditorInfoChecked");var Idt=at(l0r,u0r);d();var d0r=I.Object({options:I.Optional(I.Object({}))});async function f0r(t,e,r){let n=t.get(Dn).pendingSignIn?.status;if(n===void 0)return[null,{code:cn.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:cn.DeviceFlowFailed,message:String(o)}]}finally{t.get(Dn).pendingSignIn=void 0}}s(f0r,"handleSignInConfirmChecked");var Tdt=at(d0r,f0r);d();var p0r=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function m0r(t,e,r){try{let n=t.get(Dn),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(Il).findAppIdToAuthenticate(),a=await t.get(A2).getToken(t,o,n.getConfiguredUrls()),c=a.waitForAuth.then(async l=>(t.get(Il).githubAppId=o,await t.get(Dn).setPersistedSession(l),await t.get(Dn).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Dn).pendingSignIn={verificationUri:a.verification_uri,status:c},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Cre,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof Bs))throw n;return[null,{code:cn.DeviceFlowFailed,message:n.message}]}}s(m0r,"handleSignInInitiateChecked");var bwe=at(p0r,m0r);d();var h0r=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function g0r(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(Dn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(Dn).checkAndUpdateStatus(),null]}s(g0r,"handleSignInWithGithubTokenChecked");var wdt=at(h0r,g0r);d();var A0r=I.Object({options:I.Optional(I.Object({}))});async function y0r(t,e,r){return await t.get(Dn).deletePersistedSession(),[await t.get(Dn).checkAndUpdateStatus(),null]}s(y0r,"handleSignOutChecked");var _dt=at(A0r,y0r);d();var C0r=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Iwe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function E0r(t,e,r){let n=t.get(lo),i=t.get(nn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&BC.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:tce(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},BC.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new Iwe(r.stacktrace??"N/A",i.name);return c.stack=void 0,Ia(t,c,void 0,o,a),["OK",null]}s(E0r,"handleTelemetryExceptionChecked");var Sdt=at(C0r,E0r);d();d();function Rdt(t={}){return{accessToken:cr(),login:"test login",...t,...Tb(t)}}s(Rdt,"testGitHubSession");var oie=class extends Dn{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},gN=class extends Dn{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};d();function v0r(t){return new U_({token:`test token ${cr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(v0r,"createTestCopilotToken");var EQ=class extends Qr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=Rdt()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>v0r(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},sie=class extends EQ{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},AN=class extends sie{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var x0r=I.Object({options:I.Optional(I.Object({}))});async function b0r(t,e,r){let n=new AN("tid=valid-copilot-token");return t.forceSet(Dn,new gN(t,"",n)),t.get(Qr).resetToken(),t.get(po).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(b0r,"handleTestingAlwaysAuthChecked");var kdt=at(x0r,b0r);d();var I0r=I.Object({messages:I.Array(I.Object({role:I.Enum(ol),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(pn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function T0r(t,e,r){let n=new ka(t),i=await t.get(Pa).getBestChatModelConfig([r.modelFamily??pn.CopilotBase]),o=await tF(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:i0.user("test",cr())},e,o),null]}s(T0r,"handleChatMLChecked");var Pdt=at(I0r,T0r);d();d();d();var xN=Ne(Lft(),1),EKi={ALPN_HTTP2:xN.default.ALPN_HTTP2,ALPN_HTTP2C:xN.default.ALPN_HTTP2C,ALPN_HTTP1_1:xN.default.ALPN_HTTP1_1,ALPN_HTTP1_0:xN.default.ALPN_HTTP1_0},{fetch:vKi,context:Mft,reset:xKi,noCache:bKi,h1:IKi,keepAlive:TKi,h1NoCache:wKi,keepAliveNoCache:_Ki,cacheStats:SKi,clearCache:RKi,offPush:kKi,onPush:PKi,createUrl:BKi,timeoutSignal:DKi,Body:NKi,Headers:Fft,Request:LKi,Response:MKi,AbortController:FKi,AbortError:bie,AbortSignal:OKi,FetchBaseError:QKi,FetchError:UKi,ALPN_HTTP2:qKi,ALPN_HTTP2C:HKi,ALPN_HTTP1_1:WKi,ALPN_HTTP1_0:GKi}=xN.default;var Qft=require("crypto"),Uft=require("http"),qft=require("stream"),Hft=require("util"),IN=Ne(hg());var $mr=9e4,zmr=new IN.ProtocolRequestType("copilot/fetch"),Ymr=new IN.ProtocolRequestType("copilot/fetchCancel"),Kmr=new IN.ProgressType,Jmr=new IN.ProtocolRequestType("copilot/fetchDisconnectAll"),jC=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},bN=class extends jn{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(lo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(xr).connection.sendRequest(Jmr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(xr).connection,a=(0,Qft.randomUUID)(),c=new In.CancellationTokenSource,l=new qft.PassThrough,u=s(()=>{o.sendRequest(Ymr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new bie("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new jC("EditorFetcher received unexpected abort signal");if(i.aborted)throw new bie("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(Kmr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),m.error&&l.emit("error",new jC(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new jC("Request timed out from lsp server"))},n.timeout??$mr),y=s(()=>{h(new bie("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(zmr,Zmr(r,a,n),c.token).then(m).catch(E=>{let x="EditorFetcher request failed";E&&typeof E=="object"&&"message"in E&&(x+=`: ${String(E.message)}`),E&&typeof E=="object"&&"data"in E&&(x+=`: ${(0,Hft.inspect)(E.data)}`),h(new jC(x))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new jC("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new eb(p.status,Uft.STATUS_CODES[p.status]??"",new Fft(p.headers),()=>Xmr(l),()=>l)}};function Xmr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(Xmr,"consumeStream");function Zmr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(Zmr,"convertOptionsToParams");var ehr=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function thr(t,e,r){let n=new bN(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof jC?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let E=m.body();for await(let x of E){let b=x.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof jC?y.message:String(y)}`},null]}}s(thr,"handleTestingFetchChecked");var Wft=at(ehr,thr);d();var rhr=I.Object({});async function nhr(t,e,r){return await t.get(Za).flush(),["OK",null]}s(nhr,"handleTestingFlushPromiseQueueChecked");var Gft=at(rhr,nhr);d();var ihr=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function ohr(t,e,r){try{await t.get(RC).start();let n=t.get(QR),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,BK,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(ohr,"handleTestingGetContextChecked");var jft=at(ihr,ohr);d();var shr=I.Object({uri:I.String()});async function ahr(t,e,r){let i=await t.get(pr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(ahr,"handleGetDocumentChecked");var Vft=at(shr,ahr);d();var chr=I.Object({options:I.Optional(I.Object({}))});async function lhr(t,e,r){t.forceSet(Dn,new oie(t)),t.get(Qr).resetToken();try{await t.get(Qr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(lhr,"handleTestingNeverAuthChecked");var $ft=at(chr,lhr);d();d();d();var Zwe=class extends Uc{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},zft=s(t=>new Zwe(t),"createTestCertificateReader");function t_e(t,e,r){let n=new e_e;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new eb(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(t_e,"createFakeResponse");function Yft(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),t_e(t,n,Object.assign({"content-type":"application/json"},r))}s(Yft,"createFakeJsonResponse");var SQ=class extends jn{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Iie=class extends SQ{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var e_e=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var r_e=class extends SQ{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Yft(200,this.fullConfig)):Promise.resolve(t_e(404,""))}},Tie=class extends r_e{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var uhr=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function dhr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(jn,new Tie(n,t.get(jn)))}return["OK",null]}s(dhr,"handleTestingOverrideExpFlagsChecked");var Kft=at(uhr,dhr);d();var fhr=I.Object({rules:qge});function phr(t,e,r){let n=t.get(Mc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:cn.InternalError,message:"Could not set content exclusion rules"}]}s(phr,"handleTestingSetContentExclusionRulesChecked");var Jft=at(fhr,phr);d();var mhr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(oN)),options:I.Optional(I.Object({}))});function hhr(t,e,r){return t.get(Iv).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(hhr,"handleTestingSetSyntheticTurnsChecked");var Xft=at(mhr,hhr);d();var ghr=I.Object({});async function Ahr(t,e,r){let n=t.get(wc),i=t.get(Tc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(Ahr,"handleTriggerShowMessageChecked");var Zft=at(ghr,Ahr);d();d();d();d();var e0t=Ne(require("tls"));var wie=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(Uc)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=e0t.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var TN=class extends jn{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new wie(r),this.proxySocketFactory=r.get(fC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(nu).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(nu).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(lo),o=this.proxySocketTimeoutForTesting;return Mft({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new C6(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new eb(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var RQ=require("fs"),t0t=require("path");var wN=class extends yo{static{s(this,"LocalFileSystem")}async readFileString(e){return(await RQ.promises.readFile(La(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(La(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=La(e),n=await RQ.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,t0t.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await RQ.promises.lstat(e);if(r.isSymbolicLink())try{let n=await RQ.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var _ie=class extends nA{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var Sie=class extends Wc{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();var Rie=class extends J0{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}setAllowedFiles(r){this.allowedFiles=r}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};d();function yhr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(yhr,"fakeChatModelConfiguration");function Chr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(Chr,"fakeEmbeddingModelConfiguration");var kie=class extends Pa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(yhr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(Chr(e))}};d();var Pie=class extends iu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Od}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Bie=class extends wc{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};d();function r0t(t,e,r,n){return yE.create(tG(t),e,r,n,e)}s(r0t,"createTextDocument");var n_e=class extends pr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Oi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=r0t(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=r0t(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},Die=class extends n_e{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var i_e=class extends Tc{static{s(this,"NullLog")}logIt(...e){}};function Ehr(t){let e=new v3;return e.set(nu,t),e.set(VS,t),e.set(lo,new lo),e.set(Hp,new Hp({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(Uc,zft([])),e.set(fC,YZ(e)),e.set(ly,new ly),e.set(eg,new cG),e.set(Xh,new Xh),e.set(YA,new YA),e.set(Jl,new Jl(e,"tid=test",!0)),e.set(xl,new xl),e.set(wc,new Bie),e.set(iu,new Pie),e.set(ay,new J3),e.set(Tc,new i_e),e.set(xd,new xd),e.set(As,new As("test-session","test-machine")),e.set(bd,new gD(e)),e.set(Ef,new Ef(e,"copilot-test")),e.set(Bt,new Bt(e)),e.set(Eg,new Eg),e.set(dg,new YP),e.set(Qr,new AN("tid=test")),e.set(po,new sG),e.set(Za,new Za),e.set(Dy,new Dy(e)),e.set(J0,new Rie),e.set(Fm,new Fm(e)),e.set(RE,JK(e)),e.set(Hd,new Hd),e.set(Of,new Of),e.set(kE,kE.default),e.set(cp,new cp),e.set(mm,new mm(e,!1)),e.set(Il,new Il),e.set(mn,new mn(e)),e.set(Fd,new oY),e.set(Rl,new Rl),e.set(uc,DK(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Lm,new Lm(e)),vhr(e),e.set(Lf,new Lf(e)),e.set(ds,new ds),e.set(Fy,new WD),e.set(km,new km),e.set(Jf,new Jf),e.set(EC,new EC(e)),e}s(Ehr,"_createBaselineContext");function vhr(t){t.set(Wi,new Wi(t)),t.set(Js,new Js(t)),t.set(Tu,new Tu(t)),t.set(cl,new cl),t.set(Gl,new Gl),t.set(Wc,new Sie),t.set(lh,new lh(t,[])),t.set(Pa,new kie),t.set(nA,new _ie),t.set(NC,new NC(t)),t.set($T,new $T),t.set($a,new $a(t)),t.set(Iu,new Iu),t.set(Cp,new Cp)}s(vhr,"registerConversation");function n0t(){let t=Ehr(new VS(new KP,new Map));return t.set(jn,new Iie),t.set(nn,new o_e),t.set(pr,new Die(t)),t.set(yo,new wN),t.set(Mc,new Mc(t)),t.set(qc,new qc(t)),t.set(xu,new eee(t)),t.set(_m,new _m(t)),t.set(Qy,new V3),t.set(Qg,new See),tre(t),t}s(n0t,"createLibTestingContext");var o_e=class extends nn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var o0t=Ne(require("fs"));var i0t=`${process.env.HOME}/.copilot-testing-gh-token`,Nie,Lie;function s0t(t){let e=new EQ(xhr);t.forceSet(Qr,e)}s(s0t,"setIntegrationTokenManager");var xhr=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Lie)return Lie;let e=t||process.env.GITHUB_COPILOT_TOKEN||await bhr(),r=n0t(),n=new TN(r);return r.forceSet(jn,n),Lie=nG(r,{...Tb({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new Bs('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Lie},"getEnvelope");async function bhr(){try{Nie??=(await o0t.promises.readFile(i0t)).toString().trim()}catch{Nie??=process.env.GITHUB_TOKEN??""}if(!Nie)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${i0t}. Run "npm run get_token" to get one.`);return Nie}s(bhr,"getTestingGitHubToken");var Ihr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function Thr(t,e,r){return s0t(t),t.forceSet(Dn,new gN(t,r.githubAppId)),["OK",null]}s(Thr,"handleTestingUseTestingTokenChecked");var a0t=at(Ihr,Thr);d();var whr=I.Object({});async function _hr(t,e,r){return await new $D().uninstall(t),["OK",null]}s(_hr,"handleUninstallChecked");var c0t=at(whr,_hr);d();var Shr=OGe;function Rhr(t,e,r){let n=t.get(uc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(Rhr,"unregisterContextProviders");var l0t=at(Shr,Rhr);d();var s_e=Ne(require("os"));var khr=I.Object({expectedCertificate:I.String()});async function Phr(t,e,r){let i=(await zZ(t).getAllRootCAs()).map(hN),o=hN(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${ywe(o)}. Only found those installed on the system:${s_e.EOL}${i.map(a=>"- "+ywe(a)).join(s_e.EOL)}`},null]}s(Phr,"handleVerifyCertificateChecked");var u0t=at(khr,Phr);d();var Bhr=I.Object({});async function Dhr(){return[{status:!!await new VO().load()},null]}s(Dhr,"handleVerifyKerberosChecked");var d0t=at(Bhr,Dhr);d();var Nhr=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function Lhr(t,e,r){let i=await t.get(pr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(Lhr,"handleVerifyStateChecked");var f0t=at(Nhr,Lhr);d();var Mhr=I.Object({});function Fhr(t,e,r){return[t.get(pr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(Fhr,"handleVerifyWorkspaceStateChecked");var p0t=at(Mhr,Fhr);var e5=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function m0t(){let t=new Map;return t.set(udt.method,ddt),t.set(fdt.method,pdt),t.set("getCompletions",rdt),t.set("getCompletionsCycling",ndt),t.set("getPanelCompletions",sdt),t.set(Qut.method,Uut),t.set("getVersion",adt),t.set("setEditorInfo",Idt),t.set("checkStatus",Hat),t.set("checkQuota",qat),t.set("checkFileStatus",Qat),t.set("signInInitiate",bwe),t.set("signIn",bwe),t.set("signInConfirm",Tdt),t.set("signInWithGithubToken",wdt),t.set("signOut",_dt),t.set("notifyShown",ydt),t.set("notifyAccepted",gdt),t.set("notifyRejected",Adt),t.set("telemetry/exception",Sdt),t.set("textDocument/copilotInlineEdit",hdt),t.set("testing/overrideExpFlags",Kft),t.set("testing/alwaysAuth",kdt),t.set("testing/neverAuth",$ft),t.set("testing/useTestingToken",a0t),t.set("testing/setCompletionDocuments",Xut),t.set("testing/setPanelCompletionDocuments",Fut),t.set("testing/triggerShowMessageRequest",Zft),t.set("testing/flushPromiseQueue",Gft),t.set("testing/getDocument",Vft),t.set("testing/chatml",Pdt),t.set("testing/setSyntheticTurns",Xft),t.set("testing/fetch",Wft),t.set("testing/setContentExclusionRules",Jft),t.set("testing/setCopilotEditsResponse",Tut),t.set("testing/getContext",jft),t.set("uninstall",c0t),t.set("debug/diagnostics",jut),t.set("debug/listCertificates",mdt),t.set("debug/verifyState",f0t),t.set("debug/verifyCertificate",u0t),t.set("debug/verifyKerberos",d0t),t.set("debug/verifyWorkspaceState",p0t),t.set("context/registerProviders",Cdt),t.set("context/unregisterProviders",l0t),t.set("conversation/preconditions",yut),t.set("conversation/persistence",hut),t.set("conversation/create",fut),t.set("conversation/turn",xut),t.set("conversation/turnDelete",but),t.set("conversation/destroy",put),t.set("conversation/rating",Cut),t.set("conversation/copyCode",$lt),t.set("conversation/insertCode",zlt),t.set("conversation/templates",vut),t.set("conversation/agents",Vlt),t.set("conversation/registerTools",Eut),t.set("conversation/notifyCodeAcceptance",mut),t.set("copilot/models",But),t.set("copilot/setModelPolicy",Dut),t.set("copilot/codeReview",Iut),t.set("git/commitGenerate",cdt),t.set("editConversation/create",wut),t.set("editConversation/turn",Sut),t.set("editConversation/turnDelete",Rut),t.set("editConversation/destroy",_ut),t.set("mcp/getTools",kut),t.set("mcp/updateToolsStatus",Put),new e5(t)}s(m0t,"getAllMethods");d();d();d();var h0t=Ne(hg());var VC=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new h0t.NotificationType(this.name)}};var a_e=class extends VC{constructor(){super(...arguments);this.name=Pue.method;this.params=ADe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Dn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},g0t=[a_e];d();var c_e=class extends VC{constructor(){super(...arguments);this.name=Mue.method;this.params=TDe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(Ss).get(n);o&&a$e(this.ctx,o)}},l_e=class extends VC{constructor(){super(...arguments);this.name=Que.method;this.params=kDe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(Jg).handleShown(n)}},u_e=class extends VC{constructor(){super(...arguments);this.name=Fue.method;this.params=wDe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(Ss),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?fJ(this.ctx,a):c$e(this.ctx,a,i))}},A0t=[c_e,l_e,u_e];d();var Mie=class extends VC{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Xd).cancel(r.token)}};var Ohr=[...g0t,...A0t,Mie];function y0t(t,e){for(let r of Ohr){let n=new r(t),i=Fs.Compile(n.params);e.onNotification(n.type,Wu(t,async o=>{gv(o),i.Check(o)?await n.handle(o):wu.error(t,`Notification ${n.name}:`,new bu(i.Errors(o)))},`Notification ${n.name}`))}}s(y0t,"registerNotifications");d();var E0t=Ne(require("events")),Fie=Ne(Lc());var C0t=new vt("AgentTextDocumentConfiguration"),d_e=class{constructor(e){this.ctx=e;this.emitter=new E0t.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return yE.create(e,r,n,i)}catch(o){throw C0t.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Fie.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),yE.withChanges(e,r,n)}catch(i){throw C0t.exception(this.ctx,i,".update"),i}}},ow=class extends pr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(Nue.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(c=>void c.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new d_e(r),this._notebookDocuments=new Fie.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(xr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Jc(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=Jc(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=Jc(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Jc(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var v0t=Fs.Compile(xDe);function gv(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=gv(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=gv(e[r])}return t}}s(gv,"purgeNulls");var xr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Tc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),y0t(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(lo).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async l=>{try{if(i&&l&&typeof l=="object"&&!("settings"in l)){let u=await r.workspace.getConfiguration(["github.copilot",...Ewe].map(p=>({section:p}))),f={github:{copilot:u.shift()}};for(let p of Ewe)f[p]=u.shift();l.settings=f}return xdt(e,gv(l))}catch(u){wu.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(l){try{e.get(ow).didChangeWorkspaceFolders(l),e.get(cp).emit(l)}catch(u){wu.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:l,uri:u})=>a({added:[{uri:u,name:l??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:l,uri:u})=>a({added:[],removed:[{uri:u,name:l??u}]})),r.onInitialize(async l=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=l.capabilities;let u=l.capabilities.copilot,f=gv(l.initializationOptions);if(f){if(!v0t.Check(f))throw new bu(v0t.Errors(f));let g=f,y=e.get(nn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):wu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Il).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await Iat(e)}let p=l.capabilities.workspace?.workspaceFolders??!1;e.get(ow).init(l.workspaceFolders??[]),kje(this.ctx),e.get(cp).emit({added:l.workspaceFolders??[],removed:[]}),i=l.capabilities.workspace?.configuration,u&&(e.get(ds).setCapabilities(u),"openURL"in u&&yre(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,wu.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await CQ(e),this.installationTelemetryTimer=setTimeout(()=>{new $D().startup(e).catch(()=>{})},1e3),e.get(Av).emit())},"onInitialized");return r.onInitialized(Wu(e,h,"onInitialized")),e.get(eA).init(),u?.token&&e.get(Dn).setTransientSession(null),u?.redirectedTelemetry&&await Fat(e),x0t.lt(process.versions.node,"20.8.0")&&wu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:cA.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:kat(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(Wu(e,o,"onDidChangeConfiguration")),r.listen();let c=new vre;this.ctx.forceSet(Tc,c)}async messageHandler(e,r,n){let i=this.ctx.get(e5).handlers.get(e);if(!i)return new cA.ResponseError(cn.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new cA.ResponseError(cn.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new cA.ResponseError(cn.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!Dat(this.ctx.get(nn)))throw new cA.ResponseError(cn.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),gv(r);try{let[o,a]=await i(this.ctx,n,r);return a?new cA.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new cA.ResponseError(cn.RequestCancelled,"Request was canceled");if(o instanceof Bs)return new cA.ResponseError(cn.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof cA.ResponseError||wu.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(Xg).dispose()}catch(e){wu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Tc,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),hye(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Za).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(xl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},wu=new vt("lsp");var Oie=class t extends B2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(xr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),nl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){nl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(ds).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return nl.debug(this.context,"`copilot/related` not supported"),Bje;try{let a=await this.service.connection.sendRequest(Uue.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){nl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Rt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){nl.exception(r,o,"copilotRelated")}}};d();var b0t=Ne(Lc());var Qie=new vt("copilotTokenManager"),f_e=class t extends W4{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new b0t.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(xr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw Qie.debug(this.ctx,"Envelope missing from copilot/token response"),new em({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:c}=r;if(Qie.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new Bs("Expired token in copilot/token response");if(i&&n){let u;if(c!==void 0){try{let f=new URL(c);f.protocol==="https:"&&f.hostname.startsWith("api.")?u=f.origin:Qie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}catch{Qie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}this.ctx.get(bd).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Dn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new em({reason:"NotSignedIn"});let l=new U_(a,void 0);return e9(this.ctx,l),l}catch(r){throw r instanceof Error?new Bs(r.message,r):r}}},kQ=class extends Qr{constructor(r,n=new W4(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new f_e(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(ds).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};d();var Qhr=new vt("Public Code References"),Uie=class extends Fd{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");Qhr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(ds).getCapabilities().ipCodeCitation===!0&&await e.get(xr).connection.sendNotification(Bue.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function I0t(t){Uhr(t)}s(I0t,"activateExtensibilityPlatformFeature");function Uhr(t){t.set(nA,new Fne(t)),t.set(NC,new NC(t))}s(Uhr,"registerContextDependencies");d();var T0t=I.String(),p_e=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Hie,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Hie="build-logs",qie=class extends Hl{static{s(this,"BuildLogsSkill")}constructor(e){super(Hie,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new p_e(r))}};d();var m_e=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await qne(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Nt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Nt([o]),1]);return new Nt(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},h_e=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},qhr="directory-references",Wie=class{constructor(){this.id=qhr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new h_e}processor(e){return new m_e(e)}};d();var Hhr=I.Object({uri:I.String(),visibleRange:I.Optional(nc),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),w0t=I.Object({files:I.Array(Hhr)}),Whr=3,g_e=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=YT(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(mn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=Gs(a);if(await this.turnContext.collectFile(jie,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===Whr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(mn).getRelativePath(n),a=new LC(n,void 0,i.visibleRange);return new Nt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Oo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},jie="recent-files",Gie=class extends Hl{static{s(this,"RecentFilesSkill")}constructor(e){super(jie,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new g_e(r))}};d();var _0t=I.String(),A_e=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel($ie,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},$ie="runtime-logs",Vie=class extends Hl{static{s(this,"RuntimeLogsSkill")}constructor(e){super($ie,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new A_e(r))}};d();var zie=Ne(hg());var Yie=class extends Wc{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return wH(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(xr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new zie.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new zie.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new zie.NotificationType("conversation/documentDiff"),r)}};d();var S0t=Ne(Lc());var PQ=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(lh).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(xr).connection.sendNotification(new S0t.NotificationType(this.notificationEndpoint),e)}};function R0t(t){Ghr(t),jhr(t),I0t(t)}s(R0t,"activateConversationFeature");function Ghr(t){t.set(Wi,new Wi(t)),t.set(Gl,new Gl),t.set(Tu,new Tu(t)),t.set(Pa,new _ee(t)),t.set(Iv,new Iv),t.set(Js,new Js(t)),t.set(lh,new lh(t)),t.set(PQ,new PQ(t)),t.set(Bd,new jV(t,new GV(t))),t.set(Tv,new Tv),t.set($T,new $T),t.set(Wc,new Yie(t)),t.set($a,new $a(t)),t.set(Iu,new Iu),t.set(Cp,new Cp)}s(Ghr,"registerContextDependencies");function jhr(t){let e=new cl;e.registerSkill(new qre(new Ure(t))),e.registerSkill(new pne(new Jd(t,qC,Llt))),e.registerSkill(new Wre(new Jd(t,tA,_ct))),e.registerSkill(new Tre(new Jd(t,ad,Yat))),e.registerSkill(new mne),e.registerSkill(new Wie),e.registerSkill(new Gie(new Jd(t,jie,w0t))),e.registerSkill(new wre(new Jd(t,MC,Jat))),e.registerSkill(new jre(new Jd(t,KT,Fct))),e.registerSkill(new Vie(new Jd(t,$ie,_0t))),e.registerSkill(new qie(new Jd(t,Hie,T0t))),e.registerSkill(new $re(new Jd(t,rA,Oct))),e.registerSkill(new zre(new Jd(t,HR,Uct))),t.set(cl,e)}s(jhr,"registerSkills");d();var k0t=Ne(di());var Kie=class extends xu{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(xr).connection.sendProgress(new k0t.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var P0t=Ne(Lc()),B0t=Ne(hg());var Jie=class extends pC{constructor(){super(...arguments);this.requestType=new P0t.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Fs.Compile(lat)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(xr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new B0t.ResponseError(l.code,l.message,l.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new bu(this.typeCheck.Errors(o));return o}};d();var D0t=Ne(Lc()),N0t=Ne(hg());var Xie=class extends yT{constructor(){super(...arguments);this.requestType=new D0t.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Fs.Compile(cat)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(xr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new N0t.ResponseError(l.code,l.message,l.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new bu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Bi(i.value):new MR(i.value));return new oo(n,r.status??"success")}};d();d();function L0t(t,e,r){try{let n=t.get(Bt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return fn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(L0t,"fillInJavaActiveExperiments");var y_e=Ne(hg());var Vhr={type:new y_e.NotificationType("featureFlagsNotification")},$hr={type:new y_e.NotificationType("copilot/didChangeFeatureFlags")},BQ=class{constructor(e){this.ctx=e;ia(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Bt).updateExPValuesAndAssignments(),o={};r.get(Bt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=OAe(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;Uje(r,a,c,i),PK(r,c,i),L0t(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(ds),u=r.get(xr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification($hr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(f.agent_mode=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(Vhr.type,f)}}};d();var Zie=class extends po{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(xr).connection.sendNotification(que.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(xr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var M0t=new wN;d();d();d();d();var os=new vt("CopilotMCP");async function C_e(t,e){await t.get(Qg).notifyLog(e)}s(C_e,"notifyMCPRuntimeLog");async function $C(t,e){await C_e(t,{...e,level:"error"})}s($C,"notifyMCPRuntimeError");async function t5(t,e){await C_e(t,{...e,level:"warning"})}s(t5,"notifyMCPRuntimeWarning");async function ud(t,e){await C_e(t,{...e,level:"info"})}s(ud,"notifyMCPRuntimeInfo");d();var E_e=/[^a-z0-9_-]/gi;var zhr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function F0t(){let t={};for(let e of zhr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(F0t,"getDefaultEnvironment");async function O0t(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;os.warn(t,n),await t5(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(E_e.lastIndex=0,E_e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;os.warn(t,n),await t5(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(E_e,"_")}else e._nameForModel=e.name;return e}s(O0t,"normalizeTool");var eoe=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();d();d();var xo;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(xo||(xo={}));var x_e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(x_e||(x_e={}));var gr=xo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pv=s(t=>{switch(typeof t){case"undefined":return gr.undefined;case"string":return gr.string;case"number":return isNaN(t)?gr.nan:gr.number;case"boolean":return gr.boolean;case"function":return gr.function;case"bigint":return gr.bigint;case"symbol":return gr.symbol;case"object":return Array.isArray(t)?gr.array:t===null?gr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?gr.promise:typeof Map<"u"&&t instanceof Map?gr.map:typeof Set<"u"&&t instanceof Set?gr.set:typeof Date<"u"&&t instanceof Date?gr.date:gr.object;default:return gr.unknown}},"getParsedType"),Dt=xo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Yhr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),vp=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};vp.create=t=>new vp(t);var RN=s((t,e)=>{let r;switch(t.code){case Dt.invalid_type:t.received===gr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Dt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,xo.jsonStringifyReplacer)}`;break;case Dt.unrecognized_keys:r=`Unrecognized key(s) in object: ${xo.joinValues(t.keys,", ")}`;break;case Dt.invalid_union:r="Invalid input";break;case Dt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${xo.joinValues(t.options)}`;break;case Dt.invalid_enum_value:r=`Invalid enum value. Expected ${xo.joinValues(t.options)}, received '${t.received}'`;break;case Dt.invalid_arguments:r="Invalid function arguments";break;case Dt.invalid_return_type:r="Invalid function return type";break;case Dt.invalid_date:r="Invalid date";break;case Dt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:xo.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Dt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Dt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Dt.custom:r="Invalid input";break;case Dt.invalid_intersection_types:r="Intersection results could not be merged";break;case Dt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Dt.not_finite:r="Number must be finite";break;default:r=e.defaultError,xo.assertNever(t)}return{message:r}},"errorMap"),H0t=RN;function Khr(t){H0t=t}s(Khr,"setErrorMap");function toe(){return H0t}s(toe,"getErrorMap");var roe=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),Jhr=[];function nr(t,e){let r=toe(),n=roe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===RN?void 0:RN].filter(i=>!!i)});t.common.issues.push(n)}s(nr,"addIssueToContext");var dd=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return qn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return qn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},qn=Object.freeze({status:"aborted"}),SN=s(t=>({status:"dirty",value:t}),"DIRTY"),Zd=s(t=>({status:"valid",value:t}),"OK"),b_e=s(t=>t.status==="aborted","isAborted"),I_e=s(t=>t.status==="dirty","isDirty"),r5=s(t=>t.status==="valid","isValid"),LQ=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function noe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(noe,"__classPrivateFieldGet");function W0t(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(W0t,"__classPrivateFieldSet");var Fr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Fr||(Fr={}));var DQ,NQ,fh=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Q0t=s((t,e)=>{if(r5(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new vp(t.common.issues);return this._error=r,this._error}}},"handleResult");function fi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(fi,"processCreateParams");var pi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Pv(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Pv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dd,ctx:{common:e.parent.common,data:e.data,parsedType:Pv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(LQ(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pv(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Q0t(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pv(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return r5(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>r5(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pv(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(LQ(i)?i:Promise.resolve(i));return Q0t(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Dt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new xp({schema:this,typeName:Mn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return dh.create(this,this._def)}nullable(){return YC.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Dv.create(this)}promise(){return cw.create(this,this._def)}or(e){return l5.create([this,e],this._def)}and(e){return u5.create(this,e,this._def)}transform(e){return new xp({...fi(this._def),schema:this,typeName:Mn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new h5({...fi(this._def),innerType:this,defaultValue:r,typeName:Mn.ZodDefault})}brand(){return new MQ({typeName:Mn.ZodBranded,type:this,...fi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new g5({...fi(this._def),innerType:this,catchValue:r,typeName:Mn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return FQ.create(this,e)}readonly(){return A5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Xhr=/^c[^\s-]{8,}$/i,Zhr=/^[0-9a-z]+$/,egr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tgr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rgr=/^[a-z0-9_-]{21}$/i,ngr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,igr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ogr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sgr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",v_e,agr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cgr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,lgr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ugr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dgr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fgr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,G0t="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pgr=new RegExp(`^${G0t}$`);function j0t(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(j0t,"timeRegexSource");function mgr(t){return new RegExp(`^${j0t(t)}$`)}s(mgr,"timeRegex");function V0t(t){let e=`${G0t}T${j0t(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(V0t,"datetimeRegex");function hgr(t,e){return!!((e==="v4"||!e)&&agr.test(t)||(e==="v6"||!e)&&lgr.test(t))}s(hgr,"isValidIP");function ggr(t,e){if(!ngr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(ggr,"isValidJWT");function Agr(t,e){return!!((e==="v4"||!e)&&cgr.test(t)||(e==="v6"||!e)&&ugr.test(t))}s(Agr,"isValidCidr");var sw=class t extends pi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==gr.string){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.string,received:o.parsedType}),qn}let n=new dd,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?nr(i,{code:Dt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&nr(i,{code:Dt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")ogr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"email",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")v_e||(v_e=new RegExp(sgr,"u")),v_e.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"emoji",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")tgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"uuid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")rgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"nanoid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Xhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")Zhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid2",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")egr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ulid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),nr(i,{validation:"url",code:Dt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"regex",code:Dt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?V0t(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?pgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?mgr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?igr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"duration",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?hgr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ip",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?ggr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"jwt",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Agr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cidr",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?dgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?fgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64url",code:Dt.invalid_string,message:o.message}),n.dirty()):xo.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Dt.invalid_string,...Fr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Fr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Fr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Fr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Fr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Fr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Fr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Fr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Fr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Fr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Fr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Fr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Fr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Fr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Fr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Fr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Fr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Fr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Fr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Fr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Fr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Fr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Fr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Fr.errToObj(r)})}nonempty(e){return this.min(1,Fr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};sw.create=t=>{var e;return new sw({checks:[],typeName:Mn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};function ygr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(ygr,"floatSafeRemainder");var n5=class t extends pi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==gr.number){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.number,received:o.parsedType}),qn}let n,i=new dd;for(let o of this._def.checks)o.kind==="int"?xo.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?ygr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_finite,message:o.message}),i.dirty()):xo.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Fr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Fr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Fr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Fr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Fr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&xo.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};n5.create=t=>new n5({checks:[],typeName:Mn.ZodNumber,coerce:t?.coerce||!1,...fi(t)});var i5=class t extends pi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==gr.bigint)return this._getInvalidInput(e);let n,i=new dd;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):xo.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Dt.invalid_type,expected:gr.bigint,received:r.parsedType}),qn}gte(e,r){return this.setLimit("min",e,!0,Fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Fr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Fr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Fr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};i5.create=t=>{var e;return new i5({checks:[],typeName:Mn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};var o5=class extends pi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==gr.boolean){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.boolean,received:n.parsedType}),qn}return Zd(e.data)}};o5.create=t=>new o5({typeName:Mn.ZodBoolean,coerce:t?.coerce||!1,...fi(t)});var s5=class t extends pi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==gr.date){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.date,received:o.parsedType}),qn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_date}),qn}let n=new dd,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):xo.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Fr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Fr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};s5.create=t=>new s5({checks:[],coerce:t?.coerce||!1,typeName:Mn.ZodDate,...fi(t)});var kN=class extends pi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==gr.symbol){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.symbol,received:n.parsedType}),qn}return Zd(e.data)}};kN.create=t=>new kN({typeName:Mn.ZodSymbol,...fi(t)});var a5=class extends pi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==gr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.undefined,received:n.parsedType}),qn}return Zd(e.data)}};a5.create=t=>new a5({typeName:Mn.ZodUndefined,...fi(t)});var c5=class extends pi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==gr.null){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.null,received:n.parsedType}),qn}return Zd(e.data)}};c5.create=t=>new c5({typeName:Mn.ZodNull,...fi(t)});var aw=class extends pi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Zd(e.data)}};aw.create=t=>new aw({typeName:Mn.ZodAny,...fi(t)});var Bv=class extends pi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Zd(e.data)}};Bv.create=t=>new Bv({typeName:Mn.ZodUnknown,...fi(t)});var lA=class extends pi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Dt.invalid_type,expected:gr.never,received:r.parsedType}),qn}};lA.create=t=>new lA({typeName:Mn.ZodNever,...fi(t)});var PN=class extends pi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==gr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.void,received:n.parsedType}),qn}return Zd(e.data)}};PN.create=t=>new PN({typeName:Mn.ZodVoid,...fi(t)});var Dv=class t extends pi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==gr.array)return nr(r,{code:Dt.invalid_type,expected:gr.array,received:r.parsedType}),qn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(nr(r,{code:a?Dt.too_big:Dt.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(nr(r,{code:Dt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(nr(r,{code:Dt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new fh(r,a,r.path,c)))).then(a=>dd.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new fh(r,a,r.path,c)));return dd.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Fr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Fr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Fr.toString(r)}})}nonempty(e){return this.min(1,e)}};Dv.create=(t,e)=>new Dv({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mn.ZodArray,...fi(e)});function _N(t){if(t instanceof s0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dh.create(_N(n))}return new s0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Dv?new Dv({...t._def,type:_N(t.element)}):t instanceof dh?dh.create(_N(t.unwrap())):t instanceof YC?YC.create(_N(t.unwrap())):t instanceof zC?zC.create(t.items.map(e=>_N(e))):t}s(_N,"deepPartialify");var s0=class t extends pi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=xo.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==gr.object){let u=this._getOrReturnCtx(e);return nr(u,{code:Dt.invalid_type,expected:gr.object,received:u.parsedType}),qn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof lA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new fh(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof lA){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(nr(i,{code:Dt.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new fh(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>dd.mergeObjectSync(n,u)):dd.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Fr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Fr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Mn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return xo.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return _N(this)}partial(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dh;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return $0t(xo.objectKeys(this.shape))}};s0.create=(t,e)=>new s0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});s0.strictCreate=(t,e)=>new s0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});s0.lazycreate=(t,e)=>new s0({shape:t,unknownKeys:"strip",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});var l5=class extends pi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new vp(c.ctx.common.issues));return nr(r,{code:Dt.invalid_union,unionErrors:a}),qn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new vp(l));return nr(r,{code:Dt.invalid_union,unionErrors:c}),qn}}get options(){return this._def.options}};l5.create=(t,e)=>new l5({options:t,typeName:Mn.ZodUnion,...fi(e)});var kv=s(t=>t instanceof d5?kv(t.schema):t instanceof xp?kv(t.innerType()):t instanceof f5?[t.value]:t instanceof p5?t.options:t instanceof m5?xo.objectValues(t.enum):t instanceof h5?kv(t._def.innerType):t instanceof a5?[void 0]:t instanceof c5?[null]:t instanceof dh?[void 0,...kv(t.unwrap())]:t instanceof YC?[null,...kv(t.unwrap())]:t instanceof MQ||t instanceof A5?kv(t.unwrap()):t instanceof g5?kv(t._def.innerType):[],"getDiscriminator"),ioe=class t extends pi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.object)return nr(r,{code:Dt.invalid_type,expected:gr.object,received:r.parsedType}),qn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(nr(r,{code:Dt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),qn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=kv(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:Mn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...fi(n)})}};function T_e(t,e){let r=Pv(t),n=Pv(e);if(t===e)return{valid:!0,data:t};if(r===gr.object&&n===gr.object){let i=xo.objectKeys(e),o=xo.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=T_e(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===gr.array&&n===gr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=T_e(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===gr.date&&n===gr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(T_e,"mergeValues");var u5=class extends pi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(b_e(o)||b_e(a))return qn;let c=T_e(o.value,a.value);return c.valid?((I_e(o)||I_e(a))&&r.dirty(),{status:r.value,value:c.data}):(nr(n,{code:Dt.invalid_intersection_types}),qn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};u5.create=(t,e,r)=>new u5({left:t,right:e,typeName:Mn.ZodIntersection,...fi(r)});var zC=class t extends pi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.array)return nr(n,{code:Dt.invalid_type,expected:gr.array,received:n.parsedType}),qn;if(n.data.length<this._def.items.length)return nr(n,{code:Dt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qn;!this._def.rest&&n.data.length>this._def.items.length&&(nr(n,{code:Dt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new fh(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>dd.mergeArray(r,a)):dd.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};zC.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zC({items:t,typeName:Mn.ZodTuple,rest:null,...fi(e)})};var ooe=class t extends pi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.object)return nr(n,{code:Dt.invalid_type,expected:gr.object,received:n.parsedType}),qn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new fh(n,c,n.path,c)),value:a._parse(new fh(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?dd.mergeObjectAsync(r,i):dd.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof pi?new t({keyType:e,valueType:r,typeName:Mn.ZodRecord,...fi(n)}):new t({keyType:sw.create(),valueType:e,typeName:Mn.ZodRecord,...fi(r)})}},BN=class extends pi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.map)return nr(n,{code:Dt.invalid_type,expected:gr.map,received:n.parsedType}),qn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new fh(n,c,n.path,[u,"key"])),value:o._parse(new fh(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};BN.create=(t,e,r)=>new BN({valueType:e,keyType:t,typeName:Mn.ZodMap,...fi(r)});var DN=class t extends pi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.set)return nr(n,{code:Dt.invalid_type,expected:gr.set,received:n.parsedType}),qn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(nr(n,{code:Dt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(nr(n,{code:Dt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return qn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new fh(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Fr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Fr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};DN.create=(t,e)=>new DN({valueType:t,minSize:null,maxSize:null,typeName:Mn.ZodSet,...fi(e)});var soe=class t extends pi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.function)return nr(r,{code:Dt.invalid_type,expected:gr.function,received:r.parsedType}),qn;function n(c,l){return roe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,toe(),RN].filter(u=>!!u),issueData:{code:Dt.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return roe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,toe(),RN].filter(u=>!!u),issueData:{code:Dt.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof cw){let c=this;return Zd(async function(...l){let u=new vp([]),f=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return Zd(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new vp([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new vp([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:zC.create(e).rest(Bv.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||zC.create([]).rest(Bv.create()),returns:r||Bv.create(),typeName:Mn.ZodFunction,...fi(n)})}},d5=class extends pi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};d5.create=(t,e)=>new d5({getter:t,typeName:Mn.ZodLazy,...fi(e)});var f5=class extends pi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return nr(r,{received:r.data,code:Dt.invalid_literal,expected:this._def.value}),qn}return{status:"valid",value:e.data}}get value(){return this._def.value}};f5.create=(t,e)=>new f5({value:t,typeName:Mn.ZodLiteral,...fi(e)});function $0t(t,e){return new p5({values:t,typeName:Mn.ZodEnum,...fi(e)})}s($0t,"createZodEnum");var p5=class t extends pi{static{s(this,"ZodEnum")}constructor(){super(...arguments),DQ.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{expected:xo.joinValues(n),received:r.parsedType,code:Dt.invalid_type}),qn}if(noe(this,DQ,"f")||W0t(this,DQ,new Set(this._def.values),"f"),!noe(this,DQ,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{received:r.data,code:Dt.invalid_enum_value,options:n}),qn}return Zd(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};DQ=new WeakMap;p5.create=$0t;var m5=class extends pi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),NQ.set(this,void 0)}_parse(e){let r=xo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==gr.string&&n.parsedType!==gr.number){let i=xo.objectValues(r);return nr(n,{expected:xo.joinValues(i),received:n.parsedType,code:Dt.invalid_type}),qn}if(noe(this,NQ,"f")||W0t(this,NQ,new Set(xo.getValidEnumValues(this._def.values)),"f"),!noe(this,NQ,"f").has(e.data)){let i=xo.objectValues(r);return nr(n,{received:n.data,code:Dt.invalid_enum_value,options:i}),qn}return Zd(e.data)}get enum(){return this._def.values}};NQ=new WeakMap;m5.create=(t,e)=>new m5({values:t,typeName:Mn.ZodNativeEnum,...fi(e)});var cw=class extends pi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.promise&&r.common.async===!1)return nr(r,{code:Dt.invalid_type,expected:gr.promise,received:r.parsedType}),qn;let n=r.parsedType===gr.promise?r.data:Promise.resolve(r.data);return Zd(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};cw.create=(t,e)=>new cw({type:t,typeName:Mn.ZodPromise,...fi(e)});var xp=class extends pi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{nr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return qn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?qn:l.status==="dirty"||r.value==="dirty"?SN(l.value):l});{if(r.value==="aborted")return qn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?qn:c.status==="dirty"||r.value==="dirty"?SN(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!r5(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>r5(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);xo.assertNever(i)}};xp.create=(t,e,r)=>new xp({schema:t,typeName:Mn.ZodEffects,effect:e,...fi(r)});xp.createWithPreprocess=(t,e,r)=>new xp({schema:e,effect:{type:"preprocess",transform:t},typeName:Mn.ZodEffects,...fi(r)});var dh=class extends pi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===gr.undefined?Zd(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dh.create=(t,e)=>new dh({innerType:t,typeName:Mn.ZodOptional,...fi(e)});var YC=class extends pi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===gr.null?Zd(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};YC.create=(t,e)=>new YC({innerType:t,typeName:Mn.ZodNullable,...fi(e)});var h5=class extends pi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===gr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};h5.create=(t,e)=>new h5({innerType:t,typeName:Mn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fi(e)});var g5=class extends pi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return LQ(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new vp(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new vp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};g5.create=(t,e)=>new g5({innerType:t,typeName:Mn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fi(e)});var NN=class extends pi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==gr.nan){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.nan,received:n.parsedType}),qn}return{status:"valid",value:e.data}}};NN.create=t=>new NN({typeName:Mn.ZodNaN,...fi(t)});var Cgr=Symbol("zod_brand"),MQ=class extends pi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},FQ=class t extends pi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?qn:o.status==="dirty"?(r.dirty(),SN(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?qn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Mn.ZodPipeline})}},A5=class extends pi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(r5(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return LQ(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};A5.create=(t,e)=>new A5({innerType:t,typeName:Mn.ZodReadonly,...fi(e)});function U0t(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(U0t,"cleanParams");function z0t(t,e={},r){return t?aw.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=U0t(e,n),m=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=U0t(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):aw.create()}s(z0t,"custom");var Egr={object:s0.lazycreate},Mn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mn||(Mn={}));var vgr=s((t,e={message:`Input not instance of ${t.name}`})=>z0t(r=>r instanceof t,e),"instanceOfType"),Y0t=sw.create,K0t=n5.create,xgr=NN.create,bgr=i5.create,J0t=o5.create,Igr=s5.create,Tgr=kN.create,wgr=a5.create,_gr=c5.create,Sgr=aw.create,Rgr=Bv.create,kgr=lA.create,Pgr=PN.create,Bgr=Dv.create,Dgr=s0.create,Ngr=s0.strictCreate,Lgr=l5.create,Mgr=ioe.create,Fgr=u5.create,Ogr=zC.create,Qgr=ooe.create,Ugr=BN.create,qgr=DN.create,Hgr=soe.create,Wgr=d5.create,Ggr=f5.create,jgr=p5.create,Vgr=m5.create,$gr=cw.create,q0t=xp.create,zgr=dh.create,Ygr=YC.create,Kgr=xp.createWithPreprocess,Jgr=FQ.create,Xgr=s(()=>Y0t().optional(),"ostring"),Zgr=s(()=>K0t().optional(),"onumber"),eAr=s(()=>J0t().optional(),"oboolean"),tAr={string:s(t=>sw.create({...t,coerce:!0}),"string"),number:s(t=>n5.create({...t,coerce:!0}),"number"),boolean:s(t=>o5.create({...t,coerce:!0}),"boolean"),bigint:s(t=>i5.create({...t,coerce:!0}),"bigint"),date:s(t=>s5.create({...t,coerce:!0}),"date")},rAr=qn,X=Object.freeze({__proto__:null,defaultErrorMap:RN,setErrorMap:Khr,getErrorMap:toe,makeIssue:roe,EMPTY_PATH:Jhr,addIssueToContext:nr,ParseStatus:dd,INVALID:qn,DIRTY:SN,OK:Zd,isAborted:b_e,isDirty:I_e,isValid:r5,isAsync:LQ,get util(){return xo},get objectUtil(){return x_e},ZodParsedType:gr,getParsedType:Pv,ZodType:pi,datetimeRegex:V0t,ZodString:sw,ZodNumber:n5,ZodBigInt:i5,ZodBoolean:o5,ZodDate:s5,ZodSymbol:kN,ZodUndefined:a5,ZodNull:c5,ZodAny:aw,ZodUnknown:Bv,ZodNever:lA,ZodVoid:PN,ZodArray:Dv,ZodObject:s0,ZodUnion:l5,ZodDiscriminatedUnion:ioe,ZodIntersection:u5,ZodTuple:zC,ZodRecord:ooe,ZodMap:BN,ZodSet:DN,ZodFunction:soe,ZodLazy:d5,ZodLiteral:f5,ZodEnum:p5,ZodNativeEnum:m5,ZodPromise:cw,ZodEffects:xp,ZodTransformer:xp,ZodOptional:dh,ZodNullable:YC,ZodDefault:h5,ZodCatch:g5,ZodNaN:NN,BRAND:Cgr,ZodBranded:MQ,ZodPipeline:FQ,ZodReadonly:A5,custom:z0t,Schema:pi,ZodSchema:pi,late:Egr,get ZodFirstPartyTypeKind(){return Mn},coerce:tAr,any:Sgr,array:Bgr,bigint:bgr,boolean:J0t,date:Igr,discriminatedUnion:Mgr,effect:q0t,enum:jgr,function:Hgr,instanceof:vgr,intersection:Fgr,lazy:Wgr,literal:Ggr,map:Ugr,nan:xgr,nativeEnum:Vgr,never:kgr,null:_gr,nullable:Ygr,number:K0t,object:Dgr,oboolean:eAr,onumber:Zgr,optional:zgr,ostring:Xgr,pipeline:Jgr,preprocess:Kgr,promise:$gr,record:Qgr,set:qgr,strictObject:Ngr,string:Y0t,symbol:Tgr,transformer:q0t,tuple:Ogr,undefined:wgr,union:Lgr,unknown:Rgr,void:Pgr,NEVER:rAr,ZodIssueCode:Dt,quotelessJson:Yhr,ZodError:vp});var OQ="2025-03-26",X0t=[OQ,"2024-11-05","2024-10-07"],aoe="2.0",Z0t=X.union([X.string(),X.number().int()]),ept=X.string(),nAr=X.object({progressToken:X.optional(Z0t)}).passthrough(),uA=X.object({_meta:X.optional(nAr)}).passthrough(),bp=X.object({method:X.string(),params:X.optional(uA)}),QQ=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),KC=X.object({method:X.string(),params:X.optional(QQ)}),dA=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),coe=X.union([X.string(),X.number().int()]),tpt=X.object({jsonrpc:X.literal(aoe),id:coe}).merge(bp).strict(),loe=s(t=>tpt.safeParse(t).success,"isJSONRPCRequest"),rpt=X.object({jsonrpc:X.literal(aoe)}).merge(KC).strict(),npt=s(t=>rpt.safeParse(t).success,"isJSONRPCNotification"),ipt=X.object({jsonrpc:X.literal(aoe),id:coe,result:dA}).strict(),UQ=s(t=>ipt.safeParse(t).success,"isJSONRPCResponse"),lw;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(lw||(lw={}));var opt=X.object({jsonrpc:X.literal(aoe),id:coe,error:X.object({code:X.number().int(),message:X.string(),data:X.optional(X.unknown())})}).strict(),spt=s(t=>opt.safeParse(t).success,"isJSONRPCError"),uw=X.union([tpt,rpt,ipt,opt]),C5=dA.strict(),uoe=KC.extend({method:X.literal("notifications/cancelled"),params:QQ.extend({requestId:coe,reason:X.string().optional()})}),apt=X.object({name:X.string(),version:X.string()}).passthrough(),iAr=X.object({experimental:X.optional(X.object({}).passthrough()),sampling:X.optional(X.object({}).passthrough()),roots:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),oAr=bp.extend({method:X.literal("initialize"),params:uA.extend({protocolVersion:X.string(),capabilities:iAr,clientInfo:apt})});var sAr=X.object({experimental:X.optional(X.object({}).passthrough()),logging:X.optional(X.object({}).passthrough()),completions:X.optional(X.object({}).passthrough()),prompts:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough()),resources:X.optional(X.object({subscribe:X.optional(X.boolean()),listChanged:X.optional(X.boolean())}).passthrough()),tools:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),w_e=dA.extend({protocolVersion:X.string(),capabilities:sAr,serverInfo:apt,instructions:X.optional(X.string())}),cpt=KC.extend({method:X.literal("notifications/initialized")}),lpt=s(t=>cpt.safeParse(t).success,"isInitializedNotification"),doe=bp.extend({method:X.literal("ping")}),aAr=X.object({progress:X.number(),total:X.optional(X.number())}).passthrough(),foe=KC.extend({method:X.literal("notifications/progress"),params:QQ.merge(aAr).extend({progressToken:Z0t})}),poe=bp.extend({params:uA.extend({cursor:X.optional(ept)}).optional()}),moe=dA.extend({nextCursor:X.optional(ept)}),upt=X.object({uri:X.string(),mimeType:X.optional(X.string())}).passthrough(),dpt=upt.extend({text:X.string()}),fpt=upt.extend({blob:X.string().base64()}),cAr=X.object({uri:X.string(),name:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string())}).passthrough(),lAr=X.object({uriTemplate:X.string(),name:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string())}).passthrough(),uAr=poe.extend({method:X.literal("resources/list")}),__e=moe.extend({resources:X.array(cAr)}),dAr=poe.extend({method:X.literal("resources/templates/list")}),S_e=moe.extend({resourceTemplates:X.array(lAr)}),fAr=bp.extend({method:X.literal("resources/read"),params:uA.extend({uri:X.string()})}),R_e=dA.extend({contents:X.array(X.union([dpt,fpt]))}),pAr=KC.extend({method:X.literal("notifications/resources/list_changed")}),mAr=bp.extend({method:X.literal("resources/subscribe"),params:uA.extend({uri:X.string()})}),hAr=bp.extend({method:X.literal("resources/unsubscribe"),params:uA.extend({uri:X.string()})}),gAr=KC.extend({method:X.literal("notifications/resources/updated"),params:QQ.extend({uri:X.string()})}),AAr=X.object({name:X.string(),description:X.optional(X.string()),required:X.optional(X.boolean())}).passthrough(),yAr=X.object({name:X.string(),description:X.optional(X.string()),arguments:X.optional(X.array(AAr))}).passthrough(),CAr=poe.extend({method:X.literal("prompts/list")}),k_e=moe.extend({prompts:X.array(yAr)}),EAr=bp.extend({method:X.literal("prompts/get"),params:uA.extend({name:X.string(),arguments:X.optional(X.record(X.string()))})}),hoe=X.object({type:X.literal("text"),text:X.string()}).passthrough(),goe=X.object({type:X.literal("image"),data:X.string().base64(),mimeType:X.string()}).passthrough(),Aoe=X.object({type:X.literal("audio"),data:X.string().base64(),mimeType:X.string()}).passthrough(),ppt=X.object({type:X.literal("resource"),resource:X.union([dpt,fpt])}).passthrough(),vAr=X.object({role:X.enum(["user","assistant"]),content:X.union([hoe,goe,Aoe,ppt])}).passthrough(),P_e=dA.extend({description:X.optional(X.string()),messages:X.array(vAr)}),qQ=KC.extend({method:X.literal("notifications/prompts/list_changed")}),xAr=X.object({title:X.optional(X.string()),readOnlyHint:X.optional(X.boolean()),destructiveHint:X.optional(X.boolean()),idempotentHint:X.optional(X.boolean()),openWorldHint:X.optional(X.boolean())}).passthrough(),bAr=X.object({name:X.string(),description:X.optional(X.string()),inputSchema:X.object({type:X.literal("object"),properties:X.optional(X.object({}).passthrough())}).passthrough(),annotations:X.optional(xAr)}).passthrough(),IAr=poe.extend({method:X.literal("tools/list")}),B_e=moe.extend({tools:X.array(bAr)}),yoe=dA.extend({content:X.array(X.union([hoe,goe,Aoe,ppt])),isError:X.boolean().default(!1).optional()}),ilo=yoe.or(dA.extend({toolResult:X.unknown()})),TAr=bp.extend({method:X.literal("tools/call"),params:uA.extend({name:X.string(),arguments:X.optional(X.record(X.unknown()))})}),HQ=KC.extend({method:X.literal("notifications/tools/list_changed")}),mpt=X.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),wAr=bp.extend({method:X.literal("logging/setLevel"),params:uA.extend({level:mpt})}),D_e=KC.extend({method:X.literal("notifications/message"),params:QQ.extend({level:mpt,logger:X.optional(X.string()),data:X.unknown()})}),_Ar=X.object({name:X.string().optional()}).passthrough(),SAr=X.object({hints:X.optional(X.array(_Ar)),costPriority:X.optional(X.number().min(0).max(1)),speedPriority:X.optional(X.number().min(0).max(1)),intelligencePriority:X.optional(X.number().min(0).max(1))}).passthrough(),RAr=X.object({role:X.enum(["user","assistant"]),content:X.union([hoe,goe,Aoe])}).passthrough(),kAr=bp.extend({method:X.literal("sampling/createMessage"),params:uA.extend({messages:X.array(RAr),systemPrompt:X.optional(X.string()),includeContext:X.optional(X.enum(["none","thisServer","allServers"])),temperature:X.optional(X.number()),maxTokens:X.number().int(),stopSequences:X.optional(X.array(X.string())),metadata:X.optional(X.object({}).passthrough()),modelPreferences:X.optional(SAr)})}),PAr=dA.extend({model:X.string(),stopReason:X.optional(X.enum(["endTurn","stopSequence","maxTokens"]).or(X.string())),role:X.enum(["user","assistant"]),content:X.discriminatedUnion("type",[hoe,goe,Aoe])}),BAr=X.object({type:X.literal("ref/resource"),uri:X.string()}).passthrough(),DAr=X.object({type:X.literal("ref/prompt"),name:X.string()}).passthrough(),NAr=bp.extend({method:X.literal("completion/complete"),params:uA.extend({ref:X.union([DAr,BAr]),argument:X.object({name:X.string(),value:X.string()}).passthrough()})}),N_e=dA.extend({completion:X.object({values:X.array(X.string()).max(100),total:X.optional(X.number().int()),hasMore:X.optional(X.boolean())}).passthrough()}),LAr=X.object({uri:X.string().startsWith("file://"),name:X.optional(X.string())}).passthrough(),MAr=bp.extend({method:X.literal("roots/list")}),FAr=dA.extend({roots:X.array(LAr)}),OAr=KC.extend({method:X.literal("notifications/roots/list_changed")}),olo=X.union([doe,oAr,NAr,wAr,EAr,CAr,uAr,dAr,fAr,mAr,hAr,TAr,IAr]),slo=X.union([uoe,foe,cpt,OAr]),alo=X.union([C5,PAr,FAr]),clo=X.union([doe,kAr,MAr]),llo=X.union([uoe,foe,D_e,gAr,pAr,HQ,qQ]),ulo=X.union([C5,w_e,N_e,P_e,k_e,__e,S_e,R_e,yoe,B_e]),y5=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var QAr=6e4,Coe=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(uoe,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(foe,r=>{this._onprogress(r)}),this.setRequestHandler(doe,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new y5(lw.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{UQ(r)||spt(r)?this._onresponse(r):loe(r)?this._onrequest(r,n):npt(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new y5(lw.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:lw.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,m)=>this.request(f,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:lw.InternalError,message:(m=f.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),UQ(e))n(e);else{let i=new y5(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,m,h;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let E=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(P=>this._onerror(new Error(`Failed to send cancellation: ${P}`))),l(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return l(_);try{let P=r.parse(_.result);c(P)}catch(P){l(P)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;E((_=n?.signal)===null||_===void 0?void 0:_.reason)});let x=(m=n?.timeout)!==null&&m!==void 0?m:QAr,b=s(()=>E(new y5(lw.RequestTimeout,"Request timed out",{timeout:x})),"timeoutHandler");this._setupTimeout(g,x,n?.maxTotalTimeout,b,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),l(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function hpt(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(hpt,"mergeCapabilities");var Eoe=class extends Coe{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=hpt(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:OQ,capabilities:this._capabilities,clientInfo:this._clientInfo}},w_e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!X0t.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},C5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},N_e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},C5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},P_e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},k_e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},__e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},S_e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},R_e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},C5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},C5,r)}async callTool(e,r=yoe,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},B_e,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var gpt=Ne(require("events"));var dw=class{constructor(e,r,n){this.transport=null;this.emitter=new gpt.default;this.ctx=e,this.mcp=new Eoe({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw os.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw os.error(this.ctx,"Connection failed:",r),await $C(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await O0t(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;ud(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new oo([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await $C(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await $C(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));os.error(this.ctx,o),await $C(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}return n}addListeners(){this.mcp.onclose=()=>{os.info(this.ctx,`MCP server ${this.name} connection closed.`),ud(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{os.error(this.ctx,`MCP server ${this.name} error:`,e),$C(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(D_e,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":os.info(this.ctx,`MCP server ${this.name} log:`,r),ud(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":os.warn(this.ctx,`MCP server ${this.name} log:`,r),t5(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":os.error(this.ctx,`MCP server ${this.name} log:`,r),$C(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:os.info(this.ctx,`MCP server ${this.name} log:`,r),ud(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new oo([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Bi(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new LR({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();d();d();var voe=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function L_e(t){}s(L_e,"noop");function xoe(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=L_e,onError:r=L_e,onRetry:n=L_e,onComment:i}=t,o="",a=!0,c,l="",u="";function f(y){let E=a?y.replace(/^\xEF\xBB\xBF/,""):y,[x,b]=UAr(`${o}${E}`);for(let _ of x)p(_);o=b,a=!1}s(f,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let E=y.indexOf(":");if(E!==-1){let x=y.slice(0,E),b=y[E+1]===" "?2:1,_=y.slice(E+b);m(x,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,E,x){switch(y){case"event":u=E;break;case"data":l=`${l}${E}
`;break;case"id":c=E.includes("\0")?void 0:E;break;case"retry":/^\d+$/.test(E)?n(parseInt(E,10)):r(new voe(`Invalid \`retry\` value: "${E}"`,{type:"invalid-retry",value:E,line:x}));break;default:r(new voe(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:E,line:x}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(xoe,"createParser");function UAr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(UAr,"splitLines");var Ioe=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(Apt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(Apt(this),r)}};function qAr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(qAr,"syntaxError");function M_e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(M_e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${M_e(t.cause)}`:t.message:`${t}`}s(M_e,"flattenError");function Apt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(Apt,"inspectableError");var Cpt=s(t=>{throw TypeError(t)},"__typeError"),G_e=s((t,e,r)=>e.has(t)||Cpt("Cannot "+r),"__accessCheck"),Gi=s((t,e,r)=>(G_e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),ul=s((t,e,r)=>e.has(t)?Cpt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),ha=s((t,e,r,n)=>(G_e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),Nv=s((t,e,r)=>(G_e(t,e,"access private method"),r),"__privateMethod"),a0,E5,LN,boe,Toe,jQ,ON,VQ,fw,MN,QN,FN,WQ,fA,F_e,O_e,Q_e,ypt,U_e,q_e,GQ,H_e,W_e,v5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),ul(this,fA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,ul(this,a0),ul(this,E5),ul(this,LN),ul(this,boe),ul(this,Toe),ul(this,jQ),ul(this,ON),ul(this,VQ,null),ul(this,fw),ul(this,MN),ul(this,QN,null),ul(this,FN,null),ul(this,WQ,null),ul(this,O_e,async o=>{var a;Gi(this,MN).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){Nv(this,fA,GQ).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?ha(this,LN,new URL(o.url)):ha(this,LN,void 0),u!==200){Nv(this,fA,GQ).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){Nv(this,fA,GQ).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Gi(this,a0)===this.CLOSED)return;ha(this,a0,this.OPEN);let p=new Event("open");if((a=Gi(this,WQ))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){Nv(this,fA,GQ).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:y,value:E}=await h.read();E&&Gi(this,MN).feed(m.decode(E,{stream:!y})),y&&(g=!1,Gi(this,MN).reset(),Nv(this,fA,H_e).call(this))}while(g)}),ul(this,Q_e,o=>{ha(this,fw,void 0),!(o.name==="AbortError"||o.type==="aborted")&&Nv(this,fA,H_e).call(this,M_e(o))}),ul(this,U_e,o=>{typeof o.id=="string"&&ha(this,VQ,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Gi(this,LN)?Gi(this,LN).origin:Gi(this,E5).origin,lastEventId:o.id||""});Gi(this,FN)&&(!o.event||o.event==="message")&&Gi(this,FN).call(this,a),this.dispatchEvent(a)}),ul(this,q_e,o=>{ha(this,jQ,o)}),ul(this,W_e,()=>{ha(this,ON,void 0),Gi(this,a0)===this.CONNECTING&&Nv(this,fA,F_e).call(this)});try{if(e instanceof URL)ha(this,E5,e);else if(typeof e=="string")ha(this,E5,new URL(e,HAr()));else throw new Error("Invalid URL")}catch{throw qAr("An invalid or illegal string was specified")}ha(this,MN,xoe({onEvent:Gi(this,U_e),onRetry:Gi(this,q_e)})),ha(this,a0,this.CONNECTING),ha(this,jQ,3e3),ha(this,Toe,(n=r?.fetch)!=null?n:globalThis.fetch),ha(this,boe,(i=r?.withCredentials)!=null?i:!1),Nv(this,fA,F_e).call(this)}get readyState(){return Gi(this,a0)}get url(){return Gi(this,E5).href}get withCredentials(){return Gi(this,boe)}get onerror(){return Gi(this,QN)}set onerror(e){ha(this,QN,e)}get onmessage(){return Gi(this,FN)}set onmessage(e){ha(this,FN,e)}get onopen(){return Gi(this,WQ)}set onopen(e){ha(this,WQ,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Gi(this,ON)&&clearTimeout(Gi(this,ON)),Gi(this,a0)!==this.CLOSED&&(Gi(this,fw)&&Gi(this,fw).abort(),ha(this,a0,this.CLOSED),ha(this,fw,void 0))}};a0=new WeakMap,E5=new WeakMap,LN=new WeakMap,boe=new WeakMap,Toe=new WeakMap,jQ=new WeakMap,ON=new WeakMap,VQ=new WeakMap,fw=new WeakMap,MN=new WeakMap,QN=new WeakMap,FN=new WeakMap,WQ=new WeakMap,fA=new WeakSet,F_e=s(function(){ha(this,a0,this.CONNECTING),ha(this,fw,new AbortController),Gi(this,Toe)(Gi(this,E5),Nv(this,fA,ypt).call(this)).then(Gi(this,O_e)).catch(Gi(this,Q_e))},"connect_fn"),O_e=new WeakMap,Q_e=new WeakMap,ypt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Gi(this,VQ)?{"Last-Event-ID":Gi(this,VQ)}:void 0},cache:"no-store",signal:(t=Gi(this,fw))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),U_e=new WeakMap,q_e=new WeakMap,GQ=s(function(t,e){var r;Gi(this,a0)!==this.CLOSED&&ha(this,a0,this.CLOSED);let n=new Ioe("error",{code:e,message:t});(r=Gi(this,QN))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),H_e=s(function(t,e){var r;if(Gi(this,a0)===this.CLOSED)return;ha(this,a0,this.CONNECTING);let n=new Ioe("error",{code:e,message:t});(r=Gi(this,QN))==null||r.call(this,n),this.dispatchEvent(n),ha(this,ON,setTimeout(Gi(this,W_e),Gi(this,jQ)))},"scheduleReconnect_fn"),W_e=new WeakMap,v5.CONNECTING=0,v5.OPEN=1,v5.CLOSED=2;function HAr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(HAr,"getBaseURL");d();d();var j_e;j_e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function WAr(t){return(await j_e).getRandomValues(new Uint8Array(t))}s(WAr,"getRandomValues");async function GAr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await WAr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(GAr,"random");async function jAr(t){return await GAr(t)}s(jAr,"generateVerifier");async function VAr(t){let e=await(await j_e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(VAr,"generateChallenge");async function V_e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await jAr(t),r=await VAr(e);return{code_verifier:e,code_challenge:r}}s(V_e,"pkceChallenge");d();var Ept=X.object({issuer:X.string(),authorization_endpoint:X.string(),token_endpoint:X.string(),registration_endpoint:X.string().optional(),scopes_supported:X.array(X.string()).optional(),response_types_supported:X.array(X.string()),response_modes_supported:X.array(X.string()).optional(),grant_types_supported:X.array(X.string()).optional(),token_endpoint_auth_methods_supported:X.array(X.string()).optional(),token_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),service_documentation:X.string().optional(),revocation_endpoint:X.string().optional(),revocation_endpoint_auth_methods_supported:X.array(X.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),introspection_endpoint:X.string().optional(),introspection_endpoint_auth_methods_supported:X.array(X.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),code_challenge_methods_supported:X.array(X.string()).optional()}).passthrough(),$_e=X.object({access_token:X.string(),token_type:X.string(),expires_in:X.number().optional(),scope:X.string().optional(),refresh_token:X.string().optional()}).strip(),Vlo=X.object({error:X.string(),error_description:X.string().optional(),error_uri:X.string().optional()}),$Ar=X.object({redirect_uris:X.array(X.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:X.string().optional(),grant_types:X.array(X.string()).optional(),response_types:X.array(X.string()).optional(),client_name:X.string().optional(),client_uri:X.string().optional(),logo_uri:X.string().optional(),scope:X.string().optional(),contacts:X.array(X.string()).optional(),tos_uri:X.string().optional(),policy_uri:X.string().optional(),jwks_uri:X.string().optional(),jwks:X.any().optional(),software_id:X.string().optional(),software_version:X.string().optional()}).strip(),zAr=X.object({client_id:X.string(),client_secret:X.string().optional(),client_id_issued_at:X.number().optional(),client_secret_expires_at:X.number().optional()}).strip(),vpt=$Ar.merge(zAr),$lo=X.object({error:X.string(),error_description:X.string().optional()}).strip(),zlo=X.object({token:X.string(),token_type_hint:X.string().optional()}).strip();var c0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function pw(t,{serverUrl:e,authorizationCode:r}){let n=await YAr(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let l=await ZAr(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(l),i=l}if(r!==void 0){let l=await t.codeVerifier(),u=await JAr(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:l,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let l=await XAr(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(l),"AUTHORIZED"}catch(l){console.error("Could not refresh OAuth tokens:",l)}let{authorizationUrl:a,codeVerifier:c}=await KAr(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(c),await t.redirectToAuthorization(a),"REDIRECT"}s(pw,"auth");async function YAr(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:OQ}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return Ept.parse(await i.json())}}s(YAr,"discoverOAuthMetadata");async function KAr(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let c=await V_e(),l=c.code_verifier,u=c.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:l}}s(KAr,"startAuthorization");async function JAr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",c;if(e){if(c=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else c=new URL("/token",t);let l=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&l.set("client_secret",r.client_secret);let u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return $_e.parse(await u.json())}s(JAr,"exchangeAuthorization");async function XAr(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!c.ok)throw new Error(`Token refresh failed: HTTP ${c.status}`);return $_e.parse(await c.json())}s(XAr,"refreshAuthorization");async function ZAr(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return vpt.parse(await i.json())}s(ZAr,"registerClient");var z_e=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},woe=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new c0("No auth provider");let r;try{r=await pw(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new c0;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new v5(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new z_e(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(c){r(c),(o=this.onerror)===null||o===void 0||o.call(this,c),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let c=i,l;try{l=uw.parse(JSON.parse(c.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,l)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new c0("No auth provider");if(await pw(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new c0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let c={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},l=await fetch(this._endpoint,c);if(!l.ok){if(l.status===401&&this._authProvider){if(await pw(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new c0;return this.send(e)}let u=await l.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${l.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var _oe=class extends dw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new woe(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(HQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),ud(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(rv)}),this.mcp.setNotificationHandler(qQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),ud(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(rv)})}};d();d();var dmt=Ne(lmt(),1),$Q=Ne(require("node:process"),1),fmt=require("node:stream");d();var Roe=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),wyr(r)}clear(){this._buffer=void 0}};function wyr(t){return uw.parse(JSON.parse(t))}s(wyr,"deserializeMessage");function umt(t){return JSON.stringify(t)+`
`}s(umt,"serializeMessage");var _yr=$Q.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Syr(){let t={};for(let e of _yr){let r=$Q.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Syr,"getDefaultEnvironment");var koe=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Roe,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new fmt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c,l;this._process=(0,dmt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:Syr(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:$Q.default.platform==="win32"&&Ryr(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var f,p;if(u.name==="AbortError"){(f=this.onclose)===null||f===void 0||f.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var f;this._process=void 0,(f=this.onclose)===null||f===void 0||f.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),(c=this._process.stdout)===null||c===void 0||c.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(l=this._process.stdout)===null||l===void 0||l.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=umt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function Ryr(){return"type"in $Q.default}s(Ryr,"isElectron");var Poe=class extends dw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...F0t(),...r.env||{}},r.stderr="pipe",new koe(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{t5(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};d();d();d();var Boe=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=xoe({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var kyr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},zQ=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Doe=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:kyr}async _authThenStart(){var e;if(!this._authProvider)throw new c0("No auth provider");let r;try{r=await pw(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new c0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new zQ(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var c,l,u,f;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new Boe).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=uw.parse(JSON.parse(m.data));i!==void 0&&UQ(g)&&(g.id=i),(c=this.onmessage)===null||c===void 0||c.call(this,g)}catch(g){(l=this.onerror)===null||l===void 0||l.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(f=this.onerror)===null||f===void 0||f.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new c0("No auth provider");if(await pw(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new c0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:c}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:loe(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let l=await this._commonHeaders();l.set("content-type","application/json"),l.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:l,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},f=await fetch(this._url,u),p=f.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!f.ok){if(f.status===401&&this._authProvider){if(await pw(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new c0;return this.send(e)}let y=await f.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${f.status}): ${y}`)}if(f.status===202){lpt(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=f.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(f.body,{onresumptiontoken:c});else if(g?.includes("application/json")){let y=await f.json(),E=Array.isArray(y)?y.map(x=>uw.parse(x)):[uw.parse(y)];for(let x of E)(i=this.onmessage)===null||i===void 0||i.call(this,x)}else throw new zQ(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new zQ(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var Noe=class extends dw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new Doe(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(HQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),ud(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(rv)}),this.mcp.setNotificationHandler(qQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),ud(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(rv)})}};d();var Loe=class extends WT{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(pC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var pmt=Ne(Lc());var Moe=class t extends th{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new eoe;this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new pmt.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){os.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(sd).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));os.error(this.ctx,a),await $C(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await ud(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new _oe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Noe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Poe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(rv,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await ud(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(os.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;os.info(this.ctx,c),ud(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await $C(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(wc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(xr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;os.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(sd).registerTool(new Loe({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},p=>(os.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(sd).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await ud(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(rv),await i.cleanup())}this.MCPServersMap.clear()}};d();var mmt=Ne(Lc());var Foe=class t extends Qg{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new mmt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(xr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var Qoe=Ne(Lc());var Pyr=new Qoe.ProtocolRequestType("copilot/showPanelMessageRequest"),Byr=new Qoe.ProtocolNotificationType("copilot/showPanelMessage"),Ooe=class extends AD{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(xr).connection.sendNotification(Byr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(xr).connection,i;try{i=await n.sendRequest(Pyr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${bE(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var Dyr=new vt("fetcher"),Nyr="https://default.exp-tas.com/",Uoe=class extends jn{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Nu(i)||`${r}/`.startsWith(Nyr))throw i;Dyr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var hmt=new vt("fetcher"),qoe=class extends jn{constructor(r,n=new TN(r),i=new bN(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new Uoe(r,n,i,()=>{hmt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Av).once(()=>{this.updateFetcher()}),r.get(Zg).onConfigChange(kt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=vi(r,kt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(ds).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=vi(this.ctx,kt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(hmt.debug(this.ctx,n),this.currentFetcher=r)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var Hoe=class extends wc{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(xr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};d();d();var gmt=Ne(require("crypto")),Amt=require("os");var Lyr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function Myr(t){let e=t.replace(/-/g,":").toLowerCase();return!Lyr.has(e)}s(Myr,"validateMacAddress");function Fyr(){let t=(0,Amt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(Myr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(Fyr,"getMac");var iSe;function Oyr(){try{let t=Fyr();return gmt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(Oyr,"getMacMachineId");function ymt(){return iSe||(iSe=Oyr()||cr()),iSe}s(ymt,"getMachineId");var Qyr=cr()+Date.now(),Cmt=new As(Qyr,ymt());d();UV();var Woe=class extends iu{constructor(r,n=new oSe){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(xr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},oSe=class extends iu{static{s(this,"SpawnUrlOpener")}async open(e){await jL(e)}};d();d();var Goe=class extends ere{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(eA).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(eA).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(eA).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var joe=class extends id{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new Goe(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(ds).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function Emt(t){let e=new Zg(process.env),r=rit(e);r.set(Zg,e),r.set(Av,new Av),r.set(jn,new qoe(r)),r.set(ka,new ka(r)),xwe(r,{});let n=yQe();r.set(pu,n);let i=new kQ(r);r.set(Qr,i),r.set(kQ,i);let o=new q_(r,n);r.set(q_,o),r.set(Dn,new Dn(r,process.env)),r.set(A2,new A2),r.set(Ef,new Ef(r,"agent")),r.set(As,Cmt),r.set(nn,new Ere),r.set(e5,m0t()),r.set(Ss,new Ss),r.set(yo,M0t),r.set(B2,new Oie(r)),r.set(id,new joe(r)),r.set(eA,new eA(r)),r.set(Rl,new Rl),r.set(uc,DK(r,Yut)),r.set(Lm,new Lm(r)),r.set(Qy,new V3),iat(r),tre(r),bat(r),Xje(r),r.set(xr,new xr(r,t)),r.set(wc,new Hoe(r)),r.set(AD,new Ooe(r)),r.set(iu,new Woe(r)),r.set(po,new Zie(r)),r.set(BQ,new BQ(r));let a=new ow(r);return r.set(pr,a),r.set(ow,a),r.set(bd,new gD(r,process.env)),r.set(Mc,new Mc(r)),R0t(r),Sit(r),r.set(Xd,new Xd),r.set(rw,new rw),r.set(oA,new oA),r.set(Fd,new Uie),r.set(WC,new WC),r.set(Ig,new Xte(r)),r.set(Fy,new WD),r.set(Jg,new Jg(r)),r.set(tv,new tv(r)),r.set(qc,new qc(r)),r.set(xu,new Kie(r)),r.set(yT,new Xie(r)),r.set(pC,new Jie(r)),r.set(sd,new sd(r)),r.set(pv,new pv(r)),r.set(Xg,new Xg(r)),r.set(th,new Moe(r)),r.set(Qg,new Foe(r)),r.set(mC,new mC),r.set(Jf,new Jf),r.set(EC,new EC(r)),r.set(eh,new Aee([new rre,new nre])),r}s(Emt,"createLanguageServerContext");d();var sSe=require("events"),YQ=Ne(require("fs"));UV();var $oe=Ne(Lc());d();var xmt=Ne(require("fs")),bmt=Ne(require("http")),HN=Ne(require("path"));var Voe=class{constructor(e,r){this.port=e;let n;this.server=bmt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{vmt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{vmt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;HN.basename(__dirname)!=="debug"&&(a=HN.dirname(__dirname)),n??=xmt.readFileSync(HN.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function vmt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(vmt,"writeData");var aSe=class extends $oe.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},cSe=class extends $oe.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function Imt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new sSe.EventEmitter;let c=new Voe(i,n).listen();i===0&&await jL(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=YQ.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=YQ.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&YQ.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new sSe.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new cSe(e,n),r=new aSe(r,n)),[e,r]}s(Imt,"wrapTransports");async function _mt(){let t=tHe(process.argv.slice(2)).version(new lo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new ph.IPCMessageReader(process),n=new ph.IPCMessageWriter(process)):e.stdio?(r=new ph.StreamMessageReader(process.stdin),n=new ph.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await Lv.mkdtemp(Tmt.default.tmpdir()+"/github-copilot-"));try{let c=Bme(),l=JSON.parse(await Lv.readFile(KQ.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await Lv.readFile(KQ.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let m=`${p}:${Zh}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:Zh},f=!0)}f&&await Lv.writeFile(KQ.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await Lv.rm(KQ.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,ph.createConnection)(ph.ProposedFeatures.all,...await Imt(process.env,r,n)),o=Emt(i);console=nUe(o);let a=o.get(xr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(_mt,"main");wmt.isMainThread?require.main===module&&_mt():tUe()&&rUe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
